---
author: msmimart
ms.service: active-directory-b2c
ms.subservice: B2C
ms.topic: include
ms.date: 01/18/2021
ms.author: mimart
ms.openlocfilehash: 4f6ba0892438d49dcc982a01a6b30dfa36ed43b5
ms.sourcegitcommit: fc401c220eaa40f6b3c8344db84b801aa9ff7185
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/20/2021
ms.locfileid: "98674243"
---
## <a name="add-a-user-journey"></a>Добавление пути взаимодействия пользователя 

На этом этапе поставщик удостоверений настроен, но еще не доступен ни на одной из страниц входа. Если у вас нет собственного пользовательского пути взаимодействия с пользователем, создайте дубликат существующего шаблона. в противном случае перейдите к следующему шагу. 

1. Откройте файл *TrustFrameworkBase.xml* из начального пакета.
1. Найдите и скопируйте все содержимое элемента **UserJourney**, в котором присутствует запись `Id="SignUpOrSignIn"`.
1. Откройте файл *TrustFrameworkExtensions.xml* и найдите элемент **UserJourneys**. Если элемент не существует, добавьте его.
1. Вставьте все скопированное содержимое элемента **UserJourney** в качестве дочернего элемента в элемент **UserJourneys**.
1. Переименуйте идентификатор пути взаимодействия пользователя. Например, `Id="CustomSignUpSignIn"`.

## <a name="add-the-identity-provider-to-a-user-journey"></a>Добавление поставщика удостоверений к пути взаимодействия пользователя 

Теперь, когда пользователь с пользователем, добавьте новый поставщик удостоверений для пути взаимодействия пользователя. Сначала добавьте кнопку входа, а затем свяжите кнопку с действием. Это действие является техническим профилем, который вы создали ранее.

1. Найдите элемент "этап оркестрации", включающий `Type="CombinedSignInAndSignUp"` или `Type="ClaimsProviderSelection"` в пути взаимодействия пользователя. Обычно это первый этап оркестрации. Элемент **клаимспровидерселектионс** содержит список поставщиков удостоверений, с которыми может входить пользователь. Порядок элементов управляет порядком кнопок входа, представленных пользователем. Добавьте XML-элемент **клаимспровидерселектион** . Присвойте параметру **таржетклаимсексчанжеид** понятное имя.

1. На следующем шаге оркестрации добавьте элемент **ClaimsExchange** . Задайте в качестве **идентификатора** значение идентификатора обмена утверждениями целевого объекта. Обновите значение **течникалпрофилереференцеид** , чтобы оно было идентификатором технического профиля, созданного ранее.

В следующем коде XML показаны первые два этапа оркестрации взаимодействия пользователя с поставщиком удостоверений.