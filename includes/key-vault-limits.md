---
author: amitbapat
ms.service: key-vault
ms.topic: include
ms.date: 03/09/2021
ms.author: ambapat
ms.openlocfilehash: d934d40cad5f4eec929cfd273b6e30ea291e48d5
ms.sourcegitcommit: 225e4b45844e845bc41d5c043587a61e6b6ce5ae
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/11/2021
ms.locfileid: "103010968"
---
Служба Azure Key Vault поддерживает два типа ресурсов: хранилища и управляемые устройства HSM. В следующих двух разделах описаны ограничения службы для каждого из них.

### <a name="resource-type-vault"></a>Тип ресурса: хранилище

В этом разделе описаны ограничения службы для типа ресурса `vaults`.

#### <a name="key-transactions-maximum-transactions-allowed-in-10-seconds-per-vault-per-regionsup1sup"></a>Транзакции с ключами (максимальное количество транзакций, разрешенных в течение 10 секунд, на хранилище для одного региона<sup>1</sup>):

|Тип ключа|Ключ HSM<br>Ключ CREATE|Ключ HSM<br>Все остальные транзакции|Ключ ПО<br>Ключ CREATE|Ключ ПО<br>Все остальные транзакции|
|:---|---:|---:|---:|---:|
|2048-битовый RSA|5|1000|10|2 000|
|3072-битовый RSA|5|250|10|500|
|4096-битовый RSA|5|125|10|250|
|ECC P-256|5|1000|10|2 000|
|ECC P-384|5|1000|10|2 000|
|ECC P-521|5|1000|10|2 000|
|ECC SECP256K1|5|1000|10|2 000|
||||||

> [!NOTE]
> В таблице выше показано, что для 2048-битовых программных ключей RSA разрешено 2000 транзакций GET в 10 секунд. Для 2048-битовых HSM-ключей RSA разрешено 1000 транзакций GET в 10 секунд.
>
> Пороговые значения регулирования являются взвешенными, и ограничения применяются к их суммарным значениям. Например, как показано в таблице выше, при выполнении операций GET с HSM-ключами RSA затраты на использование 4096-битовых ключей будут в восемь раз выше по сравнению с 2048-битовыми ключами (так как 1000/125 = 8).
>
> За заданный 10-секундный интервал клиент Azure Key Vault может выполнить *только одну* из следующих операций, прежде чем он получит код состояния HTTP `429` для регулирования:
> - 2000 транзакций GET с 2048-битовыми программными ключами RSA;
> - 1000 транзакций GET с 2048-битовыми HSM-ключами RSA;
> - 125 транзакций GET с 4096-битовыми HSM-ключами RSA;
> - 124 транзакции GET с 4096-битовыми HSM-ключами RSA и 8 транзакций GET с 2048-битовыми HSM-ключами RSA.

#### <a name="secrets-managed-storage-account-keys-and-vault-transactions"></a>Секреты, ключи управляемой учетной записи хранения и транзакции с хранилищем:

| Тип транзакций | Максимальное количество транзакций, разрешенных в течение 10 секунд, на хранилище для одного региона<sup>1</sup> |
| --- | --- |
| Все транзакции |2 000 |

Дополнительные сведения о регулировании при превышении этих ограничений см. в [руководстве по регулированию Azure Key Vault](../articles/key-vault/general/overview-throttling.md).

<sup>1</sup> Ограничение для всех типов транзакций на уровне подписки в пять раз превышает ограничение на уровне хранилища ключей. Например, для других транзакций HSM на каждую подписку предусмотрено максимум 5000 транзакций в течение 10 секунд.

#### <a name="azure-private-link-integration"></a>Интеграция с Приватным каналом Azure

> [!NOTE]
> Количество хранилищ ключей с включенными частными конечными точками для каждой подписки можно настраивать. Ниже приведено ограничение по умолчанию. Если вы хотите запросить увеличение ограничения для вашей службы, отправьте электронное письмо по адресу akv-privatelink@microsoft.com. Мы одобряем эти запросы в зависимости от индивидуальной ситуации.

| Ресурс | Ограничение |
| -------- | -----:|
| Количество частных конечных точек на хранилище ключей | 64 |
| Количество хранилищ ключей с частными конечными точками на одну подписку | 400 |

### <a name="resource-type-managed-hsm-preview"></a>Тип ресурса: управляемое устройство HSM (предварительная версия)

В этом разделе описаны ограничения службы для типа ресурса `managed HSM`.

#### <a name="object-limits"></a>Ограничения на объекты

|Элемент|Ограничения|
|----|------:|
Количество экземпляров HSM на одну подписку для одного региона|1 (на время действия предварительной версии)
Число ключей на пул HSM|5000
Число версий на ключ|100
Число определений настраиваемых ролей на HSM|50
Число назначений ролей на область HSM|50
Число назначений ролей в каждой отдельной области действия ключа|10
|||

#### <a name="transaction-limits-for-administrative-operations-number-of-operations-per-second-per-hsm-instance"></a>Ограничения на транзакции для административных операций (количество операций в секунду на каждый экземпляр HSM)
|Операция |Число операций в секунду|
|----|------:|
Все операции RBAC<br/>(включает все операции CRUD для определений ролей и назначений ролей)|5
Полное резервное копирование или восстановление HSM<br/>(поддерживается только одна одновременно выполняемая операция резервного копирования или восстановления на каждый экземпляр HSM)|1

#### <a name="transaction-limits-for-cryptographic-operations-number-of-operations-per-second-per-hsm-instance"></a>Ограничения на транзакции для операций шифрования (количество операций в секунду на каждый экземпляр HSM)

- Каждый управляемый экземпляр HSM состоит из трех разделов HSM с балансировкой нагрузки. Ограничения пропускной способности зависят от базовой мощности оборудования, выделенной для каждого раздела. В таблицах ниже показана максимальная пропускная способность при доступности минимум одного раздела. Фактическая пропускная способность может быть в три раза выше, если доступны все три раздела.
- В контексте указанных ограничений пропускной способности предполагается, что для достижения максимальной пропускной способности используется один ключ. Например, если используется один ключ RSA-2048, максимальная пропускная способность будет составлять 1100 операций входа. Если вы используете 1100 разных ключей с одной транзакцией в секунду, они не смогут достичь такой же пропускной способности.

##### <a name="rsa-key-operations-number-of-operations-per-second-per-hsm-instance"></a>Операции с ключами RSA (количество операций в секунду на каждый экземпляр HSM)

|Операция|2048-битный|3072-битный|4096-битный|
|--|--:|--:|--:|
Создать ключ|1| 1| 1
Удаление ключа (обратимое удаление)|10|10|10 
Очистка ключа|10|10|10 
Создание резервной копии ключа|10|10|10 
Восстановление ключа|10|10|10 
Получение сведений о ключе|1100|1100|1100
Шифрование|10000|10000|6000
расшифровка;|1100|360|160
оборачивание;|10000|10000|6000
разворачивание;|1100|360|160
Sign|1100|360|160
Проверка|10000|10000|6000
|||||

##### <a name="ec-key-operations-number-of-operations-per-second-per-hsm-instance"></a>Операции с ключами EC (количество операций в секунду на каждый экземпляр HSM)

В этой таблице указано количество операций в секунду для каждого типа кривой.

|Операция|P-256|P-256K|P-384|P-521|
|---|---:|---:|---:|---:|
Создать ключ| 1| 1| 1| 1
Удаление ключа (обратимое удаление)|10|10|10|10
Очистка ключа|10|10|10|10
Создание резервной копии ключа|10|10|10|10
Восстановление ключа|10|10|10|10
Получение сведений о ключе|1100|1100|1100|1100
Sign|260|260|165|56
Проверка|130|130|82|28
||||||


##### <a name="aes-key-operations-number-of-operations-per-second-per-hsm-instance"></a>Операции с ключами AES (количество операций в секунду на каждый экземпляр HSM)
- В контексте операций шифрования и расшифровки предполагается, что используется пакет размером 4 КБ.
- Ограничения пропускной способности для шифрования и расшифровки применяются к алгоритмам AES-CBC и AES-GCM.
- Ограничения пропускной способности для упаковки и распаковки применяются к алгоритму AES-KW.

|Операция|128-разрядное|192-битный|256-битный|
|--|--:|--:|--:|
Создать ключ|1| 1| 1
Удаление ключа (обратимое удаление)|10|10|10
Очистка ключа|10|10|10
Создание резервной копии ключа|10|10|10
Восстановление ключа|10|10|10
Получение сведений о ключе|1100|1100|1100
Шифрование|8000|8000 |8000 
расшифровка;|8000|8000|8000
оборачивание;|9000|9000|9000
разворачивание;|9000|9000|9000

