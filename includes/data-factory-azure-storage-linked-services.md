---
author: linda33wj
ms.service: data-factory
ms.topic: include
ms.date: 11/09/2018
ms.author: jingwang
ms.openlocfilehash: 37917e0ed663675677f1d0452b5796120ca2694e
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "96001756"
---
### <a name="azure-storage-linked-service"></a>Связанная служба хранилища Azure
**Связанная служба хранилища Azure** позволяет связать учетную запись хранения Azure с фабрикой данных Azure с помощью **ключа учетной записи**, который предоставляет фабрике данных глобальный доступ к службе хранилища Azure. В таблице ниже приведено описание элементов JSON, которые относятся к связанной службе хранилища Azure.

| Свойство | Описание | Обязательно |
|:--- |:--- |:--- |
| type |Для свойства type необходимо задать значение **AzureStorage** |Да |
| connectionString |В свойстве connectionString указываются сведения, необходимые для подключения к службе хранилища Azure. |Да |

Сведения о том, как получить ключи доступа к учетной записи хранения, см. в разделе [Управление ключами доступа к учетной записи хранения](../articles/storage/common/storage-account-keys-manage.md).

**Пример**.  

```json
{
    "name": "StorageLinkedService",
    "properties": {
        "type": "AzureStorage",
        "typeProperties": {
            "connectionString": "DefaultEndpointsProtocol=https;AccountName=<accountname>;AccountKey=<accountkey>"
        }
    }
}
```

### <a name="azure-storage-sas-linked-service"></a>Связанная служба SAS хранилища Azure
Подписанный URL-адрес (SAS) обеспечивает делегированный доступ к ресурсам в вашей учетной записи хранения. Это позволяет предоставить клиенту ограниченное право на работу с объектами в вашей учетной записи хранения на определенный период времени и с определенным набором разрешений, не сообщая ему ключи доступа к своей учетной записи. SAS — это URI, который в своих параметрах запроса содержит все сведения, необходимые для доступа к ресурсу хранилища с прохождением аутентификации. Для доступа к ресурсам хранилища с помощью SAS клиенту достаточно передать SAS в соответствующий конструктор или метод. Дополнительные сведения о подписанных URL-адресах см. в статье об [использование подписанных URL-адресов SAS в службе хранилища Azure](../articles/storage/common/storage-sas-overview.md).

> [!IMPORTANT]
> Теперь фабрика данных Azure поддерживает только **SAS службы**, а не SAS учетной записи. Обратите внимание: URL-адрес SAS, который можно создать на портале Azure или в обозревателе хранилищ, является учетной записью SAS, которая не поддерживается в фабрике данных.

> [!TIP]
> Чтобы сгенерировать подписанный URL-адрес службы для учетной записи хранения, выполните такие команды PowerShell, предварительно заменив заполнители и предоставив необходимые разрешения: `$context = New-AzStorageContext -StorageAccountName <accountName> -StorageAccountKey <accountKey>`
> `New-AzStorageContainerSASToken -Name <containerName> -Context $context -Permission rwdl -StartTime <startTime> -ExpiryTime <endTime> -FullUri`.

Связанная служба SAS хранилища Azure позволяет связать учетную запись хранения Azure с фабрикой данных Azure с помощью подписанного URL-адреса (SAS). В этом случае фабрика данных получает ограниченный или привязанный ко времени доступ ко всем или конкретным ресурсам (BLOB-объектам или контейнерам) в хранилище. В таблице ниже приведено описание элементов JSON, которые относятся к связанной службе SAS хранилища Azure. 

| Свойство | Описание | Обязательно |
|:--- |:--- |:--- |
| type |Для свойства type необходимо задать значение **AzureStorageSas** |Да |
| sasUri |Укажите URI подписанного URL-адреса к ресурсам хранилища Azure, например BLOB-объектам, контейнерам или таблицам.  |Да |

**Пример**.

```json
{
    "name": "StorageSasLinkedService",
    "properties": {
        "type": "AzureStorageSas",
        "typeProperties": {
            "sasUri": "<Specify SAS URI of the Azure Storage resource>"
        }
    }
}
```

При создании **URI SAS** следует принять во внимание следующие моменты:  

* Задайте для объектов соответствующие **разрешения** на чтение или запись. Они устанавливаются с учетом назначения связанной службы (чтение, запись, чтение и запись) в фабрике данных.
* Задайте **время окончания срока действия** соответствующим образом. Убедитесь, что срок действия доступа к объектам хранилища Azure не истекает в период активности конвейера.
* В зависимости от потребности URI следует создать на нужном уровне контейнера, большого двоичного объекта или таблицы. URI SAS для большого двоичного объекта Azure позволяет службе фабрики данных обращаться к данному конкретному большому двоичному объекту. URI SAS для контейнера больших двоичных объектов Azure позволяет службе фабрики данных выполнять итерацию по большим двоичным объектам в этом контейнере. Чтобы предоставить доступ к большему или меньшему количеству объектов позднее или обновить URI SAS, не забудьте обновить связанную службу с помощью нового URI.   

