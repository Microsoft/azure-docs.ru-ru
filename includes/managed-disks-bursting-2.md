---
title: включить файл
description: включить файл
services: virtual-machines
author: albecker1
ms.service: virtual-machines
ms.topic: include
ms.date: 04/27/2020
ms.author: albecker1
ms.custom: include file
ms.openlocfilehash: 28c92004fe67de35e5776cd7dc24cf534ec6f8f3
ms.sourcegitcommit: 31cfd3782a448068c0ff1105abe06035ee7b672a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/10/2021
ms.locfileid: "98061144"
---
## <a name="common-scenarios"></a>Распространенные сценарии
В следующих сценариях существенно повышается эффективность разбивки на пакеты.
- **Повышение времени загрузки**  . с разбивкой на систему экземпляр будет загружаться с значительно более высокой скоростью. Например, диском ОС по умолчанию для виртуальных машин с поддержкой Premium является диск P4, который является подготовленной производительностью до 120 операций ввода-вывода в секунду и 25 МБ/с. С разбивкой на пакеты P4 может пройти до 3500 операций ввода-вывода в секунду и 170 МБ/с, что позволяет ускорить загрузку, 6X.
- **Обработка заданий пакетной** службы — некоторые рабочие нагрузки приложения являются циклическими по своей природе и нуждаются в базовой производительности в большинстве случаев и нуждаются в более высокой производительности в течение короткого периода времени. Примером этого является программа учета, которая ежедневно обрабатывает транзакции, требующие небольшого объема трафика на диске. Затем в конце месяца выполняется согласование отчетов, требующих значительно большего объема трафика на диске.
- **Готовность к пиковому трафику** — веб-серверы и их приложения могут столкнуться с пререзкостью трафика в любое время. Если веб-сервер поддерживается виртуальными машинами или дисками с помощью пакетной поддержки, эти серверы лучше подходят для управления пиковыми нагрузками трафика. 

## <a name="bursting-flow"></a>Поток пакета
Система разбивки по кредиту применяется таким же образом, как на уровне виртуальной машины, так и на уровне диска. Ваш ресурс (виртуальная машина или диск) будет начинаться с полностью учтенных кредитов. Эти кредиты позволят вам выполнять пакет в течение 30 минут с максимальной скоростью пакетов. Разбивка на пакеты накапливается, когда ресурс выполняется в соответствии с ограничениями дискового хранилища производительности. Для всех операций ввода-вывода и МБ/с, которые используются в ресурсе ниже предельного объема, который вы начали накапливать кредиты. Если в ресурсе есть начисленные кредиты для разбивки на пакеты, а для рабочей нагрузки требуется повышенная производительность, ваш ресурс может использовать эти кредиты для ограничения производительности ввода-вывода диска, чтобы удовлетворить потребности.



![Схема разбивки на сегменты](media/managed-disks-bursting/bucket-diagram.jpg)

Вы полностью захотите использовать 30 минут для ускорения работы. Его можно использовать в течение 30 минут последовательно или раз в течение дня. При развертывании продукта он готов к полному кредиту, и, когда он удаляет кредиты, он занимает меньше дней, чтобы снова получить полное финансовое количество кредитов. Вы можете накапливать и тратить свои кредиты на свой счет по собственному усмотрению, а в течение 30 минут нет необходимости в полном объеме. Обратите внимание, что при накоплении пакетов он отличается для каждого ресурса, так как он основан на неиспользуемых операциях ввода-вывода и МБ/с в соответствии с их объемом производительности. Это означает, что более высокие базовые показатели производительности могут начислять свои объемы нагрузки быстрее, чем снижение производительности базовых продуктов. Например, состояние простоя диска P1 без активности будет начислять 120 операций ввода-вывода в секунду, в то время как P20 диск начисляется 2 300 операций ввода-вывода в секунду, а состояние простоя без активности.

## <a name="bursting-states"></a>Состояния пакетов
Существует три состояния, в которых ресурс может быть включен с поддержкой разбивки:
- **Начисление** — трафик ввода-вывода ресурса использует меньше целевого объекта производительности. Накопление пакетных кредитов для операций ввода-вывода в секунду и МБ/с выполняется отдельно друг от друга. Ваш ресурс может начислять кредиты операций ввода-вывода в секунду и расходов на кредиты (МБ/с) или наоборот.
- **Разбивка** данных — трафик ресурса использует больше целевого объекта производительности. Пакетный трафик будет независимо потреблять кредиты операций ввода-вывода или пропускной способности.
- **Constant** — трафик ресурса в точности соответствует целевому показателю производительности.

## <a name="examples-of-bursting"></a>Примеры пакетов
В следующих примерах показано, как работает пакетная работа с различными сочетаниями виртуальных машин и дисков. Чтобы сделать примеры простыми, мы будем сосредоточиться на МБ/с, но одна и та же логика применяется независимо к операциям ввода-вывода.

### <a name="non-burstable-virtual-machine-with-burstable-disks"></a>Невиртуализованная виртуальная машина с дисковыми накопителями
**Сочетание виртуальных машин и дисков:** 
- Standard_D8as_v4 
    - Некэшированных МБ/с: 192
- Диск с ОС P4
    - Подготовлено МБ/с: 25
    - Макс. МБ/с: 170 
- Диски данных с 2 P10 
    - Подготовлено МБ/с: 100
    - Макс. МБ/с: 170

 Когда виртуальная машина загрузится, она извлечет данные с диска операционной системы. Так как диск ОС является частью виртуальной машины, на которой выполняется начало работы, диск ОС будет заполнен пакетами. Эти кредиты допускают запуск диска ОС в 170 МБ/с, как показано ниже:

![Неустранимая нагрузка на диск при ускоренном запуске виртуальной машины](media/managed-disks-bursting/nonbursting-vm-busting-disk/nonbusting-vm-bursting-disk-startup.jpg)

После завершения загрузки приложение запускается на виртуальной машине и имеет некритическую рабочую нагрузку. Для этой рабочей нагрузки требуется 15 МБ/с, равномерно распределенная по всем дискам:

![Безнагрузка на нерабочее время на диске виртуальной машины](media/managed-disks-bursting/nonbursting-vm-busting-disk/nonbusting-vm-bursting-disk-idling.jpg)

Затем приложению необходимо обработать пакетное задание, для которого требуется 192 МБ/с. Диск операционной системы использует 2 МБ/с, а остальные диски равномерно распределяются между дисками данных:

![Нерабочее увеличение нагрузки на виртуальные машины](media/managed-disks-bursting/nonbursting-vm-busting-disk/nonbusting-vm-bursting-disk-bursting.jpg)

### <a name="burstable-virtual-machine-with-non-burstable-disks"></a>Многоуровневая виртуальная машина с дисками, не поддерживающими разбивку на пакеты
**Сочетание виртуальных машин и дисков:** 
- Standard_L8s_v2 
    - Некэшированных МБ/с: 160
    - Макс. МБ/с: 1 280
- Диск ОС P50
    - Подготовлено МБ/с: 250 
- Диски данных с 2 P10 
    - Подготовлено МБ/с: 250

 После начальной загрузки приложение запускается на виртуальной машине и имеет некритическую рабочую нагрузку. Для этой рабочей нагрузки требуется 30 МБ/с, равномерно распределенная по всем дискам: ![ неразрывный диск виртуальной машины без разбивки на пакеты](media/managed-disks-bursting/bursting-vm-nonbursting-disk/burst-vm-nonbursting-disk-normal.jpg)

Затем приложению необходимо обработать пакетное задание, для которого требуется 600 МБ/с. Standard_L8s_v2 выполняет нагрузку в соответствии с этим спросом, а затем запросы к дискам равномерно распределяются по P50 дискам:

![Увеличение нагрузки на виртуальные машины без разбивки на диск](media/managed-disks-bursting/bursting-vm-nonbursting-disk/burst-vm-nonbursting-disk-bursting.jpg)
### <a name="burstable-virtual-machine-with-burstable-disks"></a>Пакетная виртуальная машина с жестко дисковыми данными
**Сочетание виртуальных машин и дисков:** 
- Standard_L8s_v2 
    - Некэшированных МБ/с: 160
    - Макс. МБ/с: 1 280
- Диск с ОС P4
    - Подготовлено МБ/с: 25
    - Макс. МБ/с: 170 
- 2 диска данных P4 
    - Подготовлено МБ/с: 25
    - Макс. МБ/с: 170 

Когда виртуальная машина загрузится, она будет запрашивать предельное число 1 280 МБ/с с диска операционной системы, а диск операционной системы будет отвечать с максимальной производительностью 170 МБ/с.

![Ускоренная загрузка виртуальной машины](media/managed-disks-bursting/bursting-vm-bursting-disk/burst-vm-burst-disk-startup.jpg)

После завершения загрузки на виртуальной машине запускается приложение. Приложение имеет некритическую рабочую нагрузку, для которой требуется 15 МБ/с, равномерно распределенная по всем дискам:

![Пакетная передача виртуальной машины в неактивном режиме](media/managed-disks-bursting/bursting-vm-bursting-disk/burst-vm-burst-disk-idling.jpg)

Затем приложению необходимо обработать пакетное задание, для которого требуется 360 МБ/с. Standard_L8s_v2 в соответствии с этим спросом, а затем запрашивает. Диску ОС требуются только 20 МБ/с. Оставшиеся 340 МБ/с обрабатываются дисками данных P4:  

![Увеличение нагрузки на виртуальные машины](media/managed-disks-bursting/bursting-vm-bursting-disk/burst-vm-burst-disk-bursting.jpg)
