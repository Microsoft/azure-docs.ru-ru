---
author: tamram
ms.service: storage
ms.topic: include
ms.date: 10/26/2018
ms.author: tamram
ms.openlocfilehash: eeea7b1fed0c2a1f805e21b4dec9ec3cad7fc976
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "95996830"
---
## <a name="configure-your-application-to-access-azure-storage"></a>Настройка приложения для доступа к хранилищу Azure
Существует два способа проверки подлинности приложения при получении доступа к службам хранения:

* Общий ключ. Общий ключ следует использовать только для тестирования
* Подписанный URL-адрес (SAS). Используйте SAS для рабочих приложений

### <a name="shared-key"></a>Общий ключ
Проверка подлинности с помощью общего ключа означает, что приложение будет использовать имя и ключ учетной записи для доступа к службам хранилища. Чтобы быстро показать, как использовать эту библиотеку, в данном руководстве по началу работы мы используем аутентификацию с общим ключом.

> [!WARNING] 
> **Аутентификацию с общим ключом следует использовать только для тестирования!** Имя и ключ учетной записи, которые предоставляют полный доступ на чтение и запись к связанной учетной записи хранения, будут переданы каждому пользователю, который загружает ваше приложение. Такой подход **не** рекомендуется ввиду возможности компрометации ключа ненадежными клиентами.
> 
> 

При использовании аутентификации с общим ключом вам нужно создать [строку подключения](../articles/storage/common/storage-configure-connection-string.md). Строка подключения состоит из следующих элементов:  

* **DefaultEndpointsProtocol** — можно выбрать HTTP или HTTPS. Настоятельно рекомендуется использовать протокол HTTPS.
* **AccountName** — имя вашей учетной записи хранения.
* **AccountKey** — чтобы получить это значение, на [портале Azure](https://portal.azure.com) перейдите к своей учетной записи хранения и щелкните значок **Ключи**.
* (Необязательно) **EndpointSuffix** — это значение используется для служб хранилища в регионах с разными суффиксами конечных точек, например Azure China или Azure Governance.

Ниже приведен пример строки подключения, использующей аутентификацию с общим ключом.

`"DefaultEndpointsProtocol=https;AccountName=your_account_name_here;AccountKey=your_account_key_here"`

### <a name="shared-access-signatures-sas"></a>Подписанный URL-адрес (SAS)
В мобильном приложении аутентифицировать запрос клиента к службе хранилища Azure рекомендуется с помощью подписанного URL-адреса (SAS). SAS позволяет предоставлять клиенту доступ к ресурсу на указанный период времени и с указанным набором разрешений.
В качестве владельца учетной записи хранения вам понадобится создать SAS для использования мобильными клиентами. Для этого вам, скорее всего, нужно будет написать отдельную службу, которая создаст SAS и распространит ее между клиентами. Чтобы создать SAS в целях тестирования, можно использовать [Обозреватель службы хранилища Microsoft Azure](https://storageexplorer.com) или [портал Azure](https://portal.azure.com). При создании SAS можно указать не только интервал времени, в течение которого SAS будет действительным, но и разрешения, которые SAS предоставляет клиенту.

В приведенном ниже примере показано, как в целях тестирования использовать Microsoft Azure Storage Explorer, чтобы создать SAS.

1. Если это еще не сделано, [установите Microsoft Azure Storage Explorer](https://storageexplorer.com)
2. Подключитесь к своей подписке.
3. Щелкните в свою учетную запись хранилища и перейдите на вкладку "Действия" в нижнем левом углу. Щелкните "Get Shared Access Signature" (Получить подписанный URL-адрес), чтобы создать строку подключения для SAS.
4. Ниже приведен пример строки подключения SAS, которая предоставляет разрешения на чтение и запись на уровне службы, контейнера и объекта для службы BLOB-объектов учетной записи хранения.
   
   `"SharedAccessSignature=sv=2015-04-05&ss=b&srt=sco&sp=rw&se=2016-07-21T18%3A00%3A00Z&sig=3ABdLOJZosCp0o491T%2BqZGKIhafF1nlM3MzESDDD3Gg%3D;BlobEndpoint=https://youraccount.blob.core.windows.net"`

Как видите, при использовании SAS в приложении вам не нужно предоставлять ключ учетной записи. Дополнительные сведения и рекомендации по использованию SAS см. в статье [Подписанные URL-адреса: общие сведения о модели SAS](../articles/storage/common/storage-sas-overview.md).