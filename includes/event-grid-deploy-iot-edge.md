---
title: включить файл
description: включить файл
services: event-grid
author: spelluru
ms.service: event-grid
ms.topic: include
ms.date: 10/10/2019
ms.author: spelluru
ms.custom: include file
ms.openlocfilehash: 0fc6a62a94f31617209bcc60bfaa95bc8927551a
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "86050420"
---
## <a name="deploy-event-grid-iot-edge-module"></a>Развертывание модуля IoT Edge сетки событий

Существует несколько способов развертывания модулей на IoT Edge устройстве, и все они работают в службе "Сетка событий Azure" на IoT Edge. В этой статье описаны шаги по развертыванию сетки событий на IoT Edge из портал Azure.

>[!NOTE]
> В этом руководстве вы развернете модуль службы "Сетка событий" без сохранения. Это означает, что все разделы и подписки, создаваемые в этом учебнике, будут удалены при повторном развертывании модуля. Дополнительные сведения о настройке сохраняемости см. в следующих статьях: [Сохранение состояния в Linux](../articles/event-grid/edge/persist-state-linux.md) или [Сохранение состояния в Windows](../articles/event-grid/edge/persist-state-windows.md). Для рабочих нагрузок рекомендуется установить модуль службы "Сетка событий" с сохраняемостью.

>[!IMPORTANT]
> В этом руководстве модуль "Сетка событий" будет развернут с выключенной проверкой подлинности клиента и разрешать HTTP-подписчики. Для рабочих нагрузок рекомендуется включить проверку подлинности клиента только по протоколам HTTPS и подписчикам. Дополнительные сведения о безопасной настройке модуля сетки событий см. в разделе [безопасность и проверка подлинности](../articles/event-grid/edge/security-authentication.md).
 
### <a name="select-your-iot-edge-device"></a>Выберите устройство IoT Edge

1. Войдите на [портал Azure](https://portal.azure.com)
1. Перейдите в Центр Интернета вещей.
1. Выберите **IOT Edge** в меню в разделе **Автоматическое управление устройствами** . 
1. Щелкните идентификатор целевого устройства в списке устройств.
1. Выберите **задать модули**. Не закрывайте страницу. Шаги, описанные в следующем разделе, будут продолжены.

### <a name="configure-a-deployment-manifest"></a>Настройка манифеста развертывания

Манифест развертывания — это документ JSON, в котором определены развертываемые модули, способ передачи данных между этими модулями и требуемые свойства для двойников модулей. В портал Azure имеется мастер, который поможет вам создать манифест развертывания вместо создания документа JSON вручную.  В этом мастере есть три шага: **Добавление модулей**, **Указание маршрутов** и **Просмотр развертываний**.

### <a name="add-modules"></a>Добавление модулей

1. В разделе **модули развертывания** выберите **Добавить** .
1. В раскрывающемся списке типы модулей выберите **IOT Edge Module (модуль** ).
1. Укажите параметры "имя", "изображение", "создать контейнер" для контейнера:

[!INCLUDE [event-grid-edge-module-version-update](event-grid-edge-module-version-update.md)]

   * **Имя**: евентгридмодуле
   * **URI изображения**: `mcr.microsoft.com/azure-event-grid/iotedge:latest`
   * **Параметры создания контейнера**:

```json
    {
      "Env": [
        "inbound__clientAuth:clientCert__enabled=false",
        "outbound__webhook__httpsOnly=false"
      ],
      "HostConfig": {
        "PortBindings": {
          "4438/tcp": [
            {
              "HostPort": "4438"
            }
          ]
        }
      }
    }
```

 1. Щелкните **Сохранить**.
 1. Нажмите кнопку " **Далее** ", чтобы перейти к разделу "маршруты"

    > [!NOTE]
    > Если вы используете виртуальную машину Azure в качестве пограничной устройства, добавьте правило для входящих портов, разрешающее входящий трафик через порт 4438. Инструкции по добавлению правила см. в статье [как открыть порты для виртуальной машины](../articles/virtual-machines/windows/nsg-quickstart-portal.md).


### <a name="setup-routes"></a>Настройка маршрутов

 Сохранить маршруты по умолчанию и нажать кнопку **Далее** , чтобы перейти к разделу "Проверка"

### <a name="review-deployment"></a>Проверка развертывания

1. В разделе обзорной информации вы увидите манифест развертывания в формате JSON, который был создан на основе параметров, выбранных вами в двух предыдущих разделах. Убедитесь, что в списке отображаются два модуля: **$edgeAgent** и **$edgeHub**. Эти два модуля составляют среду выполнения IoT Edge и являются обязательными для каждого развертывания.
1. Просмотрите сведения о развертывании, а затем выберите **Отправить**.

### <a name="verify-your-deployment"></a>Проверка развертывания

1. Сразу после отправки развертывания можно вернуться на страницу IoT Edge Центра Интернета вещей.
1. Выберите **устройство IOT Edge** , для которого предназначается развертывание, чтобы открыть сведения о нем.
1. В сведениях об устройстве убедитесь, что модуль сетки событий **указан в списке в области развертывание** и **сообщается устройством**.

Запуск модуля на устройстве может занять несколько секунд. Затем информация о нем передается в Центр Интернета вещей. Обновите страницу, чтобы увидеть обновленное состояние.