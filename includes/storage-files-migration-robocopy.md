---
title: Сопоставьте структуру папок с топологией Синхронизация файлов Azure
description: Сопоставьте существующую структуру файлов и папок с файловыми ресурсами Azure для использования с Синхронизация файлов Azure. Общий текстовый блок, совместно используемый в документах миграции.
author: fauhse
ms.service: storage
ms.topic: conceptual
ms.date: 2/20/2020
ms.author: fauhse
ms.subservice: files
ms.openlocfilehash: cde85e245c8cc6ae8c55b24270f125bacc111737
ms.sourcegitcommit: 7edadd4bf8f354abca0b253b3af98836212edd93
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/10/2021
ms.locfileid: "102547562"
---
```console
Robocopy /MT:16 /NP /NFL /NDL /B /MIR /IT /COPY:DATSO /COPY:DATSO /DCOPY:DAT /UNILOG:<FilePathAndName> <SourcePath> <Dest.Path> 
```

| Коммутатор              | Значение |
|---------------------|---------|
| /MT                 | Позволяет использовать средство Robocopy для работы с многопоточными потоками. Значение по умолчанию — 8, а максимальное — 128. Сопоставьте это значение с числом ядер процессора и числом потоков на ядро. Определите, нужно ли зарезервировать ядра для других задач, которые может иметь рабочий сервер. |
| /нп                 | Ход выполнения копирования для каждого файла и папки не отображается. Отображение хода выполнения значительно снижает производительность копирования. |
| /NFL                | Указание того, что имена файлов не должны регистрироваться. Улучшается производительность копирования. |
| /NDL                | Указание того, что имена каталогов не должны регистрироваться. Улучшается производительность копирования. |
| /B                  | Запускает Robocopy в том же режиме, что и приложение резервного копирования. Она позволяет Robocopy перемещать файлы, к которым у текущего пользователя нет разрешений. |
| /мир                | *Зеркальный источник к целевому объекту* позволяет Robocopy выполнять только копирование разностей между исходным и целевым элементами. Будут скопированы пустые подкаталоги. Элементы (файлы или папки), которые были изменены или не существуют в целевой папке, будут скопированы. Элементы, которые существуют в целевом объекте, но не в источнике, будут удалены из целевого объекта. При использовании этого параметра крайне важно точно сопоставить структуру исходной и целевой папок. "Matching" означает, что вы копируетесь с правильного уровня источника и папки на соответствующий уровень папки в целевом объекте. Только после этого может быть выполнено "перехватить" копию. Если исходный и целевой объекты не совпадают, использование `/MIR` приведет к увеличению числа операций удаления и повторного копирования. |
| Разрешает                 | Обеспечивает сохранение качества в определенных зеркальных сценариях. </br>*Пример* . Если между двумя командами Robocopy запускается файл с изменением ACL и обновлением атрибута: например, он отмечается как *скрытый*. Без/IT изменение списка управления доступом может быть пропущено средством Robocopy и не передано в целевое расположение. |
|Копии`[copyflags]`  | Точность копирования файлов (по умолчанию, если она не указана `/COPY:DAT` ), флаги копирования: `D` = Data, `A` = Attributes, `T` = timestamps, `S` = Security = ACL NTFS, `O` = сведения о владельце, `U` = A дитинг сведения.<u></u> Данные аудита не могут храниться в общем файловом ресурсе Azure. |
| /ДКОПИ:`[copyflags]`| Точность для копии каталогов (по умолчанию, если не указано значение `/DCOPY:DA` ), флаги копирования: `D` = Data, `A` = Attributes, `T` = метки времени. |
| /УНИЛОГ:<file name> | Выводит состояние в файл журнала как Юникод (перезаписывает существующий журнал). |
| /лфсм               | **только для целевых объектов с многоуровневым хранилищем** </br>Использование/ЛФСМ запросов Robocopy для функционирования в режиме "нехватка свободного места". Этот параметр полезен только для целевых объектов с многоуровневое хранилищем, который может исключаться из локальной емкости, прежде чем средство Robocopy может завершить работу. Этот параметр был добавлен специально для использования с целевым объектом, для которого разрешено Синхронизация файлов Azure распределение по уровням облака. Его можно использовать независимо от Синхронизация файлов Azure. В этом режиме средство Robocopy будет приостановлено всякий раз, когда копирование файла приведет к тому, что свободное место на целевом томе станет меньше значения "этаж". Это значение может быть задано в `/LFSM:n` виде флага. Параметр `n` указывается в базовом 2: `nKB` , `nMB` или `nGB` . Если параметр `/LFSM` указан без явного значения Floor, для основания устанавливается значение 10 процентов от размера целевого тома. Режим нехватки свободного места несовместим с/MT,/ЕФСРАВ,/B и/ЗБ. |
| /Z                  | **тщательное использование** </br>Копирует файлы в режиме перезапуска, рекомендуется использовать только в нестабильной сетевой среде. Этот параметр значительно сокращает производительность копирования из-за дополнительного ведения журнала. |
| /ZB                 | **тщательное использование** </br>Использует режим перезапуска. Если доступ запрещен, в этом параметре используется режим резервного копирования. Этот параметр значительно сокращает производительность копирования из-за создания контрольных точек. |
   