---
title: Рекомендации по повышению производительности и рекомендации по настройке — Azure SQL ребро
description: Ознакомьтесь с рекомендациями по повышению производительности и рекомендациями по настройке в Azure SQL Server.
keywords: SQL Server, хранение данных
services: sql-edge
ms.service: sql-edge
ms.topic: conceptual
author: SQLSourabh
ms.author: sourabha
ms.reviewer: sstein
ms.date: 09/22/2020
ms.openlocfilehash: 02f22883a0989714d8b74f778cacf1ba2c65d0b4
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "93392017"
---
# <a name="performance-best-practices-and-configuration-guidelines"></a>Рекомендации по повышению производительности и рекомендации по настройке

Azure SQL Server предлагает несколько функций и возможностей, которые можно использовать для повышения производительности развертывания SQL Server. В этой статье приводятся некоторые рекомендации и рекомендации по повышению производительности. 

## <a name="best-practices"></a>Рекомендации 

### <a name="configure-multiple-tempdb-data-files"></a>Настройка нескольких файлов данных tempdb

Azure SQL ребро по умолчанию создает только один файл данных tempdb в рамках инициализации контейнера. Рекомендуется создать несколько файлов данных tempdb после развертывания. Дополнительные сведения см. в статье [Рекомендации по сокращению состязания за выделяемые ресурсы в базе данных tempdb SQL Server](https://support.microsoft.com/help/2154845/recommendations-to-reduce-allocation-contention-in-sql-server-tempdb-d).

### <a name="use-clustered-columnstore-indexes-where-possible"></a>По возможности используйте кластеризованные индексы columnstore

Устройства IoT и пограничных устройств обычно создают большие объемы данных, которые, как правило, обрабатываются в течение некоторого периода времени для анализа. Отдельные строки данных редко используются для любого анализа. Индексы columnstore идеально подходят для хранения больших наборов данных и выполнения запросов к ним. Этот индекс использует хранение и обработку запросов на основе столбцов для достижения максимальной производительности запросов в сравнении с традиционным хранилищем, ориентированным на строки, до 10 раз. Также, можно добиться 10-кратного сжатия данных относительно несжатых данных. Дополнительные сведения см. в разделе [индексы columnstore](/sql/relational-databases/indexes/columnstore-indexes-overview) .

Кроме того, другие возможности Azure SQL ребра, такие как потоковая передача данных и хранение данных, имеют преимущество оптимизации columnstore по вставке и удалению данных. 

### <a name="simple-recovery-model"></a>Простая модель восстановления

Так как хранилище может быть ограничено на пограничных устройствах, все пользовательские базы данных в Azure SQL ребр по умолчанию используют простую модель восстановления. Простая модель восстановления автоматически освобождает место в журнале, чтобы сократить требования к месту на диске, по сути, устраняя необходимость в управлении пространством журнала транзакций. Это может быть полезно на пограничных устройствах с ограниченным объемом доступной памяти. Дополнительные сведения о простой модели восстановления и других доступных моделях восстановления см. в разделе [модели восстановления](/sql/relational-databases/backup-restore/recovery-models-sql-server) .

Такие операции, как доставка журналов и восстановление до точки во времени, требующие резервного копирования журналов транзакций, не поддерживаются простой моделью восстановления.  

## <a name="advanced-configuration"></a>Расширенная конфигурация 

### <a name="setting-memory-limits"></a>Настройка ограничений памяти

Azure SQL ребра поддерживает до 64 ГБ памяти для буферного пула, в то время как вспомогательным процессам, выполняемым в контейнере SQL, может потребоваться дополнительная память. На небольших пограничных устройствах с ограниченной памятью рекомендуется ограничить объем доступной памяти для контейнеров SQL, чтобы узел DOCKER и другие пограничные процессы или модули могли работать правильно. Общий объем доступной памяти для SQL Server можно контролировать с помощью следующих механизмов. 

- Ограничение памяти, доступной для контейнеров SQL. Общий объем доступной памяти для контейнера SQL можно ограничить с помощью параметра конфигурации среды выполнения контейнера `--memory` . Дополнительные сведения об ограничении памяти, доступной для контейнера SQL, см. в разделе [Параметры среды выполнения с памятью, ЦП и GPU](https://docs.docker.com/config/containers/resource_constraints/).

- Ограничение объема доступной памяти для процесса SQL в контейнере: по умолчанию процесс SQL в контейнере использует только 80% доступного объема физической памяти. Для большинства развертываний конфигурация по умолчанию будет работать нормально. Однако возможны ситуации, когда для потоковой передачи данных и процессов ONNX, выполняющихся внутри контейнеров SQL, может потребоваться дополнительная память. В таких случаях память, доступная для процесса SQL, может контролироваться с помощью `memory.memorylimitmb` параметра в файле MSSQL-CONF. Дополнительные сведения см. в разделе [Настройка с помощью файла MSSQL. conf](configure.md#configure-by-using-an-mssqlconf-file).

При задании предельного объема памяти Будьте внимательны, чтобы не задавать это значение слишком мало. Если не задать достаточно памяти для процесса SQL, это может серьезно повлиять на производительность SQL.

### <a name="delayed-durability"></a>Отложенная устойчивость

Транзакции в Azure SQL Server могут быть либо полностью устойчивыми, SQL Server по умолчанию, либо отложенными устойчивыми (также известными как отложенная фиксация).

Полностью устойчивые фиксации транзакций являются синхронными и сообщают об успешной фиксации и возвращают управление клиенту только после записи журналов транзакций на диск. Устойчивые фиксации транзакций являются асинхронными и сообщают об успешной фиксации до записи журналов транзакций на диск. Запись журнала транзакций на диск необходима, чтобы транзакция была устойчивой. Отложенные транзакции становятся устойчивыми после записи журнала транзакций на диск. 

В развертываниях, в которых возможна **некоторая вероятность потери данных** или на пограничных устройствах с медленным хранилищем, отложенная устойчивость может использоваться для оптимизации приема данных и очистки на основе хранения данных. Дополнительные сведения см. в разделе [Управление устойчивостью транзакций](/sql/relational-databases/logs/control-transaction-durability).


### <a name="linux-os-configurations"></a>Конфигурации ОС Linux 

Для повышения производительности установки SQL рекомендуется использовать следующие параметры [конфигурации операционной системы Linux](/sql/linux/sql-server-linux-performance-best-practices#linux-os-configuration) .