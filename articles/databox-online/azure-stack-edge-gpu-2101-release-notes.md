---
title: Заметки о выпуске Azure Stack ребра Pro 2101
description: Описание критических открытых проблем и способов их устранения для Azure Stack пограничной версии 2101.
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: article
ms.date: 01/27/2021
ms.author: alkohli
ms.openlocfilehash: 6fff5b9d41c960ebe37098695c694725de0226e0
ms.sourcegitcommit: 4e70fd4028ff44a676f698229cb6a3d555439014
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/28/2021
ms.locfileid: "98954620"
---
# <a name="azure-stack-edge-2101-release-notes"></a>Заметки о выпуске Azure Stack пограничных 2101

В следующих заметках о выпуске указываются критические открытые проблемы и разрешенные проблемы для выпуска 2101 для устройств Azure Stack. Эти заметки о выпуске применимы для Azure Stack GPU Pro, Azure Stack пограничных Pro R и Azure Stack пограничных устройств R. Функции и проблемы, соответствующие определенной модели, называются там, где это применимо.

Заметки о выпуске постоянно обновляются: обнаруживаются и добавляются критические проблемы, требующие временного решения. Перед развертыванием устройства внимательно ознакомьтесь со сведениями, содержащимися в заметках о выпуске.

Эта статья относится к выпуску **Azure Stack ребра 2101** , сопоставленному с номером версии программного обеспечения **2.2.1473.2521**.

## <a name="whats-new"></a>Новые возможности

В выпуске Azure Stack ребра 2101 доступны следующие новые функции. 

- Общедоступная **версия устройств с мини-r Azure Stack с пограничными устройствами r и Azure Stack** . Начиная с этого выпуска, будут доступны Azure Stack пограничные устройства r и Azure Stack пограничных устройств r. Дополнительные сведения см. в статье [что такое Azure Stack пограничных Pro r](azure-stack-edge-j-series-overview.md) и [что такое Azure Stack пограничных Мини-r](azure-stack-edge-k-series-overview.md).  
- **Облачное Управление виртуальными машинами** . Начиная с этого выпуска вы можете создавать виртуальные машины на устройстве и управлять ими с помощью портал Azure. Дополнительные сведения см. [в статье Развертывание виртуальных машин с помощью портал Azure](azure-stack-edge-gpu-deploy-virtual-machine-portal.md).
- **Интеграция с Azure Monitor** . Теперь вы можете использовать Azure Monitor для мониторинга контейнеров из приложений, работающих на вашем устройстве. Хранилище метрик Azure Monitor не поддерживается в этом выпуске. Дополнительные сведения см. в статье [включение Azure Monitor на устройстве](azure-stack-edge-gpu-enable-azure-monitor.md).
- **Реестр контейнеров ребра** . в этом выпуске доступен контейнерный реестр контейнеров, который предоставляет репозиторий в пограничном расположении на устройстве. Этот реестр можно использовать для хранения образов контейнеров и управления ими. Дополнительные сведения см. в разделе [Включение контейнера граничных контейнеров](azure-stack-edge-gpu-deploy-arc-kubernetes-cluster.md). 
- **Виртуальная частная сеть (VPN)** . Используйте VPN, чтобы предоставить другой уровень шифрования для данных, передаваемых между устройствами и облаком. VPN доступна только на Azure Stack пограничных Pro R и Azure Stack пограничном мини-R. Дополнительные сведения см. в статье [Настройка VPN на устройстве](azure-stack-edge-mini-r-configure-vpn-powershell.md). 
- Смена **шифрования — ключи неактивных ключей** . Теперь вы можете поворачивать ключи шифрования неактивных ключей, которые используются для защиты дисков на устройстве. Эта функция доступна только для устройств с мини-R на Azure Stack пограничных Pro R и Azure Stack. Дополнительные сведения см. в разделе Смена [шифрования-неактивных ключей](azure-stack-edge-gpu-manage-access-power-connectivity-mode.md#manage-access-to-device-data).
- **Упреждающее ведение журнала** . Начиная с этого выпуска можно включить упреждающее сбор журналов на устройстве на основе индикаторов работоспособности системы, чтобы помочь эффективно устранять неполадки с устройствами. Дополнительные сведения см. [в статье упреждающий сбор журналов на устройстве](azure-stack-edge-gpu-proactive-log-collection.md).


## <a name="known-issues-in-2101-release"></a>Известные проблемы в выпуске 2101

В следующей таблице приведены сводные сведения об известных проблемах в выпуске 2101.

| Нет. | Компонент | Проблема | Временное решение и комментарии |
| --- | --- | --- | --- |
|**1.**|Предварительная версия функций |В этом выпуске доступны следующие функции: локальные Azure Resource Manager, виртуальные машины, облачное Управление виртуальными машинами, служба Arc Azure Kubernetes, VPN для Azure Stack ребра Pro R и Azure Stack пограничной Mini R, Многопроцессная служба (MPS) для Azure Stack ребра Pro  |Эти функции будут общедоступными в последующих выпусках. |
|**2.**|Панель мониторинга Kubernetes | Конечная точка *HTTPS* для панели мониторинга KUBERNETES с SSL-сертификатом не поддерживается. | |
|**3.**|Kubernetes |При включении веб-прокси пограничные реестр контейнеров не работает.|Функциональные возможности будут доступны в следующем выпуске. |
|**4.**|Kubernetes |Реестр контейнера граничных контейнеров не работает с IoT Edgeными модулями.| |
|**5.**|Kubernetes |Kubernetes не поддерживает ":" в именах переменных среды, используемых приложениями .NET. Это также необходимо для работы модуля IoT Edge "Сетка событий" на Azure Stack пограничных устройствах и других приложениях. Дополнительные сведения см. в [документации по ASP.NET Core](/aspnet/core/fundamentals/configuration/?tabs=basicconfiguration&view=aspnetcore-3.1&preserve-view=true#environment-variables).|Замените ":" двойным символом подчеркивания. Дополнительные сведения см. в разделе [Kubernetes Issue](https://github.com/kubernetes/kubernetes/issues/53201) .|
|**6.** |Кластер Azure Arc + Kubernetes |По умолчанию, когда ресурс `yamls` удаляется из репозитория Git, соответствующие ресурсы не удаляются из кластера Kubernetes.  |Необходимо задать `--sync-garbage-collection`  в Arc операторпарамс, чтобы разрешить удаление ресурсов при удалении из репозитория Git. Дополнительные сведения см. [в разделе Удаление конфигурации](../azure-arc/kubernetes/use-gitops-connected-cluster.md#additional-parameters). |
|**7.**|NFS |В приложениях, использующих общий доступ NFS на устройстве для записи данных, должна использоваться Монопольная запись. Это гарантирует запись записей на диск.| |
|**8.**|Конфигурация вычислений |Конфигурация вычислений не работает в конфигурациях сети, где шлюзы или коммутаторы или маршрутизаторы отвечают на запросы ARP для систем, которые не существуют в сети.| |
|**9.**|COMPUTE и Kubernetes |Если на устройстве сначала настраивается Kubernetes, он заявляет все доступные GPU. Таким образом, невозможно создать Azure Resource Manager виртуальные машины с помощью GPU после настройки Kubernetes. |Если устройство содержит 2 GPU, можно создать 1 виртуальную машину, использующую GPU, а затем настроить Kubernetes. В этом случае Kubernetes будет использовать оставшийся доступный графический процессор 1. |


## <a name="known-issues-from-previous-releases"></a>Известные проблемы предыдущих выпусков

В следующей таблице приведена сводка известных проблем, выполненных в предыдущих выпусках.

| Нет. | Компонент | Проблема | Временное решение и комментарии |
| --- | --- | --- | --- |
| **1.** |Azure Stack пограничных Pro + SQL Azure | Для создания базы данных SQL требуется доступ администратора.   |Выполните следующие действия вместо шагов 1-2 в [https://docs.microsoft.com/azure/iot-edge/tutorial-store-data-sql-server#create-the-sql-database](../iot-edge/tutorial-store-data-sql-server.md#create-the-sql-database) . <ul><li>В локальном пользовательском интерфейсе устройства Включите интерфейс вычислений. Выберите **вычисление > порт # > включить для вычислений > применить.**</li><li>Скачайте `sqlcmd` на клиентский компьютер с https://docs.microsoft.com/sql/tools/sqlcmd-utility </li><li>Подключитесь к IP-адресу интерфейса вычислений (включенному порту), добавив ", 1401" в конец адреса.</li><li>Окончательная команда будет выглядеть следующим образом: sqlcmd-S {Interface IP}, 1401-U SA-P «strong! Passw0rd".</li>После этого шаги 3-4 из текущей документации должны быть идентичны. </li></ul> |
| **2.** |Обновить| Добавочные изменения в больших двоичных объектах, восстановленных с помощью **обновления** , не поддерживаются |Для конечных точек большого двоичного объекта частичные обновления больших двоичных объектов после обновления могут привести к тому, что обновления не будут отправлены в облако. Например, последовательность действий, например:<ul><li>Создание большого двоичного объекта в облаке. Или удалите ранее отправленный BLOB-объект с устройства.</li><li>Обновите BLOB-объект из облака в устройство с помощью функции обновления.</li><li>Обновление только части большого двоичного объекта с помощью API-интерфейсов Azure SDK.</li></ul>Эти действия могут привести к тому, что обновленные разделы BLOB-объекта не будут обновлены в облаке. <br>**Обходное решение**. Используйте такие средства, как Robocopy, или регулярное копирование файлов с помощью Explorer или командной строки, чтобы заменить все большие двоичные объекты.|
|**3.**|Регулирование|При регулировании, если новые операции записи на устройство не разрешены, запись клиентом NFS завершается ошибкой с сообщением "отказано в разрешении".| Эта ошибка будет показана ниже:<br>`hcsuser@ubuntu-vm:~/nfstest$ mkdir test`<br>mkdir: не удается создать каталог "тест": отказано в разрешении|
|**4.**|Прием хранилища BLOB-объектов|При использовании AzCopy версии 10 для приема хранилища BLOB-объектов запустите AzCopy со следующим аргументом: `Azcopy <other arguments> --cap-mbps 2000`| Если эти ограничения не предоставляются для AzCopy, это может привести к отправке на устройство большого количества запросов, что приведет к проблемам со службой.|
|**5.**|Многоуровневые учетные записи хранения|При использовании многоуровневых учетных записей хранения применяются следующие условия.<ul><li> Поддерживаются только блочные BLOB-объекты. Страничные BLOB-объекты не поддерживаются.</li><li>Поддержка API моментальных снимков или копирования отсутствует.</li><li> Прием рабочей нагрузки Hadoop с помощью `distcp` не поддерживается, так как он интенсивно использует операцию копирования.</li></ul>||
|**6.**|Подключение к общему ресурсу NFS|Если несколько процессов копируются в одну общую папку и `nolock` атрибут не используется, во время копирования могут возникнуть ошибки.|`nolock`Для копирования файлов в общую папку NFS необходимо передать атрибут в команду mount. Например, так: `C:\Users\aseuser mount -o anon \\10.1.1.211\mnt\vms Z:`.|
|**7.**|Кластер Kubernetes|При применении обновления на устройстве, на котором работает кластер kubernetes, виртуальные машины kubernetes перезапускаются и перезагружаются. В этом случае только те модули, которые развернуты с указанными репликами, автоматически восстанавливаются после обновления.  |Если вы создали отдельные модули Pod за пределами контроллера репликации без указания набора реплик, эти модули не будут автоматически восстановлены после обновления устройства. Вам потребуется восстановить эти модули.<br>Набор реплик заменяет удаляемые или завершенные модули Pod по какой-либо причине, например сбой узла или аварийное обновление узла. По этой причине рекомендуется использовать набор реплик, даже если приложению требуется только один модуль.|
|**8.**|Кластер Kubernetes|Kubernetes на Azure Stack пограничной Pro поддерживается только в версии Helm V3 или более поздней. Дополнительные сведения см. в подразделах " [часто задаваемые вопросы": удаление ящика](https://v3.helm.sh/docs/faq/).|
|**9.**|Azure Arc с поддержкой Kubernetes |Для общедоступного выпуска служба Arc Azure Kubernetes обновляется с версии 0.1.18 на 0.2.9. Так как обновление Kubernetes для Azure с поддержкой Arc не поддерживается на Azure Stack пограничном устройстве, вам потребуется повторно развернуть Kubernetes с поддержкой ARC.|Выполните следующие действия.<ol><li>[Применение программного обеспечения устройства и обновлений Kubernetes](azure-stack-edge-gpu-install-update.md).</li><li>Подключитесь к [интерфейсу PowerShell устройства](azure-stack-edge-gpu-connect-powershell-interface.md).</li><li>Удалите существующий агент Azure ARC. Введите `Remove-HcsKubernetesAzureArcAgent`.</li><li>Развертывание [дуги Azure в новом ресурсе](azure-stack-edge-gpu-deploy-arc-kubernetes-cluster.md). Не используйте существующий ресурс Azure ARC.</li></ol>|
|**штук.**|Azure Arc с поддержкой Kubernetes|Развертывания ARC в Azure не поддерживаются, если на устройстве Azure Stack пограничной Pro настроен веб-прокси.||
|**стр.**|Kubernetes |Порт 31000 зарезервирован для панели мониторинга Kubernetes. Порт 31001 зарезервирован для реестра граничных контейнеров. Аналогично, в конфигурации по умолчанию IP-адреса 172.28.0.1 и 172.28.0.10 зарезервированы для службы Kubernetes и основной службы DNS соответственно.|Не используйте зарезервированные IP-адреса.|
|**Двенадцать.**|Kubernetes |В настоящее время Kubernetes не поддерживает службы балансировки нагрузки с несколькими протоколами. Например, служба DNS должна прослушивать TCP и UDP. |Чтобы обойти это ограничение Kubernetes с Металлб, две службы (одна для TCP, одна для UDP) можно создать на одном селекторе Pod. Эти службы используют один и тот же ключ общего доступа и Spec. Лоадбаланцерип для совместного использования одного и того же IP-адреса. IP-адреса также могут быть общими, если у вас больше служб, чем доступные. <br> Дополнительные сведения см. в разделе [совместное использование IP-адресов](https://metallb.universe.tf/usage/#ip-address-sharing).|
|**решением.**|Кластер Kubernetes|Существующие модули Azure IoT Edge Marketplace могут потребовать изменения для запуска на IoT Edge на Azure Stack пограничном устройстве.|Дополнительные сведения см. в статье изменение модулей Azure IoT Edge из Marketplace для запуска на Azure Stack пограничном устройстве.<!-- insert link-->|
|**открыт.**|Kubernetes |Подключения на основе файлов не поддерживаются для Azure IoT Edge в Kubernetes на Azure Stack пограничном устройстве.|IoT Edge использует слой перевода для преобразования `ContainerCreate` параметров в конструкции Kubernetes. Создание `Binds` карт для `hostpath` каталога и, таким же, привязка файловых привязок не может быть привязана к путям в контейнерах IOT Edge. Если возможно, сопоставьте родительский каталог.|
|**15.**|Kubernetes |Если вы используете собственные сертификаты для IoT Edge и добавляете их на Azure Stack пограничной устройстве после того, как на устройстве будет настроено вычисление, новые сертификаты не будут выбраны.|Чтобы обойти эту проблему, перед настройкой вычислений на устройстве следует передать сертификаты. Если среда выполнения вычислений уже настроена, [подключитесь к интерфейсу PowerShell устройства и выполните команды IOT Edge](azure-stack-edge-gpu-connect-powershell-interface.md#use-iotedge-commands). Перезагрузите и модули Pod `iotedged` `edgehub` .|
|**глубин.**|Сертификаты |В некоторых случаях обновление состояния сертификата в локальном пользовательском интерфейсе может занять несколько секунд. |Могут повлиять на следующие сценарии в локальном пользовательском интерфейсе.<ul><li>Столбец **Status (состояние** ) на странице **Сертификаты** .</li><li>Плитка " **Безопасность** " на странице " **Начало работы** ".</li><li>Плитка **настройки** на странице **обзора** .</li></ul>  |
|**широкоэкранны.**|IoT Edge |Модули, развернутые с помощью IoT Edge, не могут использовать сеть узла. | |
|**стр.**|Compute + Kubernetes |Compute/Kubernetes не поддерживает веб-прокси NTLM. ||
|**стр.**|Kubernetes и обновление |Более ранние версии программного обеспечения, такие как 2008 выпусков, имеют проблему обновления состояния гонки, которая приводит к сбою обновления с Клустерконнектионексцептион. |Использование более новых сборок должно помочь избежать этой проблемы. Если вы по-прежнему видите эту проблему, обходной путь заключается в повторном выполнении обновления, и оно должно работать.|


<!--|**18.**|Azure Private Edge Zone (Preview) |There is a known issue with Virtual Network Function VM if the VM was created on Azure Stack Edge device running earlier preview builds such as 2006/2007b and then the device was updated to 2009 GA release. The issue is that the VNF information can't be retrieved or any new VNFs can't be created unless the VNF VMs are deleted before the device is updated.  |Before you update Azure Stack Edge device to 2009 release, use the PowerShell command `get-mecvnf` followed by `remove-mecvnf <VNF guid>` to remove all Virtual Network Function VMs one at a time. After the upgrade, you will need to redeploy the same VNFs.|-->


## <a name="next-steps"></a>Дальнейшие действия

- [Обновление устройства](azure-stack-edge-gpu-install-update.md)
