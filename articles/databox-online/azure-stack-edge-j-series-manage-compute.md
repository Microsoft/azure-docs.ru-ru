---
title: Управление расчетами GPU для Azure Stack ребра Pro | Документация Майкрософт
description: Описывает, как управлять параметрами вычислений ребра, такими как триггеры, модули, конфигурация вычислений представления, удалять конфигурацию с помощью портал Azure на графическом процессоре Azure Stack ребра Pro.
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: how-to
ms.date: 01/27/2021
ms.author: alkohli
ms.openlocfilehash: bd49edcfaca781ac3d36fbf871ec146b32c64ae3
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101733420"
---
# <a name="manage-compute-on-your-azure-stack-edge-pro-gpu"></a>Управление расчетами на GPU Azure Stack.

<!--[!INCLUDE [applies-to-skus](../../includes/azure-stack-edge-applies-to-all-sku.md)]-->

В этой статье описывается, как управлять расчетами с помощью службы IoT Edge на устройстве Azure Stack с ГРАФИЧЕСКИм стандартом Pro. Вы можете управлять вычислениями на портале Azure или с помощью локального пользовательского веб-интерфейса. Используйте портал Azure для управления модулями, триггерами и конфигурацией IoT Edge, а также локальным веб-ИНТЕРФЕЙСом для управления параметрами вычислений сети.



## <a name="manage-triggers"></a>управление триггерами;

События — это то, что происходит в облачной среде или на вашем устройстве и может требовать выполнения действий. Например, создание файла в общей папке является событием. Триггеры вызывают события. Для Azure Stack пограничных Pro триггеры могут быть в ответ на события файла или расписание.

- **Файл**. Эти триггеры выполняются в ответ на события файла, такие как создание файла и изменение файла.
- **Запланировано**: эти триггеры находятся в ответ на расписание, которое можно определить с помощью даты начала, времени начала и интервала повторения.


### <a name="add-a-trigger"></a>Добавление триггера

Чтобы создать триггер, выполните следующие действия на портале Azure.

1. В портал Azure перейдите к ресурсу Azure Stackного периметра и перейдите к **IOT Edge**. Перейдите к **переключателям** и выберите **+ добавить триггер** на панели команд.

    ![Выбор команды добавления триггера](media/azure-stack-edge-j-series-manage-compute/add-trigger-1m.png)

2. В колонке **Добавить триггер** укажите уникальное имя для своего триггера.
    
    <!--Trigger names can only contain numbers, lowercase letters, and hyphens. The share name must be between 3 and 63 characters long and begin with a letter or a number. Each hyphen must be preceded and followed by a non-hyphen character.-->

3. Выберите **Тип** для триггера. Выберите **Файл**, если триггер отвечает на событие файла. Выберите **Запланировано**, если хотите, чтобы триггер запускался в определенное время и срабатывал с заданным интервалом повторения. В зависимости от вашего выбора представлен другой набор параметров.

    - **Триггер файлов**. Выберите подключенную общую папку из раскрывающегося списка. Когда в этой общей папке запускается файловое событие, триггер вызывает функцию Azure.

        ![Добавление общей папки SMB](media/azure-stack-edge-j-series-manage-compute/add-file-trigger.png)

    - **Запланированный триггер**. Укажите дату или время начала и интервал повторения в часах, минутах или секундах. Также введите имя темы. Тема обеспечит гибкость для направления триггера на модуль, развернутый на устройстве.

        Пример строки маршрута: `"route3": "FROM /* WHERE topic = 'topicname' INTO BrokeredEndpoint("modules/modulename/inputs/input1")"`.

        ![Добавление общей папки типа NFS](media/azure-stack-edge-j-series-manage-compute/add-scheduled-trigger.png)

4. Чтобы создать триггер, выберите **Добавить**. Уведомление показывает, что триггер создается. После создания триггера колонка обновляется, чтобы отобразить новый триггер.
 
    ![Список обновленных триггеров](media/azure-stack-edge-j-series-manage-compute/add-trigger-2.png)

### <a name="delete-a-trigger"></a>Удаление триггера

Чтобы удалить триггер, выполните следующие действия на портале Azure.

1. В списке триггеров выберите тот, который нужно удалить.

    ![Выбор триггера](media/azure-stack-edge-j-series-manage-compute/delete-trigger-1.png)

2. Щелкните правой кнопкой мыши и выберите команду **Удалить**.

    ![Выбор команды удаления](media/azure-stack-edge-j-series-manage-compute/delete-trigger-2.png)

3. При запросе подтверждения нажмите кнопку **Да**.

    ![Подтверждение удаления](media/azure-stack-edge-j-series-manage-compute/delete-trigger-3.png)

Список триггеров также будет обновлен с учетом удаления.

## <a name="manage-iot-edge-configuration"></a>Управление конфигурацией IoT Edge

Используйте портал Azure для просмотра конфигурации вычислений, удаления существующей конфигурации вычислений или обновления конфигурации вычислений для синхронизации ключей доступа для устройства IoT и IoT Edge устройства для Azure Stack пограничной Pro.

### <a name="view-iot-edge-configuration"></a>Просмотр конфигурации IoT Edge

Чтобы просмотреть конфигурацию IoT Edge для устройства, выполните следующие действия в портал Azure.

1. В портал Azure перейдите к ресурсу Azure Stackного периметра и перейдите к **IOT Edge**. После включения службы IoT Edge на устройстве на странице обзора будет указано, что служба IoT Edge работает нормально.

    ![Выбор команды для просмотра вычисления](media/azure-stack-edge-j-series-manage-compute/view-compute-1.png)

2. Перейдите в раздел " **Свойства** ", чтобы просмотреть конфигурацию IOT EDGE на устройстве. После настройки вычисления вы создали ресурс Центра Интернета вещей. В этом ресурсе настраиваются устройства IoT и IoT Edge. На устройстве IoT Edge поддерживается запуск модулей Linux.

    ![Просмотр конфигурации](media/azure-stack-edge-j-series-manage-compute/view-compute-2.png)


### <a name="remove-iot-edge-service"></a>Удаление службы IoT Edge

Выполните следующие действия в портал Azure, чтобы удалить существующую конфигурацию IoT Edge для устройства.

1. В портал Azure перейдите к ресурсу Azure Stackного периметра и перейдите к **IOT Edge**. Перейдите к разделу **Обзор** и выберите **Удалить** на панели команд.

    ![Выбор команды удаления вычислений](media/azure-stack-edge-j-series-manage-compute/remove-compute-1.png)

2. При удалении службы IoT Edge действие необратимо и не может быть отменено. Созданные вами модули и триггеры также будут удалены. Необходимо будет перенастроить устройство на случай, если потребуется использовать IoT Edge. При появлении запроса на подтверждение нажмите кнопку **ОК**.

    ![Выберите удалить вычисление 2](media/azure-stack-edge-j-series-manage-compute/remove-compute-2.png)

### <a name="sync-up-iot-device-and-iot-edge-device-access-keys"></a>Синхронизация ключей доступа для устройств IoT и IoT Edge

При настройке вычислений на Azure Stack пограничной Pro создаются устройство IoT и устройство IoT Edge. Этим устройствам автоматически назначаются симметричные ключи доступа. В целях обеспечения безопасности эти ключи регулярно меняются службой Центра Интернета вещей.

Чтобы повернуть эти ключи, вы можете перейти в созданную вами службу Центра Интернета вещей и выбрать устройство IoT или IoT Edge. Каждое устройство имеет первичный и вторичный ключ доступа. Назначьте первичный ключ доступа вторичному, а затем повторно создайте первичный ключ доступа.

Если устройство Интернета вещей и ключи устройств IoT Edge были повернуты, необходимо обновить конфигурацию на Azure Stack крае Pro, чтобы получить последние ключи доступа. Путем выполнения синхронизации можно получить последние ключи для устройств IoT и IoT Edge. Azure Stack пограничной Pro использует только первичные ключи доступа.

Выполните следующие действия на портале Azure, чтобы синхронизировать ключи доступа для вашего устройства.

1. В портал Azure перейдите к ресурсу Azure Stackного периметра и перейдите к **IOT Edge COMPUTE**. Перейдите к разделу **Обзор** и выберите **Обновить конфигурацию** на панели команд.

    ![Выберите команды обновления конфигураций](media/azure-stack-edge-j-series-manage-compute/refresh-configuration-1.png)

2. Выберите **Да** при запросе на подтверждение.

    ![Подтверждение запроса](media/azure-stack-edge-j-series-manage-compute/refresh-configuration-2.png)

3. После синхронизации закройте диалоговое окно.

## <a name="change-external-service-ips-for-containers"></a>Изменение IP-адресов внешней службы для контейнеров

IP-адреса внешней службы Kubernetes используются для доступа к службам, предоставляемым за пределами кластера Kubernetes. После активации устройства можно задать или изменить IP-адреса внешней службы для контейнерных рабочих нагрузок, обратившись к локальному пользовательскому интерфейсу.


1. В локальном пользовательском интерфейсе устройства перейдите к разделу **Вычисление**.
1. Выберите порт, сеть которого настроена для вычислений. В открывшейся колонке укажите (создать) или измените (если она есть) IP-адреса внешней службы Kubernetes. Эти IP-адреса используются для любых служб, которые должны быть доступны за пределами кластера Kubernetes. 
    - Для службы, работающей на устройстве, требуется как минимум 1 IP-адрес службы, `edgehub` используемый модулями IOT Edge. 
    - Вам потребуется IP-адрес для каждого дополнительного модуля IoT Edge или контейнера, который планируется развернуть. 
    - Это статические и последовательные IP-адреса.

    ![Изменить IP-адреса службы Kubernetes](media/azure-stack-edge-j-series-manage-compute/change-service-ips-1.png)

1. Нажмите кнопку **Применить**. После применения IP-адресов устройство не нуждается в перезагрузке или перезагрузке. Новые IP-адреса вступают в силу немедленно.


## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как [устранять неполадки Azure Stack пограничных Pro](azure-stack-edge-gpu-troubleshoot.md).
