---
title: Microsoft Azure Stack пограничных системных требований к мини-R | Документация Майкрософт
description: Сведения о требованиях к программному обеспечению и сети для Azure Stack пограничных мини-приложений R
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: conceptual
ms.date: 02/05/2021
ms.author: alkohli
ms.openlocfilehash: 6836777c761fa2cce482cb000b6c86919e6b5613
ms.sourcegitcommit: d1b0cf715a34dd9d89d3b72bb71815d5202d5b3a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99834074"
---
# <a name="azure-stack-edge-mini-r-system-requirements"></a>Azure Stack пограничных системных требований к мини R

В этой статье описываются важные требования к системе для решения "мини R" на Microsoft Azure Stack пограничных устройств, а также для клиентов, подключающихся к Azure Stack границе мини-R. Рекомендуется внимательно ознакомиться с информацией перед развертыванием Azure Stack пограничных Мини-R. При развертывании и последующей операции вы можете обращаться к этим сведениям по мере необходимости.

Требования к системе для Azure Stack пограничных Мини-R включают:

- **Требования к программному обеспечению для узлов**. Описание поддерживаемых платформ, браузеров для локальной конфигурации пользовательского интерфейса, клиентов SMB и любых дополнительных требований для клиентов, которые получают доступ к устройству.
- **Требования к сети для устройства**. Предоставление информации о любых сетевых требованиях к работе физическое устройства.

## <a name="supported-os-for-clients-connected-to-device"></a>Поддерживаемая ОС для клиентов, подключенных к устройству

[!INCLUDE [Supported OS for clients connected to device](../../includes/azure-stack-edge-gateway-supported-client-os.md)]

## <a name="supported-protocols-for-clients-accessing-device"></a>Поддерживаемые протоколы для клиентов, обращающихся к устройству

[!INCLUDE [Supported protocols for clients accessing device](../../includes/azure-stack-edge-gateway-supported-client-protocols.md)]

## <a name="supported-storage-accounts"></a>Учетные записи хранилища BLOB-объектов

[!INCLUDE [Supported storage accounts](../../includes/azure-stack-edge-gateway-supported-storage-accounts.md)]

## <a name="supported-edge-storage-accounts"></a>Поддерживаемые граничные учетные записи хранения

Следующие пограничные учетные записи хранения поддерживаются с интерфейсом интерфейса RESTFUL устройства. На устройстве создаются учетные записи хранения пограничных устройств. Дополнительные сведения см. в статье [пограничные учетные записи хранения](azure-stack-edge-j-series-manage-storage-accounts.md#about-edge-storage-accounts) .

|Тип  |Учетная запись хранения  |Комментарии  |
|---------|---------|---------|
|Standard     |GPv1: блочный BLOB-объект         |         |


* Страничные BLOB-объекты и файлы Azure сейчас не поддерживаются.

## <a name="supported-local-azure-resource-manager-storage-accounts"></a>Поддерживаемые локальные учетные записи хранения Azure Resource Manager

Эти учетные записи хранения предоставляются через локальные API устройства, когда вы подключаетесь к локальной Azure Resource Manager. Поддерживаются следующие учетные записи хранения:

|Тип  |Учетная запись хранения  |Комментарии  |
|---------|---------|---------|
|Standard     |GPv1: блочный большой двоичный объект, страничный BLOB-объект         | Тип номера SKU — Standard_LRS        |
|Premium   |GPv1: блочный большой двоичный объект, страничный BLOB-объект         |Тип номера SKU — Premium_LRS         |


## <a name="supported-storage-types"></a>Поддерживаемые типы хранилища

[!INCLUDE [Supported storage types](../../includes/azure-stack-edge-gateway-supported-storage-types.md)]


## <a name="supported-browsers-for-local-web-ui"></a>Поддерживаемые браузеры для локального пользовательского веб-интерфейса

[!INCLUDE [Supported browsers for local web UI](../../includes/azure-stack-edge-gateway-supported-browsers.md)]

## <a name="networking-port-requirements"></a>Обязательные сетевые порты

### <a name="port-requirements-for-azure-stack-edge-mini-r"></a>Требования к портам для Azure Stack пограничных Мини-R

В таблице ниже приведены порты, которые должны быть открытыми в брандмауэре для разрешения использования SMB, облака или управления трафиком. В этой таблице значение *в* или *входящий* относится к направлению, из которого клиент запрашивает доступ к вашему устройству. *Out* или *Outbound* — это направление, в котором мини-устройство с Azure Stack погранично отправляет данные извне, помимо развертывания, например исходящего трафика в Интернете.

[!INCLUDE [Port configuration for device](../../includes/azure-stack-edge-gateway-port-config.md)]

### <a name="port-requirements-for-iot-edge"></a>Требования к портам для IoT Edge

Azure IoT Edge обеспечивает исходящее подключение локального пограничного устройства с облаком Azure с помощью поддерживаемых протоколов Центра Интернета вещей. Входящий трафик требуется только для конкретных сценариев, в которых Центр Интернета вещей отправляет сообщения на устройство Azure IoT Edge (например, обмен сообщениями между облаком и устройством).

Чтобы получить конфигурацию порта для серверов, на которых размещается среда выполнения Azure IoT Edge, используйте следующую таблицу.

| Порт № | Входящий или исходящий | Область порта | Обязательно | Руководство |
|----------|-----------|------------|----------|----------|
| TCP 443 (HTTPS)| Исходящий       | Глобальная сеть        | Да      | Исходящие подключение открыто для службы IoT Edge (при подготовке). Эта конфигурация необходима при использовании созданных вручную сценариев или Службы подготовки устройств к добавлению в Центр Интернета вещей Azure.|

Дополнительные сведения см. в статье [Распространенные проблемы и их решения для Azure IoT Edge](../iot-edge/troubleshoot.md).

## <a name="url-patterns-for-firewall-rules"></a>Шаблоны URL-адресов для правил брандмауэра

Нередко сетевые администраторы могут настраивать правила брандмауэра на основе шаблонов URL-адресов, чтобы фильтровать входящий и исходящий трафик. Мини-устройство на Azure Stack пограничных устройств R и служба зависят от других приложений Майкрософт, таких как служебная шина Azure, Azure Active Directory контроля доступа, учетных записей хранения и серверов Центр обновления Майкрософт. Шаблоны URL-адресов, связанных с этими приложениями, можно использовать для настройки правил брандмауэра. Важно понимать, что шаблоны URL-адресов, связанных с этими приложениями, могут меняться. Для этих изменений требуется, чтобы администратор сети проходил и изменил правила брандмауэра для Azure Stack пограничных Мини-R, как и при необходимости.

Рекомендуется настроить правила брандмауэра для исходящего трафика на основе фиксированных IP-адресов Azure Stack пограничных устройств, которые в большинстве случаев находятся в обычном режиме. Тем не менее, чтобы задать расширенные правила брандмауэра, необходимые для создания безопасных сред, можно использовать приведенные ниже сведения.

> [!NOTE]
> - В качестве IP-адресов устройств (источников) всегда должны устанавливаться все сетевые интерфейсы с поддержкой облака.
> - Конечные IP-адреса должны быть установлены в [диапазоны адресов центра обработки данных Azure](https://www.microsoft.com/download/confirmation.aspx?id=41653).

### <a name="url-patterns-for-gateway-feature"></a>Шаблоны URL-адресов для функции шлюза

[!INCLUDE [URL patterns for firewall](../../includes/azure-stack-edge-gateway-url-patterns-firewall.md)]

### <a name="url-patterns-for-compute-feature"></a>Шаблоны URL-адресов для функции вычисления

| Шаблон URL-адреса                      | Компонент или функциональность                     |   
|----------------------------------|---------------------------------------------|
| HTTPS: \/ /MCR.Microsoft.com<br></br>https://\*.cdn.mscr.io | Реестр контейнеров Майкрософт (обязательный)               |
| https://\*.azurecr.io                     | Реестры личных и сторонних контейнеров (необязательно) | 
| https://\*.azure-devices.net              | Политика доступа Центра Интернета вещей (обязательно)                             | 

### <a name="url-patterns-for-gateway-for-azure-government"></a>Шаблоны URL-адресов для шлюза Azure для государственных организаций

[!INCLUDE [Azure Government URL patterns for firewall](../../includes/azure-stack-edge-gateway-gov-url-patterns-firewall.md)]

### <a name="url-patterns-for-compute-for-azure-government"></a>Шаблоны URL-адресов для вычислений для Azure для государственных организаций

| Шаблон URL-адреса                      | Компонент или функциональность                     |  
|----------------------------------|---------------------------------------------|
| HTTPS: \/ /MCR.Microsoft.com<br></br>https:// \* . CDN.mscr.com | Реестр контейнеров Майкрософт (обязательный)               |
| https:// \* . Azure-Devices.US              | Политика доступа Центра Интернета вещей (обязательно)           |
| https:// \* . azurecr.US                    | Реестры личных и сторонних контейнеров (необязательно) | 

## <a name="internet-bandwidth"></a>Пропускная способность Интернета

[!INCLUDE [Internet bandwidth](../../includes/azure-stack-edge-gateway-internet-bandwidth.md)]

## <a name="compute-sizing-considerations"></a>Рекомендации по выбору размера вычислений

Используйте свой опыт при разработке и тестировании вашего решения, чтобы убедиться в наличии достаточного объема на Azure Stack мини-устройстве R, и получите оптимальную производительность на устройстве.

Факторы, которые следует учитывать, включают:

- **Особенности контейнеров** . Подумайте о следующем.

    - Каковы объемы вашего контейнера? Сколько памяти, хранилища и ЦП использует ваш контейнер?
    - Сколько контейнеров находится в рабочей нагрузке? У вас может быть много простых контейнеров, а не несколько ресурсоемких ресурсов.
    - Каковы ресурсы, выделенные для этих контейнеров, и какие ресурсы они потребляют?
    - Сколько уровней имеет общий доступ к контейнерам? Образы контейнеров представляют собой набор файлов, организованных в стек слоев. Для образа контейнера Определите количество уровней и их размер для расчета потребления ресурсов.
    - Существуют ли неиспользуемые контейнеры? Остановленный контейнер по-прежнему занимает место на диске.
    - На каком языке пишутся ваши контейнеры?
- **Размер обрабатываемых данных** . сколько данных будут обрабатываться контейнерами? Будут ли эти данные потреблять место на диске или данные будут обрабатываться в памяти?
- **Ожидаемая производительность** — Каковы желаемые характеристики производительности вашего решения? 

Чтобы понять и оптимизировать производительность вашего решения, можно использовать:

- Метрики вычислений, доступные в портал Azure. Перейдите к ресурсу Azure Stack ребра и перейдите к разделу **мониторинг метрик >**. Чтобы понять доступные ресурсы и способ их использования, ознакомьтесь с разрядом ЦП **использование вычислительной памяти** и **граничных вычислительных ресурсов в процентах** .
- Команды мониторинга, доступные через интерфейс PowerShell устройства, например:

    - `dkr` Статистика для получения активного потока статистики использования ресурсов контейнеров. Команда поддерживает показатели использования ЦП, памяти, ограничения памяти и сетевых операций ввода-вывода.
    - `dkr system df` для получения сведений об используемом объеме дискового пространства. 
    - `dkr image [prune]` для очистки неиспользуемых образов и освобождения места.
    - `dkr ps --size` для просмотра приблизительного размера выполняющегося контейнера. 

    Дополнительные сведения о доступных командах см. в подразделах [ Отладка Kubernetes проблем](azure-stack-edge-gpu-connect-powershell-interface.md#debug-kubernetes-issues-related-to-iot-edge).

Наконец, убедитесь, что вы проверили свое решение на наборе данных и количественно изверите производительность Azure Stack пограничных мини-приложений R перед развертыванием в рабочей среде.

## <a name="next-step"></a>Следующий шаг

- [Развертывание Azure Stack пограничных Мини-R](azure-stack-edge-placeholder.md)
