---
title: Учебник. Настройка параметров сети для устройства Azure Stack Edge Pro R на портале Azure | Документация Майкрософт
description: Учебник по развертыванию Azure Stack Edge Pro R поможет вам настроить параметры сети, сети вычислений и веб-прокси для физического устройства.
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: tutorial
ms.date: 02/04/2021
ms.author: alkohli
Customer intent: As an IT admin, I need to understand how to connect and activate Azure Stack Edge Pro R so I can use it to transfer data to Azure.
ms.openlocfilehash: 11c1d76b5784587f234455f81595778897569eb1
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "99594355"
---
# <a name="tutorial-configure-network-for-azure-stack-edge-pro-r"></a>Руководство по настройке параметров сети для Azure Stack Edge Pro R

В этом учебнике объясняется, как настроить сеть для устройства Azure Stack Edge Pro R, используя локальный пользовательский веб-интерфейс.

Процесс подключения может занять около 20 минут.

В этом руководстве вы рассмотрите следующее:

> [!div class="checklist"]
>
> * Предварительные условия
> * настройка сети;
> * включение сети вычислений;
> * Настройка веб-прокси


## <a name="prerequisites"></a>Предварительные требования

Перед настройкой устройства Azure Stack Edge Pro R проверьте следующее:

* Вы установили физическое устройство, как описано в статье [Установка Azure Stack Edge Pro R](azure-stack-edge-gpu-deploy-install.md).
* Вы подключились к локальному пользовательскому веб-интерфейсу устройства, как описано в статье [Подключение к Azure Stack Edge Pro R](azure-stack-edge-gpu-deploy-connect.md).


## <a name="configure-network"></a>Настройка сети

На странице **Начало работы** отображаются разные параметры, необходимые для настройки и регистрации физического устройства в службе Azure Stack Edge. 

Выполните описанные ниже действия, чтобы настроить сеть для устройства.

1. В локальном пользовательском веб-интерфейсе устройства откройте страницу **Начало работы**. 

2. На плитке **Сеть** выберите **Настроить**, чтобы открыть страницу **Сеть**. 
    
    <!--![Local web UI "Network settings" tile](./media/azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy/network-1.png)-->

    На физическом устройстве доступно четыре сетевых интерфейса. Порты 1 и 2 — это сетевые интерфейсы со скоростью 1 Гбит/с. Порты 3 и 4 — это сетевые интерфейсы со скоростью 10/25 Гбит/с. Порт 1 автоматически настроен только для управления, тогда как порты 2–4 являются портами данных. Страница **Сеть** показана ниже.
    
    ![Страница "Параметры сети" в локальном веб-интерфейсе](./media/azure-stack-edge-pro-r-deploy-configure-network-compute-web-proxy/network-2.png)

   
3. Чтобы изменить параметры сети, выберите порт и в открывшейся области измените значения IP-адреса, подсети, шлюза, а также основного и дополнительного DNS-серверов. 

    - Если вы выбрали "Порт 1", он предварительно настраивается как статический. 

        !["Параметры сети", "Порт 1" в локальном пользовательском веб-интерфейсе](./media/azure-stack-edge-pro-r-deploy-configure-network-compute-web-proxy/network-3.png)

    - Если вы выбрали "Порт 2", "Порт 3" или "Порт 4", любой из них по умолчанию настраивается как порт DHCP.

        !["Параметры сети", "Порт 3" в локальном пользовательском веб-интерфейсе](./media/azure-stack-edge-pro-r-deploy-configure-network-compute-web-proxy/network-4.png)

    При настройке параметров сети учитывайте следующее.

   * Если в среде включен DHCP, сетевые интерфейсы настраиваются автоматически. IP-адрес, подсеть, шлюз и DNS назначаются автоматически.
   * Если протокол DHCP не включен, при необходимости вы можете назначить статические IP-адреса.
   * Сетевой интерфейс можно настроить как IPv4.
   * Объединение сетевых адаптеров или агрегирование ссылок не поддерживается в Azure Stack Edge.
   * Серийный номер для любого порта совпадает с серийным номером узла.
    <!--* On the 25-Gbps interfaces, you can set the RDMA (Remote Direct Access Memory) mode to iWarp or RoCE (RDMA over Converged Ethernet). Where low latencies are the primary requirement and scalability is not a concern, use RoCE. When latency is a key requirement, but ease-of-use and scalability are also high priorities, iWARP is the best candidate.-->
    После настройки сети для устройства эта страница обновится, как показано ниже.

    ![Страница "Параметры сети" в локальном веб-интерфейсе (2)](./media/azure-stack-edge-pro-r-deploy-configure-network-compute-web-proxy/network-2a.png)<!--change-->


     >[!NOTE]
     >
     > * Мы советуем не переключать локальный IP-адрес сетевого интерфейса со статического на DCHP при отсутствии другого IP-адреса для подключения к устройству. Если, используя один сетевой интерфейс, вы переключитесь на DHCP, вы не сможете определить адрес DHCP. Если вы хотите переключиться на адрес DHCP, дождитесь, пока устройство завершит подключение к службе, а затем измените адрес. Затем вы сможете просмотреть IP-адреса всех адаптеров в **свойствах устройства** на портале Azure для службы.


    Завершив настройку и применение параметров сети, щелкните **Next: Compute** (Далее: вычислительная среда), чтобы настроить сеть вычислений.

## <a name="enable-compute-network"></a>Включение сети вычислений

Выполните описанные ниже действия, чтобы включить вычисление и настроить сеть вычислений. 

1. На странице **Вычисления** выберите сетевой интерфейс, который вы намерены использовать для вычислений. 

    ![Страницы "Вычисления" в локальном пользовательском веб-интерфейсе, часть 2](./media/azure-stack-edge-pro-r-deploy-configure-network-compute-web-proxy/compute-network-2.png)

1. В диалоговом окне **Параметры сети** выберите элемент **Включить**. Когда вы включите вычисления, в выбранном сетевом интерфейсе устройства будет создан виртуальный коммутатор. Этот виртуальный коммутатор используется для инфраструктуры вычислений на устройстве. 
    
1. Присвойте **IP-адреса узлов Kubernetes**. Эти статические IP-адреса применяются для виртуальной машины вычислений.  

    На устройстве с *n* узлов для виртуальных машин вычисления необходимо предоставить непрерывный диапазон адресов IPv4 размером *n+1* или более, указав начальный и конечный IP-адреса этого диапазона. Так как Azure Stack Edge использует один узел, нужно предоставить не менее двух IPv4-адресов, расположенных рядом. Эти IP-адреса должны находиться в той же сети, в которой вы включили вычисление и создали виртуальный коммутатор.

    > [!IMPORTANT]
    > Kubernetes в Azure Stack Edge использует подсеть 172.27.0.0/16 для группы pod и подсеть 172.28.0.0/16 для службы. Убедитесь, что они не используются в вашей сети. В противном случае эти подсети можно изменить, выполнив командлет `Set-HcsKubeClusterNetworkInfo` из интерфейса PowerShell устройства. См. раздел [Изменение подсетей для группы pod и службы Kubernetes](azure-stack-edge-gpu-connect-powershell-interface.md#change-kubernetes-pod-and-service-subnets).


1. Присвойте **IP-адреса внешних служб Kubernetes**. Они же используются как IP-адреса балансировки нагрузки. Этот непрерывный диапазон статических IP-адресов предназначен для служб, которые вы хотите предоставлять вне кластера Kubernetes, а их количество напрямую зависит от числа предоставляемых служб. 
    
    > [!IMPORTANT]
    > Мы настоятельно рекомендуем указать не менее одного IP-адреса для доступа к вычислительным модулям из службы концентратора Azure Stack Edge Pro R. К нему вы можете по своему усмотрению добавить дополнительные IP-адреса для других служб или модулей IoT Edge (по одному адресу на каждую службу или модуль), к которым вам потребуется доступ извне кластера. Эти IP-адреса служб можно изменить позже. 
    
1. Нажмите кнопку **Применить**.

    ![Страница "Вычисления" в локальном пользовательском веб-интерфейсе, часть 3](./media/azure-stack-edge-pro-r-deploy-configure-network-compute-web-proxy/compute-network-3.png)

1. Процесс применения конфигурации может занять несколько минут и, возможно, потребуется обновить страницу в браузере. Вы увидите, что указанный порт будет включен для вычислений. 
 
    ![Страница "Вычисления" в локальном пользовательском веб-интерфейсе, часть 4](./media/azure-stack-edge-pro-r-deploy-configure-network-compute-web-proxy/compute-network-4.png)

    По завершении выберите **Next: Web proxy** (Далее: веб-прокси), чтобы настроить веб-прокси.  

  
## <a name="configure-web-proxy"></a>Настройка веб-прокси

Этот шаг настройки не является обязательным.

> [!IMPORTANT]
> * Если вы включили вычисления и используете на устройстве Azure Stack Edge Pro R модуль IoT Edge, мы рекомендуем указать для параметра проверки подлинности веб-прокси значение **Нет**. NTLM не поддерживается.
>* Файлы автоматической настройки прокси-сервера (PAC-файлы) не поддерживаются. PAC-файл определяет, как веб-браузеры и другие агенты пользователей могут автоматически выбрать соответствующий прокси-сервер (метод доступа) для получения заданного URL-адреса. Прокси-серверы, пытающиеся перехватить и прочесть весь трафик (а затем повторно подписать все собственным сертификатом), не поддерживаются, так как сертификат прокси-сервера не является доверенным. Обычно прозрачные прокси хорошо работают с Azure Stack Edge Pro R. Непрозрачные веб-прокси не поддерживаются.


1. На странице **Параметры веб-прокси** выполните следующие действия:

    1. В поле **URL-адрес веб-прокси** введите URL-адрес в следующем формате: `http://host-IP address or FQDN:Port number`. URL-адреса HTTPS не поддерживаются.

    2. В поле **Проверка подлинности** выберите **Нет** или **NTLM**. Если вы включили вычисления и используете модуль IoT Edge на устройстве Azure Stack Edge Pro R, мы рекомендуем задать для проверки подлинности веб-прокси значение **Нет**. **NTLM** не поддерживается.

    3. При прохождении аутентификации введите имя пользователя и пароль.

    4. Чтобы проверить и применить настроенные параметры веб-прокси, выберите **Применить**.
    
   ![Страница "Параметры веб-прокси" в локальном пользовательском веб-интерфейсе (2)](./media/azure-stack-edge-pro-r-deploy-configure-network-compute-web-proxy/web-proxy-2.png)

2. Когда завершится применение параметров, щелкните **Next: Device** (Устройство IoT Workbench).


## <a name="next-steps"></a>Дальнейшие действия

Из этого учебника вы узнали, как выполнять такие задачи:

> [!div class="checklist"]
> * Предварительные условия
> * настройка сети;
> * включение сети вычислений;
> * Настройка веб-прокси


Чтобы узнать, как настроить устройство Azure Stack Edge Pro R, перейдите к следующему руководству:

> [!div class="nextstepaction"]
> [Настройка параметров устройств](./azure-stack-edge-pro-r-deploy-set-up-device-update-time.md)
