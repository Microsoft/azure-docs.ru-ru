---
title: Учебник. Фильтрация и анализ данных с помощью вычислений в Azure Stack Edge Pro с GPU | Документация Майкрософт
description: Сведения о том, как настроить роль вычислений на устройстве Azure Stack Edge Pro с GPU и использовать ее для преобразования данных перед отправкой в Azure.
services: databox
author: alkohli
ms.service: databox
ms.subservice: edge
ms.topic: tutorial
ms.date: 01/05/2021
ms.author: alkohli
Customer intent: As an IT admin, I need to understand how to configure compute on Azure Stack Edge Pro so I can use it to transform the data before sending it to Azure.
ms.openlocfilehash: 28b5c107fb35c7bda9b1680050b92004436b98ff
ms.sourcegitcommit: 2aa52d30e7b733616d6d92633436e499fbe8b069
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "97935505"
---
# <a name="tutorial-transform-data-with-azure-stack-edge-pro"></a>Руководство по Преобразование данных с помощью Azure Stack Edge Pro

<!--[!INCLUDE [applies-to-skus](../../includes/azure-stack-edge-applies-to-all-sku.md)]-->

В этом учебнике описывается, как настроить роль вычислений на устройстве Azure Stack Edge Pro. Когда роль вычислений будет настроена, Azure Stack Edge Pro может преобразовывать данные перед их отправкой в ​​Azure.

Эта процедура может занять от 10 до 15 минут.


В этом руководстве описано следующее:

> [!div class="checklist"]
> * настройка вычислений;
> * добавление общих папок;
> * Добавление модуля вычислений.
> * Проверка преобразования и передачи данных

 
## <a name="prerequisites"></a>Предварительные требования

Прежде чем вы настроите роль вычислений на устройстве Azure Stack Edge Pro, убедитесь, что:
- Устройство Azure Stack Edge Pro активировано, как описано в статье [Активация Azure Stack Edge Pro](azure-stack-edge-gpu-deploy-activate.md).


## <a name="configure-compute"></a>настройка вычислений;

Чтобы настроить вычисления в Azure Stack Edge Pro, необходимо создать ресурс Центра Интернета вещей.

1. На портале Azure своего ресурса Azure Stack Edge перейдите к разделу **Обзор** и выберите **IoT Edge**.

   ![Начало работы с вычислениями](./media/azure-stack-edge-j-series-deploy-configure-compute/configure-compute-1.png)

2. В разделе **Enable IoT Edge service** (Включение службы IoT Edge) выберите **Add** (Добавить).

   ![настройка вычислений;](./media/azure-stack-edge-j-series-deploy-configure-compute/configure-compute-2.png)

3. В разделе **Create IoT Edge service** (Создание службы IoT Edge) введите параметры для ресурса Центра Интернета вещей:

   |Поле   |Значение    |
   |--------|---------|
   |Подписка      | Подписка, используемая ресурсом Azure Stack Edge |
   |Группа ресурсов    | Группа ресурсов, используемая ресурсом Azure Stack Edge |
   |Центр Интернета вещей           | Выберите **Создать** или **Использовать существующий**. <br> По умолчанию для создания ресурса Интернета вещей используется уровень служб "Стандартный" (S1). Чтобы использовать ресурс Интернета вещей уровня служб "Бесплатный", создайте его и выберите существующий ресурс. <br> В любом случае для ресурса Интернета вещей используется та же подписка и группа ресурсов, что и для ресурса Azure Stack Edge.     |
   |Имя              | Если вы не хотите использовать имя по умолчанию, указанное для нового ресурса Центра Интернета вещей, введите другое имя. |

    ![Начало работы с вычислениями 2](./media/azure-stack-edge-j-series-deploy-configure-compute/configure-compute-3.png)

4. Завершив настройку параметров, выберите **Просмотр и создание**. Проверьте параметры для своего ресурса Центра Интернета вещей и выберите **Создать**.

   Для создания ресурса Центра Интернета вещей нужно несколько минут. После создания ресурса в разделе **Обзор** будет указано, что служба IoT Edge теперь запущена.

    ![Начало работы с вычислениями 3](./media/azure-stack-edge-j-series-deploy-configure-compute/configure-compute-4.png)

5. Чтобы убедиться, что роль пограничных вычислений настроена, выберите **Свойства**.

   ![Начало работы с вычислениями 4](./media/azure-stack-edge-j-series-deploy-configure-compute/configure-compute-5.png)

   При настройке роли вычислений Edge на устройстве Edge создается два устройства — устройство Интернета вещей и устройство IoT Edge. Оба устройства можно просмотреть в ресурсе Центра Интернета вещей. На этом устройстве IoT Edge также запущена среда выполнения IoT Edge. На данный момент доступна только платформа Linux для устройства IoT Edge.


## <a name="add-shares"></a>добавление общих папок;

Для простого развертывания, описанного в этом руководстве, вам понадобятся две общие папки: общая папка Edge и еще одна локальная общая папка Edge.

1. Добавьте общую папку Edge на устройство следующим образом:

    1. В ресурсе Azure Stack Edge поочередно выберите **Вычисления Edge > Начало работы**.
    2. На плитке **Добавление общих папок** щелкните **Добавить**.

        ![Плитка "Добавление общих папок"](./media/azure-stack-edge-j-series-deploy-configure-compute/add-share-1.png) 

    3. В колонке **Добавление общего файлового ресурса** укажите имя общей папки и выберите ее тип.
    4. Чтобы подключить общую папку Edge, установите флажок **Использовать общую папку с пограничными вычислениями**.
    5. Выберите **учетную запись хранения**, **службу хранилища**, существующего пользователя, а затем щелкните **Создать**.

        ![Добавление общей папки Edge](./media/azure-stack-edge-j-series-deploy-configure-compute/add-edge-share-1.png) 

    Если вы создали локальную общую папку NFS, используйте следующую команду удаленной синхронизации (`rsync`) для копирования в нее файлов:

    `rsync <source file path> < destination file path>`

    Дополнительные сведения о команде `rsync` см. в [документации по `Rsync`](https://www.computerhope.com/unix/rsync.htm).

    > [!NOTE]
    > Чтобы подключить общую папку NFS для вычислений, нужно настроить сеть вычислений в той же подсети, что и виртуальный IP-адрес NFS. Сведения о настройке сети вычислений см. в статье [Включение сети вычислений в Azure Stack Edge Pro](azure-stack-edge-gpu-deploy-configure-network-compute-web-proxy.md).

    Будет создана общая папка Edge, и вы получите уведомление об успешном создании. Список общих ресурсов может быть обновлен, однако вам нужно дождаться завершения создания общего ресурса.

2. Добавьте локальную общую папку Edge на устройство Edge. Для этого повторите все шаги, описанные на предыдущем этапе, и установите флажок **Настройка в качестве локальной общей папки Edge**. Данные из локальной обшей папки остаются на устройстве.

    ![Добавление локальной общей папки Edge](./media/azure-stack-edge-j-series-deploy-configure-compute/add-edge-share-2.png)

  
3. Щелкните **Добавление общих папок**, чтобы просмотреть обновленный список общих папок.

    ![Обновленный список общих папок](./media/azure-stack-edge-j-series-deploy-configure-compute/add-edge-share-3.png) 
 

## <a name="add-a-module"></a>Добавление модуля

Можно добавить пользовательский или готовый модуль. На этом устройстве Edge нет пользовательских модулей. Чтобы узнать, как создать пользовательский модуль, ознакомьтесь со статьей [Разработка на C# модуля для устройства Azure Stack Edge Pro](azure-stack-edge-j-series-create-iot-edge-module.md).

В этом разделе объясняется, как добавить пользовательский модуль к устройству IoT Edge, которое было создано с помощью руководства [Разработка на C# модуля для Azure Stack Edge Pro](azure-stack-edge-j-series-create-iot-edge-module.md). Этот пользовательский модуль позволяет получить файлы из локальной общей папки Edge на устройстве Edge и перенести их в облачную общую папку Edge на устройстве. Затем облачный ресурс переносит файлы в учетную запись Azure, связанную с облачным ресурсом.

1. Поочередно выберите **Вычисления Edge > Начало работы**. На плитке **Добавление модулей** выберите **простой** тип сценария. Выберите **Добавить**.
2. В колонке **Настройка и добавление модулей** введите следующие значения:

    
    |Поле  |Значение  |
    |---------|---------|
    |Имя     | Уникальное имя модуля. Этот модуль является контейнером Docker, который можно развернуть на устройстве IoT Edge, связанном с вашим устройством Azure Stack Edge Pro.        |
    |URI образа     | URI образа для соответствующего образа контейнера для модуля.        |
    |Требуются учетные данные     | Если установлен этот флажок, для получения модулей с соответствующим URL-адресом используются имя пользователя и пароль.        |
    |Входная общая папка     | Выберите входную общую папку. В этом случае входной общей папкой будет локальная общая папка Edge. Используемый здесь модуль позволяет переместить файлы из локальной общей папки Edge в общую папку Edge, из которой они передаются в облако.        |
    |Выходная общая папка     | Выберите выходную общую папку. В этом случае выходной общей папкой будет общая папка Edge.        |
    |Тип триггера     | Выберите значение **Файл** или **Расписание**. Триггер файла срабатывает, когда возникает событие файла, например файл записывается во входную общую папку. Запланированный триггер срабатывает в соответствии с определенным вами расписанием.         |
    |Имя триггера     | Уникальное имя триггера.         |
    |Переменные среды| Дополнительные сведения, которые помогут определить среду, где будет запущен модуль.   |

    ![Добавление и настройка модуля](./media/azure-stack-edge-j-series-deploy-configure-compute/add-module-1.png)

3. Выберите **Добавить**. Модуль будет добавлен. Перейдите на страницу **Обзор**. На плитке **Модули** появятся сведения о том, что модуль развернут. 

    ![Модуль развернут](./media/azure-stack-edge-j-series-deploy-configure-compute/add-module-2.png)

### <a name="verify-data-transform-and-transfer"></a>Проверка преобразования и передачи данных

Последний шаг — убедиться, что модуль подключен и работает как ожидалось. Состояние выполнения модуля должно быть "Работает" для вашего устройства IoT Edge в ресурсе Центра Интернета вещей.

Чтобы убедиться, что модуль работает, выполните следующее:

1. Выберите плитку **Добавить модуль**. Откроется колонка **Модули**. В списке модулей найдите развернутый вами модуль. Для состояния среды выполнения модуля, который вы добавили, должно отображаться значение *запущена*.

    ![Просмотр сведений о развернутом модуле](./media/azure-stack-edge-j-series-deploy-configure-compute/add-module-3.png)
 
1. С помощью проводника подключитесь к локальным и облачным общим папкам Edge, созданным ранее.

    ![Проверка преобразования данных (1)](./media/azure-stack-edge-j-series-deploy-configure-compute/verify-data-2.png) 
 
1. Добавьте данные в локальную общую папку.

    ![Проверка преобразования данных (2)](./media/azure-stack-edge-j-series-deploy-configure-compute/verify-data-3.png) 
 
   Данные переносятся в облачную общую папку.

    ![Проверка преобразования данных (3)](./media/azure-stack-edge-j-series-deploy-configure-compute/verify-data-4.png)  

   Затем данные переносятся из облачного ресурса в учетную запись хранения. Для просмотра данных вы можете использовать Обозреватель службы хранилища.

    <!--![Verify data transform](./media/azure-stack-edge-j-series-deploy-configure-compute/verify-data-5.png)-->
 
Вы завершили процесс проверки.


## <a name="next-steps"></a>Дальнейшие действия

В этом руководстве вы узнали, как выполнять следующие задачи:

> [!div class="checklist"]
> * настройка вычислений;
> * добавление общих папок;
> * Добавление модуля вычислений.
> * Проверка преобразования и передачи данных

Сведения об администрировании устройства Azure Stack Edge Pro см. в следующей статье:

> [!div class="nextstepaction"]
> [Использование локального пользовательского веб-интерфейса для администрирования Azure Stack Edge Pro](azure-stack-edge-manage-access-power-connectivity-mode.md)
