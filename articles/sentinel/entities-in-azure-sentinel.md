---
title: Использование сущностей для классификации и анализа данных в Azure Sentinel | Документация Майкрософт
description: Назначьте классификации сущностей (пользователи, имена узлов, IP-адреса) элементам данных в Sentinel Azure и используйте их для сравнения, анализа и корреляции данных из нескольких источников.
services: sentinel
documentationcenter: na
author: yelevin
manager: rkarlin
editor: ''
ms.service: azure-sentinel
ms.subservice: azure-sentinel
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 02/10/2021
ms.author: yelevin
ms.openlocfilehash: 43da1af7a3001d7f8e000a878948428a3d63aa4e
ms.sourcegitcommit: 6386854467e74d0745c281cc53621af3bb201920
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/08/2021
ms.locfileid: "102456340"
---
# <a name="classify-and-analyze-data-using-entities-in-azure-sentinel"></a>Классификация и анализ данных с помощью сущностей в Azure Sentinel

## <a name="what-are-entities"></a>Что такое сущности?

Когда оповещения отправляются или создаются с помощью метки Azure, они содержат элементы данных, которые Sentinel может распознать и классифицировать в категории как **сущности**. Когда в Azure Sentinel понимается тип сущности, представляемый определенным элементом данных, он знает о нужных вопросах, а также может сравнить сведения об этом элементе в полном диапазоне источников данных и легко контролировать его и ссылаться на него на протяжении всего процесса-посредника, изучения, исправления, поиска и т. д. Наиболее распространенными примерами сущностей являются пользователи, узлы, файлы, процессы, IP-адреса и URL-адреса.

### <a name="entity-identifiers"></a>Идентификаторы сущностей

Azure Sentinel поддерживает широкий спектр типов сущностей. Каждый тип имеет собственные уникальные атрибуты, включая некоторые, которые можно использовать для поиска конкретной сущности. Эти атрибуты представлены в сущности в виде полей и называются **идентификаторами**. Полный список поддерживаемых сущностей и их идентификаторов см. ниже.

#### <a name="strong-and-weak-identifiers"></a>Строгие и слабые идентификаторы

Как уже отмечалось выше, для каждого типа сущности имеются поля или наборы полей, которые могут его опознать. Эти поля или наборы полей могут называться **строгими идентификаторами** , если они уникально идентифицируют сущность без какой бы то ни было неоднозначности, или как **слабые идентификаторы** , если они могут идентифицировать сущность в некоторых обстоятельствах, но не обязательно должны однозначно идентифицировать сущность во всех случаях. Однако во многих случаях выбор слабых идентификаторов можно объединить, чтобы получить надежный идентификатор.

Например, учетные записи пользователей можно идентифицировать в качестве сущностей **учетных записей** несколькими способами: используя единый **надежный** идентификатор, такой как числовой идентификатор учетной записи Azure AD (поле **GUID** ) или значение **имени участника-пользователя (UPN)** , либо используя сочетание **слабых идентификаторов** , таких как **имя** и **нтдомаин** поля. Разные источники данных могут обозначать одного и того же пользователя разными способами. Каждый раз, когда Sentinel встречается с двумя сущностями, которые могут располагаться как одна и та же сущность на основе их идентификаторов, объединяет две сущности в единую сущность, чтобы обеспечить правильную и согласованную обработку.

Однако если один из поставщиков ресурсов создает предупреждение, в котором сущность недостаточна для определения, например, используя только один **слабый идентификатор** , например имя пользователя без контекста доменного имени, то сущность пользователя нельзя объединить с другими экземплярами той же учетной записи пользователя. Эти экземпляры будут идентифицированы как отдельная сущность, и эти две сущности будут оставаться отдельными, а не едиными.

Чтобы свести к сведению риск возникновения такой ситуации, необходимо убедиться, что все поставщики предупреждений должны правильно определить сущности в создаваемых ими предупреждениях. Кроме того, синхронизация сущностей учетных записей пользователей с Azure Active Directory может создать унифицированный каталог, который будет иметь возможность объединять сущности учетных записей пользователей.

#### <a name="supported-entities"></a>Поддерживаемые сущности

В Azure Sentinel в настоящее время определены следующие типы сущностей:

- Учетная запись пользователя
- Узел
- IP-адрес
- Вредоносная программа
- Файл
- Процесс
- Облачное приложение
- Доменное имя
- Ресурс Azure
- Хэш файла
- Раздел реестра
- Значение реестра
- Группа безопасности
- URL-адрес
- Устройство Интернета вещей
- Mailbox
- Почтовый кластер
- Почтовое сообщение
- Отправка почты

Идентификаторы сущностей и другие релевантные сведения можно просмотреть в ссылке на [сущности](entities-reference.md).

## <a name="entity-mapping"></a>Сопоставление сущностей

Каким образом Azure Sentinel распознает фрагмент данных в предупреждении, как идентифицировать сущность?

Давайте посмотрим, как выполняется обработка данных в Azure Sentinel. Данные принимаются из различных источников с помощью [соединителей](connect-data-sources.md): между службами, на основе агентов или с помощью службы системного журнала и сервера пересылки журналов. Данные хранятся в таблицах в рабочей области Log Analytics. Затем эти таблицы запрашиваются по регулярному расписанию в соответствии с определенными и включенными правилами аналитики. Одним из множества действий, выполняемых этими правилами аналитики, является сопоставление полей данных в таблицах с сущностями, распознаваемыми с помощью маркеров Azure. В соответствии с сопоставлениями, определенными в правилах аналитики, Sentinel Azure будет принимать поля из результатов, возвращаемых запросом, распознать их по идентификаторам, указанным для каждого типа сущности, и применить к ним тип сущности, определяемый этими идентификаторами.

В чем же смысл всего этого?

Когда метка Azure может вычислить сущности в предупреждениях из разных типов источников данных, и особенно в том случае, если это возможно с помощью надежных идентификаторов, общих для каждого источника данных или третьей схемы, она может затем легко сопоставлять все эти предупреждения и источники данных. Эти корреляции помогают создать обширное хранилище информации и аналитических сведений о сущностях, обеспечивая надежную основу для операций безопасности.

Сведения о [сопоставлении полей данных с сущностями](map-data-fields-to-entities.md).

Узнайте [, какие идентификаторы строго указывают сущность](entities-reference.md).

## <a name="entity-pages"></a>Страницы сущностей

Когда вы сталкиваетесь с любой сущностью (в настоящее время ограниченными пользователями и узлами) в поиске, предупреждении или расследовании, вы можете выбрать сущность и принять ее на **странице сущностей**— полную таблицу с полезной информацией об этой сущности. Типы сведений, которые можно найти на этой странице, включают основные факты о сущности, временную шкалу важных событий, связанных с этой сущностью, и сведения о поведении сущности.

Страницы сущностей состоят из трех частей:

- Левая панель содержит идентификационную информацию сущности, собранную из источников данных, таких как Azure Active Directory, Azure Monitor, центр безопасности Azure и защитник Майкрософт.

- Центральная панель отображает графическую и текстовую шкалу для важных событий, связанных с сущностью, таких как оповещения, закладки и действия. Действия — это статистические выражения важных событий от Log Analytics. Запросы, которые обнаруживают эти действия, разрабатываются группами исследований корпорации Майкрософт по безопасности.

- На правой панели представлена аналитика поведения сущности. Эти аналитические сведения помогают быстро выявить аномалии и угрозы безопасности. Аналитические данные разрабатываются группами исследований корпорации Майкрософт по безопасности и основаны на моделях обнаружения аномалий.

### <a name="the-timeline"></a>Временная шкала

:::image type="content" source="./media/identify-threats-with-entity-behavior-analytics/entity-pages-timeline.png" alt-text="Временная шкала страниц сущностей":::

Временная шкала является основной частью вклада страницы сущности в аналитику поведения в Azure Sentinel. Он представляет собой историю событий, связанных с сущностями, которые помогают понять действия сущности в течение определенного промежутка времени.

Можно выбрать **диапазон времени** из нескольких параметров (например, за *последние 24 часа*) или задать для него любой пользовательский интервал времени. Кроме того, можно задать фильтры, которые ограничивают данные на временной шкале конкретными типами событий или предупреждений.

На временную шкалу включены следующие типы элементов:

- Оповещения — все оповещения, в которых сущность определена как **сопоставленная сущность**. Обратите внимание, что если ваша организация создала [пользовательские оповещения с помощью правил аналитики](./tutorial-detect-threats-custom.md), следует убедиться, что сопоставление сущностей правил выполняется правильно.

- Закладки — все закладки, включающие конкретную сущность, показанную на странице.

- Действия — это статистическая обработка важных событий, связанных с сущностью.

### <a name="entity-insights"></a>Entity Insights

Entity Insights — это запросы, определяемые исследователими безопасности Майкрософт, которые помогают аналитикам более эффективно исследовать и эффективнее. Аналитика представляется как часть страницы сущности и предоставляет ценные сведения о безопасности для узлов и пользователей в виде табличных данных и диаграмм. Наличие информации здесь означает, что вам не нужно Log Analytics. Аналитические сведения включают в себя данные о входах, добавлении групп, аномальных событиях и многом другим, а также включают сложные алгоритмы ML для обнаружения аномального поведения.

Аналитика основана на следующих источниках данных:

- системный журнал (Linux);
- SecurityEvent (Windows)
- AuditLogs (Azure AD)
- Сигнинлогс (Azure AD)
- Оффицеактивити (Office 365)
- Бехавиораналитикс (Azure Sentinel УЕБА)
- Пульс (агент Azure Monitor)
- CommonSecurityLog (Sentinel Azure)

### <a name="how-to-use-entity-pages"></a>Как использовать страницы сущностей

Страницы сущностей разрабатываются как часть нескольких сценариев использования, и к ним можно получить доступ из управления инцидентами, с помощью графа расследования, закладок или непосредственно со страницы **поиска сущностей в главном** меню Azure Sentinel.

:::image type="content" source="./media/identify-threats-with-entity-behavior-analytics/entity-pages-use-cases.png" alt-text="Варианты использования страниц сущностей":::

## <a name="next-steps"></a>Дальнейшие действия

В этом документе вы узнали о работе с сущностями в Azure Sentinel. Практические рекомендации по реализации и использованию ценных сведений, которые вы получили, см. в следующих статьях:

- [Включите аналитику поведения сущностей](./enable-entity-behavior-analytics.md) в Azure Sentinel.
- [Поиск угроз безопасности](./hunting.md).
