---
title: Использование сущностей для классификации и анализа данных в Azure Sentinel | Документация Майкрософт
description: Назначьте классификации сущностей (пользователи, имена узлов, IP-адреса) элементам данных в Sentinel Azure и используйте их для сравнения, анализа и корреляции данных из нескольких источников.
services: sentinel
documentationcenter: na
author: yelevin
manager: rkarlin
editor: ''
ms.service: azure-sentinel
ms.subservice: azure-sentinel
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 02/10/2021
ms.author: yelevin
ms.openlocfilehash: 43da1af7a3001d7f8e000a878948428a3d63aa4e
ms.sourcegitcommit: e6de1702d3958a3bea275645eb46e4f2e0f011af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102456340"
---
# <a name="classify-and-analyze-data-using-entities-in-azure-sentinel"></a>Классификация и анализ данных с помощью сущностей в Azure Sentinel

## <a name="what-are-entities"></a>Что такое сущности?

Когда оповещения отправляются или создаются с помощью метки Azure, они содержат элементы данных, которые Sentinel может распознать и классифицировать в категории как **сущности**. Когда в Azure Sentinel понимается тип сущности, представляемый определенным элементом данных, он знает о нужных вопросах, а также может сравнить сведения об этом элементе в полном диапазоне источников данных и легко контролировать его и ссылаться на него на протяжении всего процесса-посредника, изучения, исправления, поиска и т. д. Наиболее распространенными примерами сущностей являются пользователи, узлы, файлы, процессы, IP-адреса и URL-адреса.

### <a name="entity-identifiers"></a>Идентификаторы сущностей

Azure Sentinel поддерживает широкий спектр типов сущностей. Каждый тип имеет собственные уникальные атрибуты, включая некоторые, которые можно использовать для поиска конкретной сущности. Эти атрибуты представлены в сущности в виде полей и называются **идентификаторами**. Полный список поддерживаемых сущностей и их идентификаторов см. ниже.

#### <a name="strong-and-weak-identifiers"></a>Строгие и слабые идентификаторы

Как уже отмечалось выше, для каждого типа сущности имеются поля или наборы полей, которые могут его опознать. Эти поля или наборы полей могут называться **строгими идентификаторами** , если они уникально идентифицируют сущность без какой бы то ни было неоднозначности, или как **слабые идентификаторы** , если они могут идентифицировать сущность в некоторых обстоятельствах, но не обязательно должны однозначно идентифицировать сущность во всех случаях. Однако во многих случаях выбор слабых идентификаторов можно объединить, чтобы получить надежный идентификатор.

Например, учетные записи пользователей можно идентифицировать в качестве сущностей **учетных записей** несколькими способами: используя единый **надежный** идентификатор, такой как числовой идентификатор учетной записи Azure AD (поле **GUID** ) или значение **имени участника-пользователя (UPN)** , либо используя сочетание **слабых идентификаторов** , таких как **имя** и **нтдомаин** поля. Различные источники данных могут идентифицировать одного и того же пользователя по-разному. Каждый раз, когда Sentinel встречается с двумя сущностями, которые могут располагаться как одна и та же сущность на основе их идентификаторов, объединяет две сущности в единую сущность, чтобы обеспечить правильную и согласованную обработку.

Однако если один из поставщиков ресурсов создает предупреждение, в котором сущность недостаточна для определения, например, используя только один **слабый идентификатор** , например имя пользователя без контекста доменного имени, то сущность пользователя нельзя объединить с другими экземплярами той же учетной записи пользователя. Эти экземпляры будут идентифицированы как отдельная сущность, и эти две сущности будут оставаться отдельными, а не едиными.

Чтобы свести к минимуму риск возникновения такой ситуации, необходимо убедиться, что все поставщики оповещений правильно идентифицируют сущности в создаваемых ими оповещениях. Кроме того, синхронизация сущностей учетных записей пользователей с Azure Active Directory позволяет создать унифицированный каталог, который сможет объединять сущности учетных записей пользователей.

#### <a name="supported-entities"></a>Поддерживаемые сущности

В Azure Sentinel в настоящее время идентифицированы следующие типы сущностей.

- Учетная запись пользователя
- Узел
- IP-адрес
- Вредоносная программа
- Файл
- Процесс
- Облачное приложение
- Доменное имя
- Ресурс Azure
- Хэш файла
- Раздел реестра
- Значение реестра
- Группа безопасности
- URL-адрес
- Устройство Интернета вещей
- Mailbox
- Почтовый кластер
- Почтовое сообщение
- Отправка почты

Идентификаторы сущностей и другие релевантные сведения можно просмотреть в ссылке на [сущности](entities-reference.md).

## <a name="entity-mapping"></a>Сопоставление сущностей

Каким образом Azure Sentinel распознает фрагмент данных в предупреждении, как идентифицировать сущность?

Давайте посмотрим, как выполняется обработка данных в Azure Sentinel. Данные принимаются из различных источников с помощью [соединителей](connect-data-sources.md): между службами, на основе агентов или с помощью службы системного журнала и сервера пересылки журналов. Данные хранятся в таблицах в рабочей области Log Analytics. Затем эти таблицы запрашиваются по регулярному расписанию в соответствии с определенными и включенными правилами аналитики. Одним из множества действий, выполняемых этими правилами аналитики, является сопоставление полей данных в таблицах с сущностями, распознаваемыми с помощью маркеров Azure. В соответствии с сопоставлениями, определенными в правилах аналитики, Sentinel Azure будет принимать поля из результатов, возвращаемых запросом, распознать их по идентификаторам, указанным для каждого типа сущности, и применить к ним тип сущности, определяемый этими идентификаторами.

В чем же смысл всего этого?

Когда метка Azure может вычислить сущности в предупреждениях из разных типов источников данных, и особенно в том случае, если это возможно с помощью надежных идентификаторов, общих для каждого источника данных или третьей схемы, она может затем легко сопоставлять все эти предупреждения и источники данных. Эти корреляции помогают создать обширное хранилище информации и аналитических сведений о сущностях, обеспечивая надежную основу для операций безопасности.

Сведения о [сопоставлении полей данных с сущностями](map-data-fields-to-entities.md).

Узнайте [, какие идентификаторы строго указывают сущность](entities-reference.md).

## <a name="entity-pages"></a>Страницы сущностей

При обнаружении сущности (в настоящее время ограничены пользователями и узлами) в ходе поиска, предупреждении или расследовании вы можете выбрать сущность и перенести ее на **страницу сущностей**, где представлена полная таблица с полезной информацией об этой сущности. На этой странице можно найти следующие сведения: основные сведения сущности, временная шкала значимых событий, связанных с этой сущностью, и полезные сведения о поведении сущности.

Страницы сущностей состоят из трех частей.

- На панели слева приведены идентификационные данные сущности, собранные из источников данных, таких как Azure Active Directory, Azure Monitor, центр безопасности Azure и Microsoft Defender.

- На центральной панели отображается графическая текстовая шкала для значимых событий, связанных с сущностью, таких как оповещения, закладки и действия. Действия — это агрегаты важных событий из Log Analytics. Запросы, которые обнаруживают эти действия, разрабатываются аналитиками безопасности Майкрософт.

- На правой панели представлены полезные сведения о поведении сущности. Эти полезные сведения помогают быстро выявить аномалии и угрозы безопасности. Полезные сведения разрабатываются аналитиками безопасности Майкрософт на основе моделей обнаружения аномалий.

### <a name="the-timeline"></a>Временная шкала

:::image type="content" source="./media/identify-threats-with-entity-behavior-analytics/entity-pages-timeline.png" alt-text="Временная шкала страниц сущностей":::

Временная шкала является основным вкладом страницы сущности в аналитику поведения в Azure Sentinel. Это история событий, связанных с сущностями, которая помогает понять действия сущности в течение определенного промежутка времени.

Можно выбрать **диапазон времени** из нескольких предварительно заданных параметров (например, за *последние 24 часа*) или задать для него любой пользовательский интервал. Кроме того, можно задать фильтры, которые ограничивают данные на временной шкале конкретными типами событий или оповещений.

На временной шкале представлены следующие типы элементов.

- Оповещения — все оповещения, в которых сущность определена как **сопоставленная сущность**. Обратите внимание, что если ваша организация создала [пользовательские оповещения с помощью правил аналитики](./tutorial-detect-threats-custom.md), то следует убедиться, что сопоставление сущностей правил выполнено правильно.

- Закладки — все закладки, которые содержат конкретную сущность, показанную на странице.

- Действия — это агрегирование важных событий, связанных с сущностью.

### <a name="entity-insights"></a>Полезные сведения о сущностях

Полезные сведения о сущностях — это запросы, определяемые аналитиками безопасности Майкрософт, которые помогают им проводить расследования более эффективно. Аналитика представляется как часть страницы сущности и предоставляет ценные сведения о безопасности узлов и пользователей в виде табличных данных и диаграмм. Если здесь есть информация, то вам не нужно переходить в Log Analytics. Аналитические сведения включают в себя данные о входах, добавлении групп, аномальных событиях и многом другим, а также включают сложные алгоритмы ML для обнаружения аномального поведения.

Аналитика основана на следующих источниках данных:

- системный журнал (Linux);
- SecurityEvent (Windows)
- AuditLogs (Azure AD)
- Сигнинлогс (Azure AD)
- Оффицеактивити (Office 365)
- Бехавиораналитикс (Azure Sentinel УЕБА)
- Пульс (агент Azure Monitor)
- CommonSecurityLog (Sentinel Azure)

### <a name="how-to-use-entity-pages"></a>Работа со страницами сущностей

Страницы сущностей предназначены для использования в рамках нескольких сценариев, и доступ к ним осуществляется из системы управления инцидентами, графов расследования, закладок или непосредственно со страницы поиска сущностей в разделе **Анализ поведения сущностей** в главном меню Azure Sentinel.

:::image type="content" source="./media/identify-threats-with-entity-behavior-analytics/entity-pages-use-cases.png" alt-text="Варианты использования страниц сущностей":::

## <a name="next-steps"></a>Дальнейшие действия

В этом документе вы узнали о работе с сущностями в Azure Sentinel. Практические рекомендации по реализации и использованию ценных сведений, которые вы получили, см. в следующих статьях:

- [Включите аналитику поведения сущностей](./enable-entity-behavior-analytics.md) в Azure Sentinel.
- [Поиск угроз безопасности](./hunting.md).
