---
title: Дополнительные параметры подписи сертификата маркера SAML для приложений Azure AD
description: Узнайте, как использовать расширенные параметры подписи сертификата в маркере SAML для предварительно интегрированных приложений в Azure Active Directory
services: active-directory
documentationcenter: ''
author: kenwith
manager: daveba
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 03/25/2019
ms.author: kenwith
ms.reviewer: jeedes
ms.custom: aaddev
ms.collection: M365-identity-device-management
ms.openlocfilehash: 9dd6a7a34ac231f8af9d08aab99e3d552f33ea1d
ms.sourcegitcommit: d49bd223e44ade094264b4c58f7192a57729bada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/02/2021
ms.locfileid: "99259627"
---
# <a name="advanced-certificate-signing-options-in-the-saml-token-for-gallery-apps-in-azure-active-directory"></a>Расширенные параметры подписи сертификата в маркере SAML для приложений коллекции в Azure Active Directory

На сегодняшний день Azure Active Directory (Azure AD) поддерживает тысячи предварительно интегрированных приложений, доступных в коллекции приложений Azure Active Directory. Свыше 500 приложений поддерживают единый вход с помощью протокола [язык разметки зявлений системы безопасности (SAML)](https://wikipedia.org/wiki/Security_Assertion_Markup_Language) (SAML) 2,0, например приложения [NetSuite](https://azuremarketplace.microsoft.com/marketplace/apps/aad.netsuite) . Когда клиент выполняет проверку подлинности в приложении через Azure AD с помощью SAML, Azure AD отправляет маркер приложению (через HTTP-запрос POST). Затем приложение проверяет и использует маркер для входа клиента вместо запроса имени пользователя и пароля. Данные токены SAML подписываются с помощью уникального сертификата, который создается в Azure AD, а также определенных стандартных алгоритмов.

Azure AD использует некоторые параметры по умолчанию для приложений коллекции. Значения по умолчанию настраиваются в зависимости от требований к приложению.

В Azure AD можно настроить параметры подписи сертификата и алгоритм подписи сертификата.

## <a name="certificate-signing-options"></a>Параметры подписи сертификата

Azure AD поддерживает три варианта подписывания сертификатов.

* **Утверждение знака SAML**. Этот параметр по умолчанию задается для большинства приложений коллекции. Если выбран этот параметр, Azure AD в качестве поставщика удостоверений (IdP) подписывает утверждение SAML и сертификат с помощью сертификата [X. 509](https://wikipedia.org/wiki/X.509) приложения.

* **Ответ знака SAML**. Если выбран этот параметр, Azure AD в качестве IdP подписывает ответ SAML с помощью сертификата X. 509 приложения.

* **Ответ знака SAML и утверждение**. Если выбран этот параметр, Azure AD в качестве IdP подписывает весь токен SAML с помощью сертификата X. 509 приложения.

## <a name="certificate-signing-algorithms"></a>Алгоритмы подписывания сертификатов

Azure AD поддерживает два алгоритма подписывания или алгоритм SHA для подписания ответа SAML:

* **SHA-256**. Azure AD использует этот алгоритм по умолчанию для подписывания ответов SAML. Это самый новый алгоритм, который более безопасен, чем SHA-1. Большинство приложений поддерживает алгоритм SHA-256. Если приложение поддерживает только алгоритм подписывания SHA-1, можно выбрать его. В противном случае рекомендуется использовать алгоритм SHA-256 для подписывания ответов SAML.

* **SHA-1**. Этот алгоритм является более старым и считается менее безопасным, чем SHA-256. Если приложение поддерживает только этот алгоритм подписывания, его можно выбрать из раскрывающегося списка **Алгоритм подписывания**. В этом случае Azure AD будет подписывать ответы SAML с помощью алгоритма SHA-1.

## <a name="change-certificate-signing-options-and-signing-algorithm"></a>Изменение параметров подписи сертификата и алгоритма подписи

Чтобы изменить параметры подписи сертификата SAML для приложения и алгоритм подписи сертификата, выберите интересующее приложение:

1. На [портале Azure Active Directory](https://aad.portal.azure.com/)Войдите в свою учетную запись. Откроется страница **центра администрирования Azure Active Directory** .
1. В области слева выберите **Корпоративные приложения**. Появится список корпоративных приложений в вашей учетной записи.
1. Выберите приложение. Откроется страница обзора для приложения.

   ![Пример: страница "Обзор приложения"](./media/certificate-signing-options/application-overview-page.png)

Затем измените параметры подписи сертификата в токене SAML для этого приложения:

1. В левой области страницы Обзор приложения выберите **единый вход**.
1. Если появится страница **Настройка одного Sign-On с SAML-Preview** , перейдите к шагу 5.
1. Если страница **Выбор метода единого входа** не отображается, выберите **изменить режимы единого входа** , чтобы отобразить эту страницу.
1. На странице **Выбор метода единого входа** выберите **SAML** , если он доступен. (Если **SAML** недоступен, приложение не поддерживает SAML, и вы можете игнорировать оставшуюся часть этой процедуры и статьи.)
1. На странице **Настройка единого Sign-On с SAML-Preview** найдите заголовок **сертификата подписи SAML** и щелкните значок **редактирования** (карандаш). Откроется страница « **сертификат подписи SAML** ».

   ![Пример: страница "сертификат подписи SAML"](./media/certificate-signing-options/saml-signing-page.png)

1. В раскрывающемся списке **Вариант подписывания** выберите **Ответ знака SAML**, **Утверждение знака SAML** или **Ответ знака SAML и утверждение**. Описания этих параметров приведены ранее в этой статье в разделе [Параметры подписи сертификатов](#certificate-signing-options).
1. В раскрывающемся списке **Алгоритм подписывания** выберите **SHA-1** или **SHA-256**. Описания этих параметров приведены ранее в этой статье в разделе [алгоритмы подписи сертификатов](#certificate-signing-algorithms) .
1. Если вы удовлетворены вашими параметрами, нажмите кнопку **сохранить** , чтобы применить новые параметры сертификата для подписи SAML. В противном случае выберите **X** , чтобы отменить изменения.

## <a name="next-steps"></a>Дальнейшие действия

* [Настройка единого входа для приложений, которых нет в коллекции приложений Azure Active Directory](./configure-saml-single-sign-on.md)
* [Устранение неполадок единого входа на основе SAML](./debug-saml-sso-issues.md)