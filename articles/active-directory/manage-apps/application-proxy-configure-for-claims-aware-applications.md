---
title: 'Приложения с поддержкой утверждений: прокси приложения Azure AD | Документация Майкрософт'
description: Как публиковать локальные приложения ASP.NET, принимающие утверждения ADFS для защиты удаленного доступа пользователей.
services: active-directory
documentationcenter: ''
author: kenwith
manager: daveba
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: how-to
ms.date: 11/08/2018
ms.author: kenwith
ms.reviewer: japere
ms.collection: M365-identity-device-management
ms.openlocfilehash: b90c2d47e70a4f7595ac535d5f8ba9506087eb72
ms.sourcegitcommit: d49bd223e44ade094264b4c58f7192a57729bada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/02/2021
ms.locfileid: "99258530"
---
# <a name="working-with-claims-aware-apps-in-application-proxy"></a>Работа с приложениями, поддерживающими утверждения, в прокси приложения
[Приложения, поддерживающие утверждения](/previous-versions/windows/desktop/legacy/bb736227(v=vs.85)), выполняют перенаправление к службе токенов безопасности (STS). Служба токенов безопасности запрашивает учетные данные у пользователя в обмен на токен, после чего перенаправляет пользователя в приложение. Существует несколько способов настроить прокси приложения для работы с таким перенаправлением. В этой статье описывается настройка развертывания для приложений, поддерживающих утверждения. 

## <a name="prerequisites"></a>предварительные требования
Убедитесь, что служба токенов безопасности, в которую перенаправляет пользователя приложение, поддерживающее утверждения, доступна за пределами вашей локальной сети. Можно предоставить службу токенов безопасности через прокси-сервер или разрешить внешние подключения. 

## <a name="publish-your-application"></a>Публикация приложения

1. Опубликуйте приложение в соответствии с инструкциями, описанными в статье [Публикация приложений с помощью прокси приложения](application-proxy-add-on-premises-application.md).
2. Перейдите на страницу приложения на портале и выберите **Единый вход**.
3. Если для параметра **Метод предварительной проверки подлинности** выбрано значение **Azure Active Directory**, выберите для параметра **Метод внутренней проверки подлинности** значение **Единый вход Azure AD отключен**. Если для параметра **Метод предварительной проверки подлинности** выбрать значение **Сквозной режим**, это преимущество будет отсутствовать.

## <a name="configure-adfs"></a>Настройка AD FS

AD FS можно настроить для приложений, поддерживающих утверждения, одним из двух способов. Первый — с помощью личных доменов. Второй — с помощью WS-Federation. 

### <a name="option-1-custom-domains"></a>Вариант 1. Личные домены

Если все внутренние URL-адреса для приложений представляют собой полные доменные имена, то для этих приложений можно настроить [личные домены](application-proxy-configure-custom-domain.md). Используйте личные домены для создания внешних URL-адресов, совпадающих с внутренними URL-адресами. Когда внешние URL-адреса совпадают с внутренними, перенаправления STS будут выполняться независимо от того, работают ли пользователи локально или удаленно. 

### <a name="option-2-ws-federation"></a>Вариант 2. WS-Federation

1. Откройте оснастку управления AD FS.
2. Перейдите в раздел **Отношения доверия проверяющей стороны**, щелкните правой кнопкой мыши приложение, которое публикуется с помощью прокси приложения, и выберите **Свойства**.  

   ![Щелчок правой кнопкой мыши имени приложения в разделе "Отношения доверия проверяющей стороны" (снимок экрана)](./media/application-proxy-configure-for-claims-aware-applications/appproxyrelyingpartytrust.png)  

3. На вкладке **Конечные точки** в поле **Тип конечной точки** выберите **WS-Federation**.
4. В поле **Доверенный URL-адрес** введите URL-адрес, который вы указали в прокси приложении в поле **Внешний URL-адрес**, и нажмите кнопку **ОК**.  

   ![Добавление конечной точки: задайте значение в поле «Доверенный URL-адрес» (снимок экрана)](./media/application-proxy-configure-for-claims-aware-applications/appproxyendpointtrustedurl.png)  

## <a name="next-steps"></a>Дальнейшие действия
* [Включение собственных клиентских приложений для взаимодействия с приложениями прокси](application-proxy-configure-native-client-application.md)