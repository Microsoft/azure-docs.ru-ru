---
title: Публикация приложений в отдельных сетях через группы соединителей (Azure AD)
description: Этот раздел описывает создание групп соединителей в прокси приложения Azure AD и управление ими.
services: active-directory
author: kenwith
manager: daveba
ms.service: active-directory
ms.subservice: app-mgmt
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 11/08/2018
ms.author: kenwith
ms.reviewer: japere
ms.collection: M365-identity-device-management
ms.openlocfilehash: 6ca42137192fefbc669fca775b0deff2f5226c5c
ms.sourcegitcommit: d49bd223e44ade094264b4c58f7192a57729bada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/02/2021
ms.locfileid: "99253838"
---
# <a name="publish-applications-on-separate-networks-and-locations-using-connector-groups"></a>Публикация приложений в отдельных сетях и расположениях с помощью групп соединителей

Клиенты используют прокси приложения Azure AD все чаще и для большего числа приложений. Поэтому мы решили повысить гибкость прокси приложения, обеспечив создание дополнительных топологий. Можно создать группы соединителей прокси приложения. Это даст возможность назначить специальные соединители для обслуживания определенных приложений. Эта обеспечивает больший контроль и расширяет возможности оптимизации развертывания прокси приложения.

Каждый соединитель прокси приложения назначается в группу соединителей. Все соединители, принадлежащие одной группе соединителей, действуют как отдельная единица в контексте обеспечения высокого уровня доступности и балансировки нагрузки. Все соединители принадлежат какой-либо группе соединителей. Если не создать группы, то все соединители будут принадлежать группе по умолчанию. Администратор может создать группы и назначить в них соединители на портале Azure.

Все приложения назначаются в группу соединителей. Если не создать группы, то все приложения будут назначены в группу по умолчанию. Но если соединители организованы в группы, то каждое приложение можно настроить для работы с определенной группой соединителей. В этом случае только соединители в этой группе будут обслуживать соответствующее приложение по запросу. Эта удобно в том случае, если приложения размещены в разных расположениях. Группы соединителей можно создать на основе расположения, чтобы приложения всегда обслуживались соединителями, которые физически расположены как можно ближе к ним.

> [!TIP]
> При наличии большого развертывания прокси приложения не назначайте какие-либо приложения в группу соединителей по умолчанию. Таким образом новые соединители не будут принимать текущий трафик, пока вы не добавите их в активную группу соединителей. Такая конфигурация позволяет переводить соединители в режим простоя, перемещая их в группу по умолчанию, чтобы можно было выполнить обслуживание без ущерба для работы пользователей.

## <a name="prerequisites"></a>предварительные требования

Чтобы сгруппировать соединители, необходимо убедиться, что вы [установили несколько соединителей](application-proxy-add-on-premises-application.md). При установке нового соединителя он автоматически присоединяется к группе соединителей **по умолчанию** .

## <a name="create-connector-groups"></a>Создание групп соединителей

Используя приведенные ниже инструкции, можно создать любое число групп соединителей.

1. Войдите на [портал Azure](https://portal.azure.com).
1. Выберите **Azure Active Directory**  >    >  **прокси приложения** для корпоративных приложений.
1. Выберите **Новая группа соединителей**. Появится колонка "New Connector Group" (Новая группа соединителей).

   ![Отображает экран для выбора новой группы соединителей](./media/application-proxy-connector-groups/new-group.png)

1. Присвойте имя новой группе соединителей, затем из раскрывающегося меню выберите соединители, принадлежащие этой группе.
1. Нажмите **Сохранить**.

## <a name="assign-applications-to-your-connector-groups"></a>Назначение приложений в группы соединителей

Выполните приведенные инструкции для каждого приложения, опубликованного с помощью прокси приложения. Чтобы приложение можно было назначить в группу соединителей, его нужно сначала опубликовать. Кроме того, это назначение можно изменить в любой момент, выполнив приведенные ниже действия.

1. На панели мониторинга управления для каталога выберите **корпоративные приложения**  >  **все приложения** > приложение, которое нужно назначить группе соединителей > **прокси приложения**.
1. С помощью раскрывающегося меню **Группа соединителей** выберите группу, которую должно использовать приложение.
1. Чтобы применить изменение, щелкните **Сохранить** .

## <a name="use-cases-for-connector-groups"></a>Варианты использования групп соединителей

Группы соединителей удобно использовать в нескольких сценариях, включая следующие:

### <a name="sites-with-multiple-interconnected-datacenters"></a>Сайты с несколькими взаимосвязанными центрами обработки данных.

Многие организации используют несколько взаимосвязанных центров обработки данных. В этом сценарии требуется передавать за пределы центров обработки данных минимальный объем трафика и не использовать каналы связи между центрами, которые дороги и медленны. Вы можете развернуть соединители в каждом центре обработки данных для обслуживания только приложений, которые находятся в центре обработки данных. Такой подход сводит к минимуму ссылки между центрами и предоставляет пользователям полностью прозрачное взаимодействие.

### <a name="applications-installed-on-isolated-networks"></a>Приложения, установленные на изолированных сетях

Приложения могут размещаться в изолированных сетях, не являющихся частью главной корпоративной сети. Вы можете использовать группы соединителей для установки выделенных соединителей для изолированных сетей, чтобы ограничить область действия приложений соответствующей сетью. Обычно это происходит, когда конкретное приложение для организации обслуживает сторонний поставщик.

Группы соединителей позволяют устанавливать выделенные соединители для сетей, в которых публикуются только определенные приложения. Это упрощает и делает более безопасной передачу функций управления приложениями сторонним поставщикам.

### <a name="applications-installed-on-iaas"></a>Приложения, установленные в IaaS

Для приложений, установленных в IaaS для доступа к облаку, группы соединителей обеспечивают общую службу для защиты доступа ко всем приложениям. Группы соединителей не создают дополнительную зависимость для корпоративной сети и не разделяют взаимодействие с приложениями. Соединители можно установить в каждом облачном центре обработки данных для обслуживания только тех приложений, которые размещены в этой сети. Можно установить несколько соединителей для обеспечения высокой доступности.

В качестве примера можно рассмотреть организацию с несколькими виртуальными машинами, которые подключены к собственной виртуальной сети, размещенной в IaaS. Чтобы сотрудники могли использовать эти приложения, данные частные сети подключены к корпоративной сети с помощью VPN типа "сеть — сеть". Это удобно для сотрудников, компьютеры которых находятся в локальной среде. Но такое решение может быть неудобным для удаленных сотрудников, так как требуется дополнительная локальная инфраструктура для маршрутизации доступа. Это показано на схеме ниже:

![Схема, иллюстрирующая сеть IaaS в Azure AD](./media/application-proxy-connector-groups/application-proxy-iaas-network.png)
  
Используя группы соединителей прокси приложений Azure AD, вы можете обеспечить общую службу для безопасного доступа к приложениям, не создавая дополнительную зависимость для корпоративной сети.

![Azure AD IaaS несколько поставщиков облачных служб](./media/application-proxy-connector-groups/application-proxy-multiple-cloud-vendors.png)

### <a name="multi-forest--different-connector-groups-for-each-forest"></a>Несколько лесов: отдельная группа соединителей для каждого леса

Большинство пользователей, развернувших прокси приложения, использует возможности единого входа, осуществляя ограниченное делегирование Kerberos (KCD). Для этого компьютеры соединителей должны быть присоединены к домену, который может делегировать пользователей приложению. Ограниченное делегирование Kerberos функционирует между лесами. Но в компаниях с различными средами, содержащими несколько лесов, без отношений доверия между ними невозможно использовать отдельный соединитель для всех лесов. 

В этом случае можно развернуть специальные соединители в каждом лесу и настроить их для обслуживания приложений, которые были опубликованы для обслуживания только пользователей из соответствующего леса. Каждая группа соединителей представляет отдельный лес. Клиент и большая часть взаимодействия для всех лесов будут общими, и пользователей для приложений леса можно назначать с помощью групп Azure AD.

### <a name="disaster-recovery-sites"></a>Сайты аварийного восстановления

Существуют два различных подхода к сайтам аварийного восстановления (DR) в зависимости от реализации ваших сайтов:

* Если ваш сайт аварийного восстановления создается в режиме "активный-активный", то есть он ничем не отличается от основного сайта и содержит те же сети и параметры AD, то можно создать соединители для сайта аварийного восстановления в той же группе соединителей, что и для основного сайта. Это позволит Azure AD обнаруживать отработки отказа.
* Если ваш сайт аварийного восстановления отличается от основного сайта, то можно создать отдельную группу соединителей на сайте аварийного восстановления и либо использовать резервные приложения, либо вручную перенаправлять существующее приложение в группу соединителей аварийного восстановления при необходимости.

### <a name="serve-multiple-companies-from-a-single-tenant"></a>Обслуживание нескольких компаний из отдельного клиента

Существует много различных способов реализации модели, в которой отдельный поставщик услуг развертывает и поддерживает связанные службы Azure AD для нескольких компаний. Группы соединителей помогают администраторам разделить соединители и приложения на разных группы. Один из способов, который подходит для небольших компаний, — использовать отдельный клиент Azure AD для разных компаний с собственными доменными именами и сетями. Это также относится к сценариям слияния и поглощения и ситуациям, когда один отдел ИТ обслуживает несколько компаний по нормативным и деловым соображениям.

## <a name="sample-configurations"></a>Примеры конфигурации

Несколько примеров, которые можно реализовать, включая приведенные ниже группы соединителей.

### <a name="default-configuration--no-use-for-connector-groups"></a>Конфигурация по умолчанию — без использования группы соединителей

Если вы не используете группы соединителей, конфигурации будет выглядеть следующим образом.

![Пример Azure AD. нет групп соединителей](./media/application-proxy-connector-groups/application-proxy-sample-config-1.png)

Этой конфигурации достаточно для небольших развертываний и проведения тестов. Она также отлично подойдет, если в вашей организация используется плоская топология сети.

### <a name="default-configuration-and-an-isolated-network"></a>Конфигурация по умолчанию и изолированная сеть

Эта конфигурация является развитием конфигурации по умолчанию. В ней есть определенное приложение, которое выполняется в изолированной сети, например виртуальной сети IaaS.

![Пример Azure AD. нет групп соединителей и изолированной сети](./media/application-proxy-connector-groups/application-proxy-sample-config-2.png)

### <a name="recommended-configuration--several-specific-groups-and-a-default-group-for-idle"></a>Рекомендуемая конфигурация — несколько отдельных групп и группа по умолчанию для неактивных соединителей

Рекомендуемая конфигурация для больших и сложных организаций содержит группу соединителей по умолчанию, которая не обслуживает приложения и используется для неактивных или только что установленных соединителей. Все приложения обслуживаются с помощью пользовательских групп соединителей. Это позволяет полностью реализовать сложные сценарии, описанные выше.

В следующем примере в компании есть два центра обработки данных, А и Б, и два соединителя, которые обслуживают каждый из сайтов. На каждом узле имеются различные приложения, которые на нем выполняются.

![Пример компании с 2 центрами обработки данных и 2 соединителями](./media/application-proxy-connector-groups/application-proxy-sample-config-3.png)

## <a name="next-steps"></a>Дальнейшие действия

* [Сведения о соединителях прокси приложения Azure AD](application-proxy-connectors.md)
* [Включение единого входа](what-is-single-sign-on.md)
