---
title: Добавление потока пользователя для самостоятельной регистрации (AAD)
description: Создавайте потоки пользователей для приложений, созданных вашей организацией. Затем пользователи, посещающие это приложение, могут получить учетную запись гостя с помощью параметров, настроенных в потоке пользователя.
services: active-directory
ms.service: active-directory
ms.subservice: B2B
ms.topic: how-to
ms.date: 03/02/2021
ms.author: mimart
author: msmimart
manager: celestedg
ms.custom: it-pro
ms.collection: M365-identity-device-management
ms.openlocfilehash: 883e658fd3f03eb50d54e548ffac49e23b340808
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101688638"
---
# <a name="add-a-self-service-sign-up-user-flow-to-an-app-preview"></a>Добавление потока пользователя для самостоятельной регистрации в приложении (предварительная версия)

> [!NOTE]
> Некоторые функции, упомянутые в этой статье, являются общедоступными функциями предварительной версии Azure Active Directory. См. подробные сведения о [дополнительных условиях использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Для создаваемых приложений можно создавать потоки пользователей, позволяющие пользователю зарегистрироваться в приложении и создать новую учетную запись гостя. Пользовательский поток регистрации самообслуживания определяет последовательность действий, которые пользователь будет выполнять при регистрации, поставщики удостоверений, которые вы разрешаете использовать, и атрибуты пользователей, которые вы хотите получать. Можно связать одно или несколько приложений с одним потоком пользователя.

> [!NOTE]
> Потоки пользователей можно связывать с приложениями, которые создала ваша организация. Потоки пользователей нельзя использовать с приложениями от Майкрософт, например SharePoint или Teams.

## <a name="before-you-begin"></a>Перед началом

### <a name="add-identity-providers-optional"></a>Добавление поставщиков удостоверений (необязательно)

AAD является поставщиком удостоверений по умолчанию для самостоятельной регистрации. Это означает, что пользователи по умолчанию могут выполнить регистрацию с помощью учетной записи AAD. В процессе самостоятельной регистрации пользователь может также включить поставщики удостоверений социальных сетей, такие как Google и Facebook, учетная запись Майкрософт (Предварительная версия) и одноразовый секретный код (Предварительная версия) электронной почты.

- [Поставщик удостоверений учетной записи Майкрософт (Предварительная версия)](microsoft-account.md)
- [Проверка подлинности по одноразовому секретному коде](one-time-passcode.md)
- [Добавление Facebook в список поставщиков удостоверений социальных сетей.](facebook-federation.md)
- [Добавление Google в список поставщиков удостоверений социальных сетей.](google-federation.md)

### <a name="define-custom-attributes-optional"></a>Определение настраиваемых атрибутов (необязательно)

Атрибутами пользователя называются значения, полученные от пользователя во время самостоятельной регистрации. AAD имеет встроенный набор атрибутов, но вы можете добавить настраиваемые атрибуты для использования в потоке пользователя. Эти атрибуты можно также считывать и записывать с помощью Microsoft API Graph. См. сведения в статье [Определение настраиваемых атрибутов для потоков пользователя](user-flow-add-custom-attributes.md).

## <a name="enable-self-service-sign-up-for-your-tenant"></a>Включение самостоятельной регистрации для арендатора

Прежде чем добавлять в приложения поток пользователя для самостоятельной регистрации, необходимо включить эту функцию для арендатора. После этого в потоке пользователя становятся доступными элементы управления, которые позволят связать этот поток с приложением.

1. Войдите на [портал Azure](https://portal.azure.com) с учетной записью администратора Azure AD.
2. В разделе **Службы Azure** щелкните **Azure Active Directory**.
3. Выберите **Параметры пользователей**, а затем в разделе **Внешние пользователи** выберите **Управление параметрами внешнего взаимодействия**.
4. Установите флажок **включить гостевую службу регистрация с помощью пользовательских потоков** переключитесь в положение **Да**.

   ![Включение самостоятельной регистрации гостей](media/self-service-sign-up-user-flow/enable-self-service-sign-up.png)
5. Щелкните **Сохранить**.
## <a name="create-the-user-flow-for-self-service-sign-up"></a>Создание потока пользователя для самостоятельной регистрации

Теперь вам нужно создать поток пользователя для самостоятельной регистрации и добавить его в приложение.

1. Войдите на [портал Azure](https://portal.azure.com) с учетной записью администратора Azure AD.
2. В разделе **Службы Azure** щелкните **Azure Active Directory**.
3. В меню слева щелкните **Внешние удостоверения**.
4. Выберите последовательности **пользователей**, а затем выберите **новый поток пользователей**.

   ![Кнопка создания потока пользователей](media/self-service-sign-up-user-flow/new-user-flow.png)

5. На странице **Создание** укажите **имя** нового потока пользователей. Обратите внимание, что к имени автоматически добавляется префикс **B2X_1_** .
6. В списке **Поставщики удостоверений** выберите один или несколько поставщиков удостоверений, которые внешние пользователи смогут использовать для входа в приложение. По умолчанию выбран вариант **Azure Active Directory**. (Сведения о добавлении поставщиков удостоверений см. в разделе [Перед началом работы](#before-you-begin) выше в этой статье.)
7. Выберите **Атрибуты пользователя**, которые вы хотите собирать от пользователей. Чтобы увидеть дополнительные атрибуты, щелкните **Показать еще**. Например, щелкните **Показать еще**, а затем выберите атрибуты и утверждения **Страна или регион**, **Отображаемое имя** и **Почтовый индекс**. Щелкните **ОК**.

   ![Создание страницы для нового потока пользователя](media/self-service-sign-up-user-flow/create-user-flow.png)

> [!NOTE]
> Вы можете собираются только те атрибуты, когда пользователь регистрируется в первый раз. После регистрации пользователь больше не будет получать запрос на получение сведений об атрибутах, даже при изменении потока пользователя.

8. Нажмите кнопку **создания**.
9. Новый поток пользователя появится в списке **потоки пользователя** . Если потребуется, обновите страницу.

## <a name="select-the-layout-of-the-attribute-collection-form"></a>Выбор макета для формы сбора атрибутов

Вы можете выбрать порядок, в котором атрибуты будут отображаться на странице регистрации. 

1. На [портале Azure](https://portal.azure.com) выберите **Azure Active Directory**.
2. Выберите **Внешние удостоверения**, выберите **потоки пользователей**.
3. Выберите в списке поток для самостоятельной регистрации пользователей.
4. В разделе **Настройка** выберите **Page layouts** (Макеты страниц).
5. Будут перечислены атрибуты, которые вы выбрали для сбора. Чтобы изменить порядок отображения, выберите атрибут и щелкните **Переместить вверх**, **Переместить вниз**, **Переместить в начало** или **Переместить в конец**.
6. Щелкните **Сохранить**.

## <a name="add-applications-to-the-self-service-sign-up-user-flow"></a>Добавление приложений в поток пользователя для самостоятельной регистрации

Теперь вы можете связать приложения с потоком пользователя.

1. Войдите на [портал Azure](https://portal.azure.com) с учетной записью администратора Azure AD.
2. В разделе **Службы Azure** щелкните **Azure Active Directory**.
3. В меню слева щелкните **Внешние удостоверения**.
4. В разделе **самостоятельная регистрация** выберите **потоки пользователей**.
5. Выберите в списке поток для самостоятельной регистрации пользователей.
6. В меню слева в разделе **Использование** выберите **Приложения**.
7. Щелкните **Добавить приложение**.

   ![Назначение приложения потоку пользователя](media/self-service-sign-up-user-flow/assign-app-to-user-flow.png)

8. Выберите нужное приложение в списке. Также можно найти и выбрать приложение с помощью поля поиска.
9. Нажмите кнопку **Выбрать**.

## <a name="next-steps"></a>Дальнейшие действия

- [Добавление Google в список поставщиков удостоверений социальных сетей.](google-federation.md)
- [Добавление Facebook в список поставщиков удостоверений социальных сетей.](facebook-federation.md)
- [Использование соединителей API для настройки и расширения пользовательских потоков с помощью веб-API](api-connectors-overview.md)
- [Добавление пользовательского рабочего процесса утверждения в поток пользователя](self-service-sign-up-add-approvals.md)
