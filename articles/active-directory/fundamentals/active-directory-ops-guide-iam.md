---
title: Справочник по операциям управления удостоверениями и доступом Azure Active Directory
description: В этом справочнике по операциям описываются проверки и действия, которые необходимо предпринять для защиты операций управления удостоверениями и доступом.
services: active-directory
author: martincoetzer
manager: daveba
tags: azuread
ms.service: active-directory
ms.topic: conceptual
ms.workload: identity
ms.subservice: fundamentals
ms.date: 10/31/2019
ms.author: martinco
ms.openlocfilehash: 66bce573be5a31641bdff809b8e9a79b617a703a
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "92371007"
---
# <a name="azure-active-directory-identity-and-access-management-operations-reference-guide"></a>Справочник по операциям управления удостоверениями и доступом Azure Active Directory

В этом разделе [справочного справочника по операциям Azure AD](active-directory-ops-guide-intro.md) описываются проверки и действия, которые следует учитывать для защиты жизненного цикла удостоверений и их назначений.

> [!NOTE]
> Эти рекомендации актуальны на момент публикации, но могут меняться со временем. Организации должны постоянно оценивать свои методы идентификации, так как продукты и службы Майкрософт развиваются со временем.

## <a name="key-operational-processes"></a>Основные операционные процессы

### <a name="assign-owners-to-key-tasks"></a>Назначение владельцев для ключевых задач

Управление Azure Active Directory требует непрерывного выполнения основных рабочих задач и процессов, которые могут не входить в состав проекта развертывания. Все равно важно настроить эти задачи для поддержки вашей среды. Основные задачи и их Рекомендуемые владельцы включают следующие.

| Задача | Владелец |
| :- | :- |
| Определение процесса создания подписок Azure | Зависит от Организации |
| Решите, кто получает лицензии Enterprise Mobility + Security | Группа операций IAM |
| Решите, кто получает лицензии Microsoft 365 | Группа производительности |
| Определите, кто получает другие лицензии, например Dynamics, Visual Studio Кодеспацес | Application Owner; |
| Назначение лицензий | Группа операций IAM |
| Устранение неполадок и исправление ошибок назначения лицензий | Группа операций IAM |
| Предоставление удостоверений для приложений в Azure AD | Группа операций IAM |

При просмотре списка может потребоваться либо назначить владельца для задач, в которых отсутствует владелец, либо настроить владение задачами с владельцами, которые не согласуются с рекомендациями выше.

#### <a name="assigning-owners-recommended-reading"></a>Идет назначение владельцев, рекомендуемых для чтения

- [Назначение ролей администратора в Azure Active Directory](../roles/permissions-reference.md)
- [Система управления в Azure](../../governance/index.yml)

## <a name="on-premises-identity-synchronization"></a>Локальная синхронизация удостоверений

### <a name="identify-and-resolve-synchronization-issues"></a>Выявление и устранение проблем синхронизации

Корпорация Майкрософт рекомендует получить хороший базовый уровень и понять проблемы в локальной среде, которые могут привести к проблемам синхронизации в облаке. Поскольку автоматизированные средства, такие как [идфикс](/office365/enterprise/prepare-directory-attributes-for-synch-with-idfix) и [Azure AD Connect Health](../hybrid/whatis-azure-ad-connect.md#why-use-azure-ad-connect-health) , могут создавать большое количество ложных положительных результатов, рекомендуется выявление ошибок синхронизации, которые остались неадресными в течение более 100 дней путем очистки этих объектов в случае ошибки. Долгосрочные неразрешенные ошибки синхронизации могут создавать обращения в службу поддержки. [Устранение ошибок во время синхронизации](../hybrid/tshoot-connect-sync-errors.md) предоставляет обзор различных типов ошибок синхронизации, некоторые из возможных сценариев, которые вызывают эти ошибки и возможные способы устранения ошибок.

### <a name="azure-ad-connect-sync-configuration"></a>Конфигурация синхронизации Azure AD Connect

Для включения всех гибридных возможностей, обеспечения безопасности на основе устройств и интеграции с Azure AD необходимо синхронизировать учетные записи пользователей, используемые вашими сотрудниками для входа на настольные компьютеры.

Если вы не синхронизируете пользователей леса с, то следует изменить синхронизацию так, чтобы она поступала из соответствующего леса.

#### <a name="synchronization-scope-and-object-filtering"></a>Область синхронизации и фильтрация объектов

Удаление известных контейнеров объектов, которые не требуется синхронизировать, имеет следующие операционные преимущества:

- Меньше источников ошибок синхронизации
- Ускоренные циклы синхронизации
- Меньше «мусора» для переноса из локальной среды, например, засорения глобального списка адресов для локальных учетных записей служб, которые не относятся к облаку.

> [!NOTE]
> Если вы импортируете множество объектов, которые не экспортируются в облако, отфильтруйте их по подразделениям или конкретным атрибутам.

Примеры объектов для исключения:

- Учетные записи служб, которые не используются для облачных приложений
- Группы, которые не предназначены для использования в облачных сценариях, например, используемые для предоставления доступа к ресурсам.
- Пользователи или контакты, являющиеся внешними удостоверениями, которые должны быть представлены с помощью службы совместной работы Azure AD B2B.
- Учетные записи компьютеров, на которых сотрудники не предназначены для доступа к облачным приложениям, например серверы

> [!NOTE]
> Если одно удостоверение человека имеет несколько учетных записей, подготовленных на таких компьютерах, как предыдущая миграция, слияние или приобретение, следует синхронизировать учетную запись, используемую пользователем ежедневно, например, то, что используется для входа на компьютер.

В идеале необходимо достичь баланса между тем, чтобы уменьшить число синхронизируемых объектов и сложность правил. Как правило, сочетание между [фильтрацией](../hybrid/how-to-connect-sync-configure-filtering.md) между подразделениями и контейнерами и простым сопоставлением атрибутов с атрибутом cloudFiltered является эффективной комбинацией фильтрации.

> [!IMPORTANT]
> При использовании фильтрации групп в рабочей среде следует перейти на другой подход к фильтрации.

#### <a name="sync-failover-or-disaster-recovery"></a>Синхронизация отработки отказа или аварийного восстановления

Azure AD Connect играет ключевую роль в процессе подготовки. Если сервер синхронизации по какой-либо причине переходит в автономный режим, изменения в локальной среде не могут быть обновлены в облаке и могут привести к проблемам с доступом пользователей. Поэтому важно определить стратегию отработки отказа, которая позволяет администраторам быстро возобновить синхронизацию после того, как сервер синхронизации перейдет в режим «вне сети». Такие стратегии могут относиться к следующим категориям:

- **Развертывание Azure AD Connect серверов в промежуточном режиме** . позволяет администратору повысить уровень промежуточного сервера до рабочей среды с помощью простого коммутатора конфигурации.
- **Использование виртуализации** . Если Azure AD Connect развернут на виртуальной машине, администраторы могут использовать свой стек виртуализации для динамической миграции или быстрого развертывания виртуальной машины и, следовательно, возобновить синхронизацию.

Если в вашей организации отсутствует стратегия аварийного восстановления и отработки отказа для синхронизации, развертывание Azure AD Connect в промежуточном режиме не планируется. Аналогичным образом, если между рабочей и промежуточной конфигурациями существует несоответствие, следует изменить базовый Azure AD Connect промежуточного режима в соответствии с конфигурацией рабочей среды, включая версии и конфигурации программного обеспечения.

![Снимок экрана с конфигурацией Azure AD Connect промежуточного режима](./media/active-directory-ops-guide/active-directory-ops-img1.png)

#### <a name="stay-current"></a>Оставайтесь в курсе последних новостей

Корпорация Майкрософт регулярно обновляет Azure AD Connect. Оставайтесь в курсе последних событий, чтобы воспользоваться преимуществами повышения производительности, исправлениями ошибок и новыми возможностями, предоставляемыми каждой новой версией.

Если версия Azure AD Connect более шести месяцев, следует выполнить обновление до последней версии.

#### <a name="source-anchor"></a>Привязка к источнику

Использование **MS-DS-consistencyguid** в качестве [привязки к источнику](../hybrid/plan-connect-design-concepts.md) позволяет упростить перенос объектов между лесами и доменами, что является общим в консолидации и очистке доменов Active Directory, слиянии, приобретения и дивеститурес.

Если вы используете **objectGUID** в качестве привязки к источнику, рекомендуется переключиться на использование **MS-DS-ConsistencyGuid**.

#### <a name="custom-rules"></a>Настраиваемые правила

Azure AD Connect настраиваемые правила предоставляют возможность управлять потоком атрибутов между локальными объектами и облачными объектами. Однако использование настраиваемых правил может привести к следующим рискам.

- Сложность устранения неполадок
- Снижение производительности при выполнении сложных операций над объектами
- Повышенная вероятность расхождения конфигурации между рабочим сервером и промежуточным сервером
- Дополнительные издержки при обновлении Azure AD Connect, если настраиваемые правила создаются в более позднем приоритете, чем 100 (используется встроенными правилами).

При использовании чрезмерно сложных правил следует исследовать причины сложности и возможности для упрощения поиска. Аналогично, если вы создали настраиваемые правила со значением приоритета более 100, следует исправить правила так, чтобы они не были под угрозой, или конфликтовали с набором по умолчанию.

Ниже приведены примеры нестандартных правил.

- **Компенсировать "грязные" данные в каталоге** . в этом случае рекомендуется работать с владельцами группы AD и очищать данные в каталоге как задачи исправления, а также настраивать процессы, чтобы избежать повторного введения неверных данных.
- **Одноразовое исправление отдельных пользователей** . Обычно правила могут наблюдаться в особых случаях, как правило, из-за проблемы с конкретным пользователем.
- Избыточное **"клаудфилтеринг"** — при уменьшении количества объектов рекомендуется создать и резамысловатую область синхронизации, используя множество правил синхронизации. Если имеется сложная логика включения или исключения объектов за пределами подразделения, рекомендуется работать с этой логикой вне синхронизации и помечать объекты простым атрибутом "cloudFiltered", который может работать с простым правилом синхронизации.

#### <a name="azure-ad-connect-configuration-documenter"></a>Документ конфигурации Azure AD Connect

[Azure AD Connect Document Configuration](https://github.com/Microsoft/AADConnectConfigDocumenter) Tool — это средство, которое можно использовать для создания документации по установке Azure AD Connect, чтобы обеспечить лучшее понимание конфигурации синхронизации, создать уверенность в получении прав и знать, что было изменено при применении новой сборки или конфигурации Azure AD Connect или добавлении или обновлении настраиваемых правил синхронизации. В число текущих возможностей этого средства входят:

- Документация по полной конфигурации Azure AD Connect Sync.
- Документация по любым изменениям в конфигурации двух Azure AD Connect серверов синхронизации или изменений из заданной базовой конфигурации.
- Создание скрипта развертывания PowerShell для переноса различий или настроек правил синхронизации с одного сервера на другой.

## <a name="assignment-to-apps-and-resources"></a>Назначение приложениям и ресурсам

### <a name="group-based-licensing-for-microsoft-cloud-services"></a>Лицензирование на основе групп для облачных служб Майкрософт

Azure Active Directory упрощает управление лицензиями с помощью [группового лицензирования](./active-directory-licensing-whatis-azure-portal.md) для облачных служб Майкрософт. Таким образом, IAM обеспечивает инфраструктуру группы и делегированное управление этими группами для соответствующих команд в организациях. Существует несколько способов настройки членства в группах в Azure AD, включая:

- **Синхронизация из локальных** групп может осуществляться из локальных каталогов, что может быть полезно для организаций с установленными процессами управления группами, которые можно расширить для назначения лицензий в Microsoft 365.

- **На основе атрибутов и динамических** групп можно создавать в облаке на основе выражения, основанного на атрибутах пользователя, например в отделе, равном «Sales». Azure AD обслуживает членов группы, сохраняя их соответствие заданному выражению. Использование группы такого типа для назначения лицензий позволяет назначать лицензии на основе атрибутов, что хорошо подходит для организаций, имеющих высокое качество данных в каталоге.

- **Делегированное владение** — группы могут быть созданы в облаке и могут быть назначены владельцами. Таким образом, вы можете предоставить владельцам бизнес-сотрудников, например группе совместной работы или группе BI, определить, кто должен иметь доступ.

Если в текущий момент вы используете ручной процесс назначения лицензий и компонентов пользователям, рекомендуется реализовать Групповое лицензирование. Если текущий процесс не отслеживает ошибки лицензирования или назначенные и доступные, следует определить усовершенствования процесса для устранения ошибок лицензирования и отслеживания назначения лицензирования.

Другим аспектом управления лицензиями является определение планов обслуживания (компонентов лицензии), которые должны быть включены на основе должностных обязанностей в Организации. Предоставление доступа к ненужным тарифам служб может привести к тому, что пользователи будут видеть средства на портале Office, которые не прошли обучение или не должны использоваться. Это может потребовать дополнительного тома службы поддержки, ненужной подготовки и соблюдения требований и управления в соответствии с риском, например при подготовке OneDrive для бизнеса к пользователям, которым может быть запрещено предоставлять общий доступ к содержимому.

Используйте следующие рекомендации, чтобы определить планы обслуживания для пользователей.

- Администраторы должны определить "пакеты" планов обслуживания, которые будут предлагаться пользователям в зависимости от их роли, например "белый-Коллар рабочий процесс и пол".
- Создайте группы по кластеру и назначьте лицензию с помощью плана обслуживания.
- При необходимости можно определить атрибут для хранения пакетов для пользователей.

> [!IMPORTANT]
> При лицензировании на основе групп в Azure AD представлена концепция пользователей в состоянии ошибки лицензирования. Если вы заметили ошибки лицензирования, следует немедленно [определить и устранить](../enterprise-users/licensing-groups-resolve-problems.md) проблемы, связанные с назначением лицензий.

![Снимок экрана автоматического создания описания экрана компьютера](./media/active-directory-ops-guide/active-directory-ops-img2.png)

#### <a name="lifecycle-management"></a>Управление жизненным циклом

Если в настоящее время используется средство, например [Microsoft Identity Manager](/microsoft-identity-manager/) или система сторонних производителей, основанное на локальной инфраструктуре, рекомендуется разгрузить назначение из существующего средства, реализовать Групповое лицензирование и определить управление жизненным циклом группы на основе [групп](../enterprise-users/licensing-group-advanced.md#use-group-based-licensing-with-dynamic-groups). Аналогичным образом, если существующий процесс не учитывает новых сотрудников или сотрудников, которые не оставляют Организации, следует развернуть лицензирование на основе групп на основе динамических групп и определить жизненный цикл членства в группе. Наконец, если Групповое лицензирование развертывается в локальных группах, в которых отсутствует управление жизненным циклом, рассмотрите возможность использования облачных групп для включения таких возможностей, как делегированное владение или динамическое членство на основе атрибутов.

### <a name="assignment-of-apps-with-all-users-group"></a>Назначение приложений для группы "все пользователи"

Владельцы ресурсов могут предполагать, что группа " **все пользователи** " содержит только **сотрудников предприятия** , если на самом деле они содержат как **корпоративных сотрудников** , так и **гостей**. В результате при использовании группы " **все пользователи** " для назначения приложения и предоставления доступа к ресурсам, таким как содержимое SharePoint или приложения, следует соблюдать особую осторожность.

> [!IMPORTANT]
> Если группа **все пользователи** включена и используется для политик условного доступа, назначения ресурсов или приложений, обеспечьте [защиту группы](../external-identities/use-dynamic-groups.md) , если она не должна включать гостевых пользователей. Кроме того, следует исправить назначения лицензирования, создав и назначив группы, содержащие только **корпоративные сотрудники** . С другой стороны, если вы обнаружите, что группа " **все пользователи** " включена, но не используется для предоставления доступа к ресурсам, убедитесь, что руководство Организации намеренно использует эту группу (которая включает в себя **корпоративных сотрудников** и **гостей**).

### <a name="automated-user-provisioning-to-apps"></a>Автоматическая подготовка пользователей в приложениях

[Автоматическая подготовка пользователей к работе](../app-provisioning/user-provisioning.md) с приложениями — это лучший способ создания согласованной подготовки, отмены подготовки и жизненного цикла удостоверений в нескольких системах.

Если вы подготавливаете приложения в настоящее время или используете такие файлы, как CSV, JIT или локальное решение, которое не поддерживает управление жизненным циклом, мы рекомендуем [реализовать подготовку приложений](../app-provisioning/user-provisioning.md#how-do-i-set-up-automatic-provisioning-to-an-application) с помощью Azure AD для поддерживаемых приложений и определить единообразный шаблон для приложений, которые еще не поддерживаются в Azure AD.

![Служба подготовки Azure AD](./media/active-directory-ops-guide/active-directory-ops-img3.png)

### <a name="azure-ad-connect-delta-sync-cycle-baseline"></a>Базовые показатели цикла разностной синхронизации Azure AD Connect

Важно понимать объем изменений в Организации и убедиться, что он не занимает слишком много времени, чтобы иметь предсказуемое время синхронизации.

Частота [разностной синхронизации по умолчанию](../hybrid/how-to-connect-sync-feature-scheduler.md) составляет 30 минут. Если разностная синхронизация занимает больше 30 минут или существуют значительные отличия между производительностью разностной синхронизации промежуточной и рабочей среды, следует изучить и проверить [факторы, влияющие на производительность Azure AD Connect](../hybrid/plan-connect-performance-factors.md).

#### <a name="azure-ad-connect-troubleshooting-recommended-reading"></a>Azure AD Connect рекомендации по устранению неполадок

- [Подготовка атрибутов каталога для синхронизации с Microsoft 365 с помощью средства Идфикс](/office365/enterprise/prepare-directory-attributes-for-synch-with-idfix)
- [Azure AD Connect: устранение ошибок во время синхронизации](../hybrid/tshoot-connect-sync-errors.md)

## <a name="summary"></a>Итоги

Существует пять аспектов безопасной инфраструктуры идентификации. Этот список поможет быстро найти и выполнить необходимые действия для защиты жизненного цикла удостоверений и их прав в Организации.

- Назначение владельцев для ключевых задач.
- Поиск и устранение проблем синхронизации.
- Определите стратегию отработки отказа для аварийного восстановления.
- Оптимизируйте Управление лицензиями и назначением приложений.
- Автоматизируйте подготовку пользователей в приложениях.

## <a name="next-steps"></a>Дальнейшие действия

Приступая к работе с [проверками и действиями управления аутентификацией](active-directory-ops-guide-auth.md).