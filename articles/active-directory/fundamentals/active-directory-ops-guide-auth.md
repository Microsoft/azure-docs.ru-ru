---
title: Справочник по операциям управления аутентификацией Azure Active Directory
description: В этом справочнике по операциям описываются проверки и действия, которые необходимо предпринять для защиты управления аутентификацией.
services: active-directory
author: martincoetzer
manager: daveba
tags: azuread
ms.service: active-directory
ms.topic: conceptual
ms.workload: identity
ms.subservice: fundamentals
ms.date: 10/31/2019
ms.author: martinco
ms.openlocfilehash: 0d425111e151d60ab38a60e38cd1805cef39f606
ms.sourcegitcommit: c8b50a8aa8d9596ee3d4f3905bde94c984fc8aa2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2021
ms.locfileid: "105641776"
---
# <a name="azure-active-directory-authentication-management-operations-reference-guide"></a>Справочник по операциям управления аутентификацией Azure Active Directory

В этом разделе [справочного справочника по операциям Azure AD](active-directory-ops-guide-intro.md) описываются проверки и действия, которые необходимо предпринять для защиты учетных данных и управления ими, определения возможностей проверки подлинности, назначения делегатов, использования мер и определения политик доступа на основе уровня безопасности предприятия.

> [!NOTE]
> Эти рекомендации актуальны на момент публикации, но могут меняться со временем. Организации должны постоянно оценивать свои методы идентификации, так как продукты и службы Майкрософт развиваются со временем.

## <a name="key-operational-processes"></a>Основные операционные процессы

### <a name="assign-owners-to-key-tasks"></a>Назначение владельцев для ключевых задач

Управление Azure Active Directory требует непрерывного выполнения основных рабочих задач и процессов, которые могут не входить в состав проекта развертывания. Для оптимизации среды все равно важно настроить эти задачи. Основные задачи и их Рекомендуемые владельцы включают следующие.

| Задача | Владелец |
| :- | :- |
| Управление жизненным циклом конфигурации единого входа (SSO) в Azure AD | Группа операций IAM |
| Разработка политик условного доступа для приложений Azure AD | Группа по архитектуре InfoSec |
| Архивация активности входа в систему SIEM | Команда InfoSec Operations |
| Архивация событий риска в системе SIEM | Команда InfoSec Operations |
| Рассмотрение и изучение отчетов о безопасности | Команда InfoSec Operations |
| Рассмотрение и анализ событий риска | Команда InfoSec Operations |
| Рассмотрение и исследование пользователей, помеченных для отчетов о рисках и уязвимостях, от защита идентификации Azure AD | Команда InfoSec Operations |

> [!NOTE]
> Для защита идентификации Azure AD требуется лицензия Azure AD Premium P2. Чтобы найти подходящую лицензию для ваших требований, см. статью [Сравнение общедоступных функций выпусков Azure AD Free и Azure AD Premium](https://azure.microsoft.com/pricing/details/active-directory/).

При просмотре списка может потребоваться либо назначить владельца для задач, в которых отсутствует владелец, либо настроить владение задачами с владельцами, которые не согласуются с рекомендациями выше.

#### <a name="owner-recommended-reading"></a>Рекомендуемый для чтения владелец

- [Назначение ролей администратора в Azure Active Directory](../roles/permissions-reference.md)
- [Система управления в Azure](../../governance/index.yml)

## <a name="credentials-management"></a>Управление учетными данными

### <a name="password-policies"></a>Политики паролей

Безопасная работа с паролями является одной из важнейших частей управления идентификацией и доступом, а также наиболее важной целью атак. Azure AD поддерживает несколько функций, которые могут помочь предотвратить успешную атаку.

Используйте приведенную ниже таблицу, чтобы найти рекомендуемое решение для устранения проблемы, которую необходимо решить.

| Проблема | Рекомендация |
| :- | :- |
| Нет механизма защиты от ненадежных паролей | Включение [самостоятельного сброса пароля (SSPR)](../authentication/concept-sspr-howitworks.md) в Azure AD и [Защита паролем](../authentication/concept-password-ban-bad-on-premises.md) |
| Нет механизма обнаружения потерянных паролей | Включение [синхронизации хэшей паролей](../hybrid/how-to-connect-password-hash-synchronization.md) (PHS) для получения ценной информации |
| Использование AD FS и невозможность перехода к управляемой проверке подлинности | Включение [AD FS Smart-блокировки экстрасети](/windows-server/identity/ad-fs/operations/configure-ad-fs-extranet-smart-lockout-protection) и (или) [Smart-блокировки Azure AD](../authentication/howto-password-smart-lockout.md) |
| Политика паролей использует правила на основе сложности, такие как длина, несколько наборов символов или истечение срока действия | Примите решение о [рекомендуемых рекомендациях Майкрософт](https://www.microsoft.com/research/publication/password-guidance/?from=http%3A%2F%2Fresearch.microsoft.com%2Fpubs%2F265143%2Fmicrosoft_password_guidance.pdf) и переключите подход на управление паролями и разверните [защиту паролей Azure AD](../authentication/concept-password-ban-bad.md). |
| Пользователи не зарегистрированы для использования многофакторной проверки подлинности (MFA) | [Зарегистрируйте все сведения о безопасности пользователя](../identity-protection/howto-identity-protection-configure-mfa-policy.md) , чтобы его можно было использовать в качестве механизма для проверки удостоверения пользователя и его пароля. |
| Отзыва паролей в зависимости от рисков пользователя нет. | Развертывание [политик риска пользователя для защиты идентификации](../identity-protection/howto-identity-protection-configure-risk-policies.md) Azure AD для принудительного изменения пароля при утечке учетных данных с помощью SSPR |
| Отсутствует механизм интеллектуальной блокировки для защиты вредоносной проверки подлинности от неправильных субъектов, поступающих от определенных IP-адресов. | Развертывание управляемой облачной аутентификации с помощью синхронизации хэша паролей или [сквозной проверки подлинности](../hybrid/how-to-connect-pta-quick-start.md) (PTA) |

#### <a name="password-policies-recommended-reading"></a>Рекомендуемые для чтения политики паролей

- [Рекомендации по использованию Azure AD и AD FS: защита от распыления паролей от атак Enterprise Mobility + Security](https://cloudblogs.microsoft.com/enterprisemobility/2018/03/05/azure-ad-and-adfs-best-practices-defending-against-password-spray-attacks/)

### <a name="enable-self-service-password-reset-and-password-protection"></a>Включение самостоятельного сброса пароля и защиты паролем

Пользователи, которым требуется изменить или сбросить пароли, являются одним из самых крупных источников громкости и затрат на звонки в службу поддержки. Помимо затрат, изменение пароля как средства для устранения рисков пользователя — фундаментальный шаг в улучшении безопасности Организации.

Как минимум, рекомендуется развернуть [самостоятельный сброс пароля](../authentication/concept-sspr-howitworks.md) Azure AD (SSPR) и локальную [защиту паролей](../authentication/howto-password-ban-bad-on-premises-deploy.md) .

- Отражает вызовы службы поддержки.
- Замените использование временных паролей.
- Замените любое существующее решение для самостоятельного управления паролями, использующее локальное решение.
- [Устраните ненадежные пароли](../authentication/concept-password-ban-bad.md) в Организации.

> [!NOTE]
> Для организаций с подпиской Azure AD Premium P2 рекомендуется развернуть SSPR и использовать ее в качестве части [политики риска для пользователя защиты идентификации](../identity-protection/howto-identity-protection-configure-risk-policies.md).

### <a name="strong-credential-management"></a>Надежное управление учетными данными

Пароли сами по себе не настолько безопасны, чтобы предотвратить доступ к вашей среде неправильными субъектами. Для многофакторной проверки подлинности (MFA) необходимо включить как минимум любого пользователя с привилегированной учетной записью. В идеале следует включить [объединенную регистрацию](../authentication/concept-registration-mfa-sspr-combined.md) и требовать регистрацию всех пользователей для MFA и SSPR с помощью [Объединенного процесса регистрации](../user-help/security-info-setup-signin.md). В конечном итоге рекомендуется принять стратегию [обеспечения устойчивости](../authentication/concept-resilient-controls.md) , чтобы снизить риск блокировки из-за непредвиденных обстоятельств.

![Объединенный поток взаимодействия с пользователем](./media/active-directory-ops-guide/active-directory-ops-img4.png)

### <a name="on-premises-outage-authentication-resiliency"></a>Отказоустойчивость при локальном сбое проверки подлинности

Помимо преимуществ простоты и включения обнаружения утечек учетных данных, служба синхронизации хэшей паролей Azure AD (PHS) и Azure AD MFA позволяют пользователям получать доступ к приложениям SaaS и Microsoft 365, несмотря на сбои в локальной среде из-за кибератакам, например [нотпетя](https://www.microsoft.com/security/blog/2018/02/05/overview-of-petya-a-rapid-cyberattack/). Также можно включить PHS в сочетании с Федерации. Включение PHS позволяет использовать откат проверки подлинности, если службы федерации недоступны.

Если в вашей локальной организации отсутствует стратегия устойчивости к сбоям или она не интегрирована с Azure AD, следует развернуть Azure AD PHS и определить план аварийного восстановления, включающий PHS. Включение Azure AD PHS позволит пользователям проходить проверку подлинности в Azure AD, если локальная Active Directory недоступна.

![поток синхронизации хэша паролей](./media/active-directory-ops-guide/active-directory-ops-img5.png)

Чтобы лучше понять параметры проверки подлинности, ознакомьтесь со статьей [Выбор правильного метода проверки подлинности для Azure Active Directory гибридного решения для идентификации](../hybrid/choose-ad-authn.md).

### <a name="programmatic-usage-of-credentials"></a>Программное использование учетных данных

Для сценариев Azure AD с использованием PowerShell или приложений, использующих API Microsoft Graph, требуется безопасная проверка подлинности. Плохое управление учетными данными, которое выполняя эти сценарии и средства, повышает риск кражи учетных данных. При использовании скриптов или приложений, зависящих от жестко заданных паролей или запросов на ввод пароля, необходимо сначала проверить пароли в файлах конфигурации или исходном коде, затем заменить эти зависимости и использовать управляемые удостоверения Azure, Integrated-Windows проверку подлинности или [Сертификаты](../reports-monitoring/tutorial-access-api-with-certificates.md) везде, где это возможно. Для приложений, в которых предыдущие решения невозможны, рассмотрите возможность использования [Azure Key Vault](https://azure.microsoft.com/services/key-vault/).

Если вы определили, что существуют субъекты-службы с учетными данными пароля, и вы не уверены, как эти учетные данные защищаются сценариями или приложениями, обратитесь к владельцу приложения, чтобы лучше понять принципы использования.

Корпорация Майкрософт также рекомендует обращаться к владельцам приложений, чтобы понять закономерности использования, если существуют субъекты-службы с учетными данными пароля.

## <a name="authentication-experience"></a>Возможности проверки подлинности

### <a name="on-premises-authentication"></a>Локальная проверка подлинности

Федеративная проверка подлинности с помощью встроенной проверки подлинности Windows (IWA) или Sign-On простой управляемой аутентификацией (SSO) с помощью синхронизации хэша паролей или сквозной проверки подлинности — это лучший пользовательский интерфейс в корпоративной сети с линейным представлением локальных контроллеров домена. Он минимизирует запрос учетных данных выносливости и снижает риск проникновения пользователей подвергаются кибератакам на фишинговые атаки. Если вы уже используете управляемую облаком проверку подлинности с помощью PHS или PTA, но пользователям по-прежнему нужно вводить пароль при проверке подлинности в локальной среде, следует немедленно [развернуть простой единый вход](../hybrid/how-to-connect-sso.md). С другой стороны, если в настоящее время вы участвуете в интеграции с планами, чтобы в конечном итоге выполнить миграцию на управляемое облаком проверку подлинности, то следует реализовать простой единый вход в рамках проекта миграции.

### <a name="device-trust-access-policies"></a>Политики доверительного доступа устройств

Подобно пользователю в вашей организации, устройство — это еще одно основное удостоверение, которое необходимо защитить. Удостоверение устройства можно использовать для защиты ресурсов в любое время и из любого расположения. Проверка подлинности устройства и учет для его типа доверия повышает уровень безопасности и удобство использования:

- Исключение трения, например, при использовании MFA, если устройство является доверенным
- Блокировка доступа с ненадежных устройств
- Для устройств Windows 10 предоставьте [единый вход в локальные ресурсы без проблем](../devices/azuread-join-sso.md).

Эту цель можно выполнить, добавив удостоверения устройств и управляя ими в Azure AD с помощью одного из следующих методов.

- Организации могут использовать [Microsoft Intune](/intune/what-is-intune) для управления устройством и применения политик соответствия, работоспособности устройств аттестации и настройки политик условного доступа в зависимости от того, соответствует ли устройство требованиям. Microsoft Intune может управлять устройствами iOS, настольными компьютерами Mac (через интеграцию JAMF), настольными системами Windows (изначально с помощью управления мобильными устройствами для Windows 10 и совместного управления с конечной точкой Майкрософт Configuration Manager) и мобильными устройствами Android.
- [Гибридное присоединение к Azure AD](../devices/hybrid-azuread-join-managed-domains.md) обеспечивает управление с помощью групповых политик или Configuration Manager конечных точек Майкрософт в среде с Active Directory присоединенных к домену устройств. Организации могут развертывать управляемую среду с помощью PHS или PTA с помощью простого единого входа. Перевод устройств в Azure AD позволяет максимально повысить производительность пользователей посредством единого входа в облачных и локальных ресурсах, одновременно обеспечивая безопасный доступ к облачным и локальным ресурсам с помощью [условного доступа](../conditional-access/overview.md) .

Если у вас есть присоединенные к домену устройства Windows, не зарегистрированные в облаке, или присоединенные к домену устройства Windows, зарегистрированные в облаке, но без политик условного доступа, следует зарегистрировать незарегистрированные устройства и в любом случае [использовать гибридную присоединение к Azure AD в качестве элемента управления](../conditional-access/require-managed-devices.md) в политиках условного доступа.

![Снимок экрана предоставления в политике условного доступа требования гибридного устройства](./media/active-directory-ops-guide/active-directory-ops-img6.png)

Если вы управляете устройствами с помощью MDM или Microsoft Intune, но не используете элементы управления устройствами в политиках условного доступа, мы рекомендуем использовать параметр [требовать, чтобы устройство было помечено как соответствующее](../conditional-access/require-managed-devices.md#require-device-to-be-marked-as-compliant) как элемент управления в этих политиках.

![Снимок экрана предоставления в политике условного доступа требования соответствия устройств](./media/active-directory-ops-guide/active-directory-ops-img7.png)

#### <a name="device-trust-access-policies-recommended-reading"></a>Рекомендованное чтение политик доступа к доверию устройств

- [Руководство. Планирование реализации гибридного присоединения к Azure Active Directory](../devices/hybrid-azuread-join-plan.md).
- [Конфигурации доступа для удостоверений и устройств](/microsoft-365/enterprise/microsoft-365-policies-configurations)

### <a name="windows-hello-for-business"></a>Windows Hello для бизнеса

В Windows 10 пароли [Windows Hello для бизнеса](/windows/security/identity-protection/hello-for-business/hello-identity-verification) заменяют строгую двухфакторную проверку подлинности на ПК. Windows Hello для бизнеса обеспечивает более рациональный интерфейс MFA для пользователей и сокращает зависимость от паролей. Если вы не начали развертывание устройств Windows 10 или развернули только частичное их развертывание, мы рекомендуем обновить систему до Windows 10 и [включить Windows Hello для бизнеса](/windows/security/identity-protection/hello-for-business/hello-manage-in-organization) на всех устройствах.

Если вы хотите узнать больше о проверке подлинности без пароля, ознакомьтесь со статьей [отсутствие паролей с помощью Azure Active Directory](../authentication/concept-authentication-passwordless.md).

## <a name="application-authentication-and-assignment"></a>Проверка подлинности и назначение приложения

### <a name="single-sign-on-for-apps"></a>Единый вход для приложений

Предоставление стандартизованного механизма единого входа для всей Организации имеет решающее значение для наилучшего взаимодействия с пользователем, сокращения рисков, возможности отчетности и управления. Если вы используете приложения, поддерживающие единый вход с помощью Azure AD, но в настоящее время настроенные для использования локальных учетных записей, следует перенастроить эти приложения для использования единого входа с Azure AD. Аналогичным образом, если вы используете приложения, которые поддерживают единый вход с помощью Azure AD, но используете другой поставщик удостоверений, следует перенастроить эти приложения для использования единого входа с Azure AD. Для приложений, которые не поддерживают протоколы Федерации, но поддерживают проверку подлинности на основе форм, мы рекомендуем настроить приложение для использования [хранилища паролей](../manage-apps/application-proxy-configure-single-sign-on-password-vaulting.md) с Azure AD application proxy.

![Апппрокси вход на основе пароля](./media/active-directory-ops-guide/active-directory-ops-img8.png)

> [!NOTE]
> Если у вас нет механизма обнаружения неуправляемых приложений в Организации, мы рекомендуем реализовать процесс обнаружения с помощью решения брокера безопасности облачного доступа (КАСБ), такого как [Microsoft Cloud App Security](https://www.microsoft.com/enterprise-mobility-security/cloud-app-security).

Наконец, если у вас есть коллекция приложений Azure AD и вы используете приложения, поддерживающие единый вход с помощью Azure AD, рекомендуется [перечислить приложение в коллекции приложений](../develop/v2-howto-app-gallery-listing.md).

#### <a name="single-sign-on-recommended-reading"></a>Рекомендуемый способ чтения для единого входа

- [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory](../manage-apps/what-is-single-sign-on.md)

### <a name="migration-of-ad-fs-applications-to-azure-ad"></a>Миграция AD FS приложений в Azure AD

[Перенос приложений из AD FS в Azure AD](../manage-apps/migrate-adfs-apps-to-azure.md) обеспечивает дополнительные возможности безопасности, более единообразную управляемость и более эффективное взаимодействие. Если у вас есть приложения, настроенные в AD FS, поддерживающие единый вход с помощью Azure AD, следует перенастроить эти приложения для использования единого входа с Azure AD. Если у вас есть приложения, настроенные в AD FS с нестандартными конфигурациями, которые не поддерживаются в Azure AD, следует обратиться к владельцам приложения, чтобы понять, является ли специальная конфигурация абсолютной потребностью в приложении. Если это не требуется, необходимо перенастроить приложение для использования единого входа с Azure AD.

![Azure AD в качестве основного поставщика удостоверений](./media/active-directory-ops-guide/active-directory-ops-img9.png)

> [!NOTE]
> [Azure AD Connect Health для ADFS](../hybrid/how-to-connect-health-adfs.md) можно использовать для получения сведений о конфигурации каждого приложения, которое потенциально может быть перенесено в Azure AD.

### <a name="assign-users-to-applications"></a>Назначение пользователей для приложений

[Назначение пользователям приложений](../manage-apps/assign-user-or-group-access-portal.md) лучше сопоставлять с помощью групп, так как они обеспечивают большую гибкость и возможность управления в масштабе. Преимущества использования групп включают членство в [динамических группах на основе атрибутов](../enterprise-users/groups-dynamic-membership.md) и [Делегирование владельцам приложений](../fundamentals/active-directory-accessmanagement-managing-group-owners.md). Поэтому, если вы уже используете группы и управляете ими, мы рекомендуем выполнить следующие действия для улучшения управления в масштабе:

- Делегирование управления группами и Управление владельцами приложений.
- Разрешить самостоятельный доступ к приложению.
- Определяйте динамические группы, если атрибуты пользователя могут постоянно определять доступ к приложениям.
- Реализация аттестации для групп, используемых для доступа к приложениям с помощью [проверок доступа Azure AD](../governance/access-reviews-overview.md).

С другой стороны, если вы обнаружите приложения, которые имеют назначение отдельным пользователям, обязательно реализуйте [Управление](../governance/index.yml) этими приложениями.

#### <a name="assign-users-to-applications-recommended-reading"></a>Назначение пользователям рекомендуемых для чтения приложений

- [Назначение пользователей и групп для приложения в Azure Active Directory](../manage-apps/assign-user-or-group-access-portal.md)
- [Делегирование разрешений регистрации приложения в Azure Active Directory](../roles/delegate-app-roles.md)
- [Правила динамического членства в группах для Azure Active Directory](../enterprise-users/groups-dynamic-membership.md)

## <a name="access-policies"></a>Политики доступа

### <a name="named-locations"></a>Именованные расположения

С помощью [именованных расположений](../reports-monitoring/quickstart-configure-named-locations.md) в Azure AD можно пометить диапазоны надежных IP-адресов в вашей организации. Именованные расположения в Azure AD используются для перечисленных ниже задач.

- Предотвращение ложных срабатываний в событиях риска. Вход из надежного сетевого расположения снижает риск для входа пользователя.
- Настройка [условного доступа на основе расположения](../reports-monitoring/quickstart-configure-named-locations.md).

![Именованное расположение](./media/active-directory-ops-guide/active-directory-ops-img10.png)

В зависимости от приоритета используйте приведенную ниже таблицу, чтобы найти рекомендуемое решение, которое наилучшим образом соответствует потребностям вашей организации.

| **Приоритет** | **Сценарий** | **Рекомендация** |
| ------------ | -------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------- |
| 1 | Если вы используете PHS или PTA и именованные расположения не определены | Определение именованных расположений для улучшения обнаружения событий риска |
| 2 | Если вы являетесь федеративным и не используете утверждение "Инсидекорпоратенетворк" и именованные расположения не определены | Определение именованных расположений для улучшения обнаружения событий риска |
| 3 | Если вы не используете именованные расположения в политиках условного доступа и отсутствуют элементы управления рисками и устройствами в политиках условного доступа | Настройка политики условного доступа для включения именованных расположений |
| 4 | Если вы участвуете в Федеративной работе и используете утверждение "Инсидекорпоратенетворк" и именованные расположения не определены | Определение именованных расположений для улучшения обнаружения событий риска |
| 5 | Если вы используете надежные IP-адреса с MFA, а не именованные расположения и помечайте их как доверенные | Определите именованные расположения и пометьте их как доверенные, чтобы улучшить обнаружение событий риска. |

### <a name="risk-based-access-policies"></a>Политики доступа на основе рисков

Azure AD может вычислить риск для каждого входа и каждого пользователя. Использование риска в качестве критерия в политиках доступа позволяет повысить удобство работы пользователей, например, уменьшить количество запросов проверки подлинности и повысить уровень безопасности, например, запрашивать пользователей только тогда, когда они понадобятся, и автоматизировать ответ и исправление.

![Политика рисков при входе](./media/active-directory-ops-guide/active-directory-ops-img11.png)

Если вы уже владеете лицензиями Azure AD Premium P2, которые поддерживают использование риска в политиках доступа, но они не используются, мы настоятельно рекомендуем добавить риск для обеспечения безопасности.

#### <a name="risk-based-access-policies-recommended-reading"></a>Рекомендуемые для чтения политики доступа на основе рисков

- [Практическое руководство. Настройка политики риска входа](../identity-protection/howto-identity-protection-configure-risk-policies.md)
- [Практическое руководство. Настройка политики риска пользователя](../identity-protection/howto-identity-protection-configure-risk-policies.md)

### <a name="client-application-access-policies"></a>Политики доступа клиентских приложений

Microsoft Intune управления приложениями (MAM) предоставляет возможность отправки таких элементов управления защиты данных, как шифрование хранилища, ПИН-код, очистка внешнего хранилища и т. д., в совместимые клиентские мобильные приложения, такие как Outlook Mobile. Кроме того, можно создавать политики условного доступа, чтобы [ограничить доступ](../conditional-access/app-based-conditional-access.md) к облачным службам, таким как Exchange Online, от утвержденных или совместимых приложений.

Если ваши сотрудники устанавливают приложения с поддержкой MAM, такие как мобильные приложения Office, для доступа к корпоративным ресурсам, таким как Exchange Online или SharePoint Online, а также поддерживают BYOD (переносить свое устройство), мы рекомендуем развернуть политики MAM приложений для управления конфигурацией приложений на личных устройствах без регистрации MDM, а затем обновить политики условного доступа, чтобы разрешить доступ только с клиентов, поддерживающих MAM.

![Управление предоставлением условного доступа](./media/active-directory-ops-guide/active-directory-ops-img12.png)

Следует ли сотрудникам устанавливать приложения с поддержкой MAM для корпоративных ресурсов, а доступ ограничен на устройствах, управляемых Intune, следует рассмотреть возможность развертывания политик MAM приложений для управления конфигурацией приложений для личных устройств и обновления политик условного доступа, чтобы разрешить доступ только с клиентов, поддерживающих MAM.

### <a name="conditional-access-implementation"></a>Реализация условного доступа

Условный доступ — это важный инструмент для повышения безопасности Организации. Поэтому важно следовать приведенным ниже рекомендациям.

- Убедитесь, что для всех приложений SaaS применена хотя бы одна политика
- Избегайте объединения фильтра " **все приложения** " с элементом управления " **блок** ", чтобы избежать риска блокировки
- Избегайте использования **всех пользователей** в качестве фильтра и непреднамеренного добавления **гостей**
- **Перенос всех "устаревших" политик в портал Azure**
- Перехватить все критерии для пользователей, устройств и приложений
- Использование политик условного доступа для [реализации MFA](../conditional-access/plan-conditional-access.md)вместо использования **МНОГОпользовательского MFA**
- Наличие небольшого набора основных политик, которые могут применяться к нескольким приложениям.
- Определите пустые группы исключений и добавьте их в политики, чтобы иметь стратегию исключения.
- Планирование учетных записей с [непрозрачным разделением](../roles/security-planning.md#break-glass-what-to-do-in-an-emergency) без элементов управления MFA
- Обеспечьте согласованную работу в клиентских приложениях Microsoft 365, например в командах, OneDrive, Outlook и т. д.). Реализуя тот же набор элементов управления для таких служб, как Exchange Online и SharePoint Online.
- Назначение политик должно быть реализовано с помощью групп, а не индивидуальных пользователей.
- Регулярно просматривают группы исключений, используемые в политиках, чтобы ограничить время, в течение которого пользователи выходят за пределы безопасности. Если вы владеете Azure AD P2, вы можете использовать проверки доступа для автоматизации процесса.

#### <a name="conditional-access-recommended-reading"></a>Рекомендуемый способ чтения для условного доступа

- [Рекомендации по условному доступу в Azure Active Directory](../conditional-access/overview.md)
- [Конфигурации доступа для удостоверений и устройств](/microsoft-365/enterprise/microsoft-365-policies-configurations)
- [Справочник по параметрам условного доступа Azure Active Directory](../conditional-access/concept-conditional-access-conditions.md)
- [Распространенные политики условного доступа](../conditional-access/concept-conditional-access-policy-common.md)

## <a name="access-surface-area"></a>Доступ к контактной зоне

### <a name="legacy-authentication"></a>Устаревшие способы аутентификации

Надежные учетные данные, например MFA, не могут защищать приложения, использующие устаревшие протоколы проверки подлинности, которые делают его предпочтительным вектором атак злоумышленниками. Блокировка устаревшей проверки подлинности крайне важна для повышения безопасности доступа.

Устаревшая проверка подлинности — это термин, который относится к протоколам проверки подлинности, используемым приложениями:

- Более старые клиенты Office, которые не используют современную проверку подлинности (например, Office 2010 Client)
- Клиенты, использующие протоколы электронной почты, такие как IMAP/SMTP/POP

Злоумышленники настоятельно предпочитают эти протоколы. на самом деле почти [100% взлома паролей](https://techcommunity.microsoft.com/t5/Azure-Active-Directory-Identity/Your-Pa-word-doesn-t-matter/ba-p/731984) используют устаревшие протоколы проверки подлинности! Хакеры используют устаревшие протоколы проверки подлинности, так как они не поддерживают интерактивный вход, который необходим для дополнительных задач безопасности, таких как многофакторная идентификация и проверка подлинности устройства.

Если в вашей среде используется устаревшая проверка подлинности, следует запланировать миграцию устаревших клиентов на клиенты, поддерживающие [современную проверку подлинности](/office365/enterprise/modern-auth-for-office-2013-and-2016) как можно скорее. В том же токене, если некоторые пользователи уже используют современную проверку подлинности, а другие используют устаревшую проверку подлинности, необходимо выполнить следующие действия, чтобы заблокировать устаревшие клиенты проверки подлинности.

1. Используйте [отчеты о действиях входа](../reports-monitoring/concept-sign-ins.md) для идентификации пользователей, которые по-прежнему используют устаревшую проверку подлинности и исправление планов.

   а. Обновление до современных клиентов с поддержкой проверки подлинности для затронутых пользователей.
   
   b. Планируйте прямую миграцию временные интервалы, чтобы заблокировать их для каждого шага ниже.
   
   c. Определить, какие устаревшие приложения имеют жесткую зависимость от устаревшей проверки подлинности. См. шаг 3 ниже.

2. Отключите устаревшие протоколы в источнике (например, в почтовом ящике Exchange) для пользователей, которые не используют проверку подлинности прежних версий, чтобы избежать большей доступности
3. Для оставшихся учетных записей (в идеале, не являющихся учетными записями службы) используйте [Условный доступ для ограничения устаревших протоколов](https://techcommunity.microsoft.com/t5/Azure-Active-Directory-Identity/Azure-AD-Conditional-Access-support-for-blocking-legacy-auth-is/ba-p/245417) после проверки подлинности.

#### <a name="legacy-authentication-recommended-reading"></a>Рекомендованное чтение устаревшей проверки подлинности

- [Включение или отключение доступа по протоколу POP3 или IMAP4 к почтовым ящикам в Exchange Server](/exchange/clients/pop3-and-imap4/configure-mailbox-access)

### <a name="consent-grants"></a>Предоставление согласия

При незаконном предоставлении согласия злоумышленник создает зарегистрированное в Azure AD приложение, которое запрашивает доступ к данным, таким как контактные данные, электронная почта или документы. Пользователи могут предоставлять согласие на вредоносные приложения через фишинговые атаки при размещении на вредоносных веб-сайтах.

Ниже приведен список приложений с разрешениями, которые могут потребоваться сопротивляются для облачных служб Майкрософт:

- Приложения с помощью приложения или делегированы \* . Разрешения ReadWrite
- Приложения с делегированными разрешениями могут читать, отправлять и управлять электронной почтой от имени пользователя.
- Приложения, которым предоставлены разрешения с использованием следующих разрешений:

| Ресурс | Разрешение |
| :- | :- |
| Exchange Online | EAS. Акцессасусер. ALL |
| | EWS. Акцессасусер. ALL |
| | Mail.Read |
| API Microsoft Graph | Mail.Read |
| | Почта. Read. Shared |
| | Mail. ReadWrite |

- Приложения предоставили полное олицетворение пользователя, выполнившего вход. Пример:

|Ресурс | Разрешение |
| :- | :- |
| API Microsoft Graph| Directory.AccessAsUser.All |
| Azure REST API | user_impersonation |

Чтобы избежать этого, следует обратиться к статье [Обнаружение и устранение незаконных предоставлений согласия в Office 365](/office365/securitycompliance/detect-and-remediate-illicit-consent-grants) , чтобы выявить и исправить любые приложения с нелегальным предоставлением или приложениями, которые больше не требуются. Затем [полностью удалите самообслуживание](../manage-apps/configure-user-consent.md) и [Создайте процедуры](../manage-apps/configure-admin-consent-workflow.md)управления. Наконец, запланируйте обычные проверки разрешений приложения и удалите их, когда они не нужны.

#### <a name="consent-grants-recommended-reading"></a>Согласие предоставляет рекомендуемый уровень чтения

- [Microsoft Graph разрешения API](/graph/permissions-reference)

### <a name="user-and-group-settings"></a>Параметры пользователей и групп

Ниже приведены параметры пользователя и группы, которые могут быть заблокированы, если не требуется явная организация.

#### <a name="user-settings"></a>Параметры пользователя

- **Внешние пользователи** . Внешняя совместная работа может быть тесной в предприятии с помощью таких служб, как команды, Power BI, SharePoint Online и Azure Information Protection. Если у вас есть явные ограничения для управления инициированной пользователем внешней совместной работой, рекомендуется включить внешних пользователей с помощью управления назначением [Azure AD](../governance/entitlement-management-overview.md) или управляемой операции, например с помощью службы поддержки. Если вы не хотите разрешать внешнюю совместную работу для служб, вы можете [полностью запретить участникам самостоятельно приглашать внешних пользователей](../external-identities/delegate-invitations.md). Кроме того, можно [Разрешить или заблокировать определенные домены](../external-identities/allow-deny-list.md) в приглашениях внешних пользователей.
- **Регистрация приложений** . когда регистрация приложений включены, конечные пользователи могут самостоятельно подключать приложения и предоставлять доступ к их данным. Типичным примером регистрации приложений являются пользователи, которые позволяют использовать подключаемые модули Outlook, или помощники по голосовым программам, таким как Алекса и Siri, читать электронную почту и календарь или отправлять сообщения электронной почты от их имени. Если клиент решает отключить регистрацию приложений, команды InfoSec и IAM должны быть вовлечены в Управление исключениями (регистрация приложений, которые необходимы в соответствии с бизнес-требованиями), так как они должны будут зарегистрировать приложения с учетной записью администратора, и, скорее всего, потребуется разработать процесс для эксплуатацию процесса.
- **Портал администрирования** . Организации могут блокировать колонку Azure ad в портал Azure, чтобы не администраторы не могли получить доступ к управлению Azure ad в портал Azure и не путать их. Перейдите к параметрам пользователя на портале управления Azure AD, чтобы ограничить доступ:

![Административный портал — ограниченный доступ](./media/active-directory-ops-guide/active-directory-ops-img13.png)

> [!NOTE]
> Кроме того, Администраторы может получить доступ к интерфейсам управления Azure AD с помощью командной строки и других программных интерфейсов.

#### <a name="group-settings"></a>Параметры группы

**Самостоятельное управление группами/пользователи могут создавать группы безопасности и группы Microsoft 365.** Если текущая инициатива самообслуживания для групп в облаке отсутствует, клиенты могут отключить ее до тех пор, пока они не будут готовы к использованию этой возможности.

#### <a name="groups-recommended-reading"></a>Рекомендованные операции чтения групп

- [Что такое служба совместной работы Azure Active Directory B2B](../external-identities/what-is-b2b.md)
- [Интеграция приложений с Azure Active Directory](../develop/quickstart-register-app.md)
- [Приложения, разрешения и согласие в Azure Active Directory.](../develop/quickstart-register-app.md)
- [Использование групп для управления доступом к ресурсам в Azure Active Directory](./active-directory-manage-groups.md)
- [Настройка самостоятельного управления доступом к приложениям в Azure Active Directory](../enterprise-users/groups-self-service-management.md)

### <a name="traffic-from-unexpected-locations"></a>Трафик из непредвиденных расположений

Злоумышленники происходят из различных частей мира. Управление этим риском с помощью политик условного доступа с расположением в качестве условия. [Условие расположения](../conditional-access/location-condition.md) политики условного доступа позволяет блокировать доступ для мест, из которых нет бизнес-причин для входа.

![Создать новое именованное расположение](./media/active-directory-ops-guide/active-directory-ops-img14.png)

Если доступно, используйте решение "Управление данными и событиями" (SIEM) для анализа и поиска шаблонов доступа в разных регионах. Если вы не используете продукт SIEM или не принимаете данные проверки подлинности из Azure AD, мы рекомендуем использовать [Azure Monitor](../../azure-monitor/overview.md) для идентификации закономерностей доступа в разных регионах.

## <a name="access-usage"></a>Использование доступа

### <a name="azure-ad-logs-archived-and-integrated-with-incident-response-plans"></a>Журналы Azure AD, которые архивируются и интегрированы с планами реагирования на инциденты

Наличие доступа к действиям входа, аудитам и событиям риска для Azure AD крайне важно для устранения неполадок, анализа использования и расследований. Azure AD предоставляет доступ к этим источникам с помощью API-интерфейсов RESTFUL с ограниченным сроком хранения. Система управления сведениями о безопасности и событиями (SIEM) или эквивалентная технология архивации является ключом для долгосрочного хранения аудитов и поддержки. Чтобы включить долгосрочное хранение журналов Azure AD, необходимо добавить их в существующее решение SIEM или использовать [Azure Monitor](../reports-monitoring/concept-activity-logs-azure-monitor.md). Журналы архивации, которые можно использовать как часть планов реагирования на инциденты и исследований.

#### <a name="logs-recommended-reading"></a>Рекомендуемые для чтения журналы

- [Справочник по API аудита Azure Active Directory](/graph/api/resources/directoryaudit?view=graph-rest-beta)
- [Справочник по API отчета о действиях при входе Azure Active Directory](/graph/api/resources/signin?view=graph-rest-beta)
- [Получение данных, используя API отчетов Azure AD с сертификатами](../reports-monitoring/tutorial-access-api-with-certificates.md)
- [Microsoft Graph для Защита идентификации Azure Active Directory](../identity-protection/howto-identity-protection-graph-api.md)
- [Справочник по API действия управления Office 365](/office/office-365-management-api/office-365-management-activity-api-reference)
- [Использование пакета содержимого Azure Active Directory Power BI](../reports-monitoring/howto-use-azure-monitor-workbooks.md)

## <a name="summary"></a>Сводка

Существует 12 аспектов безопасной инфраструктуры идентификации. Этот список поможет вам дополнительно защитить учетные данные и управлять ими, определять возможности проверки подлинности, назначения делегатов, измерения использования и определять политики доступа на основе уровня безопасности предприятия.

- Назначение владельцев для ключевых задач.
- Реализуйте решения для обнаружения слабых или ненадежных паролей, улучшения управления паролями и защиты, а также последующего безопасного доступа пользователей к ресурсам.
- Управляйте удостоверениями устройств, чтобы защитить ресурсы в любое время и из любого расположения.
- Реализуйте проверку подлинности с паролем.
- Предоставьте стандартизированный механизм единого входа для всей Организации.
- Перенос приложений из AD FS в Azure AD для обеспечения лучшей безопасности и более стабильной управляемости.
- Назначьте пользователям приложения с помощью групп, чтобы обеспечить большую гибкость и возможность управления в масштабе.
- Настройка политик доступа на основе рисков.
- Блокировка устаревших протоколов проверки подлинности.
- Выявлять и устранять незаконные предоставления согласия.
- Блокировка параметров пользователя и группы.
- Включите долгосрочное хранение журналов Azure AD для устранения неполадок, анализа использования и расследований.

## <a name="next-steps"></a>Дальнейшие шаги

Приступая к работе с [операционными проверками и действиями системы управления удостоверениями](active-directory-ops-guide-govern.md).
