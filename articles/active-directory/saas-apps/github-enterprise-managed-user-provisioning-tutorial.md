---
title: Руководство. Настройка управляемого пользователя GitHub Enterprise для автоматической подготовки пользователей с помощью Azure Active Directory | Документация Майкрософт
description: Узнайте, как автоматически подготавливать и отзывать учетные записи пользователей из Azure AD для управляемого пользователя GitHub Enterprise.
services: active-directory
documentationcenter: ''
author: Zhchia
writer: Zhchia
manager: beatrizd
ms.assetid: 6aee39c7-08a1-4110-b936-4c85d129743b
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/05/2021
ms.author: Zhchia
ms.openlocfilehash: ee19c69b47e68328a89a0e3ca6ee3f86a5c13c7d
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "104583740"
---
# <a name="tutorial-configure-github-enterprise-managed-user-for-automatic-user-provisioning"></a>Руководство. Настройка управляемого пользователя GitHub Enterprise для автоматической подготовки пользователей

В этом руководстве описываются действия, которые необходимо выполнить в управляемом пользователе GitHub Enterprise и Azure Active Directory (Azure AD) для настройки автоматической подготовки пользователей. При настройке Azure AD автоматически подготавливает и отменяет подготовку пользователей и групп для пользователя GitHub Enterprise под управлением службы подготовки Azure AD. Подробные сведения о том, что делает эта служба, как она работает, и часто задаваемые вопросы см. в статье [Автоматическая подготовка пользователей и ее отзыв для приложений SaaS в Azure Active Directory](../app-provisioning/user-provisioning.md).


## <a name="capabilities-supported"></a>Поддерживаемые возможности
> [!div class="checklist"]
> * Создание пользователей в управляемом пользователе GitHub Enterprise
> * Удаление пользователей из управляемого пользователя GitHub Enterprise, если им больше не требуется доступ
> * Синхронизация пользовательских атрибутов между Azure AD и управляемым пользователем GitHub Enterprise
> * Предоставление групп и членств в группах в управляемом пользователе GitHub Enterprise
> * Единый вход для управляемого пользователя GitHub Enterprise (рекомендуется)

## <a name="prerequisites"></a>Предварительные требования

В сценарии, описанном в этом руководстве, предполагается, что у вас уже имеется:

* [Клиент Azure AD.](../develop/quickstart-create-new-tenant.md)
* Учетная запись пользователя в Azure AD с [разрешением](../roles/permissions-reference.md) настраивать подготовку (например, администратор приложений, администратор облачных приложений, владелец приложения или глобальный администратор).
* Корпоративные управляемые пользователи включили GitHub Enterprise и настроены для входа с помощью SAML SSO через клиент Azure AD.

## <a name="step-1-plan-your-provisioning-deployment"></a>Шаг 1. Планирование развертывания для подготовки
1. Узнайте, [как работает служба подготовки](../app-provisioning/user-provisioning.md).
2. Определите, кто будет находиться в [области подготовки](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).
3. Определите, какие данные должны [сопоставляться между управляемым пользователем Azure AD и GitHub Enterprise](../app-provisioning/customize-application-attributes.md).

## <a name="step-2-configure-github-enterprise-managed-user-to-support-provisioning-with-azure-ad"></a>Шаг 2. Настройка управляемого пользователя GitHub Enterprise для поддержки подготовки с помощью Azure AD

1. URL-адрес клиента — `https://api.github.com/scim/v2/enterprises/{enterprise}` . Это значение будет указано в поле URL-адрес клиента на вкладке Подготовка управляемого пользовательского приложения GitHub Enterprise в портал Azure.

2. В качестве управляемого администратора GitHub Enterprise перейдите к правому верхнему углу — > щелкните профиль фото-> а затем щелкните **Параметры**.

3. На левой боковой панели щелкните **Параметры разработчика**.

4. На левой боковой панели щелкните **Личные маркеры доступа**.

5. Щелкните **создать новый токен**.

6. Выберите область **Admin: Корпоративный** для этого маркера.

7. Щелкните **Generate Token** (Создать токен).

8. Скопируйте и сохраните **секретный токен**. Это значение будет указано в поле Секретный токен на вкладке Подготовка управляемого пользовательского приложения GitHub Enterprise в портал Azure.

## <a name="step-3-add-github-enterprise-managed-user-from-the-azure-ad-application-gallery"></a>Шаг 3. Добавление управляемого пользователя GitHub Enterprise из коллекции приложений Azure AD

Добавление управляемого пользователя GitHub Enterprise из коллекции приложений Azure AD для начала управления подготовкой к управляемому пользователю GitHub Enterprise. Если ранее вы настроили управляемый пользователь GitHub Enterprise для единого входа, вы можете использовать то же приложение. Однако при первоначальном тестировании интеграции рекомендуется создать отдельное приложение. Дополнительные сведения о добавлении приложения из коллекции см. [здесь](../manage-apps/add-application-portal.md).

## <a name="step-4-define-who-will-be-in-scope-for-provisioning"></a>Шаг 4. Определение пользователей для включения в область подготовки

Служба подготовки Azure AD позволяет определить пользователей, которые будут подготовлены, на основе назначения приложению и (или) атрибутов пользователя или группы. Если вы решили определить пользователей на основе назначения, выполните следующие [действия](../manage-apps/assign-user-or-group-access-portal.md), чтобы назначить пользователей и группы приложению. Если вы решили указать, кто именно будет подготовлен, на основе одних только атрибутов пользователя или группы, можете использовать фильтр задания области, как описано [здесь](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).

* При назначении пользователей и групп для управляемого пользователя GitHub Enterprise необходимо выбрать роль, отличную от **доступа по умолчанию**. Пользователи с ролью "Доступ по умолчанию" исключаются из подготовки и будут помечены в журналах подготовки как не назначенные явно.

* Начните с малого. Протестируйте небольшой набор пользователей и групп, прежде чем выполнять развертывание для всех. Если в область подготовки включены назначенные пользователи и группы, проверьте этот механизм, назначив приложению одного или двух пользователей либо одну или две группы. Если в область включены все пользователи и группы, можно указать [фильтр области на основе атрибутов](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).


## <a name="step-5-configure-automatic-user-provisioning-to-github-enterprise-managed-user"></a>Шаг 5. Настройка автоматической подготовки пользователей для управляемого пользователя GitHub Enterprise

В этом разделе описывается, как настроить службу подготовки Azure AD для создания, обновления и отключения пользователей и (или) групп в TestApp на основе их назначений в Azure AD.

### <a name="to-configure-automatic-user-provisioning-for-github-enterprise-managed-user-in-azure-ad"></a>Чтобы настроить автоматическую подготовку пользователей для управляемого пользователя GitHub Enterprise в Azure AD, сделайте следующее:

1. Войдите на [портал Azure](https://portal.azure.com). Выберите **Корпоративные приложения**, а затем **Все приложения**.

    ![Колонка "Корпоративные приложения"](common/enterprise-applications.png)

2. В списке приложений выберите **GitHub Enterprise управляемый пользователь**.

    ![Ссылка на управляемый пользователь GitHub Enterprise в списке "приложения"](common/all-applications.png)

3. Выберите вкладку **Подготовка**.

    ![Вкладка "Подготовка"](common/provisioning.png)

4. Для параметра **Режим подготовки к работе** выберите значение **Automatic** (Автоматически).

    ![Вкладка "Подготовка" с выделенным значением "Авто"](common/provisioning-automatic.png)

5. В разделе **учетные данные администратора** введите URL-адрес клиента управляемого кода пользователя GitHub Enterprise и маркер секрета. Нажмите кнопку **проверить подключение** , чтобы убедиться, что Azure AD может подключиться к управляемому пользователю GitHub Enterprise. В случае сбоя подключения убедитесь, что управляемая учетная запись пользователя GitHub Enterprise создала секретный маркер в качестве владельца предприятия, и повторите попытку.

    ![Токен](common/provisioning-testconnection-tenanturltoken.png)

6. В поле **Почтовое уведомление** введите адрес электронной почты пользователя или группы, которые должны получать уведомления об ошибках подготовки, а также установите флажок **Отправить уведомление по электронной почте при сбое**.

    ![Почтовое уведомление](common/provisioning-notification-email.png)

7. Щелкните **Сохранить**.

8. В разделе **сопоставления** выберите **синхронизировать Azure Active Directory пользователей с управляемым пользователем GitHub Enterprise**.

9. Изучите пользовательские атрибуты, которые синхронизированы из Azure AD, с управляемым пользователем GitHub Enterprise в разделе **сопоставление атрибутов** . Атрибуты, выбранные как свойства **Matching** , используются для сопоставления учетных записей пользователей в GitHub Enterprise, управляемых пользователем, для операций обновления. Если вы решили изменить [соответствующий целевой атрибут](../app-provisioning/customize-application-attributes.md), необходимо убедиться, что управляемый пользователем API GitHub Enterprise поддерживает фильтрацию пользователей на основе этого атрибута. Нажмите кнопку **Сохранить**, чтобы зафиксировать все изменения.

   |attribute|Тип|Поддерживается для фильтрации|
   |---|---|---|
   |externalId|Строка|&check;|
   |userName|Строка|
   |active|Логическое|
   |Роли|Строка|
   |displayName|Строка|
   |name.givenName|Строка|
   |name.familyName|Строка|
   |name.formatted|Строка|
   |emails[type eq "work"].value|Строка|
   |emails[type eq "home"].value|Строка|
   |emails[type eq "other"].value|Строка|

10. В разделе **сопоставления** выберите **синхронизировать группы Azure Active Directory с управляемым пользователем GitHub Enterprise**.

11. Ознакомьтесь с атрибутами группы, которые синхронизированы из Azure AD, с управляемым пользователем GitHub Enterprise в разделе **сопоставление атрибутов** . Атрибуты, выбранные как свойства **Matching** , используются для сопоставления групп в управляемом пользователе GitHub Enterprise для операций обновления. Нажмите кнопку **Сохранить**, чтобы зафиксировать все изменения.

      |attribute|Тип|Поддерживается для фильтрации|
      |---|---|---|
      |externalId|Строка|&check;|
      |displayName|Строка|
      |members|Справочник|

12. Чтобы настроить фильтры области, ознакомьтесь со следующими инструкциями, предоставленными в [руководстве по фильтрам области](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).

13. Чтобы включить службу подготовки Azure AD для управляемого пользователя GitHub Enterprise, измените значение параметра **состояние подготовки** на **включено** в разделе **Параметры** .

    ![Состояние подготовки "Включено"](common/provisioning-toggle-on.png)

14. Определите пользователей и (или) группы, которые вы хотите подготавливать для управляемого пользователя GitHub Enterprise, выбрав нужные значения в **области** в разделе **Параметры** .

    ![Область действия подготовки](common/provisioning-scope.png)

15. Когда будете готовы выполнить подготовку, нажмите кнопку **Сохранить**.

    ![Сохранение конфигурации подготовки](common/provisioning-configuration-save.png)

После этого начнется цикл начальной синхронизации всех пользователей и групп, определенных в поле **Область** в разделе **Параметры**. Начальный цикл занимает больше времени, чем последующие циклы. Пока служба подготовки Azure AD запущена, они выполняются примерно каждые 40 минут.

## <a name="step-6-monitor-your-deployment"></a>Шаг 6. Мониторинг развертывания
После настройки подготовки используйте следующие ресурсы для мониторинга развертывания.

1. Используйте [журналы подготовки](../reports-monitoring/concept-provisioning-logs.md), чтобы определить, какие пользователи были подготовлены успешно или неудачно.
2. Используйте [индикатор выполнения](../app-provisioning/application-provisioning-when-will-provisioning-finish-specific-user.md), чтобы узнать состояние цикла подготовки и приблизительное время до его завершения.
3. Если конфигурация подготовки, вероятно, находится в неработоспособном состоянии, приложение перейдет в карантин. Дополнительные сведения о режимах карантина см. [здесь](../app-provisioning/application-provisioning-quarantine-status.md).

## <a name="additional-resources"></a>Дополнительные ресурсы

* [Управление подготовкой учетных записей пользователей для корпоративных приложений](../app-provisioning/configure-automatic-user-provisioning-portal.md)
* [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](../manage-apps/what-is-single-sign-on.md)

## <a name="next-steps"></a>Дальнейшие действия

* [Сведения о просмотре журналов и получении отчетов о действиях по подготовке](../app-provisioning/check-status-user-account-provisioning.md)