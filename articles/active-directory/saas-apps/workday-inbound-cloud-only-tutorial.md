---
title: Руководство по настройке входящей подготовки Workday в Azure Active Directory | Документация Майкрософт
description: Узнайте, как настроить входящую подготовку из Workday в Azure AD.
services: active-directory
author: cmmdesai
manager: CelesteDG
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.topic: tutorial
ms.workload: identity
ms.date: 05/26/2020
ms.author: chmutali
ms.openlocfilehash: ef4381f305292b366348aa3729209dc3f5e8c87b
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "98954095"
---
# <a name="tutorial-configure-workday-to-azure-ad-user-provisioning"></a>Руководство по Настройка Workday для подготовки пользователей Azure AD
Цель этого учебника — показать, как подготавливать данные о работниках из Workday в Azure Active Directory. 

>[!NOTE]
>Используйте этот учебник, если вам необходимо подготовить из Workday только облачных пользователей, которым не требуется локальная учетная запись AD. Если пользователям требуется только локальная учетная запись AD или учетные записи AD и Azure AD, ознакомьтесь с учебником по [настройке Workday для подготовки пользователей Active Directory](workday-inbound-tutorial.md). 

## <a name="overview"></a>Обзор

Для подготовки учетных записей пользователей [служба подготовки пользователей Azure Active Directory](../app-provisioning/user-provisioning.md) интегрируется с [API отдела кадров Workday](https://community.workday.com/sites/default/files/file-hosting/productionapi/Human_Resources/v21.1/Get_Workers.html). Рабочие процессы подготовки пользователей Workday, поддерживаемые службой подготовки пользователей Azure AD, позволяют автоматизировать следующие сценарии работы отдела кадров и управления жизненным циклом удостоверений.

* **Наем новых сотрудников.** При добавлении нового сотрудника в Workday учетная запись пользователя автоматически создается в Azure Active Directory и при необходимости в Microsoft 365, а также в [других приложениях SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md), с обратной записью адреса электронной почты в Workday.

* **Обновления атрибута и профиля сотрудника**. При обновлении записи сотрудника в Workday (например, имени, должности или руководителя) его учетная запись пользователя будет автоматически обновлена в Azure Active Directory и при необходимости в Microsoft 365 и [других приложениях SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md).

* **Увольнения сотрудников**. При увольнении сотрудника в Workday его учетная запись пользователя будет автоматически отключена в Azure Active Directory и при необходимости в Microsoft 365 и [других приложениях SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md).

* **Повторные наймы сотрудников**. При повторном поступлении сотрудника на работу в Workday его старая учетная запись может быть автоматически активирована повторно или повторно подготовлена (в зависимости от вашего желания) в Azure Active Directory и при необходимости в Microsoft 365 и [других приложениях SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md).

### <a name="who-is-this-user-provisioning-solution-best-suited-for"></a>Кому это решение подготовки пользователей подходит лучше всего?

Это решение подготовки пользователей из Workday в Azure Active Directory идеально подходит для:

* организаций, которым необходимо готовое облачное решение для подготовки пользователей в Workday;

* организаций, которым требуется прямая подготовка пользователей из Workday в Azure Active Directory;

* организаций, которым требуется подготавливать пользователей с помощью данных, полученных из Workday;

* организаций, использующих Microsoft 365 для электронной почты.

## <a name="solution-architecture"></a>Архитектура решения

В этом разделе описывается архитектура полноценного решения для подготовки только облачных пользователей. Имеется два связанных потока:

* **Полномочный поток данных отдела кадров Workday в Azure Active Directory.** В этом потоке связанные с работниками события (например, наем, перевод и увольнение) сначала происходят в Workday, а затем данные событий передаются в Azure Active Directory. В зависимости от события, это может приводить к выполнению операций создания, обновления, включения или отключения в Azure AD.
* **Поток обратной записи — из Windows Server Active Directory в Workday.** По завершении создания учетной записи в Active Directory она синхронизируется с Azure AD через Azure AD Connect, а такие сведения, как электронная почта, имя пользователя и номер телефона можно записать обратно в Workday.

  ![Обзор](./media/workday-inbound-tutorial/workday-cloud-only-provisioning.png)

### <a name="end-to-end-user-data-flow"></a>Полноценный поток данных пользователей

1. Команда отдела кадров выполняет транзакции с работниками (присоединение, перемещение и удаление или наем, перевод и увольнение) в Workday Employee Central.
2. Служба подготовки Azure AD выполняет плановую синхронизацию удостоверений из Workday EC и определяет изменения, которые требуется обработать для синхронизации с Windows Server Active Directory.
3. Служба подготовки Azure AD определяет изменение и вызывает операцию создания, обновления, включения или отключения для пользователя в Azure AD.
4. Если приложение [обратной записи Workday](workday-writeback-tutorial.md) настроено, оно извлекает из Azure AD такие атрибуты, как адрес электронной почты, имя пользователя и номер телефона. 
5. Служба подготовки Azure AD задает адрес электронной почты, имя пользователя и номер телефона в Workday.

## <a name="planning-your-deployment"></a>Планирование развертывания

Для настройки подготовки пользователей с помощью системы управления персоналом в облаке из Workday в Azure AD требуется основательное планирование, охватывающее такие различные аспекты, как:

* определение идентификатора сопоставления; 
* Сопоставление атрибутов
* преобразование атрибутов; 
* Фильтры области

Подробные рекомендации по этим темам см. в [плане развертывания облачных служб управления персоналом](../app-provisioning/plan-cloud-hr-provision.md). 

## <a name="configure-integration-system-user-in-workday"></a>Настройка пользователя системы интеграции в Workday

Сведения о создании учетной записи пользователя системы интеграции Workday с разрешениями на получение данных рабочих ролей см. в разделе [Настройка пользователя системы интеграции в Workday](workday-inbound-tutorial.md#configure-integration-system-user-in-workday). 

## <a name="configure-user-provisioning-from-workday-to-azure-ad"></a>Настройка подготовки пользователей из Workday в Azure AD

В следующих разделах описаны действия по настройке подготовки пользователей из Workday в Azure AD для развертываний только в облаке.

* [Добавление приложения соединителя подготовки Azure AD и создание подключения к Workday](#part-1-adding-the-azure-ad-provisioning-connector-app-and-creating-the-connection-to-workday)
* [Настройка сопоставлений атрибутов Workday и Azure AD](#part-2-configure-workday-and-azure-ad-attribute-mappings)
* [Включение и запуск подготовки пользователей](#enable-and-launch-user-provisioning)

### <a name="part-1-adding-the-azure-ad-provisioning-connector-app-and-creating-the-connection-to-workday"></a>Часть 1. Добавление приложения соединителя подготовки Azure AD и создание подключения к Workday

**Настройка подготовки только облачных пользователей Workday в Azure Active Directory**

1. Перейдите к <https://portal.azure.com>.

2. На портале Azure найдите и выберите **Azure Active Directory**.

3. Щелкните **Корпоративные приложения**, а затем — **Все приложения**.

4. Выберите **Добавить приложение**, а затем выберите категорию **Все**.

5. Выполните поиск по условию **Подготовка пользователей из Workday в Azure AD** и добавьте это приложение из коллекции.

6. После добавления приложения и отображения экрана сведений о приложении выберите **Подготовка**.

7. Для параметра **Режим** **подготовки к работе** выберите значение **Автоматически**.

8. В разделе **Учетные данные администратора** заполните поля следующим образом.

   * **Имя пользователя Workday** — введите имя пользователя учетной записи системы интеграции Workday, указав имя домена клиента. Оно должно иметь примерно следующий вид: username@contoso4

   * **Пароль Workday —** введите пароль учетной записи системы интеграции Workday.

   * **URL-адрес API веб-служб Workday** — введите URL-адрес конечной точки веб-служб Workday для вашего клиента. URL-адрес определяет версию API веб-служб Workday, используемую соединителем. 
   
     | Формат URL-адреса | Используемая версия API WWS | Требуются изменения XPATH |
     |------------|----------------------|------------------------|
     | https://####.workday.com/ccx/service/tenantName | версия 21.1 | Нет |
     | https://####.workday.com/ccx/service/tenantName/Human_Resources | версия 21.1 | Нет |
     | https://####.workday.com/ccx/service/tenantName/Human_Resources/v##.# | версия ##.# | Да |

      > [!NOTE]
     > Если в URL-адресе не указаны сведения о версии, приложение использует веб-службы Workday (WWS) версии 21.1 и не требуется вносить никаких изменений в выражения API XPATH по умолчанию, поставляемые с приложением. Чтобы использовать конкретную версию API WWS, укажите номер версии в URL-адресе. <br>
     > Например, `https://wd3-impl-services1.workday.com/ccx/service/contoso4/Human_Resources/v34.0`. <br>
     > <br> Если вы используете API WWS версии 30.0 и более поздней, прежде чем включать задание подготовки, обновите **выражения API XPATH** в разделе **Сопоставление атрибутов > Дополнительные параметры > Изменить список атрибутов для Workday** в соответствии с разделами [Управление конфигурацией](workday-inbound-tutorial.md#managing-your-configuration) и [Описание атрибутов Workday](../app-provisioning/workday-attribute-reference.md#xpath-values-for-workday-web-services-wws-api-v30).  

   * **Электронная почта для уведомлений** — введите адрес электронной почты и установите флажок "send email if failure occurs" (Отправлять по электронной почте в случае сбоя).

   * Нажмите кнопку **Проверить подключение**.

   * Если проверка подключения выполнена успешно, нажмите кнопку **Сохранить** в верхней части. В случае неудачи дважды проверьте правильность URL-адреса и учетных данных Workday в приложении Workday.

### <a name="part-2-configure-workday-and-azure-ad-attribute-mappings"></a>Часть 2. Настройка сопоставлений атрибутов Workday и Azure AD

В этом разделе вы настроите потоки данных пользователя из Workday в Active Directory только для облачных пользователей.

1. На вкладке "Подготовка" в разделе **Сопоставления** щелкните **Synchronize Workers to Azure AD** (Синхронизировать работников с Azure AD).

2. В поле **Область исходного объекта** можно выбрать, какие наборы пользователей в Workday должны учитываться при подготовке в Azure AD, определив набор фильтров на основе атрибутов. Область по умолчанию — "все пользователи в Workday". Примеры фильтров

   * Пример Охват пользователей с идентификаторами рабочих ролей в диапазоне от 1000000 до 2000000

      * Атрибут: WorkerID.

      * Оператор: REGEX MATCH.

      * Значение: (1[0–9][0–9][0–9][0–9][0–9][0–9]).

   * Пример Только временные работники, а не сотрудники

      * Атрибут: ContingentID.

      * Оператор: IS NOT NULL.

3. В поле **Действия с целевыми объектами** можно в глобальном масштабе отфильтровать, какие действия выполняются в Azure AD. Самыми распространенными являются **создание** и **обновление**.

4. В разделе **Сопоставление атрибутов** можно определить, как отдельные атрибуты Workday сопоставляются с атрибутами Active Directory.

5. Щелкните существующее сопоставление атрибута, чтобы его обновить, или **Добавить новое сопоставление** в нижней части экрана, чтобы добавить новые сопоставления. Отдельное сопоставление атрибутов поддерживает следующие свойства:

   * **Тип сопоставления**

      * **Прямой** — записывает значение атрибута Workday без изменений в атрибут AD.

      * **Константа** — записывает статическое постоянное строковое значение в атрибут AD.

      * **Выражение** — позволяет записывать пользовательское значение в атрибут AD на основании одного или нескольких атрибутов Workday. [Дополнительные сведения см. в статье о выражениях](../app-provisioning/functions-for-customizing-application-data.md).

   * **Исходный атрибут** — атрибут пользователя из Workday. Если нужный вам атрибут отсутствует, см. раздел [Настройка списка атрибутов пользователя Workday](workday-inbound-tutorial.md#customizing-the-list-of-workday-user-attributes).

   * **Значение по умолчанию** — необязательно. Если исходный атрибут имеет пустое значение, сопоставление запишет это значение.
            В наиболее распространенной конфигурации это поле остается пустым.

   * **Целевой атрибут** — атрибут пользователя в Azure AD.

   * **Сопоставление объектов с помощью этого атрибута** — должен ли этот атрибут использоваться для уникальной идентификации пользователей между Workday и Azure AD. Как правило, значение задается в поле ИД работника для Workday, который обычно сопоставляется с атрибутом ИД сотрудника (новым) или атрибутом расширения в Azure AD.

   * **Приоритет сопоставления** — возможность указания нескольких атрибутов сопоставления. При указании нескольких атрибутов сопоставления они вычисляются в порядке, заданном в этом поле. Как только соответствие найдено, дальнейшие атрибуты сопоставления не вычисляются.

   * **Применить это сопоставление**

     * **Всегда** — применить это сопоставление как при создании, так и при обновлении пользователей

     * **Только при создании** — применить это сопоставление только при создании пользователей

6. Чтобы сохранить сопоставления, щелкните **Сохранить** в верхней части раздела "Сопоставление атрибутов".


## <a name="enable-and-launch-user-provisioning"></a>Включение и запуск подготовки пользователей

После завершения настройки приложения подготовки Workday можно включить службу подготовки на портале Azure.

> [!TIP]
> По умолчанию при включении службы подготовки она инициализирует операции подготовки для всех пользователей в области. При наличии ошибок в сопоставлении или проблем с данными Workday задание подготовки может завершиться ошибкой и перейти в состояние карантина. Чтобы избежать этого, рекомендуется настроить фильтр **Область исходного объекта** и протестировать сопоставления атрибутов с несколькими тестовыми пользователями перед запуском полной синхронизации всех пользователей. После проверки работоспособности сопоставлений и получения желаемых результатов можно либо удалить фильтр, либо постепенно расширять его, добавляя больше пользователей.

1. На вкладке **Подготовка** установите для параметра **Состояние подготовки** значение **Вкл**.

2. Выберите команду **Сохранить**.

3. Будет запущена начальная синхронизация, которая может длиться переменное число часов в зависимости от количества пользователей в клиенте Workday. Ход выполнения цикла синхронизации можно проверить на индикаторе выполнения для отслеживания. 

4. В любой момент можно проверить вкладку **Журналы аудита** на портале Azure, чтобы узнать, какие действия выполнила служба подготовки. В журналах аудита перечислены все отдельные события синхронизации, выполняемые службой подготовки, например, какие пользователи считываются из Workday и затем будут добавлены или обновлены в Azure Active Directory. 

5. После завершения первичной синхронизации на вкладке **Подготовка** будет создан сводный отчет аудита, как показано ниже.

   > [!div class="mx-imgBorder"]
   > ![Индикатор выполнения подготовки](./media/sap-successfactors-inbound-provisioning/prov-progress-bar-stats.png)

## <a name="next-steps"></a>Дальнейшие шаги

* [Дополнительные сведения о сценариях интеграции Azure AD и Workday и о вызовах веб-служб](../app-provisioning/workday-integration-reference.md)
* [Дополнительные сведения о поддерживаемых атрибутах Workday для входящей подготовки](../app-provisioning/workday-attribute-reference.md)
* [Сведения о настройке обратной записи Workday](workday-writeback-tutorial.md)
* [Сведения о просмотре журналов и получении отчетов о действиях по подготовке](../app-provisioning/check-status-user-account-provisioning.md)
* [Узнайте, как настроить единый вход Azure Active Directory в Workday](workday-tutorial.md).
* [Узнайте, как экспортировать и импортировать конфигурации подготовки.](../app-provisioning/export-import-provisioning-configuration.md)


