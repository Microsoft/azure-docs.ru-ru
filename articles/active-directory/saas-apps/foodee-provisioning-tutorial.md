---
title: Руководство по настройке автоматической подготовки пользователей в Foodee с использованием Azure Active Directory | Документация Майкрософт
description: Сведения о том, как настроить в Azure Active Directory автоматическую подготовку и отзыв учетных записей пользователей для Foodee.
services: active-directory
author: zchia
writer: zchia
manager: CelesteDG
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.workload: identity
ms.topic: tutorial
ms.date: 08/30/2019
ms.author: Zhchia
ms.openlocfilehash: 8b4bfa7e9bf457d79c6c4a0b5255bce4fe36dff4
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "94358694"
---
# <a name="tutorial-configure-foodee-for-automatic-user-provisioning"></a>Руководство по настройке автоматической подготовки пользователей в Foodee

Из этой статьи вы узнаете, как настроить в Azure Active Directory и Foodee автоматическую подготовку и отзыв учетных записей пользователей и групп для приложения Foodee.

> [!NOTE]
> В этой статье рассматривается соединитель, созданный на основе службы подготовки пользователей Azure AD. Чтобы узнать, какие функции выполняет эта служба и каков принцип ее работы, а также найти ответы на часто задаваемые вопросы, см. статью [об автоматизации подготовки и отзыва пользователей в приложениях SaaS с помощью Azure Active Directory](../app-provisioning/user-provisioning.md).
>
> Сейчас этот соединитель доступен в режиме предварительной версии. Дополнительные сведения об условиях использования функций Azure в предварительной версии см. в документе [Дополнительные условия использования предварительных версий Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

## <a name="prerequisites"></a>Предварительные требования

В этом руководстве предполагается, что у вас есть следующие обязательные компоненты:

* клиент Azure AD;
* [клиент Foodee](https://www.food.ee/about/);
* учетная запись пользователя Foodee с разрешениями администратора.

## <a name="assign-users-to-foodee"></a>Назначение пользователей для Foodee 

В Azure AD для определения того, какие пользователи должны получать доступ к выбранным приложениям, используется понятие *назначение*. В контексте автоматической подготовки синхронизируются только те пользователи или группы, которые были назначены конкретному приложению в Azure AD.

Перед настройкой и включением автоматической подготовки пользователей нужно решить, какие пользователи и (или) группы в Azure AD должны иметь доступ к Foodee. После принятия такого решения можно назначить этих пользователей в Foodee, следуя инструкциям из статьи [Назначение пользователя или группы корпоративному приложению в Azure Active Directory](../manage-apps/assign-user-or-group-access-portal.md).

## <a name="important-tips-for-assigning-users-to-foodee"></a>Важные замечания о назначении пользователей для Foodee 

При назначении пользователей нужно принимать во внимание следующее.

* Чтобы проверить конфигурацию автоматической подготовки пользователей, рекомендуем назначить только одного пользователя Azure AD для Foodee. Дополнительных пользователей или группы можно будет назначить позже.

* При назначении пользователя для Foodee на панели **Назначение** необходимо выбрать любую действительную роль для конкретного приложения (если доступно). Пользователи с ролью *Доступ по умолчанию* исключаются из подготовки.

## <a name="set-up-foodee-for-provisioning"></a>Настройка подготовки в Foodee

Прежде чем настраивать автоматическую подготовку пользователей в Azure AD для Foodee, нужно включить подготовку SCIM в Foodee.

1. Войдите в приложение [Foodee](https://www.food.ee/login/) и выберите свой идентификатор клиента.

    :::image type="content" source="media/Foodee-provisioning-tutorial/tenant.png" alt-text="Снимок экрана: главное меню корпоративного портала Foodee. В этом меню отображается заполнитель для идентификатора клиента." border="false":::

1. В разделе **Enterprise portal** (Корпоративный портал) выберите **Single Sign On** (Единый вход).

    ![Меню на панели слева на корпоративном портале Foodee](media/Foodee-provisioning-tutorial/scim.png)

1. Скопируйте значение из поля **API Token** (Токен API), которое нам понадобится позже. Вы введете его в поле **Секретный токен** на вкладке **Подготовка** для приложения Foodee на портале Azure.

    :::image type="content" source="media/Foodee-provisioning-tutorial/token.png" alt-text="Снимок экрана: страница на корпоративном портале Foodee. Выделено значение API Token (Токен API)." border="false":::

## <a name="add-foodee-from-the-gallery"></a>Добавление Foodee из коллекции

Чтобы настроить в Foodee автоматическую подготовку пользователей в Azure AD, нужно добавить Foodee из коллекции приложений Azure AD в список управляемых приложений SaaS.

Чтобы добавить Foodee из коллекции приложений Azure AD, выполните следующие действия.

1. На [портале Azure](https://portal.azure.com) в области слева щелкните **Azure Active Directory**.

    ![Команда Azure Active Directory](common/select-azuread.png)

1. Щелкните **Корпоративные приложения** > **Все приложения**.

    ![Область "Корпоративные приложения"](common/enterprise-applications.png)

1. Чтобы добавить новое приложение, в области сверху нажмите кнопку **Новое приложение**.

    ![Кнопка "Создать приложение"](common/add-new-app.png)

1. В поле поиска введите **Foodee**, выберите **Foodee** в области результатов, а затем нажмите кнопку **Добавить**, чтобы добавить приложение.

    ![Foodee в списке результатов](common/search-new-app.png)

## <a name="configure-automatic-user-provisioning-to-foodee"></a>Настройка автоматической подготовки пользователей в Foodee 

В этом разделе вы настроите службу подготовки Azure AD для создания, обновления и отключения пользователей или групп в Foodee на основе их назначений в Azure AD.

> [!TIP]
> Также вы можете включить для Foodee единый вход на основе SAML, выполнив инструкции из [руководства по единому входу для Foodee](Foodee-tutorial.md). Единый вход настраивается независимо от автоматической подготовки пользователей, хотя эти две возможности хорошо дополняют друг друга.

Настройте в Azure AD автоматическую подготовку пользователей для Foodee, сделав следующее.

1. На [портале Azure](https://portal.azure.com) выберите **Корпоративные приложения** > **Все приложения**.

    ![Область "Корпоративные приложения"](common/enterprise-applications.png)

1. В списке **Приложения** выберите **Foodee**.

    ![Ссылка на Foodee в списке "Приложения"](common/all-applications.png)

1. Выберите вкладку **Подготовка**.

    ![Снимок экрана: раздел "Управление" с выделенным параметром "Подготовка".](common/provisioning.png)

1. В раскрывающемся списке **Режим подготовки к работе** выберите **Автоматически**.

    ![Снимок экрана: раскрывающийся список "Режим подготовки" с выделенным параметром "Автоматически".](common/provisioning-automatic.png)

1. Чтобы обновить **учетные данные администратора**, сделайте следующее.

   a. В поле **URL-адрес клиента** введите значение **https:\//concierge.food.ee/scim/v2**, полученное ранее.

   b. В поле **Секретный токен** введите значение **API Token** (Токен API), полученное ранее.
   
   c. Щелкните **Проверить подключение** и убедитесь, что Azure AD может подключиться к Foodee. Если установить подключение не удалось, убедитесь, что у учетной записи Foodee есть разрешения администратора, и повторите попытку.

    ![Ссылка для проверки подключения](common/provisioning-testconnection-tenanturltoken.png)

1. В поле **Почтовое уведомление** введите адрес электронной почты пользователя или группы, которые должны получать уведомления об ошибках подготовки, а затем установите флажок **Отправить уведомление по электронной почте при сбое**.

    ![Текстовое поле "Почтовое уведомление"](common/provisioning-notification-email.png)

1. Нажмите кнопку **Сохранить**.

1. В разделе **Сопоставления** выберите **Синхронизировать пользователей Azure Active Directory с Foodee**.

    :::image type="content" source="media/Foodee-provisioning-tutorial/usermapping.png" alt-text="Снимок экрана: раздел &quot;Сопоставления&quot;. Ниже поля &quot;Имя&quot; выделен элемент &quot;Синхронизировать пользователей Azure Active Directory с Foodee&quot;." border="false":::

1. В разделе **Сопоставления атрибутов** просмотрите атрибуты пользователей, которые синхронизируются из Azure AD в Foodee. Атрибуты, выбранные как свойства **Сопоставление**, используются для сопоставления *учетных записей пользователей* в Foodee при операциях обновления. 

    :::image type="content" source="media/Foodee-provisioning-tutorial/userattribute.png" alt-text="Снимок экрана: страница &quot;Сопоставление атрибутов&quot;. В таблице перечислены атрибуты Azure Active Directory и Foodee с указанием приоритета сопоставления." border="false":::

1. Чтобы зафиксировать изменения, щелкните **Сохранить**.
1. В разделе **Сопоставления** выберите **Синхронизировать группы Azure Active Directory с Foodee**.

    :::image type="content" source="media/Foodee-provisioning-tutorial/groupmapping.png" alt-text="Снимок экрана: раздел &quot;Сопоставления&quot;. Ниже поля &quot;Имя&quot; выделен элемент &quot;Синхронизировать группы Azure Active Directory с Foodee&quot;." border="false":::

1. В разделе **Сопоставления атрибутов** просмотрите атрибуты пользователей, которые синхронизируются из Azure AD в Foodee. Атрибуты, выбранные как свойства **Сопоставление**, используются для сопоставления *учетных записей групп* в Foodee при операциях обновления.

    :::image type="content" source="media/Foodee-provisioning-tutorial/groupattribute.png" alt-text="Снимок экрана: страница &quot;Сопоставление атрибутов&quot;. В таблице перечислены атрибуты Azure Active Directory, атрибуты Foodee и приоритеты сопоставления." border="false":::

1. Чтобы зафиксировать изменения, щелкните **Сохранить**.
1. Настройте фильтры для определения области. Чтобы узнать, как это делается, ознакомьтесь с инструкциями в статье [Подготовка приложений на основе атрибутов с использованием фильтров области](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).

1. Чтобы включить службу подготовки Azure AD для Foodee, в разделе **Параметры** измените значение параметра **Состояние подготовки** на **Включено**.

    ![Переключатель "Состояние подготовки"](common/provisioning-toggle-on.png)

1. В разделе **Параметры** выберите в раскрывающемся списке **Область** все строки с пользователями и группами, которые вы намерены подготовить для Foodee.

    ![Раскрывающийся список "Область подготовки"](common/provisioning-scope.png)

1. Когда будете готовы выполнить подготовку, нажмите кнопку **Сохранить**.

    ![Кнопка "Сохранить" на странице конфигурации подготовки](common/provisioning-configuration-save.png)

Только что выполненная операция запускает начальную синхронизацию пользователей и групп, которые вы определили в раскрывающемся списке **Область**. Начальная синхронизация занимает больше времени, чем последующие операции синхронизации. Подробные сведения о длительности подготовки пользователей см. в разделе [Сколько времени занимает подготовка пользователей?](../app-provisioning/application-provisioning-when-will-provisioning-finish-specific-user.md#how-long-will-it-take-to-provision-users)

В разделе **Текущее состояние** можно отслеживать ход выполнения и переходить по ссылкам для просмотра отчетов о подготовке. В отчете описаны все действия, выполненные службой подготовки Azure AD в отношении Foodee. Дополнительные сведения см. в статье [Проверка состояния подготовки пользователей](../app-provisioning/application-provisioning-when-will-provisioning-finish-specific-user.md). Сведения о чтении журналов подготовки Azure AD см. в руководстве [по отчетам об автоматической подготовке учетных записей пользователей](../app-provisioning/check-status-user-account-provisioning.md).

## <a name="additional-resources"></a>Дополнительные ресурсы

* [Managing user account provisioning for enterprise apps in the Azure portal](../app-provisioning/configure-automatic-user-provisioning-portal.md) (Управление подготовкой учетных записей пользователей для корпоративных приложений на портале Azure)
* [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](../manage-apps/what-is-single-sign-on.md)

## <a name="next-steps"></a>Дальнейшие действия

* [Сведения о просмотре журналов и получении отчетов о действиях по подготовке](../app-provisioning/check-status-user-account-provisioning.md)
