---
title: Руководство по интеграции единого входа Azure Active Directory с Catchpoint
description: Сведения о настройке единого входа для Azure Active Directory и Catchpoint.
services: active-directory
author: jeevansd
manager: CelesteDG
ms.reviewer: celested
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.workload: identity
ms.topic: tutorial
ms.date: 12/16/2020
ms.author: jeedes
ms.openlocfilehash: 940915186176efcb39be03efe6673c138132ebd6
ms.sourcegitcommit: 67b44a02af0c8d615b35ec5e57a29d21419d7668
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "97916309"
---
# <a name="tutorial-azure-active-directory-single-sign-on-integration-with-catchpoint"></a>Руководство по интеграции единого входа Azure Active Directory с Catchpoint

В этом руководстве объясняется, как интегрировать Catchpoint с Azure Active Directory (Azure AD). Интеграция Catchpoint с Azure AD обеспечивает следующие возможности.

* Управление доступом пользователей к Catchpoint из Azure AD.
* Включение автоматического входа в Catchpoint для пользователей с учетными записями Azure AD.
* Централизованное управление учетными записями через портал Azure.

## <a name="prerequisites"></a>Предварительные требования

Чтобы приступить к работе, потребуется следующее.

* Подписка Azure AD. Если у вас нет подписки, вы можете получить [бесплатную учетную запись](https://azure.microsoft.com/free/).
* Подписка на Catchpoint с поддержкой единого входа.

## <a name="scenario-description"></a>Описание сценария

В рамках этого руководства вы настроите и проверите единый вход Azure AD в тестовой среде.

* Catchpoint поддерживает единый вход, инициируемый поставщиком службы и поставщиком удостоверений.
* Catchpoint поддерживает JIT-подготовку пользователей.

## <a name="add-catchpoint-from-the-gallery"></a>Добавление Catchpoint из коллекции

Чтобы настроить интеграцию Catchpoint с Azure AD, необходимо добавить Catchpoint в список управляемых приложений SaaS.

1. Войдите на портал Azure с помощью рабочей, учебной или личной учетной записи Майкрософт.
1. В области слева выберите службу **Azure Active Directory**.
1. Перейдите в колонку **Корпоративные приложения** и выберите **Все приложения**.
1. Чтобы добавить новое приложение, выберите **Новое приложение**.
1. В разделе **Добавление из коллекции** в поле поиска введите **Catchpoint**.
1. Выберите **Catchpoint** в области результатов и добавьте это приложение. Подождите несколько секунд, пока приложение не будет добавлено в ваш клиент.

## <a name="configure-and-test-azure-ad-sso-for-catchpoint"></a>Настройка и проверка единого входа Azure AD для Catchpoint

Чтобы единый вход работал, необходимо связать пользователя Azure AD с пользователем в Catchpoint. При работе с этим руководством мы настроим тестового пользователя с именем **B.Simon**. 

Выполните инструкции из следующих разделов.

1. [Настройка единого входа Azure AD](#configure-azure-ad-sso) — чтобы ваши пользователи могли использовать эту функцию.
    * [Создание тестового пользователя Azure AD](#create-an-azure-ad-test-user) — для проверки работы единого входа Azure AD с помощью учетных данных пользователя B.Simon.
    * [Назначение тестового пользователя Azure AD](#assign-the-azure-ad-test-user) — чтобы позволить пользователю B.Simon использовать единый вход Azure AD.
1. [Настройка единого входа в Catchpoint](#configure-catchpoint-sso) — чтобы настроить параметры единого входа на стороне приложения.
    * [Создание тестового пользователя Catchpoint](#create-a-catchpoint-test-user) — чтобы разрешить связывание тестовой учетной записи B.Simon в Azure AD с аналогичной учетной записью пользователя в Catchpoint.
1. [Проверка единого входа](#test-sso) — чтобы убедиться в правильности конфигурации.

## <a name="configure-azure-ad-sso"></a>Настройка единого входа Azure AD

Выполните следующие действия на портале Azure, чтобы включить единый вход Azure AD.

1. Войдите на портал Azure.
1. Нана странице интеграции с приложением **Catchpoint** найдите раздел **Управление** и выберите **Единый вход**.
1. На странице **Выбрать метод единого входа** выберите **SAML**.
1. На странице **Настройка единого входа с помощью SAML** щелкните значок карандаша, чтобы открыть диалоговое окно **Базовая конфигурация SAML** и изменить эти параметры.

   ![Изменение базовой конфигурации SAML](common/edit-urls.png)

1. Настройте инициируемый режим для Catchpoint:
   - Для режима, инициируемого **IDP**, введите значения для следующих полей:
     - Поле **Идентификатор**: `https://portal.catchpoint.com/SAML2`
     - Поле **URL-адрес ответа**: `https://portal.catchpoint.com/ui/Entry/SingleSignOn.aspx`
   - В режиме, инициируемом **поставщиком службы**, выберите **Задать дополнительные URL-адреса** и введите следующее значение:
     - Для параметра **URL-адрес входа**: `https://portal.catchpoint.com/ui/Entry/SingleSignOn.aspx`

1. Для приложения Catchpoint требуется утверждение SAML в определенном формате. Добавьте сопоставление настраиваемых атрибутов в конфигурацию атрибутов токена SAML. Следующая таблица содержит список атрибутов по умолчанию.

    | Имя | Атрибут источника|
    | ------------ | --------- |
    | Заданное имя | user.givenneame |
    | Surname | user.surname |
    | Адрес электронной почты | user.mail |
    | Имя | user.userprincipalname |
    | Уникальный идентификатор пользователя | user.userprincipalname |

    ![Снимок экрана: раздел "Утверждения и атрибуты пользователя"](common/default-attributes.png)

1. Кроме того, приложение Catchpoint ожидает передачи другого атрибута в ответе SAML. См. следующую таблицу. Этот атрибут также предварительно заполнен, но его можно проверить и обновить в соответствии с вашими требованиями.

    | Имя | Атрибут источника|
    | ------------ | --------- |
    | пространство имен | user.assignedrole |

    > [!NOTE]
    > Утверждение `namespace` необходимо сопоставить с именем учетной записи. Это имя учетной записи должно быть настроено с ролью в Azure AD, которая будет передана обратно в ответе SAML. Дополнительные сведения о ролях в Azure AD см. в руководстве по [настройке утверждения роли, выданного в токене SAML, для корпоративных приложений](https://docs.microsoft.com/azure/active-directory/develop/howto-add-app-roles-in-azure-ad-apps#app-roles-ui).

1. Перейдите на страницу **Настройка единого входа с помощью SAML**. В разделе **Сертификат подписи SAML** найдите **Сертификат (Base64)** . Выберите **Скачать**, чтобы сохранить сертификат на компьютере.

    ![Ссылка для скачивания сертификата](common/certificatebase64.png)

1. В разделе **Настройка Catchpoint** скопируйте URL-адреса, которые понадобятся на следующем шаге.

    ![Копирование URL-адресов настройки](common/copy-configuration-urls.png)

### <a name="create-an-azure-ad-test-user"></a>Создание тестового пользователя Azure AD

В этом разделе описано, как создать на портале Azure тестового пользователя с именем B.Simon.

1. Слева на портале Azure выберите **Azure Active Directory** > **Пользователи** > **Все пользователи**.
1. В верхней части экрана выберите **Новый пользователь**.
1. В разделе **Свойства пользователя** выполните следующие действия.
   1. В поле **Имя** введите `B.Simon`.  
   1. В поле **Имя пользователя** введите username@companydomain.extension. Например, введите `B.Simon@contoso.com`.
   1. Установите флажок **Показать пароль**. Обратите внимание на отображаемое значение пароля.
   1. Нажмите кнопку **создания**.

### <a name="assign-the-azure-ad-test-user"></a>Назначение тестового пользователя Azure AD

В этом разделе описано, как включить единый вход в Azure для пользователя B.Simon, предоставив этому пользователю доступ к Catchpoint.

1. На портале Azure выберите **Корпоративные приложения** > **Все приложения**.
1. Из списка приложений выберите **Catchpoint**.
1. На странице "Обзор" приложения найдите раздел **Управление** и выберите **Пользователи и группы**.
1. Выберите **Добавить пользователя**, а в диалоговом окне **Добавление назначения** — **Пользователи и группы**.
1. В диалоговом окне **Пользователи и группы** выберите **B.Simon** из списка пользователей. В нижней части экрана нажмите кнопку **Выбрать**.
1. Если вы настроили роли, как описано выше, вы можете выбрать роль из раскрывающегося списка **Выберите роль**.
1. В диалоговом окне **Добавление назначения** выберите **Назначить**.

## <a name="configure-catchpoint-sso"></a>Настройка единого входа в Catchpoint

1. В другом окне веб-браузера войдите в приложение Catchpoint с правами администратора.

1. Выберите значок **Settings** (Параметры), а затем выберите **SSO Identity Provider** (Поставщик удостоверений единого входа).

    ![Снимок экрана параметров Catchpoint с выбранным поставщиком удостоверений единого входа](./media/catchpoint-tutorial/configuration1.png)

1. На странице **Single Sign On** (Единый вход) заполните следующие поля.

   ![Снимок экрана страницы единого входа Catchpoint](./media/catchpoint-tutorial/configuration2.png)

   Поле | Значение
   ----- | ----- 
   **Пространство имен** | Допустимое значение пространства имен.
   **Identity Provider Issuer** (Издатель поставщика удостоверений) | Значение `Azure AD Identifier` на портале Azure.
   **Single Sign On Url** (URL-адрес для единого входа) | Значение `Login URL` на портале Azure.
   **Сертификат** | Содержимое загруженного файла `Certificate (Base64)` на портале Azure. Используйте Блокнот для просмотра и копирования.

   Можно также выбрать параметр **Upload Metadata** (Отправить метаданные), чтобы передать **XML-файл метаданных федерации**.

1. Щелкните **Сохранить**.

### <a name="create-a-catchpoint-test-user"></a>Создание тестового пользователя Catchpoint

Приложение Catchpoint поддерживает JIT-подготовку пользователей, которая включена по умолчанию. В этом разделе нет пунктов действий. Если пользователь B.Simon еще не существует в Catchpoint, он создается после проверки подлинности.

## <a name="test-sso"></a>Проверка единого входа

В этом разделе описано, как проверить конфигурацию единого входа Azure AD с помощью указанных ниже способов. 

#### <a name="sp-initiated"></a>Инициация поставщиком услуг:

* Выберите **Тестировать приложение** на портале Azure. Вы будете перенаправлены по URL-адресу для входа в Catchpoint, где можно инициировать поток входа.  

* Перейдите по URL-адресу для входа в Catchpoint и инициируйте поток входа.

#### <a name="idp-initiated"></a>Вход, инициированный поставщиком удостоверений

* Выберите **Тестировать приложение** на портале Azure, и вы автоматически войдете в приложение Catchpoint, для которого настроен единый вход. 

Вы можете также использовать портал "Мои приложения" корпорации Майкрософт для тестирования приложения в любом режиме. Щелкнув плитку Catchpoint на портале "Мои приложения", вы будете перенаправлены на страницу входа приложения для инициации потока входа (при настройке в режиме поставщика услуг) или автоматически войдете в приложение Catchpoint, для которого настроен единый вход (при настройке в режиме поставщика удостоверений). Дополнительные сведения о портале "Мои приложения" см. в [этой статье](https://docs.microsoft.com/azure/active-directory/active-directory-saas-access-panel-introduction).


> [!NOTE]
> Когда вы входите в приложение Catchpoint на странице входа, после ввода **учетных данных Catchpoint** введите допустимое значение **пространства имен** в поле **Company Credentials (SSO)** (Учетные данные организации (единый вход)) и выберите **Вход**.
> 
> ![Конфигурация Catchpoint](./media/catchpoint-tutorial/loginimage.png)

## <a name="next-steps"></a>Дальнейшие действия

После настройки Catchpoint можно включить управление сеансом. Эта мера предосторожности защищает от хищения конфиденциальных данных вашей организации и несанкционированного доступа к ним в реальном времени. Управление сеансом — это расширение условного доступа. [Узнайте, как применять управление сеансами с помощью Microsoft Cloud App Security](/cloud-app-security/proxy-deployment-any-app).
