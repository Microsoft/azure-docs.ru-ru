---
title: Руководство по Интеграция Azure Active Directory с HubSpot | Документация Майкрософт
description: Узнайте, как настроить единый вход между Azure Active Directory и HubSpot.
services: active-directory
author: jeevansd
manager: CelesteDG
ms.reviewer: celested
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.workload: identity
ms.topic: tutorial
ms.date: 12/27/2020
ms.author: jeedes
ms.openlocfilehash: 3b60ab21bb1e8f5270512d3f1e77aeab2baedc31
ms.sourcegitcommit: 9514d24118135b6f753d8fc312f4b702a2957780
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "97968642"
---
# <a name="tutorial-azure-active-directory-integration-with-hubspot"></a>Руководство по Интеграция Azure Active Directory с HubSpot

В этом учебнике описано, как интегрировать HubSpot с Azure Active Directory (Azure AD). Интеграция HubSpot с Azure AD обеспечивает следующие возможности:

* управление доступом к HubSpot с помощью Azure AD;
* автоматический вход пользователей в HubSpot с помощью учетных записей Azure AD.
* Централизованное управление учетными записями через портал Azure.

## <a name="prerequisites"></a>Предварительные требования

Чтобы настроить интеграцию Azure AD с HubSpot, вам потребуется:

* Подписка Azure AD. Если у вас еще нет подписки Azure AD, [создайте бесплатную учетную запись Azure](https://azure.microsoft.com/free/), прежде чем начинать работу.
* подписка HubSpot с поддержкой единого входа.

## <a name="scenario-description"></a>Описание сценария

В рамках этого руководства вы настроите и проверите единый вход Azure AD в тестовой среде и интеграцию HubSpot с Azure AD.

HubSpot поддерживает следующие функции:

* **единый вход, инициированный поставщиком службы**;
* **единый вход, инициированный поставщиком удостоверений**;

## <a name="adding-hubspot-from-the-gallery"></a>Добавление HubSpot из коллекции.

Чтобы настроить интеграцию HubSpot с Azure AD, необходимо добавить HubSpot из коллекции в список управляемых приложений SaaS.

1. Войдите на портал Azure с помощью личной учетной записи Майкрософт либо рабочей или учебной учетной записи.
1. В области навигации слева выберите службу **Azure Active Directory**.
1. Перейдите в колонку **Корпоративные приложения** и выберите **Все приложения**.
1. Чтобы добавить новое приложение, выберите **Новое приложение**.
1. В разделе **Добавление из коллекции** в поле поиска введите **HubSpot**.
1. Выберите **HubSpot** в области результатов и добавьте это приложение. Подождите несколько секунд, пока приложение не будет добавлено в ваш клиент.

## <a name="configure-and-test-azure-ad-sso-for-hubspot"></a>Настройка и проверка единого входа Azure Active Directory для HubSpot

В этом разделе описана настройка и проверка единого входа Azure AD в HubSpot с использованием тестового пользователя **Britta Simon**. Для обеспечения работы единого входа необходимо установить связь между пользователем Azure AD и соответствующим пользователем в HubSpot.

Чтобы настроить и проверить единый вход Azure AD в HubSpot, потребуется выполнить действия в следующих стандартных блоках.

| Задача | Описание |
| --- | --- |
| **[Настройка единого входа Azure AD](#configure-azure-ad-single-sign-on)** | Предоставление пользователям возможности использовать эту функцию. |
| **[Настройка единого входа в HubSpot](#configure-hubspot-single-sign-on)** . | Настройка параметров единого входа в приложении. |
| **[Создание тестового пользователя Azure AD](#create-an-azure-ad-test-user)** | Проверка работы единого входа Azure AD на примере пользователя Britta Simon. |
| **[Назначение тестового пользователя Azure AD](#assign-the-azure-ad-test-user)** | Предоставление пользователю Britta Simon возможности использовать единый вход Azure AD. |
| **[Создание тестового пользователя HubSpot](#create-a-hubspot-test-user)** . | Требуется, чтобы в HubSpot существовал пользователь Britta Simon, связанный с одноименным пользователем в Azure AD. |
| **[Проверка единого входа](#test-single-sign-on)** | необходима, чтобы убедиться, что конфигурация работает правильно. |

### <a name="configure-azure-ad-single-sign-on"></a>Настройка единого входа Azure AD

1. На портале Azure на странице интеграции с приложением **HubSpot** найдите раздел **Управление** и выберите **Единый вход**.
1. На странице **Выбрать метод единого входа** выберите **SAML**.
1. На странице **Настройка единого входа с помощью SAML** щелкните значок карандаша, чтобы открыть диалоговое окно **Базовая конфигурация SAML** для изменения параметров.

   ![Изменение базовой конфигурации SAML](common/edit-urls.png)

1. Чтобы настроить *режим, инициируемый поставщиком удостоверений*, в области **Базовая конфигурация SAML** выполните приведенные ниже действия.

    1. В поле **Идентификатор** введите URL-адрес в формате https:\//api.hubspot.com/login-api/v1/saml/login?portalId=\<CUSTOMER ID\>.

    1. В поле **URL-адрес ответа** введите URL-адрес в формате https:\//api.hubspot.com/login-api/v1/saml/acs?portalId=\<CUSTOMER ID\>.

    ![Сведения о домене и URL-адресах единого входа для HubSpot](common/idp-intiated.png)

    > [!NOTE]
    > Можно также посмотреть шаблоны форматирования URL-адресов в области **Базовая конфигурация SAML** на портале Azure.

1. Чтобы настроить приложение в режиме, *инициируемом поставщиком служб*, выполните следующие действия.

    1. Щелкните **Задать дополнительные URL-адреса**.

    1. В поле **URL-адрес для входа** введите **https:\//app.hubspot.com/login**.

    ![Параметр "Задать дополнительные URL-адреса"](common/metadata-upload-additional-signon.png)

1. В области **Настройка единого входа с помощью SAML** в разделе **Сертификат подписи SAML** нажмите кнопку **Скачать**, расположенную рядом с элементом **Сертификат (Base64)** . Выберите вариант для скачивания в соответствии с вашими требованиями. Сохраните сертификат на своем компьютере.

    ![Параметр для скачивания сертификата в кодировке Base64](common/certificatebase64.png)

1. Требуемые URL-адреса можно скопировать из раздела **Настройка HubSpot**.

    * URL-адрес входа.
    * Идентификатор Azure AD
    * URL-адрес выхода.

    ![Копирование URL-адресов настройки](common/copy-configuration-urls.png)

### <a name="configure-hubspot-single-sign-on"></a>Настройка единого входа в HubSpot

1. Откройте новую вкладку в браузере и войдите в учетную запись администратора HubSpot.

1. Выберите значок **Settings** (Параметры) в правом верхнем углу страницы.

    ![Значок "Settings" (Параметры) в HubSpot](./media/hubspot-tutorial/config1.png)

1. Щелкните **Account Defaults** (Параметры учетной записи по умолчанию).

    ![Параметр "Account Defaults" (Параметры учетной записи по умолчанию) в HubSpot](./media/hubspot-tutorial/config2.png)

1. Прокрутите вниз до раздела **Security** (Безопасность) и щелкните **Set up** (Настроить).

    ![Параметр "Set up" (Настроить) в HubSpot](./media/hubspot-tutorial/config3.png)

1. В разделе **Set up single sign-on** (Настройка единого входа) сделайте следующее.

    1. В поле **Audience URl (Service Provider Entity ID)** (URl аудитории (идентификатор сущности поставщика услуг)) щелкните **Copy** (Копировать), чтобы скопировать значение. На портале Azure в области **Базовая конфигурация SAML** вставьте это значение в поле **Идентификатор**.

    1. В поле **Sign on URl, ACS, Recipient, or Redirect** (URl для входа, ACS, получатель или адрес перенаправления), щелкните **Copy** (Копировать), чтобы скопировать значение. На портале Azure в области **Базовая конфигурация SAML** вставьте это значение в поле **URL-адрес ответа**.

    1. В HubSpot в поле **Identity Provider Identifier or Issuer URL** (Идентификатор поставщика удостоверений или URL-адрес издателя) вставьте значение **Идентификатор Azure AD**, скопированное на портале Azure.

    1. В HubSpot в поле **Identity Provider Single Sign-On URL** (URL-адрес единого входа поставщика удостоверений) вставьте значение **URL-адрес входа**, скопированное на портале Azure.

    1. В Блокноте Windows откройте скачанный файл сертификата формата Base64. Выделите и скопируйте содержимое файла. Затем в HubSpot вставьте его в поле **X.509 Certificate** (Сертификат X.509).

    1. Нажмите кнопку **Проверить**.

        ![Раздел "Set up single sign-on" (Настройка единого входа) в HubSpot](./media/hubspot-tutorial/config4.png)

### <a name="create-an-azure-ad-test-user"></a>Создание тестового пользователя Azure AD

В этом разделе описано, как на портале Azure создать тестового пользователя с именем B.Simon.

1. На портале Azure в области слева выберите **Azure Active Directory**, **Пользователи**, а затем — **Все пользователи**.
1. В верхней части экрана выберите **Новый пользователь**.
1. В разделе **Свойства пользователя** выполните следующие действия.
    1. В поле **Имя** введите `B.Simon`.  
    1. В поле **Имя пользователя** введите username@companydomain.extension. Например, `B.Simon@contoso.com`.
    1. Установите флажок **Показать пароль** и запишите значение, которое отображается в поле **Пароль**.
    1. Нажмите кнопку **Создать**.

### <a name="assign-the-azure-ad-test-user"></a>Назначение тестового пользователя Azure AD

В этом разделе описано, как включить единый вход в Azure для пользователя B.Simon, предоставив этому пользователю доступ к HubSpot.

1. На портале Azure выберите **Корпоративные приложения**, а затем — **Все приложения**.
1. В списке приложений выберите **HubSpot**.
1. На странице "Обзор" приложения найдите раздел **Управление** и выберите **Пользователи и группы**.
1. Выберите **Добавить пользователя**, а в диалоговом окне **Добавление назначения** выберите **Пользователи и группы**.
1. В диалоговом окне **Пользователи и группы** выберите **B.Simon** в списке пользователей, а затем в нижней части экрана нажмите кнопку **Выбрать**.
1. Если пользователям необходимо назначить роль, вы можете выбрать ее из раскрывающегося списка **Выберите роль**. Если для этого приложения не настроена ни одна роль, будет выбрана роль "Доступ по умолчанию".
1. В диалоговом окне **Добавление назначения** нажмите кнопку **Назначить**.

### <a name="create-a-hubspot-test-user"></a>Создание тестового пользователя HubSpot

Чтобы пользователь Azure AD мог войти в HubSpot, его нужно подготовить к работе в HubSpot. В HubSpot подготовка к работе выполняется вручную.

Чтобы подготовить к работе учетную запись пользователя в HubSpot, выполните следующие действия

1. Войдите на свой корпоративный веб-сайт HubSpot с правами администратора.

1. Выберите значок **Settings** (Параметры) в правом верхнем углу страницы.

    ![Значок "Settings" (Параметры) в HubSpot](./media/hubspot-tutorial/config1.png)

1. Выберите **Users & Teams** (Пользователи и группы).

    ![Параметр "Users & Teams" (Пользователи и команды) в HubSpot](./media/hubspot-tutorial/user1.png)

1. Щелкните **Create user** (Создать пользователя).

    ![Параметр "Create user" (Создать пользователя) в HubSpot](./media/hubspot-tutorial/user2.png)

1. В поле **Add email addess(es)** (Добавьте адреса электронной почты) введите адрес электронной почты пользователя в формате brittasimon\@contoso.com, а затем щелкните **Next** (Далее).

    ![Поле "Add email address(es)" (Добавьте адреса электронной почты) в разделе "Create users" (Создание пользователей) в HubSpot](./media/hubspot-tutorial/user3.png)

1. В разделе **Create users** (Создание пользователей) по очереди откройте все вкладки. На каждой вкладке задайте соответствующие параметры и разрешения для пользователя. Затем нажмите кнопку **Далее**.

    ![Вкладки в разделе "Create user" (Создание пользователя) в HubSpot](./media/hubspot-tutorial/user4.png)

1. Щелкните **Send** (Отправить), чтобы отправить приглашение пользователю.

    ![Параметр "Send" (Отправить) в HubSpot](./media/hubspot-tutorial/user5.png)

    > [!NOTE]
    > После того, как пользователь примет приглашение, его учетная запись будет активирована.

### <a name="test-single-sign-on"></a>Проверка единого входа

В этом разделе описано, как проверить конфигурацию единого входа Azure AD с помощью указанных ниже способов. 

#### <a name="sp-initiated"></a>Инициация поставщиком услуг:

* Выберите **Тестировать приложение** на портале Azure. Вы будете перенаправлены по URL-адресу для входа в HubSpot, где можно инициировать поток входа.  

* Перейдите по URL-адресу для входа в HubSpot и инициируйте поток входа.

#### <a name="idp-initiated"></a>Вход, инициированный поставщиком удостоверений

* Выберите **Тестировать приложение** на портале Azure, после чего вы автоматически войдете в HubSpot, для которого настроен единый вход. 

Вы можете также использовать портал "Мои приложения" корпорации Майкрософт для тестирования приложения в любом режиме. Щелкнув плитку HubSpot на портале "Мои приложения", вы будете перенаправлены на страницу входа приложения для инициации потока входа (при настройке в режиме поставщика службы) или автоматически войдете в приложение HubSpot, для которого настроен единый вход (при настройке в режиме поставщика удостоверений). Дополнительные сведения о портале "Мои приложения" см. в [этой статье](https://docs.microsoft.com/azure/active-directory/active-directory-saas-access-panel-introduction).


## <a name="next-steps"></a>Дальнейшие действия

После настройки HubSpot вы можете применить функцию управления сеансом, которая в режиме реального времени защищает конфиденциальные данные вашей организации от хищения и несанкционированного доступа. Управление сеансом является расширением функции условного доступа. [Узнайте, как применять управление сеансами с помощью Microsoft Cloud App Security](/cloud-app-security/proxy-deployment-aad).