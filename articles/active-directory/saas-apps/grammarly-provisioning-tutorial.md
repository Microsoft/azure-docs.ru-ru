---
title: Руководство. Настройка грамматики для автоматической подготовки пользователей с помощью Azure Active Directory | Документация Майкрософт
description: Узнайте, как автоматически подготавливать и отзывать учетные записи пользователей из Azure AD в грамматику.
services: active-directory
documentationcenter: ''
author: Zhchia
writer: Zhchia
manager: beatrizd
ms.assetid: cd2dd9d7-4901-40c8-8888-98850557b072
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 03/16/2021
ms.author: Zhchia
ms.openlocfilehash: ca01289ce66afe642081e5be17373e640dd1e46d
ms.sourcegitcommit: 42e4f986ccd4090581a059969b74c461b70bcac0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "104864828"
---
# <a name="tutorial-configure-grammarly-for-automatic-user-provisioning"></a>Учебник. Настройка грамматики для автоматической подготовки пользователей

В этом учебнике описываются действия, которые необходимо выполнить как в грамматике, так и в Azure Active Directory (Azure AD) для настройки автоматической подготовки пользователей. После настройки Azure AD автоматически подготавливает и отменяет подготовку пользователей и групп для [грамматики](https://www.grammarly.com/) с помощью службы подготовки Azure AD. Подробные сведения о том, что делает эта служба, как она работает, и часто задаваемые вопросы см. в статье [Автоматическая подготовка пользователей и ее отзыв для приложений SaaS в Azure Active Directory](../manage-apps/user-provisioning.md). 


## <a name="capabilities-supported"></a>Поддерживаемые возможности
> [!div class="checklist"]
> * Создание пользователей в грамматике
> * Удалять пользователей в зашифрованном виде, если им больше не нужен доступ
> * Обеспечение синхронизации атрибутов пользователей между Azure AD и грамматикой

## <a name="prerequisites"></a>Предварительные требования

В сценарии, описанном в этом руководстве, предполагается, что у вас уже имеется:

* [Клиент Azure AD.](https://docs.microsoft.com/azure/active-directory/develop/quickstart-create-new-tenant) 
* Учетная запись пользователя в Azure AD с [разрешением](https://docs.microsoft.com/azure/active-directory/users-groups-roles/directory-assign-admin-roles) на настройку подготовки (например, администратор приложений, администратор облачных приложений, владелец приложения или глобальный администратор). 
* Учетная запись для грамматической деятельности с правами администратора.

## <a name="step-1-plan-your-provisioning-deployment"></a>Шаг 1. Планирование развертывания для подготовки
1. Узнайте, [как работает служба подготовки](https://docs.microsoft.com/azure/active-directory/manage-apps/user-provisioning).
1. Определите, кто будет находиться в [области подготовки](https://docs.microsoft.com/azure/active-directory/manage-apps/define-conditional-rules-for-provisioning-user-accounts).
1. Определите, какие данные должны [сопоставляться между Azure AD и грамматикой](https://docs.microsoft.com/azure/active-directory/manage-apps/customize-application-attributes). 

## <a name="step-2-configure-grammarly-to-support-provisioning-with-azure-ad"></a>Шаг 2. Настройка грамматики для поддержки подготовки с помощью Azure AD

Обратитесь к своему грамматическому правилу или напишите в, <support@grammarly.com> чтобы запросить ваш токен подготовки.

## <a name="step-3-add-grammarly-from-the-azure-ad-application-gallery"></a>Шаг 3. Добавление грамматики из коллекции приложений Azure AD

Добавьте грамматику из коллекции приложений Azure AD, чтобы начать управление подготовкой для грамматики. Если вы ранее настроили грамматику для единого входа, можно использовать то же приложение. При первоначальном тестировании интеграции рекомендуется создать отдельное приложение. Дополнительные сведения о добавлении приложения из коллекции см. в [этом кратком руководстве](../manage-apps/add-application-portal.md).

## <a name="step-4-define-who-will-be-in-scope-for-provisioning"></a>Шаг 4. Определение пользователей для включения в область подготовки

Службу подготовки Azure AD можно использовать для определения того, кто будет подготовлен в соответствии с назначением приложения или на основе атрибутов пользователя или группы. Если вы решили определить пользователей на основе назначения, выполните следующие [действия](../manage-apps/assign-user-or-group-access-portal.md), чтобы назначить пользователей и группы приложению. Если вы решили указать, кто будет подготовлен на основе только атрибутов пользователя или группы, можно использовать фильтр области, как описано в разделе [Подготовка приложений с помощью фильтров области](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).

* При назначении пользователей и групп в грамматике необходимо выбрать роль, отличную от **доступа по умолчанию**. Пользователи с такой ролью исключаются из подготовки и будут помечены в журналах подготовки как не имеющие разрешений. Если в приложении доступна только эта роль, можно [изменить манифест приложения](../develop/howto-add-app-roles-in-azure-ad-apps.md), чтобы добавить другие роли.

* Начните с малого. Протестируйте небольшой набор пользователей и групп, прежде чем выполнять развертывание для всех. Если для параметра область подготовки задано значение назначенные пользователи и группы, можно управлять этим параметром, назначив приложению одного или двух пользователей или групп. Если в область включены все пользователи и группы, можно указать [фильтр области на основе атрибутов](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).


## <a name="step-5-configure-automatic-user-provisioning-to-grammarly"></a>Шаг 5. Настройка автоматической подготовки пользователей для грамматики

В этом разделе описывается, как настроить службу подготовки Azure AD для создания, обновления и отключения пользователей или групп в Clarizen One на основе их назначений в Azure AD.

### <a name="configure-automatic-user-provisioning-for-grammarly-in-azure-ad"></a>Настройка автоматической подготовки пользователей для грамматики в Azure AD

1. Войдите на [портал Azure](https://portal.azure.com). Щелкните **Корпоративные приложения** > **Все приложения**.

    ![Снимок экрана: панель "Корпоративные приложения".](common/enterprise-applications.png)

1. В списке приложений выберите **грамматика**.

    ![Снимок экрана, на котором показана ссылка на грамматику в списке приложений.](common/all-applications.png)

1. Выберите вкладку **Подготовка**.

    ![Снимок экрана: вкладка "Подготовка".](common/provisioning.png)

1. Для параметра **Режим подготовки к работе** выберите значение **Автоматически**.

    ![Снимок экрана: для параметра "Режим подготовки к работе" задано значение "Автоматически".](common/provisioning-automatic.png)

1. В разделе **учетные данные администратора** в поле введите **URL-адрес клиента** введите `https://sso.grammarly.com/scim/v2` , а в поле **секретный токен** введите маркер, предоставленный в грамматике (см. шаг 2 выше). Нажмите кнопку **проверить подключение** , чтобы убедиться, что Azure AD может подключаться к грамматике. Если подключение не выполняется, убедитесь, что у учетной записи грамматики есть разрешения администратора, и повторите попытку.

    ![Снимок экрана, на котором показаны поля URL-адреса клиента и секретного токена.](common/provisioning-testconnection-tenanturltoken.png)

1. В поле **Почтовое уведомление** введите адрес электронной почты пользователя или группы, которые должны получать уведомления об ошибках подготовки. Установите флажок **Отправить уведомление по электронной почте при сбое**.

    ![Снимок экрана, на котором показано поле "Почтовое уведомление".](common/provisioning-notification-email.png)

1. Нажмите кнопку **Сохранить**.

1. В разделе **сопоставления** выберите **синхронизировать Azure Active Directory пользователей с грамматикой**.

1. Изучите пользовательские атрибуты, которые синхронизированы из Azure AD, в грамматике в разделе " **сопоставление атрибутов** ". Атрибуты, выбранные как свойства **Matching** , используются для сравнения учетных записей пользователей в грамматике для операций обновления. При изменении [соответствующего целевого атрибута](../app-provisioning/customize-application-attributes.md)необходимо убедиться, что грамматика API поддерживает фильтрацию пользователей на основе этого атрибута. Чтобы зафиксировать изменения, щелкните **Сохранить**.

   |attribute|Тип|Поддерживается для фильтрации|
   |---|---|---|
   |userName|Строка|&check;|
   |externalId|Строка|
   |active|Логическое|
   |displayName|Строка|
   |emails[type eq "work"].value|Строка|


1. Инструкции по настройке фильтров области см. в инструкциях, приведенных в [руководстве по фильтрам области](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).

1. Чтобы включить службу подготовки Azure AD для грамматики, измените значение параметра **состояние подготовки** на **включено** в разделе **Параметры** .

    ![Снимок экрана, на котором показано состояние подготовки "Включено".](common/provisioning-toggle-on.png)

1. Определите пользователей или группы, которые нужно сделать для грамматики, выбрав нужные значения в **области** в разделе **Параметры** .

    ![Снимок экрана, на котором показана область подготовки.](common/provisioning-scope.png)

1. Когда будете готовы выполнить подготовку, нажмите кнопку **Сохранить**.

    ![Снимок экрана, на котором показана кнопка "Сохранить".](common/provisioning-configuration-save.png)

После этого начнется цикл начальной синхронизации всех пользователей и групп, определенных в поле **Область** в разделе **Параметры**. Выполнение начального цикла занимает больше времени, чем последующие циклы, что происходит примерно каждые 40 минут, пока выполняется служба подготовки Azure AD.

## <a name="step-6-monitor-your-deployment"></a>Шаг 6. Мониторинг развертывания

Завершив настройку подготовки, используйте следующие ресурсы для мониторинга развертывания:

* Используйте [журналы подготовки](../reports-monitoring/concept-provisioning-logs.md) , чтобы определить, какие пользователи были подготовлены успешно или неудачно.
* Используйте [индикатор выполнения](../app-provisioning/application-provisioning-when-will-provisioning-finish-specific-user.md), чтобы узнать состояние цикла подготовки и близость его завершения.
* Если конфигурация подготовки, вероятно, находится в неработоспособном состоянии, приложение перейдет в карантин. Дополнительные сведения о состояниях карантина см. в разделе [состояние подготовки приложений в карантине](../app-provisioning/application-provisioning-quarantine-status.md).

## <a name="additional-resources"></a>Дополнительные ресурсы

* [Управление подготовкой учетных записей пользователей для корпоративных приложений](../app-provisioning/configure-automatic-user-provisioning-portal.md)
* [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](../manage-apps/what-is-single-sign-on.md)

## <a name="next-steps"></a>Дальнейшие действия

* [Сведения о просмотре журналов и получении отчетов о действиях по подготовке](../app-provisioning/check-status-user-account-provisioning.md)
