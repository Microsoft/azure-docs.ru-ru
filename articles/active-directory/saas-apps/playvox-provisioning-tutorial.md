---
title: Руководство. Настройка Плайвокс для автоматической подготовки пользователей с помощью Azure Active Directory | Документация Майкрософт
description: Узнайте, как автоматически подготавливать и отзывать учетные записи пользователей из Azure AD в Плайвокс.
services: active-directory
documentationcenter: ''
author: Zhchia
writer: Zhchia
manager: beatrizd
ms.assetid: c31c20ab-f6cd-40e1-90ad-fa253ecbc0f8
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 11/18/2020
ms.author: Zhchia
ms.openlocfilehash: 3c7efca5e052c2d0680aa7ca3e1b6d27bfdd7d11
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96862485"
---
# <a name="tutorial-configure-playvox-for-automatic-user-provisioning"></a>Учебник. Настройка Плайвокс для автоматической подготовки пользователей

В этом руководстве описываются действия, которые необходимо выполнить в Плайвокс и Azure Active Directory (Azure AD) для настройки автоматической подготовки пользователей. После настройки Azure AD автоматически подготавливает и отменяет подготовку пользователей или групп для [плайвокс](https://www.playvox.com) с помощью службы подготовки Azure AD. Важные сведения о том, что делает эта служба и как она работает, а также о часто задаваемых вопросах см. [в статье Автоматизация подготовки пользователей и ее отмены в приложениях SaaS с помощью Azure Active Directory](../app-provisioning/user-provisioning.md).

## <a name="capabilities-supported"></a>Поддерживаемые возможности
> [!div class="checklist"]
> * Создание пользователей в Плайвокс.
> * Удалите пользователей в Плайвокс, когда им больше не нужен доступ.
> * Обеспечьте синхронизацию атрибутов пользователей между Azure AD и Плайвокс.

## <a name="prerequisites"></a>Предварительные условия

В этом руководстве предполагается, что у вас уже есть следующие необходимые компоненты.

* [Клиент Azure AD.](../develop/quickstart-create-new-tenant.md)
* Учетная запись пользователя в Azure AD с [разрешением](../roles/permissions-reference.md) на настройку подготовки. Например, учетной записи может быть назначен администратор приложения, администратор облачных приложений, владелец приложения или роль глобального администратора.
* Учетная запись пользователя в [плайвокс](https://www.playvox.com) с разрешениями Super admin.

## <a name="step-1-plan-your-provisioning-deployment"></a>Шаг 1. Планирование развертывания для подготовки

1. Узнайте [, как работает служба подготовки](../app-provisioning/user-provisioning.md).

2. Определите, кто будет находиться [в области подготовки](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).

3. Определите, какие данные должны [сопоставляться между Azure AD и плайвокс](../app-provisioning/customize-application-attributes.md).

## <a name="step-2-configure-playvox-to-support-provisioning-by-using-azure-ad"></a>Шаг 2. Настройка Плайвокс для поддержки подготовки с помощью Azure AD

1. Войдите в консоль администрирования Плайвокс и последовательно выберите **параметры > ключи API**.

2. Выберите **создать ключ API**.

    ![Частичный снимок экрана, показывающий расположение кнопки создания ключа API в пользовательском интерфейсе Плайвокс.](media/playvox-provisioning-tutorial/create.png)

3. Введите понятное имя для ключа API, а затем нажмите кнопку **сохранить**. После создания ключа API нажмите кнопку **Закрыть**.

4. В созданном ключе API щелкните значок **сведений** .

    ![Частичный снимок экрана, показывающий расположение значка сведений, который представляет собой увеличительное стекло, в пользовательском интерфейсе Плайвокс.](media/playvox-provisioning-tutorial/api.png)

5. Скопируйте и сохраните значение **ключа Base64** . Позже в портал Azure это значение будет введено в текстовое поле **секретный токен** на вкладке **Подготовка** приложения плайвокс.

    ![Снимок экрана окна сообщения ключа API сведений с выделенным значением ключа BASE64.](media/playvox-provisioning-tutorial/token.png)

## <a name="step-3-add-playvox-from-the-azure-ad-application-gallery"></a>Шаг 3. Добавление Плайвокс из коллекции приложений Azure AD

Чтобы начать управление подготовкой к Плайвокс, добавьте Плайвокс в клиент Azure AD из коллекции приложений. Дополнительные сведения см. в разделе [Краткое руководство. Добавление приложения в клиент Azure Active Directory (Azure AD)](../manage-apps/add-application-portal.md).

Если вы ранее настроили Плайвокс для единого входа (SSO), можно использовать то же приложение. Однако при первоначальном тестировании интеграции рекомендуется создать отдельное приложение.

## <a name="step-4-define-who-will-be-in-scope-for-provisioning"></a>Шаг 4. Определение пользователей для включения в область подготовки

Служба подготовки Azure AD используется для определения области, которая будет подготовлена в зависимости от назначения приложения или атрибутов пользователя или группы. Сведения о том, кто будет подготовлен для приложения на основе назначения, см. [в разделе Управление назначением пользователей для приложения в Azure Active Directory](../manage-apps/assign-user-or-group-access-portal.md) , чтобы узнать, как назначить пользователей или группы приложению. Чтобы определить, кто будет подготовлен на основе только атрибутов пользователя или группы, используйте фильтр области, как описано в разделе [Подготовка приложений на основе атрибутов с помощью фильтров области](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).

Помните следующие моменты:

* При назначении пользователей в Плайвокс необходимо выбрать роль, отличную от доступа по умолчанию. Пользователи с ролью "Доступ по умолчанию" исключаются из подготовки и будут помечены в журналах подготовки как не назначенные явно. Если доступ по умолчанию является единственной ролью, доступной в приложении, можно [обновить манифест приложения](../develop/howto-add-app-roles-in-azure-ad-apps.md) , чтобы добавить другие роли.

* Начните с малого. Протестируйте небольшое количество пользователей или групп, прежде чем выполнять развертывание для всех. Если область подготовки основана на назначенных пользователях или группах, размер набора можно контролировать, назначая приложению только одного или двух пользователей или групп. Если область подготовки включает в себя всех пользователей и группы, можно указать [Фильтр области на основе атрибутов](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md) , чтобы ограничить размер набора тестов.

## <a name="step-5-configure-automatic-user-provisioning-to-playvox"></a>Шаг 5. Настройка автоматической подготовки пользователей в Плайвокс

В этом разделе описано, как настроить службу подготовки Azure AD для создания, обновления и отключения пользователей или групп в зависимости от назначения пользователей или групп в Azure AD.

Чтобы настроить автоматическую подготовку учетных записей пользователей для Плайвокс в Azure AD, сделайте следующее:

1. Войдите на [портал Azure](https://portal.azure.com). Перейдите в колонку **Корпоративные приложения** и выберите **Все приложения**.

    ![Частичный снимок экрана портал Azure с выделенными корпоративными приложениями и элементами всех приложений](common/enterprise-applications.png)

2. В списке приложений найдите и выберите **плайвокс**.

    ![Частичный снимок экрана списка приложений с выделенным полем поиска приложения.](common/all-applications.png)

3. Выберите вкладку **Подготовка**.

    ![Частичный снимок экрана, показывающий элемент меню подготовки.](common/provisioning.png)

4. Для параметра **Режим подготовки к работе** выберите значение **Automatic** (Автоматически).

    ![Частичный снимок экрана вкладки "подготовка" с параметром "автоматически", выбранным в раскрывающемся списке "режим подготовки".](common/provisioning-automatic.png)

5. В разделе **учетные данные администратора** введите **URL-адрес клиента** плайвокс в виде:

    `https://{tenant}.playvox.com/scim/v1`

    Введите **секретный токен** , скопированный ранее на шаге 2. Затем выберите **проверить подключение** , чтобы убедиться, что Azure AD может подключиться к плайвокс. В случае сбоя подключения убедитесь, что у учетной записи Плайвокс есть права администратора, и повторите попытку.

    ![Частичный снимок экрана, показывающий раздел учетных данных администратора, включая текстовые поля URL-адреса клиента и секретного маркера, а также с выделенным каналом проверки соединения.](common/provisioning-testconnection-tenanturltoken.png)

6. В текстовом поле **уведомление по электронной почте** введите адрес электронной почты пользователя или группы, которые будут получать уведомления об ошибках подготовки. Установите флажок **Отправить уведомление по электронной почте при сбое**.

    ![Частичный снимок экрана, показывающий текстовое поле уведомления по электронной почте и флажок уведомления по электронной почте.](common/provisioning-notification-email.png)

7. Щелкните **Сохранить**.

8. В разделе **сопоставления** выберите **синхронизировать Azure Active Directory пользователей с плайвокс**.

9. Проверьте атрибуты пользователя, которые синхронизированы из Azure AD в Плайвокс в разделе " **сопоставление атрибутов** ". Атрибуты, выбранные как свойства **Matching** , используются для сопоставления учетных записей пользователей в плайвокс для операций обновления. Если вы решили изменить [соответствующий целевой атрибут](../app-provisioning/customize-application-attributes.md), убедитесь, что API плайвокс поддерживает фильтрацию пользователей на основе этого атрибута. Чтобы зафиксировать изменения, щелкните **Сохранить**.

   |attribute|Тип|Поддерживается для фильтрации|
   |---|---|---|
   |userName|Строка|&check;|
   |active|Логическое|
   |displayName|Строка|
   |emails[type eq "work"].value|Строка|
   |name.givenName|Строка|
   |name.familyName|Строка|
   |name.formatted|Строка|
   |externalId|Строка|

10. Чтобы настроить фильтры области, ознакомьтесь с инструкциями в [этом учебнике](../app-provisioning/define-conditional-rules-for-provisioning-user-accounts.md).

11. Чтобы включить службу подготовки Azure AD для Плайвокс, измените значение параметра **состояние подготовки** на **включено** в разделе **Параметры** .

    ![Частичный снимок экрана раздела параметров, в котором отображается состояние подготовки, установленное в значение ON.](common/provisioning-toggle-on.png)

12. По-прежнему в **параметрах**, определите пользователей или группы, которые будут подготавливаться к плайвокс, выбрав нужные значения в **области**.

    ![Частичный снимок экрана раздела "Параметры" с раскрывающимся списком "область".](common/provisioning-scope.png)

13. Когда будете готовы выполнить подготовку, нажмите кнопку **Сохранить**.

    ![Частичный снимок экрана, демонстрирующий параметры сохранения и удаления.](common/provisioning-configuration-save.png)

После этого начнется цикл начальной синхронизации всех пользователей и групп, определенных в поле **Область** в разделе **Параметры**. Начальный цикл занимает больше времени, чем последующие циклы. Последующие циклы выполняются примерно каждые 40 минут при условии, что служба подготовки Azure AD запущена.

## <a name="step-6-monitor-your-deployment"></a>Шаг 6. Мониторинг развертывания

Завершив настройку подготовки, используйте следующие ресурсы для мониторинга развертывания:

* Используйте [журналы подготовки](../reports-monitoring/concept-provisioning-logs.md), чтобы определить, какие пользователи были подготовлены успешно или неудачно.
* Используйте [индикатор выполнения](../app-provisioning/application-provisioning-when-will-provisioning-finish-specific-user.md), чтобы узнать состояние цикла подготовки и близость его завершения.
* Если конфигурация подготовки, вероятно, находится в неработоспособном состоянии, приложение перейдет в карантин. Дополнительные сведения о состояниях карантина см. в статье [Состояние подготовки приложений в карантине](../app-provisioning/application-provisioning-quarantine-status.md).

## <a name="additional-resources"></a>Дополнительные ресурсы

* [Управление подготовкой учетных записей пользователей для корпоративных приложений](../app-provisioning/configure-automatic-user-provisioning-portal.md)
* [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](../manage-apps/what-is-single-sign-on.md)

## <a name="next-steps"></a>Дальнейшие действия

* [Сведения о просмотре журналов и получении отчетов о действиях по подготовке](../app-provisioning/check-status-user-account-provisioning.md)