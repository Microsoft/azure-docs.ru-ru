---
title: Руководство по настройке входящей подготовки SuccessFactors в Azure Active Directory | Документация Майкрософт
description: Сведения о настройке входящей подготовки из SuccessFactors в Azure AD.
services: active-directory
author: cmmdesai
manager: CelesteDG
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.topic: tutorial
ms.workload: identity
ms.date: 01/19/2021
ms.author: chmutali
ms.openlocfilehash: a39f7701d0244eff7f914908a6708dfc14873b35
ms.sourcegitcommit: 4e70fd4028ff44a676f698229cb6a3d555439014
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/28/2021
ms.locfileid: "98954862"
---
# <a name="tutorial-configure-sap-successfactors-to-azure-ad-user-provisioning"></a>Руководство по настройке SAP SuccessFactors для подготовки пользователей Azure AD
В этом учебнике описаны действия, необходимые для выполнения подготовки данных работников из SuccessFactors Employee Central в Azure Active Directory с необязательной обратной записью электронного адреса в SuccessFactors. 

>[!NOTE]
>Используйте этот учебник, если вам необходимо подготовить из SuccessFactors только облачных пользователей, которым не требуется локальная учетная запись AD. Если пользователям требуется лишь локальная учетная запись AD или учетные записи AD и Azure AD, ознакомьтесь с учебником по [настройке подготовки пользователей SAP SuccessFactors в Active Directory](sap-successfactors-inbound-provisioning-tutorial.md#overview). 

## <a name="overview"></a>Обзор

[Служба подготовки пользователей Azure Active Directory](../app-provisioning/user-provisioning.md) интегрируется с [SuccessFactors Employee Central](https://www.successfactors.com/products-services/core-hr-payroll/employee-central.html) для управления жизненным циклом удостоверений пользователей. 

Рабочие процессы подготовки пользователей SuccessFactors, поддерживаемые службой подготовки пользователей Azure AD, позволяют автоматизировать указанные ниже сценарии управления персоналом и жизненным циклом удостоверений.

* **Наем новых сотрудников.** При добавлении нового сотрудника в SuccessFactors учетная запись пользователя автоматически создается в Azure Active Directory и при необходимости в Microsoft 365, а также в [других приложениях SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md), с обратной записью адреса электронной почты в SuccessFactors.

* **Обновления атрибута и профиля сотрудника**. При обновлении записи сотрудника в SuccessFactors (например, имени, должности или руководителя) его учетная запись пользователя будет автоматически обновлена в Azure Active Directory, Microsoft 365 (при необходимости) и [других приложениях SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md).

* **Увольнение сотрудников**. При увольнении сотрудника в SuccessFactors его учетная запись пользователя будет автоматически отключена в Azure Active Directory, Microsoft 365 (при необходимости) и [других приложениях SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md).

* **Повторный наем сотрудника**. При повторном найме сотрудника в SuccessFactors его старая учетная запись может быть автоматически повторно активирована или подготовлена (в зависимости от вашего желания) в Azure Active Directory, Microsoft 365 (при необходимости) и [других приложениях SaaS, поддерживаемых Azure AD](../app-provisioning/user-provisioning.md).

### <a name="who-is-this-user-provisioning-solution-best-suited-for"></a>Кому это решение подготовки пользователей подходит лучше всего?

Это решение подготовки пользователей из SuccessFactors в Azure Active Directory идеально подходит для:

* организаций, которым необходимо готовое облачное решение для подготовки пользователей в SuccessFactors;

* организаций, которым требуется прямая подготовка пользователей из SuccessFactors в Azure Active Directory;

* организаций, которые выполняют подготовку пользователей на основе данных, полученных из [SuccessFactors Employee Central (EC)](https://www.successfactors.com/products-services/core-hr-payroll/employee-central.html);

* организаций, использующих Microsoft 365 для электронной почты.

## <a name="solution-architecture"></a>Архитектура решения

В этом разделе описывается архитектура полноценного решения для подготовки только облачных пользователей. Имеется два связанных потока:

* **Доверенный поток данных управления персоналом SuccessFactors в Azure Active Directory.** В этом потоке связанные с работниками события (например, наем, перевод и увольнение) сначала происходят в облачной системе SuccessFactors Employee Central, а затем данные событий передаются в Azure Active Directory. В зависимости от события, это может приводить к выполнению операций создания, обновления, включения или отключения в Azure AD.
* **Поток обратной записи электронной почты: из локальной службы Active Directory в SuccessFactors.** После завершения создания учетной записи в Azure Active Directory значение атрибута электронной почты или имя участника-пользователя, созданное в Azure AD, можно записать обратно в SuccessFactors.

  ![Обзор](./media/sap-successfactors-inbound-provisioning/sf2aad-overview.png)

### <a name="end-to-end-user-data-flow"></a>Полноценный поток данных пользователей

1. Команда по управлению персоналом выполняет транзакции с работниками (присоединение, перемещение и удаление или наем, перевод и увольнение) в SuccessFactors Employee Central.
2. Служба подготовки Azure AD выполняет плановую синхронизацию удостоверений из SuccessFactors EC и определяет изменения, которые необходимо обработать для синхронизации с локальной службой Active Directory.
3. Служба подготовки Azure AD определяет изменение и вызывает операцию создания, обновления, включения или отключения для пользователя в Azure AD.
4. Если настроено приложение [обратной записи в SuccessFactors](sap-successfactors-writeback-tutorial.md), адрес электронной почты пользователя будет извлекаться из Azure AD. 
5. Служба подготовки Azure AD записывает обратно атрибут электронной почты в SuccessFactors на основе используемого атрибута сопоставления.

## <a name="planning-your-deployment"></a>Планирование развертывания

Для настройки подготовки пользователей с помощью системы управления персоналом в облаке из SuccessFactors в Azure AD требуется основательное планирование, охватывающее следующие аспекты:

* определение идентификатора сопоставления; 
* Сопоставление атрибутов
* преобразование атрибутов; 
* Фильтры области

Подробные рекомендации по этим темам см. в [плане развертывания облачных служб управления персоналом](../app-provisioning/plan-cloud-hr-provision.md). Сведения о поддерживаемых сущностях, обработке и настройке интеграции для различных сценариев управления персоналом см. в [Справочнике по интеграции SAP SuccessFactors](../app-provisioning/sap-successfactors-integration-reference.md). 

## <a name="configuring-successfactors-for-the-integration"></a>Настройка SuccessFactors для интеграции

Общим требованием для всех соединителей подготовки SuccessFactors являются учетные данные SuccessFactors с соответствующими разрешениями для вызова API-интерфейсов SuccessFactors OData. В этом разделе описана процедура создания учетной записи службы в SuccessFactors и предоставления соответствующих разрешений. 

* [Создание или определение учетной записи пользователя API в SuccessFactors](#createidentify-api-user-account-in-successfactors)
* [Создание роли разрешений для API](#create-an-api-permissions-role)
* [Создание группы разрешений для пользователя API](#create-a-permission-group-for-the-api-user)
* [Предоставление роли разрешений группе разрешений](#grant-permission-role-to-the-permission-group)

### <a name="createidentify-api-user-account-in-successfactors"></a>Создание или определение учетной записи пользователя API в SuccessFactors
Совместно с группой администраторов или партнером по внедрению SuccessFactors создайте или укажите в SuccessFactors учетную запись пользователя, которая будет использоваться для вызова API-интерфейсов OData. При настройке приложений подготовки в Azure AD потребуются имя пользователя и пароль этой учетной записи. 

### <a name="create-an-api-permissions-role"></a>Создание роли разрешений для API

1. Войдите в SAP SuccessFactors с учетной записью пользователя, имеющего доступ к центру администрирования.
1. Введите в строке поиска *Manage Permission Roles* (Управление ролями разрешений), а затем среди результатов поиска выберите **Manage Permission Roles** (Управление ролями разрешений).
  ![Управление ролями разрешений](./media/sap-successfactors-inbound-provisioning/manage-permission-roles.png)
1. В списке ролей разрешений щелкните **Create New** (Создать).
    > [!div class="mx-imgBorder"]
    > ![Создание роли разрешения](./media/sap-successfactors-inbound-provisioning/create-new-permission-role-1.png)
1. Заполните поля **Role Name** (Имя роли) и **Description** (Описание) для новой роли разрешений. Имя и описание должны указывать на то, что роль предназначена для разрешений на использование API.
    > [!div class="mx-imgBorder"]
    > ![Сведения о роли разрешений](./media/sap-successfactors-inbound-provisioning/permission-role-detail.png)
1. В разделе Permission settings (Параметры разрешений) щелкните **Permission...** (Разрешение...), затем прокрутите список разрешений вниз и щелкните **Manage Integration Tools** (Управление инструментами интеграции). Установите флажок **Allow Admin to Access to OData API through Basic Authentication** (Разрешить администратору доступ к API-интерфейсу OData с использованием обычной проверки подлинности).
    > [!div class="mx-imgBorder"]
    > ![Раздел Manage integration tools (Управление инструментами интеграции)](./media/sap-successfactors-inbound-provisioning/manage-integration-tools.png)
1. Прокрутите вниз в том же поле и выберите **Employee Central API** (API-интерфейс Employee Central). Добавьте разрешения на чтение и изменение с помощью API-интерфейса OData, как показано ниже. Параметр изменения следует выбирать, если вы планируете использовать ту же учетную запись и для сценария обратной записи в SuccessFactors. 
    > [!div class="mx-imgBorder"]
    > ![Разрешения на чтение и запись](./media/sap-successfactors-inbound-provisioning/odata-read-write-perm.png)

1. В том же окне разрешений перейдите к пункту **User Permissions -> Employee Data** (Разрешения пользователей -> Данные о сотрудниках) и проверьте атрибуты, которые учетная запись службы может считывать из клиента SuccessFactors. Например, чтобы получить из SuccessFactors атрибут *Username* (Имя пользователя), убедитесь, что для этого атрибута предоставлено разрешение View (Просмотр). Аналогичным образом проверьте каждый атрибут для разрешения на просмотр. 

    > [!div class="mx-imgBorder"]
    > ![Разрешения на данные сотрудников](./media/sap-successfactors-inbound-provisioning/review-employee-data-permissions.png)
   

    >[!NOTE]
    >Полный список атрибутов, полученных этим приложением подготовки, см. в [справочнике по атрибутам SuccessFactors](../app-provisioning/sap-successfactors-attribute-reference.md).

1. Нажмите кнопку **Готово**. Щелкните **Сохранить изменения**.

### <a name="create-a-permission-group-for-the-api-user"></a>Создание группы разрешений для пользователя API

1. В центре администрирования SuccessFactors в строке поиска введите *Manage Permission Groups* (Управление группами разрешений), а затем среди результатов поиска выберите **Manage Permission Groups** (Управление группами разрешений).
    > [!div class="mx-imgBorder"]
    > ![Пункт Manage permission groups (Управление группами разрешений)](./media/sap-successfactors-inbound-provisioning/manage-permission-groups.png)
1. В окне Manage permission groups (Управление группами разрешений) щелкните **Create New** (Создать).
    > [!div class="mx-imgBorder"]
    > ![Добавление новой группы](./media/sap-successfactors-inbound-provisioning/create-new-group.png)
1. Добавьте имя новой группы в поле Group Name (Имя группы). Это имя должно указывать на то, что группа предназначена для пользователей API.
    > [!div class="mx-imgBorder"]
    > ![Имя группы разрешений](./media/sap-successfactors-inbound-provisioning/permission-group-name.png)
1. Добавьте членов в группу. Например, в раскрывающемся меню People Pool (Пул пользователей) можно выбрать **Username** (Имя пользователя), а затем ввести имя пользователя учетной записи API, которая будет использоваться для интеграции. 
    > [!div class="mx-imgBorder"]
    > ![Добавление членов группы](./media/sap-successfactors-inbound-provisioning/add-group-members.png)
1. Щелкните **Done** (Готово), чтобы завершить создание группы разрешений.

### <a name="grant-permission-role-to-the-permission-group"></a>Предоставление роли разрешений группе разрешений

1. В центре администрирования SuccessFactors в строке поиска введите *Manage Permission Roles* (Управление ролями разрешений), а затем среди результатов поиска выберите **Manage Permission Roles** (Управление ролями разрешений).
1. В разделе **Permission Role List** (Список ролей разрешений) выберите роль, созданную для разрешений на использование API.
1. В разделе **Grant this role to...** (Предоставить эту роль...) нажмите кнопку **Add...** (Добавить...).
1. В раскрывающемся меню выберите **Permission Group...** (Группа разрешений...), а затем щелкните **Select...** (Выбрать...), чтобы открыть окно Groups (Группы) для поиска и выбора созданной ранее группы. 
    > [!div class="mx-imgBorder"]
    > ![Добавление группы разрешений](./media/sap-successfactors-inbound-provisioning/add-permission-group.png)
1. Просмотрите роль разрешений, предоставленную группе разрешений. 
    > [!div class="mx-imgBorder"]
    > ![Сведения о роли и группе разрешений](./media/sap-successfactors-inbound-provisioning/permission-role-group.png)
1. Щелкните **Сохранить изменения**.

## <a name="configuring-user-provisioning-from-successfactors-to-azure-ad"></a>Настройка подготовки пользователей из SAP SuccessFactors в Azure AD

В этом разделе описаны действия по подготовке учетной записи пользователя из SuccessFactors в Azure AD.

* [Добавление приложения соединителя подготовки и настройка возможности подключения к SuccessFactors](#part-1-add-the-provisioning-connector-app-and-configure-connectivity-to-successfactors)
* [Настройка сопоставлений атрибутов](#part-2-configure-attribute-mappings)
* [Включение и запуск подготовки пользователей](#enable-and-launch-user-provisioning)

### <a name="part-1-add-the-provisioning-connector-app-and-configure-connectivity-to-successfactors"></a>Часть 1. Добавление приложения соединителя подготовки и настройка возможности подключения к SuccessFactors

**Чтобы настроить SuccessFactors для подготовки пользователей Azure AD, сделайте следующее:**

1. Перейдите на страницу <https://portal.azure.com>.

2. В области навигации слева выберите **Azure Active Directory**.

3. Щелкните **Корпоративные приложения**, а затем — **Все приложения**.

4. Выберите **Добавить приложение** и выберите категорию **Все**.

5. Найдите **SuccessFactors to Azure Active Directory User Provisioning** (Подготовка пользователей SuccessFactors в Azure Active Directory) и добавьте это приложение из коллекции.

6. После добавления приложения и отображения экрана сведений о приложений выберите **Подготовка**.

7. Для параметра **Режим** **подготовки к работе** выберите значение **Авто**.

8. В разделе **Учетные данные администратора** заполните поля следующим образом.

   * **Имя пользователя администратора**. Введите имя пользователя учетной записи API SuccessFactors, добавив к нему идентификатор компании. Формат: **имя_пользователя\@идентификатор_компании**.

   * **Пароль администратора**. Введите пароль учетной записи пользователя API SuccessFactors. 

   * **URL-адрес клиента**. Введите имя конечной точки служб API-интерфейса OData для SuccessFactors. Вводить следует только имя узла сервера без http или https. Это значение должно выглядеть так: **api-server-name.successfactors.com**.

   * **Адрес электронной почты для уведомлений —** введите адрес электронной почты и установите флажок "send email if failure occurs" (Отправлять по электронной почте в случае сбоя).
    > [!NOTE]
    > Служба подготовки Azure AD отправляет уведомление по электронной почте, если задание подготовки переходит в состояние [Карантин](../app-provisioning/application-provisioning-quarantine-status.md).

   * Нажмите кнопку **Проверить подключение**. Если проверка подключения выполнена успешно, нажмите кнопку **Сохранить** в верхней части. В случае неудачи дополнительно проверьте правильность учетных данных и URL-адреса SuccessFactors.
    >[!div class="mx-imgBorder"]
    >![Портал Azure](./media/sap-successfactors-inbound-provisioning/sf2aad-provisioning-creds.png)

   * После успешного сохранения учетных данных в разделе **Сопоставления** отобразится сопоставление по умолчанию **Synchronize SuccessFactors Users to Azure Active Directory** (Синхронизировать пользователей SuccessFactors с Azure Active Directory).

### <a name="part-2-configure-attribute-mappings"></a>Часть 2. Настройка сопоставлений атрибутов

В этом разделе описана настройка потоков данных пользователя из SuccessFactors в Active Directory.

1. На вкладке "Подготовка" в разделе **Сопоставления** щелкните **Synchronize Azure Active Directory Users to Workday** (Синхронизировать пользователей Azure Active Directory с SuccessFactors).

1. В поле **Область исходного объекта** можно выбрать, какие наборы пользователей в SuccessFactors должны учитываться при подготовке в Azure AD, определив набор фильтров на основе атрибутов. Область по умолчанию — "все пользователи в SuccessFactors". Примеры фильтров

   * Пример Охват пользователей с personIdExternal в диапазоне от 1000000 до 2000000 (не включая 2000000)

      * Атрибут: personIdExternal

      * Оператор: REGEX MATCH.

      * Значение: (1[0–9][0–9][0–9][0–9][0–9][0–9]).

   * Пример Только сотрудники, а не временные работники.

      * Атрибут: EmployeeID

      * Оператор: IS NOT NULL.

   > [!TIP]
   > При первой настройке приложения подготовки необходимо проверить сопоставления атрибутов и выражения, чтобы получить желаемый результат. Корпорация Майкрософт рекомендует использовать фильтры области в разделе **Область исходного объекта** для проверки сопоставлений с несколькими тестовыми пользователями из SuccessFactors. После проверки работоспособности сопоставлений можно либо удалить фильтр, либо постепенно расширять его, добавляя больше пользователей.

   > [!CAUTION] 
   > Поведение по умолчанию обработчика подготовки заключается в том, чтобы отключить или удалить неподходящих пользователей. Это может быть нежелательно в случае интеграции SuccessFactors с Azure AD. Сведения о том, как переопределить такое поведение по умолчанию, см. в статье [Пропустить удаление учетных записей неподходящих пользователей](../app-provisioning/skip-out-of-scope-deletions.md).
  
1. В поле **Действия с целевыми объектами** можно в глобальном масштабе отфильтровать, какие действия доступны для выполнения в Active Directory. Самыми распространенными являются **создание** и **обновление**.

1. В разделе **Сопоставление атрибутов** можно определить, как отдельные атрибуты SuccessFactors сопоставляются с атрибутами Active Directory.

     >[!NOTE]
     >Полный список атрибутов SuccessFactors, поддерживаемых приложением, см. в [справочнике по атрибутам SuccessFactors](../app-provisioning/sap-successfactors-attribute-reference.md).

1. Щелкните существующее сопоставление атрибута, чтобы его обновить, или **Добавить новое сопоставление** в нижней части экрана, чтобы добавить новые сопоставления. Отдельное сопоставление атрибутов поддерживает следующие свойства:

      * **Тип сопоставления**

         * **Прямое** — записывает значение атрибута SuccessFactors в атрибут AD без изменений.

         * **Константа** — записывает статическое постоянное строковое значение в атрибут AD.

         * **Выражение** — позволяет записывать пользовательское значение в атрибут AD на основании одного или нескольких атрибутов SuccessFactors. [Дополнительные сведения см. в статье о выражениях](../app-provisioning/functions-for-customizing-application-data.md).

      * **Исходный атрибут** — атрибут пользователя из SuccessFactors.

      * **Значение по умолчанию** — необязательно. Если исходный атрибут имеет пустое значение, сопоставление запишет это значение.
            В наиболее распространенной конфигурации это поле остается пустым.

      * **Целевой атрибут** — атрибут пользователя в Active Directory.

      * **Сопоставление объектов с помощью этого атрибута** — должно ли это сопоставление использоваться для уникальной идентификации пользователей между SuccessFactors и Active Directory. Как правило, значение задается в поле идентификатора работника для SuccessFactors, который обычно сопоставляется с одним из атрибутов идентификатора сотрудника в Active Directory.

      * **Приоритет сопоставления** — возможность указания нескольких атрибутов сопоставления. При указании нескольких атрибутов сопоставления они вычисляются в порядке, заданном в этом поле. Как только соответствие найдено, дальнейшие атрибуты сопоставления не вычисляются.

      * **Применить это сопоставление**

         * **Всегда** — применить это сопоставление как при создании, так и при обновлении пользователей

         * **Только при создании** — применить это сопоставление только при создании пользователей

1. Чтобы сохранить сопоставления, щелкните **Сохранить** в верхней части раздела "Сопоставление атрибутов".

После завершения настройки сопоставления атрибутов [можно включить и запустить службу подготовки пользователей](#enable-and-launch-user-provisioning).

## <a name="enable-and-launch-user-provisioning"></a>Включение и запуск подготовки пользователей

После завершения настройки приложения подготовки SuccessFactors можно включить службу подготовки на портале Azure.

> [!TIP]
> По умолчанию при включении службы подготовки она инициализирует операции подготовки для всех пользователей в области. При наличии ошибок в сопоставлении или проблем с данными Workday задание подготовки может завершиться ошибкой и перейти в состояние карантина. Чтобы избежать этого, рекомендуется настроить фильтр **Область исходного объекта** и протестировать сопоставления атрибутов с несколькими тестовыми пользователями перед запуском полной синхронизации всех пользователей. После проверки работоспособности сопоставлений и получения желаемых результатов можно либо удалить фильтр, либо постепенно расширять его, добавляя больше пользователей.

1. На вкладке **Подготовка** установите для параметра **Состояние подготовки** значение **Вкл**.

2. Выберите команду **Сохранить**.

3. Будет запущена начальная синхронизация, которая может занять несколько часов в зависимости от количества пользователей в клиенте SuccessFactors. Ход выполнения цикла синхронизации можно проверить на индикаторе выполнения для отслеживания. 

4. В любой момент можно проверить вкладку **Журналы аудита** на портале Azure, чтобы узнать, какие действия выполнила служба подготовки. В журналах аудита перечислены все отдельные события синхронизации, выполняемые службой подготовки, например, какие пользователи считываются из Workday и впоследствии будут добавлены или обновлены в Active Directory. 

5. После завершения первичной синхронизации на вкладке **Подготовка** будет создан сводный отчет аудита, как показано ниже.

   > [!div class="mx-imgBorder"]
   > ![Индикатор выполнения подготовки](./media/sap-successfactors-inbound-provisioning/prov-progress-bar-stats.png)

## <a name="next-steps"></a>Дальнейшие шаги

* [Сведения о поддерживаемых атрибутах SuccessFactors для входящей подготовки](../app-provisioning/sap-successfactors-attribute-reference.md)
* [Сведения о настройке обратной записи электронной почты в SuccessFactors](sap-successfactors-writeback-tutorial.md)
* [Сведения о просмотре журналов и получении отчетов о действиях по подготовке](../app-provisioning/check-status-user-account-provisioning.md)
* [Узнайте, как настроить единый вход между SuccessFactors и Azure Active Directory](successfactors-tutorial.md)
* [Узнайте, как интегрировать другие приложения SaaS с Azure Active Directory](tutorial-list.md).
* [Узнайте, как экспортировать и импортировать конфигурации подготовки.](../app-provisioning/export-import-provisioning-configuration.md)