---
title: Руководство по Интеграция единого входа Azure Active Directory с New Relic | Документация Майкрософт
description: Узнайте, как настроить единый вход между Azure Active Directory и New Relic.
services: active-directory
author: jeevansd
manager: CelesteDG
ms.reviewer: celested
ms.service: active-directory
ms.subservice: saas-app-tutorial
ms.workload: identity
ms.topic: tutorial
ms.date: 02/04/2020
ms.author: jeedes
ms.openlocfilehash: 29e19eea51b5ee55831bf1d694a9a6473a62d471
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "97504055"
---
# <a name="tutorial-azure-active-directory-single-sign-on-sso-integration-with-new-relic"></a>Руководство по Интеграция единого входа Azure Active Directory с New Relic

Из этого учебника вы узнаете, как интегрировать New Relic с Azure Active Directory (Azure AD). Интеграция New Relic с Azure AD обеспечивает следующие возможности:

* Управление доступом к New Relic с помощью Azure AD.
* Автоматический вход пользователей в New Relic с учетными записями Azure AD.
* Централизованное управление учетными записями через портал Azure.

Дополнительные сведения об интеграции приложений SaaS с Azure AD см. в статье о [едином входе в приложения с помощью Azure Active Directory](../manage-apps/what-is-single-sign-on.md).

## <a name="prerequisites"></a>Предварительные требования

Для начала работы необходимы перечисленные ниже компоненты и данные.

* Подписка Azure AD. Если у вас нет подписки, вы можете получить [бесплатную учетную запись](https://azure.microsoft.com/free/).
* Подписка New Relic с поддержкой единого входа.

## <a name="scenario-description"></a>Описание сценария

В рамках этого руководства вы настроите и проверите единый вход Azure AD в тестовой среде.

* New Relic поддерживает единый вход, инициируемый поставщиком услуг или поставщиком удостоверений.
* После настройки New Relic можно применить функцию управления сеансами, которая защищает конфиденциальные данные вашей организации от кражи и несанкционированного доступа в режиме реального времени. Управление сеансом является расширением функции условного доступа. [Узнайте, как применять управление сеансами с помощью Microsoft Cloud App Security](/cloud-app-security/proxy-deployment-any-app).

## <a name="add-new-relic-from-the-gallery"></a>Добавление New Relic из коллекции

Чтобы настроить интеграцию New Relic с Azure AD, нужно добавить **New Relic (By Organization)** из коллекции в список управляемых приложений SaaS.

1. Войдите на [портал Azure](https://portal.azure.com) с помощью личной учетной записи Майкрософт либо рабочей или учебной учетной записи.
1. Выберите службу **Azure Active Directory**.
1. Выберите **Корпоративные приложения** > **Новое приложение**.
1. На странице **Обзор коллекции Azure AD** введите **New Relic (By Organization)** в поле поиска.
1. Выберите **New Relic (By Organization)** в списке результатов и щелкните **Создать**. Подождите несколько секунд, пока приложение не будет добавлено в ваш клиент.

## <a name="configure-and-test-azure-ad-sso-for-new-relic"></a>Настройка и проверка единого входа Azure AD для New Relic

Настройте и проверьте единый вход Azure AD в New Relic с помощью тестового пользователя **B. Simon**. Чтобы обеспечить работу единого входа, необходимо установить связь между пользователем Azure AD и соответствующим пользователем в New Relic.

Чтобы настроить и проверить единый вход Azure AD в New Relic, сделайте следующее:

1. [Настройка единого входа Azure AD](#configure-azure-ad-sso) необходима, чтобы пользователи могли использовать эту функцию.
   1. [Создание тестового пользователя Azure AD](#create-an-azure-ad-test-user) требуется для проверки работы единого входа Azure AD от имени пользователя B.Simon.
   1. [Назначение тестового пользователя Azure AD](#assign-the-azure-ad-test-user) необходимо, чтобы разрешить B.Simon использовать единый вход Azure AD.
1. [Настройка единого входа в New Relic](#configure-new-relic-sso) необходима, чтобы настроить параметры единого входа на стороне приложения New Relic.
   1. [Создание тестового пользователя New Relic](#create-a-new-relic-test-user) требуется для того, чтобы в New Relic существовал пользователь B. Simon, связанный с одноименным пользователем в Azure AD.
1. [Проверка единого входа](#test-sso) позволяет убедиться в правильности конфигурации.

## <a name="configure-azure-ad-sso"></a>Настройка единого входа Azure AD

Выполните следующие действия, чтобы включить единый вход Azure AD на портале Azure.

1. На [портале Azure](https://portal.azure.com/) на странице интеграции с приложением **New Relic By Organization** найдите раздел **Управление**. Затем выберите **Единый вход**.

1. На странице **Выбрать метод единого входа** выберите **SAML**.

1. На странице **Настройка единого входа с помощью SAML** щелкните значок карандаша, чтобы открыть диалоговое окно **Базовая конфигурация SAML** и изменить эти параметры.

   ![Снимок экрана: настройка единого входа с помощью SAML с выделенным значком карандаша.](common/edit-urls.png)

1. В разделе **Базовая конфигурация SAML** введите значения в полях **Идентификатор** и **URL-адрес ответа**.

   * Получите эти значения с помощью приложения New Relic **My Organization**. Чтобы использовать это приложение, сделайте следующее:
      1. [Войдите](https://login.newrelic.com/) в систему New Relic.
      1. В меню сверху выберите **Apps** (Приложения).
      1. В разделе **Your apps** (Ваши приложения) выберите **My Organization** (Моя организация) > **Authentication domains** (Домены проверки подлинности).
      1. Выберите домен проверки подлинности, к которому нужно подключить единый вход Azure AD (если у вас есть несколько доменов проверки подлинности). В большинстве компаний используется только один домен аутентификации с именем **Default** (По умолчанию). При наличии всего одного домена проверки подлинности ничего не нужно выбирать.
      1. В разделе **Authentication** (Аутентификация) поле **Assertion consumer URL** (URL-адрес потребителя утверждений) содержит **URL-адрес ответа**.
      1. В разделе **Authentication** (Аутентификация) поле **Our entity ID** (Наш идентификатор сущности) содержит **идентификатор**.

1. В разделе **User Attributes & Claims** (Атрибуты и утверждения пользователя) нужно сопоставить **Unique User Identifier** (Уникальный идентификатор пользователя) с полем, которое содержит адрес электронной почты, используемый для New Relic.

   * Выбранное здесь по умолчанию поле **user.userprincipalname** будет работать правильно, если именно эти значения используются в качестве адресов электронной почты для New Relic.
   * Вероятно, оптимально будет выбрать поле **user.mail**, если поле **user.userprincipalname** не используется в качестве адреса электронной почты для New Relic.

1. В разделе **SAML Signing Certificate** (Сертификат для подписи SAML) скопируйте значение **App Federation Metadata Url** (URL-адрес метаданных федерации приложения) и сохраните его для использования в дальнейшем.

1. В разделе **Set up New Relic by Organization** (Настройка New Relic by Organization) скопируйте значение **Login URL** (URL-адрес входа) и сохраните его для использования в дальнейшем.

### <a name="create-an-azure-ad-test-user"></a>Создание тестового пользователя Azure AD

Вот как можно создать тестового пользователя с именем B. Simon на портале Azure.

1. На портале Azure выберите **Azure Active Directory**.
1. Выберите **Пользователи** > **Новый пользователь**.
1. На странице **Новый пользователь** следайте следующее:
   1. В поле **Имя пользователя** введите `username@companydomain.extension`. Например, `b.simon@contoso.com`. Это значение должно совпадать с адресом электронной почты, который будет использоваться на стороне New Relic.
   1. В поле **Имя** введите `B.Simon`.  
   1. Выберите **Показать пароль**, а затем сохраните предоставленное значение.
   1. Нажмите кнопку **Создать**.

### <a name="assign-the-azure-ad-test-user"></a>Назначение тестового пользователя Azure AD

Вот как можно включить единый вход Azure AD для пользователя B. Simon, предоставив этому пользователю доступ к приложению New Relic by Organization.

1. На портале Azure выберите **Azure Active Directory**.
1. Выберите **Корпоративные приложения** > **New Relic by Organization**.
1. На странице сводных сведений о приложении откройте раздел **Управление** и выберите **Пользователи и группы**.

   ![Снимок экрана: раздел "Управление" с выделенным пунктом "Пользователи и группы".](common/users-groups-blade.png)

1. Выберите **Добавить пользователя**. В разделе **Добавление назначения** выберите **Пользователи и группы** (или просто **Пользователи**, в зависимости от уровня используемого плана).

   ![Снимок экрана: кнопка Add user (Добавить пользователя).](common/add-assign-user.png)

1. В разделе **Пользователи и группы** (или **Пользователи**) выберите **B. Simon** в списке **Пользователи**, а затем в нижней части экрана нажмите кнопку **Выбрать**.
1. В области **Добавление назначения** выберите **Назначить**.

## <a name="configure-new-relic-sso"></a>Настройка единого входа в New Relic

Чтобы настроить единый вход в New Relic, выполните следующие действия.

1. [Войдите](https://login.newrelic.com/) в систему New Relic.

1. В меню сверху выберите **Apps** (Приложения).

1. В разделе **Your apps** (Ваши приложения) выберите **My Organization** (Моя организация) > **Authentication domains** (Домены проверки подлинности).

1. Выберите домен проверки подлинности, к которому нужно подключить единый вход Azure AD (если у вас есть несколько доменов проверки подлинности). В большинстве компаний используется только один домен аутентификации с именем **Default** (По умолчанию). При наличии всего одного домена проверки подлинности ничего не нужно выбирать.

1. В разделе **Authentication** (Проверка подлинности) выберите **Configure** (Настроить).

   1. В поле **Source of SAML metadata** (Источник метаданных SAML) введите значение, полученное из поля **App Federation Metadata Url** (URL-адрес метаданных федерации приложения) для Azure AD.

   1. В поле **SSO Target URL** (Целевой URL-адрес единого входа) введите значение, полученное ранее из поля **Login URL** (URL-адрес входа) для Azure AD.

   1. Убедитесь, что все параметры в Azure AD и в New Relic введены правильно, и щелкните **Save** (Сохранить). Если настройки обеих сторон будут неправильными, пользователи не смогут войти в New Relic.

### <a name="create-a-new-relic-test-user"></a>Создание тестового пользователя New Relic

В этом разделе описано, как создать пользователя B.Simon в приложении New Relic.

1. [Войдите](https://login.newrelic.com/) в систему New Relic.

1. В меню сверху выберите **Apps** (Приложения).

1. В разделе **Your apps** (Ваши приложения) выберите **User Management** (Управление пользователями).

1. Выберите **Добавить пользователя**.

   1. Для параметра **Name** (Имя) введите значение **myVault**.
   
   1. В поле **Email** (Адрес электронной почты) введите значение, которое будет отправляться из единого входа Azure AD.
   
   1. Выберите для пользователя значения **Type** (Тип) и **Group** (Группа). Для тестового пользователя лучше выбрать тип **Basic User** (Простой пользователь) и группу **User** (Пользователь).
   
   1. Чтобы сохранить пользователя, щелкните **Add User** (Добавить пользователя).

## <a name="test-sso"></a>Проверка единого входа 

Вот как можно проверить конфигурацию единого входа Azure AD с помощью Панели доступа.

Щелкнув плитку **New Relic by Organization** на Панели доступа, вы автоматически войдете в приложение New Relic. Дополнительные сведения о Панели доступа см. в статье о [входе на портал "Мои приложения" и запуске приложений на нем](../user-help/my-apps-portal-end-user-access.md).

## <a name="additional-resources"></a>Дополнительные ресурсы

- [Руководства по интеграции приложений SaaS с Azure Active Directory](./tutorial-list.md)

- [Что такое доступ к приложениям и единый вход с помощью Azure Active Directory?](../manage-apps/what-is-single-sign-on.md)

- [Что представляет собой условный доступ в Azure Active Directory?](../conditional-access/overview.md)

- [Опробуйте New Relic с Azure AD](https://aad.portal.azure.com/)

- [Что такое управление сеансами в Microsoft Cloud App Security?](/cloud-app-security/proxy-intro-aad)
