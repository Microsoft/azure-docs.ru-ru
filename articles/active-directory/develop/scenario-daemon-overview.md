---
title: Создание управляющего приложения, вызывающего веб-API | Службы
titleSuffix: Microsoft identity platform
description: Узнайте, как создать управляющее приложение, вызывающее веб-API
services: active-directory
author: jmprieur
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: conceptual
ms.workload: identity
ms.date: 01/31/2020
ms.author: jmprieur
ms.custom: aaddev, identityplatformtop40
ms.openlocfilehash: 00a70b585ddf522a25e81703fe5bdf55efbcb7e1
ms.sourcegitcommit: 2817d7e0ab8d9354338d860de878dd6024e93c66
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/05/2021
ms.locfileid: "99582780"
---
# <a name="scenario-daemon-application-that-calls-web-apis"></a>Scenario: Создание управляющей программы, которая вызывает веб-API

Изучите все, что нужно для создания управляющего приложения, вызывающего веб-API.

## <a name="overview"></a>Обзор

Приложение может получить маркер для вызова веб-API от имени самого себя (не от имени пользователя). Этот сценарий полезен для управляющих приложений. В нем используется стандартное предоставление [учетных данных клиента](v2-oauth2-client-creds-grant-flow.md) OAuth 2.0.

![Управляющие программы](./media/scenario-daemon-app/daemon-app.svg)

Ниже приведены некоторые примеры вариантов использования для приложений управляющей программы.

- Веб-приложения, используемые для предоставления или администрирования пользователей или для пакетных процессов в каталоге
- Настольные приложения (например, службы Windows или управляющие программы на платформе Linux), выполняющие пакетные задания или службу операционной системы, выполняемую в фоновом режиме.
- Веб-API, которым требуется управлять каталогами, а не отдельными пользователями

Существует еще один распространенный случай, когда приложения, не использующие управляющие программы, используют учетные данные клиента. даже если они действуют от имени пользователей, им нужно получить доступ к веб-API или ресурсу по собственному идентификатору, чтобы получить технические причины. Примером является доступ к секретам в Azure Key Vault или базе данных SQL Azure для кэша.

Приложения, получившие маркер для собственных удостоверений:

- — Это конфиденциальные клиентские приложения. Эти приложения, учитывая, что они обращаются к ресурсам независимо от пользователей, должны доказать свою личность. Они также являются конфиденциальными приложениями. Они должны быть утверждены администраторами клиента Azure Active Directory (Azure AD).
- Зарегистрировали секрет (пароль приложения или сертификат) в Azure AD. Этот секрет передается во время вызова Azure AD для получения маркера.

## <a name="specifics"></a>Особенности

> [!IMPORTANT]
>
> - Пользователи не могут взаимодействовать с управляющим приложением. Управляющее приложение требует собственного удостоверения. Этот тип приложения запрашивает маркер доступа с помощью удостоверения приложения и предоставляет идентификатор приложения, учетные данные (пароль или сертификат) и URI идентификатора приложения в Azure AD. После успешной проверки подлинности управляющая программа получает маркер доступа (и маркер обновления) от платформы Microsoft Identity. Затем этот токен используется для вызова веб-API (и обновляется при необходимости).
> - Поскольку пользователи не могут взаимодействовать с управляющими приложениями, добавочное согласие не поддерживается. Все необходимые разрешения API должны быть настроены при регистрации приложения. Код приложения просто запрашивает статически определенные разрешения. Это также означает, что управляющие приложения не поддерживают последовательное согласие.

Для разработчиков полное руководство по этому сценарию имеет следующие особенности.

- Управляющие приложения могут работать только в клиентах Azure AD. Не имеет смысла создавать управляющее приложение, которое пытается работать с личными учетными записями Майкрософт. Если вы являетесь разработчиком бизнес-приложения, вы создадите управляющее приложение в своем клиенте. Если вы являетесь независимым поставщиком программного обеспечения, может потребоваться создать приложение управляющей программы для клиентов. Каждый администратор клиента должен предоставить согласие.
- Во время [регистрации приложения](./scenario-daemon-app-registration.md)URI ответа не требуется. Делитесь секретами или сертификатами или подписанными утверждениями с помощью Azure AD. Кроме того, необходимо запросить разрешения приложения и предоставить согласие администратора на использование этих разрешений приложения.
- При регистрации приложения в [конфигурации приложения](./scenario-daemon-app-configuration.md) необходимо предоставить учетные данные клиента совместно с Azure AD.
- [Область](scenario-daemon-acquire-token.md#scopes-to-request) , используемая для получения маркера с помощью потока учетных данных клиента, должна быть статической областью.

## <a name="recommended-reading"></a>Рекомендуемые материалы

[!INCLUDE [recommended-topics](../../../includes/active-directory-develop-scenarios-prerequisites.md)]

## <a name="next-steps"></a>Следующие шаги

Перейдите к следующей статье в этом сценарии — [Регистрация приложения](./scenario-daemon-app-registration.md).
