---
title: Регистрация веб-приложения, которое входит в систему пользователей | Службы
titleSuffix: Microsoft identity platform
description: Узнайте, как зарегистрировать веб-приложение, которое входит в систему пользователей
services: active-directory
author: jmprieur
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: conceptual
ms.workload: identity
ms.date: 07/14/2020
ms.author: jmprieur
ms.custom: aaddev
ms.openlocfilehash: b6240f88d309cbf4f26375c5f961d716b472755d
ms.sourcegitcommit: 5cdd0b378d6377b98af71ec8e886098a504f7c33
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/25/2021
ms.locfileid: "98756274"
---
# <a name="web-app-that-signs-in-users-app-registration"></a>Веб-приложение, которое входит в систему пользователей: регистрация приложения

В этой статье объясняются особенности регистрации приложений для веб-приложения, которое входит в систему пользователей.

Чтобы зарегистрировать приложение, можно использовать:

- [Краткое руководство по веб-приложению](#register-an-app-by-using-the-quickstarts). Кроме того, что очень удобно при создании приложения, краткие руководства в портал Azure содержат кнопку с именем **внести это изменение**. С помощью этой кнопки можно задать нужные свойства даже для существующего приложения. Необходимо адаптировать значения этих свойств к своему собственному случаю. В частности, веб-интерфейс API для вашего приложения, вероятно, будет отличаться от предложенного по умолчанию, что также повлияет на универсальный код ресурса (URI) выхода.
- Портал Azure для [регистрации приложения вручную](#register-an-app-by-using-the-azure-portal).
- PowerShell и программы командной строки.

## <a name="register-an-app-by-using-the-quickstarts"></a>Регистрация приложения с помощью кратких руководств

Эти ссылки можно использовать для начальной загрузки создания веб-приложения.

- [ASP.NET Core](https://aka.ms/aspnetcore2-1-aad-quickstart-v2)
- [ASP.NET](https://ms.portal.azure.com/#blade/Microsoft_AAD_RegisteredApps/applicationsListBlade/quickStartType/AspNetWebAppQuickstartPage/sourceType/docs)

## <a name="register-an-app-by-using-the-azure-portal"></a>Регистрация приложения с помощью портал Azure

> [!NOTE]
> Используемый портал отличается в зависимости от того, выполняется ли ваше приложение в Microsoft Azure общедоступном облаке или в национальной или независимых облаке. Дополнительные сведения см. в статье [местные облака](./authentication-national-cloud.md#app-registration-endpoints).


1. Войдите на <a href="https://portal.azure.com/" target="_blank">портал Azure<span class="docon docon-navigate-external x-hidden-focus"></span></a>. 
1. Если у вас есть доступ к нескольким клиентам, в верхнем меню используйте фильтр **Каталог и подписка** :::image type="icon" source="./media/common/portal-directory-subscription-filter.png" border="false":::, чтобы выбрать клиент, в котором следует зарегистрировать приложение.
1. Найдите и выберите **Azure Active Directory**.
1. В разделе **Управление** выберите **Регистрация приложений** > **Создать регистрацию**.

# <a name="aspnet-core"></a>[ASP.NET Core](#tab/aspnetcore)

1. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. Введите **имя** приложения, например `AspNetCore-WebApp`. Пользователи приложения могут видеть это имя. Вы можете изменить его позже.
   1. Выберите поддерживаемые типы учетных записей для приложения. (См. раздел [Поддерживаемые типы учетных записей](./v2-supported-account-types.md).)
   1. Для **URI перенаправления** добавьте тип приложения и назначение URI, которые будут принимать возвращенные ответы токена после успешной проверки подлинности. Например, введите `https://localhost:44321`.
   1. Выберите **Зарегистрировать**.
1. В разделе **Управление** выберите **Проверка подлинности** и добавьте следующие сведения.
   1. В разделе " **веб-сайт** " добавьте в `https://localhost:44321/signin-oidc` качестве **URI перенаправления**.
   1. Добавить `https://localhost:44321/signout-oidc` в качестве **URL-адреса выхода**.
   1. В разделе **Неявное предоставление разрешения** установите флажок **Токены идентификатора**.
   1. Щелкните **Сохранить**.
   
# <a name="aspnet"></a>[ASP.NET](#tab/aspnet)

1. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. Введите **имя** приложения, например `MailApp-openidconnect-v2`. Пользователи приложения могут видеть это имя. Вы можете изменить его позже.
   1. Выберите поддерживаемые типы учетных записей для приложения. (См. раздел [Поддерживаемые типы учетных записей](./v2-supported-account-types.md).)
   1. В разделе **URI перенаправления (необязательно)** выберите **Web** в поле со СПИСКОМ и введите следующий URI перенаправления: **https://localhost:44326/** .
   1. Выберите **Зарегистрировать**, чтобы создать приложение.
1. В разделе **Управление** выберите **Проверка подлинности**.
1. В разделе **неявное предоставление** выберите **токены идентификации**. Для работы с этим образцом необходимо включить [неявный поток предоставления](v2-oauth2-implicit-grant-flow.md) для входа пользователя.
1. Нажмите кнопку **Сохранить**.

# <a name="java"></a>[Java](#tab/java)

1. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения: 
    1. Введите **имя** приложения, например `java-webapp`. Пользователи приложения могут видеть это имя. Вы можете изменить его позже. 
    1. Выберите **учетные записи в любом организационном каталоге и личных учетных записях Майкрософт (например, Skype, Xbox, Outlook.com)**.
    1. Выберите **зарегистрировать** , чтобы зарегистрировать приложение.
1. В разделе **Управление** выберите **Проверка подлинности** > **Добавить платформу**.
1. Выберите **Интернет**.
1. В поле **URI перенаправления** введите тот же узел и номер порта, а затем — `/msal4jsample/secure/aad` страницу входа. 
1. Нажмите кнопку **Настроить**.
1. В разделе " **веб** " используйте узел и номер порта, а затем **/MSAL4JSAMPLE/Graph/Me** в качестве **URI перенаправления** для страницы сведений о пользователе.
По умолчанию в образце используется:
   - **http://localhost:8080/msal4jsample/secure/aad**
   - **http://localhost:8080/msal4jsample/graph/me**

1. Щелкните **Сохранить**.
1. В разделе **Управление** выберите **Сертификаты и секреты**.
1. В разделе **секреты клиента** выберите **новый секрет клиента**, а затем:

   1. Введите описание ключа.
   1. Выберите продолжительность ключа **в 1 году**.
   1. Выберите **Добавить**.
   1. Когда отобразится значение ключа, скопируйте его для последующего использования. Это значение не будет отображаться повторно или быть извлечено другими способами.

# <a name="python"></a>[Python](#tab/python)

1. После появления страницы **Регистрация приложения** введите сведения о регистрации приложения:
   1. Введите **имя** приложения, например `python-webapp`. Пользователи приложения могут видеть это имя. Вы можете изменить его позже.
   1. Измените **Поддерживаемые типы учетных записей** на **учетные записи в любом каталоге Организации и личных учетных записях Майкрософт (например, Skype, Xbox, Outlook.com)**.
   1. В разделе **URI перенаправления (необязательно)** выберите **Web** в поле со СПИСКОМ и введите следующий URI перенаправления: **http://localhost:5000/getAToken** .
   1. Выберите **Зарегистрировать**, чтобы создать приложение.
1. На странице приложения **Обзор** найдите **идентификатор приложения (клиента)** и запишите его, чтобы использовать позже. Он понадобится для настройки файла конфигурации Visual Studio для этого проекта.
1. В разделе **Управление** выберите **Сертификаты и секреты**.
1. В разделе **секреты клиента** выберите **новый секрет клиента**, а затем:
   1. Введите описание ключа.
   1. Выберите срок действия ключа **в 1 год**.
   1. Выберите **Добавить**.
   1. Когда отобразится значение ключа, скопируйте его. Он понадобится вам позднее.
---

## <a name="register-an-app-by-using-powershell"></a>Регистрация приложения с помощью PowerShell

> [!NOTE]
> Сейчас Azure AD PowerShell создает приложения только со следующими поддерживаемыми типами учетных записей:
>
> - Мйорг (учетные записи только в этом каталоге организации)
> - Анйорг (учетные записи в любом каталоге организации)
>
> Вы можете создать приложение, которое будет выполнять вход пользователей с помощью личных учетных записей Майкрософт (например, Skype, Xbox или Outlook.com). Сначала создайте многоклиентское приложение. Поддерживаемые типы учетных записей — это учетные записи в любом каталоге Организации. Затем измените [`accessTokenAcceptedVersion`](./reference-app-manifest.md#accesstokenacceptedversion-attribute) значение свойства на **2** , а свойство — на [`signInAudience`](./reference-app-manifest.md#signinaudience-attribute) `AzureADandPersonalMicrosoftAccount` в [манифесте приложения](./reference-app-manifest.md) из портал Azure. Дополнительные сведения см. в описании [шага 1,3](https://github.com/Azure-Samples/active-directory-aspnetcore-webapp-openidconnect-v2/tree/master/1-WebApp-OIDC/1-3-AnyOrgOrPersonal#step-1-register-the-sample-with-your-azure-ad-tenant) в руководстве по ASP.NET Core. Этот шаг можно обобщить для веб-приложений на любом языке.

## <a name="next-steps"></a>Дальнейшие действия

Перейдите к следующей статье в этом сценарии — [конфигурации кода приложения](scenario-web-app-sign-user-app-configuration.md).
