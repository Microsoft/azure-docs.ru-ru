---
title: Маркеры безопасности | Службы
titleSuffix: Microsoft identity platform
description: Узнайте об основах маркеров безопасности на платформе Microsoft Identity.
services: active-directory
author: rwike77
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: conceptual
ms.workload: identity
ms.date: 05/11/2020
ms.author: ryanwi
ms.reviewer: jmprieur, saeeda, sureshja, hirsin
ms.custom: aaddev, identityplatformtop40, scenarios:getting-started
ms.openlocfilehash: 6d9f5538d377be1414089e591559344bde4f381a
ms.sourcegitcommit: 95c2cbdd2582fa81d0bfe55edd32778ed31e0fe8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/26/2021
ms.locfileid: "98795643"
---
# <a name="security-tokens"></a>Маркеры безопасности Центра Интернета вещей

Централизованный поставщик удостоверений особенно полезен для приложений, имеющих пользователей по всему миру, которые не обязательно входят в сеть предприятия. Платформа Microsoft Identity проверяет подлинность пользователей и предоставляет маркеры безопасности, такие как [маркеры доступа](developer-glossary.md#access-token), [маркеры обновления](developer-glossary.md#refresh-token)и [маркеры идентификации](developer-glossary.md#id-token). Маркеры безопасности позволяют [клиентскому приложению](developer-glossary.md#client-application) получать доступ к защищенным ресурсам на [сервере ресурсов](developer-glossary.md#resource-server).

**Маркер доступа**. маркер доступа — это маркер безопасности, выданный [сервером авторизации](developer-glossary.md#authorization-server) как часть потока [OAuth 2,0](active-directory-v2-protocols.md) . Он содержит сведения о пользователе и ресурсе, для которых предназначен маркер. Эти сведения можно использовать для доступа к веб-API и другим защищенным ресурсам. Маркеры доступа проверяются ресурсами для предоставления доступа к клиентскому приложению. Дополнительные сведения о том, как платформа удостоверений Майкрософт выдает маркеры доступа, см. в разделе [маркеры доступа](access-tokens.md).

**Маркер обновления**: поскольку маркеры доступа допустимы только в течение короткого периода времени, серверы авторизации иногда выдают маркер обновления одновременно с выданным маркером доступа. После этого клиентское приложение может при необходимости обмениваться этим маркером обновления для нового маркера доступа. Дополнительные сведения о том, как платформа Microsoft Identity использует маркеры обновления для отзыва разрешений, см. в разделе [отзыв маркера](access-tokens.md#token-revocation).

**Токен идентификатора**: маркеры идентификации отправляются в клиентское приложение как часть потока [подключения OpenID Connect](v2-protocols-oidc.md) . Их можно отправлять вместе или вместо маркера доступа. Токены идентификации используются клиентом для проверки подлинности пользователя. Дополнительные сведения о том, как платформа идентификации Майкрософт выдает маркеры идентификации, см. в разделе [маркеры идентификации](id-tokens.md).

> [!NOTE]
> В этой статье обсуждаются маркеры безопасности, используемые протоколами OAuth2 и OpenID Connect Connect. Многие корпоративные приложения используют SAML для проверки подлинности пользователей. Дополнительные сведения об утверждениях SAML см. в разделе [Справочник по маркерам saml Azure Active Directory](reference-saml-tokens.md).

## <a name="validate-security-tokens"></a>Проверка маркеров безопасности

Это приложение, для которого был создан маркер, веб-приложение, которое было подписано пользователем, или веб-API, который вызывается для проверки маркера. Маркер подписывается сервером авторизации с помощью закрытого ключа. Сервер авторизации публикует соответствующий открытый ключ. Чтобы проверить маркер, приложение проверяет подпись с помощью открытого ключа сервера авторизации, чтобы проверить, была ли подпись создана с помощью закрытого ключа.

Маркеры допустимы только в течение ограниченного периода времени. Как правило, сервер авторизации предоставляет пару токенов, например:

* Маркер доступа, который обращается к приложению или защищенному ресурсу.
* Маркер обновления, который используется для обновления маркера доступа, когда маркер доступа близок к истечению срока действия.

Маркеры доступа передаются в веб-интерфейс API в качестве токена носителя в `Authorization` заголовке. Приложение может предоставить маркер обновления для сервера авторизации. Если пользователь не отменил доступ к приложению, он получит новый маркер доступа и новый маркер обновления. Таким способом обрабатывается ситуация, когда кто-то выходит из Организации. Когда сервер авторизации получает маркер обновления, он не будет выдавать другой действительный маркер доступа, если пользователь больше не авторизован.

## <a name="json-web-tokens-and-claims"></a>Веб-маркеры и утверждения JSON

Платформа Microsoft Identity реализует маркеры безопасности в виде веб-маркеров JSON (JWT), которые содержат *утверждения*. Так как JWT используются в качестве маркеров безопасности, такая форма проверки подлинности иногда называется *проверкой подлинности JWT*.

[Утверждение](developer-glossary.md#claim) предоставляет утверждения об одной сущности, например клиентском приложении или [владельцу ресурса](developer-glossary.md#resource-owner), к другой сущности, такой как сервер ресурсов. Утверждение также можно называть утверждением JWT или утверждением JSON Web Token.

Утверждения — это пары "имя — значение", которые ретранслировать факты о субъекте маркера. Например, утверждение может содержать факты о субъекте безопасности, проверенном сервером авторизации. Утверждения, представленные в конкретном маркере, зависят от многих вещей, таких как тип маркера, тип учетных данных, используемых для проверки подлинности субъекта, и конфигурацию приложения.

Приложения могут использовать утверждения для различных задач, например:

* Проверьте токен.
* Найдите [клиента](developer-glossary.md#tenant)субъекта маркера.
* Отображение сведений о пользователе.
* Определите авторизацию субъекта.

Утверждение состоит из пар «ключ-значение», которые предоставляют такие сведения, как:

* Сервер маркеров безопасности, создавший токен.
* Дата создания маркера.
* Тема (например, пользователь, Кроме управляющих программ).
* Аудитория — это приложение, для которого был создан маркер.
* Приложение (клиент), которое запросило маркер. В случае веб-приложений это приложение может быть таким же, как и аудитория.

Дополнительные сведения о том, как платформа Microsoft Identity реализует токены и сведения о заявках, см. в разделе [маркеры доступа](access-tokens.md) и [идентификаторы маркеров](id-tokens.md).

## <a name="how-each-flow-emits-tokens-and-codes"></a>Как каждый поток выдает маркеры и коды

В зависимости от того, как строится клиент, он может использовать один или несколько потоков проверки подлинности, поддерживаемых платформой удостоверений Microsoft. Эти потоки могут создавать различные маркеры (маркеры идентификации, маркеры обновления, маркеры доступа) и коды авторизации. Для их работы требуются разные токены. В этой таблице представлен обзор.

|Поток | Требования | Маркер идентификации | Маркер доступа | Маркер обновления | Код авторизации |
|-----|----------|----------|--------------|---------------|--------------------|
|[Поток кода авторизации](v2-oauth2-auth-code-flow.md) | | x | x | x | x|
|[Неявный поток](v2-oauth2-implicit-grant-flow.md) | | x        | x    |      |                    |
|[Гибридный поток OIDC](v2-protocols-oidc.md#protocol-diagram-access-token-acquisition)| | x  | |          |            x   |
|[Активация маркера обновления](v2-oauth2-auth-code-flow.md#refresh-the-access-token) | Маркер обновления | x | x | x| |
|[Поток On-Behalf-Of](v2-oauth2-on-behalf-of-flow.md) | Маркер доступа| x| x| x| |
|[Учетные данные клиента](v2-oauth2-client-creds-grant-flow.md) | | | x (только для приложений)| | |

Токены, выданные через неявный режим, имеют ограничение длины, так как они передаются обратно в браузер через URL-адрес, где `response_mode` — `query` или `fragment` . Некоторые браузеры имеют ограничение на размер URL-адреса, который может быть размещен в строке браузера, и завершается ошибкой при слишком длинном. В результате эти маркеры не имеют никаких `groups` `wids` утверждений или.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о проверке подлинности и авторизации на платформе Microsoft Identity см. в следующих статьях:

* Сведения об основных понятиях проверки подлинности и авторизации см. в статье [Проверка подлинности и авторизация](authentication-vs-authorization.md).
* Дополнительные сведения о регистрации приложения для интеграции см. в разделе [модель приложения](application-model.md).
* Сведения о потоке входа в веб-, настольные и мобильные приложения см. в статье [поток входа в приложение](app-sign-in-flow.md).
