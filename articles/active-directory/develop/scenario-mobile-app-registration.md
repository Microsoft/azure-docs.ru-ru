---
title: Регистрация мобильных приложений, вызывающих веб-API | Службы
titleSuffix: Microsoft identity platform
description: Узнайте, как создать мобильное приложение, вызывающее веб-API (регистрация приложения).
services: active-directory
author: jmprieur
manager: CelesteDG
ms.service: active-directory
ms.subservice: develop
ms.topic: conceptual
ms.workload: identity
ms.date: 05/07/2019
ms.author: jmprieur
ms.reviewer: brandwe
ms.custom: aaddev
ms.openlocfilehash: cdd32185d1ffddb4c6bc3d62b91690f68dec17ca
ms.sourcegitcommit: 42a4d0e8fa84609bec0f6c241abe1c20036b9575
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "98014728"
---
# <a name="register-mobile-apps-that-call-web-apis"></a>Регистрация мобильных приложений, вызывающих веб-API

Эта статья содержит инструкции по регистрации создаваемого вами мобильного приложения.

## <a name="supported-account-types"></a>Поддерживаемые типы учетных записей

Типы учетных записей, поддерживаемые вашими мобильными приложениями, зависят от интерфейса, который необходимо включить, и используемых потоков.

### <a name="audience-for-interactive-token-acquisition"></a>Аудитория для интерактивного получения маркера

Большинство мобильных приложений используют интерактивную проверку подлинности. Если приложение использует такую форму проверки подлинности, можно выполнять вход пользователей из любого [типа учетной записи](quickstart-register-app.md).

### <a name="audience-for-integrated-windows-authentication-username-password-and-b2c"></a>Аудитория для встроенной проверки подлинности Windows, username-password и B2C

Если у вас есть приложение универсальная платформа Windows (UWP), для входа пользователей можно использовать встроенную проверку подлинности Windows. Чтобы использовать встроенную проверку подлинности Windows или проверку пароля пользователя, приложение должно входить в систему пользователей в собственном клиенте для разработчиков бизнес-приложений. В сценарии независимого поставщика программного обеспечения приложение может выполнять вход пользователей в Azure Active Directory организации. Эти потоки проверки подлинности не поддерживаются для личных учетных записей Майкрософт.

Вы также можете войти в систему пользователей, используя удостоверения социальных сетей, которые передают B2Cный центр и политику. Чтобы использовать этот метод, можно использовать только интерактивную проверку подлинности и проверку пароля пользователя. В настоящее время проверка подлинности с помощью пароля поддерживается только в Xamarin. iOS, Xamarin. Android и UWP.

Дополнительные сведения см. в статьях [сценарии и поддерживаемые потоки проверки подлинности](authentication-flows-app-scenarios.md#scenarios-and-supported-authentication-flows) , [сценарии и поддерживаемые платформы и языки](authentication-flows-app-scenarios.md#scenarios-and-supported-platforms-and-languages).

## <a name="platform-configuration-and-redirect-uris"></a>Конфигурация платформы и URI перенаправления

### <a name="interactive-authentication"></a>Интерактивная проверка подлинности

При создании мобильного приложения, использующего интерактивную проверку подлинности, самый важный этап регистрации — это URI перенаправления. Можно настроить интерактивную проверку подлинности с помощью [конфигурации платформы в колонке **Проверка подлинности**](https://aka.ms/MobileAppReg).

Этот интерфейс позволит приложению получить единый вход (SSO) через Microsoft Authenticator (и Корпоративный портал Intune на Android). Она также будет поддерживать политики управления устройствами.

Портал регистрации приложений предоставляет возможности предварительной версии, которые помогут вам вычислить URI ответа брокера для приложений iOS и Android:

1. На портале регистрации приложений выберите **Проверка подлинности**  >  **испытать новый интерфейс**.

   ![Колонка проверка подлинности, в которой можно выбрать новый интерфейс](https://user-images.githubusercontent.com/13203188/60799285-2d031b00-a173-11e9-9d28-ac07a7ae894a.png)

2. Выберите **Добавить платформу**.

   ![Добавление платформы](https://user-images.githubusercontent.com/13203188/60799366-4c01ad00-a173-11e9-934f-f02e26c9429e.png)

3. Если список платформ поддерживается, выберите **iOS**.

   ![Выберите мобильное приложение](https://user-images.githubusercontent.com/13203188/60799411-60de4080-a173-11e9-9dcc-d39a45826d42.png)

4. Введите идентификатор пакета и нажмите кнопку **зарегистрировать**.

   ![Введите идентификатор пакета](https://user-images.githubusercontent.com/13203188/60799477-7eaba580-a173-11e9-9f8b-431f5b09344e.png)

После выполнения этих действий URI перенаправления вычислится, как показано на следующем рисунке.

![Итоговый URI перенаправления](https://user-images.githubusercontent.com/13203188/60799538-9e42ce00-a173-11e9-860a-015a1840fd19.png)

Если вы предпочитаете вручную настроить URI перенаправления, это можно сделать с помощью манифеста приложения. Вот рекомендуемый формат манифеста:

- **iOS**: `msauth.<BUNDLE_ID>://auth`
  - Например, введите `msauth.com.yourcompany.appName://auth`.
- **Android**: `msauth://<PACKAGE_NAME>/<SIGNATURE_HASH>`
  - Хэш подписи Android можно создать с помощью ключа выпуска или ключа отладки с помощью команды KeyTool.

### <a name="username-password-authentication"></a>Имя пользователя — проверка подлинности с помощью пароля

Если приложение использует только проверку подлинности с помощью пароля пользователя, вам не нужно регистрировать универсальный код ресурса (URI) перенаправления для приложения. Этот поток выполняет циклическое обращение к конечной точке Microsoft Identity Platform версии 2,0. Приложение не будет вызываться обратно по любому конкретному URI.

Однако приложение должно быть идентифицировано как общедоступное клиентское приложение. Для этого сделайте следующее:

1. По-прежнему <a href="https://portal.azure.com/" target="_blank">в <span class="docon docon-navigate-external x-hidden-focus"></span> портал Azure</a>выберите свое приложение в **Регистрация приложений**, а затем выберите **Проверка подлинности**.
1. В **дополнительных параметрах**  >  **разрешите общедоступные потоки клиентов**  >  **включить следующие мобильные и настольные потоки:** выберите **Да**.

   :::image type="content" source="media/scenarios/default-client-type.png" alt-text="Включить общедоступный параметр клиента на панели проверки подлинности в портал Azure":::

## <a name="api-permissions"></a>Разрешения API

Мобильные приложения вызывают API от имени пользователя, выполнившего вход. Приложению необходимо запросить делегированные разрешения. Эти разрешения также называются областями. В зависимости от желаемого опыта можно запрашивать делегированные разрешения статически с помощью портал Azure. Или вы можете запросить их динамически во время выполнения.

Статические регистрация разрешений позволяет администраторам легко утверждать ваше приложение. Рекомендуется статическая регистрация.

## <a name="next-steps"></a>Дальнейшие действия

Перейдите к следующей статье в этом сценарии: [Конфигурация кода приложения](scenario-mobile-app-configuration.md).
