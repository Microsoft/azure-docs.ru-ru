---
title: Устранение проблем с участием динамических групп в Azure AD | Документация Майкрософт
description: Советы по устранению неполадок динамического членства в группах в Azure Active Directory
services: active-directory
author: curtand
manager: daveba
ms.service: active-directory
ms.workload: identity
ms.subservice: enterprise-users
ms.topic: troubleshooting
ms.date: 12/02/2020
ms.author: curtand
ms.reviewer: krbain
ms.custom: it-pro
ms.collection: M365-identity-device-management
ms.openlocfilehash: 41bfdf11bad28ab772b68839a5a7bf7776eb4dff
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96548109"
---
# <a name="troubleshoot-and-resolve-groups-issues"></a>Диагностика и устранение проблем с группами

## <a name="troubleshooting-group-creation-issues"></a>Устранение проблем с созданием групп

**В портал Azure было отключено создание группы безопасности, но группы по-прежнему можно создавать с помощью PowerShell** . **Пользователь может создавать группы безопасности в параметрах порталов Azure** в портал Azure определяет, могут ли пользователи, не являющиеся администраторами, создавать группы безопасности на панели доступа или портал Azure. Он не управляет созданием групп безопасности с помощью PowerShell.

Чтобы отключить создание групп для пользователей, не являющихся администраторами, в PowerShell:
1. Убедитесь, что пользователи без прав администратора могут создавать группы.
   

   ```powershell
   Get-MsolCompanyInformation | Format-List UsersPermissionToCreateGroupsEnabled
   ```

  
2. Если этот код вернет `UsersPermissionToCreateGroupsEnabled : True`, то пользователи без прав администратора могут создавать группы. Чтобы отключить эту функцию, используйте следующий код.
  

   ``` 
   Set-MsolCompanySettings -UsersPermissionToCreateGroupsEnabled $False
   ```

<br/>**При попытке создать динамическую группу в PowerShell получено сообщение об ошибке "максимальное число групп"**<br/>
Если вы получили сообщение в PowerShell, указывающее, что _достигнуто максимальное количество разрешенных групп_ групповых политик, это означает, что достигнуто максимальное ограничение для динамических групп в Организации. Максимальное число динамических групп на организацию — 5 000.

Чтобы создать новые динамические группы, сначала необходимо удалить некоторые существующие динамические группы. Невозможно увеличить это ограничение.

## <a name="troubleshooting-dynamic-memberships-for-groups"></a>Устранение неполадок, связанных с динамическим членством в группах

**Мной было настроено правило для группы, но обновление членства в группе не произошло.**<br/>
1. Проверьте значения для атрибутов пользователя или устройства в правиле. Убедитесь, что имеются пользователи, которые соответствуют правилу. Для устройств проверьте свойства устройства, чтобы убедиться, что все синхронизированные атрибуты содержат ожидаемые значения.<br/>
2. Проверьте состояние обработки членства, чтобы подтвердить ее полноту. Вы можете проверить [состояние обработки членства](groups-create-rule.md#check-processing-status-for-a-rule) и дату последнего обновления на странице **обзора** для группы.

Если все правильно, подождите некоторое время, пока не заполнится группа. В зависимости от размера организации Azure AD группа может занять до 24 часов, чтобы заполнить ее в первый раз или после изменения правила.

**Мной было настроено правило, но теперь существующие участники правила удалены.**<br/>Это нормальная ситуация. Существующие участники группы удаляются при включении или изменении правила. В группу добавляются пользователи, подобранные на основе оценки правила.

**Я не вижу мгновенного изменения членства, когда добавляю или изменяю правило. Почему?**<br/>Специальная оценка членства выполняется периодически в асинхронном фоновом процессе. На длительность процесса влияют количество пользователей в каталоге и размер группы, созданной в результате оценки правила. Обычно каталоги с небольшим количеством пользователей выявят изменения членства в группах уже через несколько минут. В случае каталогов с большим числом пользователей заполнение может занять 30 минут или больше.

**Как можно заставить группу обрабатываться сейчас?**<br/>
В настоящее время невозможно автоматически активировать группу для обработки по требованию. Однако можно вручную запустить повторную обработку, обновив правило членства, чтобы добавить пробел в конце.  

**У меня возникла ошибка при обработке правила**<br/>В следующей таблице перечислены распространенные ошибки с правилом динамического членства и способы их исправления.

| Ошибка со средством синтаксического анализа правил | Неправильное использование | Правильное использование |
| --- | --- | --- |
| Ошибка: атрибут не поддерживается. |(user.invalidProperty -eq "Value") |(user.department -eq "value")<br/><br/>Убедитесь, что атрибут находится в [списке поддерживаемых свойств](groups-dynamic-membership.md#supported-properties). |
| Ошибка: не поддерживается оператор для атрибута. |(user.accountEnabled -contains true) |(user.accountEnabled - eq true)<br/><br/>Используемый оператор не поддерживается для этого типа свойств (в данном примере -contains не может использоваться в логическом типе). Используйте правильные операторы для типа свойств. |
| Ошибка: ошибка компиляции запроса. | 1. (user.department -eq "Sales") (user.department -eq "Marketing")<br>2. (user.userPrincipalName -match "*@domain.ext") | 1. отсутствует оператор. Используйте предикат соединения -and или -or.<br>(user.department -eq "Sales") -or (user.department -eq "Marketing")<br>2. ошибка в регулярном выражении, используемом с-Match<br>(user.userPrincipalName -match ".*@domain.ext")<br>или (user.userPrincipalName -match "@domain.ext$") |

## <a name="next-steps"></a>Дальнейшие действия

В следующих статьях содержатся дополнительные сведения об Azure Active Directory.

* [Управление доступом к ресурсам с помощью групп Azure Active Directory](../fundamentals/active-directory-manage-groups.md)
* [Управление приложениями в Azure Active Directory](../manage-apps/what-is-application-management.md)
* [Что такое Azure Active Directory?](../fundamentals/active-directory-whatis.md)
* [Интеграция локальных удостоверений с Azure Active Directory](../hybrid/whatis-hybrid-identity.md)