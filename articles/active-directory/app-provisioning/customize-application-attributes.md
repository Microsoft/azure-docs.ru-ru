---
title: Руководство. Настройка сопоставлений атрибутов Azure Active Directory
description: Узнайте, что такое сопоставление атрибутов для приложений SaaS в Azure Active Directory и как настроить его в соответствии с потребностями вашего бизнеса.
services: active-directory
author: kenwith
manager: daveba
ms.service: active-directory
ms.subservice: app-provisioning
ms.workload: identity
ms.topic: tutorial
ms.date: 1/25/2021
ms.author: kenwith
ms.openlocfilehash: 89b40ac68143c2af0d94434ddedec489a2208839
ms.sourcegitcommit: d49bd223e44ade094264b4c58f7192a57729bada
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/02/2021
ms.locfileid: "99256413"
---
# <a name="tutorial---customize-user-provisioning-attribute-mappings-for-saas-applications-in-azure-active-directory"></a>Руководство. Настройка сопоставлений атрибутов для подготовки пользователей для приложений SaaS в Azure Active Directory

Microsoft Azure AD обеспечивает поддержку для подготовки пользователей для сторонних приложений SaaS, например Salesforce, G Suite и др. Если включена подготовка пользователей для сторонних приложений SaaS, портал Azure определяет значения их атрибутов посредством сопоставления атрибутов.

Существует предварительно настроенный набор атрибутов и сопоставлений атрибутов между объектами пользователей Azure AD и каждого приложения SaaS. Некоторые приложения управляют другими типами объектов в дополнение к пользователям, такими как группы.

Сопоставление атрибутов по умолчанию можно настроить в соответствии с потребностями вашего бизнеса. Поэтому можно изменить или удалить существующие сопоставления атрибутов или создать новые.

## <a name="editing-user-attribute-mappings"></a>Изменение сопоставлений атрибутов пользователя

Чтобы получить доступ к функции **сопоставления** для подготовки пользователей, выполните следующие действия.

1. Войдите на [портал Azure Active Directory](https://aad.portal.azure.com).
1. В области слева выберите **Корпоративные приложения**. Отобразится список всех настроенных приложений, включая приложения, добавленные из коллекции.
1. Выберите любое приложение, чтобы загрузить его область управления, в которой можно просматривать отчеты и управлять параметрами приложения.
1. Выберите **Подготовка**, чтобы управлять параметрами подготовки учетных записей пользователей для выбранного приложения.
1. Разверните **Сопоставления**, чтобы просмотреть и изменить атрибуты пользователей, передаваемые между Azure AD и целевым приложением. Если целевое приложение поддерживает это, данный раздел позволит также настроить подготовку групп и учетных записей пользователей.

   ![Использование сопоставлений для просмотра и изменения атрибутов пользователей](./media/customize-application-attributes/21.png)

1. Если щелкнуть конфигурацию **Сопоставления**, откроется соответствующий экран **Сопоставление атрибутов**. Некоторые сопоставления атрибутов необходимы для правильной работы приложения SaaS. Для требуемых атрибутов функция **Удалить** недоступна.

   ![Использование сопоставления атрибутов для настройки сопоставлений атрибутов приложений](./media/customize-application-attributes/22.png)

   На приведенном выше снимке экрана вы видите, что атрибут **Username** управляемого объекта в Salesforce заполняется значением **userPrincipalName** связанного объекта Azure Active Directory.

1. Выберите существующее **сопоставление атрибутов**, чтобы открыть экран **Изменить атрибут**. Здесь можно просмотреть и изменить атрибуты пользователей, передаваемые между Azure AD и целевым приложением.

   ![Изменение атрибутов пользователей на экране "Изменить атрибут"](./media/customize-application-attributes/23.png)

### <a name="understanding-attribute-mapping-types"></a>Основные сведения о типах сопоставления атрибутов

С помощью сопоставлений атрибутов можно управлять заполнением атрибутов в сторонних приложениях SaaS.
Поддерживаются четыре типа сопоставлений:

- **Прямое** — целевой атрибут заполняется значением атрибута связанного объекта в Azure AD.
- **Постоянное** — целевой атрибут заполняется определенной строкой, указанной вами.
- **Выражение** — целевой атрибут заполняется на основе результата выражения, похожего на сценарий.
  Дополнительные сведения см. в статье [Запись выражений для сопоставления атрибутов в Azure Active Directory](../app-provisioning/functions-for-customizing-application-data.md).
- **Нет** — целевой атрибут остается без изменений. Тем не менее, если целевой атрибут пуст, он заполняется указанным вами значением по умолчанию.

Кроме этих четырех основных типов, в сопоставлениях настраиваемых атрибутов также поддерживается назначение значений **по умолчанию**. Назначение значений по умолчанию гарантирует, что целевой атрибут заполняется значением, если нет значения ни в Azure AD, ни в целевом объекте. В наиболее распространенной конфигурации это поле остается пустым.

### <a name="understanding-attribute-mapping-properties"></a>Основные сведения о свойствах сопоставления атрибутов

В предыдущем разделе мы уже рассмотрели свойство типа для сопоставления атрибутов.
Наряду с этим свойством сопоставления атрибутов также поддерживают следующие атрибуты:

- **Атрибут источника** — атрибут пользователя из исходной системы (например Azure Active Directory).
- **Целевой атрибут** — атрибут пользователя в целевой системе (например ServiceNow).
- **Значение по умолчанию для NULL (необязательно)** — значение, которое будет передано в целевую систему, если исходный атрибут имеет значение NULL. Это значение будет подготовлено только при создании пользователя. При обновлении существующего пользователя параметр "Значение по умолчанию для NULL (необязательно)" не подготавливается. Например, если требуется подготовить в целевой системе всех существующих пользователей с определенной должностью (значение которой в исходной системе равно NULL), можно использовать следующее [выражение](../app-provisioning/functions-for-customizing-application-data.md): Switch(IsPresent([jobTitle]), "DefaultValue", "True", [jobTitle]). Обязательно замените DefaultValue значением, которое вы хотите подготавливать при значении NULL в исходной системе. 
- **Сопоставление объектов с помощью этого атрибута** — должно ли это сопоставление использоваться для уникальной идентификации пользователей между исходной и целевой системами. Этот параметр обычно задается в атрибуте userPrincipalName или mail в Azure AD, который обычно сопоставляется с полем имени пользователя в целевом приложении.
- **Приоритет сопоставления** — возможность указания нескольких атрибутов сопоставления. При указании нескольких атрибутов сопоставления они вычисляются в порядке, заданном в этом поле. Как только соответствие найдено, дальнейшие атрибуты сопоставления не вычисляются. Хотя вы можете задать сколько угодно сопоставляемых атрибутов, определите, являются ли все атрибуты, выбранные для сопоставления, уникальными и следует ли их сопоставлять. Обычно конфигурация клиентов содержит 1 или 2 сопоставляемых атрибута. 
- **Применить это сопоставление**
  - **Всегда** — применение этого сопоставления как при создании, так и при обновлении пользователей.
  - **Только при создании** — применение этого сопоставления только при создании пользователей.

## <a name="matching-users-in-the-source-and-target--systems"></a>Сопоставление пользователей в исходной и целевой системах
Службу подготовки Azure AD можно развернуть как в сценариях, когда пользователи отсутствуют в целевой системе, так и в сценариях, когда пользователи в ней уже существуют. Чтобы реализовать оба сценария, служба подготовки использует принцип сопоставляемых атрибутов. Сопоставляемые атрибуты позволяют определить, как однозначно идентифицировать пользователя в исходной системе и сопоставить его с пользователем в целевой системе. При планировании развертывания следует указать атрибут, который может быть использован для уникальной идентификации пользователя в исходной и целевой системах. Примечания.

- **Сопоставляемые атрибуты должны быть уникальными.** Клиенты часто используют такие атрибуты, как userPrincipalName, mail или ObjectID в качестве сопоставляемого атрибута.
- **Можно использовать несколько сопоставляемых атрибутов.** Можно определить несколько атрибутов для вычисления при сопоставлении пользователей, а также порядок их вычисления (определяется приоритетом сопоставления в пользовательском интерфейсе). Например, если вы определили три сопоставляемых атрибута и пользователь однозначно сопоставлен после вычисления первых двух атрибутов, то служба не будет вычислять третий атрибут. Служба будет оценивать сопоставляемые атрибуты в указанном порядке и прекращать вычисление при обнаружении соответствия.  
- **Значения в исходной и целевой системах не должны точно совпадать.** Значение в целевой системе может быть некоторой простой функцией значения в исходной системе. Например, в исходной системе может быть атрибут emailAddress, а в исходной системе — атрибут userPrincipalName. Их можно сопоставить с помощью функции атрибута emailAddress, которая заменяет некоторые знаки некоторым постоянным значением.  
- **Сопоставление на основе сочетания атрибутов не поддерживается.** Большинство приложений не поддерживает запросы на основе двух свойств. Поэтому невозможно выполнить сопоставление на основе сочетания атрибутов. Можно вычислить отдельные свойства по очереди.
- **Все пользователи должны иметь значение хотя бы одного сопоставляемого атрибута.** Если вы определяете один сопоставляемый атрибута, все пользователи в исходной системе должны иметь значение этого атрибута. Например, если определить userPrincipalName в качестве сопоставляемого атрибута, все пользователи должны иметь значение userPrincipalName. Если вы определили несколько сопоставляемых атрибутов (например, extensionAttribute1 и mail), то всем пользователям не обязательно иметь один и тот же сопоставляемый атрибут. У одного пользователя может быть только атрибут extensionAttribute1, но не атрибут mail, тогда как у другого пользователя может быть атрибут mail, но не атрибут extensionAttribute1. 
- **Целевое приложение должно поддерживать фильтрацию по сопоставляемому атрибуту.** Разработчики приложений допускают фильтрацию подмножества атрибутов в API управления пользователями или группами. Для приложений из коллекции мы гарантируем, что сопоставление атрибутов по умолчанию позволит сопоставлять атрибуты, фильтрацию по которым API целевого приложения не поддерживает. В случае изменения сопоставляемого атрибута по умолчанию для целевого приложения обратитесь к документации по API стороннего разработчика, чтобы убедиться, что атрибут поддерживает фильтрацию.  

## <a name="editing-group-attribute-mappings"></a>Изменение сопоставлений атрибутов группы

Определенный ряд приложений, в том числе ServiceNow, Box и G Suite, поддерживает возможность подготовки объектов группы и объектов пользователя. Объекты группы могут содержать свойства группы, такие как отображаемые имена и псевдонимы электронной почты (в дополнение к участникам группы).

![Пример показывает ServiceNow с подготовленными объектами группы и пользователя](./media/customize-application-attributes/24.png)

При необходимости можно включить или отключить подготовку группы, выбрав сопоставление группы в разделе **Сопоставления** и задав для параметра **Включено** нужное значение на экране **Сопоставление атрибутов**.

Атрибуты, подготовленные как часть объектов группы, можно настроить так же, как объекты пользователя, описанные ранее. 

> [!TIP]
> Подготовка объектов группы (свойства и участники) отличается от [присвоения групп](../manage-apps/assign-user-or-group-access-portal.md) приложению. Вы можете назначить группу приложению, однако подготовить можно только те объекты пользователя, которые содержатся в группе. Для использования групп в назначениях подготовка объектов для всей группы не требуется.

## <a name="editing-the-list-of-supported-attributes"></a>Изменение списка поддерживаемых атрибутов

Атрибуты пользователя, поддерживаемые для заданного приложения, настроены предварительно. Большинство API управления пользователями приложений не поддерживает обнаружение схемы. Поэтому служба подготовки Azure AD не может динамически создать список поддерживаемых атрибутов, выполнив вызовы к приложению.

Однако некоторые приложения поддерживают настраиваемые атрибуты, и служба подготовки Azure AD может считывать эти атрибуты и записывать их. Чтобы ввести определения на портал Azure, установите флажок **Показать дополнительные параметры** в нижней части экрана **Сопоставление атрибутов**, а затем выберите **Изменить список атрибутов для <ваше приложение>** .

Ниже приведены приложения и системы, поддерживающие настройку списка атрибутов.

- Salesforce
- ServiceNow
- Workday — Active Directory / Workday — Azure Active Directory
- SuccessFactors — Active Directory / SuccessFactors — Azure Active Directory
- Azure Active Directory (поддерживаются [атрибуты по умолчанию API Graph Azure AD](/previous-versions/azure/ad/graph/api/entity-and-complex-type-reference#user-entity) и расширения пользовательского каталога)
- Приложения с поддержкой [SCIM 2.0](https://tools.ietf.org/html/rfc7643).
- При использовании функции обратной записи Azure Active Directory в Workday или SuccessFactors поддерживается обновление релевантных метаданных для поддерживаемых атрибутов (XPATH и JSONPath), но не поддерживается добавление новых атрибутов Workday или SuccessFactors, кроме тех, которые включены в схему по умолчанию.


> [!NOTE]
> Изменение списка поддерживаемых атрибутов рекомендуется только для администраторов, которые настроили схему своих приложений и систем и имеют непосредственные знания об определении их атрибутов. Иногда для этого требуются навыки работы с API-интерфейсами и средствами разработчика, предоставляемыми приложением или системой. Возможность изменять список поддерживаемых атрибутов по умолчанию заблокирована, но клиенты могут включить эту возможность, перейдя по следующему URL-адресу: https://portal.azure.com/?Microsoft_AAD_IAM_forceSchemaEditorEnabled=true. Затем вы можете перейти к приложению, чтобы просмотреть список атрибутов, как описано [выше](#editing-the-list-of-supported-attributes). 

При изменении списка поддерживаемых атрибутов предоставляются следующие свойства:

- **Имя** — системное имя атрибута, определенное в схеме целевого объекта.
- **Тип** — тип хранящихся в атрибуте данных, определенный в схеме целевого объекта. Возможные типы:
  - *Binary* — атрибут содержит двоичные данные.
  - *Boolean* — атрибут содержит значение True или False.
  - *DateTime* — атрибут содержит строку даты.
  - *Integer* — атрибут содержит целое число.
  - *Reference* — атрибут содержит идентификатор, который ссылается на значение, хранящееся в другой таблице в целевом приложении.
  - *String* — атрибут содержит текстовую строку.
- **Первичный ключ?** — указывает, определен ли атрибут как поле первичного ключа в схеме целевого объекта.
- **Обязательный?** — указывает, является ли атрибут обязательным для заполнения в целевом приложении или системе.
- **С несколькими значениями?** — указывает, поддерживает ли атрибут несколько значений.
- **С учетом регистра?** — указывает, учитывается ли регистр при оценке значений атрибутов.
- **Выражение API** — не используется, если это иное не указано в документации по конкретному соединителю для подготовки (например, Workday).
- **Атрибут объекта ссылки** — если применяется атрибут ссылочного типа, то в этом меню можно выбрать таблицу и атрибут в целевом приложении, которое содержит значение, связанное с атрибутом. Например, если у вас есть атрибут с именем Department, сохраненное значение которого указывает на объект в отдельной таблице Departments, необходимо выбрать Departments.Name. Поля ссылочных таблиц и первичного идентификатора, поддерживаемые для данного приложения, предварительно настроены и не могут быть изменены с помощью портала Azure (на данный момент), но их можно изменить с помощью [API Microsoft Graph](/graph/api/resources/synchronization-configure-with-custom-target-attributes).

#### <a name="provisioning-a-custom-extension-attribute-to-a-scim-compliant-application"></a>Подготовка настраиваемого атрибута расширения для приложения, совместимого со SCIM
Документ SCIM RFC определяет основную схему пользователей и групп, а также допускает расширения схемы в соответствии с потребностями вашего приложения. Чтобы добавить настраиваемый атрибут в приложение SCIM, выполните следующие действия.
   1. Войдите на [портал Azure Active Directory](https://aad.portal.azure.com), выберите **Корпоративные приложения**, выберите свое приложение и щелкните **Provisioning** (Подготовка).
   2. В разделе **Сопоставления** выберите объект (пользователя или группу), для которого необходимо добавить настраиваемый атрибут.
   3. В нижней части страницы щелкните **Показать дополнительные параметры**.
   4. Выберите **Изменить список атрибутов для <ваше приложение>** .
   5. В нижней части списка атрибутов введите данные настраиваемого атрибута в предоставленных полях. Затем нажмите кнопку **Добавить атрибут**.

Для приложений SCIM имя атрибута должно соответствовать шаблону, показанному в примере ниже. Атрибуты CustomExtensionName и CustomAttribute можно настроить в соответствии с требованиями приложения, например: urn:ietf:params:scim:schemas:extension:CustomExtensionName:2.0:User:CustomAttribute 

Эти инструкции относятся только к приложениям с поддержкой SCIM. Такие приложения, как ServiceNow и Salesforce, не интегрированы с Azure AD с помощью SCIM, поэтому они не нуждаются в определенном пространстве имен при добавлении настраиваемого атрибута.

Настраиваемые атрибуты не могут быть ссылочными атрибутами, атрибутами с несколькими значениями или атрибутами сложного типа. Настраиваемые атрибуты расширения с несколькими значениями и атрибуты расширения сложного типа сейчас поддерживаются только для приложений из коллекции.  
 
**Пример представления пользователя с атрибутом расширения.**

```json
   {
     "schemas": ["urn:ietf:params:scim:schemas:core:2.0:User",
      "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User",
      "urn:ietf:params:scim:schemas:extension:CustomExtensionName:2.0:User"],
     "userName":"bjensen",
     "id": "48af03ac28ad4fb88478",
     "externalId":"bjensen",
     "name":{
       "formatted":"Ms. Barbara J Jensen III",
       "familyName":"Jensen",
       "givenName":"Barbara"
     },
     "urn:ietf:params:scim:schemas:extension:enterprise:2.0:User": {
     "employeeNumber": "701984",
     "costCenter": "4130",
     "organization": "Universal Studios",
     "division": "Theme Park",
     "department": "Tour Operations",
     "manager": {
       "value": "26118915-6090-4610-87e4-49d8ca9f808d",
       "$ref": "../Users/26118915-6090-4610-87e4-49d8ca9f808d",
       "displayName": "John Smith"
     }
   },
     "urn:ietf:params:scim:schemas:extension:CustomExtensionName:2.0:User": {
     "CustomAttribute": "701984",
   },
   "meta": {
     "resourceType": "User",
     "created": "2010-01-23T04:56:22Z",
     "lastModified": "2011-05-13T04:42:34Z",
     "version": "W\/\"3694e05e9dff591\"",
     "location":
 "https://example.com/v2/Users/2819c223-7f76-453a-919d-413861904646"
   }
 }
```


## <a name="provisioning-a-role-to-a-scim-app"></a>Подготовка роли для приложения SCIM
Выполните следующие действия, чтобы подготовить роли для пользователя приложения. Обратите внимание на то, что приведенное ниже описание относится только к пользовательским приложениям SCIM. Для приложений из коллекции, таких как Salesforce и ServiceNow, используйте предварительно определенные сопоставления ролей. В приведенных ниже пунктах описывается преобразование атрибута AppRoleAssignments в формат, который требуется приложению.

- Сопоставление appRoleAssignment в Azure AD с ролью в приложении требует преобразования атрибута с помощью [выражения](../app-provisioning/functions-for-customizing-application-data.md). Атрибут appRoleAssignment **не следует сопоставлять непосредственно** с ролью без использования выражения для анализа сведений о роли. 

- **SingleAppRoleAssignment** 
  - **Сценарии использования**. Используйте выражение SingleAppRoleAssignment для подготовки отдельной роли для пользователя и указания основной роли. 
  - **Порядок настройки:** Выполните описанные выше действия, чтобы перейти на страницу сопоставления атрибутов и использовать выражение SingleAppRoleAssignment для сопоставления с атрибутом roles. Существуют три атрибута roles: (roles[primary eq "True"].display, roles[primary eq "True].type и roles[primary eq "True"].value). В сопоставлениях можно использовать любой или все атрибуты roles. Если вы хотите включить несколько атрибутов, просто добавьте новое сопоставление и включите его в качестве целевого атрибута.  
  
  ![Добавление SingleAppRoleAssignment](./media/customize-application-attributes/edit-attribute-singleapproleassignment.png)
  - **Полезная информация**
    - Убедитесь, что пользователю не назначено несколько ролей. Мы не можем гарантировать, какая из ролей будет подготовлена.
    
  - **Пример запроса (POST)** 

   ```json
    {
      "schemas": [
          "urn:ietf:params:scim:schemas:core:2.0:User"
      ],
      "externalId": "alias",
      "userName": "alias@contoso.OnMicrosoft.com",
      "active": true,
      "displayName": "First Name Last Name",
      "meta": {
           "resourceType": "User"
      },
      "roles": [
         {
               "primary": true,
               "type": "WindowsAzureActiveDirectoryRole",
               "value": "Admin"
         }
      ]
   }
   ```
  
  - **Пример выходных данных (PATCH)** 
    
   ```
   "Operations": [
   {
   "op": "Add",
   "path": "roles",
   "value": [
   {
   "value": "{\"id\":\"06b07648-ecfe-589f-9d2f-6325724a46ee\",\"value\":\"25\",\"displayName\":\"Role1234\"}"
   }
   ]
   ```  
Формат при использовании PATCH и POST отличается. Настроить использование одного формата можно с помощью [специального флага](./application-provisioning-config-problem-scim-compatibility.md#flags-to-alter-the-scim-behavior). 

- **AppRoleAssignmentsComplex** 
  - **Сценарии использования**. Используйте выражение AppRoleAssignmentsComplex, чтобы инициализировать несколько ролей для пользователя. 
  - **Порядок настройки:** Измените список поддерживаемых атрибутов, как описано выше, чтобы добавить новый атрибут для ролей. 
  
    ![Добавление ролей](./media/customize-application-attributes/add-roles.png)<br>

    Затем используйте выражение AppRoleAssignmentsComplex, чтобы сопоставить роль с настраиваемым атрибутом роли, как показано на рисунке ниже.

    ![Добавление выражения AppRoleAssignmentsComplex](./media/customize-application-attributes/edit-attribute-approleassignmentscomplex.png)<br>
  - **Полезная информация**
    - Все роли будут подготовлены с параметром primary = false.
    - Запрос POST содержит тип роли. Запрос PATCH не содержит тип. Мы работаем над тем, чтобы добавить отправку типа в запросах POST и PATCH.
    
  - **Пример выходных данных** 
  
   ```json
   {
       "schemas": [
           "urn:ietf:params:scim:schemas:core:2.0:User"
      ],
      "externalId": "alias",
      "userName": "alias@contoso.OnMicrosoft.com",
      "active": true,
      "displayName": "First Name Last Name",
      "meta": {
           "resourceType": "User"
      },
      "roles": [
         {
               "primary": false,
               "type": "WindowsAzureActiveDirectoryRole",
               "display": "Admin",
               "value": "Admin"
         },
         {
               "primary": false,
               "type": "WindowsAzureActiveDirectoryRole",
               "display": "User",
             "value": "User"
         }
      ]
   }
   ```

  


## <a name="provisioning-a-multi-value-attribute"></a>Подготовка атрибута с несколькими значениями
Некоторые атрибуты, такие как phoneNumbers и emails, являются атрибутами с несколькими значениями, для которых может потребоваться указать различные типы номеров телефона или адресов электронной почты. Используйте приведенное ниже выражение для атрибутов с несколькими значениями. Оно позволяет указать тип атрибута и сопоставить его с соответствующим атрибутом пользователя Azure AD, чтобы получить значение. 

* phoneNumbers[type eq "work"].value
* phoneNumbers[type eq "mobile"].value
* phoneNumbers[type eq "fax"].value

   ```json
   "phoneNumbers": [
       {
         "value": "555-555-5555",
         "type": "work"
      },
      {
         "value": "555-555-5555",
         "type": "mobile"
      },
      {
         "value": "555-555-5555",
         "type": "fax"
      }
   ]
   ```

## <a name="restoring-the-default-attributes-and-attribute-mappings"></a>Восстановление атрибутов по умолчанию и сопоставления атрибутов

Если вам нужно начать работу заново и сбросить имеющиеся сопоставления до состояния по умолчанию, установите флажок **Восстановить сопоставления по умолчанию** и сохраните конфигурацию. Таким образом все сопоставления и фильтры области будут заданы так, как если бы приложение было только что добавлено в арендатор Azure AD из коллекции приложений.

Если выбрать этот параметр, это приведет к повторной синхронизации всех пользователей во время работы службы подготовки.

> [!IMPORTANT]
> Перед вызовом этого параметра настоятельно рекомендуется задать для параметра **Состояние подготовки** значение **Откл.**

## <a name="what-you-should-know"></a>Необходимая информация

- Процесс синхронизации в Microsoft Azure AD реализован очень эффективно. Во время цикла синхронизации в инициализированной среде обрабатываются только объекты, требующие обновления.
- Обновление сопоставлений атрибутов влияет на производительность цикла синхронизации. Чтобы обновить конфигурацию сопоставления атрибутов, необходимо повторно оценить все управляемые объекты.
- Рекомендуется сократить количество последовательных изменений сопоставлений атрибутов.
- Добавление атрибута photo для подготовки в приложении не поддерживается, так как невозможно указать формат для синхронизации фотографии. Вы можете запросить эту функцию на [веб-сайте User Voice](https://feedback.azure.com/forums/169401-azure-active-directory).
- Атрибут IsSoftDeleted часто используется в сопоставлениях по умолчанию для приложения. Атрибут IsSoftDeleted может иметь значение true в одном из четырех случаев: пользователь вне области, так как он не назначен в приложении; пользователь вне области, так как не соответствует фильтру области; пользователь был обратимо удален из Azure AD или свойство AccountEnabled для пользователя имеет значение false. Не рекомендуется удалять атрибут IsSoftDeleted из сопоставлений атрибутов.
- Служба подготовки Azure AD не поддерживает подготовку значений NULL.
- Первичный ключ (обычно это ID) не должен использоваться в качестве целевого атрибута в сопоставлениях атрибутов. 
- Атрибут roles обычно следует сопоставлять с помощью выражения, а не прямого сопоставления. Дополнительные сведения о сопоставлении ролей см. в разделе выше. 
- Хотя вы можете отключить группы из сопоставлений, отключение пользователей не поддерживается. 

## <a name="next-steps"></a>Дальнейшие действия

- [Автоматическая подготовка пользователей и ее отзыв для приложений SaaS](user-provisioning.md)
- [Запись выражений для сопоставления атрибутов](functions-for-customizing-application-data.md)
- [Фильтры области для подготовки пользователей](define-conditional-rules-for-provisioning-user-accounts.md)
- [Автоматическая подготовка пользователей и групп из Azure Active Directory в приложениях с использованием SCIM](use-scim-to-provision-users-and-groups.md)
- [Список учебников по интеграции приложений SaaS](../saas-apps/tutorial-list.md)
