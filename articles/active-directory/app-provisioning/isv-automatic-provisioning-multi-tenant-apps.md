---
title: Включение автоматической подготовки пользователей для приложений с несколькими клиентами в Azure AD
description: Рекомендации для независимых поставщиков программного обеспечения для включения автоматической подготовки
services: active-directory
author: kenwith
manager: daveba
ms.service: active-directory
ms.subservice: app-provisioning
ms.topic: reference
ms.workload: identity
ms.date: 07/23/2019
ms.author: kenwith
ms.reviewer: zhchia
ms.openlocfilehash: 7bd0fc634109beb6cc674d89f56666e7035d33ef
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "99255701"
---
# <a name="enable-automatic-user-provisioning-for-your-multi-tenant-application"></a>Включение автоматической подготовки пользователей для приложения с несколькими клиентами

Автоматическая подготовка учетных записей пользователей — это процесс автоматизации создания, обслуживания и удаления удостоверений пользователей в целевых системах, таких как приложения программного обеспечения как услуги.

## <a name="why-enable-automatic-user-provisioning"></a>Зачем включать автоматическую подготовку пользователей?

Приложения, которым требуется запись пользователя в приложении перед первым входом пользователя в систему требует подготовки пользователей. У вас есть преимущества поставщика услуг и преимущества для клиентов.

### <a name="benefits-to-you-as-the-service-provider"></a>Преимущества для поставщика услуг

* Повышение безопасности приложения с помощью платформы Microsoft Identity.

* Сократите реальные и наблюдаемые усилия клиентов, чтобы принять ваше приложение.

* Сократите затраты на интеграцию с несколькими поставщиками удостоверений (поставщиков удостоверений) для автоматической подготовки пользователей с помощью системы для подготовки на основе управления идентификационными данными (SCIM).

* Сократите затраты на поддержку за счет предоставления обширных журналов для помощи пользователям в устранении проблем, связанных с подготовкой пользователей.

* Увеличьте видимость приложения в [коллекции приложений Azure AD](https://azuremarketplace.microsoft.com/marketplace/apps).

* Получите список с приоритетом на странице учебников по приложению.

### <a name="benefits-to-your-customers"></a>Преимущества для клиентов

* Повышение безопасности за счет автоматического удаления доступа к приложению для пользователей, которые меняют роли или оставляют Организации в приложении.

* Упростите управление пользователями для своего приложения, избегая ошибок и повторяющихся действий, связанных с подготовкой вручную.

* Сократите затраты на размещение и поддержку специально разработанных решений подготовки.

## <a name="choose-a-provisioning-method"></a>Выбор метода подготовки

Azure AD предоставляет несколько путей интеграции, позволяющих включить автоматическую подготовку пользователей для приложения.

* [Служба подготовки Azure AD](../app-provisioning/user-provisioning.md) управляет подготовкой и отменой подготовки пользователей из Azure AD в ваше приложение (исходящая подготовка) и из приложения в Azure AD (входящая подготовка). Служба подключается к системе для конечных точек API управления пользовательским удостоверением (SCIM), предоставляемых вашим приложением.

* При использовании [Microsoft Graph](/graph/)приложение управляет входящей и исходящей подготовкой пользователей и групп из Azure AD в приложение, запрашивая API Microsoft Graph.

* Подготовка пользователей в язык разметки зявлений системы безопасности (SAML) JIT (SAML JIT) может быть включена, если приложение использует SAML для Федерации. Он использует сведения о заявках, отправленные в токене SAML для предоставления пользователям.

Чтобы определить, какой вариант интеграции следует использовать для приложения, обратитесь к таблице высокого уровня сравнения и просмотрите более подробные сведения о каждом варианте.

| Возможности, включенные и улучшенные с помощью автоматической подготовки| Служба подготовки Azure AD (SCIM 2,0)| API Microsoft Graph (OData v 4.0)| SAML JIT |
|---|---|---|---|
| Управление пользователями и группами в Azure AD| √| √| Только для пользователя |
| Управление пользователями и группами, синхронизированными из локальной Active Directory| √*| √*| Только для пользователей * |
| Доступ к данным за пределами пользователей и групп во время подготовки доступа к Microsoft 365 данным (команды, SharePoint, электронная почта, календарь, документы и т. д.).| X+| √| X |
| Создание, чтение и обновление пользователей на основе бизнес-правил| √| √| √ |
| Удаление пользователей на основе бизнес-правил| √| √| X |
| Управление автоматической подготовкой пользователей для всех приложений из портал Azure| √| X| √ |
| Поддержка нескольких поставщиков удостоверений| √| X| √ |
| Поддержка учетных записей гостей (B2B)| √| √| √ |
| Поддержка некорпоративных учетных записей (B2C)| X| √| √ |

<sup>*</sup> — Для синхронизации пользователей из AD с Azure AD требуется Azure AD Connect Setup.  
<sup>+</sup >— Использование SCIM для подготовки не исключает возможность интеграции приложения с Microsoft Graph для других целей.

## <a name="azure-ad-provisioning-service-scim"></a>Служба подготовки Azure AD (SCIM)

Службы подготовки Azure AD используют [scim](https://aka.ms/SCIMOverview), промышленный стандарт для подготовки, поддерживаемый многими поставщиками удостоверений (поставщиков удостоверений), а также приложениями (например, резервный элемент, g Suite, Dropbox). Мы рекомендуем использовать службу подготовки Azure AD, если вы хотите поддерживать поставщиков удостоверений в дополнение к Azure AD, так как любые SCIM, совместимые с IdP, могут подключаться к конечной точке SCIM. Создавая простую конечную точку/User, вы можете включить подготовку без необходимости поддерживать собственный модуль синхронизации. 

Дополнительные сведения о том, как пользователи службы подготовки Azure AD SCIM, см. в следующих статьях: 

* [Дополнительные сведения о стандарте SCIM](https://aka.ms/SCIMOverview)

* [Использование системы для управления удостоверениями между доменами (SCIM) для автоматической подготовки пользователей и групп из Azure Active Directory в приложения](../app-provisioning/use-scim-to-provision-users-and-groups.md)

* [Общие сведения о реализации Azure AD SCIM](../app-provisioning/use-scim-to-provision-users-and-groups.md)

## <a name="microsoft-graph-for-provisioning"></a>Microsoft Graph для подготовки

При использовании Microsoft Graph для подготовки предоставляется доступ ко всем пользовательским данным, доступным в Graph. Помимо сведений о пользователях и группах, можно также получить дополнительные сведения, такие как роли пользователя, диспетчер и прямые отчеты, принадлежащие и зарегистрированные устройства, а также сотни других элементов данных, доступных в [Microsoft Graph](/graph/api/overview). 

Более 15 000 000 организаций и 90% компаний из списка Fortune 500 используют Azure AD при подписке на облачные службы Майкрософт, такие как Microsoft 365, Microsoft Azure или Enterprise Mobility Suite. Microsoft Graph можно использовать для интеграции приложения с рабочими процессами администрирования, например для адаптации сотрудников (и завершения работы), обслуживания профиля и многого другого. 

Дополнительные сведения об использовании Microsoft Graph для подготовки:

* [Домашняя страница Microsoft Graph](https://developer.microsoft.com/graph)

* [Overview of Microsoft Graph (Обзор Microsoft Graph)](/graph/overview)

* [Обзор Microsoft Graph проверки подлинности](/graph/auth/)

* [Приступая к работе с Microsoft Graph](https://developer.microsoft.com/graph/get-started)

## <a name="using-saml-jit-for-provisioning"></a>Использование SAML JIT для подготовки

Если вы хотите подготавливать пользователей только при первом входе в приложение и не хотите автоматически отменять предоставление пользователям, можно использовать SAML JIT. Приложение должно поддерживать SAML 2,0 в качестве протокола Федерации для использования SAML JIT.

SAML JIT использует сведения о заявках в токене SAML для создания и обновления сведений о пользователях в приложении. Клиенты могут настроить эти обязательные утверждения в приложении Azure AD по мере необходимости. Иногда необходимо включить JIT-подготовку на стороне приложения, чтобы клиент мог использовать эту функцию. SAML JIT удобен для создания и обновления пользователей, но не может удалять или деактивировать пользователей в приложении.

## <a name="next-steps"></a>Дальнейшие действия

* [Включение единого входа для приложения](../develop/v2-howto-app-gallery-listing.md)

* [Отправьте список приложений](https://microsoft.sharepoint.com/teams/apponboarding/Apps/SitePages/Default.aspx) и партнеров корпорации Майкрософт для создания документации на сайте Майкрософт.

* [Присоединяйтесь к Microsoft Partner Network (бесплатно) и создайте план перехода на рынке](https://partner.microsoft.com/explore/commercial).
