---
title: 'Azure Active Directory: политики самостоятельного сброса пароля'
description: Дополнительные сведения о различных параметрах политики Azure Active Directory самостоятельного сброса пароля
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: conceptual
ms.date: 01/27/2021
ms.author: justinha
author: justinha
manager: daveba
ms.reviewer: rhicock
ms.collection: M365-identity-device-management
ms.custom: contperf-fy20q4
ms.openlocfilehash: 80be5ca22f3dfb673f09327108e66fccc9de6ddd
ms.sourcegitcommit: 436518116963bd7e81e0217e246c80a9808dc88c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/27/2021
ms.locfileid: "98918049"
---
# <a name="password-policies-and-account-restrictions-in-azure-active-directory"></a>Политики паролей и ограничения учетных записей в Azure Active Directory

В Azure Active Directory (Azure AD) есть политика паролей, которая определяет такие параметры, как сложность, Длина и возраст пароля. Существует также политика, которая определяет допустимые символы и длину имен пользователей.

При использовании самостоятельного сброса пароля (SSPR) для изменения или сброса пароля в Azure AD проверяется политика паролей. Если пароль не соответствует требованиям политики, пользователю предлагается повторить попытку. Администраторы Azure имеют некоторые ограничения на использование SSPR, которые отличаются от обычных учетных записей пользователей.

В этой статье описываются параметры политики паролей и требования к сложности, связанные с учетными записями пользователей в клиенте Azure AD, а также использование PowerShell для проверки или установки параметров истечения срока действия пароля.

## <a name="username-policies"></a><a name="userprincipalname-policies-that-apply-to-all-user-accounts"></a>Политики имен пользователей

Каждая учетная запись, которая входит в Azure AD, должна иметь уникальное значение атрибута имени участника-пользователя (UPN), связанное с учетной записью. В гибридных средах с локальной средой домен Active Directory Services (AD DS), синхронизированной с Azure AD с помощью Azure AD Connect, по умолчанию имя участника-пользователя Azure AD устанавливается в локальный UPN.

В следующей таблице перечислены политики имен пользователей, которые применяются к локальным учетным записям AD DS, синхронизированным с Azure AD, а также только к облачным учетным записям пользователей, созданным непосредственно в Azure AD:

| Свойство | Требования UserPrincipalName |
| --- | --- |
| Допустимые символы |<ul> <li>A–Z</li> <li>a–z</li><li>0–9</li> <li> ' \. - \_ ! \# ^ \~</li></ul> |
| Недопустимые символы |<ul> <li>Любой знак \@\", который не отделяет имя пользователя от домена.</li> <li>Не может содержать знак точки "." непосредственно перед знаком \@\".</li></ul> |
| Ограничения длины |<ul> <li>Общая длина не должна превышать 113 знаков.</li><li>Перед знаком \@\" может быть до 64 знаков.</li><li>После знака \@\" может быть до 48 знаков.</li></ul> |

## <a name="azure-ad-password-policies"></a><a name="password-policies-that-only-apply-to-cloud-user-accounts"></a>Политики паролей Azure AD

Политика паролей применяется ко всем учетным записям пользователей, которые создаются и управляются непосредственно в Azure AD. Некоторые из этих параметров политики паролей нельзя изменить, хотя можно [настроить настраиваемые пароли для защиты паролей Azure AD](tutorial-configure-custom-password-protection.md) или параметры блокировки учетной записи.

По умолчанию учетная запись блокируется после 10 неудачных попыток входа с неверным паролем. Пользователь заблокирован в течение одной минуты. Последующие неудачные попытки входа приведут к блокировке пользователя на более длительное время. При [интеллектуальной блокировке](howto-password-smart-lockout.md) отслеживаются последние три неправильные хэши паролей, чтобы избежать увеличения счетчика блокировки для одного и того же пароля. Если пользователь введет один и тот же неправильный пароль несколько раз, это не приведет к блокировке учетной записи. Можно определить пороговое значение и длительность Smart-блокировки.

Политика паролей Azure AD не применяется к учетным записям пользователей, синхронизированным из локальной среды AD DS с помощью Azure AD Connect, если не включена *енфорцеклаудпассвордполицифорпассвордсинцедусерс*.

Определены следующие параметры политики паролей Azure AD. Если не указано иное, эти параметры изменить нельзя.

| Свойство | Requirements (Требования) |
| --- | --- |
| Допустимые символы |<ul><li>A–Z</li><li>a–z</li><li>0–9</li> <li>@ # $ % ^ & * - _ ! + = [] {} &#124; \: ",. ? / \` ~ " ( ) ;</li> <li>пустое пространство</li></ul> |
| Недопустимые символы | Знаки Юникода. |
| Ограничения для пароля |<ul><li>Не менее 8 символов и не более 256 символов.</li><li>Необходимо выполнить 3 из 4 следующих условий:<ul><li>строчные буквы;</li><li>прописные буквы;</li><li>числа (0–9);</li><li>символы (см. ограничения для пароля выше).</li></ul></li></ul> |
| Длительность срока действия пароля (максимальный возраст пароля) |<ul><li>Значение по умолчанию: **90** дней.</li><li>Значение можно изменить с помощью командлета `Set-MsolPasswordPolicy` из модуля Azure Active Directory для Windows PowerShell.</li></ul> |
| Уведомление об истечении срока действия пароля (когда пользователи получают уведомление об истечении срока действия пароля) |<ul><li>Значение по умолчанию: **14** дней (до истечения срока действия пароля).</li><li>Это значение можно настроить с помощью командлета `Set-MsolPasswordPolicy`.</li></ul> |
| Срок действия пароля истекает (разрешить пароли никогда не истекает) |<ul><li>Значение по умолчанию: **false** (указывает, что у пароля есть Дата окончания срока действия).</li><li>Это значение можно настроить для каждой учетной записи пользователя с помощью командлета `Set-MsolUser`.</li></ul> |
| Журнал изменения пароля | Последний пароль *невозможно* использовать повторно, когда пользователь изменяет пароль. |
| Журнал сброса пароля | Последний пароль *можно* использовать повторно, когда пользователь сбрасывает забытый пароль. |

## <a name="administrator-reset-policy-differences"></a>Различия политики сброса администратора

По умолчанию учетные записи администратора включены для самостоятельного сброса пароля, и принудительно применяется строгая политика сброса паролей с *двумя шлюзами* по умолчанию. Эта политика может отличаться от той, которая была определена для пользователей, и эта политика не может быть изменена. Всегда следует тестировать функции сброса пароля от имени пользователя, которому не назначена какая-либо роль администратора Azure.

При использовании двухфакторной политики у администраторов нет возможности применять контрольные вопросы.

Двухфакторная политика требует ввода двух фрагментов данных для аутентификации, таких как адрес электронной почты, приложение Authenticator или номер телефона. Двухфакторная политика применяется в следующих случаях:

* затронуты все следующие роли администратора:
  * администратор службы технической поддержки;
  * администратор службы поддержки;
  * Администратор выставления счетов
  * Служба поддержка партнеров уровня 1
  * Служба поддержка партнеров уровня 2
  * администратор Exchange;
  * администратор почтовых ящиков;
  * администратор Skype для бизнеса;
  * Администратор пользователей
  * создатели каталогов;
  * глобальный или корпоративный администратор;
  * администратор SharePoint;
  * администратор соответствия требованиям.
  * администратор приложений;
  * администратор безопасности;
  * администратор привилегированных ролей;
  * Администратор Intune
  * Локальный администратор присоединенного к Azure AD устройства
  * администратор прокси-сервера приложений;
  * Администратор Dynamics 365
  * администратор службы Power BI.
  * Администратор проверки подлинности
  * Администратор паролей
  * Администратор привилегированной проверки подлинности

* если прошло 30 дней с момента установки пробной подписки; или
* Для вашего клиента Azure AD настроен пользовательский домен, например *contoso.com*; ни
* Azure AD Connect выполняет синхронизацию удостоверений из вашего локального каталога.

Вы можете отключить использование SSPR для учетных записей администратора с помощью командлета PowerShell [Set-MsolCompanySettings](/powershell/module/msonline/set-msolcompanysettings) . `-SelfServePasswordResetEnabled $False`Параметр отключает SSPR для администраторов.

### <a name="exceptions"></a>Исключения

Однофакторная политика требует ввода одного фрагмента данных для аутентификации, такого как адрес электронной почты или номер телефона. Однофакторная политика применяется в следующих случаях:

* еще не прошло 30 дней с момента установки пробной подписки; или
* Для вашего клиента Azure AD не настроен пользовательский домен, поэтому используется значение по умолчанию **. onmicrosoft.com*. Домен по умолчанию **. onmicrosoft.com* не рекомендуется для использования в рабочей среде. перетаскивани
* Azure AD Connect не выполняет синхронизацию удостоверений.

## <a name="password-expiration-policies"></a><a name="set-password-expiration-policies-in-azure-ad"></a>Политики истечения срока действия паролей

*Глобальный администратор* или *администратор пользователей* может использовать [модуль Microsoft Azure AD для Windows PowerShell](/powershell/module/Azuread/) , чтобы задать для паролей пользователей не срок действия.

Кроме того, можно использовать командлеты PowerShell, чтобы удалить конфигурацию с неистекшим сроком действия или определить, какие пароли пользователей не имеют срока действия.

Это руководство относится к другим поставщикам, таким как Intune и Microsoft 365, которые также используют Azure AD для идентификации и служб каталогов. Срок действия пароля — это единственное, что может быть изменено в политике.

> [!NOTE]
> Только пароли для учетных записей пользователей, которые не синхронизированы с помощью Azure AD Connect, могут быть настроены на неограниченный срок действия. Дополнительные сведения о синхронизации каталогов см. в статье [Интеграция локальных каталогов с Azure Active Directory](../hybrid/whatis-hybrid-identity.md).

### <a name="set-or-check-the-password-policies-by-using-powershell"></a>Задание или проверка политик пароля с помощью PowerShell

Чтобы приступить к работе, [скачайте и установите модуль Azure AD PowerShell](/powershell/module/Azuread/) и [подключите его к клиенту Azure AD](/powershell/module/azuread/connect-azuread#examples).

После установки модуля выполните следующие действия, чтобы выполнить каждую задачу по мере необходимости.

### <a name="check-the-expiration-policy-for-a-password"></a>Проверка политики срока действия пароля

1. Откройте командную строку PowerShell и [подключитесь к клиенту Azure AD](/powershell/module/azuread/connect-azuread#examples) с помощью учетной записи *глобального администратора* или *администратора пользователей* .
1. Выполните одну из следующих команд либо для отдельного пользователя, либо для всех пользователей.

   * Чтобы узнать, не просрочен ли пароль одного пользователя, выполните следующий командлет. Замените `<user ID>` идентификатором пользователя, которого требуется проверить, например *дрилэй \@ contoso.onmicrosoft.com*:

       ```powershell
       Get-AzureADUser -ObjectId <user ID> | Select-Object @{N="PasswordNeverExpires";E={$_.PasswordPolicies -contains "DisablePasswordExpiration"}}
       ```

   * Чтобы просмотреть параметр **Пароль не имеет окончания срока действия** для всех пользователей, выполните следующий командлет: .

       ```powershell
       Get-AzureADUser -All $true | Select-Object UserPrincipalName, @{N="PasswordNeverExpires";E={$_.PasswordPolicies -contains "DisablePasswordExpiration"}}
       ```

### <a name="set-a-password-to-expire"></a>Задание срока действия пароля

1. Откройте командную строку PowerShell и [подключитесь к клиенту Azure AD](/powershell/module/azuread/connect-azuread#examples) с помощью учетной записи *глобального администратора* или *администратора пользователей* .
1. Выполните одну из следующих команд либо для отдельного пользователя, либо для всех пользователей.

   * Чтобы задать пароль одного пользователя, чтобы срок действия пароля истек, выполните следующий командлет. Замените `<user ID>` идентификатором пользователя, которого требуется проверить, например *дрилэй \@ contoso.onmicrosoft.com*

       ```powershell
       Set-AzureADUser -ObjectId <user ID> -PasswordPolicies None
       ```

   * Чтобы задать срок действия паролей всех пользователей в организации, используйте следующий командлет: 

       ```powershell
       Get-AzureADUser -All $true | Set-AzureADUser -PasswordPolicies None
       ```

### <a name="set-a-password-to-never-expire"></a>Установка бессрочного пароля

1. Откройте командную строку PowerShell и [подключитесь к клиенту Azure AD](/powershell/module/azuread/connect-azuread#examples) с помощью учетной записи *глобального администратора* или *администратора пользователей* .
1. Выполните одну из следующих команд либо для отдельного пользователя, либо для всех пользователей.

   * Чтобы задать бессрочный пароль для одного пользователя, выполните следующий командлет. Замените `<user ID>` идентификатором пользователя, которого требуется проверить, например *дрилэй \@ contoso.onmicrosoft.com*

       ```powershell
       Set-AzureADUser -ObjectId <user ID> -PasswordPolicies DisablePasswordExpiration
       ```

   * Чтобы установить бессрочный пароль для всех пользователей в организации, запустите следующий командлет:

       ```powershell
       Get-AzureADUser -All $true | Set-AzureADUser -PasswordPolicies DisablePasswordExpiration
       ```

   > [!WARNING]
   > Пароль, для которого задано `-PasswordPolicies DisablePasswordExpiration`, по-прежнему имеет срок использования, определяемый атрибутом `pwdLastSet`. В зависимости от атрибута `pwdLastSet`, если задать срок действия, указав `-PasswordPolicies None`, то всем пользователям, у паролей которых значение `pwdLastSet` превышает 90 дней, будет необходимо сменить пароль при следующем входе. Это изменение может повлиять на большое количество пользователей.

## <a name="next-steps"></a>Дальнейшие действия

Чтобы приступить к работе с SSPR, см. раздел [учебник. предоставление пользователям возможности разблокировать учетную запись или сбросить пароли с помощью Azure Active Directory самостоятельного сброса пароля](tutorial-enable-sspr.md).

Если у вас или у пользователей возникли проблемы с SSPR, см. раздел [Устранение неполадок самостоятельного сброса пароля](./troubleshoot-sspr.md)
