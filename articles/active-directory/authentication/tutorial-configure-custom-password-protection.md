---
title: Настройка пользовательских списков защиты паролей в Azure Active Directory
description: Из этого руководства вы узнаете, как настроить для защиты паролей Azure Active Directory пользовательские списки, которые ограничивают применение распространенных слов.
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: tutorial
ms.date: 07/13/2020
ms.author: justinha
author: justinha
ms.reviewer: rogoya
ms.collection: M365-identity-device-management
ms.openlocfilehash: 89abdcf4c76c92c2ed967594527d323b2cd8be32
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "96741190"
---
# <a name="tutorial-configure-custom-banned-passwords-for-azure-active-directory-password-protection"></a>Руководство по настройке пользовательских списков запрещенных слов для защиты паролей в Azure Active Directory

Многие пользователи создают пароли с характерными распространенными словами, например названием школы, спортивной команды или именем известного человека. Такие пароли легко угадать и они плохо защищены от атак на основе словарей. Чтобы пароли в организации были более надежными, вы можете создать в Azure Active Directory (Azure AD) пользовательский список запрещенных паролей и добавить в него определенные строки, которые нужно проверять и блокировать. Запрос на изменение пароля завершится ошибкой, если новый пароль совпадает со строкой из списка запрещенных паролей.

Из этого руководства вы узнаете, как выполнить следующие задачи:

> [!div class="checklist"]
> * Включение пользовательского списка запрещенных паролей
> * Добавление записей в пользовательский список запрещенных паролей
> * Проверка невозможности смены пароля на любой из запрещенных

## <a name="prerequisites"></a>Предварительные требования

Для работы с этим учебником требуются следующие ресурсы и разрешения:

* Рабочий клиент Azure AD, для которого включена по меньшей мере лицензия Azure AD Premium P1 или пробная лицензия.
    * [Создайте ее бесплатно](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), если нужно.
* Учетная запись с привилегиями *глобального администратора*.
* Тестовый пользователь без прав администратора, пароль которого вам известен, например *testuser*. В рамках этого руководства вы протестируете событие смены пароля, используя эту учетную запись.
    * Если вам нужно создать пользователя, воспользуйтесь статьей [Краткое руководство. Добавление или удаление пользователей в Azure Active Directory](../fundamentals/add-users-azure-active-directory.md).
    * Чтобы проверить смену пароля с запрещенным значением, для клиента Azure AD должна быть включена [функция самостоятельного сброса пароля](tutorial-enable-sspr.md).

## <a name="what-are-banned-password-lists"></a>Что такое список запрещенных паролей?

Azure AD поддерживает глобальный список запрещенных паролей. Содержимое глобального списка запрещенных паролей не зависит от какого-либо внешнего источника данных. Глобальный список запрещенных паролей основывается лишь на результатах постоянных проверок и анализа безопасности в Azure AD. Когда пользователь или администратор пытается изменить или сбросить учетные данные, выбранный пароль проверяется по списку запрещенных паролей. Этот запрос на изменение пароля завершится ошибкой, если новый пароль совпадает со строкой из глобального списка запрещенных паролей. Этот глобальный список запрещенных паролей по умолчанию нельзя изменить.

Чтобы обеспечить гибкость в определении разрешенных паролей, вы можете дополнительно определить пользовательский список запрещенных паролей. Пользовательский список запрещенных паролей применяется наравне с глобальным списком запрещенных паролей, чтобы обеспечить использование надежных паролей в организации. В пользовательский список запрещенных паролей можно добавить важные или типичные для организации термины, например:

* названия торговых марок;
* названия продуктов;
* расположения подразделений компании, например штаб-квартиры;
* характерные для организации слова внутреннего употребления;
* аббревиатуры, имеющие важное значение для конкретной организации.

Если пользователь при сбросе пароля попытается указать любую строку из пользовательского или глобального списка запрещенных паролей, он увидит одно из следующих сообщений об ошибке:

* *Пароль содержит слово, фразу или шаблон, которые легко угадать. Повторите попытку, указав другой пароль.*
* *К сожалению, вы не можете использовать этот пароль, так как он содержит слова или символы, заблокированные администратором. Попробуйте указать другой пароль.*

Длина пользовательского списка заблокированных паролей ограничена значением 1000 элементов. Он не предназначен для блокирования больших списков паролей. Чтобы получить максимальную пользу от пользовательского списка запрещенных паролей, ознакомьтесь с [концепцией применения пользовательского списка запрещенных паролей](concept-password-ban-bad.md#custom-banned-password-list) и [обзорными сведениями об алгоритме оценки паролей](concept-password-ban-bad.md#how-are-passwords-evaluated).

## <a name="configure-custom-banned-passwords"></a>Настройка пользовательского списка запрещенных паролей

Давайте попробуем включить пользовательский список запрещенных паролей и добавить в него несколько записей. Вы в любое время можете добавлять записи в пользовательский список запрещенных паролей.

Чтобы включить пользовательский список запрещенных паролей и добавить в него несколько записей, выполните следующую процедуру:

1. Войдите на [портал Azure](https://portal.azure.com), используя учетную запись с правами *глобального администратора*.
1. Найдите и выберите **Azure Active Directory**, а затем — раздел **Безопасность** в меню слева.
1. В разделе меню **Управление** выберите **Методы проверки подлинности** и щелкните **Защита паролей**.
1. Для параметра **Принудительный настраиваемый список** задайте значение *Да*.
1. Добавьте по одной строке на каждую линию в **пользовательский список запрещенных паролей**. Для пользовательского списка запрещенных паролей действуют следующие рекомендации и ограничения:

    * Пользовательский список запрещенных паролей может содержать не больше 1000 терминов.
    * В нем также учитывается регистр.
    * В пользовательском списке запрещенных паролей учитывается стандартная подстановка символов, например "o" вместо "0" и "a" вместо "\@".
    * Минимальная длина строки составляет четыре символа, а максимальная — 16 символов.

    Укажите собственные значения паролей для запрета, как показано в следующем примере.

    [ ![Изменение пользовательского списка заблокированных паролей в разделе "Способы аутентификации" на портале Azure](media/tutorial-configure-custom-password-protection/enable-configure-custom-banned-passwords-cropped.png) ](media/tutorial-configure-custom-password-protection/enable-configure-custom-banned-passwords.png#lightbox)

1. Для параметра **Включить защиту паролем в Windows Server Active Directory** оставьте значение *Нет*.
1. Чтобы включить пользовательский список запрещенных паролей с указанными вами значениями, щелкните **Сохранить**.

Применение изменений для пользовательского списка заблокированных паролей может занять несколько часов.

Для гибридной среды можно также [развернуть защиту паролей Azure AD в локальной среде](howto-password-ban-bad-on-premises-deploy.md). Для облачных и локальных запросов на смену паролей используются одни и те же глобальный и пользовательский списки запрещенных паролей.

## <a name="test-custom-banned-password-list"></a>Тестирование пользовательского списка запрещенных паролей

Чтобы проверить, как действует пользовательский список запрещенных паролей, попробуйте изменить пароль так, чтобы он содержал любое из слов, добавленных в предыдущем разделе. Когда Azure AD начнет обрабатывать запрос на изменение пароля, обнаружится совпадение нового пароля с записью в пользовательском списке запрещенных паролей. Пользователь получит сообщение об ошибке.

> [!NOTE]
> Чтобы пользователь мог сменить свой пароль через веб-портал, для клиента Azure AD должна быть включена [функция самостоятельного сброса пароля](tutorial-enable-sspr.md). При необходимости пользователь может [зарегистрироваться для SSPR на странице https://aka.ms/ssprsetup](https://aka.ms/ssprsetup).

1. Перейдите на страницу **Мои приложения** в [https://myapps.microsoft.com](https://myapps.microsoft.com).
1. Вверху справа щелкните имя и выберите **Профиль** в раскрывающемся меню.

    ![Выбор параметра "Профиль"](media/tutorial-configure-custom-password-protection/myapps-profile.png)

1. На странице **Профиль** щелкните **Изменить пароль**.
1. На странице **Изменение пароля** введите существующий (старый) пароль. Введите и подтвердите новый пароль, включенный в пользовательский список запрещенных паролей, который вы определили в предыдущем разделе, а затем щелкните **Отправить**.
1. Вы получите сообщение об ошибке, в котором сказано, что пароль заблокирован администратором, как показано в следующем примере:

    ![Сообщение об ошибке, отображаемое при попытке использовать пароль, включенный в пользовательский список запрещенных паролей](media/tutorial-configure-custom-password-protection/password-change-error.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы решили отказаться от применения пользовательского списка запрещенных паролей, который вы настроили при работе с этим руководством, выполните следующую процедуру.

1. Войдите на [портал Azure](https://portal.azure.com).
1. Найдите и выберите **Azure Active Directory**, а затем — раздел **Безопасность** в меню слева.
1. В разделе меню **Управление** выберите **Методы проверки подлинности** и щелкните **Защита паролей**.
1. Для параметра **Принудительный настраиваемый список** задайте значение *Нет*.
1. Чтобы обновить конфигурацию пользовательского списка запрещенных паролей, щелкните **Сохранить**.

## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнали, как включить и настроить пользовательские списки защиты паролей для Azure AD. Вы ознакомились с выполнением следующих задач:

> [!div class="checklist"]
> * Включение пользовательского списка запрещенных паролей
> * Добавление записей в пользовательский список запрещенных паролей
> * Проверка невозможности смены пароля на любой из запрещенных

> [!div class="nextstepaction"]
> [Включение Многофакторной идентификации Azure AD на основе рисков](./tutorial-enable-azure-mfa.md)