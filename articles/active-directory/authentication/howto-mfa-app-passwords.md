---
title: Настройка паролей приложений для многофакторной идентификации Azure AD Azure Active Directory
description: Узнайте, как настроить и использовать пароли приложений для устаревших приложений в службе многофакторной идентификации Azure AD.
services: multi-factor-authentication
ms.service: active-directory
ms.subservice: authentication
ms.topic: how-to
ms.date: 06/05/2020
ms.author: justinha
author: justinha
manager: daveba
ms.reviewer: michmcla
ms.collection: M365-identity-device-management
ms.openlocfilehash: dfb38f9fcdba6898b690d0af68b715fea07e80bb
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96743111"
---
# <a name="enable-and-use-azure-ad-multi-factor-authentication-with-legacy-applications-using-app-passwords"></a>Включение и использование многофакторной проверки подлинности Azure AD с устаревшими приложениями с помощью паролей приложений

Некоторые старые приложения, не относящиеся к браузеру, такие как Office 2010 или более ранней версии и Apple Mail, до iOS 11 не понимают паузы или перерывы в процессе проверки подлинности. Если пользователь включен для многофакторной идентификации Azure AD и пытается использовать одно из этих старых приложений, не относящихся к браузеру, они не смогут пройти проверку подлинности. Чтобы использовать эти приложения безопасным способом с включенной многофакторной идентификацией Azure AD для учетных записей пользователей, можно использовать пароли приложений. Эти пароли приложений заменили традиционный пароль, чтобы позволить приложению обходить многофакторную проверку подлинности и работать правильно.

Современная аутентификация поддерживается для клиентов Microsoft Office 2013 и более поздних версий. Клиенты Office 2013, в том числе Outlook, поддерживают современные протоколы проверки подлинности и могут быть включены для двухфакторной проверки. После включения клиента пароли приложений для клиента вводить не обязательно.

В этой статье показано, как включить и использовать пароли приложений для устаревших приложений, которые не поддерживают запросы многофакторной проверки подлинности.

>[!NOTE]
> Пароли приложений не работают с политиками многофакторной проверки подлинности на основе условного доступа и современной проверкой подлинности.

## <a name="overview-and-considerations"></a>Общие сведения и рекомендации

Если учетная запись пользователя включена для многофакторной идентификации Azure AD, то обычный запрос на вход прерывается с помощью запроса на дополнительную проверку. Некоторые старые приложения не понимают этот перерыв в процессе входа, поэтому проверка подлинности завершается неудачно. Чтобы сохранить безопасность учетной записи пользователя и включить многофакторную идентификацию Azure AD, вместо обычных имени пользователя и пароля можно использовать пароли приложений. Если пароль приложения используется во время входа в систему, нет дополнительных запросов проверки, поэтому проверка подлинности будет успешной.

Пароли приложений создаются автоматически, а не задаются пользователем. Этот автоматически созданный пароль затрудняет взлом злоумышленника, поэтому обеспечивает более высокий уровень безопасности. Пользователям не нужно записывать пароли или вводить их каждый раз, когда пароли приложений вводятся только один раз для каждого приложения.

При использовании паролей приложений применяются следующие соображения.

* Существует ограничение в 40 паролей приложений на пользователя.
* Приложения, которые кэшируют пароли и используют их в локальных сценариях, могут завершиться сбоем, так как пароль приложения не известен за пределами рабочей или учебной учетной записи. Примером этого сценария являются сообщения электронной почты Exchange, которые хранятся локально, но архивируются в облаке. В этом сценарии один и тот же пароль работать не будет.
* После включения многофакторной идентификации Azure AD в учетной записи пользователя пароли приложений можно использовать с большинством клиентов, не являющихся браузерами, например Outlook и Microsoft Skype для бизнеса. Однако административные действия нельзя выполнять с помощью паролей приложений через приложения, не относящиеся к браузеру, например Windows PowerShell. даже если у пользователя есть учетная запись администратора.
    * Создайте учетную запись службы с надежным паролем для выполнения скриптов PowerShell и не включайте для этой учетной записи двухфакторную проверку подлинности.
* Если вы подозреваете, что учетная запись пользователя скомпрометирована и отменяет или сбрасывает пароль учетной записи, необходимо также обновить пароли приложений. Пароли приложений не отменяются автоматически при отмене или сбросе пароля учетной записи пользователя. Пользователь должен удалить существующие пароли приложений и создать новые.
   * Дополнительные сведения см. [в статье Создание и удаление паролей приложений на странице "дополнительная проверка безопасности"](../user-help/multi-factor-authentication-end-user-app-passwords.md#create-and-delete-app-passwords-from-the-additional-security-verification-page).

>[!WARNING]
> Пароли приложений не работают в гибридных средах, где клиенты взаимодействуют одновременно с локальными и облачными конечными точками автообнаружения. Для проверки подлинности в локальной среде необходимы пароли доменов. Для проверки подлинности в облачной среде необходимы пароли приложений.

### <a name="app-password-names"></a>Имена паролей приложений

Имена паролей приложений должны указывать название устройства, на котором они будут использоваться. Если у вас есть ноутбук с такими внебраузерными приложениями, как Outlook, Word и Excel, создайте всего один пароль приложения с именем **Ноутбук** для этих приложений. На настольном компьютере создайте для этого приложения новый пароль приложения с именем **Настольный компьютер**.

Рекомендуется создавать один пароль приложения для каждого устройства, а не один пароль приложения для каждого приложения.

## <a name="federated-or-single-sign-on-app-passwords"></a>Пароли приложений с федеративным или единым входом

Azure AD поддерживает федерацию или единый вход (SSO) с локальными службами домен Active Directory Services (AD DS). Если ваша организация является Федеративной с Azure AD и вы используете многофакторную идентификацию Azure AD, применяются следующие рекомендации по использованию пароля для приложения:

>[!NOTE]
> Следующие пункты относятся только к федеративным клиентам (единый вход).

* Пароль приложения проверяется Azure AD и поэтому обходит федерацию. Федерация активно используется только при задании пароля приложения.
* В случае с федеративными (SSO) пользователями, мы не будем обращаться к поставщику удостоверений (IdP) в отличие от пассивного процесса. Пароли приложений хранятся в рабочей или учебной учетной записи. Если пользователь покидает компанию, данные пользователя передаются в рабочую или учебную учетную запись с помощью **DirSync** в режиме реального времени. Для синхронизации операции отключения или удаления учетной записи может потребоваться до трех часов, что может задержать отключение или удаление пароля приложения в Azure AD.
* Параметры контроля доступа локальных клиентов не учитываются при использовании паролей приложений.
* В функции паролей приложений нет возможности локального ведения журнала проверки подлинности или аудита.

Для некоторых сложных архитектур требуется сочетание учетных данных для многофакторной идентификации с клиентами. имя пользователя и пароли рабочей или учебной учетной записи и пароли приложения. Требования зависят от того, как выполняется проверка подлинности. Что касается клиентов, выполняющих проверку подлинности в локальной инфраструктуре, использование имени пользователя и пароля рабочей или учебной учетной записи обязательно. Что касается клиентов, выполняющих проверку подлинности в Azure AD, требуется использовать пароль приложения.

Предположим, что у вас есть следующая архитектура:

* вы задаете федеративную связь своего локального экземпляра Active Directory с Azure AD;
* Вы используете Exchange Online.
* Вы используете локальную среду Skype для бизнеса.
* Вы используете многофакторную идентификацию Azure AD.

В этом сценарии можно использовать следующие учетные данные:

* Для входа в Skype для бизнеса используйте имя пользователя и пароль рабочей или учебной учетной записи.
* При доступе к адресной книге через клиент Outlook, который подключается к Exchange Online, используйте пароль приложения.

## <a name="allow-users-to-create-app-passwords"></a>Предоставление пользователям разрешения создавать пароли приложений

По умолчанию пользователи не могут создавать пароли приложений. Чтобы пользователи могли их использовать, необходимо включить функцию паролей приложений. Чтобы дать пользователям возможность создавать пароли приложений, выполните следующие действия.

1. Войдите на [портал Azure](https://portal.azure.com).
2. Найдите и выберите **Azure Active Directory**, а затем выберите **Пользователи**.
3. На панели навигации в верхней части окна *пользователей* выберите **многофакторную проверку подлинности** .
4. В разделе "Многофакторная аутентификация" выберите **Параметры службы**.
5. На странице **Параметры службы** выберите вариант **Разрешить пользователям создавать пароли приложений для входа в приложения, не относящиеся к браузеру**.

    ![Снимок экрана портала Azure, отображающий параметры службы для многофакторной проверки подлинности, которые разрешают использовать пароли к приложениям](media/concept-authentication-methods/app-password-authentication-method.png)
    
> [!NOTE]
>
> При отключении пользователям возможности создавать пароли приложений существующие пароли приложений продолжают работать. Однако при отключении этой возможности пользователи не могут управлять и удалять существующие пароли приложений.
>
> При отключении возможности создавать пароли приложений также рекомендуется [создать политику условного доступа для отключения использования устаревшей проверки подлинности](../conditional-access/block-legacy-authentication.md). Такой подход предотвращает работу существующих паролей приложений и принудительно использует современные методы проверки подлинности.

## <a name="create-an-app-password"></a>Создание пароля приложения

После завершения начальной регистрации пользователей для многофакторной идентификации Azure AD можно создать пароли приложений в конце процесса регистрации.

Пользователи также могут создавать пароли приложений после регистрации, Дополнительные сведения и подробные инструкции для пользователей см [. в статье что такое пароли приложений в службе многофакторной идентификации Azure AD?](../user-help/multi-factor-authentication-end-user-app-passwords.md)

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о том, как разрешить пользователям быстро регистрироваться в службе многофакторной идентификации Azure AD, см. в статье Общие сведения о [регистрации в общей безопасности](concept-registration-mfa-sspr-combined.md).
