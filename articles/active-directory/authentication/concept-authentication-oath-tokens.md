---
title: Метод проверки подлинности OATH-маркеров — Azure Active Directory
description: Сведения об использовании токенов OATH в Azure Active Directory для улучшения и защиты событий входа в систему
services: active-directory
ms.service: active-directory
ms.subservice: authentication
ms.topic: conceptual
ms.date: 09/02/2020
ms.author: justinha
author: justinha
manager: daveba
ms.collection: M365-identity-device-management
ms.openlocfilehash: 9276fca62e96395150c9545b8f4dcb5c8c0afb87
ms.sourcegitcommit: 4e70fd4028ff44a676f698229cb6a3d555439014
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/28/2021
ms.locfileid: "98954248"
---
# <a name="authentication-methods-in-azure-active-directory---oath-tokens"></a>Методы проверки подлинности в токенах Azure Active Directory-OATH

Одноразовый пароль OATH с ограниченным сроком действия (OATH TOTP) — это открытый стандарт, определяющий способ генерирования кодов одноразового пароля (OTP). OATH TOTP можно реализовать с помощью программного или аппаратного обеспечения для создания кодов. Azure AD не поддерживает OATH HOTP — другой стандарт генерирования кодов.

## <a name="oath-software-tokens"></a>Программные маркеры OATH

Программные маркеры OATH, как правило, представляют собой приложение (например, Microsoft Authenticator и ряд других). Azure AD создает секретный ключ или начальное значение, которое вводится в приложение и используется для создания каждого OTP.

Приложение Microsoft Authenticator автоматически создает коды при настройке для отправки push-уведомлений, чтобы пользователь имел резервную копию, даже если устройства не подключены. Также можно использовать сторонние приложения, использующие OATH TOTP для создания кодов.

Некоторые аппаратные маркеры OATH TOTP являются программируемыми, то есть не поставляются с предварительно запрограммированным секретным ключом или начальным значением. Эти программируемые аппаратные маркеры можно настроить с помощью секретного ключа или начального значения, полученного в процессе настройки программного маркера. Клиенты могут приобрести эти маркеры у любого выбранного поставщика и использовать секретный ключ или начальное значение в предусмотренном поставщиком процессе настройки.

## <a name="oath-hardware-tokens-preview"></a>Аппаратные маркеры OATH (предварительная версия)

Azure AD поддерживает использование токенов OATH-TOTP SHA-1, обновляющих коды каждые 30–60 секунд. Клиенты могут приобрести эти маркеры у любого поставщика по выбору.

Аппаратные маркеры OATH TOTP, как правило, поставляются с предварительно запрограммированным в маркере секретным ключом или начальным значением. Эти ключи необходимо ввести в Azure AD, как описано в следующих шагах. Максимальная длина секретного ключа — 128 символов, что может быть несовместимо с некоторыми маркерами. Секретный ключ может содержать только символы *a–z* или *A–Z* и цифры *1–7*. Кроме того, он должен иметь кодировку *Base32*.

Программируемые аппаратные маркеры OATH TOTP с возможностью повторного заполнения также можно настроить для Azure AD в процессе настройки программных маркеров.

Аппаратные маркеры OATH поддерживаются как часть общедоступной предварительной версии. См. подробные сведения о [дополнительных условиях использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

![Отправка маркеров OATH в колонку маркеров OATH MFA](media/concept-authentication-methods/mfa-server-oath-tokens-azure-ad.png)

После получения маркеров они должны быть отправлены в формате CSV-файлов, включая UPN, серийный номер, секретный ключ, интервал времени, производителя и модель, как показано в следующем примере:

```csv
upn,serial number,secret key,time interval,manufacturer,model
Helga@contoso.com,1234567,1234567abcdef1234567abcdef,60,Contoso,HardwareKey
```  

> [!NOTE]
> Убедитесь, что вы включили строку заголовка в CSV-файл.

После правильного форматирования в виде CSV-файла администратор может выполнить вход на портал Azure и перейти на **Azure Active Directory > Безопасность > MFA > Маркеры OATH** и отправить полученный CSV-файл.

В зависимости от размера CSV-файла этот процесс может занять несколько минут. Нажмите кнопку **Обновить**, чтобы получить сведения о текущим состоянии. Если в файле есть ошибки, можно скачать CSV-файл с указанием любых ошибок, чтобы устранить их. Имена полей в скачанном CSV-файле отличаются от загруженной версии.  

После устранения ошибок администратор может активировать каждый ключ, щелкнув **Активировать** для маркера, и ввести одноразовый пароль, отображаемый на маркере. Можно активировать не более 200 токенов OATH каждые 5 минут. 

Пользователи могут настроить сочетание до 5 аппаратных маркеров OATH или приложений аутентификации, таких как приложение Microsoft Authenticator, для использования в любое время.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о настройке методов проверки подлинности с помощью [Microsoft Graph REST API бета-версии](/graph/api/resources/authenticationmethods-overview?view=graph-rest-beta).
