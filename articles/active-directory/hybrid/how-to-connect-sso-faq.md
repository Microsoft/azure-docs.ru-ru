---
title: 'Azure AD Connect выполняет следующие функции: простой единый вход — часто задаваемые вопросы | Документация Майкрософт'
description: Ответы на часто задаваемые вопросы о простом едином входе Azure Active Directory.
services: active-directory
keywords: что такое Azure AD Connect, установка Active Directory, необходимые компоненты для Azure AD, единый вход
documentationcenter: ''
author: billmath
manager: daveba
ms.assetid: 9f994aca-6088-40f5-b2cc-c753a4f41da7
ms.service: active-directory
ms.workload: identity
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: how-to
ms.date: 10/07/2019
ms.subservice: hybrid
ms.author: billmath
ms.collection: M365-identity-device-management
ms.openlocfilehash: 2dac4b461d4506015f0ef374eae37f67c445791d
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "98107877"
---
# <a name="azure-active-directory-seamless-single-sign-on-frequently-asked-questions"></a>Простой единый вход Azure Active Directory: Часто задаваемые вопросы

В этой статье представлены часто задаваемые вопросы о простом едином входе Azure Active Directory. Следите за новым содержимым.

**Вопрос. С какими методами входа работает простой единый вход?**

Простой единый вход можно использовать вместе с методами [синхронизация хэша паролей](how-to-connect-password-hash-synchronization.md) или [сквозной проверки подлинности](how-to-connect-pta.md). Однако эту функцию нельзя использовать со службами федерации Active Directory (AD FS).

**Вопрос. Простой единый вход предоставляется бесплатно?**

Это бесплатный компонент, и для его использования не требуются платные выпуски Azure AD.

**Вопрос. Доступен ли простой единый вход в облаках [Azure для Германии](https://www.microsoft.de/cloud-deutschland) и [Azure для государственных организаций](https://azure.microsoft.com/features/gov/)?**

Простой единый вход доступен для облака Azure для государственных организаций. Сведения см. в статье [Рекомендации по гибридной идентификации для Azure для государственных организаций](./reference-connect-government-cloud.md).

**Вопрос. Какие приложения поддерживают возможность использовать параметр `domain_hint` или `login_hint` для простого единого входа?**

Ниже приведен неполный список приложений, которые могут отправить эти параметры в Azure AD и тем самым обеспечить автоматический вход пользователей с помощью простого единого входа (то есть пользователю не требуется вводить имя пользователя или пароль):

| имя приложения; | Используемый URL-адрес приложения |
| -- | -- |
| Панель доступа | https:\//myapps.microsoft.com/contoso.com |
| Outlook on Web | https:\//outlook.office365.com/contoso.com |
| Порталы Office 365 | https:\//portal.office.com?domain_hint=contoso.com, https:\//www.office.com?domain_hint=contoso.com |

Кроме того, пользователи могут использовать автоматический единый вход, если приложение отправляет запросы на вход в конечные точки Azure AD, настроенные как арендаторы, то есть https:\//login.microsoftonline.com/contoso.com/<...> или https:\//login.microsoftonline.com/<ИД_клиента>/<...> вместо обычной конечной точки Azure AD (https:\//login.microsoftonline.com/common/<...>). Ниже приведен неполный список приложений, которые выполняют такие типы запросов на вход.

| имя приложения; | Используемый URL-адрес приложения |
| -- | -- |
| SharePoint Online | https:\//contoso.sharepoint.com |
| Портал Azure | https:\//portal.azure.com/contoso.com |

В приведенных выше таблицах замените contoso.com своим доменным именем, чтобы получить соответствующие URL-адреса приложений для своего клиента.

Если вы хотите использовать автоматический единый вход для других приложений, сообщите нам об этом в разделе отзывов.

**Вопрос. Поддерживает ли простой единый вход в качестве имени пользователя `Alternate ID` вместо `userPrincipalName`?**

Да. Поддерживает ли простой единый вход `Alternate ID` в качестве имени пользователя, если это настроено в Azure AD Connect, как показано [здесь](how-to-connect-install-custom.md). Не все Microsoft 365 поддерживаются приложениями `Alternate ID` . Заявление о поддержке см. в документации к приложению.

**Вопрос. В чем разница между возможностями единого входа, который предоставляется через [присоединение к Azure AD](../devices/overview.md), и простого единого входа?**

После [присоединения к Azure AD](../devices/overview.md) пользователи могут воспользоваться возможностями единого входа, если их устройства зарегистрированы в Azure AD. Эти устройства не должны быть присоединены к домену. Возможность единого входа обеспечивается с помощью *основных токенов обновления* (*PRT*), а не протокола Kerberos. Лучше всего эта возможность работает на устройствах с Windows 10. В браузере Microsoft Edge единый вход выполняется автоматически. Эта возможность также работает в Chrome с использованием расширения браузера.

В клиенте можно настроить и технологию единого входа, предоставленную после присоединения к Azure AD, и простой единый вход. Эти две возможности дополняют друг друга. Если включены обе эти технологии, приоритет имеет единый вход, предоставленный после присоединения к Azure AD.

**Вопрос. Я хочу зарегистрировать устройства, на которых не применяется Windows 10, с помощью Azure AD, без использования AD FS. Можно вместо этого использовать простой единый вход?**

Да, для этого сценария требуется версия 2.1 или более поздняя версия [клиента присоединения к рабочей области](https://www.microsoft.com/download/details.aspx?id=53554).

**Вопрос. Как можно сменить ключ расшифровки Kerberos для учетной записи компьютера `AZUREADSSO`?**

Очень важно часто менять ключ расшифровки Kerberos компьютерной учетной записи `AZUREADSSO` (представляющей Azure AD) в локальном лесу AD.

>[!IMPORTANT]
>Мы настоятельно рекомендуем, чтобы вы меняли ключ расшифровки Kerberos хотя бы раз в 30 дней.

Выполните следующие действия на локальном сервере, на котором выполняется Azure AD Connect:

   > [!NOTE]
   >Для выполнения описанных ниже действий требуются учетные данные администратора домена и глобального администратора.
   >Если вы не являетесь администратором домена и вам были назначены разрешения администратора домена, следует вызвать метод `Update-AzureADSSOForest -OnPremCredentials $creds -PreserveCustomPermissionsOnDesktopSsoAccount`

   **Шаг 1. Получение списка лесов AD, где включен простой единый вход**

   1. Сначала скачайте и установите [Azure PowerShell](/powershell/azure/active-directory/overview).
   2. Перейдите в папку `%programfiles%\Microsoft Azure Active Directory Connect`.
   3. Импортируйте модуль PowerShell для простого единого входа с помощью следующей команды: `Import-Module .\AzureADSSO.psd1`.
   4. Откройте PowerShell от имени администратора. В PowerShell вызовите `New-AzureADSSOAuthenticationContext`. Появится всплывающее окно для ввода учетных данных глобального администратора клиента.
   5. Вызовите процедуру `Get-AzureADSSOStatus | ConvertFrom-Json`. Эта команда выводит список лесов AD (см. список "Домены"), в которых включена эта функция.

   **Шаг 2. Обновление ключа расшифровки Kerberos в каждом лесу AD, в котором он был настроен**

   1. Вызовите процедуру `$creds = Get-Credential`. При запросе введите свои учетные данные администратора домена для нужного леса AD.

   > [!NOTE]
   >Имя пользователя администратора домена необходимо вводит в формате имени учетной записи SAM (contoso\johndoe или contoso.com\johndoe). Мы используем доменную часть имени пользователя, чтобы через DNS найти контроллер домена для администратора домена.

   >[!NOTE]
   >Указанная учетная запись не должна входить в группу защищенных пользователей. В противном случае операция завершится ошибкой.

   2. Вызовите процедуру `Update-AzureADSSOForest -OnPremCredentials $creds`. Эта команда обновляет ключ расшифровки Kerberos для компьютерной учетной записи `AZUREADSSO` в этом лесу AD и обновляет его в Azure AD.
   
   3. Повторите предыдущие шаги для каждого леса AD, где настроена эта функция.
   
  >[!NOTE]
   >При обновлении леса, отличного от Azure AD Connect, убедитесь в наличии подключения к серверу глобального каталога (TCP 3268 и TCP 3269).

   >[!IMPORTANT]
   >_Не_ выполняйте команду `Update-AzureADSSOForest` более одного раза. В противном случае функция перестанет действовать, пока не истечет срок действия пользовательского билета Kerberos и пока локальный экземпляр Active Directory не выдаст новый билет.

**Вопрос. Как отключить простой единый вход?**

   **Шаг 1. Отключение функции в своем арендаторе**

   **Вариант А. Отключение через Azure AD Connect**
    
   1. Запустите Azure AD Connect, перейдите на страницу **Изменение параметров входа пользователя** и щелкните **Далее**.
   2. Затем снимите флажок **Включить единый вход**. Продолжайте выполнять указания мастера.

   После завершения работы мастера простой единый вход будет отключен на вашем клиенте. При этом вы увидите на экране следующее сообщение:

   "Единый вход теперь отключен, но для полной очистки нужен ряд ручных действий. Подробнее".

   Чтобы завершить очистку, выполните шаги 2 и 3 на локальном сервере с запущенным средством Azure AD Connect.

   **Вариант Б. Отключение с помощью PowerShell**

   Выполните следующие действия на локальном сервере с запущенным средством Azure AD Connect:

   1. Сначала скачайте и установите [Azure PowerShell](/powershell/azure/active-directory/overview).
   2. Перейдите в папку `%programfiles%\Microsoft Azure Active Directory Connect`.
   3. Импортируйте модуль PowerShell для простого единого входа с помощью следующей команды: `Import-Module .\AzureADSSO.psd1`.
   4. Откройте PowerShell от имени администратора. В PowerShell вызовите `New-AzureADSSOAuthenticationContext`. Появится всплывающее окно для ввода учетных данных глобального администратора клиента.
   5. Вызовите процедуру `Enable-AzureADSSO -Enable $false`.
   
   На этом этапе простой единый вход отключен, но домены останутся настроенными на тот случай, если вы хотите включить простой единый вход. Если вы хотите полностью удалить домены из полной конфигурации единого входа, вызовите следующий командлет после выполнения шага 5 выше: `Disable-AzureADSSOForest -DomainFqdn <fqdn>` .

   >[!IMPORTANT]
   >Отключение простого единого входа с помощью PowerShell не изменит состояние в Azure AD Connect. Простой единый вход будет отображаться включенным на странице **Изменение параметров входа пользователя**.

   **Шаг 2. Получение списка лесов AD, где включен простой единый вход**

   Выполните задачи 1–4 ниже, если вы отключили простой единый вход с помощью Azure AD Connect. Если вы отключили простой единый вход с помощью PowerShell, сразу переходите к задаче 5 ниже.

   1. Сначала скачайте и установите [Azure PowerShell](/powershell/azure/active-directory/overview).
   2. Перейдите в папку `%programfiles%\Microsoft Azure Active Directory Connect`.
   3. Импортируйте модуль PowerShell для простого единого входа с помощью следующей команды: `Import-Module .\AzureADSSO.psd1`.
   4. Откройте PowerShell от имени администратора. В PowerShell вызовите `New-AzureADSSOAuthenticationContext`. Появится всплывающее окно для ввода учетных данных глобального администратора клиента.
   5. Вызовите процедуру `Get-AzureADSSOStatus | ConvertFrom-Json`. Эта команда выводит список лесов AD (см. список "Домены"), в которых включена эта функция.

   **Шаг 3. Удаление учетной записи компьютера `AZUREADSSO` из каждого леса AD в списке, упомянутом выше, вручную**

## <a name="next-steps"></a>Дальнейшие действия

- [**Краткое руководство.**](how-to-connect-sso-quick-start.md) Настройка и подготовка к работе простого единого входа Azure AD.
- [**Техническое руководство по сквозной проверке подлинности Azure Active Directory**](how-to-connect-sso-how-it-works.md). Сведения о том, как работает эта функция.
- [**Устранение неполадок**](tshoot-connect-sso.md). Узнайте, как устранить самые распространенные проблемы с этой функцией.
- [**UserVoice**](https://feedback.azure.com/forums/169401-azure-active-directory/category/160611-directory-synchronization-aad-connect). Отправка запросов новых функций.
