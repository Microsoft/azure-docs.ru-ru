---
title: Руководство. Начало работы с проверяемыми учетными данными Azure Active Directory с помощью примера приложения (предварительная версия)
description: Из этого руководства вы узнаете, как сформировать проверяемые учетные данные с помощью нашего примера приложения и тестового клиента.
ms.service: identity
ms.subservice: verifiable-credentials
author: barclayn
ms.author: barclayn
ms.topic: tutorial
ms.date: 04/01/2021
ms.openlocfilehash: deebaf31197d8b7335f887ae447f05add45278b2
ms.sourcegitcommit: 3f684a803cd0ccd6f0fb1b87744644a45ace750d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/02/2021
ms.locfileid: "106222891"
---
#  <a name="tutorial---get-started-with-azure-active-directory-verifiable-credentials-using-a-sample-app-preview"></a>Руководство. Начало работы с проверяемыми учетными данными Azure Active Directory с помощью примера приложения (предварительная версия)

В этом руководстве мы выполним действия, необходимые для получения ваших первых проверяемых учетных данных: карточки подтвержденного эксперта по учетным данным. Эту карточку можно использовать для того, чтобы доказать проверяющему, что вы являетесь подтвержденным экспертом по учетным данным, обладающим большим опытом в сфере цифровых учетных данных. Начните работу с проверяемыми учетными данными Azure Active Directory, сформировав свои первые проверяемые учетные данные с помощью примера приложения.

![Изображение с примером карточки](media/get-started-verifiable-credentials/verifiedcredentialexpert-card.png)

> [!IMPORTANT]
> В настоящее время проверяемые учетные данные Azure Active Directory доступны в виде предварительной версии.
> Эта предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для использования рабочей среде. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

## <a name="prerequisites"></a>Предварительные требования

- [NodeJS](https://nodejs.org/en/download/) версии 10.14 или более поздней версии, установленный в тестовой системе.
- Если вы хотите клонировать репозиторий, в котором размещен пример приложения, необходимо установить [GIT](https://git-scm.com/downloads).
- [Visual Studio Code](https://code.visualstudio.com/Download)
- Система для размещения примера сайта.
- Мобильное устройство с установленным Microsoft Authenticator версии 6.2005.3599 или более поздней версии.
- Бесплатная версия [NGROK](https://ngrok.com/).

## <a name="download-the-sample-code"></a>Скачивание примера кода

Чтобы выпустить карточку подтвержденного эксперта по учетным данным, необходимо запустить веб-сайт на локальном компьютере. Веб-сайт используется для запуска процесса выдачи проверяемых учетных данных. Мы создали простой веб-сайт на NodeJS, который используется в рамках этого руководства.

Сначала скачайте наш пример кода из [GitHub](https://github.com/Azure-Samples/active-directory-verifiable-credentials) или клонируйте репозиторий на локальный компьютер:

```terminal
git clone https://github.com/Azure-Samples/active-directory-verifiable-credentials.git
```

При желании вы можете ознакомиться к кодом примера веб-сайта. Папка `issuer` содержит весь код, используемый для выдачи проверяемых учетных данных. Дополнительные сведения см. в [файле сведений](https://github.com/Azure-Samples/active-directory-verifiable-credentials) примера.

## <a name="run-the-issuer-website"></a>Запуск веб-сайта издателя

Эти действия можно выполнять в Visual Studio Code или в любой командной строке, доступной вашей в операционной системе. 

1. Перейдите в папку `issuer`. 

    ```terminal
    cd issuer
    ```

2. После этого необходимо установить все необходимые пакеты и запустить сайт.

   ```terminal
    npm install
    node app.js
    ```

3. В окне терминала вы увидите, что приложение издателя прослушивает порт 8081. Теперь давайте настроим обратный прокси-сервер с помощью Ngrok, чтобы приложение Authenticator могло взаимодействовать с вашим приложением. 

## <a name="creating-a-reverse-proxy-with-ngrok"></a>Создание обратного прокси-сервера с помощью Ngrok

При запуске примера веб-сайта устройству необходимо взаимодействовать с сервером Node, запущенным на локальном компьютере. Мы рекомендуем использовать [ngrok](https://ngrok.com/), так как это позволяет легко сделать локальный сервер разработки доступным через Интернет.

1.  После скачивания и распаковки **ngrok** выполните следующую команду:

    ```terminal
     ngrok http 8081
    ```

По умолчанию пример веб-сайта запускается на порте `8081`. **Ngrok** выводит два URL-адреса перенаправления для сервера. Скопируйте URL-адрес с префиксом `https://`.

![Ngrok позволяет сделать конечные точки приложения доступными через Интернет](media/get-started-verifiable-credentials/ngrok.png)

>[!NOTE] 
> Если вы используете PowerShell, может потребоваться ввести `./ngrok`, чтобы команда была распознана.

Теперь, когда локальный порт открыт для доступа через Интернет с помощью ngrok, пример сайта будет автоматически использовать имя узла, созданное ngrok. Откройте браузер и перейдите на URL-адрес перенаправления ngrok с префиксом HTTPS. Должна открыться домашняя страница примера сайта. Если страница открывается, это означает, что устройство может взаимодействовать с примером приложения, запущенным на локальном сервере. Теперь все готово к выпуску карточки подтвержденного эксперта по учетным данным.

## <a name="issue-a-credential"></a>Выдача учетных данных

1. Установите приложение Authenticator на мобильном устройстве. Приложение Microsoft Authenticator используется для получения и хранения ваших проверяемых учетных данных, а также для их предоставления заинтересованным сторонам.

2. Теперь выдайте себе проверяемые учетные данные. **Нажмите кнопку** **Получить учетные данные**. При нажатии на кнопку **Получить учетные данные** на сайте появится QR-код, который можно просканировать с помощью приложения Authenticator. При просмотре сайта из браузера на мобильном устройстве при нажатии кнопки **Получить учетные данные** будет создана прямая ссылка, по которой будет открыто приложение Authenticator. Сканировать QR-код не потребуется.

   ![Кнопка "Получить учетные данные"](media/get-started-verifiable-credentials/credential-expert-get.png)

3. Просканируйте QR-код на сайте с помощью приложения Authenticator или при доступе к веб-сайту через мобильное устройство нажмите кнопку "Получить учетные данные", чтобы создать прямую ссылку. 

   ![QR-код ](media/get-started-verifiable-credentials/credential-expert-issue.png)

4. Обратите внимание, что кнопка **Добавить** сейчас неактивна. Нажмите **Войти в учетную запись** под изображением карточки.

   ![Вход ](media/get-started-verifiable-credentials/add-verified-credential-expert.png)

5. Прежде чем получить карточку эксперта по учетным данным, вам необходимо предоставить сведения для проверки подлинности в нашем клиенте. Если вы изучаете это руководство впервые и у вас нет учетной записи эксперта по учетным данным, создайте новую учетную запись пользователя в нашем клиенте B2C.

   ![Пройдите проверку подлинности, чтобы продолжить](media/get-started-verifiable-credentials/authenticate-credential-expert.png)

6. После входа кнопка **Добавить** станет активной. Нажмите кнопку **Добавить**, чтобы принять новую виртуальную карточку.

   ![Нажмите кнопку "Добавить" после прохождения проверки подлинности](media/get-started-verifiable-credentials/add-verified-credential-expert-after-auth.png) 


7. Поздравляем! Теперь у вас есть виртуальная карточка подтвержденного эксперта по учетным данным.

   ![Виртуальная карточка подтвержденного эксперта по учетным данным добавлена](media/get-started-verifiable-credentials/credential-expert-add-card.png) 
 
Теперь пора проверить ваши учетные данные.

## <a name="validate-credentials"></a>Проверка учетных данных

Теперь, когда вы сформировали проверяемые учетные данные и они есть в приложении Authenticator, пора проверить эти учетные данные в вашем собственном приложении Verifier.

1.  Остановите службу ngrok, которая использовалась в качестве издателя учетных данных.

    ```terminal
     control+c
    ```


2. В другом окне терминала откройте папку с приложением Verifier и запустите его так же, как мы запускали приложение издателя.

    ```terminal
     cd verifier
     npm install
     node app.js
    ```

3. Теперь запустите ngrok с портом 8082 для приложения Verifier.

    ```terminal
    ngrok http 8082
    ```

4. Откройте URL-адрес перенаправления ngrok с префиксом HTTPS в браузере и нажмите кнопку **ПРОВЕРИТЬ УЧЕТНЫЕ ДАННЫЕ**.  

   ![Кнопка "Проверить учетные данные"](media/get-started-verifiable-credentials/prove-credential-expert.png)

5. Откройте приложение Authenticator и просканируйте QR-код.

   ![Просканируйте QR-код для проверки учетных данных](media/get-started-verifiable-credentials/scan-verify.png)

  > [!IMPORTANT]
  > В iOS он находится в правом верхнем углу, а в Android — в правом нижнем углу. Просканируйте QR-код.

6. Выберите **Разрешить** на экране запроса нового разрешения в приложении Authenticator. Нажимая клавишу "Разрешить", вы подписываете представление проверяемых учетных данных с помощью своего децентрализованного удостоверения (DID), чтобы подтвердить, что вы на самом деле контролируете эти проверяемые учетные данные.

   ![запрос нового разрешения](media/get-started-verifiable-credentials/new-permission-request.png)

    После успешного представления произойдут три обновления:

   1. На веб-странице будет отображаться текст "Поздравляем, теперь [ваше имя] — подтвержденный эксперт по учетным данным!".
   
    ![поздравляем, проверьте карточку еще раз](media/get-started-verifiable-credentials/congratulations.png)


   2. В терминале приложения Verifier должно отображаться то же сообщение из журналов.
   
    ![Активность приложения в командной строке](media/get-started-verifiable-credentials/cmd-verified-expert.png)

   3. В приложении Authenticator должна появиться запись о недавних действиях, связанных с этим представлением.

    ![Активность в приложении Authenticator](media/get-started-verifiable-credentials/recent-activity.png)

   
>[!NOTE]
> При запуске приложения Verifier ngrok может перестать работать и выдать сообщение об ошибке из-за слишком большого числа подключений. Мы обнаружили, что этого можно избежать, зарегистрировав учетную запись в ngrok. 

## <a name="next-steps"></a>Дальнейшие действия

Теперь, после успешного завершения краткого руководства по началу работы, пришло время создать свой собственное децентрализованное удостоверение в службе проверяемых учетных данных Azure AD и выдать собственные проверяемые учетные данные.

>[!div class="nextstepaction"] 
>[Настройка собственного приложения издателя с помощью примера приложения для проверяемых учетных данных](./enable-your-tenant-verifiable-credentials.md)
