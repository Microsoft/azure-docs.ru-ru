---
title: Известные проблемы — Azure Digital двойников
description: Получите помощь в распознавании и устранении известных проблем с цифровым двойников Azure.
author: baanders
ms.author: baanders
ms.topic: troubleshooting
ms.service: digital-twins
ms.date: 07/14/2020
ms.custom: contperf-fy21q3
ms.openlocfilehash: db29fbda404900c29f85fa876e9427994ee9a093
ms.sourcegitcommit: 67b44a02af0c8d615b35ec5e57a29d21419d7668
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/06/2021
ms.locfileid: "97915918"
---
# <a name="known-issues-in-azure-digital-twins"></a>Известные проблемы в службе Digital двойников

В этой статье содержатся сведения об известных проблемах, связанных с Azure Digital двойников.

## <a name="400-client-error-bad-request-in-cloud-shell"></a>"ошибка клиента 400: недопустимый запрос" в Cloud Shell

**Описание проблемы:** Команды в Cloud Shell, выполняемые в *https://shell.azure.com* , могут периодически завершаться ошибкой "400 ошибка клиента: неправильный запрос URL-адреса http://localhost:50342/oauth2/token ", после чего выполняется полная трассировка стека.

| Влияет ли это на меня? | Причина | Решение |
| --- | --- | --- |
| В &nbsp; Azure &nbsp; Digital &nbsp; двойников это влияет на следующие группы команд:<br><br>`az dt route`<br><br>`az dt model`<br><br>`az dt twin` | Это результат известной проблемы в Cloud Shell: [*Получение маркера от Cloud Shell периодически завершается с ошибкой 400 клиента: неправильный запрос*](https://github.com/Azure/azure-cli/issues/11749).<br><br>Это представляет проблему с маркерами проверки подлинности экземпляра Azure Digital двойников и аутентификацией на основе [управляемого удостоверения](../active-directory/managed-identities-azure-resources/overview.md) по умолчанию для Cloud Shell. <br><br>Это не влияет на команды Azure Digital двойников из `az dt` `az dt endpoint` групп команд или, поскольку они используют другой тип маркера проверки подлинности (на основе Azure Resource Manager), который не имеет проблемы с проверкой подлинности управляемого удостоверения Cloud Shell. | Одним из способов решения этой проблемы является повторная попытка выполнить `az login` команду в Cloud Shell и выполнение последующих шагов входа. Это приведет к переключению сеанса из проверки подлинности управляемого удостоверения, что позволяет избежать проблемы с корневым каталогом. После этого вы сможете выполнить команду повторно.<br><br>Кроме того, можно открыть панель Cloud Shell в портал Azure и завершить Cloud Shellную работу.<br>:::image type="content" source="media/troubleshoot-known-issues/portal-launch-icon.png" alt-text="Изображение значка Cloud Shell на панели значков портал Azure" lightbox="media/troubleshoot-known-issues/portal-launch-icon.png":::<br><br>Наконец, еще одним решением является [установка Azure CLI](/cli/azure/install-azure-cli?view=azure-cli-latest&preserve-view=true) на компьютере, чтобы можно было выполнять команды Azure CLI локально. В локальной CLI эта проблема не возникает. |


## <a name="missing-role-assignment-after-scripted-setup"></a>Отсутствует назначение роли после установки в скрипте

**Описание проблемы:** Некоторые пользователи могут столкнуться с проблемами, описанными в разделе "назначение ролей" раздела [*как настроить экземпляр и выполнить проверку подлинности (в сценариях)*](how-to-set-up-instance-scripted.md). Сценарий не указывает на сбой, но роль *владельца данных Digital двойников* не назначена пользователю, и эта проблема повлияет на возможность создания других ресурсов в дороге.

[!INCLUDE [digital-twins-role-rename-note.md](../../includes/digital-twins-role-rename-note.md)]

| Влияет ли это на меня? | Причина | Решение |
| --- | --- | --- |
| Чтобы определить, успешно ли настроено назначение роли после выполнения сценария, следуйте инструкциям в разделе [*Проверка назначения роли пользователя*](how-to-set-up-instance-scripted.md#verify-user-role-assignment) статьи Установка. Если пользователь не отображается в этой роли, эта проблема повлияет на вас. | Для пользователей, выполнивших вход с помощью персонального [учетная запись Майкрософт (MSA)](https://account.microsoft.com/account), идентификатор субъекта пользователя, который идентифицирует вас в таких командах, может отличаться от адреса электронной почты пользователя для входа, что затрудняет его обнаружение и использование для правильного назначения роли. | Чтобы устранить эту проблему, можно настроить назначение ролей вручную с помощью [инструкций CLI](how-to-set-up-instance-cli.md#set-up-user-access-permissions) или [инструкций портал Azure](how-to-set-up-instance-portal.md#set-up-user-access-permissions). |

## <a name="issue-with-interactive-browser-authentication-on-azureidentity-120"></a>Выдача проверки подлинности интерактивного браузера в Azure. Identity 1.2.0

**Описание проблемы:** При написании кода проверки подлинности в приложениях Azure Digital двойников с помощью версии **1.2.0** **библиотеки [Azure. Identity](/dotnet/api/azure.identity?view=azure-dotnet&preserve-view=true)** могут возникнуть проблемы с методом [интерактивебровсеркредентиал](/dotnet/api/azure.identity.interactivebrowsercredential?view=azure-dotnet&preserve-view=true) . Это сообщение об ошибке "Azure. Identity. Аусентикатионфаиледексцептион" при попытке проверки подлинности в окне браузера. Окно браузера может не запуститься полностью или появилось для успешного выполнения проверки подлинности пользователя, в то время как клиентское приложение по-прежнему завершается с ошибкой.

| Влияет ли это на меня? | Причина | Решение |
| --- | --- | --- |
| &nbsp;Затронутый &nbsp; метод &nbsp; &nbsp; используется &nbsp; в &nbsp; &nbsp; следующих статьях:<br><br>[*Руководство. Написание кода для клиентского приложения*](tutorial-code.md)<br><br>[*Пошаговое руководство. Написание кода проверки подлинности приложения*](how-to-authenticate-client.md)<br><br>[*Практические руководства. Использование API-интерфейсов и пакетов SDK для цифровых двойников Azure*](how-to-use-apis-sdks.md) | Некоторые пользователи столкнулись с этой проблемой с версией **1.2.0** `Azure.Identity` библиотеки. | Чтобы устранить эту проблему, обновите приложения, чтобы использовать [более позднюю версию](https://www.nuget.org/packages/Azure.Identity) `Azure.Identity` . После обновления версии библиотеки браузер должен загрузиться и пройти проверку подлинности должным образом. |

## <a name="issue-with-default-azure-credential-authentication-on-azureidentity-130"></a>Проблемы с проверкой подлинности Azure по умолчанию для Azure. Identity 1.3.0

**Описание проблемы:** При написании кода проверки подлинности с помощью версии **1.3.0** **библиотеки [Azure. Identity](/dotnet/api/azure.identity?view=azure-dotnet&preserve-view=true)** некоторые пользователи столкнулись с проблемами в методе [дефаултазурекредентиал](/dotnet/api/azure.identity.defaultazurecredential?view=azure-dotnet?view=azure-dotnet&preserve-view=true) , который используется во многих примерах в этих документах цифровой двойников Azure. Это сообщение об ошибке "Azure. Identity. Аусентикатионфаиледексцептион: сбой проверки подлинности Шаредтокенкачекредентиал", когда код пытается выполнить аутентификацию.

| Влияет ли это на меня? | Причина | Решение |
| --- | --- | --- |
| `DefaultAzureCredential` используется в большинстве примеров документации для этой службы, которая включает проверку подлинности. Если вы создаете код проверки подлинности с помощью `DefaultAzureCredential` с версией 1.3.0 `Azure.Identity` библиотеки и видите это сообщение об ошибке, это влияет на вас. | Это, вероятно, является следствием некоторых проблем с конфигурацией `Azure.Identity` . | Одна из стратегий решения этой проблемы заключается в исключении `SharedTokenCacheCredential` из учетных данных, как описано в этой [дефаултазурекредентиалной ошибке](https://github.com/Azure/azure-sdk/issues/1970) , которая в настоящее время открыта для `Azure.Identity` .<br>Другой вариант — изменить приложение для использования более ранней версии `Azure.Identity` , например [версии 1.2.3](https://www.nuget.org/packages/Azure.Identity/1.2.3). Это не влияет на работу с Azure Digital двойников. Таким же решением также является принятое решение. |

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о безопасности и разрешениях для Azure Digital двойников:
* [*Основные понятия: безопасность решений для цифровых двойников Azure*](concepts-security.md)