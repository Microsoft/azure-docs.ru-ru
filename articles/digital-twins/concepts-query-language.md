---
title: Язык запросов
titleSuffix: Azure Digital Twins
description: Основные сведения о языке запросов Azure Digital двойников.
author: baanders
ms.author: baanders
ms.date: 11/19/2020
ms.topic: conceptual
ms.service: digital-twins
ms.custom: contperf-fy21q2
ms.openlocfilehash: fc9cd95063f84a9af7f989af9a65ce8f99852dc1
ms.sourcegitcommit: 4bda786435578ec7d6d94c72ca8642ce47ac628a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/16/2021
ms.locfileid: "103490982"
---
# <a name="about-the-query-language-for-azure-digital-twins"></a>О языке запросов для Azure Digital двойников

Вспомним, что Центр цифрового двойников Azure — это [двойника граф](concepts-twins-graph.md), созданный на основе цифровых двойников и отношений. 

Этот граф можно запросить для получения сведений о цифровых двойников и отношениях, которые она содержит. Для написания таких запросов используется пользовательский язык запросов, схожий с SQL, который называется **язык запросов Azure Digital Twins**. Это похоже на [язык запросов центра Интернета вещей](../iot-hub/iot-hub-devguide-query-language.md) со многими сравнимыми функциями.

В этой статье описываются основы языка запросов и его возможностей. Более подробные примеры синтаксиса запросов и инструкции по выполнению запросов см. в разделе [*инструкции. запрос к графу двойника*](how-to-query-graph.md).

## <a name="about-the-queries"></a>Сведения о запросах

Вы можете использовать язык запросов Microsoft Digital двойников для получения цифровых двойников в соответствии с их...
* свойства (включая [свойства тегов](how-to-use-tags.md))
* модели
* relationships
  - свойства связей

Чтобы отправить запрос в службу из клиентского приложения, вы будете использовать [**API запросов**](/rest/api/digital-twins/dataplane/query)цифровых двойников Azure. Одним из способов использования API является один из [пакетов SDK](how-to-use-apis-sdks.md#overview-data-plane-apis) для Azure Digital двойников.

### <a name="considerations-for-querying"></a>Рекомендации по запросам

При написании запросов для Azure Digital двойников учитывайте следующие соображения.
* **Запомнить чувствительность к регистру**. во всех операциях запроса цифровых двойников Azure учитывается регистр, поэтому следует использовать точные имена, определенные в моделях. Если имена свойств написаны с ошибками или имеют неправильный регистр, результирующий набор будет пустым без возвращаемых ошибок.
* **Escape-символы одинарные кавычки**. Если текст запроса содержит одинарную кавычку в данных, кавычки нужно будет экранировать с помощью `\` символа. Ниже приведен пример, в котором используется значение свойства *д'сауза*:

  :::code language="sql" source="~/digital-twins-docs-samples/queries/queries.sql" id="EscapedSingleQuote":::

## <a name="reference-expressions-and-conditions"></a>Справочник: выражения и условия

В этом разделе описываются операторы и функции, доступные для написания запросов Azure Digital двойников. Примеры запросов, демонстрирующих использование этих функций, см. в разделе Практические руководства. [*запрос к графу двойника*](how-to-query-graph.md).

### <a name="operators"></a>Операторы

Поддерживаются следующие операторы:

| Семейство | Операторы |
| --- | --- |
| Логические |`AND`, `OR`, `NOT` |
| Сравнение | `=`, `!=`, `<`, `>`, `<=`, `>=` |
| Содержит | `IN`, `NIN` |

### <a name="functions"></a>Функции

Поддерживаются следующие функции проверки и приведения типов:

| Функция | Описание |
| -------- | ----------- |
| `IS_DEFINED` | Возвращает логическое значение, указывающее, назначено ли свойству значение. Это поддерживается только в том случае, если значение является типом-примитивом. Типы-примитивы включают строку, логическое значение, число или `null` . `DateTime`, типы объектов и массивы не поддерживаются. |
| `IS_OF_MODEL` | Возвращает логическое значение, указывающее, соответствует ли указанный двойника указанному типу модели. |
| `IS_BOOL` | Возвращает логическое значение, указывающее, является ли указанное выражение логическим значением. |
| `IS_NUMBER` | Возвращает логическое значение, указывающее, является ли указанное выражение числовым значением. |
| `IS_STRING` | Возвращает логическое значение, указывающее, является ли указанное выражение строковым значением. |
| `IS_NULL` | Возвращает логическое значение, указывающее, является ли указанное выражение значением Null. |
| `IS_PRIMITIVE` | Возвращает логическое значение, указывающее, является ли указанное выражение примитивом (строкой, логическим значением, числовым значением или `null`). |
| `IS_OBJECT` | Возвращает логическое значение, указывающее, является ли указанное выражение объектом JSON. |

Поддерживаются следующие строковые функции:

| Функция | Описание |
| -------- | ----------- |
| `STARTSWITH(x, y)` | Возвращает значение логического типа, указывающее, начинается ли первое строковое выражение вторым. |
| `ENDSWITH(x, y)` | Возвращает значение логического типа, указывающее, заканчивается ли первое строковое выражение вторым. |

## <a name="query-limitations"></a>Ограничения запросов

В этом разделе описываются ограничения языка запросов.

* Время: возможна задержка до 10 секунд, прежде чем изменения в экземпляре будут отражены в запросах. Например, если выполнить операцию, например создание или удаление двойников с помощью API Дигиталтвинс, результат может быть немедленно отражен в запросах API запросов. Для разрешения этой проблемы достаточно ожидать короткий период.
* В инструкции не поддерживаются вложенные запросы `FROM` .
* `OUTER JOIN` семантика не поддерживается, то есть если связь имеет нулевой ранг, то вся строка удаляется из выходного результирующего набора.
* Глубина обхода графа ограничена пятью `JOIN` уровнями на запрос.
* Связи в Azure Digital двойников нельзя запрашивать как независимые сущности. также необходимо предоставить сведения об источнике двойника, из которого получена связь. Это означает, что существуют некоторые ограничения на `JOIN` операцию, которые используются для запроса связей, чтобы убедиться, что запрос объявляет двойника (s), где начинается запрос. Примеры см. в разделе " [*запрос по связи*](how-to-query-graph.md#query-by-relationship) " статьи " *инструкции. запрос к двойника Graph"* .

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как создавать запросы и просматривать примеры кода клиента в разделе "инструкции. Создание [*запросов к графу двойника"*](how-to-query-graph.md).