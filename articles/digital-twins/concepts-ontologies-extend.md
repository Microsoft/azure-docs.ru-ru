---
title: Расширение онтологиес
titleSuffix: Azure Digital Twins
description: Узнайте о причинах и стратегиях, лежащих в основе расширения онтологи
author: baanders
ms.author: baanders
ms.date: 2/12/2021
ms.topic: conceptual
ms.service: digital-twins
ms.openlocfilehash: e5973f58887b212919ad739232faafddcf9e735c
ms.sourcegitcommit: de98cb7b98eaab1b92aa6a378436d9d513494404
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100561546"
---
# <a name="extending-ontologies"></a>Расширение онтологиес 

Стандартная отрасль [онтологи](concepts-ontologies.md), например [дтдл реалестатекоре онтологи для интеллектуальных зданий](https://github.com/Azure/opendigitaltwins-building), — это отличный способ начать создание решения IOT. Отраслевые онтологиес предоставляют широкий набор базовых интерфейсов, предназначенных для вашего домена и разработанных для использования в службах Azure IoT, таких как Azure Digital двойников. 

Однако возможно, что ваше решение может иметь определенные потребности, не охваченные отраслевым онтологи. Например, вы можете связать цифровое двойников с трехмерными моделями, хранящимися в отдельной системе. В этом случае можно расширить один из этих онтологиес, чтобы добавить собственные возможности, сохранив все преимущества исходного онтологи.

В этой статье используется ДТДЛ [реалестатекоре](https://www.realestatecore.io/) онтологи в качестве основания для примеров расширения онтологиес с помощью новых свойств дтдл. Описанные здесь методы являются общими, но их можно применять к любой части онтологи на основе ДТДЛ с любой возможностью ДТДЛ (телеметрии, свойством, связью, компонентом или командой). 

## <a name="realestatecore-space-hierarchy"></a>Иерархия пространства Реалестатекоре 

В Реалестатекоре онтологи на основе ДТДЛ иерархия пространства используется для определения различных типов пространств: помещений, зданий, Zone и т. д. Иерархия дополняет каждую из этих моделей для определения различных видов комнат, зданий и зон. 

Часть иерархии выглядит как приведенная ниже диаграмма. 

:::image type="content" source="media/concepts-extending-ontologies/RealEstateCore-original.png" alt-text="Блок-схема, иллюстрирующая часть иерархии пространства Реалестатекоре. На верхнем уровне имеется элемент с именем Space; Она соединена с помощью стрелки &quot;расширения&quot; вниз на уровень комнаты; Комната соединена двумя стрелками &quot;расширения&quot; вниз на уровень Конференцерум и Office."::: 

Дополнительные сведения о Реалестатекоре онтологи см. в разделе [*Основные понятия: внедрение отраслевых стандартов онтологиес*](concepts-ontologies-adopt.md#realestatecore-smart-building-ontology).

## <a name="extending-the-realestatecore-space-hierarchy"></a>Расширение иерархии пространства Реалестатекоре 

Иногда решение имеет определенные потребности, не охваченные отраслевым онтологи. В этом случае расширение иерархии позволяет продолжать использовать отраслевые онтологи при настройке для ваших нужд. 

В этой статье обсуждаются два разных случая, в которых полезно расширение иерархии онтологи: 

* Добавление новых интерфейсов для концепций, не онтологи в отрасли. 
* Добавление дополнительных свойств (или связей, компонентов, телеметрии или команд) в существующие интерфейсы.

### <a name="add-new-interfaces-for-new-concepts"></a>Добавление новых интерфейсов для новых концепций 

В этом случае необходимо добавить интерфейсы для тех концепций, которые необходимы для решения, но не представлены в отрасли онтологи. Например, если в решении есть другие типы комнат, которые не представлены в Реалестатекоре онтологи на основе ДТДЛ, их можно добавить путем расширения непосредственно из интерфейсов Реалестатекоре. 

В приведенном ниже примере представлено решение, которое должно представлять "фокус комнаты", которые отсутствуют в Реалестатекоре онтологи. Основное место — это небольшое пространство, предназначенное для того, чтобы люди могли сосредоточиться на задаче в течение нескольких часов за раз. 

Чтобы расширить отраслевые онтологи с помощью этой новой концепции, создайте новый интерфейс, который будет [расширяться из](concepts-models.md#model-inheritance) интерфейсов в онтологи отрасли. 

После добавления интерфейса комнаты с фокусом в расширенной иерархии отображается новый тип комнаты. 

:::image type="content" source="media/concepts-extending-ontologies/RealEstateCore-extended-1.png" alt-text="На схеме Flow показана иерархия Реалестатекоре Space, представленная выше, с новым добавлением. На нижнем уровне с Конференцерум и Office имеется новый элемент с именем Фокусрум (также подключенный через стрелку &quot;расширения&quot; из комнаты)."::: 

### <a name="add-additional-capabilities-to-existing-interfaces"></a>Добавление дополнительных возможностей в существующие интерфейсы 

В этом случае необходимо добавить дополнительные свойства (или связи, компоненты, данные телеметрии или команды) в интерфейсы, которые находятся в отрасли онтологи.

В этом разделе вы увидите два примера: 
* Если вы создаете решение, отображающее трехмерные чертежи пробелов, которые уже имеются в существующей системе, может потребоваться связать каждый цифровой двойника с трехмерной прорисовкой (по ИДЕНТИФИКАТОРу), чтобы при отображении в решении сведений о пространстве он также мог извлечь трехмерную прорисовку из существующей системы. 
* Если в решении требуется отслеживание интерактивного и автономного состояния конференц-зала, то может потребоваться отслеживание состояния комнаты на конференциях для использования в отображении или запросах. 

Оба примера можно реализовать с помощью новых свойств: `drawingId` свойство, связывающее трехмерное Рисование с цифровым двойника и свойством "Online", которое указывает, находится ли Конференц-зал в сети или нет. 

Как правило, вы не хотите изменять отрасль напрямую, так как вам хотелось бы иметь возможность добавлять в решение обновления в будущем (что приведет к перезаписи дополнений). Вместо этого эти виды дополнений можно вносить в собственную иерархию интерфейса, которая распространяется из Реалестатекоре онтологи на основе ДТДЛ. Каждый создаваемый интерфейс использует множественное наследование интерфейса для расширения родительского интерфейса Реалестатекоре и его родительского интерфейса из иерархии расширенных интерфейсов. Этот подход позволяет использовать онтологи отрасли и дополнения. 

Чтобы расширить отраслевые онтологи, создайте собственные интерфейсы, которые расширяются из интерфейсов в отрасли онтологи и добавляют новые возможности в расширенные интерфейсы. Для каждого интерфейса, который требуется расширить, создается новый интерфейс. Расширенные интерфейсы записываются в ДТДЛ (см. раздел ДТДЛ для расширенных интерфейсов далее в этом документе). 

После расширения части иерархии, показанной выше, расширенная иерархия будет выглядеть так, как показано ниже. В этом случае расширенный интерфейс пространства добавляет `drawingId` свойство, которое будет содержать идентификатор, связывающий цифровое двойника с трехмерным рисованием. Кроме того, интерфейс Конференцерум добавляет свойство "Online", которое будет содержать интерактивное состояние конференц-зала. С помощью наследования интерфейс Конференцерум содержит все возможности интерфейса Реалестатекоре Конференцерум, а также все возможности расширенного интерфейса пространства. 

:::image type="content" source="media/concepts-extending-ontologies/RealEstateCore-extended-2.png" alt-text="На схеме последовательностей показана Реалестатекоре иерархия расширенного пространства с более новыми дополнениями. Теперь комната предоставляет общий доступ к уровню с помощью элемента Space, который подключается со стрелкой &quot;расширения&quot; вниз на уровень к новому элементу комнаты рядом с Конференцерум и Office.  Новые элементы соединяются с существующим онтологи с дополнительными связями &quot;extends&quot;."::: 

## <a name="using-the-extended-space-hierarchy"></a>Использование иерархии расширенного пространства 

При создании цифрового двойников с помощью расширенной иерархии пробелов каждая модель цифрового двойника будет одной из расширенной иерархии пробелов (а не оригинальной онтологи отраслей) и будет включать все возможности из отрасли онтологи и расширенные интерфейсы, несмотря на наследование интерфейсов.

Каждая модель Digital двойника будет интерфейсом из расширенной иерархии, как показано на схеме ниже. 
 
:::image type="content" source="media/concepts-extending-ontologies/ontology-with-models.png" alt-text="Выдержка из расширенной Реалестатекоре пространства, включая пробел (верхний уровень), одну комнату (средний уровень) и Конференцерум, Office и Фокусрум (более низкий уровень). Имена моделей соединяются с каждым элементом (например, комната подключена к модели с именем Room101)."::: 

При запросе цифровых двойников с использованием идентификатора модели ( `IS_OF_MODEL` оператора) следует использовать идентификаторы модели из расширенной иерархии. Например, `SELECT * FROM DIGITALTWINS WHERE IS_OF_MODEL('dtmi:com:example:Office;1')`. 

## <a name="contributing-back-to-the-original-ontology"></a>Возврат к исходному онтологи 

В некоторых случаях вы расширяете отрасль онтологи способом, который широко используется для большинства пользователей онтологи. В этом случае следует рассмотреть возможность дополнения своих расширений к первоначальному онтологи. Каждый онтологи имеет другой процесс для участия, поэтому просмотрите сведения о публикации в репозитории GitHub онтологи. 

## <a name="dtdl-for-new-interfaces"></a>ДТДЛ для новых интерфейсов 

ДТДЛ для новых интерфейсов, которые расширяются непосредственно из онтологи отрасли, будут выглядеть следующим образом. 

```json
{
  "@id": "dtmi:com:example:FocusRoom;1", 
  "@type": "interface", 
  "extends": "dtmi:digitaltwins:rec_3_3:building:Office;1", 
  "@context": "dtmi:dtdl:context;2" 
} 
```

## <a name="dtdl-for-extended-interfaces"></a>ДТДЛ для расширенных интерфейсов 

ДТДЛ для расширенных интерфейсов, ограниченных описанной выше частью, будет выглядеть следующим образом. 

```json
[
  {
    "@id": "dtmi:com:example:Space;1",
    "@type": "Interface",
    "extends": "dtmi:digitaltwins:rec_3_3:core:Space;1",
    "contents": [
      {
        "@type": "Property",
        "name": "drawingid",
        "schema": "string"
      }
    ],
    "@context": "dtmi:dtdl:context;2"
  },
  {
    "@id": "dtmi:com:example:Room;1",
    "@type": "Interface",
    "extends": [
      "dtmi:digitaltwins:rec_3_3:core:Room;1",
      "dtmi:com:example:Space;1"
    ],
    "@context": "dtmi:dtdl:context;2"
  },
  {
    "@id": "dtmi:com:example:ConferenceRoom;1",
    "@type": "Interface",
    "extends": [
      "dtmi:digitaltwins:rec_3_3:building:ConferenceRoom;1",
      "dtmi:com:example:Room;1"
    ],
    "contents": [
      {
        "@type": "Property",
        "name": "online",
        "schema": "boolean"
      }
    ],
    "@context": "dtmi:dtdl:context;2"
  },
  {
    "@id": "dtmi:com:example:Office;1",
    "@type": "Interface",
    "extends": [
      "dtmi:digitaltwins:rec_3_3:building:Office;1", 
      "dtmi:com:example:Room;1" 
    ],
    "@context": "dtmi:dtdl:context;2" 
  }, 
  {
    "@id": "dtmi:com:example:FocusRoom;1", 
    "@type": "Interface", 
    "extends": "dtmi:com:example:Office;1", 
    "@context": "dtmi:dtdl:context;2" 
  }
]
``` 

## <a name="next-steps"></a>Дальнейшие действия

Перейдите по пути для разработки моделей на основе онтологиес: [*использование стратегий онтологи в пути разработки модели*](concepts-ontologies.md#using-ontology-strategies-in-a-model-development-path).