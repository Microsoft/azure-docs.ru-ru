---
title: Доступные протоколы службы файлов Azure — NFS и SMB
description: Узнайте о доступных протоколах перед созданием файлового ресурса Azure, включая протокол SMB и сетевую файловую систему (NFS).
author: roygara
ms.service: storage
ms.topic: conceptual
ms.date: 12/04/2020
ms.author: rogarana
ms.subservice: files
ms.custom: references_regions
ms.openlocfilehash: 0ed41cc01fcf5aa35b3d2195518b8e2bb0f3b9c4
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "104588245"
---
# <a name="azure-file-share-protocols"></a>Протоколы файловых ресурсов Azure

Служба файлов Azure предлагает два протокола для подключения и подключения файловых ресурсов Azure. [Протокол SMB](/windows/win32/fileio/microsoft-smb-protocol-and-cifs-protocol-overview) и [сетевой файловая система (NFS](https://en.wikipedia.org/wiki/Network_File_System) ) (Предварительная версия). В настоящее время служба файлов Azure не поддерживает многопротокольный доступ, поэтому общая папка может быть либо общей папкой NFS, либо общей папкой SMB. Из-за этого мы рекомендуем определить, какой протокол лучше соответствует вашим потребностям, прежде чем создавать файловые ресурсы Azure.

## <a name="differences-at-a-glance"></a>Краткий обзор различий

|Компонент  |NFS (Предварительная версия)  |SMB  |
|---------|---------|---------|
|Протоколы доступа     |NFS 4,1         |SMB 2,1, SMB 3,0         |
|Рекомендуемая ОС     |Ядро Linux версии 4.3 +         |Windows 2008 R2 +, ядро Linux версии 4.11 +         |
|[Доступные уровни](storage-files-planning.md#storage-tiers)     |Хранилище уровня "Премиум"         |Хранилище класса Premium, оптимизированное, неактивное, холодное         |
|Модель выставления счетов         |[Оплата подготовленной емкости](./understanding-billing.md#provisioned-model)         |[Оплата подготовленной емкости для уровня "Премиум](./understanding-billing.md#provisioned-model)" с [оплатой по мере использования для уровня "Стандартный"](./understanding-billing.md#pay-as-you-go-model)         |
|[Избыточность](storage-files-planning.md#redundancy)     |LRS, ZRS         |LRS, ZRS, GRS         |
|Аутентификация     |Только проверка подлинности на основе узла        |Аутентификация на основе удостоверений, проверка подлинности на основе пользователей         |
|Разрешения     |Разрешения в стиле UNIX         |Разрешения в стиле NTFS         |
|Семантика файловой системы     |Совместимо с POSIX         |Не совместимо с POSIX         |
|Чувствительность к регистру     |С учетом регистра         |Без учета регистра         |
|Поддержка жесткой связи     |Поддерживается         |Не поддерживается         |
|Поддержка символьных ссылок     |Поддерживается         |Не поддерживается         |
|Удаление или изменение открытых файлов     |Поддерживается         |Не поддерживается         |
|Блокировка     |Советы по диапазону байтов Диспетчер сетевых блокировок         |Поддерживается         |
|Список защищенных общедоступных IP-адресов | Не поддерживается | Поддерживается|
|Взаимодействие протоколов| Не поддерживается | филерест|

## <a name="nfs-shares-preview"></a>Общие папки NFS (Предварительная версия)

Подключение файловых ресурсов Azure с помощью NFS 4,1 сейчас находится на этапе предварительной версии. Он обеспечивает более тесную интеграцию с Linux. Это полностью совместимое с POSIX предложение, которое является стандартом для различных вариантов операционных систем UNIX и других * NIX. Эта служба хранилища файлов корпоративного класса масштабируется в соответствии с потребностями хранилища и может быть доступна одновременно тысячам экземпляров вычислений.

### <a name="limitations"></a>Ограничения

[!INCLUDE [files-nfs-limitations](../../../includes/files-nfs-limitations.md)]

#### <a name="regional-availability"></a>Доступность по регионам

[!INCLUDE [files-nfs-regional-availability](../../../includes/files-nfs-regional-availability.md)]

### <a name="best-suited"></a>Наиболее подходящий

Служба NFS с файлами Azure идеально подходит для:

- Рабочие нагрузки, требующие POSIX-совместимых файловых ресурсов, учет регистра или разрешений в стиле UNIX (UID/GID).
- Рабочие нагрузки Linux, для которых не требуется доступ к Windows.

### <a name="security"></a>Безопасность

Все данные файлов Azure шифруются неактивных данных. Для шифрования при передаче Azure предоставляет уровень шифрования для всех передаваемых между центрами обработки данных Azure, используя [максек](https://en.wikipedia.org/wiki/IEEE_802.1AE). В связи с этим шифрование существует при передаче данных между центрами данных Azure. В отличие от файлов Azure, использующих протокол SMB, общие файловые ресурсы с использованием протокола NFS не предлагают проверку подлинности на основе пользователей. Проверка подлинности для общих ресурсов NFS основана на настроенных правилах безопасности сети. Из-за этого, чтобы обеспечить наличие только безопасных подключений к общему ресурсу NFS, необходимо использовать конечные точки службы или частные конечные точки. Если требуется доступ к общим папкам из локальной среды, то в дополнение к частной конечной точке необходимо настроить VPN или ExpressRoute. Запросы, которые не берутся из следующих источников, будут отклонены:

- [Частная конечная точка](storage-files-networking-overview.md#private-endpoints)
- [VPN-шлюз Azure](../../vpn-gateway/vpn-gateway-about-vpngateways.md)
    - [VPN типа "точка — сеть" (P2S)](../../vpn-gateway/point-to-site-about.md)
    - [Подключение "сеть — сеть"](../../vpn-gateway/design.md#s2smulti) .
- [ExpressRoute](../../expressroute/expressroute-introduction.md)
- [Ограниченная общедоступная конечная точка](storage-files-networking-overview.md#storage-account-firewall-settings)

Дополнительные сведения о доступных параметрах сети см. в статье рекомендации по работе с [сетью в службе файлов Azure](storage-files-networking-overview.md).

## <a name="smb-shares"></a>Общие ресурсы SMB

Файловые ресурсы Azure, подключенные с помощью SMB, предлагают дополнительные функции службы файлов Azure и не имеют ограничений на функции файлов Azure, так как они общедоступны.

### <a name="features"></a>Компоненты

- Служба синхронизации файлов Azure
- Проверка подлинности на основе удостоверений
- Поддержка резервного копирования Azure
- Моментальные снимки
- Обратимое удаление
- Шифрование на транспорте и шифрование неактивных

### <a name="best-suited"></a>Наиболее подходящий

Служба SMB с файлами Azure идеально подходит для:

- Рабочие среды
- Клиенты, которым требуются функции, перечисленные в [компоненте](#features)

## <a name="next-steps"></a>Дальнейшие действия

- [Создание общей папки NFS](storage-files-how-to-create-nfs-shares.md)
- [Создание файлового ресурса SMB](storage-how-to-create-file-share.md)