---
title: Обратимое удаление для контейнеров (Предварительная версия)
titleSuffix: Azure Storage
description: Обратимое удаление для контейнеров (Предварительная версия) обеспечивает защиту данных, позволяя легко восстанавливать данные при ошибочном изменении или удалении приложения или другого пользователя учетной записи хранения.
services: storage
author: tamram
ms.service: storage
ms.topic: conceptual
ms.date: 01/06/2021
ms.author: tamram
ms.subservice: blobs
ms.custom: references_regions
ms.openlocfilehash: 85d880966c4c3864206c7e92256eb8e705812f20
ms.sourcegitcommit: f6f928180504444470af713c32e7df667c17ac20
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "97962182"
---
# <a name="soft-delete-for-containers-preview"></a>Обратимое удаление для контейнеров (Предварительная версия)

Обратимое удаление для контейнеров (Предварительная версия) защищает данные от случайного или ошибочного изменения или удаления. Если для учетной записи хранения включено обратимое удаление контейнера, все удаленные контейнеры и их содержимое сохраняются в службе хранилища Azure в течение заданного периода. В течение срока хранения можно восстановить ранее удаленные контейнеры и все большие двоичные объекты в них.

Чтобы обеспечить сквозную защиту данных больших двоичных объектов, корпорация Майкрософт рекомендует включить следующие функции защиты данных:

- Обратимое удаление контейнера для защиты от случайного удаления или перезаписи контейнера. Дополнительные сведения о включении обратимого удаления контейнера см. в разделе [Включение обратимого удаления контейнеров и управление ими](soft-delete-container-enable.md).
- Обратимое удаление BLOB-объектов для защиты от случайного удаления или перезаписи отдельного большого двоичного объекта. Сведения о включении обратимого удаления BLOB-объектов см. в статье [обратимое удаление для больших двоичных объектов](soft-delete-blob-overview.md).
- Управление версиями BLOB-объектов для автоматического обслуживания предыдущих версий большого двоичного объекта. Если управление версиями BLOB-объектов включено, можно восстановить более раннюю версию большого двоичного объекта, чтобы восстановить данные, если они ошибочно изменены или удалены. Сведения о включении управления версиями BLOB-объектов см. в разделе [Включение управления версиями BLOB-объектов и управление ими](versioning-enable.md).

> [!WARNING]
> Удаление учетной записи хранения невозможно отменить. Обратимое удаление не защищает от удаления учетной записи хранения. Чтобы предотвратить случайное удаление учетной записи хранения, Настройте блокировку **CannotDelete** для ресурса учетной записи хранения. Дополнительные сведения о блокировке ресурсов Azure см. [в разделе Блокировка ресурсов для предотвращения непредвиденных изменений](../../azure-resource-manager/management/lock-resources.md).

## <a name="how-container-soft-delete-works"></a>Как работает обратимое удаление контейнера

При включении обратимого удаления контейнера можно указать срок хранения для удаленных контейнеров в диапазоне от 1 до 365 дней. Срок хранения по умолчанию составляет 7 дней. В течение срока хранения удаленный контейнер можно восстановить, вызвав операцию **отмены удаления контейнера** .

При восстановлении контейнера его можно восстановить до исходного имени, если это имя не было использовано повторно. Если исходное имя контейнера было использовано, можно восстановить контейнер с новым именем.

По истечении срока хранения контейнер удаляется из хранилища Azure без возможности восстановления и не может быть восстановлен. Часы начинаются с периода хранения в момент удаления контейнера. Вы можете изменить срок хранения в любое время, но помните, что обновленный срок хранения применяется только к вновь удаленным контейнерам. Ранее удаленные контейнеры будут окончательно удалены в зависимости от срока хранения, который действовал на момент удаления контейнера.

Отключение обратимого удаления контейнера не приводит к окончательному удалению контейнеров, которые ранее были обратимо удалены. Все контейнеры обратимого удаления будут окончательно удалены по истечении срока хранения, который действовал на момент удаления контейнера.

## <a name="about-the-preview"></a>Сведения о предварительной версии

Обратимое удаление контейнера доступно в предварительной версии во всех общедоступных регионах Azure.

> [!IMPORTANT]
> Предварительная версия обратимого удаления контейнера предназначена только для использования в рабочей среде. Соглашения об уровне обслуживания (SLA) для рабочих сред сейчас недоступны.

Версия 2019-12-12 и более поздние версии REST API службы хранилища Azure поддерживают обратимое удаление контейнера.

### <a name="storage-account-support"></a>Поддержка учетных записей хранения

Обратимое удаление контейнера доступно для следующих типов учетных записей хранения:

- Учетные записи хранения общего назначения версии 2 и v1
- Блокировать учетные записи хранения BLOB-объектов
- Учетные записи хранения BLOB-объектов

Также поддерживаются учетные записи хранения с иерархическим пространством имен, разрешенным для использования с Azure Data Lake Storage 2-го поколения.

### <a name="register-for-the-preview"></a>Зарегистрируйтесь для использования предварительной версии

Чтобы зарегистрироваться в предварительной версии для обратимого удаления контейнера, используйте PowerShell или Azure CLI, чтобы отправить запрос на регистрацию этой функции в подписке. После утверждения запроса можно включить обратимое удаление контейнера с помощью любого нового или существующего общего назначения, хранилища BLOB-объектов или учетных записей хранения блочных BLOB-объектов уровня "Премиум".

# <a name="powershell"></a>[PowerShell](#tab/powershell)

Чтобы зарегистрироваться в PowerShell, вызовите команду [Register-азпровидерфеатуре](/powershell/module/az.resources/register-azproviderfeature) .

```powershell
# Register for container soft delete (preview)
Register-AzProviderFeature -ProviderNamespace Microsoft.Storage `
    -FeatureName ContainerSoftDelete

# Refresh the Azure Storage provider namespace
Register-AzResourceProvider -ProviderNamespace Microsoft.Storage
```

# <a name="azure-cli"></a>[Azure CLI](#tab/azure-cli)

Чтобы зарегистрироваться в Azure CLI, вызовите команду [AZ Feature Register](/cli/azure/feature#az-feature-register) .

```azurecli
az feature register --namespace Microsoft.Storage --name ContainerSoftDelete
az provider register --namespace 'Microsoft.Storage'
```

---

### <a name="check-the-status-of-your-registration"></a>Проверка состояния регистрации

Чтобы проверить состояние регистрации, используйте PowerShell или Azure CLI.

# <a name="powershell"></a>[PowerShell](#tab/powershell)

Чтобы проверить состояние регистрации с помощью PowerShell, вызовите команду [Get-азпровидерфеатуре](/powershell/module/az.resources/get-azproviderfeature) .

```powershell
Get-AzProviderFeature -ProviderNamespace Microsoft.Storage -FeatureName ContainerSoftDelete
```

# <a name="azure-cli"></a>[Azure CLI](#tab/azure-cli)

Чтобы проверить состояние регистрации с помощью Azure CLI, вызовите команду [AZ Feature](/cli/azure/feature#az-feature-show) .

```azurecli
az feature show --namespace Microsoft.Storage --name ContainerSoftDelete
```

---

## <a name="pricing-and-billing"></a>Цены и выставление счетов

Для включения обратимого удаления контейнера дополнительная плата не взимается. Счета за данные в обратимо удаленных контейнерах выставляются по той же ставке, что и активные данные.

## <a name="next-steps"></a>Дальнейшие действия

- [Настройка обратимого удаления контейнера](soft-delete-container-enable.md)
- [Обратимое удаление для больших двоичных объектов](soft-delete-blob-overview.md)
- [Управление версиями BLOB-объектов](versioning-overview.md)
