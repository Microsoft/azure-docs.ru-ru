---
title: Поддержка сетевой файловой системы 3,0 в хранилище BLOB-объектов Azure (Предварительная версия) | Документация Майкрософт
description: Хранилище BLOB-объектов теперь поддерживает протокол NFS 3,0. Эта поддержка позволяет клиентам Linux подключать контейнер в хранилище BLOB-объектов из виртуальной машины Azure или на компьютере, работающем локально.
author: normesta
ms.subservice: blobs
ms.service: storage
ms.topic: conceptual
ms.date: 02/19/2021
ms.author: normesta
ms.reviewer: yzheng
ms.custom: references_regions
ms.openlocfilehash: b00956a6fb5a79b09602ca1752cc547595f32db6
ms.sourcegitcommit: 94c3c1be6bc17403adbb2bab6bbaf4a717a66009
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/12/2021
ms.locfileid: "103224600"
---
# <a name="network-file-system-nfs-30-protocol-support-in-azure-blob-storage-preview"></a>Поддержка протокола NFS 3,0 в хранилище BLOB-объектов Azure (Предварительная версия)

Хранилище BLOB-объектов теперь поддерживает протокол NFS 3,0. Эта поддержка обеспечивает совместимость файловой системы Linux в масштабе и ценах на хранилище объектов и позволяет клиентам Linux подключать контейнер в хранилище BLOB-объектов из виртуальной машины Azure или локального компьютера. 

> [!NOTE]
> Поддержка протокола NFS 3,0 в хранилище BLOB-объектов Azure доступна в общедоступной предварительной версии. Она поддерживает учетные записи хранения GPV2 со стандартными уровнями производительности в следующих регионах: Восточная Австралия, Южная Корея и Юго-Центральный регион США. Предварительная версия также поддерживает блочный BLOB-объект с уровнем производительности "Премиум" во всех общедоступных регионах.

Это всегда является сложной задачей для выполнения крупномасштабных устаревших рабочих нагрузок, например высокопроизводительных вычислений (HPC) в облаке. Одна из причин заключается в том, что приложения часто используют традиционные Файловые протоколы, такие как NFS или SMB, для доступа к данным. Кроме того, службы облачного хранилища, нацеленные на хранилище объектов с плоским пространством имен и обширными метаданными, вместо файловых систем, предоставляющих иерархическое пространство имен и эффективные операции с метаданными. 

Хранилище BLOB-объектов теперь поддерживает иерархическое пространство имен, а в сочетании с поддержкой протокола NFS 3,0 Azure значительно упрощает выполнение устаревших приложений на основе крупномасштабного облачного хранилища объектов. 

## <a name="applications-and-workloads-suited-for-this-feature"></a>Приложения и рабочие нагрузки, подходящие для этой функции

Функция протокола NFS 3,0 лучше всего подходит для обработки высокой пропускной способности, высокой масштабируемости, чтения больших рабочих нагрузок, таких как обработка мультимедиа, моделирование рисков и Genomics виртуализация. Эту функцию следует использовать для любого другого типа рабочей нагрузки, использующей несколько модулей чтения и многих потоков, требующих высокой пропускной способности. 

## <a name="nfs-30-and-the-hierarchical-namespace"></a>NFS 3,0 и иерархическое пространство имен

Поддержка протокола NFS 3,0 требует, чтобы большие двоичные объекты были организованы в иерархическое пространство имен. При создании учетной записи хранения можно включить иерархическое пространство имен. Возможность использования иерархического пространства имен была введена Azure Data Lake Storage 2-го поколения. Объекты (файлы) упорядочиваются в иерархию каталогов и подкаталогов так же, как и файловая система на компьютере.  Иерархическое пространство имен масштабируется линейно и не снижает емкость и производительность данных. Различные протоколы расширяются из иерархического пространства имен. Протокол NFS 3,0 является одним из доступных протоколов.   

> [!div class="mx-imgBorder"]
> ![иерархическое пространство имен](./media/network-protocol-support/hierarchical-namespace-and-nfs-support.png)
  
## <a name="data-stored-as-block-blobs"></a>Данные, хранящиеся как блочные BLOB-объекты

Если включена поддержка протокола NFS 3,0, все данные в учетной записи хранения будут храниться как блочные BLOB-объекты. Блочные BLOB-объекты оптимизируются для эффективной обработки больших объемов данных, интенсивно иссчитывающих данные. Блочные BLOB-объекты состоят из блоков. Каждый блок идентифицируется по ИДЕНТИФИКАТОРу блока. Блочный BLOB-объект может включать до 50 000 блоков. Каждый блок в блочном BLOB-объекте может иметь другой размер, вплоть до максимального размера, разрешенного для версии службы, используемой вашей учетной записью.

Когда приложение выполняет запрос с помощью протокола NFS 3,0, этот запрос преобразуется в сочетание операций блочного BLOB-объекта. Например, NFS 3,0. чтение запросов удаленного вызова процедур (RPC) преобразуются в операцию [получения большого двоичного объекта](/rest/api/storageservices/get-blob) . NFS 3,0. запросы RPC на запись переводятся в список блоков [Get](/rest/api/storageservices/get-block-list), [помещает блок](/rest/api/storageservices/put-block)и [помещает блок](/rest/api/storageservices/put-block-list).

## <a name="general-workflow-mounting-a-storage-account-container"></a>Общий рабочий процесс: Подключение контейнера учетной записи хранения

Клиенты Linux могут подключать контейнер в хранилище BLOB-объектов из виртуальной машины Azure или локального компьютера. Чтобы подключить контейнер учетной записи хранения, необходимо выполнить следующие действия.

1. Регистрация функции протокола NFS 3,0 в подписке.

2. Убедитесь, что компонент зарегистрирован.

3. Создайте виртуальную сеть Azure (VNet).

4. Настройка сетевой безопасности.

5. Создайте и настройте учетную запись хранения, которая принимает трафик только из виртуальной сети.

6. Создайте контейнер в учетной записи хранения.

7. Подключите контейнер.

Пошаговые инструкции см. [в статье Подключение хранилища BLOB-объектов с помощью протокола nfs 3,0 (Предварительная версия)](network-file-system-protocol-support-how-to.md).

> [!IMPORTANT]
> Важно выполнить эти задачи по порядку. Вы не сможете подключить контейнеры, созданные перед включением протокола NFS 3,0 в учетную запись. Кроме того, после включения протокола NFS 3,0 в учетной записи ее нельзя отключить.

## <a name="network-security"></a>Безопасность сети

Ваша учетная запись хранения должна содержаться в виртуальной сети. Виртуальная сеть позволяет клиентам безопасно подключаться к учетной записи хранения. Единственный способ защитить данные в учетной записи — использовать виртуальную сеть и другие параметры безопасности сети. Любой другой инструмент, используемый для защиты данных, включая авторизацию ключа учетной записи, безопасность Azure Active Directory (AD) и списки управления доступом (ACL), пока не поддерживаются в учетных записях с включенной поддержкой протокола NFS 3,0. 

Дополнительные сведения см. в статье [рекомендации по сетевой безопасности для хранилища BLOB-объектов](security-recommendations.md#networking).

## <a name="supported-network-connections"></a>Поддерживаемые сетевые подключения

Клиент может подключаться через общедоступную или [частную конечную точку](../common/storage-private-endpoints.md)и может подключаться из любого из следующих сетевых расположений:

- Виртуальная сеть, настроенная для учетной записи хранения. 

  В этой статье мы будем называть эту виртуальную сеть *основной виртуальной* сетью. Дополнительные сведения см. в статье [предоставление доступа из виртуальной сети](../common/storage-network-security.md#grant-access-from-a-virtual-network).

- Одноранговая виртуальная сеть, расположенная в том же регионе, что и основная виртуальная сеть.

  Вам потребуется настроить учетную запись хранения, чтобы разрешить доступ к этой одноранговой виртуальной сети. Дополнительные сведения см. в статье [предоставление доступа из виртуальной сети](../common/storage-network-security.md#grant-access-from-a-virtual-network).

- Локальная сеть, подключенная к основной виртуальной сети с помощью [VPN-шлюза](../../vpn-gateway/vpn-gateway-about-vpngateways.md) или [шлюза ExpressRoute](../../expressroute/expressroute-howto-add-gateway-portal-resource-manager.md). 

  Дополнительные сведения см. в статье [Настройка доступа из локальных сетей](../common/storage-network-security.md#configuring-access-from-on-premises-networks).

- Локальная сеть, подключенная к одноранговой сети.

  Это можно сделать с помощью [VPN-шлюза](../../vpn-gateway/vpn-gateway-about-vpngateways.md) или [шлюза ExpressRoute](../../expressroute/expressroute-howto-add-gateway-portal-resource-manager.md) , а также [транзитного шлюза](/azure/architecture/reference-architectures/hybrid-networking/vnet-peering#gateway-transit). 

> [!IMPORTANT]
> При подключении из локальной сети убедитесь, что клиент разрешает исходящие подключения через порты 111 и 2048. Протокол NFS 3,0 использует эти порты.

## <a name="azure-storage-features-not-yet-supported"></a>Функции службы хранилища Azure пока не поддерживаются

Следующие функции службы хранилища Azure не поддерживаются при включении протокола NFS 3,0 в учетной записи. 

- Безопасность Azure Active Directory (AD)

- Списки управления доступом, аналогичные стандарту POSIX (ACL)

- Возможность включения поддержки NFS 3,0 в существующих учетных записях хранения

- Возможность отключения поддержки NFS 3,0 в учетной записи хранения (после ее включения)

- Возможность записи в большие двоичные объекты с помощью интерфейсов API или пакетов интерфейса RESTFUL. 
  
## <a name="nfs-30-features-not-yet-supported"></a>Функции NFS 3,0 пока не поддерживаются

Следующие компоненты NFS 3,0 пока не поддерживаются.

- NFS 3,0 через UDP. Поддерживается только NFS 3,0 через TCP.

- Блокировка файлов с помощью диспетчера сетевых блокировок (NLM). Команды подключения должны включать `-o nolock` параметр.

- Подключение подкаталогов. Можно подключить только корневой каталог (контейнер).

- Перечисление подключений (например, с помощью команды `showmount -a` ).

- Список экспортов (например, с помощью команды `showmount -e` ).

- Жесткая связь

- Экспорт контейнера только для чтения

## <a name="nfs-30-clients-not-yet-supported"></a>Клиенты NFS 3,0 пока не поддерживаются

Следующие клиенты NFS 3,0 пока не поддерживаются.

- Клиент Windows для NFS

## <a name="pricing"></a>Цены

Во время предварительной версии плата за данные, хранящиеся в вашей учетной записи хранения, оплачивается по той же мощности, что и объем хранилища BLOB-объектов за ГБ в месяц. 

Во время предварительной версии транзакция не будет оплачена. Цены на транзакции могут быть изменены и будут определены, когда она будет общедоступна.

## <a name="next-steps"></a>Дальнейшие действия

- Чтобы приступить к работе, см. раздел [Подключение хранилища BLOB-объектов с помощью протокола nfs 3,0 (Предварительная версия)](network-file-system-protocol-support-how-to.md).

- Сведения о оптимизации производительности см. [в статье вопросы производительности 3,0 для NFS в хранилище BLOB-объектов Azure (Предварительная версия)](network-file-system-protocol-support-performance.md).
