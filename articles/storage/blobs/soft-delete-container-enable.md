---
title: Включение и управление обратимым удалением для контейнеров (Предварительная версия)
titleSuffix: Azure Storage
description: Включите обратимое удаление контейнера (Предварительная версия) для упрощения восстановления данных при ошибочном изменении или удалении.
services: storage
author: tamram
ms.service: storage
ms.topic: how-to
ms.date: 03/05/2021
ms.author: tamram
ms.subservice: blobs
ms.openlocfilehash: 2097c1743e07b5563bc75d3d1cce48aa11b98e5f
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102216349"
---
# <a name="enable-and-manage-soft-delete-for-containers-preview"></a>Включение и управление обратимым удалением для контейнеров (Предварительная версия)

Обратимое удаление контейнера (Предварительная версия) защищает данные от случайного или ошибочного изменения или удаления. Если для учетной записи хранения включено обратимое удаление контейнера, контейнер и его содержимое могут быть восстановлены после удаления в течение указанного срока хранения.

Если есть вероятность, что данные могут быть случайно изменены или удалены приложением или другим пользователем учетной записи хранения, корпорация Майкрософт рекомендует включить обратимое удаление контейнера. В этой статье показано, как включить обратимое удаление для контейнеров. Дополнительные сведения о обратимом удалении контейнера, включая сведения о регистрации для предварительной версии, см. в статье [обратимое удаление для контейнеров (Предварительная версия)](soft-delete-container-overview.md).

Для обеспечения сквозной защиты данных корпорация Майкрософт рекомендует также включить обратимое удаление для больших двоичных объектов и управления версиями BLOB-объектов. Дополнительные сведения о включении обратимого удаления для больших двоичных объектов см. в статье [Включение обратимого удаления для больших](soft-delete-blob-enable.md)двоичных объектов. Сведения о включении управления версиями BLOB-объектов см. в разделе [Управление версиями BLOB-объектов](versioning-overview.md).

> [!IMPORTANT]
>
> Обратимое удаление контейнера сейчас находится на **этапе предварительной версии**. Ознакомьтесь с [дополнительными условиями использования Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/) предварительных версий для юридических условий, которые относятся к функциям Azure, которые доступны в бета-версии, предварительном просмотре или еще не включены в общедоступную версию.

## <a name="enable-container-soft-delete"></a>Включить обратимое удаление контейнера

Вы можете в любое время включить или отключить обратимое удаление контейнера для учетной записи хранения, используя портал Azure или шаблон Azure Resource Manager.

# <a name="portal"></a>[Портал](#tab/azure-portal)

Чтобы включить обратимое удаление контейнера для учетной записи хранения с помощью портал Azure, выполните следующие действия.

1. Войдите в свою учетную запись хранения на [портале Azure](https://portal.azure.com/).
1. Выберите параметры **защиты данных** в разделе **Служба BLOB-объектов**.
1. Задайте для свойства " **обратимое удаление контейнера** " значение " *включено*".
1. В разделе **политики хранения** укажите, как долго удаленные контейнеры будут храниться в службе хранилища Azure.
1. Сохраните изменения.

:::image type="content" source="media/soft-delete-container-enable/soft-delete-container-portal-configure.png" alt-text="Снимок экрана, показывающий, как включить обратимое удаление контейнера в портал Azure":::

# <a name="template"></a>[Шаблон](#tab/template)

Чтобы включить обратимое удаление контейнера с помощью шаблона Azure Resource Manager, создайте шаблон, который задает свойство **контаинерделетеретентионполици** . Следующие шаги описывают создание шаблона в портал Azure.

1. В портал Azure выберите **создать ресурс**.
1. В **поле Поиск в Marketplace** введите **шаблон развертывание** и нажмите клавишу **Ввод**.
1. Выберите **шаблоны развертывания**, выберите **создать**, а затем — создать **собственный шаблон в редакторе**.
1. В редакторе шаблонов вставьте следующий код JSON. Замените заполнитель `<account-name>` именем вашей учетной записи хранения.

    ```json
    {
      "$schema": "https://schema.management.azure.com/schemas/2015-01-01/deploymentTemplate.json#",
      "contentVersion": "1.0.0.0",
      "parameters": {},
      "variables": {},
      "resources": [
          {
              "type": "Microsoft.Storage/storageAccounts/blobServices",
              "apiVersion": "2019-06-01",
              "name": "<account-name>/default",
              "properties": {
                  "containerDeleteRetentionPolicy": {
                      "enabled": true,
                      "days": 7
                  }
              }
          }
      ]
    }
    ```

---

1. Укажите срок хранения. По умолчанию используется значение 7.
1. при сохранении шаблона;
1. Укажите группу ресурсов учетной записи, а затем нажмите кнопку " **проверить и создать** ", чтобы развернуть шаблон и включить обратимое удаление контейнера.

## <a name="view-soft-deleted-containers"></a>Просмотр обратимо удаленных контейнеров

Если обратимое удаление включено, можно просматривать обратимо удаленные контейнеры в портал Azure. Обратимо удаленные контейнеры отображаются в течение указанного срока хранения. По истечении срока хранения обратимо удаленный контейнер будет окончательно удален и больше не будет отображаться.

Чтобы просмотреть обратимо удаленные контейнеры в портал Azure, выполните следующие действия.

1. Перейдите к своей учетной записи хранения в портал Azure и просмотрите список контейнеров.
1. Переключите параметр Показать удаленные контейнеры, чтобы включить удаленные контейнеры в список.

    :::image type="content" source="media/soft-delete-container-enable/soft-delete-container-portal-list.png" alt-text="Снимок экрана, показывающий, как просматривать обратимо удаленные контейнеры в портал Azure":::

## <a name="restore-a-soft-deleted-container"></a>Восстановление обратимо удаленного контейнера

Вы можете восстановить Обратимо удаленный контейнер и его содержимое в течение срока хранения. Чтобы восстановить обратимо удаленное контейнер в портал Azure, выполните следующие действия.

1. Перейдите к своей учетной записи хранения в портал Azure и просмотрите список контейнеров.
1. Откройте контекстное меню для восстанавливаемого контейнера и выберите в меню пункт **Отменить удаление** .

    :::image type="content" source="media/soft-delete-container-enable/soft-delete-container-portal-restore.png" alt-text="Снимок экрана, показывающий, как восстановить обратимо удаленное контейнер в портал Azure":::

## <a name="next-steps"></a>Дальнейшие действия

- [Обратимое удаление для контейнеров (Предварительная версия)](soft-delete-container-overview.md)
- [Обратимое удаление для больших двоичных объектов](soft-delete-blob-overview.md)
- [Управление версиями BLOB-объектов](versioning-overview.md)
