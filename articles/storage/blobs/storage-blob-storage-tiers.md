---
title: Уровни доступа для хранилища BLOB-объектов Azure — "горячий", "крутой" и архивный
description: Ознакомьтесь со сведениями о горячий, холодной и архивной уровнях доступа для хранилища BLOB-объектов Azure. Проверьте учетные записи хранения, поддерживающие распределение по уровням.
author: mhopkins-msft
ms.author: mhopkins
ms.date: 03/18/2021
ms.service: storage
ms.subservice: blobs
ms.topic: conceptual
ms.reviewer: klaasl
ms.openlocfilehash: 1a1cb8e1676405cbfbb3f4f61c86d8136b688b88
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "104656844"
---
# <a name="access-tiers-for-azure-blob-storage---hot-cool-and-archive"></a>Уровни доступа для хранилища BLOB-объектов Azure — "горячий", "крутой" и архивный

Служба хранилища Azure предоставляет различные уровни доступа, что позволяет хранить данные объектов BLOB наиболее экономичным способом. Доступные уровни доступа включают:

- **Горячая** оптимизация для хранения данных, к которым часто обращаются.
-  Для хранения данных, которые редко используются и хранятся не менее 30 дней, оптимизировано.
- **Архив** — оптимизирован для хранения данных, которые редко используются и хранятся не менее 180 дней с гибкими требованиями к задержке в часах.

Следующие факторы связаны с разными уровнями доступа.

- Уровень доступа можно задать для большого двоичного объекта во время или после отправки.
- На уровне учетной записи можно задать только холодный и горячий уровни доступа. Уровень доступа к архиву можно задать только на уровне большого двоичного объекта.
- Данные на простом уровне доступа имеют немного меньшую доступность, но по-прежнему имеют высокую устойчивость, задержку и характеристики пропускной способности, аналогичные горячим данным. Для замечательных данных более низкая доступность и более высокие затраты на доступ являются приемлемыми компромиссами для снижения общих затрат на хранение по сравнению с горячими данными. Дополнительные сведения см. в статье [Соглашение об уровне обслуживания для хранилища](https://azure.microsoft.com/support/legal/sla/storage/v1_5/).
- Данные уровня доступа к архиву хранятся в автономном режиме. На уровне архива предлагаются самые низкие затраты на хранение, а также высокие затраты на доступ и задержки.
- Горячий и холодной уровни поддерживают все параметры избыточности. Уровень архива поддерживает только LRS, GRS и RA-GRS.
- Ограничения хранилища данных задаются на уровне учетной записи, а не на уровне доступа. Вы можете использовать все ограничения на одном уровне или на всех трех уровнях.

Объемы данных, хранящихся в облаке, увеличиваются в геометрической прогрессии. Чтобы оптимизировать затраты при расширении хранилища, размещайте данные на разных уровнях с учетом частоты обращения и планируемого срока хранения. Данные, хранящиеся в облаке, могут быть разными в зависимости от способа их создания, обработки и доступа к ним в течение всего времени их существования. Одни данные активно используют и изменяют на протяжении всего жизненного цикла. Другие данные часто используются в начале цикла, но по мере их устаревания к ним обращаются все реже. Некоторые данные остаются неактивными в облаке, и к ним обращаются редко или не обращаются вообще.

Каждый из этих сценариев доступа к данным имеет преимущества от другого уровня доступа, оптимизированного для определенного шаблона доступа. Благодаря горячий, холодной и архивной уровнях доступа хранилище BLOB-объектов Azure решает эту потребность в дифференцированных уровнях доступа с отдельными моделями ценообразования.

Следующие средства и клиентские библиотеки поддерживают многоуровневые и архивные хранилища на уровне больших двоичных объектов.

- Портал Azure
- PowerShell
- Средства Azure CLI
- Клиентская библиотека .NET
- Клиентская библиотека Java
- Клиентская библиотека Python
- Клиентская библиотека Node.js

[!INCLUDE [storage-multi-protocol-access-preview](../../../includes/storage-multi-protocol-access-preview.md)]

## <a name="storage-accounts-that-support-tiering"></a>Учетные записи хранения, которые поддерживают распределение по уровням

Распределение по уровням данных хранилища объектов между горячим, замечательным и архивом поддерживается в учетных записях хранилища BLOB-объектов и общего назначения v2 (GPv2). Учетные записи общего назначения v1 (GPv1) не поддерживают распределение по уровням. Вы можете легко преобразовать существующие учетные записи GPv1 или хранилища BLOB-объектов в учетные записи GPv2 с помощью портал Azure. GPv2 предоставляет новые цены и функции для больших двоичных объектов, файлов и очередей. Некоторые функции и отрезание цен предлагаются только в учетных записях GPv2. Некоторые рабочие нагрузки могут быть более дорогими на GPv2, чем GPv1. Дополнительные сведения см. в статье [Общие сведения об учетной записи хранения Azure](../common/storage-account-overview.md).

Учетные записи хранилища BLOB-объектов и GPv2 предоставляют атрибут **уровня доступа** на уровне учетной записи. Этот атрибут позволяет указать уровень доступа по умолчанию для любого большого двоичного объекта, который не задан явным образом на уровне объекта. Для объектов, для которых явно задан уровень, уровень учетной записи не применяется. Уровень архива можно применять только на уровне объектов. Переключаться между уровнями доступа можно в любое время.

Используйте GPv2 вместо учетных записей хранения BLOB-объектов для распределения по уровням. GPv2 поддерживает все функции, поддерживаемые учетными записями хранения BLOB-объектов, и многое другое. Цены между хранилищем BLOB-объектов и GPv2 практически идентичны, но некоторые новые функции и снижение цен доступны только для учетных записей GPv2.

Структура ценообразования в учетных записях GPv1 и GPv2 различна, поэтому клиенты должны тщательно оценить их, прежде чем принимать решение об использовании учетных записей GPv2. Имеющуюся учетную запись хранилища BLOB-объектов или учетную запись GPv1 можно легко преобразовать в GPv2 одним щелчком мыши. Дополнительные сведения см. в статье [Общие сведения об учетной записи хранения Azure](../common/storage-account-overview.md).

## <a name="hot-access-tier"></a>Горячий уровень хранилища

Горячий уровень доступа имеет более высокую стоимость хранения, чем холодный или архивный, зато стоимость доступа самая низкая. Примеры сценариев использования для уровня горячего доступа включают следующее:

- Данные, которые находятся в активном использовании или должны считываться и записываться в часто
- Данные, подготовленные для обработки и, в конечном итоге, перехода на отличный уровень доступа

## <a name="cool-access-tier"></a>Холодный уровень хранилища

Холодный уровень доступа имеет более низкую стоимость хранения, но более высокую стоимость доступа, чем горячий уровень. Этот уровень предназначен для данных, которые будут храниться на холодном уровне не менее 30 дней. Примеры сценариев использования для холодного уровня доступа включают следующее:

- Краткосрочное резервное копирование и аварийное восстановление
- Более старые данные не используются часто, но должны быть доступны немедленно при обращении к
- Большие наборы данных, которые необходимо эффективно хранить, в то время как сбор дополнительных данных выполняется для последующей обработки.

## <a name="archive-access-tier"></a>Архивный уровень хранилища

Уровень доступа к архиву имеет наименьшую стоимость хранения, но больше затрат на получение данных по сравнению с горячим и замечательным уровнем. Данные должны оставаться на уровне архива в течение не менее 180 дней или быть подвержены периоду раннего удаления. Извлечение данных на уровне архива может занять несколько часов в зависимости от указанного приоритета восстановления. Для небольших объектов восстановление с высоким приоритетом может получить объект из архива в течение часа. Дополнительные сведения см. в статье восстановление [данных большого двоичного объекта с уровня архива](storage-blob-rehydration.md) .

Хотя большой двоичный объект находится в архивном хранилище, данные большого двоичного объекта находятся в автономном режиме и не могут быть прочитаны или изменены. Чтобы прочитать или скачать большой двоичный объект в архиве, необходимо сначала выполнить его восстановление на уровне сети. Вы не можете создавать моментальные снимки большого двоичного объекта в архивном хранилище. Однако метаданные больших двоичных объектов остаются в сети и доступны, что позволяет перечислить большой двоичный объект, его свойства, метаданные и теги индекса больших двоичных объектов. Установка или изменение метаданных большого двоичного объекта в архиве запрещено. Однако можно задавать и изменять теги индекса больших двоичных объектов. Для больших двоичных объектов в архиве единственные допустимые операции — [Получение свойств большого двоичного](/rest/api/storageservices/get-blob-properties)объекта, [Получение метаданных](/rest/api/storageservices/get-blob-metadata)больших двоичных объектов, [Задание тегов](/rest/api/storageservices/set-blob-tags)больших двоичных объектов, [Получение тегов BLOB](/rest/api/storageservices/get-blob-tags)-объектов, [Поиск больших](/rest/api/storageservices/find-blobs-by-tags)двоичных объектов по тегам, [перечисление](/rest/api/storageservices/list-blobs) [BLOB,](/rest/api/storageservices/delete-blob) [Установка уровня BLOB](/rest/api/storageservices/set-blob-tier) [-объекта](/rest/api/storageservices/copy-blob)

Ниже приведены примеры сценариев использования для уровня доступа к архиву.

- Долгосрочное резервное копирование, вторичное резервное копирование и архивные наборы данных
- Исходные (необработанные) данные, которые должны сохраняться даже после их обработки в окончательно используемой форме
- Соответствие и архивные данные, которые необходимо хранить в течение длительного времени и недоступно

> [!NOTE]
> Архивный уровень не поддерживается для учетных записей ZRS, ГЗРС или RA-ГЗРС. Миграция с LRS на GRS не поддерживается, если учетная запись хранения содержит большие двоичные объекты на уровне архива.

## <a name="account-level-tiering"></a>Распределение по уровням учетной записи

Большие двоичные объекты во всех трех уровнях доступа могут сосуществовать в одной учетной записи. Любой большой двоичный объект, который не имеет явно назначенный уровень, выводит уровень из параметра уровень доступа учетной записи. Если уровень доступа поступает из учетной записи, вы увидите, что свойство " **выводимый** большой двоичный объект уровня доступа" имеет значение "true", а свойство большого двоичного объекта **уровня доступа** соответствует уровню учетной записи. В портал Azure _выводимое свойство уровня доступа_ отображается с уровнем доступа к BLOB-объектом " **горячий" (выводимый)** или " **крутой" (выводимый)**.

Изменение уровня доступа к учетной записи применяется ко всем _выводимым объектам уровня доступа_ , хранящимся в учетной записи без явного набора уровней. Если вы переключаете уровень учетной записи с "горячий" на "тепло", вам будет выставляться счет за операции записи (за 10 000) для всех больших двоичных объектов без установленного уровня в учетных записях GPv2. Плата за это изменение в учетных записях хранения BLOB-объектов не взимается. Вы получите оплату за операции чтения (за 10 000) и получение данных (за ГБ) при переключении со холодного на горячий в хранилище BLOB-объектов или учетные записи GPv2.

В качестве уровня доступа к учетной записи по умолчанию можно задать только горячий и холодное уровни доступа. Архивный уровень можно задать только на уровне объекта. При передаче большого двоичного объекта можно указать, что выбранный уровень доступа должен быть "горячий", "холодного" или архивного, независимо от уровня учетной записи по умолчанию. Эта функция позволяет записывать данные непосредственно на уровень архива, чтобы издержки сэкономить время с момента создания данных в хранилище BLOB-объектов.

## <a name="blob-level-tiering"></a>Распределение BLOB-объектов по уровням

Распределение по уровням BLOB-объектов позволяет отправлять данные на выбранный уровень доступа с помощью операций [размещения BLOB-объектов](/rest/api/storageservices/put-blob) или [размещения блоков](/rest/api/storageservices/put-block-list) , а также изменять уровень данных на уровне объектов с помощью функции [задания уровня большого двоичного объекта](/rest/api/storageservices/set-blob-tier) или [управления жизненным циклом](#blob-lifecycle-management) . Вы можете передать данные на требуемый уровень доступа, а затем легко изменить уровень доступа к большому двоичному объекту на уровнях "горячий", "холодного" или "архивный" при изменении шаблонов использования без перемещения данных между учетными записями. Все запросы на изменение уровня выполняются немедленно, а изменения уровней между горячими и замечательными — мгновенно. Восстановление большого двоичного объекта с архивного уровня может занять несколько часов.

Время последнего изменения уровня большого двоичного объекта определяет атрибут **Access Tier Change Time** свойства большого двоичного объекта. **Время изменения уровня доступа** — это свойство уровня большого двоичного объекта, которое не обновляется при изменении уровня учетной записи по умолчанию. Свойства учетной записи и свойства большого двоичного объекта являются отдельными. При каждом изменении уровня доступа учетной записи по умолчанию было бы недорого обновлять **время изменения уровня доступа** для каждого большого двоичного объекта в учетной записи хранения.

При перезаписи большого двоичного объекта на активном или холодном уровне созданный большой двоичный объект наследует уровень большого двоичного объекта, который был перезаписан, если только новый уровень доступа к большому двоичному объекту не будет явно задан при создании. Если большой двоичный объект находится на уровне архива, он не может быть перезаписан, поэтому отправка такого же большого двоичного объекта не разрешена в этом сценарии.

> [!NOTE]
> Архивное хранилище и распределение BLOB-объектов по уровням поддерживают только большие двоичные объекты.

### <a name="blob-lifecycle-management"></a>Управление жизненным циклом большого двоичного объекта

Управление жизненным циклом хранилища BLOB-объектов предлагает обширную политику на основе правил, которую можно использовать для переноса данных на лучший уровень доступа и для истечения срока действия данных в конце жизненного цикла. Дополнительные сведения см. в статье [Оптимизация затрат с помощью автоматизации уровней доступа к хранилищу BLOB-объектов Azure](storage-lifecycle-management-concepts.md) .

> [!NOTE]
> В настоящее время данные, хранящиеся в учетной записи хранилища блочных BLOB-объектов (производительность Premium), не могут быть распределены по уровням "горячий", "холодное" или "архивный" с помощью [уровня большого двоичного объекта](/rest/api/storageservices/set-blob-tier)
> Чтобы переместить данные, необходимо синхронно копировать большие двоичные объекты из учетной записи хранения блочного BLOB-объекта на уровень горячего доступа в другой учетной записи, используя [блок размещения из API URL](/rest/api/storageservices/put-block-from-url) или версию AzCopy, которая поддерживает этот API.
> API **Put Block From URL** (Вставка блока из URL-адреса) синхронно копирует данные на сервере, то есть вызов завершается только после того, как все данные перемещены из исходного расположения сервера в расположение назначения.

### <a name="blob-level-tiering-billing"></a>Выставление счетов за распределение BLOB-объектов по уровням

Когда большой двоичный объект передается или перемещается между уровнями, он направляется по соответствующей скорости сразу после передачи или изменения уровня.

Перемещение большого двоичного объекта на более холодный уровень (горячий -> холодный, горячий -> архивный или холодный -> архивный) оплачивается как операция записи на целевой уровень. Запись на целевой уровень оплачивается за каждые 10 000 операций, а запись данных — за каждый ГБ.

Когда большой двоичный объект перемещается на уровень "теплый" (Archive->"тепло", "Archive->" горячий "или" холодный ">" горячий "), операция оплачивается как прочитанная с уровня источника, где операция чтения (за 10 000) и данные (за ГБ) применяются к исходному уровню. Кроме того, могут также взиматься затраты на [раннее удаление](#cool-and-archive-early-deletion) большого двоичного объекта, перемещенного из холодного или архивного уровня. Восстановление [данных с архивного уровня](storage-blob-rehydration.md) занимает время, и данные будут начисляться на архивные цены, пока данные не восстановлены, а уровень BLOB-объектов не изменится на горячий или холодный.

В следующей таблице показано, как выставляются счета за изменение уровня.

| | **Расходы на запись (операция + доступ)** | **Расходы на чтение (операция + доступ)** |
| ---- | ----- | ----- |
| **Установка уровня большого двоичного объекта** | горячий ><br> Архив "горячий >"<br> стильный > Архив | Архив — > здорово<br> Архив — > горячий<br> стильный — > горячий

### <a name="cool-and-archive-early-deletion"></a>Раннее удаление с "холодного" и архивного уровней

Любой большой двоичный объект, перемещаемый на замечательный уровень (только для учетных записей GPv2), подвергается простому периоду раннего удаления в 30 дней. Любой большой двоичный объект, перемещаемый на архивный уровень, подлежит периоду раннего удаления архива в 180 дней. Эта плата пропорциональна. Например, если большой двоичный объект перемещается в архив, а затем удаляется или перемещается на горячий уровень через 45 дней, вам будет взиматься плата за раннее удаление, эквивалентную 135 (180 минус 45) дней хранения этого большого двоичного объекта в архиве.

При переходе между уровнями "круто" и "Архив" существуют некоторые сведения.

1. Если большой двоичный объект выводится как выводимый на основе уровня доступа учетной записи хранения по умолчанию, а большой двоичный объект перемещается в архив, то за раннее удаление не взимается.
1. Если большой двоичный объект явным образом перемещается на замечательный уровень, а затем переносится в архив, применяется плата за раннее удаление.

Вычислите время раннего удаления с помощью свойства **последнего измененного BLOB-** объекта, если уровень доступа не изменился. В противном случае используйте, когда уровень доступа был изменен для охлаждения или архивации, просмотрев свойство большого двоичного объекта: **уровень доступа — изменение времени**. Дополнительные сведения о свойствах больших двоичных объектов см. в статье [Получение свойств большого двоичного объекта](/rest/api/storageservices/get-blob-properties).

## <a name="comparing-block-blob-storage-options"></a>Сравнение параметров хранилища блочных BLOB-объектов

В следующей таблице показано сравнение хранилища больших двоичных объектов производительности Premium, а также уровней доступа "горячий", "холодный" и "архивный".

|                                           | **Производительность Premium**   | **Горячий уровень** | **Изящный уровень**       | **Архивный уровень доступа**  |
| ----------------------------------------- | ------------------------- | ------------ | ------------------- | ----------------- |
| **Доступность**                          | 99,9 %                     | 99,9 %        | 99 %                 | Автономная миграция           |
| **Доступность** <br> **(операции чтения RA-GRS)**  | Н/Д                       | 99,99 %       | 99,9 %               | Автономная миграция           |
| **Плата за использование**                         | Более высокие затраты на хранение, снижение уровня доступа и стоимость транзакций | Выше стоимость хранения, ниже расходы на доступ и транзакции | Ниже стоимость хранения, выше расходы на доступ и транзакции | Ниже стоимость хранения, очень высокие расходы на доступ и транзакции |
| **Минимальный срок хранения**              | Н/Д                       | Н/Д          | 30 дней<sup>1</sup> | 180 дней
| **Задержка** <br> **(время до получения первого байта)** | Миллисекунды с одной цифрой | Миллисекунды | Миллисекунды        | Часы<sup>2</sup> |

<sup>1</sup> объекты на "холодном" уровне в учетных записях GPv2 имеют минимальный срок хранения в 30 дней. Учетные записи хранения BLOB-объектов не имеют минимального срока хранения для уровня "стильный".

<sup>2</sup> архивное хранилище в настоящее время поддерживает два приоритета восстановления: высокий и стандартный, предлагая различные задержки и затраты на получение. Дополнительные сведения см. в статье восстановление [данных большого двоичного объекта из уровня архива](storage-blob-rehydration.md).

> [!NOTE]
> Учетные записи хранения BLOB-объектов поддерживают те же показатели производительности и масштабируемости, что и учетные записи хранения общего назначения версии 2. Дополнительные сведения см. в разделе [целевые показатели масштабируемости и производительности для хранилища BLOB-объектов](scalability-targets.md).

## <a name="pricing-and-billing"></a>Цены и выставление счетов

Все учетные записи хранения используют модель ценообразования для блочного хранилища BLOB-объектов на основе уровня каждого большого двоичного объекта. При выставлении счетов следует учитывать следующее:

- **Затраты на хранение**. Помимо объема хранимых данных стоимость хранения данных зависит от уровня доступа. Чем холоднее уровень хранилища, тем меньше стоит каждый гигабайт.
- **Затраты на доступ к данным.** Чем холоднее уровень хранилища, тем дороже доступ к данным. Для данных на уровне холодного и архивного доступа взимается плата за доступ к данным за гигабайт для чтения.
- **Затраты на транзакции**. взимается плата за все уровни, которые увеличиваются по мере того, как уровень становится еще больше.
- **Затраты на передачу данных георепликации**. Эта плата распространяется только на учетные записи с настроенной георепликацией, включая GRS и RA-GRS. При передаче данных георепликации взимается плата за гигабайт данных.
- **Расходы на исходящий трафик.** Передача трафика (из региона Azure) предусматривает выставление счетов за использование пропускной способности по гигабайтам, как и при использовании учетных записей хранения общего назначения.
- **Изменение уровня доступа**. изменение уровня доступа к учетной записи приведет к оплате изменений на уровне всех больших двоичных объектов, для которых не задан явный набор уровней. Сведения об изменении уровня доступа для одного большого двоичного объекта см. в разделе [выставление счетов на уровне больших двоичных](#blob-level-tiering-billing)объектов.

    Изменение уровня доступа для большого двоичного объекта при включении управления версиями или наличии моментальных снимков большого двоичного объекта может привести к дополнительным издержкам. Сведения о больших двоичных объектах с включенным управлением версиями см. в разделе [цены и выставление счетов](versioning-overview.md#pricing-and-billing) в документации по версии BLOB-объектов. Сведения о больших двоичных объектах с моментальными снимками см. в разделе [цены и выставление счетов](snapshots-overview.md#pricing-and-billing) в документации по моментальным снимкам BLOB-объектов

> [!NOTE]
> Дополнительные сведения о ценах для блочных BLOB-объектов см. в разделе [цены на блочные BLOB](https://azure.microsoft.com/pricing/details/storage/blobs/)-объекты. Дополнительные сведения о расходах на передачу исходящих данных см. на странице [сведения о ценах на пропускную способность](https://azure.microsoft.com/pricing/details/bandwidth/) .

## <a name="availability"></a>Доступность

В выбранных регионах доступны различные уровни доступа, а также распределение по уровням BLOB-объектов. Полный список см. на странице [Доступность продуктов по регионам](https://azure.microsoft.com/global-infrastructure/services/?products=storage).

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как управлять большими двоичными объектами и учетными записями на разных уровнях доступа.

- [Управление уровнем большого двоичного объекта в учетной записи хранения Azure](manage-access-tier.md)
- [Как управлять уровнем доступа учетной записи по умолчанию для учетной записи хранения Azure](../common/manage-account-default-access-tier.md)
- [Оптимизация затрат путем автоматизации уровней доступа к хранилищу BLOB-объектов Azure](storage-lifecycle-management-concepts.md)
