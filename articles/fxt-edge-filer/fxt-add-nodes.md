---
title: Руководство по Добавление узлов в кластер Azure FXT Edge Filer
description: Узнайте, как добавить узлы кластера в кэш хранилища Azure FXT Edge Filer и включить высокий уровень доступности.
author: ekpgh
ms.author: rohogue
ms.service: fxt-edge-filer
ms.topic: tutorial
ms.date: 06/20/2019
ms.openlocfilehash: 85ad78eeb095b427b1a6334f57c351e926022dff
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96021883"
---
# <a name="tutorial-add-cluster-nodes-to-an-azure-fxt-edge-filer-cluster"></a>Руководство по Добавление узлов кластера в Azure FXT Edge Filer

Новый кластер Azure FXT Edge Filer создается только с одним узлом. Необходимо добавить по крайней мере еще два узла и включить высокий уровень доступности, прежде чем выполнять другие настройки.

В этом учебнике описано, как добавлять узлы кластера и включать высокий уровень доступности.

Из этого руководства вы узнаете:

> [!div class="checklist"]
>
> * как добавить узлы в кластер FXT;
> * как включить высокий уровень доступности.

Чтобы выполнить шаги, приведенные в этом учебнике, потребуется около 45 минут.

Перед началом работы с этим учебником включите узлы, которые необходимо добавить, и [задайте им начальные пароли](fxt-node-password.md).

## <a name="1-load-the-cluster-nodes-page"></a>1. Загрузка страницы "Узлы кластера"

Откройте панель управления кластера в веб-браузере и войдите от имени администратора. (Подробные инструкции см. в обзорной статье в разделе об [открытии страниц параметров](fxt-cluster-create.md#open-the-settings-pages)).

После открытия панели управления отобразится вкладка **Панель мониторинга**. 

![Вкладка "Панель мониторинга" на панели управления (первая вкладка)](media/fxt-cluster-config/dashboard-1-node.png)

На приведенном рисунке показана панель мониторинга созданного кластера с одним узлом.

## <a name="2-locate-the-node-to-add"></a>2. Поиск узла для добавления

Чтобы добавить узлы, щелкните вкладку **Параметры** и выберите страницу **FXT Nodes** (Узлы FXT) в разделе **Cluster** (Кластер).

![Вкладка "Параметры" панели управления (вторая вкладка) с загруженными страницами Cluster > FXT Nodes (Кластер > Узлы FXT)](media/fxt-cluster-config/settings-fxt-nodes.png)

В списке **FXT Nodes — Unjoined** (Узлы FXT — отсоединено) перечислены все неназначенные узлы FXT (в большинстве центров обработки данных предусмотрено всего несколько узлов). Найдите узлы FXT, которые необходимо добавить в кластер.

> [!Tip]
> Если вы не можете найти необходимый узел в списке **Unjoined** (Отсоединено), убедитесь, что он соответствует приведенным ниже требованиям.
>
> * Он включен и для него настроен [корневой пароль](fxt-node-password.md).
> * Он подключен к доступной сети. Если вы используете виртуальные локальные сети, они должны находиться в той же виртуальной локальной сети, что и кластер.
> * Его можно определить с помощью протокола Bonjour.
>
>   Некоторые параметры брандмауэра блокируют порты TCP/UDP, используемые Bonjour, что не позволяет операционной системе FXT автоматически обнаруживать узлы.
>
> Если в списке отсутствует узел, который необходимо добавить, попробуйте применить приведенные ниже решения.
>
> * Нажмите кнопку **Manual Discover** (Обнаружить вручную), чтобы найти узел по IP-адресу.
>
> * Вручную назначьте временные IP-адреса. Такие ситуации возникают редко, но это может быть необходимо, если вы используете виртуальные локальные сети с тегами, и узлы не находятся в нужной сети, или ваша сеть не позволяет самостоятельно назначать IP-адреса. Следуйте инструкциям в устаревшей версии этого документа, чтобы [вручную задать статический IP-адрес](https://azure.github.io/Avere/legacy/create_cluster/4_8/html/static_ip.html).

В списке отображаются имя узла, IP-адрес, версия программного обеспечения и статус соответствия. Как правило, в столбце **Состояние** указано Wants to join (Хочет присоединиться) или описывается системная или аппаратная проблема, из-за которой узел не может присоединиться к кластеру.

Столбец **Действия** содержит кнопки, с помощью которых можно добавить узел в кластер или обновить его программное обеспечение. С помощью кнопки "Обновить" можно автоматически установить версию программного обеспечения, которая соответствует узлам в кластере.

Все узлы в кластере должны использовать одну и ту же версию ОС, но вам не нужно обновлять программное обеспечение перед добавлением узла. После нажатия кнопки **Allow To Join** (Разрешить присоединение) процесс присоединения к кластеру автоматически выполняет проверку программного обеспечения ОС на соответствие версии кластера и устанавливает его.

Дополнительные сведения о параметрах на этой странице см. в разделе [**Cluster** > **FXT Nodes**](https://azure.github.io/Avere/legacy/ops_guide/4_7/html/gui_fxt_nodes.html) (Кластер > Узлы FXT) в руководстве по настройке кластера.

## <a name="3-click-the-allow-to-join-button"></a>3. Нажатие кнопки Allow to Join (Разрешить присоединение)

Нажмите кнопку **Allow To Join** _ (Разрешить присоединение) в столбце _ *Действия** для узла, который необходимо добавить.

После нажатия кнопки состояние узла может измениться, так как его программное обеспечение обновляется при подготовке к добавлению в кластер.

На рисунке ниже показан узел, который находится в процессе присоединения к кластеру (скорее всего, он получает обновление ОС перед добавлением). Для узлов, которые находятся в процессе добавления к кластеру, в столбце **Действия** кнопки не отображаются.

![одна строка таблицы узла, где отображаются имя узла, IP-адрес, версия программного обеспечения, сообщение Allowed to join (Разрешено присоединиться) и пустой последний столбец](media/fxt-cluster-config/node-join-in-process.png)

Через несколько секунд в списке узлов кластера в верхней части страницы настроек **FXT Nodes** (Узлы FXT) должен появиться новый узел.

Повторите этот процесс, чтобы добавить другие узлы в кластер. Вам не нужно ждать, пока один узел завершит присоединение к кластеру, прежде чем начинать присоединять другой.

## <a name="enable-high-availability"></a>Включение высокого уровня доступности

После добавления второго узла в кластер на панели мониторинга панели управления может появиться предупреждающее сообщение о том, что функция высокой доступности не настроена.

Высокий уровень доступности (HA) позволяет узлам кластера компенсировать друг друга, если один из них выходит из строя. Высокий уровень доступности не включен по умолчанию.

![Вкладка "Панель мониторинга" с сообщением The cluster has more than one node, but HA is not enabled ... (В кластере есть несколько узлов, но функция HA отключена ...) в таблице "Условия"](media/fxt-cluster-config/no-ha-2-nodes.png)

> [!Note]
> Не включайте высокий уровень доступности, пока в кластере есть по крайней мере три узла.

Следуйте приведенной ниже процедуре, чтобы включить функцию высокого уровня доступности.

1. Загрузите страницу **High Availability** (Высокий уровень доступности) в разделе **Cluster** (Кластер) вкладки **Settings** (Параметры).

   ![Страница конфигурации высокого уровня доступности (Cluster > High Availability (Кластер > Высокий уровень доступности)). Флажок Enable HA (Включить высокий уровень доступности) находится в верхней части страницы, а кнопка Submit (Отправить) — в нижней.](media/fxt-cluster-config/enable-ha.png)

2. Установите флажок **Enable HA** (Включить высокий уровень доступности) и нажмите кнопку **Submit** (Отправить).

На **панели мониторинга** появится предупреждение, подтверждающее включение высокого уровня доступности.

![Таблица панели мониторинга с сообщением "HA is now fully configured" (Функция высокого уровня доступности теперь полностью настроена)](media/fxt-cluster-config/ha-configured-alert.png)

## <a name="next-steps"></a>Дальнейшие действия

После добавления всех узлов в кластер продолжите установку, настроив долговременное хранилище кластера.

> [!div class="nextstepaction"]
> [Tutorial: Add back-end storage and configure the virtual namespace](fxt-add-storage.md) (Учебник. Добавление серверного хранилища и настройка виртуального пространства имен)