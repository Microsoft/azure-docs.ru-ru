---
title: Руководство по Настройка сети в кластере Azure FXT Edge Filer
description: Настройка параметров сети после создания кластера Azure FXT Edge Filer
author: ekpgh
ms.author: rohogue
ms.service: fxt-edge-filer
ms.topic: tutorial
ms.date: 06/20/2019
ms.openlocfilehash: 4ce7ffc66e0b6164b2e4ca9725b3f26403292a4a
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "92220777"
---
# <a name="tutorial-configure-the-clusters-network-settings"></a>Руководство по настройке параметров сети кластера

Прежде чем использовать созданный кластер Azure FXT Edge Filer, необходимо проверить и настроить несколько параметров сети для рабочего процесса.

В этом учебнике описаны параметры сети, которые вам может потребоваться настроить для нового кластера.

Вы узнаете:

> [!div class="checklist"]
>
> * какие параметры сети вам может потребоваться обновить после создания кластера;
> * для каких вариантов использования Azure FXT Edge Filer необходим сервер AD или DNS-сервер;
> * как настроить DNS с циклическим перебором (RRDNS) для автоматического распределения нагрузки запросов клиента к кластеру FXT.

Время, необходимое для выполнения этих шагов, зависит от того, сколько изменений конфигурации требуется в системе:

* если вам нужно только прочитать учебник и проверить несколько настроек, это займет 10-15 минут;
* если необходимо настроить DNS с циклическим перебором, эта задача может занять больше часа.

## <a name="adjust-network-settings"></a>Настройка параметров сети

Несколько задач, связанных с сетью, являются частью настройки нового кластера Azure FXT Edge Filer. Ознакомьтесь с приведенным списком и определите задачи, которые необходимо применить к вашей системе.

Дополнительные сведения о параметрах сети для кластера см. на странице [настройки служб сети](https://azure.github.io/Avere/legacy/ops_guide/4_7/html/network_overview.html) в руководстве по настройке кластера.

* Настройка DNS с циклическим перебором для сети клиента (необязательно)

  Распределите нагрузку трафика кластера, настроив систему DNS как описано в разделе [Настройка DNS для кластера FXT Edge Filer](#configure-dns-for-load-balancing).

* Проверка параметров NTP

* Настройка Active Directory и загрузок имен пользователя и групп (при необходимости)

  Если сетевые узлы используют Active Directory или другой вид внешней службы каталогов, необходимо изменить конфигурацию служб каталогов кластера, чтобы настроить способ скачивания кластером информации об имени пользователя и группе. Дополнительные сведения см. в разделе **Cluster** > **Directory Services** (Кластер > Службы каталогов) в руководстве по настройке кластера.

  Сервер AD является обязательным, если требуется поддержка SMB. Выполните настройку AD перед началом настройки SMB.

* Определение виртуальных локальных сетей (необязательно)
  
  Настройте любые дополнительные виртуальные локальные сети, необходимые перед определением vservers кластера и глобального пространства имен. Чтобы получить дополнительные сведения, ознакомьтесь с разделом [Working with VLANs](https://azure.github.io/Avere/legacy/ops_guide/4_7/html/network_overview.html#vlan-overview) (Работа с виртуальными локальными сетями) в руководстве по настройке кластера.

* Настройка прокси-серверов (при необходимости)

  Если кластер использует прокси-сервер для доступа к внешним адресам, выполните приведенные ниже действия, чтобы настроить его.

  1. Определите прокси-сервер на странице параметров **Proxy Configuration** (Конфигурация прокси-сервера).
  1. Примените конфигурацию прокси-сервера на странице **Cluster** > **General Setup** (Кластер > Общая настройка) или **Core Filer Details** (Сведения об основном файловом хранилище).
  
  Дополнительные сведения см. в разделе [Using web proxies](https://azure.github.io/Avere/legacy/ops_guide/4_7/html/proxy_overview.html) (Использование веб-прокси) в руководстве по настройке кластера.

* Отправка [сертификатов шифрования](#encryption-certificates) для использования кластера (необязательно)

### <a name="encryption-certificates"></a>Сертификаты шифрования

Кластер FXT Edge Filer использует сертификаты X.509 для этих функций:

* для шифрования трафика администрирования кластера;

* для аутентификации от имени клиента на сторонних серверах KMIP;

* для проверки сертификатов сервера поставщиков облачных служб.

Если необходимо отправить сертификаты в кластер, используйте страницу параметров **Cluster** > **Certificates** (Кластер > Сертификаты). Дополнительные сведения см. на странице [Cluster > Certificates](https://azure.github.io/Avere/legacy/ops_guide/4_7/html/gui_certificates.html) (Кластер > Сертификаты) в руководстве по настройке кластера.

Для шифрования данных об управлении кластером используйте страницу параметров **Кластер** > **Общая настройка**, чтобы выбрать, какой сертификат использовать для TLS администрирования.

> [!Note]
> Ключи доступа облачной службы хранятся с помощью страницы конфигурации **Cloud Credentials** (Учетные данные облака). В предыдущем разделе [Add a core filer](fxt-add-storage.md#add-a-core-filer) (Добавление основного файлового хранилища) приведен пример. Дополнительные сведения см. в разделе [Cloud Credentials](https://azure.github.io/Avere/legacy/ops_guide/4_7/html/gui_cloud_credentials.html) (Учетные данные облака) в руководстве по настройке кластера.

## <a name="configure-dns-for-load-balancing"></a>Настройка DNS для балансировки нагрузки

В этом разделе описаны основные настройки системы DNS с циклическим перебором (RRDNS) для распределения клиентской нагрузки по всем IP-адресам клиента в кластере FXT Edge Filer.

### <a name="decide-whether-or-not-to-use-dns"></a>Следует ли использовать DNS

Мы советуем всегда выполнять балансировку нагрузки, но вам не обязательно всегда использовать DNS. Например, в некоторых типах рабочих процессов клиента лучше использовать сценарий для равномерного распределения IP-адресов кластера между клиентами при подключении кластера. Некоторые методы описываются в сведениях о [подключении кластера](fxt-mount-clients.md).

Принимая решение о том, следует ли использовать DNS-сервер, учитывайте следующее:

* Если к вашей системе обращаются только клиенты NFS, использование DNS не требуется. Все сетевые адреса можно указать, используя числовые IP-адреса.

* Если ваша система поддерживает доступ к SMB (CIFS), DNS-сервер требуется, потому что нужно указать домен DNS для сервера Active Directory.

* DNS является обязательным, если вы хотите использовать аутентификацию Kerberos.

### <a name="round-robin-dns-configuration-details"></a>Сведения о конфигурации DNS с циклическим перебором

Когда клиенты обращаются к кластеру, RRDNS автоматически балансирует их запросы между всеми доступными интерфейсами.

Для обеспечения оптимальной производительности настройте DNS-сервер для обработки адресов кластера, ориентированных на клиенты, как показано на следующей схеме.

Слева отображается кластер vserver, а IP-адреса отображаются в центре и справа. Укажите для каждой точки доступа клиента записи и указатели A, как показано на рисунке.

![Диаграмма DNS с циклическим перебором кластера: ссылка на подробный замещающий текст под изображением](media/fxt-cluster-config/fxt-rrdns-diagram.png) 
[подробное текстовое описание](https://azure.github.io/Avere/legacy/Azure-FXT-EdgeFilerDNSconfiguration-alt-text.html)

Каждый IP-адрес, обращенный к клиенту, должен иметь уникальное имя для внутреннего использования кластером. (На этой схеме клиентские IP-адреса называются vs1-client-IP-* для ясности, но в рабочей среде вам, вероятно, следует использовать более точное определение, например, client*.)

Клиенты подключают кластер, используя имя сервера vserver в качестве аргумента сервера.

Измените файл ``named.conf`` DNS-сервера, чтобы установить циклический порядок запросов на сервер vserver. Этот параметр гарантирует циклический перебор всех доступных значений. Добавьте инструкцию следующим образом:

```
options {
    rrset-order {
        class IN A name "vserver1.example.com" order cyclic;
    };
};
```

Следующие команды ``nsupdate`` содержат пример правильной настройки DNS:

```
update add vserver1.example.com. 86400 A 10.0.0.10
update add vserver1.example.com. 86400 A 10.0.0.11
update add vserver1.example.com. 86400 A 10.0.0.12
update add vs1-client-IP-10.example.com. 86400 A 10.0.0.10
update add vs1-client-IP-11.example.com. 86400 A 10.0.0.11
update add vs1-client-IP-12.example.com. 86400 A 10.0.0.12
update add 10.0.0.10.in-addr.arpa. 86400 PTR vs1-client-IP-10.example.com
update add 11.0.0.10.in-addr.arpa. 86400 PTR vs1-client-IP-11.example.com
update add 12.0.0.10.in-addr.arpa. 86400 PTR vs1-client-IP-12.example.com
```

### <a name="enable-dns-in-the-cluster"></a>Включение DNS в кластере

Укажите DNS-сервер, используемый кластером, на странице параметров: **Cluster** > **Administrative Network** (Кластер > Административная сеть). Параметры на этой странице включают:

* адрес DNS-сервера;
* доменное имя DNS-сервера;
* домены поиска DNS.

Ознакомьтесь с [параметрами DNS](<https://azure.github.io/Avere/legacy/ops_guide/4_7/html/gui_admin_network.html#gui-dns>) в руководстве по настройке кластера для получения дополнительных сведений.

## <a name="next-steps"></a>Дальнейшие действия

Это последний шаг базовой конфигурации для кластера Azure FXT Edge Filer.

* Дополнительные сведения о светодиодных индикаторах см. в статье [Monitor Azure FXT Edge Filer hardware status](fxt-monitor.md) (Мониторинг состояния оборудования Azure FXT Edge Filer).
* Дополнительные сведения о том, как клиенты должны подключать кластер FXT Edge Filer, см. в статье [Tutorial: Mount the cluster](fxt-mount-clients.md) (Учебник: подключение кластера).
* Дополнительные сведения об эксплуатации кластера FXT Edge Filer и управлении им см. на странице [Cluster Configuration Guide](https://azure.github.io/Avere/legacy/ops_guide/4_7/html/ops_conf_index.html) (Руководство по настройке кластера).
