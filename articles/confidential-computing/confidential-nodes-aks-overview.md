---
title: Узлы конфиденциальных вычислений в Службе Azure Kubernetes (AKS)
description: Узлы конфиденциальных вычислений в AKS
services: virtual-machines
author: agowdamsft
ms.service: container-service
ms.subservice: confidential-computing
ms.topic: overview
ms.date: 2/08/2021
ms.author: amgowda
ms.openlocfilehash: 203185d9f6def2204906b8722f1969b14eee8787
ms.sourcegitcommit: 32e0fedb80b5a5ed0d2336cea18c3ec3b5015ca1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2021
ms.locfileid: "105933157"
---
# <a name="confidential-computing-nodes-on-azure-kubernetes-service"></a>Узлы конфиденциальных вычислений в Службе Azure Kubernetes

[Конфиденциальные вычисления в Azure](overview.md) позволяют защитить конфиденциальные данные во время их использования. Базовая инфраструктура конфиденциальных вычислений защищает эти данные от других приложений, администраторов и поставщиков облачных служб с помощью доверенных контейнерных сред выполнения на основе оборудования. Добавление узлов конфиденциальных вычислений позволяет настроить приложение-контейнер, чтобы оно выполнялось в изолированном, защищенном аппаратным обеспечением и проверяемом окружении.

## <a name="overview"></a>Обзор

Служба Azure Kubernetes Service (AKS) поддерживает добавление [конфиденциальных вычислительных узлов DCsv2](confidential-computing-enclaves.md) на основе Intel SGX. Эти узлы позволяют запускать конфиденциальные рабочие нагрузки в аппаратной доверенной среде выполнения (TEE). TEE позволяет коду уровня пользователя из контейнеров выделять частные области памяти для непосредственного выполнения кода с помощью ЦП. Эти области выделенной памяти, которые выполняются напрямую ЦП, называются анклавами. Анклавы помогают защитить конфиденциальность и целостность данных, а также целостность кода от других процессов, запущенных на тех же узлах. Модель выполнения Intel SGX также удаляет промежуточные уровни гостевой ОС, ОС узла и гипервизора, тем самым уменьшая контактную зону для атак. Использование модели *выполнения на основе оборудования с изоляцией для каждого контейнера* в узле позволяет приложениям напрямую выполнять задачи с использованием ЦП, поддерживая при этом специальный блок памяти зашифрованным для каждого контейнера. Узлы конфиденциальных вычислений с конфиденциальными контейнерами являются отличным дополнением к планированию мер по обеспечению безопасности с "нулевым доверием" и стратегии глубокой защиты контейнера.

![Обзор узла SGX](./media/confidential-nodes-aks-overview/sgxaksnode.jpg)

## <a name="aks-confidential-nodes-features"></a>Возможности узлов конфиденциальных вычислений AKS

- Изоляция контейнеров на основе оборудования и на уровне процессов с использованием доверенной среды выполнения (TEE) Intel SGX 
- Кластеры разнородных пулов узлов (сочетание конфиденциальных и неконфиденциальных пулов узлов)
- Планирование развертывания pod на основе памяти для EPC (кэш зашифрованных страниц) (требуется надстройка)
- Предварительно установленный драйвер Intel SGX DCAP
- Горизонтальное автомасштабирование pod и автомасштабирование кластера на основе используемых ресурсов ЦП
- Поддержка контейнеров Linux на рабочих узлах виртуальной машины Ubuntu 18.04 2-го поколения

## <a name="confidential-computing-add-on-for-aks"></a>Надстройка конфиденциальных вычислений для AKS
Функция надстройки обеспечивает дополнительные возможности в AKS при запуске пулов узлов конфиденциальных вычислений в кластере. Эта надстройка позволяет использовать функции, приведенные ниже.

#### <a name="azure-device-plugin-for-intel-sgx"></a>Подключаемый модуль устройства Azure для Intel SGX <a id="sgx-plugin"></a>

Подключаемый модуль устройства реализует интерфейс подключаемого модуля устройства Kubernetes для памяти кэша зашифрованных страниц (EPC) и предоставляет драйверы устройств из узлов. Фактически этот подключаемый модуль предоставляет память EPC как еще один тип ресурса в Kubernetes. Пользователи могут указать для этого ресурса ограничения так же, как для любых других ресурсов. Помимо функции планирования, подключаемый модуль устройства помогает назначить разрешения драйвера устройства Intel SGX конфиденциальным контейнерам рабочей нагрузки. Благодаря этому разработчик подключаемого модуля может не подключать тома драйвера Intel SGX в файлах развертывания. Пример реализации развертывания на основе памяти EPC (`kubernetes.azure.com/sgx_epc_mem_in_MiB`) вы можете изучить [здесь](https://github.com/Azure-Samples/confidential-computing/blob/main/containersamples/helloworld/helm/templates/helloworld.yaml).


## <a name="programming-models"></a>Модели программирования

### <a name="confidential-containers"></a>Конфиденциальные контейнеры

[Конфиденциальные контейнеры](confidential-containers.md) позволяют конфиденциально запускать существующие неизмененные приложения-контейнеры в среде выполнения большинства **распространенных языков программирования** (Python, Node, Java и т. д.). Для этой модели упаковки не потребуется изменять исходный код или выполнять повторную компиляцию. Поэтому это самый быстрый способ обеспечения конфиденциальности, которого только можно достигнуть, упаковывая стандартные контейнеры docker с помощью проектов с открытым исходным кодом или решений партнеров Azure. В этой модели упаковки и выполнения все части приложения-контейнера загружаются в доверенную границу (анклав). Следовательно, она будет хорошим решением для готовых приложений-контейнеров, доступных на рынке, или пользовательских приложений, которые в настоящее время выполняются на узлах общего назначения.

### <a name="enclave-aware-containers"></a>Контейнеры с поддержкой анклавов
Узлы конфиденциальных вычислений в AKS также поддерживают контейнеры, запрограммированные для запуска в анклаве с использованием **специального набора инструкций**, доступного из ЦП. Эта модель программирования обеспечивает более строгий контроль над ходом выполнения и требует использования специальных пакетов SDK и платформ. Она обеспечивает максимальный контроль над блок-схемой приложения с самым низким уровнем доверенной вычислительной базы (TCB). Разработка контейнеров с поддержкой анклава включает в себя ненадежные и доверенные элементы для приложения-контейнера, что позволяет управлять обычным объемом памяти и объемом памяти кэша зашифрованных страниц (EPC), в котором выполняется анклав. Дополнительные сведения о контейнерах с поддержкой анклава см. [здесь](enclave-aware-containers.md).

## <a name="next-steps"></a>Next Steps

[Развертывание кластера AKS с конфиденциальными вычислительными узлами](./confidential-nodes-aks-get-started.md)

[Примеры для быстрого начала работы с конфиденциальными контейнерами](https://github.com/Azure-Samples/confidential-container-samples)

[Список SKU DCsv2](../virtual-machines/dcv2-series.md)

[Сеанс вебинара по углубленной защите с помощью конфиденциальных контейнеров](https://www.youtube.com/watch?reload=9&v=FYZxtHI_Or0&feature=youtu.be)

<!-- LINKS - external -->
[Azure Attestation]: ../attestation/index.yml


<!-- LINKS - internal -->
[DC Virtual Machine]: /confidential-computing/virtual-machine-solutions
