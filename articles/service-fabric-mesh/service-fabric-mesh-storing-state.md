---
title: Варианты хранения состояния в сети Azure Service Fabric
description: Узнайте о надежном сохранении состояний в приложениях службы "Сетка Service Fabric", работающих в службе "Сетка Azure Service Fabric".
author: georgewallace
ms.author: gwallace
ms.date: 11/27/2018
ms.topic: conceptual
ms.openlocfilehash: 651329b1b061f2cf5a06dbdc9d60f73cec64e7d3
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "99625555"
---
# <a name="state-management-with-service-fabric"></a>Управление состояниями с помощью Service Fabric

> [!IMPORTANT]
> Поддержка предварительной версии Сетки Azure Service Fabric была прекращена. Новые развертывания больше не будут разрешены через API Сетки Service Fabric. Поддержка существующих развертываний будет продолжена до 28 апреля 2021 г. включительно.
> 
> Дополнительные сведения см. в статье [Прекращение поддержки предварительной версии Сетки Azure Service Fabric](https://azure.microsoft.com/updates/azure-service-fabric-mesh-preview-retirement/).

Service Fabric поддерживает множество разных способов хранения состояний. Принципы работы шаблонов управления состояниями и Service Fabric представлены в разделе [Состояние службы](../service-fabric/service-fabric-concepts-state.md). Эти принципы применимы независимо от того, выполняются службы внутри или вне службы "Сетка Service Fabric". 

С помощью службы "Сетка Service Fabric" можно легко развернуть новое приложение и подключить его к существующему хранилищу данных, размещенному в Azure. Помимо использования любой удаленной базы данных существует несколько вариантов хранения данных, в зависимости от того, какое хранилище требуется службе, локальное или удаленное. 

## <a name="volumes"></a>Тома

Контейнеры часто используют временные диски. Такие диски непостоянны, поэтому в случае сбоя контейнера вы получаете новый временный диск и теряете данные. Кроме того, доступ к данным на временных дисках трудно предоставлять другим контейнерам. Тома — это каталоги, которые вставляются в экземпляры контейнеров и используются для сохранения состояния. Тома представляют собой хранилище файлов общего назначения и дают возможность чтения и записи файлов с помощью обычных файловых API-интерфейсов ввода-вывода для дисков. Ресурс тома описывает способ подключения каталога и используемое резервное хранилище. Для хранения данных можно использовать хранилище файлов Azure или производительный диск Service Fabric.

![На схеме показана служба, которая передается в том, что передается на Service Fabric надежный том на реплицированном локальном диске и в том файлов Azure в сетевом хранилище.][image3]

### <a name="service-fabric-reliable-volume"></a>Надежный том Service Fabric

Надежный том Service Fabric — это драйвер тома Docker, используемый для подключения локального тома к контейнеру. Операции чтения и записи являются локальными и выполняются быстро. Данные реплицируются на дополнительные узлы, обеспечивая высокий уровень доступности. Отработка отказа также выполняется быстро. В случае сбоя контейнера выполняется отработка отказа с добавлением на тот узел, где уже есть копия ваших данных. Пример см. в разделе [развертывание приложения с Service Fabric надежным томом](service-fabric-mesh-howto-deploy-app-sfreliable-disk-volume.md).

### <a name="azure-files-volume"></a>Том службы "Файлы Azure"

Том службы "Файлы Azure" — это драйвер тома Docker, используемый для подключения общего ресурса службы "Файлы Azure" к контейнеру. Хранилище службы "Файлы Azure" использует сетевое хранилище, поэтому операции чтения и записи выполняются по сети. По сравнению с надежным томом Service Fabric хранилище службы "Файлы Azure" является менее производительным, но более экономичным и надежным вариантом хранения данных. Пример см. в статье [Развертывание приложение с использованием тома службы "Файлы Azure"](service-fabric-mesh-howto-deploy-app-azurefiles-volume.md).

## <a name="next-steps"></a>Дальнейшие действия

Сведения о модели приложения см. в разделе [Сохранение состояния с помощью подключения тома службы файлов Azure в приложении службы "Сетка Service Fabric"](service-fabric-mesh-service-fabric-resources.md).

[image3]: ./media/service-fabric-mesh-storing-state/volumes.png
