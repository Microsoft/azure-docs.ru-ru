---
title: Политики проверки управления API Azure | Документация Майкрософт
description: Сведения о политиках, которые можно использовать в службе управления API Azure для проверки запросов и ответов.
services: api-management
documentationcenter: ''
author: dlepow
ms.service: api-management
ms.topic: article
ms.date: 03/12/2021
ms.author: apimpm
ms.openlocfilehash: 3f91ca21512b8cddcac7fe71fa3eec07e1a8745a
ms.sourcegitcommit: e6de1702d3958a3bea275645eb46e4f2e0f011af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "104720089"
---
# <a name="api-management-policies-to-validate-requests-and-responses"></a>Политики управления API для проверки запросов и ответов

В этой статье содержится ссылка на следующие политики управления API. Дополнительные сведения о добавлении и настройке политик см. в статье о [политиках в управлении API](./api-management-policies.md).

Используйте политики проверки для проверки запросов API и ответов на схему OpenAPI и защиты от таких уязвимостей, как внедрение заголовков или полезных данных. В то время как не заменяет брандмауэр веб-приложения, политики проверки обеспечивают гибкость для реагирования на дополнительный класс угроз, не охваченных продуктами безопасности, которые используют статические предопределенные правила.

## <a name="validation-policies"></a>Политики проверки

- [Проверка содержимого](#validate-content) — проверяет размер или схему JSON текста запроса или ответа на схему API. 
- [Проверить параметры](#validate-parameters) — проверяет параметры заголовка запроса, запроса или пути к схеме API.
- [Проверка заголовков](#validate-headers) — проверяет заголовки ответов на соответствие схеме API.
- [Проверка кода состояния](#validate-status-code) — проверяет коды состояния HTTP в ответах на схему API.

> [!NOTE]
> Максимальный размер схемы API, который может использоваться политикой проверки, составляет 4 МБ. Если схема превышает это ограничение, то политики проверки будут возвращать ошибки во время выполнения. Чтобы увеличить его, обратитесь в [службу поддержки](https://azure.microsoft.com/support/options/). 

## <a name="actions"></a>Действия

Каждая политика проверки содержит атрибут, указывающий действие, которое Управление API принимает при проверке сущности в запросе или ответе API для схемы API. Действие может быть задано для элементов, представленных в схеме API, и, в зависимости от политики, для элементов, которые не представлены в схеме API. Действие, указанное в дочернем элементе политики, переопределяет действие, указанное для его родителя.

Доступные действия:

| Действие         | Описание          |                                                                                                                         
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------- |
| ignore | Пропустить проверку. |
| запретить | Блокировать обработку запроса или ответа, регистрировать ошибку подробной проверки и возвращать ошибку. Обработка прерывается при обнаружении первого набора ошибок. |
| определить | Ошибки проверки журнала, не прерывая обработку запроса или ответа. |

## <a name="logs"></a>Журналы

Сведения об ошибках проверки во время выполнения политики записываются в переменную, `context.Variables` указанную в `errors-variable-name` атрибуте корневого элемента политики. При настройке в `prevent` действии ошибка проверки блокирует дальнейшую обработку запроса или ответа и также распространяется на `context.LastError` свойство. 

Чтобы исследовать ошибки, используйте политику [трассировки](api-management-advanced-policies.md#Trace) для записи ошибок переменных контекста в [Application Insights](api-management-howto-app-insights.md).

## <a name="performance-implications"></a>Влияние на производительность

Добавление политик проверки может повлиять на пропускную способность API. Применяются следующие общие принципы.
* Чем больше размер схемы API, тем ниже будет пропускная способность. 
* Чем больше полезная нагрузка в запросе или ответе, тем ниже будет пропускная способность. 
* Размер схемы API больше влияет на производительность, чем размер полезных данных. 
* Проверка схемы API, которая имеет размер несколько мегабайтов, может привести к превышению времени ожидания запроса или ответа при некоторых условиях. Этот результат более поносится на уровни  **использования** и **разработчика** службы. 

Мы рекомендуем выполнять нагрузочные тесты с ожидаемыми рабочими нагрузками, чтобы оценить влияние политик проверки на пропускную способность API.

## <a name="validate-content"></a>Проверка содержимого

`validate-content`Политика проверяет размер или схему JSON текста запроса или ответа на схему API. Форматы, отличные от JSON, не поддерживаются.

### <a name="policy-statement"></a>Правило политики

```xml
<validate-content unspecified-content-type-action="ignore|prevent|detect" max-size="size in bytes" size-exceeded-action="ignore|prevent|detect" errors-variable-name="variable name">
    <content type="content type string, for example: application/json, application/hal+json" validate-as="json" action="ignore|prevent|detect" />
</validate-content>
```

### <a name="example"></a>Пример

В следующем примере полезные данные JSON в запросах и ответах проверяются в режиме обнаружения. Сообщения с полезной нагрузкой размером более 100 КБ блокируются. 

```xml
<validate-content unspecified-content-type-action="prevent" max-size="102400" size-exceeded-action="prevent" errors-variable-name="requestBodyValidation">
    <content type="application/json" validate-as="json" action="detect" />
    <content type="application/hal+json" validate-as="json" action="detect" />
</validate-content>

```

### <a name="elements"></a>Элементы

| Название         | Описание                                                                                                                                   | Обязательно |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| Проверка-содержимое | Корневой элемент.                                                                                                                               | Да      |
| содержимое | Добавьте один или несколько этих элементов, чтобы проверить тип содержимого в запросе или ответе, и выполните указанное действие.  | Нет |

### <a name="attributes"></a>Атрибуты

| Имя                       | Описание                                                                                                                                                            | Обязательно | По умолчанию |
| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------- |
| не указано — Content-Type — действие | [Действие](#actions) , выполняемое для запросов или ответов с типом содержимого, который не указан в схеме API. |  Да     | Н/Д   |
| Max-size | Максимальная длина текста запроса или ответа в байтах, проверенная по `Content-Length` заголовку. Если текст запроса или текст ответа сжаты, это значение является распакованной длиной. Максимально допустимое значение: 102 400 байт (100 КБ).  | Да       | Н/Д   |
| Превышение размера — действие | [Действие](#actions) , выполняемое для запросов или ответов, текст которых превышает размер, указанный в `max-size` . |  Да     | Н/Д   |
| ошибки-имя переменной | Имя переменной в, в `context.Variables` которую заноситься ошибки проверки.  |   Да    | Н/Д   |
| тип | Тип содержимого, для которого выполняется проверка текста, проверяется на соответствие `Content-Type` заголовку. Это значение не учитывает регистр. Если значение пустое, оно применяется к каждому типу содержимого, указанному в схеме API. |   Нет    |  Н/Д  |
| проверить — как | Подсистема проверки, используемая для проверки текста запроса или ответа с соответствующим типом содержимого. В настоящее время единственным поддерживаемым значением является "JSON".   |  Да     |  Н/Д  |
| action | [Действие](#actions) , выполняемое для запросов или ответов, текст которых не соответствует указанному типу содержимого.  |  Да      | Н/Д   |

### <a name="usage"></a>Использование

Эта политика может использоваться в следующих [разделах](./api-management-howto-policies.md#sections) и [областях](./api-management-howto-policies.md#scopes).

-   **Разделы политики:** inbound, outbound, on-error.

-   **Области политики:** все области.

## <a name="validate-parameters"></a>Проверка параметров

`validate-parameters`Политика проверяет параметры заголовка, запроса или пути в запросах к схеме API.

> [!IMPORTANT]
> Если вы импортировали API с помощью версии API управления до `2021-01-01-preview` , `validate-parameters` политика может не работать. Возможно, потребуется повторно импортировать API с помощью API управления `2021-01-01-preview` или более поздней версии.


### <a name="policy-statement"></a>Правило политики

```xml
<validate-parameters specified-parameter-action="ignore|prevent|detect" unspecified-parameter-action="ignore|prevent|detect" errors-variable-name="variable name"> 
    <headers specified-parameter-action="ignore|prevent|detect" unspecified-parameter-action="ignore|prevent|detect">
        <parameter name="parameter name" action="ignore|prevent|detect" />
    </headers>
    <query specified-parameter-action="ignore|prevent|detect" unspecified-parameter-action="ignore|prevent|detect">
        <parameter name="parameter name" action="ignore|prevent|detect" />
    </query>
    <path specified-parameter-action="ignore|prevent|detect">
        <parameter name="parameter name" action="ignore|prevent|detect" />
    </path>
</validate-parameters>
```

### <a name="example"></a>Пример

В этом примере все параметры запроса и пути проверяются в режиме предотвращения и в заголовках в режиме обнаружения. Проверка переопределяется для нескольких параметров заголовка:

```xml
<validate-parameters specified-parameter-action="prevent" unspecified-parameter-action="prevent" errors-variable-name="requestParametersValidation"> 
    <headers specified-parameter-action="detect" unspecified-parameter-action="detect">
        <parameter name="Authorization" action="prevent" />
        <parameter name="User-Agent" action="ignore" />
        <parameter name="Host" action="ignore" />
        <parameter name="Referrer" action="ignore" />
</validate-parameters>
```

### <a name="elements"></a>Элементы

| Название         | Описание                                                                                                                                   | Обязательно |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| Validate — параметры | Корневой элемент. Задает действия проверки по умолчанию для всех параметров в запросах.                                                                                                                              | Да      |
| Заголовки | Добавьте этот элемент для переопределения действий проверки по умолчанию для параметров заголовка в запросах.   | нет |
| query | Добавьте этот элемент для переопределения действий проверки по умолчанию для параметров запроса в запросах.  | Нет |
| path | Добавьте этот элемент для переопределения действий проверки по умолчанию для параметров пути URL-адреса в запросах.  | Нет |
| параметр | Добавьте один или несколько элементов для именованных параметров, чтобы переопределить конфигурацию действий проверки более высокого уровня. | Нет |

### <a name="attributes"></a>Атрибуты

| Имя                       | Описание                                                                                                                                                            | Обязательно | По умолчанию |
| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------- |
| указанный параметр — Action | [Действие](#actions) , выполняемое для параметров запроса, указанных в схеме API. <br/><br/> При указании в `headers` `query` элементе, или `path` значение переопределяет значение `specified-parameter-action` в `validate-parameters` элементе.  |  Да     | Н/Д   |
| не указан параметр-Action | [Действие](#actions) , выполняемое для параметров запроса, которые не указаны в схеме API. <br/><br/>При указании в `headers` `query` элементе или значение переопределяет значение `unspecified-parameter-action` в `validate-parameters` элементе. |  Да     | Н/Д   |
| ошибки-имя переменной | Имя переменной в, в `context.Variables` которую заноситься ошибки проверки.  |   Да    | Н/Д   |
| name | Имя параметра, для которого переопределяется действие проверки. Это значение не учитывает регистр.  | Да | Н/Д |
| action | [Действие](#actions) , выполняемое для параметра с соответствующим именем. Если параметр указан в схеме API, это значение переопределяет конфигурацию более высокого уровня `specified-parameter-action` . Если параметр не указан в схеме API, это значение переопределяет конфигурацию более высокого уровня `unspecified-parameter-action` .| Да | Н/Д | 

### <a name="usage"></a>Использование

Эта политика может использоваться в следующих [разделах](./api-management-howto-policies.md#sections) и [областях](./api-management-howto-policies.md#scopes).

-   **Разделы политики:** inbound.

-   **Области политики:** все области.

## <a name="validate-headers"></a>Проверить заголовки

`validate-headers`Политика проверяет заголовки ответов по схеме API.

> [!IMPORTANT]
> Если вы импортировали API с помощью версии API управления до `2021-01-01-preview` , `validate-headers` политика может не работать. Возможно, потребуется повторно импортировать API с помощью API управления `2021-01-01-preview` или более поздней версии.

### <a name="policy-statement"></a>Правило политики

```xml
<validate-headers specified-header-action="ignore|prevent|detect" unspecified-header-action="ignore|prevent|detect" errors-variable-name="variable name">
    <header name="header name" action="ignore|prevent|detect" />
</validate-headers>
```

### <a name="example"></a>Пример

```xml
<validate-headers specified-header-action="ignore" unspecified-header-action="prevent" errors-variable-name="responseHeadersValidation" />
```
### <a name="elements"></a>Элементы

| Название         | Описание                                                                                                                                   | Обязательно |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| Validate-Headers | Корневой элемент. Задает действия проверки по умолчанию для всех заголовков в ответах.                                                                                                                              | Да      |
| заголовок | Добавьте один или несколько элементов для именованных заголовков, чтобы переопределить действия по проверке по умолчанию для заголовков в ответах. | Нет |

### <a name="attributes"></a>Атрибуты

| Имя                       | Описание                                                                                                                                                            | Обязательно | По умолчанию |
| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------- |
| указанный-Header-действие | [Действие](#actions) , выполняемое для заголовков ответа, указанных в схеме API.  |  Да     | Н/Д   |
| не указано-Header — действие | [Действие](#actions) для выполнения заголовков ответа, которые не указаны в схеме API.  |  Да     | Н/Д   |
| ошибки-имя переменной | Имя переменной в, в `context.Variables` которую заноситься ошибки проверки.  |   Да    | Н/Д   |
| name | Имя заголовка, для которого переопределяется действие проверки. Это значение не учитывает регистр. | Да | Н/Д |
| action | [Действие](#actions) , выполняемое для заголовка с соответствующим именем. Если заголовок указан в схеме API, это значение переопределяет значение `specified-header-action` в `validate-headers` элементе. В противном случае он переопределяет значение `unspecified-header-action` в элементе Validate-Headers. | Да | Н/Д | 

### <a name="usage"></a>Использование

Эта политика может использоваться в следующих [разделах](./api-management-howto-policies.md#sections) и [областях](./api-management-howto-policies.md#scopes).

-   **Разделы политики:** Outbound, On-Error

-   **Области политики:** все области.

## <a name="validate-status-code"></a>Проверка кода состояния

`validate-status-code`Политика проверяет коды состояния HTTP в ответах на схему API. Эта политика может использоваться для предотвращения утечки внутренних ошибок, которые могут содержать трассировки стека. 

### <a name="policy-statement"></a>Правило политики

```xml
<validate-status-code unspecified-status-code-action="ignore|prevent|detect" errors-variable-name="variable name">
    <status-code code="HTTP status code number" action="ignore|prevent|detect" />
</validate-status-code>
```

### <a name="example"></a>Пример

```xml
<validate-status-code unspecified-status-code-action="prevent" errors-variable-name="responseStatusCodeValidation" />
```

### <a name="elements"></a>Элементы

| Название         | Описание                                                                                                                                   | Обязательно |
| ------------ | --------------------------------------------------------------------------------------------------------------------------------------------- | -------- |
| Validate-Status-code | Корневой элемент.                                                                                                | Да      |
| status-code | Добавьте один или несколько элементов для кодов состояния HTTP, чтобы переопределить действие проверки по умолчанию для кодов состояния в ответах. | Нет |

### <a name="attributes"></a>Атрибуты

| Имя                       | Описание                                                                                                                                                            | Обязательно | По умолчанию |
| -------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------- | -------- | ------- |
| не задано-Status-code — действие | [Действие](#actions) , выполняемое для кодов состояния HTTP в ответах, которые не указаны в схеме API.  |  Да     | Н/Д   |
| ошибки-имя переменной | Имя переменной в, в `context.Variables` которую заноситься ошибки проверки.  |   Да    | Н/Д   |
| code | Код состояния HTTP, для которого переопределяется действие проверки. | Да | Н/Д |
| action | [Действие](#actions) , выполняемое для соответствующего кода состояния, который не указан в схеме API. Если код состояния указан в схеме API, это переопределение не вступит в силу. | Да | Н/Д | 

### <a name="usage"></a>Использование

Эта политика может использоваться в следующих [разделах](./api-management-howto-policies.md#sections) и [областях](./api-management-howto-policies.md#scopes).

-   **Разделы политики:** Outbound, On-Error

-   **Области политики:** все области.


## <a name="validation-errors"></a>Ошибки проверки
В следующей таблице перечислены все возможные ошибки политик проверки. 

* **Сведения** — можно использовать для изучения ошибок. Не предназначен для общего доступа.
* **Открытый ответ** — ошибка, возвращенная клиенту. Не приводит к утечке сведений о реализации.

| **имя**;                             | **Тип**                                                        | **Правило проверки** | **Сведения**                                                                                                                                       | **Общедоступный ответ**                                                                                                                       | **Действие**           |
|----|----|---|---|---|----|
| **Проверка-содержимое** |                                                                 |                     |                                                                                                                                                   |                                                                                                                                           |                      |
| |RequestBody                                                     | сизелимит           | Текст запроса имеет размер {size} байт и превышает заданное ограничение в {maxSize} байт.                                                       | Текст запроса имеет размер {size} байт и превышает ограничение в {maxSize} байт.                                                          | Обнаружение и запрет |
||респонсебоди                                                    | сизелимит           | Текст ответа имеет размер {size} байт и превышает заданное ограничение в {maxSize} байт.                                                      | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| {Мессажеконтенттипе}                 | RequestBody                                                     | Не указан         | Неуказанный тип содержимого {Мессажеконтенттипе} не разрешен.                                                                                     | Неуказанный тип содержимого {Мессажеконтенттипе} не разрешен.                                                                             | Обнаружение и запрет |
| {Мессажеконтенттипе}                 | респонсебоди                                                    | Не указан         | Неуказанный тип содержимого {Мессажеконтенттипе} не разрешен.                                                                                     | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| | аписчема                                                       |                     | Схема API не существует, или ее не удалось разрешить.                                                                                          | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
|                                      | аписчема                                                       |                     | Схема API не задает определения.                                                                                                        | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| {Мессажеконтенттипе}                 | RequestBody/Респонсебоди                                      | миссингдефинитион   | Схема API не содержит определение {definitionName}, связанное с типом содержимого {Мессажеконтенттипе}.                        | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| {Мессажеконтенттипе}                 | RequestBody                                                     | инкорректмессаже    | Текст запроса не соответствует определению {definitionName}, связанному с типом содержимого {Мессажеконтенттипе}.<br/><br/>{Валеррор. Message} строка: {Валеррор. LineNumber}, расположение: {Валеррор. LinePosition}                  | Текст запроса не соответствует определению {definitionName}, связанному с типом содержимого {Мессажеконтенттипе}.<br/><br/>{Валеррор. Message} строка: {Валеррор. LineNumber}, расположение: {Валеррор. LinePosition}            | Обнаружение и запрет |
| {Мессажеконтенттипе}                 | респонсебоди                                                    | инкорректмессаже    | Текст ответа не соответствует определению {definitionName}, связанному с типом содержимого {Мессажеконтенттипе}.<br/><br/>{Валеррор. Message} строка: {Валеррор. LineNumber}, расположение: {Валеррор. LinePosition}                                       | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
|                                      | RequestBody                                                     | валидатионексцептион | Не удается проверить текст запроса для типа содержимого {Мессажеконтенттипе}.<br/><br/>{сведения об исключении}                                                                | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
|                                      | респонсебоди                                                    | валидатионексцептион | Не удается проверить текст ответа для типа содержимого {Мессажеконтенттипе}.<br/><br/>{сведения об исключении}                                                                | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| **Проверка-параметр/Validate-Headers** |                                                                 |                     |                                                                                                                                                   |                                                                                                                                           |                      |
| {paramName}/{Хеадернаме}           | Куерипараметер/Паспараметер/Рекуессеадер                  | Не указан         | Не указан параметр {path, параметр запроса/заголовок} {paramName} не разрешен.                                                               | Не указан параметр {path, параметр запроса/заголовок} {paramName} не разрешен.                                                       | Обнаружение и запрет |
| {Хеадернаме}                         | респонсехеадер                                                  | Не указан         | Неуказанный заголовок {Хеадернаме} не допускается.                                                                                                   | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
|                                      |аписчема                                                       |                     | Схема API не существует, или ее не удалось разрешить.                                                                                            | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
|                                       | аписчема                                                       |                     | Схема API не задает определения.                                                                                                          | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| paramName                          | Куерипараметер/Паспараметер/Рекуессеадер/Респонсехеадер | миссингдефинитион   | Схема API не содержит определение {definitionName}, связанное с {параметром запроса/параметром пути/заголовком} {paramName}.  | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| paramName                          | Куерипараметер/Паспараметер/Рекуессеадер                  | инкорректмессаже    | Запрос не может содержать несколько значений для {параметр запроса/параметр пути/заголовок} {paramName}.                                           | Запрос не может содержать несколько значений для {параметр запроса/параметр пути/заголовок} {paramName}.                                   | Обнаружение и запрет |
| {Хеадернаме}                         | респонсехеадер                                                  | инкорректмессаже    | Ответ не может содержать несколько значений для заголовка {Хеадернаме}.                                                                              | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| paramName                          | Куерипараметер/Паспараметер/Рекуессеадер                  | инкорректмессаже    | Значение {параметр запроса/параметр пути/заголовок} {paramName} не соответствует определению.<br/><br/>{Валеррор. Message} строка: {Валеррор. LineNumber}, расположение: {Валеррор. LinePosition}                                          | Значение {параметр запроса/параметр пути/заголовок} {paramName} не соответствует определению.<br/><br/>{Валеррор. Message} строка: {Валеррор. LineNumber}, расположение: {Валеррор. LinePosition}                              | Обнаружение и запрет |
| {Хеадернаме}                         | респонсехеадер                                                  | инкорректмессаже    | Значение заголовка {Хеадернаме} не соответствует определению.<br/><br/>{Валеррор. Message} строка: {Валеррор. LineNumber}, расположение: {Валеррор. LinePosition}                                                                              | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| paramName                          | Куерипараметер/Паспараметер/Рекуессеадер                  | инкорректмессаже    | Значение {параметр запроса/параметр пути/заголовок} {paramName} не может быть проанализировано в соответствии с определением. <br/><br/>символа. Письма                                | Не удалось проанализировать значение {параметр запроса/параметр пути/заголовок} {paramName} в соответствии с определением. <br/><br/>символа. Письма                      | Обнаружение и запрет |
| {Хеадернаме}                         | респонсехеадер                                                  | инкорректмессаже    | Не удалось проанализировать значение заголовка {Хеадернаме} в соответствии с определением.                                                                  | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| paramName                          | Куерипараметер/Паспараметер/Рекуессеадер                  | ValidationError     | {Параметр запроса/параметр пути/заголовок} не удается проверить {paramName}.<br/><br/>{сведения об исключении}                                                                      | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| {Хеадернаме}                         | респонсехеадер                                                  | ValidationError     | Не удается проверить заголовок {Хеадернаме}.<br/><br/>{сведения об исключении}                                                                                                          | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |
| **Validate-Status-code**             |                                                                 |                     |                                                                                                                                                   |                                                                                                                                           |                      |
| {Status-code}                        | StatusCode                                                      | Не указан         | Код состояния отклика {Status-code} не разрешен.                                                                                                | Не удалось обработать запрос из-за внутренней ошибки. Обратитесь к владельцу API.                                                       | Обнаружение и запрет |


В следующей таблице перечислены все возможные значения причины ошибки проверки, а также возможные значения сообщений.

|  **Причина**         |    **Сообщение** |
|---|---|  
| Недопустимый запрос       |     {Details} для переменной контекста {Public Response} для клиента|
| Ответ не разрешен  | {Details} для переменной контекста {Public Response} для клиента |






## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о работе с политиками см. в следующих статьях:

-   [Политики в управлении API](api-management-howto-policies.md)
-   [Преобразование API-интерфейсов](transform-api.md).
-   [Справочник по политикам](./api-management-policies.md) для полного списка операторов политики и их параметров
-   [Примеры политик](./policy-reference.md).
-   [Обработка ошибок](./api-management-error-handling-policies.md)
