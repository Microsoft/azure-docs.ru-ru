---
title: Переход на новый портал разработчика с устаревшего портала разработчика
titleSuffix: Azure API Management
description: Узнайте, как выполнить миграцию с устаревшего портала разработчика на новый портал разработчика в оснастке управления API.
services: api-management
documentationcenter: API Management
author: mikebudzynski
manager: cfowler
editor: ''
ms.service: api-management
ms.workload: mobile
ms.tgt_pltfrm: na
ms.topic: article
ms.date: 10/15/2020
ms.author: apimpm
ms.openlocfilehash: f5105c685de4b3ccdffe69eec8ee8eeb32976c1f
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "92326027"
---
# <a name="migrate-to-the-new-developer-portal"></a>Переход на новый портал разработчика

В этой статье описываются действия, которые необходимо выполнить для перехода с устаревшего устаревшего портала на новый портал разработчика в оснастке управления API.

> [!IMPORTANT]
> Устаревший портал разработчика теперь является устаревшим и будет принимать только обновления для системы безопасности. Вы по-прежнему можете использовать его в обычном режиме до прекращения его поддержки в октябре 2023 года, когда он будет удален изо всех служб Управления API.

![Портал разработчика API Management](media/api-management-howto-developer-portal/cover.png)

[!INCLUDE [premium-dev-standard-basic.md](../../includes/api-management-availability-premium-dev-standard-basic.md)]

## <a name="improvements-in-new-developer-portal"></a>Усовершенствования на новом портале разработчика

Новый портал разработчика решает многие ограничения нерекомендуемого портала. Он содержит [визуальный редактор с поддержкой перетаскивания для редактирования содержимого](api-management-howto-developer-portal-customize.md) и специальную панель для конструкторов, поддерживающих стиль веб-сайта. Страницы, настройки и конфигурация сохраняются как Azure Resource Managerные ресурсы в службе управления API, что позволяет [автоматизировать развертывание портала](api-management-howto-developer-portal.md#automate). Наконец, база кода портала является открытым кодом, поэтому [ее можно расширить с помощью пользовательских функций](api-management-howto-developer-portal.md#managed-vs-self-hosted).

## <a name="how-to-migrate-to-new-developer-portal"></a>Переход на новый портал разработчика

Новый портал разработчика несовместим с устаревшим порталом, и автоматическая миграция невозможна. Необходимо вручную создать содержимое (страницы, текст, файлы мультимедиа) и настроить внешний вид нового портала. Точные шаги будут зависеть от настроек и сложности портала. Инструкции см. в [руководстве по порталу разработчика](api-management-howto-developer-portal-customize.md) . Оставшаяся конфигурация, например список интерфейсов API, продуктов, пользователей и поставщиков удостоверений, автоматически совместно используется на обоих порталах.

> [!IMPORTANT]
> Если вы запустили новый портал разработчика, но не внесли изменения, [сбросьте содержимое по умолчанию](api-management-howto-developer-portal.md#preview-to-ga) , чтобы обновить его до последней версии.

При миграции с нерекомендуемого портала учитывайте следующие изменения.

- Если портал разработчика предоставляется через личный домен, [назначьте домен](configure-custom-domain.md) новому порталу разработчика. Используйте параметр **портал разработчика** из раскрывающегося списка в портал Azure.
- [Примените политику CORS](api-management-howto-developer-portal.md#cors) для API, чтобы включить интерактивную консоль тестирования.
- При внедрении настраиваемой таблицы CSS для стиля портала необходимо [реплицировать стили с помощью встроенной панели конструирования](api-management-howto-developer-portal-customize.md). Внедрение CSS не разрешено на новом портале.
- Вы можете внедрить пользовательский JavaScript только в [версию нового портала, размещенную на собственном сервере](api-management-howto-developer-portal.md#managed-vs-self-hosted).
- Если управление API находится в виртуальной сети и предоставляется в Интернете через шлюз приложений, то для выполнения точных действий по настройке [обратитесь к этой статье документации](api-management-howto-integrate-internal-vnet-appgateway.md) . Для этого необходимо:

    - Включите подключение к конечной точке управления управления API.
    - Включите подключение к новой конечной точке портала.
    - Отключить выбранные правила брандмауэра веб-приложения.

- Если вы изменили шаблоны уведомлений по электронной почте по умолчанию, включив в них явно определенный URL-адрес портала, измените их на либо используйте параметр URL-адреса портала, либо укажите новый URL-адрес портала. Если в шаблонах используется встроенный параметр URL-адреса портала, изменения не требуются.
- На новом портале разработчика *проблемы* и *приложения* не поддерживаются.
- Прямая интеграция с Facebook, Microsoft, Twitter и Google в качестве поставщиков удостоверений не поддерживается на новом портале разработчика. Интеграция с этими поставщиками осуществляется с помощью Azure AD B2C.
- При использовании делегирования измените URL-адрес возврата в приложениях и используйте [конечную точку API для *получения общего доступа*](/rest/api/apimanagement/2019-12-01/user/getsharedaccesstoken) , а не конечную точку *единого входа* .
- Если вы используете Azure AD в качестве поставщика удостоверений:

    - Измените URL-адрес возврата в приложении, чтобы он указывал на новый домен портала разработчика.
    - Измените суффикс URL-адреса возврата в приложении с `/signin-aad` на `/signin` .

- При использовании Azure AD B2C в качестве поставщика удостоверений:

    - Измените URL-адрес возврата в приложении, чтобы он указывал на новый домен портала разработчика.
    - Измените суффикс URL-адреса возврата в приложении с `/signin-aad` на `/signin` .
    - Включить *указанные имя*, *фамилию* и *идентификатор объекта пользователя* в утверждениях приложения.

- Если вы используете OAuth 2,0 в интерактивной консоли тестирования, измените URL-адрес возврата в приложении, чтобы он указывал на новый домен портала разработчика и изменить суффикс:

    - В `/docs/services/[serverName]/console/oauth2/authorizationcode/callback` значение `/signin-oauth/code/callback/[serverName]` для потока предоставления кода авторизации.
    - Из `/docs/services/[serverName]/console/oauth2/implicit/callback` в `/signin-oauth/implicit/callback` для неявного потока предоставления разрешения.
- При использовании OpenID Connect Connect в интерактивной консоли тестирования измените URL-адрес возврата в приложении, чтобы он указывал на новый домен портала разработчика и изменить суффикс:

    - В `/docs/services/[serverName]/console/openidconnect/authorizationcode/callback` значение `/signin-oauth/code/callback/[serverName]` для потока предоставления кода авторизации.
    - Из `/docs/services/[serverName]/console/openidconnect/implicit/callback` в `/signin-oauth/implicit/callback` для неявного потока предоставления разрешения.

## <a name="next-steps"></a>Следующие шаги

См. дополнительные сведения о портале разработчика:

- [Обзор портала разработчика в службе управления API Azure](api-management-howto-developer-portal.md)
- [Доступ и Настройка портала разработчика](api-management-howto-developer-portal-customize.md)