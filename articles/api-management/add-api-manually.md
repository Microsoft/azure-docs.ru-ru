---
title: Добавление API вручную с помощью портала Azure | Документация Майкрософт
description: В этом руководстве описано, как вручную добавить API с помощью службы управления API.
services: api-management
documentationcenter: ''
author: mikebudzynski
manager: cfowler
editor: ''
ms.service: api-management
ms.workload: mobile
ms.tgt_pltfrm: na
ms.topic: tutorial
ms.date: 04/20/2020
ms.author: apimpm
ms.openlocfilehash: 39a3b9d7dd9efbda93de0b5d7c5f9938922d0012
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96183859"
---
# <a name="add-an-api-manually"></a>Добавление API вручную

Шаги в этой статье показывают, как использовать портал Azure, чтобы вручную добавить API в экземпляр службы управления API. Обычно это нужно для имитации API, когда вы вручную создаете пустой API и определяете его. Сведения об имитации API см. в статье [Mock API responses](mock-api-responses.md) (Имитация ответов API).

Если вы хотите импортировать существующий API, изучите список [связанных разделов](#related-topics).

В этой статье мы создадим пустой API и укажем [httpbin.org](https://httpbin.org) (общедоступную службу тестирования) в качестве API внутреннего сервера.

## <a name="prerequisites"></a>Предварительные требования

Выполните инструкции из краткого руководства [Создание экземпляра службы управления API Azure](get-started-create-service-instance.md)

[!INCLUDE [api-management-navigate-to-instance.md](../../includes/api-management-navigate-to-instance.md)]

## <a name="create-an-api"></a>Создание API

1. На портале Azure перейдите к службе "Управление API" и в меню выберите **Интерфейсы API**.
2. Выберите **+ Add API** (+ Добавить API) в меню слева.
3. Выберите **Пустой API** в списке.  
    ![Пустой API](media/add-api-manually/blank-api.png)  
4. Введите параметры этого API Эти параметры описаны в руководстве [Импорт и публикация первого интерфейса API](import-and-publish.md#import-and-publish-a-backend-api).
5. Нажмите кнопку **создания**.

Сейчас в Управлении API нет операций, сопоставленных с операциями в API серверной части. Вызвав операцию, которая предоставляется в серверной части, но еще не сопоставлена с Управлением API, вы получите ответ **404**.

>[!NOTE] 
> По умолчанию при добавлении интерфейса API, даже если он подключен к какой-либо внутренней службе, служба "Управление API" не будет предоставлять доступ к операциям, пока вы не разрешите их выполнение. Чтобы разрешить выполнение операций в службе серверной части, создайте операцию службы "Управление API", сопоставленную с этой серверной операцией.

## <a name="add-and-test-an-operation"></a>Добавление и проверка операции

В этом разделе показано, как добавить операцию /get и сопоставить ее с операцией серверной части "http://httpbin.org/get".

### <a name="add-an-operation"></a>Добавление операции

1. Выберите API, созданный на предыдущем шаге.
2. Щелкните **+ Add Operation** (+ Добавить операцию).
3. В поле **URL-адрес** выберите значение **GET** и введите */get* в качестве значения ресурса.
4. Введите *FetchData* в поле **Отображаемое имя**.
5. Щелкните **Сохранить**.

### <a name="test-an-operation"></a>Проверка операции

Проверка функции выполняется на портале Azure. Также вы можете проверить ее на **портале разработчиков**.

1. Откройте вкладку **Тест**.
2. Выберите **FetchData**.
3. Нажмите кнопку **Отправить**.

Появится сообщение с ответом, который создает операция "http://httpbin.org/get". Если вы хотите преобразовать операцию, используйте инструкции из статьи [Transform and protect your API](transform-api.md) (Преобразование и защита API).

## <a name="add-and-test-a-parameterized-operation"></a>Добавление и проверка параметризованной операции

В этом разделе показано, как добавить операцию, которая принимает параметр. Здесь мы сопоставим операцию с адресом "http://httpbin.org/status/200".

### <a name="add-the-operation"></a>Добавление операции

1. Выберите API, созданный на предыдущем шаге.
2. Щелкните **+ Add Operation** (+ Добавить операцию).
3. В поле **URL-адрес** выберите значение **GET** и введите */status/{code}* в качестве значения ресурса. Здесь же можно указать полезные сведения об этом параметре. Например, укажите значение *номер* в поле **тип** и число *200* (по умолчанию) в поле **значения**.
4. Введите **отображаемое имя** GetStatus.
5. Щелкните **Сохранить**.

### <a name="test-the-operation"></a>Проверка операции 

Проверка функции выполняется на портале Azure.  Также вы можете проверить ее на **портале разработчиков**.

1. Откройте вкладку **Тест**.
2. Выберите **GetStatus**. По умолчанию устанавливается значение кода *200*. Его можно изменить, чтобы проверить работу других значений. Например, введите значение *418*.
3. Нажмите кнопку **Отправить**.

    Появится сообщение с ответом, который создает операция "http://httpbin.org/status/200". Если вы хотите преобразовать операцию, используйте инструкции из статьи [Transform and protect your API](transform-api.md) (Преобразование и защита API).

[!INCLUDE [api-management-navigate-to-instance.md](../../includes/api-management-append-apis.md)]

[!INCLUDE [api-management-define-api-topics.md](../../includes/api-management-define-api-topics.md)]

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Преобразование и защита опубликованного API](transform-api.md)
