---
title: Отладка повторяющихся заданий в Azure Data Lake Analytics
description: Узнайте, как выполнять отладку для неправильных повторяющихся заданий с помощью средств Azure Data Lake для Visual Studio.
ms.reviewer: jasonh
ms.service: data-lake-analytics
ms.topic: how-to
ms.date: 05/20/2018
ms.openlocfilehash: b95d4b0a082e8eac191d610c9516e5ce72180b4c
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "92219179"
---
# <a name="troubleshoot-an-abnormal-recurring-job"></a>Устранение неполадок, связанных с неправильно повторяющимся заданием

В этой статье показано, как использовать [средства Azure Data Lake для Visual Studio](https://aka.ms/adltoolsvs) для устранения неполадок с повторяющимися заданиями. Дополнительные сведения о конвейере и повторяющихся заданиях можно узнать в [блоге об Azure Data Lake и Azure HDInsight](/archive/blogs/azuredatalake/managing-pipeline-recurring-jobs-in-azure-data-lake-analytics-made-easy).

В повторяющихся заданиях обычно используется одинаковая логика запроса и схожие входные данные. Например, представьте, что вы запускаете повторяющееся задание каждый понедельник в 8:00 для анализа активности пользователя за прошлую неделю. Скрипты для этих заданий создаются на основе единого шаблона, который содержит логику запроса. Входные данные для этих заданий представляют собой данные об использовании за прошлую неделю. Использование единой логики запросов и схожие входные данные обычно означают, что производительность этих заданий аналогична и стабильна. Если одно из повторяющихся заданий внезапно выполняется аномально, завершается с ошибкой или существенно замедляется, вы можете:

- просмотреть статистические отчеты по предыдущим запускам повторяющегося задания, чтобы оценить ситуацию;
- Сравните неправильное задание с любым из обычных. Возможно, вы заметите важные отличия.

**Представление связанных заданий** в средствах Azure Data Lake для Visual Studio поможет ускорить устранение неполадок в обоих случаях.

## <a name="step-1-find-recurring-jobs-and-open-related-job-view"></a>Шаг 1. Поиск повторяющихся заданий и просмотр представления связанных заданий

Чтобы использовать представление связанных заданий для устранения неполадок с повторяющимся заданием, найдите такое задание в Visual Studio и откройте представление.

### <a name="case-1-you-have-the-url-for-the-recurring-job"></a>Вариант 1. У вас есть URL-адрес повторяющегося задания

В меню **Сервис** > **Data Lake** > **Представление заданий** можно вставить URL-адрес задания, чтобы открыть представление задания в Visual Studio. Выберите **Просмотреть связанные задания**, чтобы открыть представление связанных заданий.

![Ссылка на просмотр связанных заданий в средствах Data Lake Analytics](./media/data-lake-analytics-data-lake-tools-debug-recurring-job/view-related-job.png)
 
### <a name="case-2-you-have-the-pipeline-for-the-recurring-job-but-not-the-url"></a>Вариант 2. У вас есть конвейер для повторяющегося задания, но нет его URL-адреса

В Visual Studio можно открыть браузер конвейера, выбрав "Обозреватель серверов" > учетную запись Azure Data Lake Analytics > **Конвейеры**. (Если этот узел не удается найти в обозревателе серверов, [скачайте последнюю версию подключаемого модуля](https://aka.ms/adltoolsvs).) 

![Выбор узла "Конвейеры"](./media/data-lake-analytics-data-lake-tools-debug-recurring-job/pipeline-browser.png)

В браузере конвейеров все конвейеры для учетной записи Data Lake Analytics перечисляются слева. Можно развернуть конвейеры, чтобы найти все повторяющиеся задания, а затем выбрать проблемное. Справа откроется представление связанных заданий.

![Выбор конвейера и открытие представления связанных заданий](./media/data-lake-analytics-data-lake-tools-debug-recurring-job/recurring-job-view.png)

## <a name="step-2-analyze-a-statistics-report"></a>Шаг 2. Анализ статистического отчета

Сводка и статистический отчет отображаются в верхней части представления связанных заданий. Здесь можно найти возможную причину неполадки. 

1.  В отчете на горизонтальной оси отображается время отправки задания. Воспользуйтесь им для поиска неправильно выполняемого задания.
2.  Используя процесс, показанный на следующей схеме, проверьте статистику и получите сведения о проблеме и возможных решениях.

![Схема процесса проверки статистики](./media/data-lake-analytics-data-lake-tools-debug-recurring-job/recurring-job-metrics-debugging-flow.png)

## <a name="step-3-compare-the-abnormal-job-to-a-normal-job"></a>Шаг 3. Сравнение неправильно выполняемого задания с обычным

В списке в нижней части представления связанных заданий можно найти все отправленные запуски повторяющегося задания. Для поиска дополнительных сведений и потенциальных решений щелкните правой кнопкой мыши неправильно выполняемое задание. С помощью представления "Отличия заданий" сравните неправильно выполняемое задание с ранее выполненным нормальным.

![Контекстное меню для сравнения заданий](./media/data-lake-analytics-data-lake-tools-debug-recurring-job/compare-job.png)

Обратите внимание на главные различия между этими двумя заданиями. Эти различия, вероятно, и вызывают проблемы с производительностью. Для дальнейшей проверки выполните действия по следующей схеме:

![Схема процесса проверки различий между заданиями](./media/data-lake-analytics-data-lake-tools-debug-recurring-job/recurring-job-diff-debugging-flow.png)

## <a name="next-steps"></a>Дальнейшие действия

* [Устранение неравномерного распределения данных](data-lake-analytics-data-lake-tools-data-skew-solutions.md)
* [Отладка определяемого пользователем кода C# для заданий U-SQL, завершившихся сбоем](data-lake-analytics-debug-u-sql-jobs.md)