---
title: Поправка протокола Smooth Streaming (MS-SSTR) для HEVC — Azure
description: Эта спецификация описывает протокол и формат потоковой передачи в реальном времени с HEVC на основе фрагментированного формата MP4 для служб мультимедиа Azure. В этой статье указаны только те изменения, которые необходимы для доставки HEVC, за исключением случаев, где сочетание "(Без изменения)" указывает, что текст скопирован только в целях уточнения.
services: media-services
documentationcenter: ''
author: johndeu
manager: femila
editor: ''
ms.assetid: f27d85de-2cb8-4269-8eed-2efb566ca2c6
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 08/19/2019
ms.author: johndeu
ms.openlocfilehash: 6454bc863cb5fd628d581fff380c5ab61354f762
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "87053054"
---
# <a name="smooth-streaming-protocol-ms-sstr-amendment-for-hevc"></a>Поправка к протоколу Smooth Streaming (MS-SSTR) для HEVC 

## <a name="1-introduction"></a>1. Введение 

В этой статье приводятся подробные поправки, которые необходимо применить к спецификации протокола Smooth Streaming [MS-SSTR] для включения потоковой передачи видео в формате HEVC. Здесь описываются только те изменения, которые необходимы для доставки видеокодека HEVC. В статье используется та же схема нумерации, что и в спецификации [MS-SSTR]. Пустые заголовки, представленные в статье, предназначены для ориентирования читателей в соответствии с их позицией в спецификации [MS-SSTR].  "(Без изменения)" означает, что текст скопирован только для разъяснений.

В этой статье приводятся требования к технической реализации для сигнализации видеокодека HEVC (с использованием "hev1" или "hvc1") в манифесте Smooth Streaming и нормативные ссылки обновляются так, чтобы они ссылались на текущие стандарты MPEG, включающие HEVC, Common Encryption HEVC, а имена полей для формата ISO Base-файлов были обновлены так, чтобы соответствовать последним спецификациям. 

В указанной спецификации протокола Smooth Streaming [MS-SSTR] описывается формат подключения, используемый для доставки файлов мультимедиа по требованию и в режиме реального времени, например аудио- и видеофайлов следующим образом: от кодировщика на веб-сервер, от сервера на другой сервер и от сервера на HTTP-клиент.
Использование доставки структуры данных на основе файла MPEG-4 ([[MPEG4-RA])](https://go.microsoft.com/fwlink/?LinkId=327787) через протокол HTTP позволяет осуществлять плавное переключение в режиме реального времени между различными уровнями качества сжатого содержимого медиафайлов. Результатом является постоянное воспроизведение для пользователя HTTP-клиента, даже если условия отрисовки видео и сети меняются для клиентского компьютера или устройства.

## <a name="11-glossary"></a>1.1. Глоссарий 

В *[MS-GLOS]* определены следующие термины.

>   **Глобальный уникальный идентификатор (GUID), универсальный уникальный идентификатор (UUID)**

К этому документу относятся следующие термины:

>  **время компоновки:** Время представления примера на клиенте, как определено в   [[ISO/IEC-14496-12]](https://go.microsoft.com/fwlink/?LinkId=183695).
> 
>   **CENC**: общее шифрование, как определено во втором выпуске спецификации [ISO/IEC 23001-7].
> 
>   **время декодирования:** Время, необходимое для декодирования образца на клиенте, как определено в   [[ISO/IEC 14496-12:2008]](https://go.microsoft.com/fwlink/?LinkId=183695).

**Фрагмент:** независимо загружаемая единица **файла мультимедиа**, которая состоит из одного и больше **образцов**.

>   **HEVC:** высокоэффективное видеокодирование в соответствии со спецификацией [ISO/IEC 23008-2]
> 
>   **Манифест:** метаданные о **презентации**, которые позволяют клиенту запрашивать **файлы мультимедиа**. **Мультимедиа:** сжатые аудио-, видео- и текстовые данные, используемые клиентом для воспроизведения **презентации**. **Формат мультимедиа:** четко определенный формат для представления аудио- или видеоданных как сжатого **образца**.
> 
>   **Презентация:** набор всех **потоков** и связанных метаданных, необходимых для воспроизведения одного фильма. **запрос:** HTTP-сообщение, отправленное клиентом на сервер, как определено в **ответе** [[rfc2616]](https://go.microsoft.com/fwlink/?LinkId=90372) : HTTP-сообщение, отправленное с сервера клиенту, как определено в [[rfc2616]](https://go.microsoft.com/fwlink/?LinkId=90372)
> 
>   **Образец:** наименьшая фундаментальная единица (например, кадр), в которой сохраняется и обрабатывается файл **мультимедиа**.
> 
>   **может** , не должен, не должно: Эти термины (все прописные) используются, как описано в разделе   [[RFC2119]](https://go.microsoft.com/fwlink/?LinkId=90317) все инструкции в необязательном поведении.

## <a name="12-references"></a>1.2. Ссылки

>   Ссылки на документацию Microsoft Open Specifications не включают год публикации, так как они относятся к последней версии документов, которые часто обновляются. Ссылки на другие документы включают год публикации, если он доступен.

### <a name="121-normative-references"></a>1.2.1. Нормативные ссылки 

>  [MS-SSTR] *V20140502* протокола Smooth Streaming [https://msdn.microsoft.com/library/ff469518.aspx](/openspecs/windows_protocols/ms-sstr/8383f27f-7efe-4c60-832a-387274457251)
> 
>   [ISO/IEC 14496-12]. Международная организация по стандартизации (ISO). "Information technology -- Coding of audio-visual objects -- Part 12: ISO Base Media File Format" (Информационные технологии. Кодирование аудиовизуальных объектов. Часть 12. Формат базового медиафайла ISO), ISO/IEC 14496-12:2014, издание 4, добавлено исправление 1, поправки 1, 2.
>   <https://standards.iso.org/ittf/PubliclyAvailableStandards/c061988_ISO_IEC_14496-12_2012.zip>
> 
>   [ISO/IEC 14496-15]. Международная организация по стандартизации (ISO). "Information technology -- Coding of audio-visual objects -- Part 15: Carriage of NAL unit structured video in the ISO Base Media File Format" (Информационные технологии. Кодирование аудиовизуальных объектов. Часть 15. Передача структурированного видеофайла блока NAL в формате базового медиафайла ISO), ISO 14496-15:2015, издание 3.
>   <https://www.iso.org/iso/home/store/catalogue_tc/catalogue_detail.htm?csnumber=65216>
> 
>   [ISO/IEC 23008-2]. Отдел информационных технологий. "High efficiency coding and media delivery in heterogeneous environments -- Part 2: High efficiency video coding" (Высокоэффективное кодирование и доставка медиафайлов в неоднородных средах. Часть 2. Высокоэффективное видеокодирование), издание 2013 г. или более поздней версии <https://standards.iso.org/ittf/PubliclyAvailableStandards/c035424_ISO_IEC_23008-2_2013.zip>
> 
>   [ISO/IEC 23001-7]. Отдел информационных технологий. "MPEG systems technologies — Part 7: Common encryption in ISO base media file format files" (Системные технологии MPEG. Часть 7. Общее шифрование в файлах формата базового медиафайла ISO), издание CENC 2:2015 <https://www.iso.org/iso/catalogue_detail.htm?csnumber=65271>
> 
>   [RFC-6381] IETF RFC-6381, “The 'Codecs' and 'Profiles' Parameters for "Bucket" Media Types” (Параметры "кодеков" и "профилей" для типов медиафайлов "контейнеры") <https://tools.ietf.org/html/rfc6381>
> 
>   [MPEG4-RA] Центр регистрации MP4, "MP4REG", [http://www.mp4ra.org](https://go.microsoft.com/fwlink/?LinkId=327787)
> 
>   RFC2119 Браднер (bradner, S., "Ключевые слова для использования в RFC для указания уровней требований", BCP 14, RFC 2119, 1997 марта,   [https://www.rfc-editor.org/rfc/rfc2119.txt](https://go.microsoft.com/fwlink/?LinkId=90317)

### <a name="122-informative-references"></a>1.2.2. Справочные ссылки 

>   [MS-GLOS]. Корпорация Майкрософт "*Windows Protocols Master Glossary*" (Главный глоссарий протоколов Windows).
> 
>   RFC3548 (Josefsson, S., ED., "Base16, base32 и Base64 кодировка данных", RFC 3548, июнь 2003, [https://www.ietf.org/rfc/rfc3548.txt](https://go.microsoft.com/fwlink/?LinkId=90432)
> 
>   RFC5234 Крокер (Crocker, D., ED. и Оверел (overell, P., "дополненные BNF для спецификаций синтаксиса: ABNF", STD 68, RFC 5234, Январь 2008,   [https://www.rfc-editor.org/rfc/rfc5234.txt](https://go.microsoft.com/fwlink/?LinkId=123096)


## <a name="13-overview"></a>1.3. Обзор 

>   Ниже перечислены только изменения спецификации Smooth Streaming, необходимые для доставки HEVC. Заголовки разделов без изменений перечисляются для сохранения расположения в указанной спецификации Smooth Streaming [MS-SSTR].

## <a name="14-relationship-to-other-protocols"></a>1.4. Связь с другими протоколами 

## <a name="15-prerequisitespreconditions"></a>1.5. Предварительные требования и условия 

## <a name="16-applicability-statement"></a>1.6. Постановление о пределах применения 

## <a name="17-versioning-and-capability-negotiation"></a>1.7. Управление версиями и согласованность функций 

## <a name="18-vendor-extensible-fields"></a>1.8. Расширяемые поля поставщика 

>   Метод ниже ДОЛЖЕН использоваться для идентификации потоков данных с видеоформатом HEVC.
> 
>   * **Настраиваемые описательные коды для форматов медиафайлов:** эта возможность обеспечивается с помощью поля **FourCC**, как указано в разделе *2.2.2.5*.
>   Разработчики могут гарантировать, что расширения не конфликтуют путем регистрации кодов расширений с помощью MPEG4-RA, как указано в [[ISO/IEC-14496-12]](https://go.microsoft.com/fwlink/?LinkId=183695)

## <a name="19-standards-assignments"></a>1.9. Назначения стандартов 

## <a name="2-messages"></a>2. Сообщения 

## <a name="21-transport"></a>2.1. Транспортировка

## <a name="22-message-syntax"></a>2.2. Синтаксис сообщений 

### <a name="221-manifest-request"></a>2.2.1. Запрос манифеста 

### <a name="222-manifest-response"></a>2.2.2. Ответ манифеста 

#### <a name="2221-smoothstreamingmedia"></a>2.2.2.1. SmoothStreamingMedia 

>   **MinorVersion (переменная):** дополнительный номер версии сообщения ответа манифеста. Нужно задать значение 2. (Без изменения)
> 
>   **TimeScale (переменная):** шкала времени атрибута длительности, заданная как количество шагов приращения за одну секунду. Значение по умолчанию —
> 1. (Без изменения)
> 
>    Рекомендуемое значение — 90000, представляющее точную длительность кадров видео и фрагментов видео с дробной частотой кадров (например, 30/1,001 Гц).

#### <a name="2222-protectionelement"></a>2.2.2.2. ProtectionElement 

Элемент ProtectionElement ДОЛЖЕН присутствовать, если к видео-или аудиопотокам было применено общее шифрование (CENC). Зашифрованные потоки HEVC ДОЛЖНЫ соответствовать положениям общего шифрования (CENC) второго выпуска спецификации [ISO/IEC 23001-7]. ДОЛЖНЫ шифроваться только данные среза в блоках NAL VCL.

#### <a name="2223-streamelement"></a>2.2.2.3. StreamElement 

>   **StreamTimeScale (переменная):** шкала времени для значений времени и длительности в этом потоке, заданная как количество шагов приращения за одну секунду. Рекомендуемое значение для потоков HEVC — 90000. Для аудиопотоков рекомендуется использовать значение, соответствующее частоте образца звукового сигнала (например, 48000 или 44100).

##### <a name="22231-streamprotectionelement"></a>2.2.2.3.1. StreamProtectionElement

#### <a name="2224-urlpattern"></a>2.2.2.4. UrlPattern 

#### <a name="225-trackelement"></a>2.2.5. TrackElement 

>   **FourCC (переменная):** четырехзначный код, который определяет, какой формат медиафайлов используется для каждого образца. Зарезервирован следующий диапазон значений с такими семантическими значениями:
> 
> * hev1: образцы видео для этой дорожки используют видео HEVC с помощью формата описания образца hev1, указанного в спецификации [ISO/IEC-14496-15].
>
> * "hvc1": видеообразцы для этой дорожки используют видео HEVC, используя пример формата описания "hvc1", указанный в [ISO/IEC-14496-15].
> 
>   **CodecPrivateData (переменная):** данные, указывающие параметры, специфичные для формата медиафайла, и общие для всех образцов в дорожке, представлены в виде байтовой строки с шестнадцатеричным кодированием. Формат и семантическое значение последовательности байтов изменяется вместе со значением поля **FourCC** следующим образом:
> 
>   * Когда Траккелемент описывает HEVC видео, поле **FourCC** должно быть равно **"hev1"** или **"hvc1"** .
> 
>   Поле **CodecPrivateData** должно содержать шестнадцатеричное строковое представление следующей последовательности байтов, указанной в ABNF [[RFC5234]:](https://go.microsoft.com/fwlink/?LinkId=123096) (без изменений из MS-SSTR)
> 
>   * %x00 %x00 %x00 %x01 SPSField %x00 %x00 %x00 %x01 PPSField
> 
>   * SPSField содержит набор параметров последовательности (SPS).
> 
>   * PPSField содержит набор параметров среза (PPS).
> 
>   Примечание. В CodecPrivateData нет набора параметров видео (VPS), но этот набор должен содержаться в заголовке файла хранимых файлов в поле "hvcC". Системы, использующие протокол Smooth Streaming, должны сигнализировать дополнительные параметры декодирования (например, уровень HEVC) с помощью настраиваемого атрибута codecs.

##### <a name="22251-customattributeselement"></a>2.2.2.5.1. CustomAttributesElement 

#### <a name="226-streamfragmentelement"></a>2.2.6. StreamFragmentElement 

>   В полях **SmoothStreamingMedia’s MajorVersion** и **MinorVersion** ДОЛЖНО быть задано значение 2. (Без изменения)

##### <a name="22261-trackfragmentelement"></a>2.2.2.6.1. TrackFragmentElement 

### <a name="223-fragment-request"></a>2.2.3. Запрос фрагмента 

>   **Примечание**. формат носителя по умолчанию, запрошенный для **minorversion** 2 и "hev1" или "hvc1", — это формат ISO-файла с фирменной символикой Iso8, указанный в формате ISO/IEC 14496-12] основной формат файла носителя (ISO/IEC 23001-7), а также в версии Common Encryption Second Edition.

### <a name="224-fragment-response"></a>2.2.4. Ответ фрагмента 

#### <a name="2241-moofbox"></a>2.2.4.1. MoofBox 

#### <a name="2242-mfhdbox"></a>2.2.4.2. MfhdBox 

#### <a name="2243-trafbox"></a>2.2.4.3. TrafBox 

#### <a name="2244-tfxdbox"></a>2.2.4.4. TfxdBox 

>   Поле **TfxdBox** устарело. Теперь используется поле времени декодирования фрагмента дорожки (tfdt), указанное в разделе 8.8.12 спецификации [ISO/IEC 14496-12].
> 
>   **Примечание**. Клиент может рассчитать продолжительность фрагмента, суммируя длительность образцов, указанную в поле отслеживания выполнения (trun), или умножая количество образцов на длительность образца по умолчанию. Сложение времени BaseMediaDecodeTime в поле tfdt и длительности фрагмента соответствует параметру времени URL-адреса для следующего фрагмента.
> 
>   При необходимости СЛЕДУЕТ вставить поле Producer Reference Time Box (prft) перед полем Movie Fragment Box (moof), чтобы указать время в формате UTC, соответствующее времени декодирования фрагмента дорожки первого образца, на который ссылается поле Movie Fragment Box, как указано в разделе 8.16.5 спецификации [ISO/IEC 14496-12].

#### <a name="2245-tfrfbox"></a>2.2.4.5. TfrfBox 

>   Поле **TfrfBox** устарело. Теперь используется поле времени декодирования фрагмента дорожки (tfdt), указанное в разделе 8.8.12 спецификации [ISO/IEC 14496-12].
> 
>   **Примечание**. Клиент может рассчитать продолжительность фрагмента, суммируя длительность образцов, указанную в поле отслеживания выполнения (trun), или умножая количество образцов на длительность образца по умолчанию. Сложение времени BaseMediaDecodeTime в поле tfdt и длительности фрагмента соответствует параметру времени URL-адреса для следующего фрагмента. Адреса, определяемые в упреждающем режиме, устарели, так как они задерживают потоковую трансляцию.

#### <a name="2246-tfhdbox"></a>2.2.4.6. TfhdBox 

>   Поле **TfhdBox** и связанные с ним поля инкапсулируют значения по умолчанию для метаданных образца в фрагменте. Синтаксис поля **TfhdBox** представляет собой строгое подмножество синтаксиса поля заголовка фрагмента дорожки, определенного в разделе 8.8.7 спецификации [[ISO/IEC-14496-12]](https://go.microsoft.com/fwlink/?LinkId=183695).
> 
>   **BaseDataOffset (8 байт):** смещение в байтах от поля **MdatBox** до поля образца в поле **MdatBox**. Чтобы сигнализировать об этом ограничении, должен быть установлен флаг default-base-is-moof (0x020000).

#### <a name="2247-trunbox"></a>2.2.4.7. TrunBox 

>   Поле **TrunBox** и связанные с ним поля инкапсулируют значения для метаданных образца в запрошенном фрагменте. Синтаксис **TrunBox** представляет собой строгое подмножество поля запуска фрагмента дорожки версии 1, определенного в разделе 8.8.8 спецификации [[ISO/IEC-14496-](https://go.microsoft.com/fwlink/?LinkId=183695)*12]*.
> 
>   **SampleCompositionTimeOffset (4 байта):** смещение времени композиции образца каждого образца настроено таким образом, чтобы время представления первого представленного образца в фрагменте соответствовало времени декодирования первого декодированного образца. Отрицательные смещения композиции видеообразца ДОЛЖНЫ использоваться
> 
>   в соответствии со спецификацией [[ISO/IEC-14496-12].](https://go.microsoft.com/fwlink/?LinkId=183695)
> 
>   Примечание. Это позволит избежать ошибок синхронизации видео, вызванных задержкой звука, равной самой большой задержке удаления в буфере декодированных изображений, и поддержать расписание представления между альтернативными фрагментами, которые могут иметь разные задержки удаления.
> 
>   Синтаксис полей, определенный в этом разделе и указанный в ABNF [[RFC5234]](https://go.microsoft.com/fwlink/?LinkId=123096), остается тем же, за исключением следующего:
> 
>   SampleCompositionTimeOffset = SIGNED_INT32

#### <a name="2248-mdatbox"></a>2.2.4.8. MdatBox 

#### <a name="2249-fragment-response-common-fields"></a>2.2.4.9. Общие поля ответа фрагмента 

### <a name="225-sparse-stream-pointer"></a>2.2.5. Указатель разреженных потоков данных 

### <a name="226-fragment-not-yet-available"></a>2.2.6. Фрагмент пока недоступен 

### <a name="227-live-ingest"></a>2.2.7. Прием в режиме реального времени 

#### <a name="2271-filetype"></a>2.2.7.1. FileType 

>   **FileType (переменная):** определяет подтип и предполагаемое использование файла MPEG-4 ([[MPEG4-RA])](https://go.microsoft.com/fwlink/?LinkId=327787), а также высокоуровневые атрибуты.
> 
>   **MajorBrand (переменная):** основная марка медиафайла. НЕОБХОДИМО использовать значение "isml."
> 
>   **MinorVersion (переменная):** дополнительный номер версии медиафайла. НЕОБХОДИМО использовать значение 1.
> 
>   **CompatibleBrands (переменная):** указывает поддерживаемые марки файла MPEG-4.
>   НЕОБХОДИМО использовать значения "ccff" и "iso8."
> 
>   Синтаксис полей, определенный в этом разделе и указанный в ABNF [[RFC5234]](https://go.microsoft.com/fwlink/?LinkId=123096), выглядит, как показано ниже:

```properties
FileType = MajorBrand MinorVersion CompatibleBrands
MajorBrand = STRING_UINT32
MinorVersion = STRING_UINT32
CompatibleBrands = "ccff" "iso8" 0\*(STRING_UINT32)
```

**Примечание**. Марки совместимости ccff и iso8 указывают, что фрагменты соответствуют общему формату файла контейнера, общему шифрованию [ISO/IEC 23001-7] и четвертому выпуску спецификации [ISO/IEC 14496-12] о формате базового медиафайла ISO.

#### <a name="2272-streammanifestbox"></a>2.2.7.2. StreamManifestBox 

##### <a name="22721-streamsmil"></a>2.2.7.2.1. StreamSMIL 

#### <a name="2273-liveservermanifestbox"></a>2.2.7.3. LiveServerManifestBox 

##### <a name="22731-livesmil"></a>2.2.7.3.1. LiveSMIL 

#### <a name="2274-moovbox"></a>2.2.7.4. MoovBox 

#### <a name="2275-fragment"></a>2.2.7.5. Фрагмент 

##### <a name="22751-track-fragment-extended-header"></a>2.2.7.5.1. Расширенный заголовок фрагмента дорожки 

### <a name="228-server-to-server-ingest"></a>2.2.8. Прием между серверами (сервер — сервер) 

## <a name="3-protocol-details"></a>3. Сведения о протоколе 


## <a name="31-client-details"></a>3.1. Сведения о клиенте 

### <a name="311-abstract-data-model"></a>3.1.1. Абстрактная модель данных 

#### <a name="3111-presentation-description"></a>3.1.1.1. Описание презентации 

>   Элемент данных описания презентации инкапсулирует все метаданные для презентации.
> 
>   Метаданные презентации: набор метаданных, общий для всех потоков в презентации. Метаданные презентации включают в себя следующие поля, указанные в разделе *2.2.2.1*:
> 
> * **MajorVersion**
> * **MinorVersion**
> * **Временной**
> * **Длительность**
> * **IsLive**
> * **LookaheadCount**
> * **DVRWindowLength**
> 
>   В презентациях, содержащих потоки HEVC, ДОЛЖНЫ быть заданы следующие значения:

```properties
MajorVersion = 2
MinorVersion = 2
```

>   LookaheadCount = 0. (Примечание. Поля устарели.)
> 
>   В презентациях также ДОЛЖНО быть задано следующее:

```properties
TimeScale = 90000
```

>   Коллекция потоков — коллекция элементов данных описания потока, как указано в разделе *3.1.1.1.2*.
> 
>   Описание защиты: коллекция элементов данных описания метаданных системы защиты, как указано в разделе *3.1.1.1.1*.

##### <a name="31111-protection-system-metadata-description"></a>3.1.1.1.1. Описание метаданных системы защиты 

>   Элемент данных описания метаданных системы защиты инкапсулирует метаданные, относящиеся к единой системе защиты содержимого. (Без изменения)
> 
>   Описание заголовка защиты: метаданные защиты содержимого, которые относятся к единой системе защиты содержимого. Описание заголовка защиты включает в себя следующие поля, указанные в разделе *2.2.2.2*:
> 
>   * **SystemID**
>   * **ProtectionHeaderContent**

##### <a name="31112-stream-description"></a>3.1.1.1.2. Описание потока данных 

###### <a name="311121-track-description"></a>3.1.1.1.2.1. Описание дорожки 

###### <a name="3111211-custom-attribute-description"></a>3.1.1.1.2.1.1. Описание настраиваемого атрибута 

##### <a name="3113-fragment-reference-description"></a>3.1.1.3. Описание ссылки на фрагмент 

###### <a name="31131-track-specific-fragment-reference-description"></a>3.1.1.3.1. Описание ссылки на фрагмент для определенной дорожки 

#### <a name="3112-fragment-description"></a>3.1.1.2. Описание фрагмента 

##### <a name="31121-sample-description"></a>3.1.1.2.1. Описание образца 

### <a name="312-timers"></a>3.1.2. Таймеры 

### <a name="313-initialization"></a>3.1.3. Инициализация 

### <a name="314-higher-layer-triggered-events"></a>3.1.4. Активируемые события более высокого уровня 

#### <a name="3141-open-presentation"></a>3.1.4.1. Открытие презентации 

#### <a name="3142-get-fragment"></a>3.1.4.2. Получение фрагмента 

#### <a name="3143-close-presentation"></a>3.1.4.3. Закрытие презентации 

### <a name="315-processing-events-and-sequencing-rules"></a>3.1.5. Обработка событий и упорядочивание правил 

#### <a name="3151-manifest-request-and-manifest-response"></a>3.1.5.1. Запрос и ответ манифеста 

#### <a name="3152-fragment-request-and-fragment-response"></a>3.1.5.2. Запрос и ответ фрагмента

## <a name="32-server-details"></a>3.2. Сведения о сервере

## <a name="33-live-encoder-details"></a>3.3. Сведения о динамическом кодировщике 

## <a name="4-protocol-examples"></a>4. Примеры протокола 

## <a name="5-security"></a>5. Безопасность 

## <a name="51-security-considerations-for-implementers"></a>5.1. Вопросы безопасности для разработчиков

>   Если содержимое, переносимое с помощью этого протокола, имеет высокую коммерческую ценность, для предотвращения его несанкционированного использования следует использовать систему защиты содержимого. Элемент **ProtectionElement** можно использовать для перемещения метаданных, связанных с использованием системы защиты содержимого. Защищенные аудио- и видеоматериалы ДОЛЖНЫ быть зашифрованы, как указано во втором выпуске (2015) спецификации [ISO/IEC 23001-7] об общем шифровании MPEG.
> 
>   **Примечание**. Для видео HEVC шифровать нужно только данные среза в блоках NAL VCL. До выполнения расшифровки для приложений презентаций доступны заголовки срезов и другие блоки NAL. В защищенном видеопути зашифрованная информация недоступна для приложений презентаций.

## <a name="52-index-of-security-parameters"></a>5.2. Индекс параметров безопасности 


| **Параметр безопасности**  | **Раздел**         |
|-------------------------|---------------------|
| ProtectionElement       | *2.2.2.2*           |
| Поля общего шифрования | *[ISO/IEC 23001-7]* |

## <a name="53-common-encryption-boxes"></a>5.3. Поля общего шифрования

В ответах фрагментов при применении общего шифрования могут присутствовать следующие поля, указанные в спецификациях [ISO/IEC 23001-7] или [ISO/IEC 14496-12]:

1.  Поле заголовка в соответствии с системой защиты (pssh).

2.  Поле шифрования образца (senc)

3.  Поле смещения дополнительных сведений об образце (saio)

4.  Поле размера дополнительных сведений об образце (saiz)

5.  Поле описания группы образца (sgpd)

6.  Образец для группы (sbgp)

---

## <a name="media-services-learning-paths"></a>Схемы обучения работе со службами мультимедиа
[!INCLUDE [media-services-learning-paths-include](../../includes/media-services-learning-paths-include.md)]

## <a name="provide-feedback"></a>Отзывы
[!INCLUDE [media-services-user-voice-include](../../includes/media-services-user-voice-include.md)]

[image1]: ./media/media-services-fmp4-live-ingest-overview/media-services-image1.png
[image2]: ./media/media-services-fmp4-live-ingest-overview/media-services-image2.png
[image3]: ./media/media-services-fmp4-live-ingest-overview/media-services-image3.png
[image4]: ./media/media-services-fmp4-live-ingest-overview/media-services-image4.png
[image5]: ./media/media-services-fmp4-live-ingest-overview/media-services-image5.png
[image6]: ./media/media-services-fmp4-live-ingest-overview/media-services-image6.png
[image7]: ./media/media-services-fmp4-live-ingest-overview/media-services-image7.png
