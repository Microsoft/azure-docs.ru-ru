---
title: Управление политикой записи в Azure
description: В этом разделе объясняется, как управлять политикой записи.
ms.topic: how-to
ms.date: 04/27/2020
ms.openlocfilehash: ec72f28496c1392b9d95134c343e1892998a0c28
ms.sourcegitcommit: 2dd0932ba9925b6d8e3be34822cc389cade21b0d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/01/2021
ms.locfileid: "99224995"
---
# <a name="manage-recording-policy"></a>Управление политикой записи

Вы можете использовать интерактивную аналитику видео на IoT Edge для [непрерывной записи видео](continuous-video-recording-concept.md), позволяя записывать видео в облако для недель или месяцев. Вы можете управлять длиной (в днях) этого облачного архива с помощью [средств управления жизненным циклом](../../storage/blobs/storage-lifecycle-management-concepts.md?tabs=azure-portal) , встроенных в службу хранилища Azure.  

Ваша учетная запись службы мультимедиа связана с учетной записью хранения Azure, и при записи видео в облако содержимое записывается в [ресурс-контейнер](../latest/assets-concept.md)службы мультимедиа. Каждый ресурс сопоставляется с контейнером в учетной записи хранения. Управление жизненным циклом позволяет определить [политику](../../storage/blobs/storage-lifecycle-management-concepts.md?tabs=azure-portal#policy) для учетной записи хранения, где можно указать следующее [правило](../../storage/blobs/storage-lifecycle-management-concepts.md?tabs=azure-portal#rules) .

```
{
  "rules": [
    {
      "name": "NinetyDayRule",
      "enabled": true,
      "type": "Lifecycle",
      "definition": {
        "filters": {
          "blobTypes": [ "blockBlob" ]
        },
        "actions": {
          "baseBlob": {
            "tierToCool": { "daysAfterModificationGreaterThan": 30 },
            "delete": { "daysAfterModificationGreaterThan": 90 }
          }
        }
      }
    }
  ]
}
```

Приведенное выше правило:

* Применяется ко всем блочным BLOB-объектам в учетной записи хранения.
* Указывает, что при возрасте больших двоичных объектов за 30 дней они перемещаются с [уровня "горячий доступ" на "круто](../../storage/blobs/storage-blob-storage-tiers.md?tabs=azure-portal)".
* А когда большие двоичные объекты возрастет свыше 90 дней, они будут удалены.

Когда вы используете функцию Live Video Analytics для записи в ресурс-контейнер, вы указываете `segmentLength` свойство, которое указывает модулю выполнить статистическую обработку минимальной длительности видео (в секундах) перед его записью в облако. Ресурс будет содержать ряд сегментов, каждый из которых имеет отметку времени создания, `segmentLength` более позднюю, чем предыдущая. Когда политика управления жизненным циклом запускается, она удаляет сегменты, которые старше указанного порогового значения. Тем не менее вы по-прежнему сможете получать доступ к оставшимся сегментам и воспроизводить их с помощью API службы мультимедиа. Дополнительные сведения см. в разделе [Воспроизведение записей](playback-recordings-how-to.md). 

## <a name="limitations"></a>Ограничения

Ниже приведены некоторые известные ограничения, связанные с управлением жизненным циклом.

* В политике может быть не более 100 правил, и каждое правило может указывать до 10 контейнеров. Таким образом, если вам нужны различные политики записи (например, 3-дневный Архив для камеры, на который находился стоянка, 30 дней для камеры на закреплениях, и 180 дней для камеры за счетчиком извлечения), то с одной учетной записью службы мультимедиа можно настроить правила для максимум 1000 камер.
* Обновления политики управления жизненным циклом не выполняются немедленно. Дополнительные сведения см. в [разделе часто задаваемых вопросов](../../storage/blobs/storage-lifecycle-management-concepts.md?tabs=azure-portal#faq) .
* Если вы решили применить политику, в которой большие двоичные объекты будут перемещены на замечательный уровень, это может повлиять на воспроизведение этой части архива. Вы можете столкнуться с дополнительными задержками или случайными ошибками. Службы мультимедиа не поддерживают воспроизведение содержимого на уровне архива.

## <a name="next-steps"></a>Дальнейшие действия

[Воспроизведение записей](playback-recordings-how-to.md)
