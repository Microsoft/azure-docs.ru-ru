---
title: Cлужбы мультимедиа Microsoft Azure распространенных сценариев | Документация Майкрософт
description: В этой статье приводятся общие сведения о Cлужбы мультимедиа Microsoft Azure сценариях.
services: media-services
documentationcenter: ''
author: IngridAtMicrosoft
manager: femila
editor: ''
ms.service: media-services
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 11/3/2020
ms.author: inhenkel
ms.openlocfilehash: d195ad6715c47b9b4c14dc2e65ba1d07ebf79ce8
ms.sourcegitcommit: 77afc94755db65a3ec107640069067172f55da67
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2021
ms.locfileid: "98696267"
---
# <a name="microsoft-azure-media-services-common-scenarios"></a>Cлужбы мультимедиа Microsoft Azure распространенных сценариев

[!INCLUDE [media services api v2 logo](./includes/v2-hr.md)]

> [!NOTE]
> В Cлужбы мультимедиа версии 2 больше не добавляются новые компоненты или функциональные возможности. Ознакомьтесь с новейшей версией Служб мультимедиа — [версией 3](../latest/media-services-overview.md). Также изучите руководство по [миграции из версии 2 в версию 3](../latest/migrate-v-2-v-3-migration-introduction.md).

Службы мультимедиа Microsoft Azure (AMS) позволяют безопасно передавать, сохранять, кодировать и упаковывать видео- или аудиосодержимое для потоковой трансляции разным клиентам (например, на ТВ, ПК и мобильные устройства) или для трансляции по требованию.

В этой статье приведены распространенные сценарии для доставки содержимого в реальном времени или по запросу.

## <a name="overview"></a>Обзор

### <a name="prerequisites"></a>Предварительные требования

* Учетная запись Azure. Если ее нет, можно создать бесплатную пробную учетную запись всего за несколько минут. Дополнительные сведения см. в разделе [Бесплатная пробная версия Azure](https://azure.microsoft.com).
* Учетная запись служб мультимедиа Azure. Дополнительные сведения см. в статье [Создание учетной записи служб мультимедиа Azure с помощью портала Azure](media-services-portal-create-account.md).
* Конечная точка потоковой передачи, из которой нужно передавать содержимое потоком, должна находиться в состоянии **Выполняется**.

    При создании учетной записи AMS к вашей учетной записи добавляется конечная точка потоковой передачи **по умолчанию** в **остановленном** состоянии. Чтобы начать потоковую передачу содержимого и воспользоваться динамической упаковкой и динамическим шифрованием, конечная точка потоковой передачи должна находиться в состоянии **Выполняется**.

### <a name="commonly-used-objects-when-developing-against-the-ams-odata-model"></a>часто используемые объекты при разработке с помощью модели OData AMS

На следующем рисунке показаны некоторые из объектов, которые чаще всего используются при разработке с использованием модели OData служб мультимедиа.

Щелкните изображение, чтобы просмотреть его полноразмерную версию.  

[![Схема, на которой показаны некоторые наиболее часто используемые объекты при разработке для модели данных объекта служб мультимедиа Azure.](./media/media-services-overview/media-services-overview-object-model-small.png)](./media/media-services-overview/media-services-overview-object-model.png#lightbox)

Всю модель можно просмотреть [здесь](https://media.windows.net/API/$metadata?api-version=2.15).  

## <a name="protect-content-in-storage-and-deliver-streaming-media-in-the-clear-non-encrypted"></a>Защита содержимого в хранилище и доставка потокового мультимедиа в незашифрованном виде

![Рабочий процесс для видео по запросу](./media/scenarios-and-availability/scenarios-and-availability01.png)

1. Отправьте файл мультимедиа высокого качества в ресурс.

    Применение параметра шифрования хранилища для ресурса для защиты содержимого во время передачи, а также при хранении в хранилище рекомендуется.

1. Кодирование в набор MP4-файлов с адаптивным битрейтом.

    Для защиты неактивных данных рекомендуется применить к выходному ресурсу параметр шифрования хранилища.

1. Настройка политики доставки ресурсов (используется динамической упаковкой).

    Если ресурс защищен хранилищем, **необходимо** настроить политику доставки ресурсов.
1. Опубликуйте ресурс, создав указатель OnDemand.
1. Потоковая передача содержимого.

## <a name="protect-content-in-storage-deliver-dynamically-encrypted-streaming-media"></a>Защита содержимого в хранилище, доставка потокового мультимедиа с динамическим шифрованием

![Защита с помощью PlayReady](./media/media-services-content-protection-overview/media-services-content-protection-with-multi-drm.png)

1. Отправьте файл мультимедиа высокого качества в ресурс. Примените шифрование хранилища к ресурсу.
1. Кодирование в набор MP4-файлов с адаптивным битрейтом. Примените шифрование хранилища к выходному ресурсу.
1. Создайте ключ шифрования содержимого для ресурса, который вы хотите динамически шифровать во время воспроизведения.
1. Настройте политику авторизации ключа содержимого.
1. Настройте политику передачи ресурсов (она используется средствами динамической упаковки и шифрования).
1. Опубликуйте ресурс, создав указатель OnDemand.
1. Потоковая передача содержимого.

## <a name="deliver-progressive-download"></a>Использование прогрессивного скачивания

1. Отправьте файл мультимедиа высокого качества в ресурс.
1. Кодирование в один MP4-файл.
1. Опубликуйте ресурс, создав указатель OnDemand или SAS. При использовании указателя SAS содержимое скачивается из хранилища BLOB-объектов Azure. Конечные точки потоковой передачи не нужны в состоянии запуска.
1. Прогрессивное скачивание содержимого.

## <a name="delivering-live-streaming-events"></a>Доставка событий потоковой передачи в режиме реального времени

1. Принимайте содержимое в реальном времени с использованием различных протоколов динамической потоковой передачи (например, RTMP или Smooth Streaming).
1. Кодируйте ваш поток в поток с адаптивной скоростью (по желанию).
1. Предварительно просматривайте динамический поток.
1. Доставлять содержимое через:
    1. Общие протоколы потоковой передачи (например, MPEG-ТИРЕ, Smooth, HLS) непосредственно клиентам,
    1. В сеть доставки содержимого (CDN) для дальнейшего распространения или
    1. Запишите и сохраните полученное содержимое для потоковой передачи в дальнейшем (видео по запросу).

При динамической потоковой передаче можно выбрать один из следующих маршрутов.

### <a name="working-with-channels-that-receive-multi-bitrate-live-stream-from-on-premises-encoders-pass-through"></a>Работа с каналами, получающими динамические многоскоростные потоки данных от локальных кодировщиков (сквозная передача)

На следующей схеме показаны основные части платформы AMS, участвующие в рабочем процессе **сквозной передачи** .

![Схема, на которой показаны основные части платформы M S, участвующие в рабочем процессе "сквозное".](./media/scenarios-and-availability/media-services-live-streaming-current.png)

Дополнительные сведения см. в разделе [Работа с каналами, получающими динамические многоскоростные потоки данных от локальных кодировщиков (сквозная передача)](media-services-live-streaming-with-onprem-encoders.md).

### <a name="working-with-channels-that-are-enabled-to-perform-live-encoding-with-azure-media-services"></a>Работа с каналами, выполняющими кодирование в реальном времени с помощью служб мультимедиа Azure

На следующей схеме показаны основные части платформы AMS, участвующие в рабочем процессе потоковой передачи, где канал включен для кодирования в реальном времени с помощью служб мультимедиа.

![Динамический рабочий процесс](./media/scenarios-and-availability/media-services-live-streaming-new.png)

Дополнительные сведения можно найти в разделе [Работа с каналами, выполняющими кодирование в реальном времени с помощью служб мультимедиа Azure](media-services-manage-live-encoder-enabled-channels.md).

## <a name="consuming-content"></a>Использование содержимого

Службы мультимедиа Azure предоставляют средства, необходимые для создания динамических многофункциональных клиентских приложений проигрывателя для большинства платформ, включая: устройства iOS, устройства Android, Windows, Windows Phone, Xbox и абонентские приставки.

## <a name="enabling-azure-cdn"></a>Поддержка сети CDN Azure

Службы мультимедиа поддерживают интеграцию с сетью CDN Azure. Информацию о включении сети CDN Azure см. в статье [Управление конечными точками потоковой передачи в учетной записи служб мультимедиа](media-services-portal-manage-streaming-endpoints.md).

## <a name="scaling-a-media-services-account"></a>Масштабирование учетной записи служб мультимедиа

Клиенты AMS могут масштабировать конечные точки потоковой передачи, обработку мультимедиа и хранилище в своих учетных записях AMS.

* Клиенты службы мультимедиа могут выбрать конечную точку потоковой передачи уровня **Стандартный** либо **Премиум**. Конечная точка потоковой передачи уровня **Стандартный** подходит для большинства задач потоковой передачи. Она включает те же функции, что и конечные точки потоковой передачи уровня **Премиум**, и автоматически масштабирует пропускную способность при передаче исходящих данных.

    Конечные точки уровня **Премиум** подходят для выполнения более сложных задач благодаря выделенной пропускной способности и возможности масштабирования. Клиенты, имеющие конечную точку потоковой передачи уровня **Премиум**, по умолчанию получают одну единицу потоковой передачи. Конечную точку потоковой передачи можно масштабировать, добавляя единицы потоковой передачи. Каждая единица потоковой передачи предоставляет дополнительную пропускную способность для приложения. Дополнительные сведения о масштабировании конечных точек потоковой передачи **Премиум** см. в статье [Масштабирование конечных точек потоковой передачи с помощью портала Azure](media-services-portal-scale-streaming-endpoints.md).

* Учетная запись служб мультимедиа связана с типом зарезервированных единиц, который определяет скорость обработки задач обработки мультимедиа. Вы можете выбрать один из следующих типов зарезервированных единиц: **S1**, **S2** или **S3**. Например, если использовать тип зарезервированной единицы **S2**, задание по кодированию выполняется быстрее по сравнению заданием, для которого выбран тип **S1**.

    Помимо указания типа "зарезервированный модуль", можно указать для подготовки учетной записи с **зарезервированными единицами** (RUs). Количеством подготовленных зарезервированных единиц определяется количество задач мультимедиа, которые могут одновременно обрабатываться в данной учетной записи.

    > [!NOTE]
    > Зарезервированные единицы позволяют распараллелить всю обработку мультимедиа, включая задания индексирования с использованием индексатора мультимедийных данных Azure. Однако в отличие от кодировки, задания индексирования не будут обрабатываться быстрее при использовании более производительных зарезервированных единиц.

    Дополнительные сведения см. в разделе [масштабирование обработки мультимедиа](media-services-portal-scale-media-processing.md).

* Можно также масштабировать учетную запись служб мультимедиа, добавляя к ней учетные записи хранения. Каждая учетная запись хранения ограничена 500 ТБ. Дополнительные сведения см. в статье [Управление активами служб мультимедиа в нескольких учетных записях хранения](./media-services-managing-multiple-storage-accounts.md).

## <a name="next-steps"></a>Дальнейшие действия

[Миграция в Службы мультимедиа версии 3](../latest/media-services-overview.md)

## <a name="provide-feedback"></a>Отзывы
[!INCLUDE [media-services-user-voice-include](../../../includes/media-services-user-voice-include.md)]