---
title: Заметки о выпуске Служб мультимедиа Azure версии 3
description: Чтобы вы оставались в курсе последних разработок, в этой статье предоставлены последние обновления Служб мультимедиа Azure версии 3.
services: media-services
documentationcenter: ''
author: IngridAtMicrosoft
manager: femila
editor: ''
ms.service: media-services
ms.workload: na
ms.topic: article
ms.date: 03/17/2021
ms.author: inhenkel
ms.openlocfilehash: 9e5a6737d2e37392efd305910ff5370adc84940f
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "104596745"
---
# <a name="azure-media-services-v3-release-notes"></a>Заметки о выпуске Служб мультимедиа Azure версии 3

[!INCLUDE [media services api v3 logo](./includes/v3-hr.md)]

Чтобы вы оставались в курсе последних разработок, в этой статье предоставлены такие сведения:

* Последние выпуски.
* Известные проблемы
* Исправления ошибок
* Нерекомендуемые функции

## <a name="march-2021"></a>Март 2021 г.

### <a name="new-language-support-added-to-the-audioanalyzer-preset"></a>Добавлена поддержка нового языка в предустановку Аудиоанализер

Дополнительные языки для записи видео и подзаголовочных данных теперь доступны в предаудиоанализерной предустановке (режимах "базовый" и "Стандартный").

* Английский (Австралия), en-AU
* Французский (Канада), fr-CA
* Арабский (Бахрейн) современный Standard, "AR-BH"
* Арабский (Египет), "ar-EG"
* Арабский (Ирак), "AR-IQ"
* Арабский (Израиль), "AR-IL"
* Арабский (Иордания), "AR-Петр"
* Арабский (Кувейт), "AR-кВт *"
* Арабский (Ливан), "AR-фунтов"
* Арабский (Оман), "AR-OM"
* Арабский (Катар), "AR-QA"
* Арабский (Саудовская Аравия), "AR-SA"
* Датский, "da-DK"
* Норвежский, "NetBIOS-нет"
* Шведский, "SV-SE"
* Финский, "Fi-FI"
* Тайский, "th-TH"
* Турецкий, tr-TR

Ознакомьтесь с последними доступными языками в [статье анализ концепции видео и звуковых файлов.](analyzing-video-audio-files-concept.md)

## <a name="february-2021"></a>Февраль 2021 года

### <a name="hevc-encoding-support-in-standard-encoder"></a>Поддержка кодирования HEVC в стандартном кодировщике

Стандартный кодировщик теперь поддерживает 8-разрядную поддержку кодирования HEVC (H. 265). Содержимое HEVC может доставляться и упаковываться через динамический упаковщик с использованием формата "hev1".  

Новая настраиваемая кодировка .NET с примером HEVC доступна в [репозитории мультимедиа-служб-v3-DotNet Git Hub](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/VideoEncoding/EncodingWithMESCustomPreset_HEVC).
Помимо настраиваемого кодирования, теперь доступны следующие новые встроенные предварительные настройки кодирования HEVC:

- H265ContentAwareEncoding
- H265AdaptiveStreaming
- H265SingleBitrate720P
- H265SingleBitrate1080p
- H265SingleBitrate4K

Клиенты, ранее использующие HEVC в кодировщике Premium в API v2, должны выполнить миграцию, чтобы использовать новую поддержку кодирования HEVC в стандартном кодировщике.

### <a name="azure-media-services-v2-api-and-sdks-deprecation-announcement"></a>Объявление об устаревшей версии API служб мультимедиа Azure v2 и пакетов SDK

#### <a name="update-your-azure-media-services-rest-api-and-sdks-to-v3-by-29-february-2024"></a>Обновление REST API Служб мультимедиа Azure и пакетов SDK до версии v3 до 29 февраля 2024

Поскольку версия 3 REST API Служб мультимедиа Azure и клиентские пакеты SDK для .NET и Java предлагают больше возможностей, чем версия 2, мы отменяем версию 2 REST API Служб мультимедиа Azure и клиентских пакетов SDK для .NET и Java.

Мы рекомендуем сделать этот ключ более ранним, чтобы получить более широкие преимущества версии 3 REST API Служб мультимедиа Azure и клиентских пакетов SDK для .NET и Java.
Версия 3 предоставляет:
 
- Круглосуточная поддержка интерактивных событий
- API-интерфейсы RESTFUL, клиентские пакеты SDK для .NET Core, Node.js, Python, Java, Go и Ruby.
- Управляемые клиентами ключи, интеграция доверенного хранилища, поддержка частной ссылки и [многое другое](https://docs.microsoft.com/azure/media-services/latest/migrate-v-2-v-3-migration-benefits)

#### <a name="action-required"></a>Требуется действие

Чтобы минимизировать сбои рабочих нагрузок, ознакомьтесь с [руководством по миграции](https://go.microsoft.com/fwlink/?linkid=2149150&clcid=0x409) , чтобы перенести код из API версии 2 и пакеты SDK на версию 3 для API и пакета SDK до 29 февраля 2024.
**После 29 февраля 2024** службы мультимедиа Azure больше не будут принимать трафик на REST API версии 2, API управления учетными записями ARM версии 2015-10-01 или из пакетов SDK для клиента .NET версии 2. Сюда входят все сторонние пакеты SDK для клиентов с открытым исходным кодом, которые могут вызывать API версии 2.  

См. официальное [объявление об обновлениях Azure](https://azure.microsoft.com/updates/update-your-azure-media-services-rest-api-and-sdks-to-v3-by-29-february-2024/).

### <a name="standard-encoder-support-for-v2-api-features"></a>Поддержка стандартных кодировщиков для функций API v2

Помимо новой добавленной поддержки кодирования HEVC (H. 265), в версии 2020-05-01 API кодирования теперь доступны следующие функции.

- Теперь поддерживается поддержка нескольких входных файлов с помощью новой поддержки **жобинпутклип** .
    - Пример доступен для .NET, демонстрирующий [двустороннюю совместную работу двух ресурсов](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/main/VideoEncoding/EncodingWithMESCustomStitchTwoAssets).
- Выбор звуковой дорожки позволяет клиентам выбирать и сопоставлять входящие звуковые дорожки и перенаправлять их в выходные данные для кодирования.
    - Дополнительные сведения о **аудиотраккдескриптор** и отслеживании выбора см. в [REST API OpenAPI](https://github.com/Azure/azure-rest-api-specs/blob/8d15dc681b081cca983e4d67fbf6441841d94ce4/specification/mediaservices/resource-manager/Microsoft.Media/stable/2020-05-01/Encoding.json#L385) .
- Отслеживать выбор для кодирования — позволяет клиентам выбирать дорожки из исходного файла граничным маршрутизатором или в динамическом архиве с несколькими дорожками с скоростью. Чрезвычайно полезно для создания MP4 со множественной из архивных файлов событий Live.
    - См. [видеотраккдескриптор](https://github.com/Azure/azure-rest-api-specs/blob/8d15dc681b081cca983e4d67fbf6441841d94ce4/specification/mediaservices/resource-manager/Microsoft.Media/stable/2020-05-01/Encoding.json#L1562)
- Возможности исправления (размытия), добавленные в Фацедетектор
    - См. раздел Режимы [исправить](https://github.com/Azure/azure-rest-api-specs/blob/8d15dc681b081cca983e4d67fbf6441841d94ce4/specification/mediaservices/resource-manager/Microsoft.Media/stable/2020-05-01/Encoding.json#L634) и [комбинированные](https://github.com/Azure/azure-rest-api-specs/blob/8d15dc681b081cca983e4d67fbf6441841d94ce4/specification/mediaservices/resource-manager/Microsoft.Media/stable/2020-05-01/Encoding.json#L649) настройки фацедетектор.

### <a name="new-client-sdk-releases-for-2020-05-01-version-of-the-azure-media-services-api"></a>Новые выпуски клиентских пакетов SDK для версии 2020-05-01 API служб мультимедиа Azure

Новые версии клиентских пакетов SDK для всех доступных языков теперь доступны в описанных выше функциях.
Обновите последние версии клиентских пакетов SDK в базах кода с помощью диспетчера пакетов.

- [Пакет SDK для .NET 3.0.4](https://www.nuget.org/packages/Microsoft.Azure.Management.Media/)
- [Node.js typescript версии 8.1.0](https://www.npmjs.com/package/@azure/arm-mediaservices)
- [Python Azure-руководства-Media 3.1.0](https://pypi.org/project/azure-mgmt-media/)
- [Пакет SDK для Java 1.0.0-Beta. 2](https://search.maven.org/artifact/com.azure.resourcemanager/azure-resourcemanager-mediaservices/1.0.0-beta.2/jar)

### <a name="new-security-features-available-in-the-2020-05-01-version-of-the-azure-media-services-api"></a>Новые функции безопасности, доступные в версии 2020-05-01 API служб мультимедиа Azure.

- **[Управляемые пользователем ключи](concept-use-customer-managed-keys-byok.md)**: ключи содержимого и другие данные, хранящиеся в учетных записях, созданных с помощью API версии "2020-05-01", шифруются с помощью ключа учетной записи. Клиенты могут предоставить ключ для шифрования ключа учетной записи.

- **[Доверенное хранилище](concept-trusted-storage.md)**. службы мультимедиа можно настроить для доступа к службе хранилища Azure с помощью управляемого удостоверения, связанного с учетной записью служб мультимедиа. Если доступ к учетным записям хранения осуществляется с помощью управляемого удостоверения, клиенты могут настроить более широкие сетевые списки ACL для учетной записи хранения без блокировки сценариев служб мультимедиа.

- **[Управляемые удостоверения](concept-managed-identities.md)**. клиенты могут включить управляемое удостоверение, назначенное системой для учетной записи служб мультимедиа, чтобы предоставить доступ к хранилищам ключей (для управляемых пользователем ключей) и учетным записям хранения (для доверенного хранилища).

### <a name="updated-typescript-nodejs-samples-using-isomorphic-sdk-for-javascript"></a>Обновленные примеры Node.js typescript с использованием пакета SDK для сходны для JavaScript

Примеры Node.js были обновлены для использования новейшего пакета SDK для сходны. Примеры теперь демонстрируют использование typescript. Кроме того, для Node.js/Типескрипт. был добавлен новый пример динамической потоковой передачи.

Ознакомьтесь с последними примерами в репозитории " **[Media-Services-v3-node-](https://github.com/Azure-Samples/media-services-v3-node-tutorials)** Tutorial" центра Git.

### <a name="new-live-stand-by-mode-to-support-faster-startup-from-warm-state"></a>Новый режим "в режиме реального времени" для поддержки быстрого запуска из теплого состояния

Активные события теперь поддерживают режим выставления счетов с более низкими затратами для "автономного". Это позволяет клиентам предварительно распределять Интерактивные события по более низкой цене для создания "горячего пула". Затем клиенты могут использовать активные события, чтобы перейти в состояние выполнения быстрее, чем при создании.  Это сокращает время для значительного запуска канала и позволяет быстро выделить компьютеры, работающие в более низком ценовом режиме, с помощью быстрого выделения пула.
Последние сведения о ценах см. [здесь](https://azure.microsoft.com/pricing/details/media-services).
Дополнительные сведения о состоянии ожидания и других состояниях событий в реальном времени см. в статье о [состояниях событий в реальном времени и выставлении счетов.](https://docs.microsoft.com/azure/media-services/latest/live-event-states-billing)

## <a name="december-2020"></a>Декабрь 2020 г.

### <a name="regional-availability"></a>Доступность по регионам

Теперь службы мультимедиа Azure доступны в регионе Норвегии (Восточная часть) в портал Azure.  В этом регионе нет restV2.

## <a name="october-2020"></a>Октябрь 2020 г.

### <a name="basic-audio-analysis"></a>Базовый анализ звука

Предустановка "анализ звука" теперь включает ценовую категорию Basic mode. Новый базовый режим анализатора звука — это недорогой вариант для извлечения речевых заголовков и форматирования выходных субтитров и субтитров. В этом режиме выполняется расшифровка речи в текст и создание файла подзаголовка и подписи ВТТ. Выходные данные этого режима включают в себя JSON файл Insights, включающий только ключевые слова, транскрипцию и сведения о времени. Автоматическое определение языка и диаризатион динамика не включены в этот режим. См [. список поддерживаемых языков.](analyzing-video-audio-files-concept.md#built-in-presets)

Клиенты, использующие индексатор версии 1 и индексатор v2, должны перейти на базовую предустановку анализа звука.

Дополнительные сведения о режиме базового анализатора звука см. в разделе [Анализ видео и звуковых файлов](analyzing-video-audio-files-concept.md).  Чтобы узнать, как использовать базовый режим анализатора звука с REST API, см. статью [Создание базового аудио-преобразования](how-to-create-basic-audio-transform.md).

### <a name="live-events"></a>Динамические события

Обновления большинства свойств теперь разрешены при остановке активных событий. Кроме того, пользователям разрешено указывать префикс для статического имени узла для входных и предварительных URL-адресов события Live. Ванитюрл теперь вызывается `useStaticHostName` для лучшего отражения намерения свойства.

Активные события теперь имеют состояние StandBy.  См. раздел [динамические события и динамические выходные данные в службах мультимедиа](./live-events-outputs-concept.md).

Событие в реальном времени поддерживает получение различных пропорций входных данных. Режим Stretch позволяет клиентам указать поведение растяжения для выходных данных.

Кодирование в реальном времени теперь добавляет возможность вывода фрагментов фиксированных кадров с интервалом от 0,5 до 20 секунд.

### <a name="accounts"></a>Учетные записи

> [!WARNING]
> Если вы создаете учетную запись служб мультимедиа с версией API 2020-05-01, она не будет работать с RESTv2 

## <a name="august-2020"></a>Август 2020 г.

### <a name="dynamic-encryption"></a>динамическое шифрование.

Поддержка устаревшего зашифрованного формата файлов с поддержкой PlayReady (ПИФФ 1,1) теперь доступна в динамическом упаковщике. Это обеспечивает поддержку устаревших наборов смарт-ТВ из Samsung и LG, которые реализовали первые черновики Common Encryption Standard (CENC), опубликованный корпорацией Майкрософт.  Формат ПИФФ 1,1 также известен как формат шифрования, который ранее поддерживался клиентской библиотекой Silverlight. В настоящее время единственным сценарием использования для этого формата шифрования является нацеливание на нетривиальный объем интеллектуальных телевизоров в некоторых регионах, которые поддерживают только Smooth Streaming с шифрованием ПИФФ 1,1.

Чтобы использовать новую поддержку шифрования ПИФФ 1,1, измените значение Encryption на "Пифф" в URL-пути указателя потоковой передачи. Дополнительные сведения см. в разделе [Общие сведения о защита содержимого.](content-protection-overview.md)
Например: `https://amsv3account-usw22.streaming.media.azure.net/00000000-0000-0000-0000-000000000000/ignite.ism/manifest(encryption=piff)`|

> [!NOTE]
> Поддержка ПИФФ 1,1 предоставляется в виде обратно совместимого решения для интеллектуального телевидения (Samsung, LG), которое реализовало раннюю версию Common Encryption Silverlight. Рекомендуется использовать формат ПИФФ, где это необходимо для поддержки устаревших Smart-телевизоров Samsung или LG, поставляемых между 2009-2015, которые поддерживали шифрование PlayReady ПИФФ 1,1. 

## <a name="july-2020"></a>Июль 2020 г.

### <a name="live-transcriptions"></a>Динамические транскрипции

Интерактивные записи теперь поддерживают 19 языков и 8 регионов.

### <a name="protecting-your-content-with-media-services-and-azure-ad"></a>Защита содержимого с помощью служб мультимедиа и Azure AD

Мы опубликовали учебник [с именем сквозной защиты содержимого с помощью Azure AD](./azure-ad-content-protection.md).

### <a name="high-availability"></a>Высокий уровень доступности

Мы опубликовали высокий уровень доступности со службами мультимедиа и [обзором](./media-services-high-availability-encoding.md) видео по запросу (VOD) и [примерами](https://github.com/Azure-Samples/media-services-v3-dotnet/tree/master/HighAvailabilityEncodingStreaming).

## <a name="june-2020"></a>Июнь 2020 г.

### <a name="live-video-analytics-on-iot-edge-preview-release"></a>Интерактивная аналитика видео в предварительной версии IoT Edge

Предварительная версия функции Live Video Analytics на IoT Edge стала общедоступной. Дополнительные сведения см. в разделе [заметки о выпуске](../live-video-analytics-edge/release-notes.md).

Интерактивная аналитика видео на IoT Edge — это расширение семейства служб мультимедиа. Она позволяет анализировать видео в реальном времени с помощью моделей искусственного интеллекта на своих пограничных устройствах, а также при необходимости записывать и записывать это видео. Теперь вы можете создавать приложения с помощью анализа видео в реальном времени на границе, не беспокоясь о сложности создания и работы конвейера видео.

## <a name="may-2020"></a>Май 2020 г.

Службы мультимедиа Azure теперь доступны в следующих регионах: "Северная Германия", "Центрально-Западная Германия", "Северная Швейцария" и "Западная Швейцария". Клиенты могут развертывать Службы мультимедиа в этих регионах с помощью портала Azure.

## <a name="april-2020"></a>Апрель 2020 г.

### <a name="improvements-in-documentation"></a>Улучшения документации

Документация по Проигрывателю мультимедиа Azure перенесена в [документацию по Azure](../azure-media-player/azure-media-player-overview.md).

## <a name="january-2020"></a>Январь 2020 г.

### <a name="improvements-in-media-processors"></a>Усовершенствования в обработчиках мультимедиа

- Улучшенная поддержка чередующихся источников в средстве анализа видео — для такого содержимого теперь правильно выполняется устранение чересстрочной развертки перед отправкой в механизмы вывода.
- При создании эскизов с использованием режима "Наилучшее" кодировщик теперь выполняет поиск более 30 секунд, чтобы выбрать кадр, который не является монохромным.

### <a name="azure-government-cloud-updates"></a>Обновления в облаке Azure для государственных организаций

Службы мультимедиа теперь доступны следующих регионах Azure для государственных организаций: *USGov (Аризона)* и *USGov (Техас)* .

## <a name="december-2019"></a>Декабрь 2019 г.

Добавлена поддержка CDN для заголовков *Origin-Assist Prefetch* для потоковой передачи видео в прямом эфире и по запросу; доступно для клиентов, заключивших прямой договор с CDN Akamai. Функция Origin-Assist CDN-Prefetch использует следующий обмен заголовками HTTP между CDN Akamai и источником Служб мультимедиа Azure:

|Заголовок HTTP|Значения|Отправитель|Получатель|Назначение|
| ---- | ---- | ---- | ---- | ----- |
|CDN-Origin-Assist-Prefetch-Enabled | 1 (по умолчанию) или 0 |CDN|Исходный домен|Указание того, что для CDN включено предварительное получение|
|CDN-Origin-Assist-Prefetch-Path| Пример <br/>Fragments(video=1400000000,format=mpd-time-cmaf)|Исходный домен|CDN|Предоставление пути для предварительного получения в CDN|
|CDN-Origin-Assist-Prefetch-Request|1 (запрос на предварительное получение) или 0 (обычный запрос)|CDN|Исходный домен|Указание того, что запрос от CDN является запросом на предварительное получение|

Чтобы увидеть часть процесса обмена заголовками в действии, можно попробовать выполнить следующие действия.

1. Используйте Postman или Curl, чтобы отправить запрос к источнику Служб мультимедиа для сегмента или фрагмента видео или аудио. Не забудьте добавить а запрос заголовок CDN-Origin-Assist-Prefetch-Enabled: 1.
2. В ответе должен быть заголовок CDN-Origin-Assist-Prefetch-Path с относительным путем в качестве значения.

## <a name="november-2019"></a>Ноябрь 2019 г.

### <a name="live-transcription-preview"></a>Динамическое транскрибирование (предварительная версия)

Функция "Динамическое транскрибирование" теперь доступна в качестве предварительной версии в регионе "Западная часть США 2".

Функция "Динамическое транскрибирование" предназначена для работы в сочетании с событиями трансляции в качестве надстройки.  Она поддерживается как для сквозных событий кодирования, так и для событий кодирования в реальном времени уровня "Стандарт" или "Премиум".  Если эта функция включена, служба использует функцию [Преобразование речи в текст](../../cognitive-services/speech-service/speech-to-text.md) служб Cognitive Services для преобразования слов во входящем аудио в текст. Этот текст затем становится доступным для доставки, так же как видео и аудио, в протоколах MPEG-DASH и HLS. Выставление счетов основано на новом дополнительном счетчике, который предоставляется за отдельную плату, помимо трансляции, когда она находится в состоянии "Выполняется".  Дополнительные сведения о динамическом транскрибировании и выставлении счетов см. в статье [Динамическое транскрибирование](live-transcription.md).

> [!NOTE]
> В настоящее время функция "Динамическое транскрибирование" доступна только в предварительной версии в регионе "Западная часть США 2". В настоящее время она поддерживает транскрибирование слов только на английском языке (EN-US).

### <a name="content-protection"></a>Защита содержимого

Функция *Предотвращение воспроизведения маркеров*, выпущенная для ограниченного числа регионов в сентябре, теперь доступна во всех регионах.
Теперь пользователи Служб мультимедиа могут задавать ограничение на количество раз, когда один и тот же маркер может использоваться для запроса ключа или лицензии. Дополнительные сведения см. в разделе [Предотвращение воспроизведения маркеров](content-protection-overview.md#token-replay-prevention).

### <a name="new-recommended-live-encoder-partners"></a>Новые рекомендуемые партнерские динамические кодировщики

Добавлена поддержка следующих новых рекомендуемых партнерских кодировщиков для потоковой трансляции RTMP.

- [Cambria Live 4.3](https://www.capellasystems.net/products/cambria-live/)
- [Экшн-камеры GoPro Hero7/8 и Max](https://gopro.com/help/articles/block/getting-started-with-live-streaming)
- [Restream.io](https://restream.io/)

### <a name="file-encoding-enhancements"></a>Улучшения кодирования файлов

- Теперь доступна новая предустановка кодирования с учетом содержимого. Она создает набор GOP-файлов формата MP4, используя кодировку с учетом содержимого. При наличии любого входного содержимого служба выполняет первоначальный упрощенный анализ входного содержимого. Она использует эти результаты для определения оптимального количества слоев, соответствующей скорости и параметров разрешения для доставки путем адаптивной потоковой передачи. Эта предустановка особенно эффективна для видеороликов с низким уровнем сложности и средним уровнем сложности, где выходные файлы имеют более низкую скорость, но с приемлемым качеством изображения для просмотра. Выходные данные будут содержать файлы MP4 с чередованием видео и аудио. Дополнительные сведения см. в статье, посвященной [спецификациям открытого API](https://github.com/Azure/azure-rest-api-specs/blob/master/specification/mediaservices/resource-manager/Microsoft.Media/stable/2018-07-01/Encoding.json).
- Улучшена производительность и многопоточность для изменения размера в стандартном кодировщике. При определенных условиях клиент должен наблюдать повышение производительности кодирования VOD на 5–40 %. Наибольшее увеличение производительности будет наблюдаться для содержимого с низким уровнем сложности, закодированным для нескольких скоростей. 
- Стандартная кодировка теперь поддерживает обычную частоту GOP для содержимого с переменной частотой кадров (VFR) во время кодирования VOD при использовании параметра GOP на основе времени.  Это означает, что клиенты, которые отправляют смешанное содержимое с частотой кадров, которое может варьироваться в диапазоне от 15-30 кадров/с, теперь должны видеть обычные GOPные расстояния, вычисленные в выходных данных, в потоковую передачу MP4. Это позволяет улучшить возможности беспрепятственного переключения между дорожками при доставке через HLS или DASH. 
-  Улучшенная синхронизация звука и видео для исходного содержимого с переменной частотой кадров (VFR)

### <a name="video-indexer-video-analytics"></a>Индексатор видео, аналитика видео

- Опорные кадры, извлеченные с помощью предустановки VideoAnalyzer, теперь находятся в исходном разрешении видео, а не в измененном размере. При извлечении ключевых кадров с высоким разрешением вы получаете исходные изображения, которые позволяют использовать модели искусственного интеллекта на основе изображений, предоставляемые службами Компьютерное зрение и Пользовательское визуальное распознавание Майкрософт, чтобы получить еще больше ценных сведений из видео.

## <a name="september-2019"></a>Сентябрь 2019 г.

###  <a name="media-services-v3"></a>Службы мультимедиа версии 3  

#### <a name="live-linear-encoding-of-live-events"></a>Динамическое линейное кодирование трансляций

В Службах мультимедиа версии 3 представлена предварительная версия функции круглосуточного и ежедневного линейного кодирования трансляций.

###  <a name="media-services-v2"></a>Службы мультимедиа версии 2  

#### <a name="deprecation-of-media-processors"></a>Устаревшие обработчики мультимедиа

Мы сообщаем о прекращении использования *Azure Media Indexer* и *Azure Media Indexer 2 (предварительная версия)* . Даты выбытия см. в статье  [устаревшие компоненты](../previous/legacy-components.md) . Вместо этих устаревших компонентах теперь используется [индексатор видео Служб мультимедиа Azure](../video-indexer/index.yml).

Дополнительные сведения см. в статье [Переход с Azure Media Indexer и Azure Media Indexer 2 на Индексатор видео Служб мультимедиа Azure](../previous/migrate-indexer-v1-v2.md).

## <a name="august-2019"></a>Август 2019 г.

###  <a name="media-services-v3"></a>Службы мультимедиа версии 3  

#### <a name="south-africa-regional-pair-is-open-for-media-services"></a>Для служб мультимедиа открыта региональная пара в Южной Африке 

Теперь Службы мультимедиа доступны в Северной части ЮАР и Западной части ЮАР.

Дополнительные сведения см. в разделе [Облака и регионы, в которых существуют Службы мультимедиа версии 3](azure-clouds-regions.md).

###  <a name="media-services-v2"></a>Службы мультимедиа версии 2  

#### <a name="deprecation-of-media-processors"></a>Устаревшие обработчики мультимедиа

Мы сообщаем о прекращении использования *Windows Azure Media Encoder* (ВАМЕ) и *кодировщика мультимедиа Azure* (AME). Сведения о датах выбытия см. в этой статье о [устаревших компонентах](../previous/legacy-components.md) .

Дополнительные сведения см. в разделах [Переход с ВАМЕ на стандартный кодировщик Служб мультимедиа](../previous/migrate-windows-azure-media-encoder.md) и [Переход с AME на стандартный кодировщик Служб мультимедиа](../previous/migrate-azure-media-encoder.md).
 
## <a name="july-2019"></a>Июль 2019 г.

### <a name="content-protection"></a>Защита содержимого

Если потоковая передача содержимого защищена с помощью маркера, конечным пользователям необходимо получить маркер, который отправляется в составе запроса на доставку ключа. Функция *Предотвращение воспроизведения маркеров* позволяет клиентам Служб мультимедиа устанавливать ограничения на то, сколько раз один и тот же маркер можно использовать для запроса ключа или лицензии. Дополнительные сведения см. в разделе [Предотвращение воспроизведения маркеров](content-protection-overview.md#token-replay-prevention).

Начиная с июля предварительная версия функции была доступна только в центральной части США и центрально-западной части США.

## <a name="june-2019"></a>Июнь 2019 г.

### <a name="video-subclipping"></a>Создание субклипов из видео

Теперь при кодировании с помощью [задания](/rest/api/media/jobs) можно обрезать видео или создавать из него субклипы. 

Эта функция работает с любыми [преобразованиями](/rest/api/media/transforms), созданными с помощью предустановок [BuiltInStandardEncoderPreset](/rest/api/media/transforms/createorupdate#builtinstandardencoderpreset) или [StandardEncoderPreset](/rest/api/media/transforms/createorupdate#standardencoderpreset). 

См. примеры:

* [Создание субклипа из видео с помощью .NET](subclip-video-dotnet-howto.md)
* [Создание субклипа из видео с помощью REST](subclip-video-rest-howto.md)

## <a name="may-2019"></a>Май 2019 г.

### <a name="azure-monitor-support-for-media-services-diagnostic-logs-and-metrics"></a>Поддержка Azure Monitor для журналов диагностики и метрик в Службах мультимедиа

Теперь можно использовать Azure Monitor для просмотра данных телеметрии, созданных Службами мультимедиа.

* Используйте журналы диагностики Azure Monitor, чтобы отслеживать запросы, отправленные конечной точкой доставки ключей Служб мультимедиа. 
* Отслеживайте метрики, созданные [конечными точками потоковой передачи](streaming-endpoint-concept.md) Служб мультимедиа.   

Дополнительные сведения см. в статье, посвященной [мониторингу метрик и журналов диагностики Служб мультимедиа](monitoring/monitor-media-services-data-reference.md).

### <a name="multi-audio-tracks-support-in-dynamic-packaging"></a>Поддержка нескольких звуковых дорожек в динамической упаковке 

[Динамическая упаковка](dynamic-packaging-overview.md) поддерживает несколько звуковых дорожек вывода HLS (версии 4 или более поздней) для потоковой передачи ресурсов, у которых несколько звуковых дорожек с поддержкой нескольких кодеков и языков.

### <a name="korea-regional-pair-is-open-for-media-services"></a>Для служб мультимедиа открыта региональная пара в Республике Корея 

Службы мультимедиа теперь доступны в центральном и южном регионах Республики Корея. 

Дополнительные сведения см. в разделе [Облака и регионы, в которых существуют Службы мультимедиа версии 3](azure-clouds-regions.md).

### <a name="performance-improvements"></a>Повышение производительности

Добавлены обновления, включающие улучшения производительности Служб мультимедиа.

* Обновлен максимальный размер файла, поддерживаемый для обработки. См. раздел, [квоты и ограничения](limits-quotas-constraints.md).
* [Повышение скорости кодирования](concept-media-reserved-units.md).

## <a name="april-2019"></a>Апрель 2019 г.

### <a name="new-presets"></a>Новые предустановки

* В список предустановок встроенного анализатора добавлена предустановка [FaceDetectorPreset](/rest/api/media/transforms/createorupdate#facedetectorpreset).
* В список предустановок встроенного кодировщика добавлена предустановка [ContentAwareEncodingExperimental](/rest/api/media/transforms/createorupdate#encodernamedpreset). Дополнительные сведения см. в разделе [Кодирование с учетом содержимого](content-aware-encoding.md). 

## <a name="march-2019"></a>Март 2019 г.

Динамическая упаковка теперь поддерживает Dolby Atmos. Дополнительные сведения см. в разделе [Аудиокодеки, поддерживаемые для динамической упаковки](dynamic-packaging-overview.md#audio-codecs-supported-by-dynamic-packaging).

Теперь можно указать список фильтров ресурсов или учетных записей, которые будут применяться к указателю потоковой передачи. Дополнительные сведения см. в разделе [Связывание фильтров с указателем потоковой передачи](filters-concept.md#associating-filters-with-streaming-locator).

## <a name="february-2019"></a>Февраль 2019 г.

Службы мультимедиа версии 3 теперь поддерживаются в национальных облаках Azure. Некоторые возможности пока недоступны во всех облаках. Дополнительные сведения см. в разделе [Облака и регионы, в которых существуют Службы мультимедиа Azure версии 3](azure-clouds-regions.md).

Событие [Microsoft.Media.JobOutputProgress](monitoring/media-services-event-schemas.md#monitoring-job-output-progress) для Служб мультимедиа добавлено в Сетку событий Azure.

## <a name="january-2019"></a>Январь 2019 г.

### <a name="media-encoder-standard-and-mpi-files"></a>Файлы MPI и Media Encoder Standard 

При кодировании с помощью Media Encoder Standard для создания файлов MP4 создается и добавляется в выходной ресурс новый MPI-файл. Этот MPI-файл предназначен для повышения производительности [динамической упаковки](dynamic-packaging-overview.md) и потоковой передачи.

Не следует изменять или удалять MPI-файл, а также ваша служба не должна зависеть от существования (или отсутствия) такого файла.

## <a name="december-2018"></a>Декабрь 2018 г.

Обновления от выпуска общедоступной версии API V3 включают:
       
* Свойства **PresentationTimeRange** больше не имеют значение "required" для **AssetFilters** и **AccountFilters**. 
* Параметры запроса $top и $skip для **заданий** и **преобразований** были удалены, а $orderby добавлен. В рамках добавления новой функциональности упорядочивания было обнаружено, что параметры $top и $skip были случайно выставлены ранее, даже если они не реализованы.
* Расширение перечисления было повторно включено. Эта функция была включена в предыдущих версиях пакета SDK и случайно отключена в общедоступной версии.
* Две стандартные политики потоковой передачи были переименованы. **SecureStreaming** теперь — **MultiDrmCencStreaming**. **SecureStreamingWithFairPlay** — **Predefined_MultiDrmStreaming**.

## <a name="november-2018"></a>Ноябрь 2018 г.

Модуль CLI 2.0 теперь доступен для [Службы мультимедиа Azure, общедоступная версия 3](/cli/azure/ams) — версия 2.0.50.

### <a name="new-commands"></a>Новые команды

- [az ams account](/cli/azure/ams/account)
- [az ams account-filter](/cli/azure/ams/account-filter)
- [az ams asset](/cli/azure/ams/asset)
- [az ams asset-filter](/cli/azure/ams/asset-filter)
- [az ams content-key-policy](/cli/azure/ams/content-key-policy)
- [az ams job](/cli/azure/ams/job)
- [az ams live-event](/cli/azure/ams/live-event)
- [az ams live-output](/cli/azure/ams/live-output)
- [az ams streaming-endpoint](/cli/azure/ams/streaming-endpoint)
- [az ams streaming-locator](/cli/azure/ams/streaming-locator)
- [az ams account mru](/cli/azure/ams/account/mru) позволяет управлять зарезервированными единицами мультимедиа. Дополнительные сведения см. в статье [Масштабирование при обработке мультимедиа](media-reserved-units-cli-how-to.md).

### <a name="new-features-and-breaking-changes"></a>Новые функции и критические изменения

#### <a name="asset-commands"></a>Команды для ресурсов

- Добавлены аргументы ```--storage-account``` и ```--container```.
- Добавлены значения по умолчанию для времени истечения срока действия (23 часа от текущего момента) и разрешений (чтение) в команду ```az ams asset get-sas-url```.

#### <a name="job-commands"></a>Команды для заданий

- Добавлены аргументы ```--correlation-data``` и ```--label```.
- Аргумент ```--output-asset-names``` переименован в ```--output-assets```. Теперь он принимает список ресурсов, разделенных пробелами, в формате assetName=label. Ресурс без метки можно передать следующим образом: assetName=.

#### <a name="streaming-locator-commands"></a>Команды для потокового указателя

- Базовая команда ```az ams streaming locator``` заменена на ```az ams streaming-locator```.
- Добавлены аргументы ```--streaming-locator-id``` и ```--alternative-media-id support```.
- Обновлен аргумент ```--content-keys argument```.
- Аргумент ```--content-policy-name``` переименован в ```--content-key-policy-name```.

#### <a name="streaming-policy-commands"></a>Команды для политики потоковой передачи

- Базовая команда ```az ams streaming policy``` заменена на ```az ams streaming-policy```.
- Добавлена поддержка параметров шифрования в ```az ams streaming-policy create```.

#### <a name="transform-commands"></a>Команды преобразования

- Аргумент ```--preset-names``` заменен на ```--preset```. Теперь можно одновременно задавать только один вывод/набор параметров (для добавления дополнительных нужно запустить команду ```az ams transform output add```). Также можно задать пользовательский параметр StandardEncoderPreset, указав путь к пользовательскому файлу JSON.
- ```az ams transform output remove``` теперь можно выполнять путем передачи выходного индекса для удаления.
- Аргументы ```--relative-priority, --on-error, --audio-language and --insights-to-extract``` добавлены в команды ```az ams transform create``` и ```az ams transform output add```.

## <a name="october-2018---ga"></a>Октябрь 2018 г. Общедоступная версия

В этом разделе описываются октябрьские обновления Служб мультимедиа Azure (AMS).

### <a name="rest-v3-ga-release"></a>Общедоступный выпуск REST версии 3

[Общедоступный выпуск REST версии 3](https://github.com/Azure/azure-rest-api-specs/tree/master/specification/mediaservices/resource-manager/Microsoft.Media/stable/2018-07-01) включает дополнительные API для динамических событий, фильтров манифестов на уровне ресурса и учетной записи и поддержку DRM.

#### <a name="azure-resource-management"></a>API управления ресурсами Azure 

Благодаря поддержке API управления ресурсами Azure доступен унифицированный API управления и операций (теперь все в одном месте).

Начиная с этого выпуска, для создания динамических событий можно использовать шаблоны Resource Manager.

#### <a name="improvement-of-asset-operations"></a>Улучшение операций с ресурсами 

Появились следующие улучшения:

- прием из URL-адреса HTTP или URL-адреса SAS хранилища BLOB-объектов Azure;
- указание собственных имен контейнеров для ресурсов; 
- простая поддержка выходных данных для создания пользовательских рабочих процессов с помощью службы "Функции Azure".

#### <a name="new-transform-object"></a>Новый объект преобразования

Новый объект **Преобразование** упрощает модель кодирования. Новый объект позволяет легко создавать и совместно использовать кодировку шаблонов Resource Manager и предустановок. 

#### <a name="azure-active-directory-authentication-and-azure-rbac"></a>Проверка подлинности Azure Active Directory и Azure RBAC

Аутентификация Azure AD и управление доступом на основе ролей Azure (Azure RBAC) обеспечивают безопасные преобразования, Лививентс, политики ключей содержимого или ресурсы по ролям или пользователям в Azure AD.

#### <a name="client-sdks"></a>Клиентские пакеты SDK  

Языки, поддерживаемые в Службах мультимедиа версии 3: .NET Core, Java, Node.js, Ruby, Typescript, Python, Go.

#### <a name="live-encoding-updates"></a>Обновления кодирования в реальном времени

Представлены следующие обновления кодирования в реальном времени:

- Новый режим с низкой задержкой для трансляции (10 секунд для полного процесса).
- Улучшенная поддержка RTMP (повышенная стабильность и поддержка исходного кодировщика).
- Безопасный прием RTMPS.

    При создании динамических событий вы получите 4 URL-адреса для приема. 4 URL-адреса для приема практически идентичны, они имеют тот же токен потоковой передачи (AppId) с отличной частью номера порта. Два из этих URL-адресов являются первичным и резервным для RTMPS. 
- 24-часовая система поддержки перекодирования. 
- Улучшена поддержка рекламных сигналов в RTMP с помощью SCTE35.

#### <a name="improved-event-grid-support"></a>Улучшенная поддержка Сетки событий

Вы увидите следующие улучшения поддержки Сетки событий:

- Интеграция Сетки событий Azure для упрощения разработки с использованием Logic Apps и Функций Azure. 
- Подписка на события Службы кодирования, динамических каналов и др.

### <a name="cmaf-support"></a>Поддержка CMAF

Поддержка шифрования CMAF и cbcs для Apple HLS (iOS 11 и выше) и проигрывателей MPEG-DASH, поддерживающих CMAF.

### <a name="video-indexer"></a>Индексатор видео

Общедоступный выпуск службы "Индексатор видео" вышел в августе. Новые сведения о поддерживаемых функциях см. в статье [Что такое Индексатор видео?](../video-indexer/video-indexer-overview.md?bc=/azure/media-services/video-indexer/breadcrumb/toc.json&toc=/azure/media-services/video-indexer/toc.json) 

### <a name="plans-for-changes"></a>Планы по изменениям.

#### <a name="azure-cli-20"></a>Azure CLI 2.0
 
Модуль Azure CLI 2.0, который включает в себя операции со всеми функциями (включая динамические события, политики ключа содержимого, фильтры учетной записи и ресурсов, политики потоковой передачи), ожидается в ближайшее время. 

### <a name="known-issues"></a>Известные проблемы

Эта проблема повлияет только на пользователей, которые используют API предварительной версии для фильтров ресурса или учетной записи.

Если вы создали фильтры учетных записей или ресурсов в период с 28.09 по 12.10 с помощью CLI или API для Служб мультимедиа версии 3, необходимо удалить все эти фильтры и повторно создать их из-за конфликта версий. 

## <a name="may-2018---preview"></a>Май 2018 г. Предварительная версия

### <a name="net-sdk"></a>Пакет SDK для .NET

Пакет SDK для .NET предоставляет следующие возможности:

* **Преобразования** и **задания**, позволяющие кодировать или анализировать мультимедийное содержимое. Примеры см. в руководстве по [потоковой передаче](stream-files-tutorial-with-api.md) и [анализе видео](analyze-videos-tutorial-with-api.md).
* **Указатели потоковой передачи**, отвечающие за публикацию и потоковую передачу содержимого на устройства пользователей.
* **Политики потоковой передачи** и **ключа содержимого**, отвечающие за настройку доставки ключей и защиту содержимого (DRM) при его доставке.
* **Динамические события** и **динамические выходные данные**, отвечающие за прием и потоковую трансляцию содержимого.
* **Ресурсы**, отвечающие за хранение и публикацию содержимого в службу хранилища Azure. 
* **Конечные точки потоковой передачи**, позволяющие настраивать и масштабировать динамическую упаковку, шифрование и потоковую передачу мультимедийного содержимого в реальном времени и по запросу.

### <a name="known-issues"></a>Известные проблемы

* При отправке задания можно указать исходное видео для приема, используя URL-адреса HTTPS, URL-адреса SAS или пути к файлам, находящимся в хранилище BLOB-объектов Azure. В настоящее время службы мультимедиа v3 не поддерживают блочную кодировку для URL-адресов HTTPS.

## <a name="ask-questions-give-feedback-get-updates"></a>Получение справки, отправка отзывов, получение обновлений

Прочитайте статью [сообщества Служб мультимедиа Azure](media-services-community.md), чтобы узнать, как задавать вопросы, оставлять отзывы и получать новости о Службах мультимедиа.

## <a name="see-also"></a>См. также раздел

[Руководство по миграции для перехода с служб мультимедиа версии 2 на v3](migrate-v-2-v-3-migration-introduction.md).

## <a name="next-steps"></a>Дальнейшие действия

- [Обзор](media-services-overview.md)
- [Заметки о выпуске Служб мультимедиа Azure версии 2](../previous/media-services-release-notes.md)
