---
title: Перенесите собственный ключ (управляемые пользователем ключи)
description: Вы можете использовать управляемый клиентом ключ (т. е. свой собственный ключ) со службами мультимедиа.
author: IngridAtMicrosoft
ms.author: inhenkel
ms.service: media-services
ms.topic: conceptual
ms.date: 1/28/2020
ms.openlocfilehash: 27d357279a54d7abc351370e7afda3a7961bac33
ms.sourcegitcommit: eb546f78c31dfa65937b3a1be134fb5f153447d6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/02/2021
ms.locfileid: "99428560"
---
# <a name="bring-your-own-key-customer-managed-keys-with-media-services"></a>Перенесите собственный ключ (ключи, управляемые клиентом) с помощью служб мультимедиа

[!INCLUDE [media services api v3 logo](./includes/v3-hr.md)]

Создание собственных ключей (BYOK) — это инициатива Azure, которая помогает клиентам переместить свои рабочие нагрузки в облако. Управляемые клиентами ключи позволяют клиентам соблюдать нормативные требования к отраслевым стандартам и улучшать изоляцию службы. Предоставление клиентам возможности управления ключами шифрования — это способ уменьшить ненужные права доступа и контроля и создать уверенность в службах Майкрософт.

## <a name="keys-and-key-management"></a>Ключи и управление ключами

Вы можете использовать собственный ключ со службами мультимедиа при использовании API служб мультимедиа 2020-05-01. Ключ учетной записи по умолчанию создается для всех учетных записей, зашифрованных системным ключом, принадлежащим службам мультимедиа. При использовании собственного ключа ключ учетной записи шифруется с помощью ключа. Ключи содержимого шифруются ключом учетной записи. Жобинпусттп URL-адреса и ключи проверки симметричных маркеров также шифруются.

:::image type="content" source="./media/customer-managed-key/customer-managed-key.svg" alt-text="Ключ, управляемый клиентом, заменяет управляемый системой ключ.":::

Службы мультимедиа используют управляемое удостоверение учетной записи служб мультимедиа для чтения ключа из Key Vault, принадлежащего вам. Для служб мультимедиа необходимо, чтобы Key Vault находится в том же регионе, что и учетная запись, а также была включена защита от обратимого удаления и очистки.

Ключ может иметь ключ RSA 2048, 3072 или 4096, и поддерживаются ключи HSM и Software.

> [!NOTE]
> Ключи EC не поддерживаются.

Можно указать имя ключа и версию ключа или только имя ключа. При использовании только имени ключа службы мультимедиа будут использовать последнюю версию ключа. Автоматически обнаруживаются новые версии клиентских ключей, и ключ учетной записи повторно шифруется.

> [!WARNING]
> Службы мультимедиа отслеживают доступ к клиентскому ключу. Если ключ клиента становится недоступным (например, он был удален или Key Vault был удален или доступ был удален), службы мультимедиа будут переносить учетную запись в недоступное состояние ключа клиента (эффективно отключая учетную запись). Тем не менее учетную запись можно удалить в этом состоянии. Поддерживаются только операции GET, LIST и DELETE учетной записи. все остальные запросы (кодирование, потоковая передача и т. д.) завершатся ошибкой, пока не будет восстановлен доступ к ключу учетной записи.

## <a name="double-encryption"></a>Двойное шифрование

Службы мультимедиа автоматически поддерживают двойное шифрование. Для неактивных данных первый уровень шифрования использует управляемый клиентом ключ или ключ, управляемый Майкрософт, в зависимости от `AccountEncryption` настройки учетной записи.  Второй уровень шифрования неактивных данных предоставляется автоматически с помощью отдельного управляемого ключа Майкрософт. Дополнительные сведения о двойном шифровании см. в статье [двойное шифрование Azure](../../security/fundamentals/double-encryption.md).

> [!NOTE]
> Двойное шифрование включается автоматически для учетной записи служб мультимедиа. Однако необходимо отдельно настроить ключ, управляемый клиентом, и двойное шифрование в вашей учетной записи хранения. См. раздел [стореже Encryption](https://docs.microsoft.com/azure/storage/common/storage-service-encryption).

## <a name="tutorials"></a>Учебники

- [Использование портала Azure для использования ключей, управляемых клиентом, или BYOK для Служб мультимедиа](tutorial-byok-portal.md)
- [Используйте управляемые клиентом ключи или BYOK с помощью служб мультимедиа REST API](tutorial-byok-postman.md).

## <a name="next-steps"></a>Дальнейшие действия

[Защита содержимого с помощью динамического шифрования служб мультимедиа](content-protection-overview.md)
