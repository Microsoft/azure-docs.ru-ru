---
title: Политики ключей содержимого в службах мультимедиа — Azure
description: В этой статье приведены общие сведения о политиках ключей содержимого и их использовании в Службах мультимедиа Azure.
services: media-services
documentationcenter: ''
author: IngridAtMicrosoft
manager: femila
editor: ''
ms.service: media-services
ms.workload: ''
ms.topic: conceptual
ms.date: 08/31/2020
ms.author: inhenkel
ms.custom: seodec18
ms.openlocfilehash: 29907a12f7edf7439f9bcfae0a1ad46b395d9ecf
ms.sourcegitcommit: 100390fefd8f1c48173c51b71650c8ca1b26f711
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/27/2021
ms.locfileid: "98897213"
---
# <a name="content-key-policies"></a>Политики ключа содержимого

[!INCLUDE [media services api v3 logo](./includes/v3-hr.md)]

а также доставлять в режиме реального времени и по требованию содержимое, зашифрованное динамически с помощью Advanced Encryption Standard (AES-128) или трех основных систем управления цифровыми правами (DRM): Microsoft PlayReady, Google Widevine и Apple FairPlay. Они также обеспечивают службу доставки ключей AES и лицензий DRM (PlayReady, Widevine и FairPlay) авторизованным клиентам. 

Чтобы указать параметры шифрования для потока, необходимо создать [политику потоковой передачи](streaming-policy-concept.md) и связать ее с [указателем потоковой передачи](streaming-locators-concept.md). Создайте [политику ключа содержимого](/rest/api/media/contentkeypolicies) , чтобы настроить способ доставки ключа содержимого (который обеспечивает безопасный доступ к вашим [ресурсам](assets-concept.md)) конечным клиентам. Необходимо задать требования (ограничения) для политики ключа содержимого, которые должны быть выполнены, чтобы ключи с указанной конфигурацией доставлялись клиентам. Политика ключа содержимого не требуется при незащищенной потоковой передаче или скачивании. 

Как правило, политика ключа содержимого связывается с [указателем потоковой передачи](streaming-locators-concept.md). Кроме того, можно указать политику ключа содержимого в [политике потоковой передачи](streaming-policy-concept.md) (при создании настраиваемой политики потоковой передачи для расширенных сценариев). 

## <a name="best-practices-and-considerations"></a>Лучшие методики и рекомендации

> [!IMPORTANT]
> Ознакомьтесь со следующими рекомендациями.

* Необходимо спроектировать ограниченный набор политик для учетной записи службы мультимедиа и повторно использовать их для указателей потоковой передачи при необходимости использования одних и тех же параметров. Дополнительные сведения см. в разделе [квоты и ограничения](limits-quotas-constraints.md).
* Политики ключей содержимого являются обновляемыми. Чтобы кэши доставки ключей обновлялись и получали обновленную политику, может потребоваться до 15 минут. 

   Обновление политики приведет к перезаписи существующего кэша CDN, что может вызвать проблемы с воспроизведением для клиентов, использующих кэшированное содержимое.  
* Не рекомендуется создавать новую политику ключей содержимого для каждого ресурса. Основные преимущества совместного использования одной и той же политики ключей содержимого для ресурсов, которым требуются те же параметры политики:
   
   * Проще управлять небольшим количеством политик.
   * Если необходимо внести обновления в политику ключей содержимого, изменения вступают в действие на всех новых запросах лицензий практически сразу же.
* Если необходимо создать новую политику, необходимо создать новый указатель потоковой передачи для ресурса.
* Рекомендуется разрешить службам мультимедиа автоматически создавать ключ содержимого. 

   Обычно используется длительный ключ и проверяется наличие политики ключа содержимого с помощью [Get](/rest/api/media/contentkeypolicies/get). Чтобы получить ключ, необходимо вызвать отдельный метод действий для получения секретов или учетных данных. Это показано в примере ниже.

## <a name="example"></a>Пример

Чтобы получить ключ, используйте `GetPolicyPropertiesWithSecretsAsync` , как показано в примере [получить ключ подписывания из существующей политики](get-content-key-policy-dotnet-howto.md#get-contentkeypolicy-with-secrets) .

## <a name="filtering-ordering-paging"></a>Фильтрации, упорядочивание, разбиение по страницам

Ознакомьтесь с разделом [Фильтрация, упорядочивание и разбиение по страницам сущностей Служб мультимедиа](entities-overview.md).

## <a name="additional-notes"></a>Дополнительные замечания

* Свойства политик ключей содержимого, имеющие `Datetime` тип, всегда имеют формат UTC.
* Widevine — это служба, которая предоставляется компанией Google Inc. и подпадает под условия предоставления услуг и политику конфиденциальности Google Inc.

## <a name="next-steps"></a>Дальнейшие действия

* [Использование динамического шифрования AES-128 и службы доставки ключей](protect-with-aes128.md)
* [Использование динамического шифрования DRM и службы доставки лицензий](protect-with-drm.md)
* [EncodeHTTPAndPublishAESEncrypted](https://github.com/Azure-Samples/media-services-v3-dotnet-core-tutorials/tree/master/NETCore/EncodeHTTPAndPublishAESEncrypted)
