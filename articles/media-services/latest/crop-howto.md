---
title: Как обрезать видеофайлы с помощью служб мультимедиа .NET | Документация Майкрософт
description: Обрезка заключается в выборе прямоугольного окна в пределах видеокадра и кодировании в нем пикселей. В этом разделе показано, как обрезать видеофайлы с помощью служб мультимедиа, использующих .NET.
services: media-services
author: IngridAtMicrosoft
manager: femila
ms.service: media-services
ms.topic: how-to
ms.date: 03/24/2021
ms.author: inhenkel
ms.openlocfilehash: 43d0e1e3b8c0eaa37a3b09557b333c3abafe8b63
ms.sourcegitcommit: f0a3ee8ff77ee89f83b69bc30cb87caa80f1e724
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/26/2021
ms.locfileid: "105572440"
---
# <a name="how-to-crop-video-files-with-media-services---net"></a>Как обрезать видеофайлы с помощью служб мультимедиа — .NET

[!INCLUDE [media services api v3 logo](./includes/v3-hr.md)]

Для обрезки входного видео можно использовать службы мультимедиа. Обрезка заключается в выборе прямоугольного окна в пределах видеокадра и кодировании в нем пикселей. Этот процесс продемонстрирован на схеме ниже.

## <a name="pre-processing-stage"></a>Этап предварительной обработки

Обрезка — это этап предварительной обработки, поэтому *Параметры кадрирования* в предустановок кодирования применяются к *входному* видео. Кодирование — это последующая стадия. Параметры ширины и высоты применяются к *предварительно обработанному* видео, а не к исходному. При проектировании предустановки выполните следующие действия.

1. Выбор параметров кадрирования на основе исходного видео
1. Выберите параметры кодирования на основе обрезанного видео.

> [!WARNING]
> Если параметры кодирования не сопоставлены с обрезанным видео, выходное видео не будет выглядеть должным образом.

Например, Ваше входное видео имеет разрешение 1920 x 1080 пикселей (пропорции 16:9), но имеет черные полосы (опорные поля) слева и справа, поэтому только окно 4:3 или 1440 x 1080 Пиксели содержат активное видео. Можно обрезать черные полосы и закодировать область 1440 x 1080.

## <a name="transform-code"></a>Код преобразования

В следующем фрагменте кода показано, как написать преобразование в .NET для кадрирования видео.  В коде предполагается, что у вас есть локальный файл для работы.

- Left — самое левое расположение кадрирования.
- Top — самое верхнее расположение кадрирования.
- Width — конечная ширина кадрирования.
- Высота — это конечная высота кадрирования.

```dotnet
var preset = new StandardEncoderPreset

    {

        Filters = new Filters

        {                   

            Crop = new Rectangle

            {

                Left = "200",

                Top = "200",

                Width = "1280",

                Height = "720"

            }

        },

        Codecs =

        {

            new AacAudio(),

            new H264Video()

            {

                Layers =

                {                           

                    new H264Layer

                    {

                        Bitrate = 1000000,

                        Width = "1280",

                        Height = "720"

                    }

                }

            }

        },

        Formats =

        {

            new Mp4Format

            {

                FilenamePattern = "{Basename}_{Bitrate}{Extension}"

            }

        }

    }

```
