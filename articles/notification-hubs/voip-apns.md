---
title: Отправка уведомлений VOIP по протоколу APNS с помощью концентраторов уведомлений Azure
description: Узнайте, как отправлять уведомления о протоколе APNS в центрах уведомлений Azure (не поддерживается официально).
author: sethmanheim
ms.author: sethm
ms.date: 3/23/2020
ms.topic: how-to
ms.service: notification-hubs
ms.openlocfilehash: c99af881b8f93b75633741c2352dc5df17dd2963
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "80146892"
---
# <a name="use-apns-voip-through-notification-hubs-not-officially-supported"></a>Использование APNS VOIP через центры уведомлений (не поддерживается официально)

С помощью центров уведомлений Azure можно использовать уведомления по протоколу APNS. Однако официальная поддержка этого сценария отсутствует.

## <a name="considerations"></a>Рекомендации

Если вы по-прежнему решили отправлять уведомления о передаче данных APNS через концентраторы уведомлений, учитывайте следующие ограничения.

- Для отправки уведомлений VOIP в качестве `apns-topic` заголовка необходимо задать идентификатор набора приложений + `.voip` суффикс. Например, для примера приложения с ИДЕНТИФИКАТОРом пакета `com.microsoft.nhubsample` `apns-topic` необходимо задать для заголовка значение. `com.microsoft.nhubsample.voip.`

   Этот метод не работает с центрами уведомлений Azure, так как идентификатор пакета приложения должен быть настроен как часть учетных данных APNS концентратора, и его значение нельзя изменить. Кроме того, центры уведомлений не позволяют `apns-topic` переопределять значение заголовка во время выполнения.

   Чтобы отправлять уведомления VOIP, необходимо настроить отдельный концентратор уведомлений с `.voip` идентификатором набора приложений.

- Для отправки уведомлений VOIP в качестве `apns-push-type` заголовка необходимо задать значение `voip` .

   Чтобы помочь клиентам переходить на iOS 13, концентраторы уведомлений пытаются определить правильное значение для `apns-push-type` заголовка. Логика вывода намеренно проста, что позволяет избежать нарушения стандартных уведомлений. К сожалению, этот метод вызывает проблемы с уведомлениями VOIP, так как компания Apple рассматривает уведомления VOIP как особый случай, который не соответствует тем же правилам, что и стандартные уведомления.

   Для отправки уведомлений VOIP необходимо указать явное значение для `apns-push-type` заголовка.

- Центры уведомлений ограничивают полезные данные APNS до 4 КБ, как описано в Apple. Для уведомлений VOIP компания Apple предоставляет полезные данные размером до 5 КБ. Центры уведомлений не различаются между стандартными и уведомлениями VOIP; Таким образом, все уведомления ограничены 4 КБ.

   Для отправки уведомлений VOIP не следует превысить ограничение на размер полезных данных размером 4 КБ.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. по следующим ссылкам:

- [Документация по `apns-topic` `apns-push-type` заголовкам и значениям, включая особые случаи для уведомлений VoIP](https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/sending_notification_requests_to_apns).

- [Документация по ограничению размера полезных данных](https://developer.apple.com/documentation/usernotifications/setting_up_a_remote_notification_server/generating_a_remote_notification).

- [Обновления концентраторов уведомлений для iOS 13](push-notification-updates-ios-13.md#apns-push-type).
