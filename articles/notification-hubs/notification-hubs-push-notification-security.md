---
title: Безопасность
description: Сведения о модели безопасности для центров уведомлений Azure.
services: notification-hubs
documentationcenter: .net
author: sethmanheim
manager: femila
editor: jwargo
ms.assetid: ''
ms.service: notification-hubs
ms.workload: mobile
ms.tgt_pltfrm: mobile-multiple
ms.devlang: multiple
ms.topic: article
ms.date: 09/23/2019
ms.author: sethm
ms.reviewer: thsomasu
ms.lastreviewed: 09/23/2019
ms.openlocfilehash: 07600b1fe0cb7420989fbbfbe55c2f1a4197d2fc
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "100548256"
---
# <a name="notification-hubs-security"></a>Безопасность концентраторов уведомлений

## <a name="overview"></a>Обзор

В этой статье описывается модель безопасности Центров уведомлений Azure.

## <a name="shared-access-signature-security"></a>Безопасность подписи общего доступа

Центры уведомлений реализуют схему безопасности на уровне сущностей, называемую *подписанным* URL-адресом (SAS). Каждое правило содержит имя, значение ключа (общий секрет) и набор прав, как описано далее в [заявках безопасности](#security-claims). 

При создании концентратора автоматически создаются два правила: одно с правами **прослушивания** (которое используется клиентским приложением) и одно со **всеми** правами (которое используется серверной частью приложения):

- **DefaultListenSharedAccessSignature**: предоставляет только разрешение на **прослушивание** .
- **DefaultFullSharedAccessSignature**: предоставляет разрешения на **прослушивание**, **Управление** и **отправку** . Эта политика должна использоваться только в серверной части приложения. Не используйте его в клиентских приложениях; Используйте политику с доступом только для **прослушивания** . Сведения о создании новой настраиваемой политики доступа с помощью нового маркера SAS см. в разделе [токены SAS для политик доступа](#sas-tokens-for-access-policies) далее в этой статье.

При управлении регистрациями из клиентских приложений, если данные, отправляемые посредством уведомлений, не являются конфиденциальными (например, новости погоды), то обычный способ доступа к Центру уведомлений состоит в передаче значения ключа для правила "Доступ только для прослушивания" в клиентское приложение, а также передаче значения ключа для правила "Полный доступ" в серверную часть приложения.

Приложения не должны внедрять значение ключа в клиентские приложения Магазина Windows; Вместо этого повлеките клиентское приложение из серверной части приложения при запуске.

Ключ с доступом на **прослушивание** позволяет клиентскому приложению регистрироваться для любого тега. Если приложение должно ограничить регистрацию определенными тегами для конкретных клиентов (например, если теги представляют идентификаторы пользователей), серверная часть приложения должна выполнить регистрацию. Дополнительные сведения см. в разделе [Управление регистрацией](notification-hubs-push-notification-registration-management.md). в статье "Управление регистрациями" Обратите внимание, что в этом случае клиентское приложение не имеет прямого доступа к Центрам уведомлений.

## <a name="security-claims"></a>Утверждения безопасности

Аналогично другим сущностям, операции центра уведомлений разрешены для трех утверждений безопасности: **прослушивание**, **отправку** и **Управление**.

| Утверждение   | Описание                                          | Разрешенные операции |
| ------- | ---------------------------------------------------- | ------------------ |
| Прослушивание  | Создание, обновление, чтение и удаление отдельных регистраций | Создание и обновление регистрации<br><br>Чтение регистрации<br><br>Чтение всех регистраций для обработки<br><br>Регистрация удаления |
| Отправить    | Отправка сообщений в центр уведомлений                | Отправить сообщение |
| Управление  | Операции CRUD в Центрах уведомлений (включая обновление учетных данных PNS и ключей безопасности) и чтение регистраций на основе тегов |Создание, обновление, чтение и удаление концентраторов<br><br>Чтение регистраций по тегу |

Центры уведомлений принимают маркеры SAS, созданные с помощью общих ключей, настроенных непосредственно в концентраторе.

Нельзя отправить уведомление более чем одному пространству имен. Пространства имен — это логические контейнеры для концентраторов уведомлений, которые не участвуют в отправке уведомлений.

Используйте политики доступа на уровне пространства имен (учетные данные) для операций уровня пространства имен. Например: перечисление концентраторов, создание или удаление концентраторов и т. д. Только политики доступа на уровне концентратора позволяют отправлять уведомления.

### <a name="sas-tokens-for-access-policies"></a>Маркеры SAS для политик доступа

Чтобы создать новое утверждение безопасности или просмотреть существующие ключи SAS, выполните следующие действия.

1. Войдите на портал Azure.
2. Щелкните **Все ресурсы**.
3. Выберите имя центра уведомлений, для которого требуется создать утверждение, или просмотрите ключ SAS.
4. В меню слева выберите **политики доступа**.
5. Выберите **создать политику** , чтобы создать новое утверждение безопасности. Присвойте политике имя и выберите разрешения, которые вы хотите предоставить. Нажмите кнопку **ОК**.
6. В окне политики доступа отобразится полная строка подключения (включая новый ключ SAS). Эту строку можно скопировать в буфер обмена для последующего использования.

Чтобы извлечь ключ SAS из определенной политики, нажмите кнопку **копирования** рядом с политикой, содержащей необходимый ключ SAS. Вставьте это значение во временное расположение, а затем скопируйте часть ключа SAS из строки подключения. В этом примере используется пространство имен концентраторов уведомлений с именем **mytestnamespace1** и политика с именем **policy2**. Ключ SAS — это значение около конца строки, заданное параметром **SharedAccessKey**:

```shell
Endpoint=sb://mytestnamespace1.servicebus.windows.net/;SharedAccessKeyName=policy2;SharedAccessKey=<SAS key value here>
```

![Получение ключей SAS](media/notification-hubs-push-notification-security/access1.png)

## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о концентраторах уведомлений](notification-hubs-push-notification-overview.md)
