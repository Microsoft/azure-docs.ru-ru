---
title: Модель данных для событий диагностики Azure Backup
description: Эта модель данных является ссылкой на режим, относящийся к ресурсу, для отправки диагностических событий в Log Analytics (LA).
ms.topic: conceptual
ms.date: 10/30/2019
ms.openlocfilehash: 0d75af6d2b41aad0b5f821dd1f6409b30f7ca531
ms.sourcegitcommit: 15d27661c1c03bf84d3974a675c7bd11a0e086e6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2021
ms.locfileid: "102499600"
---
# <a name="data-model-for-azure-backup-diagnostics-events"></a>Модель данных для событий диагностики Azure Backup

> [!NOTE]
>
> Для создания пользовательских представлений отчетов рекомендуется использовать [системные функции в журналах Azure Monitor](backup-reports-system-functions.md) вместо работы с необработанными таблицами, перечисленными ниже.

## <a name="coreazurebackup"></a>кореазуребаккуп

Эта таблица содержит сведения о базовых сущностях резервного копирования, таких как хранилища и элементы резервного копирования.

| **Поле**                         | **Тип данных** | **Описание**                                              |
| --------------------------------- | ------------- | ------------------------------------------------------------ |
| ResourceId                        | текст          | Идентификатор ресурса для собираемых данных. Например, идентификатор ресурса хранилища служб восстановления. |
| OperationName                     | текст          | Это поле представляет имя текущей операции — Баккупитем, БаккупитемассоЦиатион или Протектедконтаинер. |
| Категория                          | текст          | Это поле представляет категорию диагностических данных, отправленных в журналы Azure Monitor. Например, Кореазуребаккуп. |
| AgentVersion                      | текст          | Номер версии агента резервного копирования или агента защиты (в случае с SC DPM и MABS) |
| AzureBackupAgentVersion           | текст          | Версия агента Azure Backup на сервере управления резервным копированием |
| AzureDataCenter                   | текст          | Центр обработки данных, в котором расположено хранилище                       |
| баккупитемаппверсион              | текст          | Версия приложения для элемента резервного копирования                       |
| BackupItemFriendlyName            | текст          | Понятное имя элемента архивации                             |
| BackupItemName                    | текст          | Имя элемента резервного копирования                                      |
| баккупитемпротектионстате         | текст          | Состояние защиты элемента резервного копирования                          |
| баккупитемфронтендсизе            | текст          | Внешний размер элемента резервного копирования                            |
| BackupItemType                    | текст          | Тип элемента резервного копирования. Например: VM, FileFolder             |
| баккупитемуникуеид                | текст          | Уникальный идентификатор архивируемого элемента                         |
| баккупманажементсервертипе        | текст          | Тип сервера управления архивацией, как в MABS, SC DPM     |
| баккупманажементсерверуникуеид    | текст          | Поле для уникальной идентификации сервера управления резервным копированием      |
| BackupManagementType              | текст          | Тип поставщика для сервера, выполняющего задание резервного копирования. Например, IaaSVM, FileFolder |
| баккупманажементсервернаме        | текст          | Имя сервера управления резервным копированием                         |
| баккупманажементсерверосверсион   | текст          | Версия ОС для сервера управления резервным копированием                   |
| баккупманажементсерверверсион     | текст          | Версия сервера управления резервным копированием                      |
| латестрековерипоинтлокатион       | текст          | Расположение самой новой точки восстановления для элемента резервного копирования    |
| латестрековерипоинттиме           | Дата и время      | Дата и время самой новой точки восстановления для элемента резервного копирования   |
| олдестрековерипоинтлокатион       | текст          | Расположение самой старой точки восстановления для элемента резервного копирования    |
| олдестрековерипоинттиме           | Дата и время      | Дата и время самой новой точки восстановления для элемента резервного копирования   |
| PolicyUniqueId                    | текст          | Уникальный идентификатор для политики                             |
| протектедконтаинерфриендлинаме    | текст          | Понятное имя защищенного сервера                        |
| протектедконтаинерлокатион        | текст          | Находится ли защищенный контейнер в локальной среде или в Azure |
| протектедконтаинернаме            | текст          | Имя защищенного контейнера                            |
| протектедконтаинеростипе          | текст          | Тип ОС защищенного контейнера                          |
| протектедконтаинеросверсион       | текст          | Версия ОС защищенного контейнера                        |
| протектедконтаинерпротектионстате | текст          | Состояние защиты для защищенного контейнера                  |
| протектедконтаинертипе            | текст          | Указывает, является ли защищенный контейнер сервером или контейнером  |
| протектедконтаинеруникуеид        | текст          | Уникальный идентификатор, используемый для идентификации защищенного контейнера для всего, кроме виртуальных машин, резервное копирование которых осуществлялось с помощью DPM, MABS |
| протектедконтаинерворклоадтипе    | текст          | Тип защищенного контейнера, резервная копия которого была создана. Например, IaaSVMContainer |
| ProtectionGroupName               | текст          | Имя группы защиты, в которой защищен элемент резервного копирования, для SC DPM и MABS, если применимо |
| ResourceGroupName                 | текст          | Группа ресурсов ресурса (например, хранилище служб восстановления) для собираемых данных |
| schemaVersion                     | текст          | Это поле обозначает текущую версию схемы. Это **Версия 2** |
| секондарибаккуппротектионстате    | текст          | Включена ли дополнительная защита для элемента резервного копирования  |
| Состояние                             | текст          | Состояние объекта резервного элемента. Например, "Активный" или "Удален" |
| StorageReplicationType            | текст          | Тип репликации хранилища для хранилища. Например, геоизбыточность |
| SubscriptionId                    | текст          | Идентификатор подписки ресурса (например, хранилище служб восстановления), для которого собираются данные |
| Vaultname                         | текст          | Имя хранилища                                            |
| VaultTags                         | текст          | Теги, связанные с ресурсом хранилища                    |
| ваултуникуеид                     | текст          | Уникальный идентификатор хранилища                             |
| SourceSystem                      | текст          | Исходная система текущих данных — Azure                  |

## <a name="addonazurebackupalerts"></a>AddonAzureBackupAlerts

Эта таблица содержит сведения о полях, связанных с предупреждением.

| **Поле**                      | **Тип данных** | **Описание**                                              |
| :----------------------------- | ------------- | ------------------------------------------------------------ |
| ResourceId                     | текст          | Уникальный идентификатор для ресурса, по которому собираются данные. Например, идентификатор ресурса хранилища служб восстановления |
| OperationName                  | текст          | Имя текущей операции. Например, Alert            |
| Категория                       | текст          | Категория диагностических данных, отправленных в журналы Azure Monitor — Аддоназуребаккупалертс |
| алерткоде                      | текст          | Код для уникальной идентификации типа оповещения                     |
| алертконсолидатионстатус       | текст          | Определяет, является ли оповещение консолидированным         |
| алертоккурренцедатетиме        | Дата и время      | Дата и время создания оповещения                     |
| алертраиседон                  | текст          | Тип сущности, для которой выдается оповещение                        |
| AlertSeverity                  | текст          | Серьезность оповещения. Например, критические                 |
| AlertStatus                    | текст          | Состояние предупреждения. Например, Active                     |
| алерттиметоресолвеинминутес    | Number        | Время, затраченное на разрешение оповещения. Пустое значение для активных оповещений     |
| AlertType                      | текст          | Тип оповещения. Например, Backup                           |
| AlertUniqueId                  | текст          | Уникальный идентификатор созданного предупреждения                    |
| баккупитемуникуеид             | текст          | Уникальный идентификатор элемента резервной копии, связанного с предупреждением |
| баккупманажементсерверуникуеид | текст          | Поле для уникальной идентификации сервера управления архивацией, с которым защищен элемент резервного копирования, если применимо |
| BackupManagementType           | текст          | Тип поставщика для сервера, выполняющего задание резервного копирования, например IaaSVM, FileFolder |
| каунтофалертсконсолидатед      | Число        | Число консолидированных предупреждений, если это консолидированное оповещение  |
| протектедконтаинеруникуеид     | текст          | Уникальный идентификатор защищенного сервера, связанного с предупреждением |
| RecommendedAction              | текст          | Рекомендованное действие для разрешения оповещения                      |
| schemaVersion                  | текст          | Текущая версия схемы, например **V2**            |
| Состояние                          | текст          | Текущее состояние объекта предупреждения, например "Активный" или "Удален" |
| сторажеуникуеид                | текст          | Уникальный идентификатор для сущности хранилища                |
| ваултуникуеид                  | текст          | Уникальный идентификатор, используемый для идентификации хранилища, связанного с предупреждением    |
| SourceSystem                   | текст          | Исходная система текущих данных (Azure)                    |

## <a name="addonazurebackupprotectedinstance"></a>AddonAzureBackupProtectedInstance

Эта таблица содержит основные поля, связанные с защищенными экземплярами.

| **Поле**                      | **Тип данных** | **Описание**                                              |
| ------------------------------ | ------------- | ------------------------------------------------------------ |
| ResourceId                     | текст          | Уникальный идентификатор ресурса, по которому собираются данные. Например, идентификатор ресурса для хранилища Служб восстановления |
| OperationName                  | текст          | Имя операции, например Протектединстанце         |
| Категория                       | текст          | Категория диагностических данных, отправленных в журналы Azure Monitor — Аддоназуребаккуппротектединстанце |
| баккупитемуникуеид             | текст          | Уникальный идентификатор элемента резервного копирования                                 |
| баккупманажементсерверуникуеид | текст          | Поле для уникальной идентификации сервера управления архивацией, с которым защищен элемент резервного копирования, если применимо |
| BackupManagementType           | текст          | Тип поставщика для сервера, выполняющего задание резервного копирования, например IaaSVM, FileFolder |
| протектедконтаинеруникуеид     | текст          | Уникальный идентификатор для идентификации защищенного контейнера, на котором выполняется задание |
| протектединстанцекаунт         | текст          | Число защищенных экземпляров для связанного элемента резервного копирования или защищенного контейнера в этот момент времени |
| schemaVersion                  | текст          | Текущая версия схемы, например **V2**            |
| Состояние                          | текст          | Состояние объекта резервного элемента, например "активный", "удален" |
| ваултуникуеид                  | текст          | Уникальный идентификатор защищенного хранилища, связанного с защищенным экземпляром |
| SourceSystem                   | текст          | Исходная система текущих данных (Azure)                    |

## <a name="addonazurebackupjobs"></a>AddonAzureBackupJobs

Эта таблица содержит сведения о полях, связанных с заданием.

| **Поле**                      | **Тип данных** | **Описание**                                              |
| ------------------------------ | ------------- | ------------------------------------------------------------ |
| ResourceId                     | текст          | Идентификатор ресурса для собираемых данных. Например, идентификатор ресурса хранилища Служб восстановления |
| OperationName                  | текст          | Имя текущей операции (Job)    |
| Категория                       | текст          | Это поле представляет категорию диагностических данных, отправленных в Azure Monitor журналы — Аддоназуребаккупжобс |
| адхокорсчедуледжоб            | текст          | Поле, определяющее, является ли задание специализированным или запланированным           |
| баккупитемуникуеид             | текст          | Уникальный идентификатор для элемента резервного копирования, связанного с сущностью хранилища |
| баккупманажементсерверуникуеид | текст          | Уникальный идентификатор для сервера управления резервным копированием, связанного с сущностью хранилища |
| BackupManagementType           | текст          | Тип поставщика для выполнения архивации, например IaaSVM, FileFolder, к которому относится это задание |
| дататрансферрединмб            | Number        | Переданные данные (в МБ) для этого задания                          |
| жобдуратионинсекс              | Number        | Общая длительность задания в секундах                                |
| JobFailureCode                 | текст          | Строка кода ошибки, из-за которой произошел сбой задания    |
| JobOperation                   | текст          | Операция, для которой выполняется задание, например резервное копирование, восстановление, Настройка резервного копирования |
| жобоператионсубтипе            | текст          | Подтип операции задания. Например, "log", в случае задания резервного копирования журнала |
| жобстартдатетиме               | Дата и время      | Дата и время начала выполнения задания                       |
| JobStatus                      | текст          | Состояние завершенного задания, например "Завершено" или "Ошибка"   |
| JobUniqueId                    | текст          | Уникальный идентификатор для задания                                |
| протектедконтаинеруникуеид     | текст          | Уникальный идентификатор защищенного сервера, связанного с заданием |
| рековерижобдестинатион         | текст          | Назначение задания восстановления, куда восстанавливаются данные   |
| рековерижобрпдатетиме          | Дата и время      | Дата и время создания восстанавливаемой точки восстановления |
| рековерижоблокатион            | текст          | Место хранения восстанавливаемой точки восстановления |
| рековерилокатионтипе           | текст          | Тип расположения восстановления                                |
| schemaVersion                  | текст          | Текущая версия схемы, например **V2**            |
| Состояние                          | текст          | Текущее состояние объекта задания, например "активный" или "удален" |
| ваултуникуеид                  | текст          | Уникальный идентификатор защищенного хранилища, связанного с заданием |
| SourceSystem                   | текст          | Исходная система текущих данных (Azure)                    |

## <a name="addonazurebackuppolicy"></a>аддоназуребаккупполици

Эта таблица содержит сведения о полях, связанных с политикой.

| **Поле**                       | **Тип данных**  | **Описание**                                              |
| ------------------------------- | -------------- | ------------------------------------------------------------ |
| ResourceId                      | текст           | Уникальный идентификатор ресурса, по которому собираются данные. Например, идентификатор ресурса для хранилища Служб восстановления |
| OperationName                   | текст           | Имя операции, например Policy или ПолициассоЦиатион |
| Категория                        | текст           | Категория диагностических данных, отправленных в журналы Azure Monitor — Аддоназуребаккупполици |
| BackupDaysOfTheWeek             | текст           | Дни недели, на которые запланированы задания архивации            |
| BackupFrequency                 | текст           | Частота, с которой выполняются резервные копии. Например, ежедневно, еженедельно |
| BackupManagementType            | текст           | Тип поставщика для сервера, выполняющего задание резервного копирования. Например, IaaSVM, FileFolder |
| баккупманажементсерверуникуеид  | текст           | Поле для уникальной идентификации сервера управления архивацией, с которым защищен элемент резервного копирования, если применимо |
| BackupTimes                     | текст           | Дата и время запланированной архивации                     |
| DailyRetentionDuration          | Whole Number   | Общая длительность хранения (в днях) для настроенных резервных копий      |
| DailyRetentionTimes             | текст           | Дата и время настройки ежедневного сохранения            |
| диффбаккупдайсофсевик         | текст           | Дни недели для разностных резервных копий SQL в службе архивации виртуальных машин Azure |
| диффбаккупформат                | текст           | Формат для разностных резервных копий для SQL в резервной копии виртуальных машин Azure   |
| диффбаккупретентиондуратион     | Десятичное число | Продолжительность хранения разностных резервных копий для SQL в службе архивации виртуальных машин Azure |
| диффбаккуптиме                  | время;           | Время для разностных резервных копий для SQL в резервной копии виртуальных машин Azure     |
| логбаккупфрекуенци              | Десятичное число | Периодичность резервного копирования журналов для SQL                            |
| логбаккупретентиондуратион      | Десятичное число | Продолжительность хранения резервных копий журналов для SQL в службе архивации виртуальных машин Azure |
| MonthlyRetentionDaysOfTheMonth  | текст           | Недели месяца, в которых настроено ежемесячное хранение.  Например, «First», «Last» |
| MonthlyRetentionDaysOfTheWeek   | текст           | Дни недели, выбранные для ежемесячного хранения              |
| MonthlyRetentionDuration        | текст           | Общая длительность хранения (в месяцах) для настроенных резервных копий    |
| MonthlyRetentionFormat          | текст           | Тип конфигурации для ежемесячного хранения. Например, ежедневно на основе дня, еженедельно по неделям |
| MonthlyRetentionTimes           | текст           | Дата и время настройки ежемесячного хранения           |
| MonthlyRetentionWeeksOfTheMonth | текст           | Недели месяца, в которых настроено ежемесячное хранение.   Например, «First», «Last» |
| PolicyName                      | текст           | Указанное имя политики                                   |
| PolicyUniqueId                  | текст           | Уникальный идентификатор для политики                             |
| полицитимезоне                  | текст           | Часовой пояс, в котором указаны поля времени политики в журналах. |
| ретентиондуратион               | текст           | Длительность хранения настроенных резервных копий                    |
| RetentionType                   | текст           | Тип удержания                                            |
| schemaVersion                   | текст           | Это поле обозначает текущую версию схемы, то есть **v2** |
| Состояние                           | текст           | Текущее состояние объекта политики. Например, "активный", "удален" |
| синчронисатионфрекуенципердай  | Whole Number   | Число раз в день синхронизации резервной копии файлов для SC DPM и MABS |
| ваултуникуеид                   | текст           | Уникальный идентификатор хранилища, к которому относится эта политика          |
| WeeklyRetentionDaysOfTheWeek    | текст           | Дни недели, выбранные для еженедельного хранения               |
| WeeklyRetentionDuration         | Десятичное число | Общий еженедельный срок хранения в неделях для настроенных резервных копий |
| WeeklyRetentionTimes            | текст           | Дата и время настройки еженедельного хранения            |
| YearlyRetentionDaysOfTheMonth   | текст           | Дни месяца, выбранные для ежегодного хранения             |
| YearlyRetentionDaysOfTheWeek    | текст           | Дни недели, выбранные для ежегодного хранения               |
| YearlyRetentionDuration         | Десятичное число | Общая длительность хранения (в годах) для настроенных резервных копий     |
| YearlyRetentionFormat           | текст           | Тип конфигурации для ежегодного хранения, например ежедневно в день на основе дня, еженедельно по неделям |
| YearlyRetentionMonthsOfTheYear  | текст           | Месяцы года, выбранные для ежегодного хранения             |
| YearlyRetentionTimes            | текст           | Дата и время настройки ежегодного хранения            |
| YearlyRetentionWeeksOfTheMonth  | текст           | Недели месяца, выбранные для ежегодного хранения             |
| SourceSystem                    | текст           | Исходная система текущих данных (Azure)                    |

## <a name="addonazurebackupstorage"></a>AddonAzureBackupStorage

Эта таблица содержит сведения о полях, связанных с хранилищем.

| **Поле**                      | **Тип данных** | **Описание**                                              |
| ------------------------------ | ------------- | ------------------------------------------------------------ |
| ResourceId                     | текст          | Идентификатор ресурса для собираемых данных. Например, идентификатор ресурса хранилища служб восстановления |
| OperationName                  | текст          | Это поле представляет имя текущей операции-Storage или СторажеассоЦиатион |
| Категория                       | текст          | Это поле представляет категорию диагностических данных, отправленных в Azure Monitor журналы — Аддоназуребаккупстораже |
| баккупитемуникуеид             | текст          | Уникальный идентификатор, используемый для идентификации элемента резервного копирования для виртуальных машин, резервное копирование которых осуществляется с помощью DPM, MABS |
| баккупманажементсерверуникуеид | текст          | Поле для уникальной идентификации сервера управления архивацией, с которым защищен элемент резервного копирования, если применимо |
| BackupManagementType           | текст          | Тип поставщика для сервера, выполняющего задание резервного копирования. Например, IaaSVM, FileFolder |
| PreferredWorkloadOnVolume      | текст          | Рабочая нагрузка, для которой этот том является предпочтительным хранилищем      |
| протектедконтаинеруникуеид     | текст          | Уникальный идентификатор защищенного контейнера, связанного с элементом резервного копирования |
| schemaVersion                  | текст          | Версия схемы. Например, **v2**                   |
| Состояние                          | текст          | Состояние объекта резервного элемента. Например, "активный", "удален" |
| сторажеаллокатединмбс          | Число        | Размер хранилища, выделенного соответствующим элементом резервного копирования в соответствующем хранилище типа "диск" |
| сторажеконсумединмбс           | Число        | Размер хранилища, используемого соответствующим элементом резервного копирования в соответствующем хранилище |
| StorageName                    | текст          | Имя сущности хранилища. Например, E:\                      |
| сторажетоталсизеингбс          | текст          | Общий размер хранилища в гигабайтах, потребляемый сущностью хранилища     |
| StorageType                    | текст          | Тип хранилища, например облако, том, диск             |
| сторажеуникуеид                | текст          | Уникальный идентификатор для сущности хранилища                |
| ваултуникуеид                  | текст          | Уникальный идентификатор, используемый для идентификации хранилища, связанного с сущностью хранилища |
| волумефриендлинаме             | текст          | Понятное имя тома хранилища                          |
| SourceSystem                   | текст          | Исходная система текущих данных (Azure)                    |

## <a name="valid-operation-names-for-each-table"></a>Допустимые имена операций для каждой таблицы

Каждая запись в приведенных выше таблицах имеет связанное с ним **имя операции**. Имя операции описывает тип записи (а также указывает, какие поля в таблице заполняются для этой записи). Каждая таблица (категория) поддерживает одно или несколько уникальных имен операций. Ниже приведена сводка по поддерживаемым именам операций для каждой из приведенных выше таблиц.

| **Имя или категория таблицы**                   | **Поддерживаемые имена операций** | **Описание**              |
| ------------------------------------------- | ------------------------------|----------------------------- |
| кореазуребаккуп | BackupItem | Представляет запись, содержащую все сведения об заданном элементе резервного копирования, такие как идентификатор, имя, тип и т. д. |
| кореазуребаккуп | BackupItemAssociation | Представляет сопоставление между элементом резервного копирования и связанным защищенным контейнером (если применимо). |
| кореазуребаккуп | баккупитемфронтендсизеконсумптион | Представляет сопоставление между элементом резервного копирования и его размером внешнего интерфейса. |
| кореазуребаккуп | протектедконтаинер | Представляет запись, содержащую все сведения о заданном защищенном контейнере, такие как идентификатор, имя, тип и т. д. |
| кореазуребаккуп | протектедконтаинерассоЦиатион | Представляет сопоставление между защищенным контейнером и хранилищем, используемым для резервного копирования. |
| кореазуребаккуп | Хранилище | Представляет запись, содержащую все сведения о заданном хранилище, например. Идентификатор, имя, теги, расположение и т. д. |
| кореазуребаккуп | RecoveryPoint | Представляет запись, содержащую самую старую и последнюю точку восстановления для данного элемента резервного копирования. |
| AddonAzureBackupJobs | Задание |  Представляет запись, содержащую все сведения о заданном задании. Например, операция задания, время начала, состояние и т. д. |
| AddonAzureBackupAlerts | Оповещение | Представляет запись, содержащую все сведения об определенном предупреждении. Например, время создания предупреждения, серьезность, состояние и т. д.  |
| AddonAzureBackupStorage | Память | Представляет запись, содержащую все сведения о данной сущности хранилища. Например, имя хранилища, введите и т. д. |
| AddonAzureBackupStorage | StorageAssociation | Представляет сопоставление между элементом резервного копирования и общим облачным хранилищем, используемым элементом резервного копирования. |
| AddonAzureBackupProtectedInstance | ProtectedInstance | Представляет запись, содержащую количество защищенных экземпляров для каждого контейнера или элемента резервной копии. Для резервного копирования виртуальных машин Azure количество защищенных экземпляров доступно на уровне элементов резервного копирования для других рабочих нагрузок на уровне защищенного контейнера. |
| аддоназуребаккупполици | Политика |  Представляет запись, содержащую все сведения о резервном копировании и политике хранения. Например, "идентификатор", "имя", "параметры хранения" и т. д. |
| аддоназуребаккупполици | PolicyAssociation | Представляет сопоставление между элементом резервного копирования и примененной к нему политикой резервного копирования. |   

Часто требуется выполнить соединение между различными таблицами, а также разными наборами записей, которые являются частью одной таблицы (с отличающимся именем операции), чтобы получить все поля, необходимые для анализа. Ознакомьтесь с [примерами запросов](./backup-azure-monitoring-use-azuremonitor.md#sample-kusto-queries) , чтобы приступить к работе. 

## <a name="next-steps"></a>Дальнейшие действия

- [Узнайте, как отправить диагностические данные в Log Analytics](./backup-azure-diagnostic-events.md)
- [Сведения о написании запросов к таблицам, относящимся к ресурсам](./backup-azure-monitoring-use-azuremonitor.md#sample-kusto-queries)