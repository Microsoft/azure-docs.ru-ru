---
title: Как вручную исправить проблемы синхронизации ServiceNow
description: Сбросьте подключение к ServiceNow, чтобы оповещения в Microsoft Azure могли снова вызвать ServiceNow
ms.subservice: alerts
ms.topic: conceptual
author: nolavime
ms.author: nolavime
ms.date: 04/12/2020
ms.openlocfilehash: 9a6e46c0b52c22df0682034deaebd58bbfeb34a7
ms.sourcegitcommit: f5b8410738bee1381407786fcb9d3d3ab838d813
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/14/2021
ms.locfileid: "98210063"
---
# <a name="troubleshooting-problems-in-itsm-connector"></a>Устранение неполадок с соединителем ITSM

В этой статье рассматриваются распространенные проблемы в соединитель ITSM и способы их устранения.

Azure Monitor оповещения заблаговременно уведомляют Вас при обнаружении важных условий в данных мониторинга. Они позволяют выявить и устранить проблемы, прежде чем пользователи системы обнаружат их. Дополнительные сведения о предупреждениях см. в разделе Обзор оповещений в Microsoft Azure.
Клиент может выбрать способ уведомления о предупреждении: почта, SMS, веб-перехватчик или даже для автоматизации решения. Другим вариантом уведомления является использование ITSM.
ITSM предоставляет возможность отправки оповещений во внешнюю систему билетов, такую как ServiceNow.

## <a name="visualize-and-analyze-the-incident-and-change-request-data"></a>Визуализация и анализ данных инцидентов и запросов на изменение

В зависимости от конфигурации при настройке подключения ITSMC может синхронизировать до 120 дней инцидента и данных запросов на изменение. Схема записи журнала для этих данных приведена в [разделе Дополнительные сведения](./itsmc-synced-data.md) этой статьи.

Вы можете визуализировать данные об инциденте и запросах на изменение с помощью панели мониторинга ITSMC:

![Снимок экрана, на котором показана панель мониторинга ITSMC.](media/itsmc-overview/itsmc-overview-sample-log-analytics.png)

Панель мониторинга также предоставляет сведения о состоянии соединителя, которые можно использовать в качестве отправной точки для анализа проблем с соединениями.

### <a name="error-investigation-using-the-dashboard"></a>Анализ ошибок с помощью панели мониторинга

Чтобы просмотреть ошибки на панели мониторинга, выполните следующие действия.

1. Во **всех ресурсах** найдите **ServiceDesk (*имя рабочей области*)**:

   ![Снимок экрана, на котором показаны последние ресурсы в портал Azure.](media/itsmc-definition/create-new-connection-from-resource.png)

2. В разделе **Источники данных рабочей области** на левой панели выберите **подключения ITSM**:

   ![Снимок экрана, на котором показан пункт меню "ITSM Connections" (подключения).](media/itsmc-overview/add-new-itsm-connection.png)

3. В разделе **Сводка** в левом поле **соединитель управления ИТ-услугами** выберите **Просмотр сводки**:

    ![Снимок экрана, на котором отображается сводка по представлению.](media/itsmc-resync-servicenow/dashboard-view-summary.png)

4. В разделе **Сводка** в левом поле **соединитель управления ИТ-услугами** щелкните диаграмму:

    ![Снимок экрана, на котором показано нажатие кнопки на диаграмме.](media/itsmc-resync-servicenow/dashboard-graph-click.png)

5. С помощью этой панели мониторинга вы сможете просматривать состояние и ошибки в соединителе.
    ![Снимок экрана, показывающий состояние соединителя.](media/itsmc-resync-servicenow/connector-dashboard.png)

### <a name="dashboard-elements"></a>Элементы панели мониторинга

На панели мониторинга содержатся сведения о предупреждениях, отправленных в средство ITSM с помощью этого соединителя.
Панель мониторинга делится на 4 части:

1. Рабочий элемент создан: диаграмма и приведенная ниже таблица содержат количество рабочих элементов для каждого типа. Если щелкнуть диаграмму или таблицу, можно просмотреть дополнительные сведения о рабочих элементах.
    ![Снимок экрана, на котором показан созданный рабочий элемент.](media/itsmc-resync-servicenow/itsm-dashboard-workitems.png)
2. Затронутые компьютеры. таблицы содержат сведения об элементах конфигурации, которые создали элементы конфигурации.
    Щелкая строки в таблицах, можно получить дополнительные сведения об элементах конфигурации.
    Таблица содержит ограниченное число строк, если вы хотите просмотреть весь список, щелкнув "Показать все".
    ![Снимок экрана, на котором показаны затронутые компьютеры.](media/itsmc-resync-servicenow/itsm-dashboard-impacted-comp.png)
3. Состояние соединителя: граф и приведенная ниже таблица содержат сообщения о состоянии соединителя. Щелкнув диаграмму в строках таблицы, можно получить дополнительные сведения о сообщениях о состоянии соединителя.
    Таблица содержит ограниченное число строк, если вы хотите просмотреть весь список, щелкнув "Показать все".
    ![Снимок экрана, показывающий состояние соединителя.](media/itsmc-resync-servicenow/itsm-dashboard-connector-status.png)
4. Правила генерации оповещений. таблицы содержат сведения о количестве обнаруженных правил генерации оповещений.
    Щелкая строки в таблицах, можно получить дополнительные сведения о обнаруженных правилах.
    Таблица содержит ограниченное число строк, если вы хотите просмотреть весь список, щелкнув "Показать все".
    ![Снимок экрана, на котором показаны правила генерации оповещений.](media/itsmc-resync-servicenow/itsm-dashboard-alert-rules.png)

### <a name="service-map"></a>Схема услуги

Кроме того, можно визуализировать инциденты, синхронизированные с затронутыми компьютерами в Сопоставление служб.

Служба схемы услуги автоматически обнаруживает компоненты приложений в системах Windows и Linux и сопоставляет взаимодействие между службами. Он позволяет просматривать серверы в соответствии с их мнением: в виде взаимосвязанных систем, предрешающих критически важные службы. Сопоставление служб показывает подключения между серверами, процессами и портами по любой архитектуре, подключенной по протоколу TCP. В отличие от установки агента, настройка не требуется. Дополнительные сведения см. [в разделе использование сопоставление служб](../insights/service-map.md).

Если вы используете Сопоставление служб, вы можете просматривать элементы службы поддержки, созданные в решениях ITSM, как показано ниже:

![Снимок экрана, на котором показан экран Log Analytics.](media/itsmc-overview/itsmc-overview-integrated-solutions.png)

## <a name="troubleshoot-itsm-connections"></a>Устранение неполадок с подключениями ITSM

- Если подключение не удается подключиться к системе ITSM и появляется сообщение **об ошибке при сохранении** сообщения о подключении, выполните следующие действия.
   - Для подключений ServiceNow, Cherwell и Provance:  
     - Убедитесь, что вы правильно указали имя пользователя, пароль, идентификатор клиента и секрет клиента для каждого подключения.  
     - Убедитесь, что у вас есть необходимые привилегии в соответствующем продукте ITSM, чтобы установить подключение.  
   - Для Service Manager соединений:  
     - Убедитесь, что веб-приложение успешно развернуто и что гибридное подключение создано. Чтобы проверить, успешно ли установлено подключение к локальному Service Manager компьютере, перейдите по URL-адресу Web App, как описано в документации по созданию [гибридного подключения](./itsmc-connections-scsm.md#configure-the-hybrid-connection).  

- Если данные из ServiceNow не синхронизируются с Log Analytics, убедитесь, что экземпляр ServiceNow не находится в режиме ожидания. Экземпляры разработки ServiceNow иногда переходят в спящий режим, когда они бездействуют в течение длительного времени. Если это не происходит, сообщите о проблеме.
- Если Log Analytics оповещения срабатывают, но рабочие элементы не создаются в продукте ITSM, если элементы конфигурации не создаются или не связаны с рабочими элементами или другие сведения, см. в следующих ресурсах:
   -  ITSMC. в решении отображается сводка по подключениям, рабочим элементам, компьютерам и т. д. Выберите плитку с меткой **состояния соединителя** . Это позволит вам выполнить **Поиск по журналам** с помощью соответствующего запроса. `LogType_S` `ERROR` Дополнительные сведения см. в записях журнала.
   - Страница **поиска по журналам** . Просмотрите ошибки и связанные сведения непосредственно с помощью запроса `*ServiceDeskLog_CL*` .

### <a name="troubleshoot-service-manager-web-app-deployment"></a>Устранение неполадок Service Manager развертывании веб-приложений

-   Если у вас возникли проблемы с развертыванием веб-приложения, убедитесь, что у вас есть разрешения на создание и развертывание ресурсов в подписке.
-   При получении ссылки на **объект, не установленной на экземпляр** ошибки при выполнении [скрипта](itsmc-service-manager-script.md), убедитесь, что введены допустимые значения в разделе " **Конфигурация пользователя** ".
-   Если не удалось создать пространство имен ретранслятора служебной шины, убедитесь, что требуемый поставщик ресурсов зарегистрирован в подписке. Если оно не зарегистрировано, вручную создайте пространство имен ретранслятора служебной шины из портал Azure. Его также можно создать при [создании гибридного подключения](./itsmc-connections-scsm.md#configure-the-hybrid-connection) в портал Azure.

### <a name="how-to-manually-fix-sync-problems"></a>Устранение проблем с синхронизацией вручную

Azure Monitor может подключаться к поставщикам управления ИТ-службами (ITSM) сторонних производителей. ServiceNow — один из этих поставщиков.

По соображениям безопасности может потребоваться обновить маркер проверки подлинности, используемый для подключения к ServiceNow.
Используйте следующий процесс синхронизации для повторной активации подключения и обновления маркера:


1. Найдите решение в верхнем баннере поиска, а затем выберите соответствующие решения.

    ![Снимок экрана, на котором показан верхний баннер поиска и где можно выбрать соответствующие решения.](media/itsmc-resync-servicenow/solution-search-8bit.png)

1. На экране решения выберите "выделить все" в фильтре подписки, а затем отфильтруйте по "ServiceDesk".

    ![Снимок экрана, на котором показано, где выбрать пункт Выбрать все и где фильтровать по ServiceDesk.](media/itsmc-resync-servicenow/solutions-list-8bit.png)

1. Выберите решение для подключения ITSM.
1. Выберите подключение ITSM в левом баннере.

    ![Снимок экрана, на котором показано, где можно выбрать подключения ITSM.](media/itsmc-resync-servicenow/itsm-connector-8bit.png)

1. Выберите каждый соединитель из списка. 
    1. Щелкните имя соединителя, чтобы настроить его.
    1. Удаление всех соединителей, которые больше не используются

    1. Обновление полей в соответствии с [этими определениями](./itsmc-connections.md) в зависимости от типа партнера

    1. Щелкните "синхронизировать"

       ![Снимок экрана, на котором наделена кнопка "синхронизировать".](media/itsmc-resync-servicenow/resync-8bit2.png)

    1. Щелкните "Сохранить"

        ![Новое подключение](media/itsmc-resync-servicenow/save-8bit.png)

е)    Просмотрите уведомления, чтобы узнать, запущен ли процесс.
