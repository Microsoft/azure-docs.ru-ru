---
title: Azure Monitor действий связи с книгами
description: Использование действий связи в книгах Azure Monitor
ms.topic: conceptual
ms.date: 01/07/2021
author: lgayhardt
ms.author: lagayhar
ms.openlocfilehash: 3e94f1a70d5fa2a6e132dc6dc6f95439959b07f0
ms.sourcegitcommit: aacbf77e4e40266e497b6073679642d97d110cda
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/12/2021
ms.locfileid: "98122539"
---
# <a name="link-actions"></a>Действия связи

Действия связи можно получить с помощью ссылок на книгу или с помощью параметров столбцов [сетки](workbooks-grid-visualizations.md), [заголовков](workbooks-tile-visualizations.md)или [графиков](workbooks-graph-visualizations.md).

## <a name="general-link-actions"></a>Общие действия ссылок

| Действие ссылки | Действие по щелчку |
|:------------- |:-------------|
| `Generic Details` | Показывает значения строк в представлении контекста сетки свойств. |
| `Cell Details` | Показывает значение ячейки в представлении контекста сетки свойств. Полезно, если ячейка содержит динамический тип со сведениями (например, JSON с такими свойствами запроса, как расположение, экземпляр роли и т. д.). |
| `Url` | Значение ячейки должно быть допустимым URL-адресом HTTP, а ячейка будет ссылкой, открывающей этот URL-адрес на новой вкладке.|

## <a name="application-insights"></a>Application Insights

| Действие ссылки | Действие по щелчку |
|:------------- |:-------------|
| `Custom Event Details` | Открывает Application Insights сведения о поиске с ИДЕНТИФИКАТОРом пользовательского события ( `itemId` ) в ячейке. |
| `* Details` | Аналогично пользовательским сведениям о событии, за исключением зависимостей, исключений, просмотров страниц, запросов и трассировок. |
| `Custom Event User Flows` | Открывает Application Insights Маршруты пользователей возможности, сведенные по имени пользовательского события в ячейке. |
| `* User Flows` | Аналогично Маршруты пользователей пользовательских событий, за исключением исключений, просмотров страниц и запросов. |
| `User Timeline` | Открывает пользовательскую временную шкалу с ИДЕНТИФИКАТОРом пользователя ( `user_Id` ) в ячейке. |
| `Session Timeline` | Открывает Application Insights поиска для значения в ячейке (например, Поиск текста "ABC", где ABC — это значение в ячейке). |

`*` обозначает подстановочный знак для указанной выше таблицы

## <a name="azure-resource"></a>Ресурс Azure

| Действие ссылки | Действие по щелчку |
|:------------- |:-------------|
| `ARM Deployment` | Развертывание шаблона Azure Resource Manager.  При выборе этого элемента отображаются дополнительные поля, позволяющие автору настроить, какой шаблон Azure Resource Manager открывать, какие параметры шаблона и т. д. см. в [разделе Параметры ссылки на развертывание Azure Resource Manager](#azure-resource-manager-deployment-link-settings). |
| `Create Alert Rule` | Создает правило генерации оповещений для ресурса.  |
| `Custom View` | Открывает пользовательское представление. При выборе этого элемента отображаются дополнительные поля, позволяющие автору настроить расширение представления, имя представления и все параметры, используемые для открытия представления. [См. раздел настраиваемое представление](#custom-view-link-settings). |
| `Metrics` | Открывает представление метрик.  |
| `Resource overview` | Откройте представление ресурса на портале на основе значения идентификатора ресурса в ячейке. Автор может также задать `submenu` значение, которое будет открывать конкретный пункт меню в представлении ресурсов. |
| `Workbook (template)` | Откройте шаблон книги.  При выборе этого элемента отображаются дополнительные поля, позволяющие автору настроить шаблон для открытия и т. д.  |

## <a name="link-settings"></a>Параметры связи

При использовании модуля подготовки отчетов доступны следующие параметры.

![Снимок экрана параметров связи](./media/workbooks-link-actions/link-settings.png)

| Параметр | Объяснение |
|:------------- |:-------------|
| `View to open` | Позволяет автору выбрать одно из действий, перечисленных выше. |
| `Menu item` | Если выбрано значение "Обзор ресурсов", это элемент меню в обзоре ресурса, который необходимо открыть. Это можно использовать, чтобы открывать оповещения или журналы действий вместо "Обзор" для ресурса. Значения пунктов меню отличаются для каждого из Azure `Resourcetype` .|
| `Link label` | Если указано, это значение будет отображаться в столбце сетки. Если это значение не указано, будет отображено значение ячейки. Если требуется отобразить другое значение, например тепловой карты или значок, не используйте модуль `Link` подготовки отчетов вместо этого, используйте соответствующий модуль подготовки отчетов и выберите `Make this item a link` параметр. |
| `Open link in Context Blade` | Если этот параметр указан, ссылка будет открываться в виде всплывающего представления "контекст" в правой части окна, а не открываться как полное представление. |

При использовании `Make this item a link` параметра доступны следующие параметры.

| Параметр | Объяснение |
|:------------- |:-------------|
| `Link value comes from` | При отображении ячейки в виде модуля отрисовки со ссылкой в этом поле указывается, откуда берется значение "Link", используемое в ссылке, что позволяет автору выбрать из раскрывающегося списка другие столбцы в сетке. Например, ячейка может быть значением тепловой карты, но нужно, чтобы ссылка открывала обзор ресурсов для идентификатора ресурса в строке. В этом случае необходимо задать значение ссылки, поступающие из `Resource Id` поля.
| `View to open` | то же, что и выше |
| `Menu item` | то же, что и выше |
| `Open link in Context Blade` | то же, что и выше |

## <a name="azure-resource-manager-deployment-link-settings"></a>Azure Resource Manager параметров ссылки для развертывания

Если выбранный тип связи является `ARM Deployment` автором, необходимо указать дополнительные параметры, чтобы открыть Azure Resource Managerное развертывание. Существуют две основные вкладки для конфигураций.

### <a name="template-settings"></a>Параметры шаблона

В этом разделе определяется, откуда должен быть получен шаблон, а также параметры, используемые для запуска Azure Resource Managerного развертывания.

| Источник | Пояснение |
|:------------- |:-------------|
|`Resource group id comes from` | Идентификатор ресурса используется для управления развернутыми ресурсами. Подписка используется для управления развернутыми ресурсами и затратами. Группы ресурсов используются как папки для Организации и управления всеми ресурсами. Если это значение не указано, развертывание завершится ошибкой. Выберите `Cell` `Column` `Static Value` `Parameter` в [источниках связи](#link-sources),, или.|
|`ARM template URI from` | Универсальный код ресурса (URI) для самого шаблона Azure Resource Manager. URI шаблона должен быть доступен пользователям, которые будут развертывать шаблон. Выберите `Cell` `Column` `Parameter` `Static Value`  в [источниках связи](#link-sources),, или. Для начала ознакомьтесь с нашими [шаблонами](https://azure.microsoft.com/resources/templates/)быстрого запуска.|
|`ARM Template Parameters` | В этом разделе определяются параметры шаблона, используемые для URI шаблона, определенного выше. Эти параметры будут использоваться для развертывания шаблона на странице Запуск. Сетка содержит кнопку развертывания, которая позволяет заполнить параметры с помощью имен, определенных в URI шаблона, и задать для него статические пустые значения. Этот параметр можно использовать только в том случае, если в сетке нет параметров и URI шаблона был задан. В нижней части находится предварительный просмотр выходных данных параметра. Выберите Обновить, чтобы обновить предварительную версию с текущими изменениями. Параметры обычно являются значениями, тогда как ссылки могут указывать на keyvault секреты, к которым у пользователя есть доступ. <br/><br/> **Ограничение колонки "средство просмотра шаблонов** " — неправильно отображает ссылочные параметры и отображается как значение null или, поэтому пользователи не смогут правильно развернуть ссылочные параметры на вкладке средства просмотра шаблонов.|

![Снимок экрана: параметры шаблона Azure Resource Manager](./media/workbooks-link-actions/template-settings.png)

### <a name="ux-settings"></a>Параметры UX

В этом разделе настраиваются параметры, которые увидят пользователи перед запуском Azure Resource Managerного развертывания.

| Источник | Пояснение |
|:------------- |:-------------|
|`Title from` | Заголовок, используемый в представлении выполнения. Выберите `Cell` `Column` `Parameter` `Static Value` в [источниках связи](#link-sources),, или.|
|`Description from` | Это Markdown текст, который используется для предоставления пользователям полезного описания, когда они хотят развернуть шаблон. Выберите `Cell` `Column` `Parameter` `Static Value`  в [источниках связи](#link-sources),, или. <br/><br/> **Примечание.** Если `Static Value` выбрано значение, будет отображаться многострочное текстовое поле. В этом текстовом поле можно разрешить параметры с помощью `{paramName}` . Кроме того, можно рассматривать столбцы как параметры путем добавления `_column` после имени столбца, например `{columnName_column}` . На приведенном ниже рисунке показано, как можно сослаться на столбец `VMName` , записав `{VMName_column}` . Значение после двоеточия — это [модуль форматирования параметров](workbooks-parameters.md#parameter-options), в данном случае это `value` .|
|`Run button text from` | Метка, используемая на кнопке Run (выполнить) для развертывания шаблона Azure Resource Manager. Это то, что пользователи будут выбирать для начала развертывания шаблона Azure Resource Manager.|

![Снимок экрана: параметры Azure Resource Manager UX](./media/workbooks-link-actions/ux-settings.png)

После установки этих конфигураций, когда пользователи выбирают ссылку, откроется представление с интерфейсом UX, описанным в разделе Параметры UX. Если пользователь выберет `Run button text from` его, будет развернуто шаблон Azure Resource Manager с использованием значений из [параметров шаблона](#template-settings). Просмотреть шаблон откроется вкладка средство просмотра шаблонов, с помощью которой пользователь сможет проверить шаблон и параметры перед развертыванием.

![Снимок экрана: представление "Запуск Azure Resource Manager"](./media/workbooks-link-actions/run-tab.png)

## <a name="custom-view-link-settings"></a>Параметры ссылки на настраиваемое представление

Используйте этот параметр, чтобы открыть пользовательские представления в портал Azure. Проверьте все настройки и параметры. Неверные значения приведут к ошибкам на портале или не удается правильно открыть представления. Существует два способа настройки параметров с помощью `Form` или `URL` .

> [!NOTE]
> Представления с меню не могут быть открыты на вкладке контекста. Если представление с меню настроено для открытия в контекстной вкладке, то при выборе ссылки вкладка контекст не отображается.

### <a name="form"></a>Form

| Источник | Пояснение |
|:------------- |:-------------|
|`Extension name` | Имя расширения, в котором размещается имя представления.|
|`View name` | Имя открываемого представления.|

#### <a name="view-inputs"></a>Просмотр входных данных

Существует два типа входов, сеток и JSON. Используйте `Grid` для ввода простых значений табуляции Key и value или выберите `JSON` , чтобы указать вложенные входные данные JSON.

- Grid
    - `Parameter Name`: Имя входного параметра представления.
    - `Parameter Comes From`: Где значение параметра представления должно поступать из. Выберите `Cell` `Column` `Parameter` `Static Value` в [источниках связи](#link-sources),, или.
    > [!NOTE]
    > Если `Static Value` выбрано значение, параметры можно разрешить с помощью ссылки на скобки `{paramName}` в текстовом поле. Столбцы можно рассматривать как столбцы параметров, добавляя `_column` после имени столбца, например `{columnName_column}` .

    - `Parameter Value`: в зависимости от `Parameter Comes From` этого будет раскрывающийся список доступных параметров, столбцов или статическое значение.

    ![Снимок экрана: параметр "изменить столбец" показывает параметры пользовательского представления из формы.](./media/workbooks-link-actions/custom-tab-settings.png)
- JSON
    - Укажите ввод на вкладке в формате JSON в редакторе. Как `Grid` и в случае с режимом, параметрами и столбцами, можно ссылаться с помощью `{paramName}` для параметров и `{columnName_column}` для столбцов. При выборе параметра отображаются `Show JSON Sample` ожидаемые выходные данные всех разрешенных параметров и столбцов для входных данных представления.

    ![Снимок экрана, показывающий открытые параметры настраиваемого представления с входными данными представления в JSON.](./media/workbooks-link-actions/custom-tab-json.png)

### <a name="url"></a>URL-адрес

Вставьте URL-адрес портала, содержащий расширение, имя представления и все входные данные, необходимые для открытия представления. После выбора `Initialize Settings` он заполнит поле `Form` для автора, чтобы добавить, изменить или удалить любые входные данные представления.

![Снимок экрана, показывающий параметр столбца Показать параметры пользовательского представления из URL-адреса. ](./media/workbooks-link-actions/custom-tab-settings-url.png)

## <a name="workbook-template-link-settings"></a>Параметры связи книги (шаблона)

Если выбран тип ссылки `Workbook (Template)` , автор должен указать дополнительные параметры, чтобы открыть правильный шаблон книги. Параметры ниже имеют параметры, определяющие, как сетка найдет подходящее значение для каждого из параметров.

| Параметр | Объяснение |
|:------------- |:-------------|
| `Workbook owner Resource Id` | Это идентификатор ресурса Azure, который "владеет" книгой. Обычно это Application Insights ресурсом или Log Analytics рабочей областью. Внутри Azure Monitor это также может быть строкой литерала `"Azure Monitor"` . При сохранении книги это то, к чему будет привязана книга. |
| `Workbook resources` | Массив идентификаторов ресурсов Azure, указывающий ресурс по умолчанию, используемый в книге. Например, если открываемый шаблон отображает метрики виртуальной машины, то здесь значениями будут идентификаторы ресурсов виртуальной машины.  Во многих случаях владельцем и ресурсами задаются одни и те же параметры. |
| `Template Id` | Укажите идентификатор открываемого шаблона. Если это шаблон сообщества из коллекции (наиболее распространенный вариант), добавьте путь к шаблону `Community-` , например, `Community-Workbooks/Performance/Apdex` для `Workbooks/Performance/Apdex` шаблона. Если это ссылка на сохраненную книгу или шаблон, это полный идентификатор ресурса Azure этого элемента. |
| `Workbook Type` | Укажите тип открываемого шаблона книги. В наиболее распространенных случаях `Default` `Workbook` для использования значения в текущей книге используется параметр или. |
| `Gallery Type` | Этот параметр указывает тип коллекции, который будет отображаться в представлении "Галерея" шаблона, который откроется. В наиболее распространенных случаях `Default` `Workbook` для использования значения в текущей книге используется параметр или. |
|`Location comes from` | Поле Расположение должно быть указано при открытии определенного ресурса книги. Если параметр location не указан, поиск содержимого книги выполняется намного медленнее. Если расположение известно, укажите его. Если вы не знакомы с расположением или открываете шаблон без определенного расположения, оставьте для этого поля значение "по умолчанию".|
|`Pass specific parameters to template` | Выберите, чтобы передать определенные параметры в шаблон. Если этот флажок установлен, в шаблон передаются только указанные параметры, где все параметры в текущей книге передаются в шаблон, и в этом случае *имена* параметров должны быть одинаковыми в обеих книгах, чтобы это значение параметра работало.|
|`Workbook Template Parameters` | В этом разделе определяются параметры, которые передаются в Целевой шаблон. Имя должно совпадать с именем параметра в целевом шаблоне. Выберите значение из `Cell` , `Column` , `Parameter` и `Static Value` . Имя и значение не должны быть пустыми, чтобы передать этот параметр в Целевой шаблон.|

Для каждого из указанных выше параметров автор должен выбрать, откуда будет получено значение в связанной книге. См. раздел [Источники ссылок](#link-sources)

При открытии ссылки на книгу новое представление книги будет передано всем значениям, указанным в параметрах, приведенных выше.

![Снимок экрана: параметры связи с книгой](./media/workbooks-link-actions/workbook-link-settings.png)

![Снимок экрана: параметры параметров шаблона книги](./media/workbooks-link-actions/workbook-template-link-settings-parameter.png)

## <a name="link-sources"></a>Источники связей

| Источник | Пояснение |
|:------------- |:-------------|
| `Cell` | В качестве значения ссылки будет использоваться значение в этой ячейке в сетке |
| `Column` | Если этот флажок установлен, будет отображено другое поле, позволяющее автору выбрать другой столбец в сетке.  Значение этого столбца для строки будет использоваться в значении ссылки. Обычно это используется для того, чтобы каждая строка сетки открывала другой шаблон, присвоив полю значение `Template Id` `column` , или открыть один и тот же шаблон книги для разных ресурсов, если в `Workbook resources` поле задан столбец, содержащий идентификатор ресурса Azure. |
| `Parameter` | Если этот флажок установлен, будет отображено другое поле, позволяющее автору выбрать параметр. Значение этого параметра будет использоваться для значения при щелчке ссылки |
| `Static value` | Если этот флажок установлен, будет отображено другое поле, позволяющее типу автора использовать статическое значение, которое будет использоваться в связанной книге. Это часто используется, когда все строки в сетке будут использовать одно и то же значение для поля. |
| `Step` | Используйте значение, заданное на текущем шаге книги. Это распространено на шагах запросов и метрик, чтобы задать ресурсы книги в связанной книге для тех, которые используются *на шаге «запрос/метрики*», а не в текущей книге. |
| `Workbook` | Использовать значение, заданное в текущей книге. |
| `Default` | Используйте значение по умолчанию, которое будет использоваться, если значение не было указано. Это распространено для типа коллекции, где коллекция по умолчанию будет задаваться типом ресурса владельца. |

## <a name="next-steps"></a>Дальнейшие действия

- [Управление](workbooks-access-control.md) доступом к ресурсам книги и предоставление общего доступа к ним.
- Узнайте, как использовать [группы в книгах](workbooks-groups.md).