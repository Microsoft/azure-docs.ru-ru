---
title: Использование хранилища BLOB-объектов для IIS и хранилища таблиц для событий в Azure Monitor | Документация Майкрософт
description: Azure Monitor можете читать журналы служб Azure, которые записывают диагностику в хранилище таблиц или журналы IIS, записанные в хранилище BLOB-объектов.
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 02/14/2020
ms.openlocfilehash: deb6b5f3718c1a7c84e3591bf9abcceb72b785da
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102054977"
---
# <a name="collect-data-from-azure-diagnostics-extension-to-azure-monitor-logs"></a>Собирайте данные из расширения системы диагностики Azure в журналы Azure Monitor
Расширение системы диагностики Azure — это [агент в Azure Monitor](../agents/agents-overview.md) , собирающий данные мониторинга из операционной системы на виртуальной машине для ресурсов вычислений Azure, включая виртуальные машины. В этой статье описывается сбор данных, собираемых расширением диагностики из службы хранилища Azure, в журналы Azure Monitor.

> [!NOTE]
> Агент Log Analytics в Azure Monitor обычно является предпочтительным методом для получения данных из гостевой операционной системы в журналы Azure Monitor. Подробное сравнение агентов см. [в разделе Общие сведения об агентах Azure Monitor](../agents/agents-overview.md) .

## <a name="supported-data-types"></a>Поддерживаемые типы данных
Расширение системы диагностики Azure хранит данные в учетной записи хранения Azure. Чтобы Azure Monitor журналы для получения этих данных, они должны находиться в следующих расположениях:

| Тип журнала | Тип ресурса | Расположение |
| --- | --- | --- |
| Журналы IIS |Виртуальные машины <br> Веб-роли <br> Рабочие роли |wad-iis-logfiles (хранилище BLOB-объектов) |
| Системный журнал |Виртуальные машины |LinuxsyslogVer2v0 (хранилище таблиц) |
| Операционные события Service Fabric |Узлы Service Fabric |WADServiceFabricSystemEventTable |
| События субъектов Service Fabric Reliable Actors |Узлы Service Fabric |WADServiceFabricReliableActorEventTable |
| События надежных служб Service Fabric |Узлы Service Fabric |WADServiceFabricReliableServiceEventTable |
| Журналы событий Windows |Узлы Service Fabric <br> Виртуальные машины <br> Веб-роли <br> Рабочие роли |WADWindowsEventLogsTable (хранилище таблиц) |
| Журналы трассировки событий Windows |Узлы Service Fabric <br> Виртуальные машины <br> Веб-роли <br> Рабочие роли |WADETWEventTable (хранилище таблиц) |

## <a name="data-types-not-supported"></a>Типы данных не поддерживаются

- Данные о производительности операционной системы на виртуальной машине
- Журналы IIS из веб-сайтов Azure


## <a name="enable-azure-diagnostics-extension"></a>Включение расширения системы диагностики Azure
Сведения об установке и настройке расширения диагностики см. в разделе [Установка и настройка расширения системы диагностики Microsoft Azure (WAD)](../agents/diagnostics-extension-windows-install.md) или [Использование диагностического расширения Linux для мониторинга метрик и журналов](../../virtual-machines/extensions/diagnostics-linux.md) . Это позволит указать учетную запись хранения и настроить сбор данных, которые требуется пересылать в журналы Azure Monitor.


## <a name="collect-logs-from-azure-storage"></a>Получение журналов из службы хранилища Azure
Используйте следующую процедуру, чтобы включить сбор данных расширения диагностики из учетной записи хранения Azure.

1. В портал Azure перейдите в раздел **log Analytics рабочие области** и выберите рабочую область.
1. Щелкните **журналы учетных записей хранения** в разделе **Источники данных рабочей области** меню.
2. Нажмите кнопку **Добавить**.
3. Выберите **учетную запись хранения** , содержащую данные для накопления.
4. Выберите **тип данных** , который требуется получить.
5. Значение источника автоматически заполняется на основе типа данных.
6. Нажмите кнопку **ОК**, чтобы сохранить конфигурацию.
7. Повторите эти действия для дополнительных типов данных.

Примерно через 30 минут вы сможете просматривать данные из учетной записи хранения в Log Analytics рабочей области. Отобразятся только данные, записанные в хранилище после применения конфигурации. Рабочая область не считывает ранее существовавшие данные из учетной записи хранения.

> [!NOTE]
> Портал не проверяет, существует ли источник в учетной записи хранения, или если новые данные записываются.



## <a name="next-steps"></a>Следующие шаги

* [Сбор журналов и метрик для поддерживаемых служб Azure](../essentials/resource-logs.md#send-to-log-analytics-workspace).
* [Включите решения](../insights/solutions.md) , чтобы обеспечить глубокое понимание данных.
* [Воспользуйтесь запросами поиска](../logs/log-query-overview.md) для анализа данных.