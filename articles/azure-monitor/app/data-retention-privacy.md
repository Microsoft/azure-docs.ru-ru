---
title: Хранилища и хранение данных в Azure Application Insights | Документация Майкрософт
description: Заявление о политике хранении и конфиденциальности
ms.topic: conceptual
ms.date: 06/30/2020
ms.custom: devx-track-js, devx-track-csharp
ms.openlocfilehash: 6a7545d4d927418e6153ce3bf439fc8c3e2dc702
ms.sourcegitcommit: 2c1b93301174fccea00798df08e08872f53f669c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104774921"
---
# <a name="data-collection-retention-and-storage-in-application-insights"></a>Сбор и хранение данных в Application Insights

После установки в приложение пакет SDK для [Azure Application Insights][start] отправляет данные телеметрии приложения в облако. Естественно, ответственные разработчики хотят знать, какие именно данные отправляются, что с ними происходит и как ими управлять. В частности, возникают следующие вопросы: можно ли отправлять конфиденциальные данные, где они хранятся и насколько это безопасно? 

Ответ прост.

* Для отправки конфиденциальных данных в службу лучше не использовать телеметрические модули со стандартными настройками. Телеметрия включает метрики нагрузки, производительности и использования, отчеты об исключениях и другие диагностические данные. Основными пользовательскими данными, которые отображаются в диагностических отчетах, являются URL-адреса. Однако приложение в любом случае не должно помещать конфиденциальные данные в URL-адрес в виде обычного текста.
* Можно написать код, который будет отправлять дополнительные пользовательские телеметрические данные для диагностики и мониторинга (Эта расширяемость является отличной функцией Application Insights.) По ошибке можно было бы написать этот код таким образом, чтобы он включал персональные и другие конфиденциальные данные. Если приложение работает с такими данными, следует применить подробный процесс проверки ко всему написанному коду.
* При разработке и тестировании приложения можно легко проверить, какие именно данные отправляются с помощью пакета SDK. Данные отображаются в окнах вывода отладочных данных IDE и браузера.
* Расположение можно выбрать при создании нового ресурса Application Insights. Дополнительные сведения о доступности Application Insights для каждого региона см. [здесь](https://azure.microsoft.com/global-infrastructure/services/?products=all).
*   Изучите собранные данные, так как это может содержать данные, допустимые в некоторых обстоятельствах, но не в других.  Хорошим примером этого является имя устройства. Имя устройства с сервера не оказывает никакого влияния на конфиденциальность и полезно, но имя устройства с телефона или ноутбука может оказывать влияние на конфиденциальность и быть менее полезным. Пакет SDK, разработанный главным образом для целевых серверов, соберет имя устройства по умолчанию, и это может потребоваться для перезаписи как обычных событий, так и исключений.

Далее в статье эта тема рассматривается более подробно. Эта статья содержит все необходимые сведения, поэтому вы можете показывать ее коллегам, которые не работают непосредственно с вами.

## <a name="what-is-application-insights"></a>Что такое Azure Application Insights?
[Azure Application Insights][start] — это служба Майкрософт, которая помогает повысить производительность и удобство использования активного приложения. Она отслеживает приложение на протяжении всего времени его работы: как на этапе тестирования, так и после публикации или развертывания. Application Insights создает диаграммы и таблицы, которые могут отображать различные данные: например, в какое время дня у вас наибольшее число пользователей, насколько быстро приложение отвечает на запросы и насколько хорошо оно обслуживается внешними службами, от которых зависит. В случае сбоев, ошибок или проблем с производительностью можно более детально просмотреть телеметрические данные, чтобы определить причину проблемы. Кроме этого, в случае каких-либо изменений в доступности и производительности приложения служба будет отправлять вам по электронной почте соответствующие уведомления.

Чтобы использовать эту возможность, установите в приложение пакет SDK Application Insights, который интегрируется с кодом приложения. Когда приложение запущено, пакет SDK отслеживает его работу и отправляет телеметрические данные в службу Application Insights. Это облачная служба, размещенная в [Microsoft Azure](https://azure.com). (Но Application Insights работает для любых приложений, а не только для приложений, размещенных в Azure.)

Служба Application Insights хранит и анализирует телеметрические данные. Для просмотра результатов анализа или поиска в сохраненных телеметрических данных войдите в учетную запись Azure и откройте в окне приложения ресурс Application Insights. Доступ к данным также можно предоставить другим участникам команды или определенным подписчикам Azure.

Данные можно экспортировать из службы Application Insights — к примеру, в базу данных или на внешние устройства. Каждому устройству можно назначить специальный ключ, предоставляемый службой. При необходимости ключ можно отменить. 

Пакеты SDK Application Insights доступны для разных типов приложений: веб-служб, размещенных на ваших собственных серверах Java EE или ASP.NET или в Azure, веб-клиентов (то есть кода, выполняемого на веб-странице), классических приложений и служб, а также приложений для устройств (например, Windows Phone, iOS и Android). Все они отправляют телеметрические данные в одну и ту же службу.

## <a name="what-data-does-it-collect"></a>Какие данные собираются?
Есть три источника данных:

* Пакет SDK, который вы интегрируете в свое приложение [во время разработки](./asp-net.md) или [в среде выполнения](./monitor-performance-live-website-now.md). Существуют разные пакеты SDK для различных типов приложений. Есть также [пакет SDK для веб-страниц](./javascript.md), который загружается в браузер конечного пользователя вместе со страницей.
  
  * В каждый пакет SDK входит ряд [модулей](./configuration-with-applicationinsights-config.md), которые используют различные методики для сбора разных типов телеметрических данных.
  * Если пакет SDK устанавливается на этапе разработки, для отправки собственных телеметрических данных, помимо стандартных модулей, можно использовать API. Такая пользовательские телеметрические данные могут включать все данные, которые требуется отправить.
* На некоторых веб-серверах также установлены агенты, которые работают вместе с приложениями и отправляют телеметрические данные о ЦП, памяти и загрузке сети. Например, такие агенты могут быть установлены на виртуальных машинах Azure, узлах Docker и [серверах Java EE](./java-agent.md).
* [Тесты доступности](./monitor-web-app-availability.md) — это процессы, выполняемые компанией Майкрософт, которые отправляют запросы к веб-приложению через одинаковые интервалы. Результаты отправляются в службу Application Insights.

### <a name="what-kinds-of-data-are-collected"></a>Какие типы данных собираются?
Вот основные категории данных.

* [Телеметрия веб-сервера](./asp-net.md) : HTTP-запросы.  URI, время обработки запроса, код ответа, IP-адрес клиента. `Session id`.
* [Веб-страницы](./javascript.md) : количество страниц, пользователей и сеансов. Время загрузки страницы. Исключения. Вызовы AJAX.
* Счетчики производительности: загрузка памяти, ЦП, сети, количество операций ввода-вывода.
* Контекст клиента и сервера: ОС, языковой стандарт, тип устройства, браузер и разрешение экрана.
* [Исключения](./asp-net-exceptions.md) и сбои — **дампы стека**, `build id` , тип ЦП. 
* [Зависимости](./asp-net-dependencies.md) : вызовы внешних служб, например REST, SQL и AJAX. URI или строка подключения, длительность, успешное выполнение, команда.
* [Тесты доступности](./monitor-web-app-availability.md) : длительность теста и его шагов, ответы.
* [Журналы трассировки](./asp-net-trace-logs.md) и [пользовательские данные телеметрии](./api-custom-events-metrics.md):  - **все данные, которые программно добавляются в журналы или данные телеметрии**.

[Дополнительные сведения](#data-sent-by-application-insights).

## <a name="how-can-i-verify-whats-being-collected"></a>Как проверить, какие именно данные собираются?
Если приложение разрабатывается в Visual Studio, запустите приложение в режиме отладки (F5). Телеметрические данные появятся в окне вывода. Оттуда их можно скопировать, отформатировать как файл JSON и быстро проверить. 

![Снимок экрана, показывающий запуск приложения в режиме отладки в Visual Studio.](./media/data-retention-privacy/06-vs.png)

В окне диагностики также есть более удобное для чтения представление.

В случае с веб-страницами, откройте окно отладки в браузере.

![Нажмите клавишу F12 и откройте вкладку «Сеть».](./media/data-retention-privacy/08-browser.png)

### <a name="can-i-write-code-to-filter-the-telemetry-before-it-is-sent"></a>Можно ли написать код, чтобы отфильтровать телеметрические данные перед отправкой?
Можно написать [подключаемый модуль обработчика телеметрических данных](./api-filtering-sampling.md).

## <a name="how-long-is-the-data-kept"></a>Как долго хранятся данные?
Необработанные точки данных (т. е. элементы, которые можно запросить в аналитике и проверке в поиске) хранятся в течение 730 дней. Можно [выбрать срок хранения](./pricing.md#change-the-data-retention-period) 30, 60, 90, 120, 180, 270, 365, 550 или 730 дней. Если необходимо хранить данные дольше 730 дней, можно использовать [непрерывный экспорт](./export-telemetry.md) , чтобы скопировать его в учетную запись хранения во время приема данных. 

За данные, хранящиеся дольше 90 дней, взимается дополнительная плата. Дополнительные сведения о ценах на Application Insights см. на [странице цен на Azure Monitor](https://azure.microsoft.com/pricing/details/monitor/).

Статистические данные (то есть счетчики, средние значения и другие статистические данные, которые отображаются в обозревателе метрик) сохраняются со степенью детализации в 1 минуту в течение 90 дней.

[Отладочные моментальные снимки](./snapshot-debugger.md) хранятся в течение 15 дней. Такая политика хранения задается для каждого приложения отдельно. Если нужно изменить этот параметр, вы можете запросить изменения, открыв окно Службы Поддержки на портале Microsoft Azure.

## <a name="who-can-access-the-data"></a>Кто имеет доступ к данным?
Данные видны вам и, если у вас есть учетная запись организации, членам вашей группы. 

Вы и члены группы могут их экспортировать и скопировать в другое место, а также передать другим пользователям.

#### <a name="what-does-microsoft-do-with-the-information-my-app-sends-to-application-insights"></a>Что корпорация Майкрософт делает с данными, которые мое приложение отправляет службе Application Insights?
Корпорация Майкрософт использует данные только для предоставления вам возможностей службы.

## <a name="where-is-the-data-held"></a>Где хранятся данные?
* Расположение можно выбрать при создании нового ресурса Application Insights. Дополнительные сведения о доступности Application Insights для каждого региона см. [здесь](https://azure.microsoft.com/global-infrastructure/services/?products=all).

## <a name="how-secure-is-my-data"></a>Насколько защищены мои данные?
Application Insights — это служба Azure. Политики безопасности описаны в [техническом документе Azure о безопасности, конфиденциальности и соответствии требованиям](https://go.microsoft.com/fwlink/?linkid=392408).

Данные хранятся на серверах Microsoft Azure. Для учетных записей в портал Azure ограничения учетной записи описаны в [документе безопасность, конфиденциальность и соответствие требованиям в Azure](https://go.microsoft.com/fwlink/?linkid=392408).

Доступ к данным сотрудников Майкрософт ограничен. Доступ производится только с вашего разрешения и в случае, если это необходимо для поддержки использования вами Application Insights. 

Совокупные данные от приложений всех наших клиентов (например, скорость передачи данных и средний размер трассировок) используются для улучшения Application Insights.

#### <a name="could-someone-elses-telemetry-interfere-with-my-application-insights-data"></a>Могут ли данные телеметрии другого пользователя повлиять на мои данные Application Insights?
Дополнительные данные телеметрии могут отправляться в вашу учетную запись с помощью ключа инструментирования, который можно найти в коде веб-страниц. При достаточном объеме дополнительных данных вашим метрики неправильно представляют производительность и использование приложения.

Если вы совместно используете код в других проектах, не забудьте удалить ключ инструментирования.

## <a name="is-the-data-encrypted"></a>Шифруются ли данные?
Все данные шифруются неактивных данных и перемещаются между центрами обработки данных.

#### <a name="is-the-data-encrypted-in-transit-from-my-application-to-application-insights-servers"></a>Данные шифруются при передаче из приложения на серверы Application Insights?
Да, мы используем HTTPS для отправки данных на портал практически из всех пакетов SDK, включая веб-серверы, устройства и веб-страницы HTTPS. 

## <a name="does-the-sdk-create-temporary-local-storage"></a>Создает ли пакет SDK временное локальное хранилище?

Да, некоторые каналы телеметрии будут хранить данные локально, если конечная точка не доступна. Просмотрите нижеуказанный перечень платформ и каналов телеметрии, которые затрагиваются.

Каналы телеметрии, использующие локальное хранилище, создают временные файлы в каталогах TEMP или APPDATA, которые ограничиваются конкретной учетной записью, в которой выполняется приложение. Это может произойти, если конечная точка временно недоступна или вы достигли предела регулирования. Каналы телеметрии возобновят отправку новых и сохраненных данных, когда проблема решится.

Эти сохраненные данные не шифруются локально. Если это проблема, проверьте данные и Ограничьте набор частных данных. (Дополнительные сведения см. [в разделе Экспорт и удаление закрытых данных](../logs/personal-data-mgmt.md#how-to-export-and-delete-private-data).)

Если клиенту необходимо настроить этот каталог с конкретными требованиями к безопасности, его можно настроить для каждой платформы. Убедитесь, что процесс для запуска приложения имеет доступ к каталогу, а также убедитесь, что каталог защищен от возможности прочтения данных телеметрии нежелательными пользователями.

### <a name="java"></a>Java

`C:\Users\username\AppData\Local\Temp` используется для сохраненных данных. Это расположение не настраивается в каталоге конфигурации, и разрешение на доступ к этой папке ограничено конкретным пользователем с необходимыми полномочиями. (Дополнительные сведения см. в разделе [Реализация](https://github.com/Microsoft/ApplicationInsights-Java/blob/40809cb6857231e572309a5901e1227305c27c1a/core/src/main/java/com/microsoft/applicationinsights/internal/util/LocalFileSystemUtils.java#L48-L72).)

###  <a name="net"></a>.NET

По умолчанию `ServerTelemetryChannel` использует локальную папку данных приложения текущего пользователя `%localAppData%\Microsoft\ApplicationInsights` или временную папку `%TMP%`. (См. [пример реализации](https://github.com/Microsoft/ApplicationInsights-dotnet/blob/91e9c91fcea979b1eec4e31ba8e0fc683bf86802/src/ServerTelemetryChannel/Implementation/ApplicationFolderProvider.cs#L54-L84) здесь.)


С помощью файла конфигурации:
```xml
<TelemetryChannel Type="Microsoft.ApplicationInsights.WindowsServer.TelemetryChannel.ServerTelemetryChannel,   Microsoft.AI.ServerTelemetryChannel">
    <StorageFolder>D:\NewTestFolder</StorageFolder>
</TelemetryChannel>
```

С помощью кода:

- Удалите ServerTelemetryChannel с файла конфигурации
- Добавьте этот фрагмент кода в ваш файл конфигурации:
  ```csharp
  ServerTelemetryChannel channel = new ServerTelemetryChannel();
  channel.StorageFolder = @"D:\NewTestFolder";
  channel.Initialize(TelemetryConfiguration.Active);
  TelemetryConfiguration.Active.TelemetryChannel = channel;
  ```

### <a name="netcore"></a>NetCore

По умолчанию `ServerTelemetryChannel` использует локальную папку данных приложения текущего пользователя `%localAppData%\Microsoft\ApplicationInsights` или временную папку `%TMP%`. (См. [пример реализации](https://github.com/Microsoft/ApplicationInsights-dotnet/blob/91e9c91fcea979b1eec4e31ba8e0fc683bf86802/src/ServerTelemetryChannel/Implementation/ApplicationFolderProvider.cs#L54-L84) здесь.) 

В среде Linux локальное хранилище отключено, если только не указана 	папка хранилища.

> [!NOTE]
> После выпуска 2.15.0-beta3 и более поздних версий локальное хранилище автоматически создается для Linux, Mac и Windows. Для систем, отличных от Windows, пакет SDK автоматически создаст папку локального хранилища на основе следующей логики:
> - `${TMPDIR}` — Если `${TMPDIR}` задано значение "переменная среды", используется это расположение.
> - `/var/tmp` — Если предыдущее расположение не существует, будет предпринята попытка `/var/tmp` .
> - `/tmp` — Если и предыдущее расположение не существуют, попробуйте `tmp` . 
> - Если ни одно из этих расположений не существует, локальное хранилище не создается, и по-прежнему требуется настройка вручную. [Для получения полной информации о реализации](https://github.com/microsoft/ApplicationInsights-dotnet/pull/1860).

Следующий фрагмент кода демонстрирует как установить `ServerTelemetryChannel.StorageFolder` в метод `ConfigureServices()` вашего класса `Startup.cs`:

```csharp
services.AddSingleton(typeof(ITelemetryChannel), new ServerTelemetryChannel () {StorageFolder = "/tmp/myfolder"});
```

(Дополнительные сведения см. в разделе [AspNetCore Custom Configuration](https://github.com/Microsoft/ApplicationInsights-aspnetcore/wiki/Custom-Configuration).)

### <a name="nodejs"></a>Node.js

По умолчанию `%TEMP%/appInsights-node{INSTRUMENTATION KEY}` используется для сохраненных данных. Разрешение на доступ к этой папке дано только текущему пользователю и администраторам. (См. [пример реализации](https://github.com/Microsoft/ApplicationInsights-node.js/blob/develop/Library/Sender.ts) здесь.)

Префикс папки `appInsights-node` можно перевести в ручной режим, изменив значение времени выполнения статической переменной `Sender.TEMPDIR_PREFIX` в [Sender.ts](https://github.com/Microsoft/ApplicationInsights-node.js/blob/7a1ecb91da5ea0febf5ceab13d6a4bf01a63933d/Library/Sender.ts#L384).

### <a name="javascript-browser"></a>JavaScript (для браузера)

[Хранилище сеансов HTML5](https://developer.mozilla.org/en-US/docs/Web/API/Window/sessionStorage) используется для сохранения данных. Используются два отдельных буфера: `AI_buffer` и `AI_sent_buffer` . Данные телеметрии, которые находятся в пакете и ожидают отправки, хранятся в `AI_buffer` . Данные телеметрии, которые были только что отправлены, помещаются в `AI_sent_buffer` , пока сервер приема не ответит, что он успешно получен. Когда данные телеметрии успешно получены, они удаляются из всех буферов. В случае временных сбоев (например, если пользователь теряет подключение к сети), данные телеметрии остаются в `AI_buffer` до тех пор, пока она не будет успешно получена или сервер приема не ответит, что данные телеметрии недопустимы (например, неправильная схема или слишком старая).

Буферы телеметрии можно отключить, задав [`enableSessionStorageBuffer`](https://github.com/microsoft/ApplicationInsights-JS/blob/17ef50442f73fd02a758fbd74134933d92607ecf/legacy/JavaScript/JavaScriptSDK.Interfaces/IConfig.ts#L31) для значение `false` . Когда хранилище сеанса отключено, в качестве постоянного хранилища используется локальный массив. Поскольку пакет SDK для JavaScript выполняется на клиентском устройстве, он имеет доступ к этому расположению в средствах разработчика браузера.

### <a name="opencensus-python"></a>Python для OpenCensus

По умолчанию пакет SDK для Опенценсус Python использует папку текущего пользователя `%username%/.opencensus/.azure/` . Разрешение на доступ к этой папке дано только текущему пользователю и администраторам. (См. статью [Реализация](https://github.com/census-instrumentation/opencensus-python/blob/master/contrib/opencensus-ext-azure/opencensus/ext/azure/common/storage.py) здесь.) Папка с сохраненными данными будет называться после файла Python, который создал данные телеметрии.

Вы можете изменить расположение файла хранилища, передав `storage_path` параметр в конструкторе используемого средства экспорта.

```python
AzureLogHandler(
  connection_string='InstrumentationKey=00000000-0000-0000-0000-000000000000',
  storage_path='<your-path-here>',
)
```

## <a name="how-do-i-send-data-to-application-insights-using-tls-12"></a>Как отправить данные в Application Insights с помощью TLS 1.2?

Чтобы обеспечить безопасность данных в пути к конечным точкам Application Insights, мы настоятельно рекомендуем клиентам настроить приложение на использование протокола TLS как минимум версии 1.2. Более старые версии протоколов TLS/SSL оказались уязвимы. Хотя они все еще используются для обеспечения обратной совместимости, применять их **не рекомендуется**, так как представители отрасли стремятся как можно скорее отказаться от их поддержки. 

[Совет по стандартам безопасности PCI](https://www.pcisecuritystandards.org/) установил [срок 30 июня 2018](https://www.pcisecuritystandards.org/pdfs/PCI_SSC_Migrating_from_SSL_and_Early_TLS_Resource_Guide.pdf) для отключения старых версий TLS/SSL и обновления до более безопасных протоколов. Как только Azure прекратит поддержку предыдущих версий, приложения/клиенты, не поддерживающие протокол TLS хотя бы версии 1.2, не смогут отправлять данные в Application Insights. Подход, применяемый для тестирования и проверки поддержки протокола TLS приложением, будет зависеть от операционной системы или платформы, а также языка или инфраструктуры, используемых приложением.

Не рекомендуется явно задавать приложение для использования TLS 1,2, если это не требуется, так как это может привести к нарушению функций безопасности на уровне платформы, позволяющих автоматически обнаруживать и использовать преимущества более новых более защищенных протоколов, так как они становятся доступными, например, TLS 1,3. Советуем тщательно проверять код приложения на наличие жестко прописанных версий протокола TLS/SSL.

### <a name="platformlanguage-specific-guidance"></a>Руководство по отдельным платформам и языкам

|Платформа или язык | Поддержка | Дополнительные сведения |
| --- | --- | --- |
| Службы приложений Azure  | Поддерживается, может потребоваться настройка. | О поддержке объявили в апреле 2018 г. [Сведения о конфигурации](https://azure.github.io/AppService/2018/04/17/App-Service-and-Functions-hosted-apps-can-now-update-TLS-versions!) см. в объявлении о выпуске.  |
| Приложения-функции Azure | Поддерживается, может потребоваться настройка. | О поддержке объявили в апреле 2018 г. [Сведения о конфигурации](https://azure.github.io/AppService/2018/04/17/App-Service-and-Functions-hosted-apps-can-now-update-TLS-versions!) см. в объявлении о выпуске. |
|.NET | Поддерживается, конфигурация зависит от версии. | Подробные сведения о конфигурации для .NET 4,7 и более ранних версий см. в [этих инструкциях](/dotnet/framework/network-programming/tls#support-for-tls-12).  |
|Монитор состояния | Поддерживается, требуется настройка | Монитор состояния полагается [](/windows-server/security/tls/tls-registry-settings)на  +  [конфигурацию .NET](/dotnet/framework/network-programming/tls#support-for-tls-12) конфигурации ОС для поддержки TLS 1,2.
|Node.js |  Поддерживается, для версии 10.5.0 может потребоваться настройка. | Используйте [официальную документацию по Node.js TLS/SSL](https://nodejs.org/api/tls.html) для любой конфигурации приложения. |
|Java | Поддерживается, в JDK поддержка протокола TLS 1.2 добавлена в [обновлении 121 для JDK 6](https://www.oracle.com/technetwork/java/javase/overview-156328.html#R160_121) и [JDK 7](https://www.oracle.com/technetwork/java/javase/7u131-relnotes-3338543.html). | JDK 8 использует [протокол TLS 1.2 по умолчанию](https://blogs.oracle.com/java-platform-group/jdk-8-will-use-tls-12-as-default).  |
|Linux | Как правило, дистрибутивы Linux для поддержки протокола TLS 1.2 используют [OpenSSL](https://www.openssl.org).  | Убедитесь, что ваша версия OpenSSL поддерживается, проверив [журнал изменений OpenSSL](https://www.openssl.org/news/changelog.html).|
| Windows 8.0–10 | Поддерживается и включена по умолчанию. | Убедитесь, что вы все еще используете [параметры по умолчанию](/windows-server/security/tls/tls-registry-settings).  |
| Windows Server 2012–2016 | Поддерживается и включена по умолчанию. | Проверка того, что все еще используются [параметры по умолчанию](/windows-server/security/tls/tls-registry-settings) |
| Windows 7 с пакетом обновления 1 и Windows Server 2008 R2 с пакетом обновления 1 | Поддерживается, но не включена по умолчанию. | Информацию о том, как ее включить, см. на странице [Transport Layer Security (TLS) registry settings](/windows-server/security/tls/tls-registry-settings) (Параметры реестра TLS).  |
| Windows Server 2008 с пакетом обновления 2 (SP2) | Для поддержки протокола TLS 1.2 требуется обновление. | См. статью об [обновлении для добавления поддержки TLS 1.2 в Windows Server 2008 с пакетом обновления 2](https://support.microsoft.com/help/4019276/update-to-add-support-for-tls-1-1-and-tls-1-2-in-windows-server-2008-s). |
|Windows Vista | Не поддерживается. | Недоступно

### <a name="check-what-version-of-openssl-your-linux-distribution-is-running"></a>Проверка версии OpenSSL, используемой дистрибутивом Linux

Чтобы проверить, какая версия OpenSSL установлена, откройте терминал и выполните команду:

```terminal
openssl version -a
```

### <a name="run-a-test-tls-12-transaction-on-linux"></a>Выполнение тестовой транзакции TLS 1.2 на платформе Linux

Чтобы выполнить предварительный тест, чтобы узнать, может ли ваша система Linux обмениваться данными через TLS 1,2, откройте терминал и выполните команду:

```terminal
openssl s_client -connect bing.com:443 -tls1_2
```

## <a name="personal-data-stored-in-application-insights"></a>Персональные данные, хранимые в Application Insights

Этот вопрос подробно рассмотрен в нашей [статье о персональных данных в Application Insights](../logs/personal-data-mgmt.md).

#### <a name="can-my-users-turn-off-application-insights"></a>Могут ли мои пользователи отключить Application Insights?
Не напрямую. Мы не предоставляем параметр, с помощью которого пользователи могут отключить Application Insights.

Однако вы можете реализовать такую возможность в своем приложении. Все пакеты SDK содержат параметр API, который отключает сбор данных телеметрии. 

## <a name="data-sent-by-application-insights"></a>Данные, передаваемые службой Application Insights
На разных платформах пакеты SDK различаются, при этом существует несколько компонентов, которые можно установить. (См. [Application Insights-Overview][start].) Каждый компонент отправляет различные данные.

#### <a name="classes-of-data-sent-in-different-scenarios"></a>Классы данных, передаваемых в различных сценариях

| Ваше действие | Собираемые классы данных (см. следующую таблицу) |
| --- | --- |
| [Добавление пакета SDK для Application Insights в веб-проект .NET][greenbrown] |ServerContext<br/>Выводимые<br/>Счетчики производительности<br/>Requests<br/>**Исключения**<br/>Сеанс<br/>пользователи |
| [Установка монитора состояния на сервере IIS][redfield] |Зависимости<br/>ServerContext<br/>Выводимые<br/>Счетчики производительности |
| [Добавление пакета SDK для Application Insights в веб-приложение Java][java] |ServerContext<br/>Выводимые<br/>Запрос<br/>Сеанс<br/>пользователи |
| [Добавление пакета SDK для JavaScript на веб-страницу][client] |ClientContext <br/>Выводимые<br/>Страница<br/>ClientPerf<br/>Ajax |
| [Определение свойств по умолчанию][apiproperties] |**Свойства** всех стандартных и настраиваемых событий |
| [Вызов TrackMetric][api] |Числовые значения<br/>**Свойства** |
| [Вызов Track*][api] |Имя события<br/>**Свойства** |
| [Вызов TrackException][api] |**Исключения**<br/>Дамп стека<br/>**Свойства** |
| Пакету SDK не может собрать данные. Пример: <br/> не удается получить доступ к счетчикам производительности;<br/> порождается исключение в инициализаторе телеметрии. |Диагностика SDK |

Сведения о [пакетах SDK для других платформ][platforms] можно получить в соответствующей документации.

#### <a name="the-classes-of-collected-data"></a>Классы собираемых данных

| Собираемый класс данных | Включает (неисчерпывающий список) |
| --- | --- |
| **Свойства** |**Все данные — определяется кодом** |
| DeviceContext |`Id`, IP, язык, модель устройства, сеть, тип сети, имя изготовителя оборудования, разрешение экрана, экземпляр роли, имя роли, тип устройства |
| ClientContext |ОС, языковой стандарт, язык, сеть, разрешение окна |
| Сеанс |`session id` |
| ServerContext |Имя компьютера, языковой стандарт, ОС, устройство, сеанс пользователя, контекст пользователя, операция |
| Выводимые |географическое расположение на основе IP-адреса, отметка времени, ОС, браузер |
| Метрики |Имя и значение метрики |
| События |Имя и значение события |
| PageViews |URL-адрес и имя страницы или имя экрана |
| Производительность клиента |URL-адрес или имя страницы, время загрузки браузера |
| Ajax |Вызовы HTTP от веб-страницы на сервер |
| Requests |URL-адрес, длительность, код ответа |
| Зависимости |Тип (SQL, HTTP,...), строка подключения или URI, синхронизация/асинхронная, длительность, успешно, инструкция SQL (с монитор состояния) |
| **Исключения** |Тип, **сообщение**, стеки вызовов, исходный файл, номер строки, `thread id` |
| Сбои |`Process id`, `parent process id` , `crash thread id` ; исправление приложения, `id` , сборка;  тип исключения, адрес, причина; скрытые символы и регистры, двоичные начальные и конечные адреса, имя двоичного файла и путь, тип ЦП |
| Трассировка |**Сообщение** и уровень серьезности |
| Счетчики производительности |Время процессора, объем доступной памяти, частота запросов, скорость исключения, байтов исключительного пользования процесса, скорость ввода-вывода, длительность запроса, длина очереди запросов |
| Доступность |Код ответа веб-теста, длительность каждого шага теста, имя теста, метка времени, успешное завершение, время отклика, расположение теста. |
| Диагностика SDK |Сообщение трассировки или исключение |

Вы можете [отключить некоторые данные, изменив файл ApplicationInsights.config][config].

> [!NOTE]
> IP-адрес клиента используется для определения географического расположения, но сейчас данные об IP-адресах больше не сохраняются по умолчанию, а в соответствующее поле записываются нули. Дополнительные сведения об обработке персональных данных см. в этой [статье](../logs/personal-data-mgmt.md#application-data). Если необходимо сохранить данные IP-адреса, в [статье о коллекции IP-адресов](./ip-collection.md) мы пошаговым руководство по Вашим параметрам.

## <a name="can-i-modify-or-update-data-after-it-has-been-collected"></a>Можно ли изменить или обновить данные после сбора?

Нет, данные доступны только для чтения и могут быть удалены только с помощью функции очистки. Дополнительные сведения см. [в руководстве по личным данным, хранящимся в log Analytics и Application Insights](../logs/personal-data-mgmt.md#delete).

## <a name="credits"></a>Благодарности
Этот продукт включает в себя GeoLite2 данные, созданные Максминд, доступные в [https://www.maxmind.com](https://www.maxmind.com) .



<!--Link references-->

[api]: ./api-custom-events-metrics.md
[apiproperties]: ./api-custom-events-metrics.md#properties
[client]: ./javascript.md
[config]: ./configuration-with-applicationinsights-config.md
[greenbrown]: ./asp-net.md
[java]: ./java-get-started.md
[platforms]: ./platforms.md
[pricing]: https://azure.microsoft.com/pricing/details/application-insights/
[redfield]: ./monitor-performance-live-website-now.md
[start]: ./app-insights-overview.md

