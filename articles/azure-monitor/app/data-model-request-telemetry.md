---
title: Модель данных для телеметрии запросов в Azure Application Insights
description: Модель данных Application Insights для телеметрии запросов
ms.topic: conceptual
ms.date: 01/07/2019
ms.reviewer: sergkanz
ms.openlocfilehash: 7a352f4ce3528d395599a91b53031c74b0873152
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "87320567"
---
# <a name="request-telemetry-application-insights-data-model"></a>Телеметрия запросов: модель данных Application Insights

Элемент телеметрии запроса (в [Application Insights](./app-insights-overview.md)) представляет логическую последовательность выполнения, активируемую внешним запросом к приложению. Выполнение каждого запроса идентифицируется по уникальным `ID` и `url`, содержащим все параметры выполнения. Можно сгруппировать запросы, по логическому имени `name` и определить источник `source` этого запроса. Выполнение кода может давать результат `success` или `fail`, а также имеет определенную длительность `duration`. Как успешные, так и неудачные выполнения можно дополнительно сгруппировать по `resultCode`. Время начала для телеметрии запроса определяется на уровне конверта.

Телеметрия запросов поддерживает стандартную модель расширяемости с помощью пользовательских `properties` и `measurements`.

## <a name="name"></a>Имя

Имя запроса представляет путь кода, используемый для обработки запроса. Низкое значение кратности для улучшения группирования запросов. Для HTTP-запросов оно представляет HTTP-метод и шаблон пути URL-адреса, например `GET /values/{id}` без фактического значения `id`.

Веб-пакет SDK Application Insights отправляет имя запроса "как есть" с учетом регистра. Группирование в пользовательском интерфейсе учитывает регистр, поэтому `GET /Home/Index` регистрируется отдельно от `GET /home/INDEX`, хотя они часто дают одинаковый контроллер и выполняемое действие. Причина заключается в том, что в общем случае URL-адреса [учитывают регистр](https://www.w3.org/TR/WD-html40-970708/htmlweb.html). Вы можете захотеть просмотреть, возникли ли все события `404` для URL-адресов, введенных прописными буквами. Дополнительные сведения о коллекции имен запросов с помощью веб-пакета SDK для ASP.NET см. в записи [блога](https://apmtips.com/posts/2015-02-23-request-name-and-url/).

Максимальная длина: 1024 символа

## <a name="id"></a>ID

Идентификатор для экземпляра вызова запроса. Используется для корреляции между запросом и другими элементами телеметрии. Должен быть глобально уникальным. Дополнительные сведения см. на странице [корреляции](./correlation.md).

Максимальная длина: 128 символа

## <a name="url"></a>Url

URL-адрес запроса со всеми параметрами строки запроса.

Максимальная длина: 2048 символов

## <a name="source"></a>Источник

Источник запроса. Примерами являются ключ инструментирования или IP-адрес вызывающего объекта. Дополнительные сведения см. на странице [корреляции](./correlation.md).

Максимальная длина: 1024 символа

## <a name="duration"></a>Duration

Длительность запроса в формате: `DD.HH:MM:SS.MMMMMM`. Должна быть положительной и меньше `1000` дн. Это поле является обязательным, так как телеметрия запросов представляет операцию с началом и концом.

## <a name="response-code"></a>Код ответа

Результат выполнения запроса. Код состояния HTTP для HTTP-запросов. Это может быть значение `HRESULT` или тип исключения для других типов запросов.

Максимальная длина: 1024 символа

## <a name="success"></a>Успешно

Указание того, был ли вызов успешным. Это обязательное поле. Если явно не задано значение `false`, запрос считается успешным. Задайте значение `false`, если операция была прервана из-за исключения или возвратила код ошибки.

Для веб-приложений Application Insights определяет запрос как удачный, если код отклика меньше `400` или равен `401`. Однако в некоторых случаях такое сопоставление по умолчанию не соответствует семантике приложения. Код ответа `404` может означать "нет записей", что может быть частью стандартной рабочей процедуры. Это также может указывать на неработающую ссылку. Для неработающих ссылок можно даже реализовать более сложную логику. Неработающие ссылки можно пометить как ошибки, только если при анализе источника ссылки URL-адреса установлено, что они находятся на одном сайте. Кроме того, пометить их как ошибки можно при обращении из мобильного приложения организации. Аналогично `301` и `302` указывает на сбой при обращении из клиента, который не поддерживает перенаправление.

Частично принятое содержимое `206` может означать сбой всего запроса. Например, конечная точка Application Insights получает пакет элементов телеметрии в виде одного запроса. Если какие-либо элементы в пакете не были обработаны успешно, система возвращает `206`. Увеличение частоты `206` указывает на проблему, которую нужно изучить. Аналогичная логика применяется к множественному состоянию `207`, где success может быть наихудшим из отдельных кодов ответа.

Дополнительные сведения о коде результата запроса и коде состояния см. в этой [записи блога](https://apmtips.com/posts/2016-12-03-request-success-and-response-code/).

## <a name="custom-properties"></a>Пользовательские свойства

[!INCLUDE [application-insights-data-model-properties](../../../includes/application-insights-data-model-properties.md)]

## <a name="custom-measurements"></a>Пользовательские измерения

[!INCLUDE [application-insights-data-model-measurements](../../../includes/application-insights-data-model-measurements.md)]

## <a name="next-steps"></a>Дальнейшие действия

- [Создание телеметрии настраиваемых запросов](./api-custom-events-metrics.md#trackrequest)
- В [этой статье](data-model.md) представлены типы данных и модель данных для Application Insights.
- Вы можете узнать, как [настроить приложение ASP.NET Core](./asp-net.md) с помощью Application Insights.
- Ознакомление с [платформами](./platforms.md), поддерживаемыми Application Insights.

