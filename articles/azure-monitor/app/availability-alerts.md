---
title: Настройка оповещений о доступности с помощью Azure Application Insights | Документация Майкрософт
description: Узнайте, как настроить веб-тесты в Application Insights. Получение оповещений, когда веб-сайт становится недоступным или медленно реагирует на запросы.
ms.topic: conceptual
author: lgayhardt
ms.author: lagayhar
ms.date: 06/19/2019
ms.reviewer: sdash
ms.openlocfilehash: cbafa7997d203cf06a3e91965355258f0088d77e
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100589886"
---
# <a name="availability-alerts"></a>Оповещения о доступности

[Azure Application Insights](./app-insights-overview.md) отправляет веб-запросы через одинаковые промежутки времени из разных точек по всему миру. Он может оповещать вас о том, что приложение не отвечает, или если оно реагирует слишком медленно.

## <a name="enable-alerts"></a>Включение оповещений

Оповещения теперь автоматически включаются по умолчанию, но для полной настройки предупреждения сначала необходимо создать тест доступности.

![Интерфейс создания](./media/availability-alerts/create-test.png)

> [!NOTE]
>  В [новых унифицированных оповещениях](../alerts/alerts-overview.md) настройки серьезности и уведомлений для правила генерации оповещений с помощью [группы действий](../alerts/action-groups.md) **должны** настраиваться в интерфейсе оповещений. Без следующих действий вы будете получать уведомления только на портале.

1. Сохранив тест доступности, щелкните многоточие на вкладке "Сведения" для созданного теста. Выберите "Изменить оповещение".

   ![На снимке экрана показано, как изменить оповещение, выбранное в меню.](./media/availability-alerts/edit-alert.png)

2. Задайте требуемый уровень серьезности, описание правила и самое важное — группу действий, настройки уведомлений которой вы хотите использовать для этого правила генерации оповещений.

   ![На снимке экрана показана страница управления правилами, на которой можно изменить правило.](./media/availability-alerts/set-action-group.png)

> [!NOTE]
> Оповещения о доступности, созданные с помощью этого интерфейса, основаны на состоянии. Это означает, что при выполнении условий предупреждения создается одно предупреждение, если сайт обнаруживается как недоступный. Если сайт по-прежнему работает при следующем вычислении условий оповещения, это не приведет к созданию нового предупреждения. Поэтому, если ваш сайт не работает в течение часа и вы настроили оповещение по электронной почте, вы получите только сообщение электронной почты, когда сайт выйдет из системы, и последующее сообщение электронной почты при резервном копировании сайта. Вы не получите непрерывные оповещения о том, что сайт по-прежнему недоступен.

### <a name="alert-on-x-out-of-y-locations-reporting-failures"></a>Оповещение о том, что X из Y расположений сообщают о сбоях

Правило генерации оповещений о том, что X из Y расположений сообщают о сбоях, включено по умолчанию в [новом унифицированном интерфейсе оповещений](../alerts/alerts-overview.md) при создании нового теста доступности. Вы можете отказаться, выбрав "классический" вариант или отключив правило генерации оповещений.

> [!NOTE]
> Настройте группы действий, чтобы получать уведомления при активации оповещения, выполнив описанные выше действия. Без этого шага вы будете получать при активации правила только уведомления на портале.
>

### <a name="alert-on-availability-metrics"></a>Оповещения на основе метрик доступности

С помощью [новых унифицированных оповещений](../alerts/alerts-overview.md) можно создавать оповещения о доступности сегментированных агрегированных метрик доступности и длительности теста:

1. Выберите ресурс Application Insights в интерфейсе метрик и укажите метрику доступности:

    ![Выбор метрики доступности](./media/availability-alerts/select-metric.png)

2. Команда настройки оповещений в меню перенаправит вас на новый интерфейс, где можно выбрать определенные тесты или расположения, чтобы настроить правило генерации оповещений. Здесь можно также настроить группы действий для этого правила.

### <a name="alert-on-custom-analytics-queries"></a>Оповещение о настраиваемых аналитических запросах

С помощью [новых унифицированных оповещений](../alerts/alerts-overview.md) вы можете создать оповещение [о настраиваемых запросах к журналу](../alerts/alerts-unified-log.md). С помощью настраиваемых запросов вы можете создать оповещение с любым произвольным условием, которое поможет вам получить самый надежный сигнал о проблемах с доступностью. Это также применимо, если вы отправляете пользовательские результаты доступности с помощью пакета SDK TrackAvailability.

> [!Tip]
> К метрикам доступности данных относятся все настраиваемые результаты доступности, которые вы может отправлять путем вызова TrackAvailability SDK. Поддержку оповещений о метриках можно использовать для оповещения о доступности результатов.
>

## <a name="automate-alerts"></a>Автоматизация оповещений

Чтобы автоматизировать этот процесс с помощью шаблонов Azure Resource Manager, см. документацию [Создание оповещения метрики с помощью шаблона диспетчер ресурсов](../alerts/alerts-metric-create-templates.md#template-for-an-availability-test-along-with-a-metric-alert) .

## <a name="troubleshooting"></a>Устранение неполадок

См. инструкции по [устранению неполадок](troubleshoot-availability.md).

## <a name="next-steps"></a>Дальнейшие действия

* [Многошаговые веб-тесты](availability-multistep.md)
* [Веб-тесты проверки связи по URL-адресу](monitor-web-app-availability.md)

