---
title: Телеметрия Application Insights в Visual Studio CodeLens | Документация Майкрософт
description: Быстро получайте доступ к телеметрии запросов и исключений Application Insights с помощью CodeLens в Visual Studio.
ms.topic: conceptual
ms.date: 03/17/2017
ms.custom: vs-azure
ms.openlocfilehash: d412441a7a80a14a0bc7a70de8020692f8f573d6
ms.sourcegitcommit: c8b50a8aa8d9596ee3d4f3905bde94c984fc8aa2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/28/2021
ms.locfileid: "105642720"
---
# <a name="application-insights-telemetry-in-visual-studio-codelens"></a>Телеметрия Application Insights в Visual Studio CodeLens
Методы в коде веб-приложения можно обозначить с помощью данных телеметрии об исключениях во время выполнения и времени ответа на запрос. Если установить в приложении [Azure Application Insights](./app-insights-overview.md), данные телеметрии будут отображаться в Visual Studio [CodeLens](/visualstudio/ide/find-code-changes-and-other-history-with-codelens) в виде примечаний в верхней части данных о функции. Там обычно приведены такие полезные сведения, как число расположений со ссылками на функцию или имя пользователя, который последним вносил в нее изменения.

![CodeLens](./media/visual-studio-codelens/codelens-overview.png)

> [!NOTE]
> Надстройка Application Insights в CodeLens доступна в Visual Studio 2015 с обновлением 3 и более поздних версиях, а также в [расширении средств анализа для разработчиков](https://visualstudiogallery.msdn.microsoft.com/82367b81-3f97-4de1-bbf1-eaf52ddc635a). Компонент CodeLens доступен в выпусках Visual Studio Enterprise и Professional.
> 
> 

## <a name="where-to-find-application-insights-data"></a>Поиск данных Application Insights
Данные телеметрии Application Insights отображаются в индикаторах CodeLens методов открытых запросов в веб-приложении. Индикаторы CodeLens отображаются над объявлениями метода и другими объявлениями в коде C# и Visual Basic. При наличии данных Application Insights для метода вы увидите индикаторы запросов и исключений, например "Запросов: 100, не выполнено: 1 %" или "Исключений: 10". Для получения дополнительных сведений щелкните индикатор CodeLens. 

> [!TIP]
> Индикаторы запросов и исключений Application Insights могут загрузиться через несколько секунд после появления других индикаторов CodeLens.
> 
> 

## <a name="exceptions-in-codelens"></a>Исключения в CodeLens
![На снимке экрана показаны 47 исключений, отображаемых в CodeLens.](./media/visual-studio-codelens/codelens-exceptions.png)

Индикатор исключений CodeLens показывает количество исключений, возникших за последние 24 часа, для 15 наиболее часто возникающих в приложении исключений за период обработки запросов, выполненных с помощью метода.

Щелкните индикатор исключения CodeLens для получения дополнительных сведений:

* Процентное изменение в количестве исключений за последние 24 часа по сравнению с предыдущими 24 часами.
* Выберите **Перейти к коду** , чтобы перейти к исходному коду функции, которая выдает исключение.
* Выберите **Поиск** , чтобы запросить все экземпляры этого исключения, возникшие за последние 24 часа.
* Выберите **Тренд** , чтобы отобразить тренды возникновения этого исключения за последние 24 часа.
* Выберите **Просмотреть все исключения в этом приложении** , чтобы запросить все исключения, возникшие за последние 24 часа.
* Выберите **Исследовать тренды исключений** , чтобы просмотреть тренды возникновения всех исключений за последние 24 часа. 

> [!TIP]
> Если в CodeLens отображается индикатор "Исключений: 0", но известно, что исключения должны быть, убедитесь, что в CodeLens выбран нужный ресурс Application Insights. Чтобы выбрать другой ресурс, щелкните проект правой кнопкой мыши в обозревателе решений и выберите **Application Insights > Выбрать источник телеметрии**. В CodeLens отображаются только 15 наиболее часто встречающихся исключений в приложении за последние 24 часа, поэтому, если исключение на 16-м или одном из последующих мест по частоте возникновения, вы увидите индикатор "Исключений: 0". Исключения из представлений ASP.NET могут не отображаться в методах контроллера, с помощью которых были созданы эти представления.
> 
> [!TIP]
> Если в CodeLens отображается индикатор "Исключений: ?", необходимо связать учетную запись Azure с Visual Studio. Также это возможно, если срок действия учетных данных Azure истек. В любом случае щелкните индикатор "Исключений: ?" и выберите **Добавить учетную запись...**, чтобы указать учетные данные.
> 
> 

## <a name="requests-in-codelens"></a>Запросы в CodeLens
![На снимке экрана показаны сведения о 684 запросах, включая 7% сбоев.](./media/visual-studio-codelens/codelens-requests.png)

Индикатор запросов CodeLens показывает количество HTTP-запросов, выполненных с помощью метода за последние 24 часа, а также процент невыполненных запросов.

Щелкните индикатор запросов CodeLens для получения дополнительных сведений.

* Абсолютное и процентное изменение количества запросов, невыполненных запросов и среднее время ответа за последние 24 часа по сравнению с предыдущими 24 часами.
* Надежность метода, которая вычисляется как процент запросов, не завершившихся сбоем, за последние 24 часа.
* Выберите **Поиск** для запросов или невыполненных запросов, чтобы запросить все (невыполненные) запросы за последние 24 часа.
* Выберите **Тренд** , чтобы просмотреть тренды запросов, невыполненных запросов или среднего времени ответа за последние 24 часа.
* Выберите имя ресурса Application Insights в верхнем левом углу подробного представления CodeLens, чтобы изменить ресурс, который является источником данных CodeLens.

## <a name="next-steps"></a><a name="next"></a>Следующие шаги
* **[Работа с Application Insights в Visual Studio](./visual-studio.md)**. Поиск телеметрии, просмотр данных в CodeLens и настройка Application Insights — все это в Visual Studio 
* **[Работа с порталом Application Insights](./overview-dashboard.md)**. Панели мониторинга, эффективные средства диагностики и анализа, оповещения, карта динамических зависимостей приложения, а также экспорт данных телеметрии. 

