---
title: Обзор мониторинга оповещений и уведомлений в Azure
description: Общие сведения о предупреждениях в Azure Monitor
ms.subservice: alerts
ms.topic: conceptual
ms.date: 02/14/2021
ms.openlocfilehash: e2d447b7407ed874d9c183c5cd2009882f1d6b3b
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101723594"
---
# <a name="overview-of-alerts-in-microsoft-azure"></a>Обзор оповещений в Microsoft Azure 

В этой статье объясняется, что такое оповещения, каковы их преимущества и как начать их использовать.  

## <a name="what-are-alerts-in-microsoft-azure"></a>Что такое оповещения в Microsoft Azure?

Оповещения заблаговременно уведомляют Вас при обнаружении проблем с инфраструктурой или приложением, использующими данные мониторинга в Azure Monitor. Они позволяют выявить и устранить проблемы, прежде чем пользователи системы обнаружат их. 

## <a name="overview"></a>Обзор

Поток оповещений приведен на схеме ниже. 

![Схема потока предупреждений](media/alerts-overview/Azure-Monitor-Alerts.svg)

Правила генерации оповещений отделены от предупреждений и действий, выполняемых при срабатывании оповещения. Правило генерации оповещений фиксирует целевой объект и критерии для предупреждений. Правило генерации оповещений можно включить или отключить. Оповещения срабатывают только при включенном состоянии. 

Ниже приведены ключевые атрибуты правила генерации оповещений.

**Конечный ресурс.** Определяет область и сигналы, доступные для оповещений. Целью может быть любой ресурс Azure. Примеры целей:

- виртуальные машины.
- Учетные записи хранения.
- Рабочая область Log Analytics.
- Application Insights. 

Для некоторых ресурсов (например, виртуальных машин) в качестве целевого объекта правила оповещения можно указать несколько ресурсов.

**Сигнал** , порожденный целевым ресурсом. Сигналы могут иметь следующие типы: метрика, журнал действий, Application Insights и журнал.

**Критерий** — сочетание сигнала и логики, применяемой к целевому ресурсу. Примеры: 

- Загрузка ЦП > 70 %
- Время ответа сервера > 4 мс 
- Число результатов запроса журнала > 100

**Имя предупреждения** — конкретное имя для правила генерации оповещений, настроенное пользователем.

**Описание предупреждения** — описание правила генерации оповещений, настроенное пользователем.

**Серьезность** — серьезность предупреждения после соблюдения условий, заданных в правиле генерации оповещений. Уровень серьезности может иметь значение от 0 до 4.

- Уровень серьезности 0 = критический
- Уровень серьезности 1 = ошибка
- Уровень серьезности 2 = предупреждение
- Уровень серьезности 3 = информационные
- Уровень серьезности 4 = подробный 

**Действие**. Это определенное действие, которое будет выполнено при срабатывании оповещения. Дополнительные сведения см. в разделе [группы действий](../alerts/action-groups.md).

## <a name="what-you-can-alert-on"></a>Возможные оповещения

Вы можете оповещать о метриках и журналах, как описано в разделе [мониторинг источников данных](./../agents/data-sources.md). Сигналы включают, но не ограничиваются:

- Значения метрик
- Запросы поиска по журналам
- События в журнале действий
- Работоспособность базовой платформы Azure
- Тесты на доступность веб-сайта

## <a name="manage-alerts"></a>Управление оповещениями

Чтобы указать, где в процессе разрешения находится оповещение, можно задать его состояние. При выполнении условий, указанных в правиле генерации оповещений, создается или срабатывает оповещение, которое имеет состояние *новое*. Его можно изменить после того, как оповещение будет подтверждено или закрыто. Любые изменения состояния оповещения сохраняются в его журнале.

Поддерживаются следующие состояния оповещения.

| Состояние | Описание |
|:---|:---|
| Создать | Обнаружена и еще не рассмотрена эта ошибка. |
| Подтверждено | Администратор рассмотрел оповещение и начал над ним работать. |
| Закрыто | Проблема была устранена. После закрытия оповещения можно изменить его состояние и вновь открыть. |

*Состояние оповещения* отличается и не зависит от *состояния монитора*. Пользователь задает состояние оповещения. Система задает состояние монитора. Когда оповещение срабатывает, условие монитора предупреждения имеет значение *«активировался*», а если базовое условие, вызвавшее срабатывание предупреждения, очищается, условие монитора имеет значение *«разрешено»*. 

Состояние оповещения изменяется только пользователем. Узнайте, [как изменить состояние оповещений и смарт-групп](./alerts-managing-alert-states.md?toc=%2fazure%2fazure-monitor%2ftoc.json).

## <a name="alerts-experience"></a>Интерфейс оповещений 
На странице оповещения по умолчанию представлена сводка по оповещениям, созданным в течение определенного диапазона времени. Он отображает общее число предупреждений для каждой серьезности, со столбцами, которые указывают общее количество предупреждений в каждом состоянии для каждого уровня серьезности. Чтобы открыть страницу [Все оповещения](#all-alerts-page), отфильтрованную по конкретной серьезности, щелкните ее.

Вместо этого можно [программными средствами перечислить экземпляры предупреждений, созданные в подписках, с помощью интерфейсов API](#manage-your-alert-instances-programmatically).

> [!NOTE]
   >  Вы можете получить доступ только к оповещениям, созданным за последние 30 дней.

Подписки или параметры фильтра можно изменять, чтобы обновить страницу.

![Снимок экрана страницы предупреждений](media/alerts-overview/alerts-page.png)

Можно отфильтровать это представление, выбрав значения в раскрывающихся меню в верхней части страницы.

| Столбец | Описание |
|:---|:---|
| Подписка | Выберите подписки Azure, для которых вы хотите просмотреть оповещения. При необходимости можно выбрать все подписки. В представление включаются только оповещения, к которым у вас есть доступ в выбранных подписках. |
| Группа ресурсов | Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. |
| Диапазон времени | В представление включаются только предупреждения, инициированные в выбранном диапазоне времени. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. |

Выберите следующие значения в верхней части страницы оповещения, чтобы открыть другую страницу:

| Значение | Описание |
|:---|:---|
| Всего оповещений | Общее количество оповещений, которые соответствуют выбранным критериям. Чтобы открыть представление "Все оповещения" без применения фильтра, щелкните это значение. |
| Смарт-группы | Общее количество смарт-групп, которые созданы из оповещений, соответствующих выбранным критериям. Чтобы открыть список смарт-групп в представлении "Все оповещения", щелкните это значение.
| Всего правил генерации оповещений | Общее количество оповещений в выбранной подписке и группе ресурсов. Чтобы открыть представление "Правила", отфильтрованное по выбранным подпискам и группам ресурсов, щелкните это значение.


## <a name="manage-alert-rules"></a>Управление правилами генерации оповещений
Чтобы отобразить страницу **правила** , выберите **Управление правилами оповещений**. Страница правила — это единое место для управления всеми правилами генерации оповещений в подписках Azure. На этой странице перечислены все правила генерации оповещений, а также на ней доступна фильтрация по целевым ресурсам, группам ресурсов, имени правила или состоянию. На этой странице также можно изменять, включать и отключать правила генерации оповещений.  

 ![Снимок экрана страницы правил](./media/alerts-overview/alerts-preview-rules.png)


## <a name="create-an-alert-rule"></a>Создание правила оповещения
Правила генерации оповещений можно создавать единообразно, независимо от службы мониторинга или типа сигнала.

> [!VIDEO https://www.microsoft.com/en-us/videoplayer/embed/RE4tflw]

 
Вот как можно создать новое правило генерации оповещений:
1. Выбор _цели_ оповещения.
1. Выбор _сигнала_ для цели из списка доступных сигналов.
1. Указание _логики_, которая будет применяться к информации, полученной от сигнала.

При таком упрощенном процессе создания пользователю больше не нужно знать поддерживаемый источник мониторинга или сигналы перед выбором ресурса Azure. Список доступных сигналов автоматически фильтруется на основе выбранного целевого ресурса. Кроме того, на основе этого целевого объекта вы можете автоматически определить логику правила генерации оповещений.  

Дополнительные сведения по созданию правил генерации оповещений см. в статье [Создание и просмотр оповещений, а также управление ими с помощью Azure Monitor](../alerts/alerts-metric.md).

Оповещения доступны в нескольких службах мониторинга Azure. Для получения сведений о том как и где использовать каждую из этих служб прочитайте статью [Мониторинг приложений и ресурсов в Azure](../overview.md). 


## <a name="all-alerts-page"></a>Страница "Все оповещения" 
Чтобы просмотреть страницу **все оповещения** , выберите **Общее число оповещений**. Здесь можно просмотреть список оповещений, созданных в течение выбранного времени. Здесь можно просмотреть список отдельных оповещений или список-смарт групп, которые содержат оповещения. Чтобы переключаться между представлениями, щелкните баннер вверху страницы.

![Снимок экрана со страницей "все оповещения"](media/alerts-overview/all-alerts-page.png)

Можно отфильтровать представление, выбрав следующие значения в раскрывающихся меню в верхней части страницы:

| Столбец | Описание |
|:---|:---|
| Подписка | Выберите подписки Azure, для которых вы хотите просмотреть оповещения. При необходимости можно выбрать все подписки. В представление включаются только оповещения, к которым у вас есть доступ в выбранных подписках. |
| Группа ресурсов | Выбор одной группы ресурсов. Только те предупреждения, которые отмечены в выбранной группе ресурсов, включены в представление. |
| Тип ресурса | Выбор одной или нескольких группу ресурсов. В представление включены только те оповещения, в которых выбранный тип отмечен. Этот столбец становится доступным только после указания группы ресурсов. |
| Ресурс | Выбор ресурса. В представление включены только те оповещения, целью которых выбраны ресурсы. Этот столбец становится доступным только после указания типа ресурсов. |
| Severity | Выберите серьезность предупреждения или выберите **все** , чтобы включить предупреждения всех уровней серьезности. |
| Состояние монитора | Выберите условие монитора или выберите **все** , чтобы включить оповещения обо всех условиях. |
| Состояние оповещения | Выберите состояние оповещения или выберите **все** , чтобы включить оповещения обо всех состояниях. |
| Мониторинг службы | Выберите службу или выберите **все** , чтобы включить все службы. В представление включаются только те оповещения, которые были созданы в соответствие с правилами и которые используют эту службу в качестве цели. |
| Диапазон времени | В представление включаются только предупреждения, инициированные в выбранном диапазоне времени. Поддерживаемые значения: за последний час, за последние 24 часа, за последние 7 дней и за последние 30 дней. |

Выберите **столбцы в верхней** части страницы, чтобы выбрать отображаемые столбцы. 

## <a name="alert-details-page"></a>Страница сведений о предупреждении
При выборе предупреждения Эта страница предоставляет подробные сведения о предупреждении и позволяет изменить его состояние.

![Снимок экрана со страницей сведений о предупреждении](media/alerts-overview/alert-detail2.png)

Страница сведения о предупреждении содержит следующие разделы.

| Section | Description |
|:---|:---|
| Сводка | В этом разделе отображаются свойства оповещения и другие важные сведения о нем. |
| Журнал | В этом разделе перечислено каждое действие оповещения и любые изменения внесенные в оповещение. В настоящее время этот раздел ограничен изменениями состояния. |
| Диагностика | Сведения о интеллектуальной группе, в которую включено оповещение. *Счетчик оповещений* отображает количество оповещений, которые включены в смарт-группу. Включает другие оповещения в той же интеллектуальной группе, которые были созданы за последние 30 дней, независимо от фильтра времени на странице списка оповещений. Чтобы получить дополнительные сведения, щелкните оповещение. |

## <a name="azure-role-based-access-control-azure-rbac-for-your-alert-instances"></a>Управление доступом на основе ролей Azure (Azure RBAC) для экземпляров оповещений

Для использования экземпляров оповещений и управления ими требуется, чтобы у пользователя были встроенные роли Azure " [участник мониторинга](../../role-based-access-control/built-in-roles.md#monitoring-contributor) " или " [читатель мониторинга](../../role-based-access-control/built-in-roles.md#monitoring-reader)". Эти роли поддерживаются в любой области Azure Resource Manager (от уровня подписки до детализированных назначений на уровне ресурсов). Например, если пользователь имеет доступ только к участнику мониторинга для виртуальной машины `ContosoVM1` , он может использовать только предупреждения, созданные в `ContosoVM1` .

## <a name="manage-your-alert-instances-programmatically"></a>Программное управление экземплярами оповещений

Для создания предупреждений, созданных для подписки, может потребоваться программный запрос. Запросы могут создавать пользовательские представления за пределами портал Azure или анализировать оповещения для выявления закономерностей и тенденций.

Вы можете запросить предупреждения, созданные для ваших подписок, с помощью [Управление оповещениями REST API](/rest/api/monitor/alertsmanagement/alerts) или с помощью [графа ресурсов Azure](../../governance/resource-graph/overview.md) и [REST API ресурсов](/rest/api/azureresourcegraph/resourcegraph(2019-04-01)/resources/resources).

Граф ресурсов REST API для ресурсов позволяет запрашивать экземпляры предупреждений в масштабе. Если необходимо управлять предупреждениями, созданными для нескольких подписок, рекомендуется использовать график ресурсов. 

Следующий пример запроса к графу ресурсов REST API возвращает количество предупреждений в одной подписке:

```json
{
  "subscriptions": [
    <subscriptionId>
  ],
  "query": "AlertsManagementResources | where type =~ 'Microsoft.AlertsManagement/alerts' | summarize count()"
}
```

Результат этого запроса графа ресурсов также можно просмотреть на портале с помощью обозревателя графа ресурсов Azure: [Portal.Azure.com](https://portal.azure.com/?feature.customportal=false#blade/HubsExtension/ArgQueryBlade/query/AlertsManagementResources%20%7C%20where%20type%20%3D~%20%27Microsoft.AlertsManagement%2Falerts%27%20%7C%20summarize%20count())

Вы можете запросить оповещения для своих [ключевых](../alerts/alerts-common-schema-definitions.md#essentials) полей.

Используйте [REST API Управление оповещениями](/rest/api/monitor/alertsmanagement/alerts) , чтобы получить дополнительные сведения о конкретных предупреждениях, включая поля [контекста оповещений](../alerts/alerts-common-schema-definitions.md#alert-context) .

## <a name="smart-groups"></a>Смарт-группы

Интеллектуальные группы — это статистические выражения, основанные на алгоритмах машинного обучения, которые могут помочь в уменьшении шума и помощи в устранении неполадок. [Дополнительные сведения о смарт-группах](./alerts-smartgroups-overview.md?toc=%2fazure%2fazure-monitor%2ftoc.json) и [управление смарт-группами](./alerts-managing-smart-groups.md?toc=%2fazure%2fazure-monitor%2ftoc.json).

## <a name="next-steps"></a>Дальнейшие действия

- [Дополнительные сведения о смарт-группах](./alerts-smartgroups-overview.md?toc=%2fazure%2fazure-monitor%2ftoc.json)
- [Дополнительные сведения о группах действий](../alerts/action-groups.md)
- [Управление экземплярами оповещений в Azure](./alerts-managing-alert-instances.md?toc=%2fazure%2fazure-monitor%2ftoc.json)
- [Управление интеллектуальными группами](./alerts-managing-smart-groups.md?toc=%2fazure%2fazure-monitor%2ftoc.json)
- [Дополнительные сведения о ценах на оповещения Azure](https://azure.microsoft.com/pricing/details/monitor/)