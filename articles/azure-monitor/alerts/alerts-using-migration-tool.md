---
title: Миграция Azure Monitor правил оповещений
description: Узнайте, как использовать добровольное средство миграции для переноса классических правил генерации оповещений.
author: yanivlavi
ms.author: yalavi
ms.topic: conceptual
ms.date: 03/19/2018
ms.subservice: alerts
ms.openlocfilehash: 28ccdde85f2873839fbe977c3c991177ac8bb3bb
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100621903"
---
# <a name="use-the-voluntary-migration-tool-to-migrate-your-classic-alert-rules"></a>Использование произвольного средства миграции для переноса классических правил генерации оповещений

Как [было объявлено ранее](../platform/monitoring-classic-retirement.md), классические оповещения в Azure Monitor удалены для пользователей общедоступного облака, хотя и в ограниченном объеме использования ресурсов, которые еще не поддерживают новые оповещения. Средство миграции было доступно в портал Azure клиентам, которые использовали классические правила генерации оповещений и хотят активировать миграцию. В этой статье объясняется, как использовать средство миграции, которое также будет использоваться для оставшихся предупреждений, ожидающих дальнейшего объявления.

## <a name="benefits-of-new-alerts"></a>Преимущества новых оповещений

Классические предупреждения заменяются новыми объединенными предупреждениями в Azure Monitor. Новая платформа предупреждений имеет следующие преимущества.

- Вы можете оповещать о различных многомерных метриках для [многих других служб Azure](alerts-metric-near-real-time.md#metrics-and-dimensions-supported).
- Новые оповещения метрик поддерживают [правила генерации оповещений с несколькими ресурсами](alerts-metric-overview.md#monitoring-at-scale-using-metric-alerts-in-azure-monitor) , которые значительно снижают издержки на управление множеством правил.
- Единый механизм уведомлений, который поддерживает:
  - [Группы действий](../platform/action-groups.md)— модульный механизм уведомления, который работает со всеми новыми типами оповещений (метрика, журнал и журнал действий).
  - Новые механизмы уведомления, такие как SMS, Voice и соединитель ITSM.
- [Единая система оповещений](../platform/alerts-overview.md) объединяет все оповещения по различным сигналам (метрику, журнал и журнал действий) в одном месте.

## <a name="before-you-migrate"></a>Перед миграцией

Процесс миграции преобразует классические правила генерации оповещений в новые, эквивалентные правила генерации оповещений и создает группы действий. При подготовке необходимо учитывать следующие моменты.

- Формат полезных данных уведомлений и API-интерфейсы для создания новых правил генерации оповещений и управления ими отличаются от правил для классических оповещений, так как они поддерживают больше возможностей. [Узнайте, как подготовиться к миграции](alerts-prepare-migration.md).

- Некоторые классические правила генерации оповещений не могут быть перенесены с помощью средства. [Узнайте, какие правила не могут быть перенесены, и что делать с ними](alerts-understand-migration.md#manually-migrating-classic-alerts-to-newer-alerts).

    > [!NOTE]
    > Процесс миграции не будет влиять на оценку классических правил генерации оповещений. Они будут продолжать выполнять и отправлять оповещения до тех пор, пока они не будут перенесены и новые правила генерации оповещений вступят в силу.

## <a name="how-to-use-the-migration-tool"></a>Как использовать средство миграции

Чтобы активировать миграцию классических правил генерации оповещений в портал Azure, выполните следующие действия.

1. В [портал Azure](https://portal.azure.com)выберите **монитор**.

1. Выберите **оповещения**, а затем выберите **Управление правилами оповещений** или **Просмотр классических оповещений**.

1. Выберите **Миграция на новые правила** , чтобы перейти на целевую страницу миграции. На этой странице отображается список всех ваших подписок и их состояние миграции.

    ![На снимке экрана показана страница миграция правил оповещений.](media/alerts-using-migration-tool/migration-landing.png "Миграция правил")

    Все подписки, которые могут быть перенесены с помощью средства, помечены как **готовые к миграции**.

    > [!NOTE]
    > Средство миграции выполняется поэтапно для всех подписок, использующих классические правила генерации оповещений. На ранних стадиях развертывания могут отображаться некоторые подписки, помеченные как не готовые к миграции.

1. Выберите одну или несколько подписок, а затем выберите **Предварительная миграция**.

    На полученной странице отображаются сведения о классических правилах оповещений, которые будут перенесены для одной подписки за раз. Можно также выбрать **загрузить сведения о миграции для этой подписки** , чтобы получить подробные сведения в формате CSV.

    ![На снимке экрана показана страница "миграция правил оповещений" со ссылкой для скачивания сведений о миграции для этой подписки, а также можно указать адрес электронной почты для уведомления о миграции.](media/alerts-using-migration-tool/migration-preview.png "Предварительный просмотр миграции")

1. Укажите один или несколько адресов электронной почты для уведомления о состоянии миграции. После завершения миграции вы получите сообщение электронной почты, или если вам нужны какие-либо действия.

1. Выберите **начать миграцию**. Прочтите сведения, отображаемые в диалоговом окне подтверждения, и подтвердите, что все готово для начала процесса миграции.

    > [!IMPORTANT]
    > После запуска миграции для подписки вы не сможете изменять или создавать классические правила генерации оповещений для этой подписки. Это ограничение гарантирует, что при миграции на новые правила не будут потеряны какие бы то ни было изменения в классических правилах генерации оповещений. Несмотря на то, что вы не сможете изменить классические правила генерации оповещений, они по-прежнему будут продолжать работать и предоставлять предупреждения до переноса. После завершения миграции подписки вы больше не сможете использовать классические правила генерации оповещений.

    ![На снимке экрана отображается запрос подтверждения миграции, включая важные сведения со ссылками на дополнительные сведения перед продолжением.](media/alerts-using-migration-tool/migration-confirm.png "Подтверждение начала миграции")

1. Когда миграция будет завершена или требуется выполнить действие, вы получите сообщение электронной почты по указанным выше адресам. Вы также можете периодически проверять состояние на целевой странице миграции на портале.

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

### <a name="why-is-my-subscription-listed-as-not-ready-for-migration"></a>Почему моя подписка указана как не готовая к миграции?

Средство миграции развертывается для клиентов поэтапно. На ранних этапах большинство или все подписки могут быть помечены как **не готовые к миграции**. 

Когда подписка становится готовой к миграции, владелец подписки получит сообщение электронной почты с информацией о том, что средство доступно. Следите за этим сообщением.

### <a name="who-can-trigger-the-migration"></a>Кто может активировать миграцию?

Пользователи, которым назначена роль участника мониторинга на уровне подписки, могут активировать миграцию. [Узнайте больше об управлении доступом на основе ролей в Azure для процесса миграции](alerts-understand-migration.md#who-can-trigger-the-migration).

### <a name="how-long-will-the-migration-take"></a>Сколько времени займет миграция?

Миграция для большинства подписок завершена в течение часа. Вы можете отслеживать ход выполнения миграции на целевой странице миграции. Во время миграции убедитесь, что ваши оповещения все еще выполняются либо в классической системе оповещений, либо в новой.

### <a name="what-can-i-do-if-i-run-into-a-problem-during-migration"></a>Что можно сделать при возникновении проблемы во время миграции?

Дополнительные сведения о проблемах, которые могут возникнуть во время миграции, см. в разделе [руководство по устранению неполадок](alerts-understand-migration.md#common-problems-and-remedies) . Если для завершения миграции потребуется какое-либо действие, вы получите уведомление по адресам электронной почты, указанным при настройке средства.

## <a name="next-steps"></a>Дальнейшие шаги

- [Подготовка к переносу](alerts-prepare-migration.md)
- [Принцип работы средства миграции](alerts-understand-migration.md)
