---
title: Конструктор представлений Azure Monitor для преобразования книг преобразование общих задач
description: Распространенные задачи при переходе от представлений к книгам в Azure Monitor.
author: austonli
ms.author: aul
ms.topic: conceptual
ms.date: 02/07/2020
ms.openlocfilehash: d479e64620519491ba4847349ea33820747fcea7
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102043479"
---
# <a name="view-designer-to-workbooks-conversion-common-tasks"></a>Конструктор представлений для преобразования книг преобразование общих задач
[Конструктор представлений](view-designer.md) — это функция Azure Monitor, которая позволяет создавать пользовательские представления, помогающие визуализировать данные в рабочей области log Analytics, с диаграммами, списками и временными шкалами. Они выводятся и заменяются книгами, которые предоставляют дополнительные функциональные возможности. В этой статье приводятся общие сведения о задачах преобразования представлений в книги.


## <a name="quickstart-with-preset-view-designer-templates"></a>Краткое руководство с предустановленными шаблонами конструктора представлений

Книги в Log Analytics рабочих областях уже имеют шаблоны, настроенные для сопоставления с некоторыми представлениями в конструкторе представлений. В категории " **Направляющие конструктора представлений** " выберите **вид конструктор переходов** , чтобы узнать о параметрах или выбрать один из предустановленных шаблонов.

![Образцы шаблонов](media/view-designer-conversion-tasks/templates.png)

## <a name="enabling-time-range-filter"></a>Включение фильтра диапазона времени
В конструкторе представлений есть встроенный фильтр временных диапазонов по умолчанию, однако в книгах этот параметр не включен по умолчанию. Книги позволяют пользователям создавать собственные фильтры диапазонов времени, которые могут быть более применимы к их журналам данных. Ниже перечислены действия по созданию фильтра.

Выберите параметр **Добавить параметры** . Для **стиля** по умолчанию задано значение *пилюли*.

![Добавить параметр](media/view-designer-conversion-tasks/add-param.png)

 Нажмите кнопку **Добавить параметр** .

![Добавить параметр](media/view-designer-conversion-tasks/add-parameter.png)

В меню боковой панели в текстовом поле **имя параметра** введите *TimeRange*. Задайте **тип параметра** в качестве *средства выбора диапазона времени*. Установите флажок **обязательно?** .

![Меню параметров](media/view-designer-conversion-tasks/parameter-menu.png)

Сохраните параметр в левом верхнем углу меню боковой панели. Можно оставить раскрывающийся список *по* умолчанию или выбрать значение **TimeRange** по умолчанию, например *24 часа*. Нажмите кнопку **done Edit (Готово**).

Параметры можно использовать в запросах, добавив фигурные скобки {} вокруг имени параметра. Дополнительные сведения о параметрах можно найти в [документации по параметрам книги](https://github.com/microsoft/Application-Insights-Workbooks/blob/master/Documentation/Parameters/Parameters.md).

## <a name="updating-queries-with-the-timerange-parameter"></a>Обновление запросов с помощью параметра TimeRange

### <a name="option-1-select-timerange-from-the-time-range-dropdown"></a>Вариант 1. Выберите TimeRange из раскрывающегося списка диапазон времени.

![Параметр времени](media/view-designer-conversion-tasks/time-parameter.png)

### <a name="option-2-update-your-log-queries"></a>Вариант 2. Обновление запросов журналов

В запросе добавьте строку: `| where TimeGenerated {TimeRange}` , как показано в следующем примере:

Исходный запрос
```KQL
search * 
| summarize count() by Type
```

Обновленный запрос
```KQL
search * 
| where TimeGenerated {TimeRange} 
| summarize count() by Type
```

## <a name="including-a-list"></a>Включение списка
Большинство представлений конструктора представлений включают список, и этот стандартный список можно воспроизвести в книге.

![Список плиток](media/view-designer-conversion-tasks/tile-list.png)

Добавьте визуализацию, нажав кнопку **Добавить запрос** в параметрах ячейки.

![Добавить параметр](media/view-designer-conversion-tasks/add-param.png)

Конструктор представлений использует запрос по умолчанию, соответствующий синтаксису из исходного примера. Это можно обновить, изменив запрос на обновленную форму, как показано в следующем примере:

Исходный запрос
```KQL
search * 
| summarize AggregatedValue = count() by Type
```

Обновленный запрос
```KQL
search * 
| summarize Count = count() by Type
```

Будет создан список, похожий на следующий:

![Пример списка](media/view-designer-conversion-tasks/list-example.png)

## <a name="enabling-sparklines"></a>Включение спарклайнов
Обычная функция для сеток — Добавление спарклайнов для суммирования различных шаблонов данных с течением времени. Конструктор представлений предлагает функцию **включить спарклайны** для всех списков, как книги. Чтобы включить Спарклайны в данные, соответствующие конструктору представлений, присоедините данные к исходному запросу, как показано в следующем примере:

Исходный запрос
```KQL
search *
| summarize AggregatedValue = count() by Type) on Type
```

Обновленный запрос
```KQL
search * 
| summarize AggregatedValue = count() by Type
| join kind = inner (search * 
    | make-series Trend = count() default=0 on TimeGenerated from {TimeRange:start} to {TimeRange:end} step {TimeRange:grain} by Type) on Type
| project Type, AggregatedValue, Trend
```

Выберите **Параметры столбца**.
![Параметры столбцов](media/view-designer-conversion-tasks/column-settings.png)

Обновите раскрывающийся список **визуализации столбцов** , чтобы он был *областью Spark*.
![Спарклайны](media/view-designer-conversion-tasks/sparkline.png)

Сохраните параметры и снова запустите запрос, чтобы обновить таблицу для включения спарклайна.

Полученная сетка будет выглядеть следующим образом: ![ Пример спарклайна](media/view-designer-conversion-tasks/sparkline-example.png)

## <a name="advanced-cell-settings"></a>Дополнительные параметры ячеек
В конструкторе зеркальных представлений можно выполнять такие задачи, как изменение размера ячеек книги или добавление ПИН-кодов и внешних ссылок на журналы.

Чтобы получить доступ к **дополнительным параметрам** , выберите значок шестеренки в нижней части каждой ячейки.

![Дополнительные настройки](media/view-designer-conversion-tasks/advanced-settings.png)

Отобразится меню с различными параметрами:

![Дополнительные параметры](media/view-designer-conversion-tasks/advanced-settings-settings.png)

Чтобы добавить ПИН-код и ссылку на внешний запрос, установите соответствующие флажки. Чтобы добавить заголовок в ячейку, введите нужный заголовок в раздел **заголовок диаграммы** .

По умолчанию любая ячейка книги настроена для получения всей ширины страницы, но ее можно изменить, выполнив масштабирование ячейки вниз на вкладке **стиль** меню **Дополнительные параметры** .

![Стиль дополнительных параметров](media/view-designer-conversion-tasks/advanced-settings-style.png)

 
## <a name="additional-parameters"></a>Дополнительные параметры
Выберите **Добавить параметр** , чтобы создать новый параметр в книге. 

Чтобы выбрать подписку, введите *Subscription* в поле **имя параметра** в боковом меню и выберите пункт *Выбор подписки* в раскрывающемся списке **тип параметра** .

![Меню подписки](media/view-designer-conversion-tasks/subscription-filter.png)

Чтобы выбрать ресурс, введите *Resource* в поле **имя параметра** в боковом меню и выберите *средство выбора ресурсов* в раскрывающемся списке **тип параметра** .

![Меню ресурсов](media/view-designer-conversion-tasks/resource-filter.png)

В результате будут вставлены раскрывающиеся списки, позволяющие получить доступ к различным подпискам и ресурсам.

![Раскрывающийся список ресурсов подписки](media/view-designer-conversion-tasks/subscription-resource.png)


## <a name="next-steps"></a>Дальнейшие действия
- [Преобразование плиток](view-designer-conversion-tiles.md)
