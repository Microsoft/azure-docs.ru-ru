---
title: Источники данных Azure Monitor книгах | Документация Майкрософт
description: Упростите составление отчетов с помощью предварительно созданных и настраиваемых параметризованных Azure Monitor книг, построенных из нескольких источников данных.
services: azure-monitor
documentationcenter: ''
manager: carmonm
ms.workload: tbd
ms.tgt_pltfrm: ibiza
ms.topic: conceptual
ms.date: 06/29/2020
ms.openlocfilehash: 862c6c5253c1bb4481476b67c7cfb203c2568e24
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101700581"
---
# <a name="azure-monitor-workbooks-data-sources"></a>Источники данных Azure Monitor книг

Книги совместимы с большим количеством источников данных. В этой статье рассматриваются источники данных, доступные в настоящее время для Azure Monitor книг.

## <a name="logs"></a>Журналы

Книги позволяют выполнять запросы к журналам из следующих источников:

* Журналы Azure Monitor (Application Insights ресурсы и рабочие области Log Analytics.)
* Данные, ориентированные на ресурсы (журналы действий)

Авторы книг могут использовать запросы ККЛ, которые преобразуют базовые данные ресурсов, чтобы выбрать результирующий набор, который может быть визуально представлен как текст, диаграммы или сетки.

![Снимок экрана: интерфейс отчета журналов книг](./media/workbooks-data-sources/logs.png)

Авторы книг могут легко выполнять запросы к нескольким ресурсам, создавая действительно унифицированный интерфейс для работы с отчетами.

## <a name="metrics"></a>Метрики

Ресурсы Azure выдают [метрики](../essentials/data-platform-metrics.md) , доступ к которым можно получить с помощью книг. Доступ к метрикам можно получить в книгах с помощью специализированного элемента управления, который позволяет указать целевые ресурсы, требуемые метрики и их статистическую обработку. Затем эти данные можно построить на диаграммах или в сетках.

![Снимок экрана: диаграммы метрик использования ЦП](./media/workbooks-data-sources/metrics-graph.png)

![Снимок экрана: интерфейс метрик книги](./media/workbooks-data-sources/metrics.png)

## <a name="azure-resource-graph"></a>Azure Resource Graph

Книги поддерживают запросы к ресурсам и их метаданным с помощью графа ресурсов Azure (ARG). Эта функция в основном используется для создания пользовательских областей запросов для отчетов. Область действия ресурса выражается с помощью ККЛ-subset, поддерживаемого АРГУМЕНТом, который часто достаточно для распространенных вариантов использования.

Чтобы элемент управления "запрос" использовал этот источник данных, используйте раскрывающийся список тип запроса, чтобы выбрать граф ресурсов Azure и выбрать целевые подписки. Используйте элемент управления запроса, чтобы добавить аргумент ККЛ-subset, который выбирает интересное подмножество ресурсов.

![Снимок экрана: запрос ККЛ графа ресурсов Azure](./media/workbooks-data-sources/azure-resource-graph.png)

## <a name="azure-resource-manager"></a>Azure Resource Manager

Книга поддерживает Azure Resource Manager операции RESTFUL. Это дает возможность запрашивать конечную точку management.azure.com без необходимости предоставлять собственный маркер заголовка авторизации.

Чтобы сделать элемент управления запросом использовать этот источник данных, выберите Azure Resource Manager в раскрывающемся списке Источник данных. Укажите соответствующие параметры, такие как метод HTTP, URL-адрес, заголовки, параметры URL-адреса и/или текст.

> [!NOTE]
> `GET` `POST` `HEAD` В настоящее время поддерживаются только операции, и.

## <a name="azure-data-explorer"></a>Azure Data Explorer

Книги теперь поддерживают запросы из кластеров [Azure обозреватель данных](/azure/data-explorer/) с мощным языком запросов [Kusto](/azure/kusto/query/index) .

![Снимок экрана окна запроса Kusto](./media/workbooks-data-sources/data-explorer.png)

## <a name="workload-health"></a>Работоспособность рабочей нагрузки

Azure Monitor обладает функциональными возможностями, которые заблаговременно отслеживают доступность и производительность гостевых операционных систем Windows или Linux. Azure Monitor моделей ключевые компоненты и их связи, критерии для измерения работоспособности этих компонентов, а также сведения о том, какие компоненты предупреждают о неработоспособном состоянии. Книги позволяют пользователям использовать эти сведения для создания многофункциональных интерактивных отчетов.

Чтобы сделать элемент управления запросом использовать этот источник данных, используйте раскрывающийся список **тип запроса** , чтобы выбрать работоспособность рабочей нагрузки и выбрать подписку, группу ресурсов или ресурсы виртуальной машины для целевого объекта. Раскрывающийся список фильтр работоспособности используется для выбора интересного подмножества инцидентов работоспособности для аналитических нужд.

![Снимок экрана: запрос предупреждений](./media/workbooks-data-sources/workload-health.png)

## <a name="azure-resource-health"></a>Работоспособность ресурсов Azure

Книги поддерживают получение работоспособности ресурсов Azure и объединение их с другими источниками данных для создания многофункциональных интерактивных отчетов о работоспособности.

Чтобы элемент управления "запрос" использовал этот источник данных, используйте раскрывающийся список **тип запроса** , чтобы выбрать работоспособность Azure и выбрать ресурсы для назначения. Раскрывающийся список фильтр работоспособности используется для выбора интересного подмножества проблем с ресурсами для аналитических нужд.

![Снимок экрана запроса предупреждений, отображающий списки фильтров работоспособности.](./media/workbooks-data-sources/resource-health.png)

## <a name="change-analysis-preview"></a>Анализ изменений (Предварительная версия)

Чтобы сделать элемент управления запросом с помощью [анализа изменений приложений](../app/change-analysis.md) в качестве источника данных, используйте раскрывающийся список *источник данных* и выберите пункт *анализ изменений (Предварительная версия)* и выберите один ресурс. Можно отобразить изменения за последние 14 дней. Раскрывающийся список *уровень* можно использовать для фильтрации изменений "важно", "нормальный" и "шум", и этот раскрывающийся список поддерживает параметры книги типа [раскрывающегося](workbooks-dropdowns.md)списка.

> [!div class="mx-imgBorder"]
> ![Снимок экрана книги с анализом изменений](./media/workbooks-data-sources/change-analysis-data-source.png)

## <a name="merge-data-from-different-sources"></a>Объединение данных из разных источников

Часто приходится объединять данные из разных источников, что повышает эффективность работы с аналитическими данными. Пример — это дополнение активных сведений о предупреждениях к связанным данным метрик. Это позволяет пользователям видеть не только воздействие (активное оповещение), но и потенциальные причины (например, высокая загрузка ЦП). В домене мониторинга имеется множество таких коррелированных источников данных, которые часто важны для процесса рассмотрения и диагностики.

Книги позволяют не только выполнять запросы к разным источникам данных, но также и простые элементы управления, позволяющие объединять или объединять данные для получения подробных сведений. `merge`Элемент управления является способом его достижения.

Приведенный ниже пример сочетает в себе данные о производительности виртуальной машины log Analytics, чтобы получить сетку с подробными сведениями.

> [!div class="mx-imgBorder"]
> ![Снимок экрана книги с элементом управления слиянием, объединяющим данные предупреждений и log Analytics](./media/workbooks-data-sources/merge-control.png)

Книги поддерживают разнообразные слияния:

* Внутреннее уникальное соединение
* Полное внутреннее соединение
* Полное внешнее соединение
* левое внешнее соединение.
* Правое внешнее соединение
* Левая половина объединения
* Правое частичное соединение
* Левое сглаживание
* Правое сглаживание
* Union
* Повторяющаяся таблица

## <a name="json"></a>JSON

Поставщик JSON позволяет создавать результаты запроса из статического содержимого JSON. Чаще всего он используется в параметрах для создания раскрывающихся параметров статических значений. Простые массивы или объекты JSON будут автоматически преобразованы в строки и столбцы сетки.  Для более подробного поведения можно использовать вкладки результаты и параметры JSONPath для настройки столбцов.

Этот поставщик поддерживает [JSONPath](workbooks-jsonpath.md).

## <a name="alerts-preview"></a>Оповещения (предварительная версия)

> [!NOTE]
> Предлагаемый способ запроса сведений об оповещении Azure — использование источника данных [графа ресурсов Azure](#azure-resource-graph) путем запроса к `AlertsManagementResources` таблице.
>
> Примеры см. в [справочнике по таблицам Graph ресурсов Azure](../../governance/resource-graph/reference/supported-tables-resources.md)или в [шаблоне оповещений](https://github.com/microsoft/Application-Insights-Workbooks/blob/master/Workbooks/Azure%20Resources/Alerts/Alerts.workbook) .
>
> Источник данных предупреждений останется доступным в течение определенного периода времени, пока авторы переходят на использование ARG. Использование этого источника данных в шаблонах не рекомендуется. 

Книги позволяют пользователям визуализировать активные предупреждения, связанные с их ресурсами. Ограничения. источнику данных предупреждений требуется доступ на чтение к подписке для запроса ресурсов и может не показывать новые типы оповещений. 

Чтобы сделать элемент управления запросом использовать этот источник данных, выберите в раскрывающемся списке _источник данных_ пункт _оповещения (Предварительная версия)_ и выберите подписки, группы ресурсов или ресурсы для назначения. С помощью раскрывающихся фильтров предупреждений выберите интересное подмножество предупреждений для аналитических нужд.

## <a name="custom-endpoint"></a>Пользовательская конечная точка

Книги поддерживают получение данных из любого внешнего источника. Если данные находятся за пределами Azure, их можно перенести в книги с помощью этого типа источника данных.

Чтобы сделать элемент управления запросом использовать этот источник данных, выберите _пользовательскую конечную точку_ в раскрывающемся списке _источник данных_ . Укажите соответствующие параметры, такие как `Http method` , `url` , `headers` и `url parameters` /или `body` . Убедитесь, что источник данных поддерживает [CORS](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS) , в противном случае запрос завершится ошибкой.

Чтобы избежать автоматического вызова ненадежных узлов при использовании шаблонов, пользователю необходимо пометить используемые узлы как доверенные. Это можно сделать, нажав кнопку _Добавить как доверенную_ или добавив ее в качестве доверенного узла в параметрах книги. Эти параметры будут сохранены в [браузерах, поддерживающих индексдб с рабочими веб-](https://caniuse.com/#feat=indexeddb)процессами.

> [!NOTE]
> Не записывайте никакие секреты в полях ( `headers` ,, `parameters` `body` , `url` ), так как они будут видны всем пользователям книги.

Этот поставщик поддерживает [JSONPath](workbooks-jsonpath.md).

## <a name="next-steps"></a>Дальнейшие действия

* [Узнайте](./workbooks-overview.md#visualizations) больше о книгах с множеством разнообразных вариантов визуализации.
* [Управление](./workbooks-access-control.md) доступом к ресурсам книги и предоставление общего доступа к ним.
* [Советы по оптимизации запросов Log Analytics](../logs/query-optimization.md)