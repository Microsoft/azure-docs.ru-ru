---
title: Просмотр динамических данных с помощью Container Insights | Документация Майкрософт
description: В этой статье описывается представление журналов Kubernetes, событий и метрик Pod в режиме реального времени без использования kubectl в контейнере аналитики.
ms.topic: conceptual
ms.date: 03/04/2021
ms.custom: references_regions
ms.openlocfilehash: 5277f5051e291e9058255d8920ac0be950389704
ms.sourcegitcommit: dda0d51d3d0e34d07faf231033d744ca4f2bbf4a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/05/2021
ms.locfileid: "102203204"
---
# <a name="how-to-view-kubernetes-logs-events-and-pod-metrics-in-real-time"></a>Просмотр журналов Kubernetes, событий и метрик Pod в режиме реального времени

Служба "аналитика контейнеров" включает функцию "Интерактивные данные", которая представляет собой расширенную диагностическую функцию, которая обеспечивает прямой доступ к журналам контейнеров Azure Kubernetes Service (stdout/stderr), событиям и метрикам Pod. Он предоставляет прямой доступ к `kubectl logs -c` , `kubectl get` событиям и `kubectl top pods` . В области консоли отображаются журналы, события и метрики, созданные модулем контейнеров для дальнейшей помощи в устранении неполадок в режиме реального времени.

Эта статья содержит подробный обзор и поможет вам понять, как использовать эту функцию.

Чтобы получить справку по настройке функции интерактивных данных или устранению неполадок, ознакомьтесь с нашим [руководством по установке](container-insights-livedata-setup.md). Эта функция напрямую обращается к API Kubernetes, и дополнительные сведения о модели проверки подлинности можно найти [здесь](https://kubernetes.io/docs/concepts/overview/kubernetes-api/).

## <a name="view-aks-resource-live-logs"></a>Просмотр активных журналов ресурсов AKS
Используйте следующую процедуру для просмотра активных журналов для модулей Pod, развертываний и наборов реплик с помощью или без аналитики контейнера из представления ресурсов AKS.

1. В портал Azure перейдите к группе ресурсов кластера AKS и выберите ресурс AKS.

2. Выберите **рабочие нагрузки** в разделе **ресурсов Kubernetes** меню.

3. Выберите Pod, развертывание, набор реплик на соответствующей вкладке.

4. В меню ресурса выберите пункт **динамические журналы** .

5. Выберите Pod, чтобы начать сбор динамических данных.

    [![Динамические журналы развертывания](./media/container-insights-livedata-overview/live-data-deployment.png)](./media/container-insights-livedata-overview/live-data-deployment.png#lightbox)

## <a name="view-logs"></a>Просмотр журналов

Вы можете просматривать данные журнала в режиме реального времени по мере их создания подсистемой контейнеров из **узлов**, **контроллеров** и представлений **контейнеров** . Чтобы просмотреть данные журнала, выполните следующие действия.

1. В портал Azure перейдите к группе ресурсов кластера AKS и выберите ресурс AKS.

2. На панели мониторинга кластера AKS в разделе **мониторинг** на левой стороне выберите **аналитика**.

3. Выберите вкладку **узлы**, **контроллеры** или **контейнеры** .

4. Выберите объект в сетке производительности, а затем на панели свойств, расположенной справа, выберите параметр **Просмотреть данные в режиме реального времени** . Если в кластере AKS настроен единый вход с помощью Azure AD, вам будет предложено выполнить проверку подлинности при первом использовании в течение этого сеанса браузера. Выберите свою учетную запись и выполните аутентификацию с помощью Azure.

    >[!NOTE]
    >При просмотре данных из рабочей области Log Analytics путем выбора параметра **Просмотр в аналитике** на панели «Свойства» результаты поиска по журналам потенциально могут показывать **узлы**, **наборы управляющих** программ, **наборы реплик**, **задания**, **задания cron** **, Pod** и **контейнеры** , которые больше не существуют. Попытка поиска в журналах контейнера, который недоступен в `kubectl` , также приведет к сбою. Дополнительные сведения о просмотре журналов журнала, событиях и метрик см. в статье [Просмотр в аналитике](container-insights-log-search.md#search-logs-to-analyze-data) .

После успешной проверки подлинности область консоли динамических данных отобразится под сеткой данных о производительности, где можно просмотреть данные журнала в непрерывном потоке. Если в индикаторе состояния выборки отображается зеленая галочка, расположенная справа от панели, это означает, что данные можно получить и начать потоковую передачу в консоль.

![Параметр просмотра данных в области "Свойства узла"](./media/container-insights-livedata-overview/node-properties-pane.png)

В заголовке области отображается имя Pod, с которым будет сгруппирован контейнер.

## <a name="view-events"></a>Просмотр событий

Данные событий в реальном времени можно просматривать по мере их создания подсистемой контейнеров из **узлов**, **контроллеров**, **контейнеров** и **развертываний** , когда выбран контейнер, Pod, узел, реплика, управляющая программа, задание, кронжоб или развертывание. Чтобы просмотреть события, выполните следующие действия.

1. В портал Azure перейдите к группе ресурсов кластера AKS и выберите ресурс AKS.

2. На панели мониторинга кластера AKS в разделе **мониторинг** на левой стороне выберите **аналитика**.

3. Выберите вкладку **узлы**, **контроллеры**, **контейнеры** или **развертывания** .

4. Выберите объект в сетке производительности, а затем на панели свойств, расположенной справа, выберите параметр **Просмотреть данные в режиме реального времени** . Если в кластере AKS настроен единый вход с помощью Azure AD, вам будет предложено выполнить проверку подлинности при первом использовании в течение этого сеанса браузера. Выберите свою учетную запись и выполните аутентификацию с помощью Azure.

    >[!NOTE]
    >При просмотре данных из рабочей области Log Analytics путем выбора параметра **Просмотр в аналитике** на панели «Свойства» результаты поиска по журналам потенциально могут показывать **узлы**, **наборы управляющих** программ, **наборы реплик**, **задания**, **задания cron** **, Pod** и **контейнеры** , которые больше не существуют. Попытка поиска в журналах контейнера, который недоступен в `kubectl` , также приведет к сбою. Дополнительные сведения о просмотре журналов журнала, событиях и метрик см. в статье [Просмотр в аналитике](container-insights-log-search.md#search-logs-to-analyze-data) .

После успешной проверки подлинности область консоли динамических данных отобразится под сеткой данных о производительности. Если в индикаторе состояния выборки отображается зеленая галочка, расположенная справа от панели, это означает, что данные можно получить и начать потоковую передачу в консоль.

Если выбранный объект был контейнером, выберите параметр **события** на панели. Если вы выбрали узел, Pod или контроллер, то Просмотр событий будет выбран автоматически.

![События представления панели свойств контроллера](./media/container-insights-livedata-overview/controller-properties-live-event.png)

В заголовке области отображается имя Pod, с которым будет сгруппирован контейнер.

### <a name="filter-events"></a>События фильтра

При просмотре событий можно дополнительно ограничить результаты с помощью **фильтра** пилюля, найденного справа от строки поиска. В зависимости от выбранного ресурса пилюля перечисляет модуль, пространство имен или кластер для выбора.

## <a name="view-metrics"></a>Просмотр метрик

Данные метрик в реальном времени можно просматривать по мере их создания модулем контейнеров из представления **узлы** или **контроллеры** только при выборе **Pod** . Чтобы просмотреть метрики, выполните следующие действия.

1. В портал Azure перейдите к группе ресурсов кластера AKS и выберите ресурс AKS.

2. На панели мониторинга кластера AKS в разделе **мониторинг** на левой стороне выберите **аналитика**.

3. Выберите вкладку **узлы** или **контроллеры** .

4. Выберите объект **Pod** в сетке производительности, а затем на панели Свойства в правой части выберите **Просмотр данных в режиме реального времени** . Если в кластере AKS настроен единый вход с помощью Azure AD, вам будет предложено выполнить проверку подлинности при первом использовании в течение этого сеанса браузера. Выберите свою учетную запись и выполните аутентификацию с помощью Azure.

    >[!NOTE]
    >При просмотре данных из рабочей области Log Analytics путем выбора параметра **Просмотр в аналитике** на панели «Свойства» результаты поиска по журналам потенциально могут показывать **узлы**, **наборы управляющих** программ, **наборы реплик**, **задания**, **задания cron** **, Pod** и **контейнеры** , которые больше не существуют. Попытка поиска в журналах контейнера, который недоступен в `kubectl` , также приведет к сбою. Дополнительные сведения о просмотре журналов журнала, событиях и метрик см. в статье [Просмотр в аналитике](container-insights-log-search.md#search-logs-to-analyze-data) .

После успешной проверки подлинности область консоли динамических данных отобразится под сеткой данных о производительности. Данные метрик извлекаются и начинают потоковую передачу на консоль для представления в двух диаграммах. В заголовке области отображается имя Pod, с которым будет сгруппирован контейнер.

![Пример просмотра метрик Pod](./media/container-insights-livedata-overview/pod-properties-live-metrics.png)

## <a name="using-live-data-views"></a>Использование динамических представлений данных
В следующих разделах описываются функциональные возможности, которые можно использовать в различных представлениях динамических данных.

### <a name="search"></a>Поиск
Функция динамических данных включает функции поиска. В поле **поиска** можно отфильтровать результаты, введя ключевое слово или термин, и все соответствующие результаты будут выделены, чтобы обеспечить быструю проверку. При просмотре событий можно дополнительно ограничить результаты с помощью **фильтра** пилюля, найденного справа от строки поиска. В зависимости от выбранного ресурса пилюля перечисляет модуль, пространство имен или кластер для выбора.

![Пример фильтра области консоли динамических данных](./media/container-insights-livedata-overview/livedata-pane-filter-example.png)

![Пример фильтра области консоли динамических данных для развертывания](./media/container-insights-livedata-overview/live-data-deployment-search.png)

### <a name="scroll-lock-and-pause"></a>Прокрутить блокировку и приостановить

Чтобы приостановить автоматическую прокрутку и управлять поведением панели, позволяя выполнять прокрутку новых данных вручную, можно использовать параметр **Scroll** . Чтобы повторно включить автоматическую прокрутку, просто установите флажок **прокрутки** еще раз. Вы также можете приостановить получение данных журнала или события, выбрав параметр **приостановить** , и когда все будет готово к возобновлению, просто выберите **воспроизвести**.

![Динамическая область консоли динамических данных приостановка интерактивного представления](./media/container-insights-livedata-overview/livedata-pane-scroll-pause-example.png)

![Панель динамической консоли данных приостановка динамического представления для развертывания](./media/container-insights-livedata-overview/live-data-deployment-pause.png)



>[!IMPORTANT]
>Мы рекомендуем приостанавливать или приостанавливать автоматическую прокрутку в течение короткого периода времени при устранении проблемы. Эти запросы могут повлиять на доступность и регулирование API Kubernetes в кластере.

>[!IMPORTANT]
>При работе этой функции данные не сохраняются навсегда. Все сведения, захваченные во время сеанса, удаляются при закрытии браузера или переходе от него. Данные остаются только для визуализации в течение пяти минут компонента метрик. все метрики старше пяти минут также удаляются. Запросы буфера данных в режиме реального времени запрашиваются по разумным ограничениям на использование памяти.

## <a name="next-steps"></a>Дальнейшие действия

- Чтобы продолжить изучение способов использования Azure Monitor и отслеживать другие аспекты кластера AKS, ознакомьтесь со статьей [Общие сведения о мониторинге производительности кластера AKS с помощью Azure Monitor для контейнеров (предварительная версия)](container-insights-analyze.md).

- Просмотрите [примеры запросов журналов](container-insights-log-search.md#search-logs-to-analyze-data) , чтобы просмотреть предопределенные запросы и примеры для создания предупреждений, визуализаций или выполнения дальнейшего анализа кластеров.
