---
title: Обзор Log Analytics в Azure Monitor
description: Описывает Log Analytics, который является инструментом в портал Azure, используемом для изменения и запуска запросов журнала для анализа данных в журналах Azure Monitor.
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 10/04/2020
ms.openlocfilehash: d83cc4045f09ed0f704a0d61c6b303406835eb44
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102052302"
---
# <a name="overview-of-log-analytics-in-azure-monitor"></a>Обзор Log Analytics в Azure Monitor
Log Analytics — это инструмент на портале Azure, с помощью которого вы изменяете и выполняете запросы с данными в журналах Azure Monitor. Вы можете написать простой запрос, возвращающий набор записей, а затем использовать функции Log Analytics для сортировки, фильтрации и анализа. Или вы можете написать более расширенный запрос для выполнения статистического анализа и визуализации результатов в диаграмме для определения конкретной тенденции. Независимо от того, работаете ли вы с результатами запросов в интерактивном режиме или используете их с другими Azure Monitorными функциями, такими как оповещения о запросах журнала или книги, Log Analytics — это средство, которое вы будете использовать для написания и тестирования. 


> [!TIP]
> В этой статье содержится описание Log Analytics и всех ее функций. Если вы хотите перейти непосредственно к учебнику, см. [log Analytics руководстве](./log-analytics-tutorial.md).



## <a name="starting-log-analytics"></a>Запуск Log Analytics
Запустите Log Analytics из **журналов** в меню **Azure Monitor** в портал Azure. Вы также увидите этот параметр в меню для большинства ресурсов Azure. Независимо от того, откуда вы начинаете, это будет тот же инструмент Log Analytics. Меню, используемое для запуска Log Analytics, определяет, какие данные будут доступны. При запуске из меню **Azure Monitor** или **рабочих областей Log Analytics** вы получите доступ ко всем записям в рабочей области. Если выбрать **Журналы** из другого типа ресурса, вы увидите только данные журнала для этого ресурса. Подробные сведения см. в статье [Область запросов журнала и временной диапазон в Azure Monitor Log Analytics](./scope.md).

[![Запуск Log Analytics](media/log-analytics-overview/start-log-analytics.png)](media/log-analytics-overview/start-log-analytics.png#lightbox)

При запуске Log Analytics в первую очередь вы увидите диалоговое окно с [примерами запросов](../logs/example-queries.md). Они классифицируются по решениям, и вы можете просматривать или искать запросы, соответствующие определенным требованиям. Возможно, вам удастся найти, что именно вам нужно, или загрузить его в редактор и при необходимости изменить. Просмотр примеров запросов на самом деле является отличным способом научиться написанием собственных запросов. Конечно, если вы хотите начать с пустого скрипта и написать его самостоятельно, можно закрыть примеры запросов. Просто щелкните **запросы** в верхней части экрана, если хотите вернуть их.

## <a name="log-analytics-interface"></a>Интерфейс Log Analytics
На следующем рисунке показаны различные компоненты Log Analytics.

[![Log Analytics](media/log-analytics-overview/log-analytics.png)](media/log-analytics-overview/log-analytics.png#lightbox)

### <a name="1-top-action-bar"></a>1. Верхняя панель действий
Элементы управления для работы с запросом в окне запроса.

| Параметр | Описание |
|:---|:---|
| Область | Задает область данных, используемых для запроса. Это могут быть все данные в Log Analytics рабочей области или данные для определенного ресурса в нескольких рабочих областях. См. [область запроса](./scope.md). |
| Кнопка "Запустить" | Щелкните, чтобы выполнить выбранный запрос в окне запроса. Можно также нажать клавиши SHIFT + ВВОД, чтобы выполнить запрос. |
| Управляющий элемент выбора времени | Выберите диапазон времени для данных, доступных для запроса. Это переопределяется, если в запрос включен фильтр времени. См. раздел [область запросов журнала и временной диапазон в Azure Monitor log Analytics](./scope.md). |
| Кнопка "Сохранить" | Сохраните запрос в обозревателе запросов для рабочей области. |
 Кнопка "Копировать" | Скопируйте ссылку на запрос, текст запроса или результаты запроса в буфер обмена. |
| Кнопка "Новое правило генерации оповещений" | Создайте новую вкладку с пустым запросом. |
| Кнопка экспорта | Экспортируйте результаты запроса в CSV-файл или запрос в Power Query формате языка формул для использования с Power BI. |
| Кнопка "закрепить на панели мониторинга" | Добавьте результаты запроса на панель мониторинга Azure. |
| Кнопка форматирования запроса | Размещение выделенного текста для удобства чтения. |
| Кнопка "примеры запросов" | Откройте диалоговое окно примеры запросов, которое отображается при первом открытии Log Analytics. |
| Кнопка обозревателя запросов | Откройте **Обозреватель запросов** , который предоставляет доступ к сохраненным запросам в рабочей области. |


### <a name="2-sidebar"></a>2. Боковая панель
Списки таблиц в рабочей области, примеры запросов и параметры фильтра для текущего запроса.

| Вкладка | Описание |
|:---|:---|
| Tables | Список таблиц, входящих в выбранную область. Выберите **Группировать по,** чтобы изменить группирование таблиц. Наведите указатель мыши на имя таблицы, чтобы отобразить диалоговое окно с описанием таблицы и параметров, чтобы просмотреть ее документацию и просмотреть ее данные. Разверните таблицу, чтобы просмотреть ее столбцы. Дважды щелкните имя таблицы или столбца, чтобы добавить его в запрос. |
| Запросы | Список примеров запросов, которые можно открыть в окне запроса. Это тот же список, который отображается при открытии Log Analytics. Выберите **Группировать по,** чтобы изменить группирование запросов. Дважды щелкните запрос, чтобы добавить его в окно запроса, или наведите на него указатель мыши для выбора других параметров. |
| Filter | Создает параметры фильтра на основе результатов запроса. После выполнения запроса столбцы будут отображаться с разными значениями из результатов. Выберите одно или несколько значений и нажмите кнопку **применить & выполнить** , чтобы добавить команду **WHERE** в запрос и запустить ее снова. |

### <a name="3-query-window"></a>3. Окно запроса
В окне запроса можно изменить запрос. Сюда входит IntelliSense для команд KQL и цветовое кодирование для повышения удобочитаемости. Щелкните **+** в верхней части окна, чтобы открыть другую вкладку.

Как одно окно может включать несколько запросов. Запрос не может содержать пустые строки, поэтому можно разделить несколько запросов в окне одной или несколькими пустыми строками. Текущий запрос отмечен курсором, расположенным в любом месте запроса.

Чтобы выполнить текущий запрос, нажмите кнопку **Выполнить** или клавиши SHIFT+ВВОД.

### <a name="4-results-window"></a>4. Окно результатов
Результаты запроса будут показаны в окне результатов. По умолчанию результаты отображаются в виде таблицы. Для отображения в виде диаграммы выберите пункт **Диаграмма** в окне результатов или добавьте в запрос команду **render**.

#### <a name="results-view"></a>представление результатов
Отображает результаты запроса в таблице, упорядоченной по столбцам и строкам. Щелкните слева от строки, чтобы развернуть ее значения. Щелкните раскрывающееся меню **столбцы** , чтобы изменить список столбцов. Отсортируйте результаты, щелкнув имя столбца. Отфильтруйте результаты, щелкнув воронку рядом с именем столбца. Очистите фильтры и сбросьте сортировку, выполнив запрос еще раз.

Выберите **столбцы группы** , чтобы отобразить панель группирования над результатами запроса. Сгруппируйте результаты по любому столбцу, перетащив его на линию. Создайте вложенные группы в результатах, добавив дополнительные столбцы. 

#### <a name="chart-view"></a>Представление диаграммы
Отображает результаты как один из нескольких доступных типов диаграмм. Тип диаграммы можно указать в команде **Render** в запросе или выбрать в раскрывающемся списке **тип визуализации** .

| Параметр | Описание |
|:---|:---|
| **Тип визуализации** | Тип отображаемой диаграммы. |
| **Ось X** | Столбец результатов, используемый для оси X 
| **Ось Y** | Столбец результатов, используемый для оси Y. Как правило, это числовой столбец. |
| **Разделение по** | Столбец результатов, который определяет ряды в диаграмме. Для каждого значения в столбце создается ряд. |
| **Статистической обработки** | Тип статистической обработки, которую необходимо выполнить с числовыми значениями на оси Y. |

## <a name="relationship-to-azure-data-explorer"></a>Связь с Azure обозреватель данных
Если вы уже знакомы с веб-ИНТЕРФЕЙСом обозреватель данных Azure, Log Analytics должны быть знакомы. Это связано с тем, что оно построено на основе Azure обозреватель данных и использует тот же язык запросов Kusto (ККЛ). Log Analytics добавляет функции, относящиеся к Azure Monitor, например фильтрацию по диапазону времени, и возможность создания правила генерации оповещений на основе запроса. Оба средства включают обозреватель, который позволяет просматривать структуру доступных таблиц, но пользовательский веб-интерфейс Azure обозреватель данных в основном работает с таблицами в базах данных Azure обозреватель данных, а Log Analytics работает с таблицами в Log Analytics рабочей области. 

## <a name="next-steps"></a>Дальнейшие действия
- Пошаговое [руководство по использованию log Analytics в портал Azure](./log-analytics-tutorial.md).
- Пошаговое [руководство по написанию запросов](./get-started-queries.md).