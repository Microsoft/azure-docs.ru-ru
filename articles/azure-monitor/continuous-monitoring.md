---
title: Непрерывный мониторинг с помощью Azure Monitor | Документация Майкрософт
description: Описывает конкретные шаги для использования Azure Monitor, чтобы включить непрерывный мониторинг во всех ваших рабочих процессах.
ms.topic: conceptual
author: bwren
ms.author: bwren
ms.date: 10/12/2018
ms.openlocfilehash: 2fe9d7e4da8950cee2dcb2fbcfb26355ace7285d
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102044023"
---
# <a name="continuous-monitoring-with-azure-monitor"></a>Непрерывный мониторинг с помощью Azure Monitor

Непрерывный мониторинг – это процесс и технология, необходимые для включения мониторинга на каждом этапе ваших жизненных циклов DevOps и ИТ-операций. Это помогает непрерывно обеспечивать работоспособность, производительность и надежность вашего приложения и инфраструктуры при переходе от разработки к производству. Непрерывный мониторинг основан на концепциях непрерывной интеграции и непрерывного развертывания (CI / CD), которые помогают вам быстрее и надежнее разрабатывать и поставлять программное обеспечение для обеспечения непрерывной поддержки пользователей.

[Azure Monitor](overview.md) – это унифицированное решение для мониторинга в Azure, которое обеспечивает наблюдаемость всего стека в приложениях и инфраструктуре как в облаке, так и локально. Он без проблем работает с [Visual Studio и кодом Visual Studio](https://visualstudio.microsoft.com/) во время разработки и тестирования, а также интегрируется с [Azure DevOps](/azure/devops/user-guide/index) для управления выпусками и рабочими элементами во время развертывания и операций. Он даже интегрируется с инструментами ITSM и SIEM по вашему усмотрению, чтобы помочь отслеживать проблемы и инциденты в рамках существующих ИТ-процессов.

В этой статье описаны конкретные шаги для использования Azure Monitor, чтобы включить непрерывный мониторинг во всех ваших рабочих процессах. Она включает в себя ссылки на другую документацию, которая содержит подробности о реализации различных функций.


## <a name="enable-monitoring-for-all-your-applications"></a>Включите мониторинг для всех ваших приложений
Чтобы получить возможность наблюдения во всей вашей среде, необходимо включить мониторинг для всех ваших веб-приложений и сервисов. Это позволит вам легко визуализировать сквозные транзакции и соединения между всеми компонентами.

- [Azure DevOps Projects](../devops-project/overview.md) предоставляет вам упрощенный интерфейс с подключением существующего кода и репозитория Git. Или можно выбрать один из примеров приложений, чтобы создать конвейер непрерывной интеграции (CI) и непрерывной поставки (CD) в Azure.
- [Непрерывный мониторинг в вашем конвейере выпуска DevOps](./app/continuous-monitoring.md) позволяет вам контролировать или откатывать развертывание на основе данных мониторинга.
- [Монитор состояния](./app/monitor-performance-live-website-now.md) позволяет вживую использовать приложение .NET в Windows с помощью Azure Application Insights, не прибегая к изменению или повторному развертыванию кода.
- Если у вас есть доступ к коду приложения, включите полный мониторинг с помощью [Application Insights](./app/app-insights-overview.md) , установив пакет SDK Azure Monitor Application Insights для [.NET](./app/asp-net.md), [.net Core](./app/asp-net-core.md), [Java](./app/java-get-started.md), [Node.js](./app/nodejs-quick-start.md)или [любых других языков программирования](./app/platforms.md). Это позволяет вам задавать пользовательские события, метрики или просмотры страниц, которые имеют отношение к вашему приложению и бизнесу.



## <a name="enable-monitoring-for-your-entire-infrastructure"></a>Включите мониторинг для всей инфраструктуры
Приложения надежны настолько, насколько и их базовая инфраструктура. Включение мониторинга по всей инфраструктуре поможет вам достичь полной наблюдаемости и упростит обнаружение потенциальной первопричины в случае сбоя. Azure Monitor помогает отслеживать работоспособность и производительность всей гибридной инфраструктуры, включая такие ресурсы, как виртуальные машины, контейнеры, хранилище и сеть.

- Вы автоматически получаете [метрики платформы, журналы активности и журналы диагностики](agents/data-sources.md) из большинства ресурсов Azure без настройки.
- Включите более глубокий мониторинг виртуальных машин с помощью [VM Insights](vm/vminsights-overview.md).
-  Включите более глубокий мониторинг для кластеров службы Azure Kubernetes с помощью [Azure Monitor для контейнеров](containers/container-insights-overview.md).
- Добавление [решений мониторинга](./monitor-reference.md) для разных приложений и служб в вашей среде.


[Инфраструктура в виде кода](/azure/devops/learn/what-is-infrastructure-as-code) – это управление инфраструктурой в описательной модели с использованием той же версии, что и команды DevOps для исходного кода. Это повышает надежность и масштабируемость вашей среды и позволяет использовать аналогичные процессы, используемые для управления вашими приложениями.

-  Используйте [шаблоны Resource Manager](./logs/resource-manager-workspace.md), чтобы включить мониторинг и настройки оповещений для большого набора ресурсов.
- Используйте [политику Azure](../governance/policy/overview.md) для применения различных правил к вашим ресурсам. Это обеспечивает соответствие ресурсов корпоративным стандартам и соглашениям об уровне обслуживания. 


##  <a name="combine-resources-in-azure-resource-groups"></a>Объединяйте ресурсы Azure в группы ресурсов
Типичное приложение в Azure сегодня включает в себя несколько ресурсов, таких как виртуальные машины и службы приложений, или микрослужбы, размещенные в облачных службах, кластерах службы Azure Kubernetes или Service Fabric. Эти приложения часто используют такие зависимости, как Центры событий, хранилище, SQL и Служебная шина.

- Объедините ресурсы в группы ресурсов Azure, чтобы получить полное представление о всех ваших ресурсах, которые составляют различные приложения. [Azure Monitor для групп ресурсов](./insights/resource-group-insights.md) предоставляет простой способ отслеживания работоспособности и производительности всего приложения с полным стеком и позволяет детализировать соответствующие компоненты для любых исследований или отладки.

## <a name="ensure-quality-through-continuous-deployment"></a>Обеспечение качества с помощью непрерывного развертывания
Непрерывная интеграция или непрерывное развертывание позволяет автоматически интегрировать и развертывать изменения кода в вашем приложении на основе результатов автоматического теста. Это упрощает процесс развертывания и обеспечивает качество любых изменений до их запуска в производство.


- Используйте [Azure Pipelines](/azure/devops/pipelines) для реализации непрерывного развертывания и автоматизации всего процесса от фиксации кода до производства на основе ваших тестов CI/CD.
- Используйте [Quality Gates](/azure/devops/pipelines/release/approvals/gates), чтобы интегрировать мониторинг в предварительное развертывание или после развертывания. Это гарантирует, что вы соответствуете ключевым показателям работоспособности или производительности (КПЭ) по мере того, как ваши приложения переходят от разработки к производству, и любые различия в инфраструктуре или масштабах инфраструктуры не оказывают негативного влияния на ваши ключевые показатели эффективности.
- [Поддерживайте отдельные экземпляры мониторинга](./app/separate-resources.md) между различными средами развертывания, такими как Dev, Test, Canary и Prod. Это гарантирует, что собранные данные актуальны для всех связанных приложений и инфраструктуры. Если вам необходимо сопоставить данные в разных средах, вы можете использовать [мультиресурсные диаграммы в обозревателе метрик](./essentials/metrics-charts.md) или создать [междуресурсные запросы в Azure Monitor](logs/cross-workspace-query.md).


## <a name="create-actionable-alerts-with-actions"></a>Создайте функциональные оповещения с действиями
Критическим аспектом мониторинга является активное уведомление администраторов о любых текущих и прогнозируемых проблемах. 

- Создайте на основе журналов и метрик [оповещения в Azure Monitor](./alerts/alerts-overview.md), чтобы определять предсказуемые состояния сбоя. У вас должна быть цель сделать все оповещения действенными. Это означает, что они будут представлять реальные критические условия и стремиться сократить количество ложных срабатываний. Используйте [динамические пороги](alerts/alerts-dynamic-thresholds.md) для автоматического расчета базовых показателей данных метрики, а не для определения собственных статических порогов. 
- Определите действия для оповещений, чтобы использовать наиболее эффективные средства уведомления ваших администраторов. Доступные [действия для уведомления](alerts/action-groups.md#create-an-action-group-by-using-the-azure-portal): SMS, электронная почта, push-уведомления или голосовые звонки.
- Используйте более сложные действия, чтобы [подключиться к своему инструменту ITSM](alerts/itsmc-overview.md) или другим системам управления оповещениями через [веб-перехватчики](alerts/activity-log-alerts-webhook.md).
- Также исправьте ситуации, выявленные в оповещениях с помощью [модулей Runbook службы автоматизации Azure](../automation/automation-webhooks.md) или [Logic Apps](/connectors/custom-connectors/create-webhook-trigger), которые можно запустить из оповещения с помощью веб-перехватчиков. 
- Используйте [автоматическое масштабирование](./autoscale/tutorial-autoscale-performance-schedule.md) для динамического увеличения и уменьшения ваших вычислительных ресурсов на основе собранных метрик.

## <a name="prepare-dashboards-and-workbooks"></a>Подготовьте панели мониторинга и книги
Гарантируя, что ваши разработки и операции имеют доступ к одной и той же телеметрии и инструментам, они могут просматривать шаблоны во всей вашей среде и минимизировать среднее время обнаружения (MTTD) и среднее время восстановления (MTTR).

- Подготовьте [пользовательские панели мониторинга](./app/tutorial-app-dashboards.md), основанные на общих метриках и журналах для различных ролей в вашей организации. Панели мониторинга могут объединять данные из всех ресурсов Azure.
- Подготовьте [книги](./visualize/workbooks-overview.md),чтобы обеспечить обмен знаниями между разработкой и эксплуатацией. Они могут быть подготовлены в виде динамических отчетов с метрическими диаграммами и запросами журналов или даже в виде руководств по устранению неполадок, подготовленных разработчиками, помогающими клиентской поддержке или операциям решать основные проблемы.

## <a name="continuously-optimize"></a>Непрерывная оптимизация
 Мониторинг – один из фундаментальных аспектов популярной философии "Сборка, измерение и обучение", которая рекомендует постоянно отслеживать ваши ключевые показатели эффективности и показатели поведения пользователей, а затем стремиться оптимизировать их с помощью итераций планирования. Azure Monitor помогает собирать метрики и журналы, относящиеся к вашей компании, и по мере необходимости добавлять новые точки данных в следующем развертывании.

- Используйте Azure Application Insights для [анализа информации о том, как пользователи используют приложение](./app/tutorial-users.md).
- Используйте [анализ влияния](./app/usage-impact.md), чтобы расставить приоритеты, на каких сферах сосредоточиться для достижения важных ключевых показателей эффективности.


## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о различных компонентах см. в статье [Общие сведения о службе Azure Monitor](overview.md).
- [Добавьте постоянный мониторинг](./app/continuous-monitoring.md) к конвейеру выпуска.