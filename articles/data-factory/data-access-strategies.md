---
title: Стратегии получения доступа к данным
description: Фабрика данных Azure теперь поддерживает диапазоны статических IP-адресов.
ms.author: abnarain
author: nabhishek
ms.service: data-factory
ms.topic: conceptual
ms.date: 05/28/2020
ms.openlocfilehash: edc773ec2db078b6c50b55c81ad6570758a3f5f7
ms.sourcegitcommit: d4734bc680ea221ea80fdea67859d6d32241aefc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100389252"
---
# <a name="data-access-strategies"></a>Стратегии получения доступа к данным

[!INCLUDE[appliesto-adf-asa-md](includes/appliesto-adf-asa-md.md)]

Важнейшей целью обеспечения безопасности организаций является защита хранилищ данных от случайного доступа через Интернет, являются ли они локальными или облачными хранилищами данных SaaS. 

Как правило, облачное хранилище данных управляет доступом с помощью следующих механизмов:
* Частная ссылка из виртуальной сети в источники данных с поддержкой частных конечных точек
* правил брандмауэра, которые ограничивают подключения по IP-адресу;
* механизмов проверки подлинности, требующих подтверждения удостоверений пользователей;
* механизмов авторизации, позволяющих предоставить пользователям доступ только к определенным действиям и данным.

> [!TIP]
> С [появлением диапазона статических IP-адресов](./azure-integration-runtime-ip-addresses.md) можно разрешать определенные диапазоны IP-адресов для конкретного региона среды выполнения интеграции Azure. Это избавляет от необходимости разрешать все IP-адреса Azure в облачных хранилищах данных. Таким образом, можно ограничить IP-адреса, которым разрешен доступ к хранилищам данных.

> [!NOTE] 
> Диапазоны IP-адресов блокируются для Azure Integration Runtime и в настоящее время используются только для перемещения данных, конвейера и внешних действий. Потоки данных и Azure Integration Runtime, которые позволяют управляемой виртуальной сети, сейчас не используют эти диапазоны IP-адресов. 

Это должно работать во многих сценариях, и мы понимаем, что для каждой среды выполнения интеграции желательно использовать уникальный статический IP-адрес, но сейчас это невозможно при использовании Azure Integration Runtime, так как она является бессерверной. При необходимости вы всегда можете настроить локальную среду выполнения интеграции и использовать ее со статическим IP-адресом. 

## <a name="data-access-strategies-through-azure-data-factory"></a>Стратегии доступа к данным с помощью Фабрики данных Azure

* **[Частная ссылка](../private-link/private-link-overview.md)** . Вы можете создать Azure Integration Runtime в виртуальной сети, управляемой фабрикой данных Azure, и использовать частные конечные точки для безопасного подключения к поддерживаемым хранилищам данных. Трафик между управляемой виртуальной сетью и источниками данных перемещается в магистральную сеть Майкрософт и не подвержена общедоступной сети.
* **[Доверенная служба](../storage/common/storage-network-security.md#exceptions)** — служба хранилища Azure (большие двоичные объекты, ADLS 2-го поколения) позволяет выбрать доверенные службы платформы Azure для безопасного доступа к учетной записи хранения. Доверенные службы применяют проверку подлинности с помощью управляемого удостоверения, что гарантирует, что другие фабрики данных не смогут подключаться к этому хранилищу, если только это не было утверждено для управления Дополнительные сведения см. в **[этом блоге](https://techcommunity.microsoft.com/t5/azure-data-factory/data-factory-is-now-a-trusted-service-in-azure-storage-and-azure/ba-p/964993)** . Этот метод вполне безопасен и рекомендуется. 
* **Уникальный статический IP** — вам потребуется настроить локальную среду выполнения интеграции, чтобы получить статический IP-адрес для соединителей фабрики данных. Этот механизм позволяет блокировать доступ со всех других IP-адресов. 
* **[Диапазон статических IP-адресов](./azure-integration-runtime-ip-addresses.md)** — вы можете использовать IP-адреса Azure Integration Runtime, чтобы разрешить список адресов в своем хранилище (например, S3, Salesforce и т. д.). Он, безусловно, ограничит IP-адреса, которые могут подключаться к хранилищам данных, но также полагается на правила проверки подлинности и авторизации.
* **[Тег службы](../virtual-network/service-tags-overview.md)** — тег службы представляет группу префиксов IP-адресов из определенной службы Azure (например, Фабрики данных Azure). Корпорация Майкрософт управляет префиксами адресов, входящих в тег службы, и автоматически обновляет этот тег при изменении адресов, сводя к минимуму сложность частых обновлений правил сетевой безопасности. Это полезно при фильтрации доступа к данным в хранилищах данных, размещенных в виртуальной сети IaaS.
* **Разрешение служб Azure** — некоторые службы позволяют разрешить подключение всем службам Azure в случае выбора этого параметра. 

Дополнительные сведения о поддерживаемых механизмах безопасности сети для хранилищ данных Azure Integration Runtime и локальных сред выполнения интеграции см. в двух таблицах ниже.  
* **Azure Integration Runtime**

    | Хранилища данных                  | Поддерживаемый механизм сетевой безопасности в хранилищах данных | Приватный канал     | Доверенная служба     | Диапазон статических IP-адресов | Теги службы | Разрешить службы Azure |
    |------------------------------|-------------------------------------------------------------|---------------------|-----------------|--------------|----------------------|-----------------|
    | Хранилища данных PaaS Azure       | Azure Cosmos DB                                     | Да              | -                   | Да             | -            | Да                  |
    |                              | Azure Data Explorer                                 | -                | -                   | Да*            | Да*         | -                    |
    |                              | Azure Data Lake 1-го поколения                                | -                | -                   | Да             | -            | Да                  |
    |                              | База данных Azure для MariaDB, MySQL и PostgreSQL       | -                | -                   | Да             | -            | Да                  |
    |                              | Хранилище файлов Azure                                  | Да              | -                   | Да             | -            | .                    |
    |                              | Служба хранилища Azure (BLOB-объект, ADLS 2-го поколения)                     | Да              | Да (только проверка подлинности MSI) | Да             | -            | .                    |
    |                              | База данных SQL Azure, Azure синапсе Analytics), SQL ml  | Да (только для базы данных SQL Azure или DW)        | -                   | Да             | -            | Да                  |
    |                              | Azure Key Vault (для получения секретов или строки подключения) | да      | Да                 | Да             | -            | -                    |
    | Другие хранилища данных PaaS/SaaS | AWS S3, SalesForce, Google Cloud Storage и т. д.    | -                | -                   | Да             | -            | -                    |
    | Azure laaS                   | SQL Server, Oracle и т. д.                          | -                | -                   | Да             | Да          | -                    |
    | Локальная виртуальная машина              | SQL Server, Oracle и т. д.                          | -                | -                   | Да             | -            | -                    |
    
    **Применяется только в том случае, если Azure Data Explorer внедрен в виртуальную сеть, а диапазон IP-адресов может применен в группе безопасности сети/на брандмауэре.* 

* **Локальная среда выполнения интеграции (во Vnet/локальная)**
    
    | Хранилища данных                  | Поддерживаемый механизм сетевой безопасности в хранилищах данных         | Статический IP-адрес | Доверенные службы  |
    |--------------------------------|---------------------------------------------------------------|-----------|---------------------|
    | Хранилища данных PaaS Azure       | Azure Cosmos DB                                               | Да       | -                   |
    |                                | Azure Data Explorer                                           | -         | -                   |
    |                                | Azure Data Lake 1-го поколения                                          | Да       | -                   |
    |                                | База данных Azure для MariaDB, MySQL и PostgreSQL               | Да       | -                   |
    |                                | Хранилище файлов Azure                                            | Да       | -                   |
    |                                | Служба хранилища Azure (блог, ADLS 2-го поколения)                             | Да       | Да (только проверка подлинности MSI) |
    |                                | База данных SQL Azure, Azure синапсе Analytics), SQL ml          | Да       | -                   |
    |                                | Azure Key Vault (для получения секретов или строки подключения) | Да       | Да                 |
    | Другие хранилища данных PaaS/SaaS | AWS S3, SalesForce, Google Cloud Storage и т. д.              | Да       | -                   |
    | Azure laaS                     | SQL Server, Oracle и т. д.                                  | Да       | -                   |
    | Локальный laaS              | SQL Server, Oracle и т. д.                                  | Да       | -                   |    

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. в следующих тематически связанных статьях:
* [Поддерживаемые хранилища данных](./copy-activity-overview.md#supported-data-stores-and-formats)
* ["Доверенные службы" Azure Key Vault](../key-vault/general/overview-vnet-service-endpoints.md#trusted-services)
* ["Доверенные службы Майкрософт" службы хранилища Azure](../storage/common/storage-network-security.md#trusted-microsoft-services)
* [Управляемое удостоверение для фабрики данных](./data-factory-service-identity.md)