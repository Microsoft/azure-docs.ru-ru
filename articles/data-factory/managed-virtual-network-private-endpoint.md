---
title: Управляемая виртуальная сеть & управляемые частные конечные точки
description: Сведения об управляемой виртуальной сети и управляемых частных конечных точках в фабрике данных Azure.
ms.author: abnarain
author: nabhishek
ms.service: data-factory
ms.topic: conceptual
ms.custom:
- seo-lt-2019
- references_regions
ms.date: 07/15/2020
ms.openlocfilehash: b6000d8ff3eb35d678a94adc021efcadf8a77f81
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101699664"
---
# <a name="azure-data-factory-managed-virtual-network-preview"></a>Управляемая виртуальная сеть фабрики данных Azure (Предварительная версия)

[!INCLUDE[appliesto-adf-asa-md](includes/appliesto-adf-asa-md.md)]

В этой статье рассматривается управляемая виртуальная сеть и управляемые частные конечные точки в фабрике данных Azure.


## <a name="managed-virtual-network"></a>Управляемая виртуальная сеть

При создании Azure Integration Runtime (IR) в управляемой виртуальной сети фабрики данных Azure будет подготовлена среда выполнения интеграции с управляемой виртуальной сетью, которая будет использовать частные конечные точки для безопасного подключения к поддерживаемым хранилищам данных. 

Создание Azure IR в управляемой виртуальной сети обеспечивает изолированность и безопасность процесса интеграции данных. 

Преимущества использования управляемой виртуальной сети.

- С помощью управляемой виртуальной сети можно разгрузить нагрузку по управлению виртуальной сетью в фабрику данных Azure. Вам не нужно создавать подсеть для Azure Integration Runtime, которая в конечном итоге может использовать множество частных IP-адресов из виртуальной сети и потребовала бы предварительного планирования сетевой инфраструктуры. 
- Для безопасного взаимодействия с интеграцией данных не требуются глубокие знания о работе в сети Azure. Вместо этого для инженеров по работе с данными значительно упростилось начало работы с безопасным ETL. 
- Управляемая виртуальная сеть и управляемые частные конечные точки защищают от утечка данных. 

> [!IMPORTANT]
>Сейчас управляемая виртуальная сеть поддерживается только в том же регионе, что и регион фабрики данных Azure.
 

![Архитектура управляемой виртуальной сети ADF](./media/managed-vnet/managed-vnet-architecture-diagram.png)

## <a name="managed-private-endpoints"></a>Управляемые частные конечные точки

Управляемые частные конечные точки — это частные конечные точки, созданные в виртуальной сети, управляемой фабрикой данных Azure, устанавливая закрытую ссылку на ресурсы Azure. Фабрика данных Azure управляет этими частными конечными точками от вашего имени. 

![Новая управляемая частная конечная точка](./media/tutorial-copy-data-portal-private/new-managed-private-endpoint.png)

Фабрика данных Azure поддерживает частные ссылки. Частная ссылка позволяет получить доступ к службам Azure (PaaS) (таким как служба хранилища Azure, Azure Cosmos DB, Azure синапсе Analytics).

При использовании частной ссылки трафик между хранилищами данных и управляемой виртуальной сетью полностью проходит через магистральную сеть Майкрософт. Приватный канал обеспечивает защиту от угроз кражи данных. Чтобы установить приватный канал для ресурса, создайте частную конечную точку.

Частная конечная точка использует частный IP-адрес в управляемой виртуальной сети для эффективного переноса службы в нее. Частная конечная точка сопоставляется с конкретным ресурсом в Azure, а не со всей службой. Клиенты могут ограничить возможности подключения к определенному ресурсу, утверждаемому их организацией. Дополнительные сведения о приватных каналах и частных конечных точках см. [здесь](../private-link/index.yml).

> [!NOTE]
> Рекомендуется создавать управляемые частные конечные точки для подключения ко всем источникам данных Azure. 
 
> [!WARNING]
> Если в хранилище данных PaaS (BLOB-объект, ADLS 2-го поколения, Azure синапсе Analytics) уже создана закрытая конечная точка, и даже если она разрешает доступ из всех сетей, ADF сможет получить доступ к нему только с помощью управляемой частной конечной точки. Убедитесь, что в таких сценариях создается частная конечная точка. 

Подключение к частной конечной точке создается в состоянии "ожидание" при создании управляемой частной конечной точки в фабрике данных Azure. Инициируется рабочий процесс утверждения. Владелец ресурса для приватного канала должен утвердить это подключение.

![Управление частной конечной точкой](./media/tutorial-copy-data-portal-private/manage-private-endpoint.png)

Если владелец утверждает подключение, устанавливается приватный канал. В противном случае приватный канал не будет установлен. В любом случае состояние подключения к управляемой частной конечной точке будет обновлено.

![Утвердить управляемую закрытую конечную точку](./media/tutorial-copy-data-portal-private/approve-private-endpoint.png)

Только управляемая частная конечная точка в утвержденном состоянии может передавать трафик на заданный ресурс приватного канала.

## <a name="interactive-authoring"></a>Интерактивная разработка
Интерактивные возможности разработки используются для таких функций, как проверка подключения, просмотр списка папок и список таблиц, получение схемы и предварительный просмотр данных. Вы можете включить интерактивное создание при создании или редактировании Azure Integration Runtime, который находится в виртуальной сети, управляемой ADF. Серверная служба будет предварительно распределять вычисление для интерактивных функций разработки. В противном случае вычисление будет выделено при каждом выполнении любой интерактивной операции, что займет больше времени. Срок жизни (TTL) для интерактивной разработки составляет 60 минут. Это означает, что она автоматически становится отключенной через 60 минут последней интерактивной операции разработки.

![Интерактивная разработка](./media/managed-vnet/interactive-authoring.png)

## <a name="limitations-and-known-issues"></a>Ограничения и известные проблемы
### <a name="supported-data-sources"></a>Поддерживаемые источники данных
Следующие источники данных поддерживают подключение через закрытую связь из управляемой виртуальной сети ADF.
- Хранилище BLOB-объектов Azure
- Хранилище таблиц Azure
- Файлы Azure
- Azure Data Lake 2-го поколения
- База данных SQL Azure (не включая Azure SQL Управляемый экземпляр)
- Azure Synapse Analytics
- SQL CosmosDB Azure
- Azure Key Vault
- Служба частной связи Azure
- Поиск Azure
- База данных Azure для MySQL
- База данных Azure для PostgreSQL
- База данных Azure для MariaDB

### <a name="azure-data-factory-managed-virtual-network-is-available-in-the-following-azure-regions"></a>Управляемая виртуальная сеть фабрики данных Azure доступна в следующих регионах Azure:
- Восточная часть США
- восточная часть США 2
- центрально-западная часть США
- западная часть США
- западная часть США 2
- Центрально-южная часть США
- Центральная часть США
- Северная Европа
- Западная Европа
- южная часть Соединенного Королевства
- Юго-Восточная Азия
- Восточная Австралия
- Юго-Восточная часть Австралии

### <a name="outbound-communications-through-public-endpoint-from-adf-managed-virtual-network"></a>Исходящие подключения через общедоступную конечную точку от управляемой виртуальной сети ADF
- Для исходящих подключений открыт только порт 443.
- Службу хранилища Azure и Azure Data Lake Storage 2-го поколения нельзя соединить через общедоступную конечную точку из управляемой виртуальной сети ADF.

### <a name="linked-service-creation-of-azure-key-vault"></a>Создание Azure Key Vault для связанной службы 
- При создании связанной службы для Azure Key Vault ссылка на Azure Integration Runtime отсутствует. Поэтому нельзя создать частную конечную точку во время создания связанной службы Azure Key Vault. Но когда вы создаете связанную службу для хранилищ данных, ссылающихся Azure Key Vault связанную службу, и эта связанная служба ссылается Azure Integration Runtime с включенной управляемой виртуальной сетью, вы можете создать частную конечную точку для связанной службы Azure Key Vault во время создания. 
- **Проверка подключения** для связанной службы Azure Key Vault только проверяет формат URL-адреса, но не выполняет никаких сетевых операций.
- Столбец, **использующий закрытую конечную точку** , всегда отображается как пустой, даже если для Azure Key Vault создается частная конечная точка.
![Частная конечная точка для AKV](./media/managed-vnet/akv-pe.png)

## <a name="next-steps"></a>Дальнейшие действия

- Руководство. [создание конвейера копирования с помощью управляемой виртуальной сети и частных конечных точек](tutorial-copy-data-portal-private.md) 
- Учебник. [создание конвейера для сопоставления потоков данных с помощью управляемой виртуальной сети и частных конечных точек](tutorial-data-flow-private.md)