---
title: Связанные службы в Фабрике данных Azure
description: Сведения о связанных службах в Фабрике данных. Связанные службы связывают хранилища данных и вычислений с фабрикой данных.
author: dcstwh
ms.author: weetok
ms.reviewer: maghan
ms.service: data-factory
ms.topic: conceptual
ms.date: 08/21/2020
ms.openlocfilehash: 768af9e8568a3842b642a3ebd447d9df8064e840
ms.sourcegitcommit: d4734bc680ea221ea80fdea67859d6d32241aefc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100389932"
---
# <a name="linked-services-in-azure-data-factory"></a>Связанные службы в Фабрике данных Azure

> [!div class="op_single_selector" title1="Выберите используемую версию службы "Фабрика данных":"]
> * [Версия 1](v1/data-factory-create-datasets.md)
> * [Текущая версия](concepts-linked-services.md)

[!INCLUDE[appliesto-adf-asa-md](includes/appliesto-adf-asa-md.md)]

В этой статье описывается, какие бывают связанные службы, каким образом они определяются в формате JSON, а также как они используются в конвейерах Фабрики данных Azure.

Чтобы получить общее представление о Фабрике данных, ознакомьтесь со статьей [Знакомство с Фабрикой данных Azure](introduction.md).

## <a name="overview"></a>Обзор

Фабрика данных может иметь один или несколько конвейеров. **Конвейер** — это логическая группа **действий**, которые вместе выполняют задачу. Действия в конвейере определяют операции с данными. Например, действие копирования можно использовать для копирования данных из SQL Server в хранилище BLOB-объектов Azure. Затем можно использовать действие Hive для запуска сценария Hive в кластере HDInsight Azure, чтобы обработать данные из хранилища BLOB-объектов для получения выходных данных. Наконец, вы можете использовать второе действие копирования для копирования выходных данных в Azure синапсе Analytics на основе построенных решений отчетности бизнес-аналитики (BI). Дополнительные сведения о конвейерах и действиях см. в статье [Конвейеры и действия в фабрике данных Azure](concepts-pipelines-activities.md).

Теперь **набор данных** — это именованное представление данных, которое указывает данные, необходимые для использования в **действиях**, разделяя их на входные и выходные.

Перед созданием набора данных необходимо создать **связанную службу**, чтобы связать хранилище данных с фабрикой данных. Связанные службы напоминают строки подключения, определяющие сведения о подключении, необходимые для подключения фабрики данных к внешним ресурсам. Таким образом, набор данных представляет структуру данных в связанных хранилищах данных, а связанная служба определяет подключение к источнику данных. Например, связанная служба хранилища Azure связывает учетную запись хранения с фабрикой данных. Набор данных больших двоичных объектов Azure представляет контейнер больших двоичных объектов и папку в учетной записи хранения Azure, содержащую входные большие двоичные объекты для обработки.

Ниже приведен пример сценария. Чтобы скопировать данные из хранилища больших двоичных объектов в базу данных SQL, создайте две связанные службы: службу хранилища Azure и Базу данных SQL Azure. Затем создайте два набора данных: набор данных из BLOB-объектов (для связанной службы хранилища Azure) и набор данных таблицы SQL Azure (для связанной службы Базы данных SQL Azure). Связанные службы хранилища Azure и Базы данных SQL Azure содержат строки подключения, которые фабрика данных использует во время выполнения для подключения к службе хранилища Azure и Базе данных Azure SQL соответственно. Набор данных больших двоичных объектов Azure указывает контейнер и папку больших двоичных объектов, содержащие входные большие двоичные объекты в хранилище BLOB-объектов. Набор данных таблицы SQL Azure указывает таблицу SQL в базе данных SQL, в которую будут копироваться данные.

На следующей схеме показана связь между конвейером, действием, набором данных и связанной службой в фабрике данных.

![Связь между конвейером, действием, набором данных и связанными службами](media/concepts-datasets-linked-services/relationship-between-data-factory-entities.png)

## <a name="linked-service-json"></a>JSON связанной службы

Связанная служба в фабрике данных определяется в формате JSON, как показано ниже.

```json
{
    "name": "<Name of the linked service>",
    "properties": {
        "type": "<Type of the linked service>",
        "typeProperties": {
              "<data store or compute-specific type properties>"
        },
        "connectVia": {
            "referenceName": "<name of Integration Runtime>",
            "type": "IntegrationRuntimeReference"
        }
    }
}
```

В следующей таблице описаны свойства приведенного выше объекта JSON.

Свойство | Описание | Обязательно |
-------- | ----------- | -------- |
name | Имя связанной службы. Дополнительные сведения см. в статье [Фабрика данных Azure — правила именования](naming-rules.md). |  Да |
type | Тип связанной службы. Например: AzureBlobStorage (хранилище данных) или AzureBatch (COMPUTE). См. описание typeProperties. | Да |
typeProperties | Свойства типов отличаются для каждого хранилища данных или вычислительного ресурса. <br/><br/> Сведения о поддерживаемых типах хранилищ данных и их свойствах типов см. в статье [Обзор соединителя](copy-activity-overview.md#supported-data-stores-and-formats) . Дополнительные сведения о свойствах типов, характерных для хранилища данных, см. в статье о соединителях хранилища данных. <br/><br/> Поддерживаемые типы вычислительных служб и соответствующие свойства типов см. в статье [Вычислительные среды, поддерживаемые фабрикой данных Azure](compute-linked-services.md). | Да |
connectVia | [Среда выполнения интеграции](concepts-integration-runtime.md), используемая для подключения к хранилищу данных. Вы можете использовать среду выполнения интеграции Azure или локальную среду IR (если хранилище данных расположено в частной сети). Если не указано другое, по умолчанию используется интегрированная среда выполнения Azure. | нет

## <a name="linked-service-example"></a>Образец связанной службы

Следующая связанная служба — это связанная служба хранилища BLOB-объектов Azure. Обратите внимание, что для типа задано хранилище BLOB-объектов Azure. Свойства типа для связанной службы хранилища BLOB-объектов Azure включают строку подключения. Фабрика данных использует эту строку подключения для соединения с хранилищем данных в среде выполнения.

```json
{
    "name": "AzureBlobStorageLinkedService",
    "properties": {
        "type": "AzureBlobStorage",
        "typeProperties": {
            "connectionString": "DefaultEndpointsProtocol=https;AccountName=<accountname>;AccountKey=<accountkey>"
        },
        "connectVia": {
            "referenceName": "<name of Integration Runtime>",
            "type": "IntegrationRuntimeReference"
        }
    }
}
```

## <a name="create-linked-services"></a>Создание связанных служб

Связанные службы можно создать в службе "Фабрика данных Azure" через [центр управления](author-management-hub.md) и любые действия, наборы данных или потоки, которые ссылаются на них.

Связанные службы можно создать с помощью одного из следующих средств или пакетов SDK: [.NET API](quickstart-create-data-factory-dot-net.md), [PowerShell](quickstart-create-data-factory-powershell.md), [REST API](quickstart-create-data-factory-rest-api.md), Azure Resource Manager шаблона и портал Azure.


## <a name="data-store-linked-services"></a>Связанные службы хранилища данных

Список хранилищ данных, поддерживаемых Фабрикой данных, см. в статье [Общие сведения о соединителе](copy-activity-overview.md#supported-data-stores-and-formats). Щелкните хранилище данных, чтобы узнать поддерживаемые свойства соединения.

## <a name="compute-linked-services"></a>Связанные службы вычислений

Подробные сведения о различных вычислительных средах, к которым можно подключаться из фабрики данных, а также о различных конфигурациях см. в статье [Поддерживаемые вычислительные среды](compute-linked-services.md).

## <a name="next-steps"></a>Дальнейшие действия

Пошаговые инструкции по созданию конвейеров и наборов данных с помощью одного из указанных ниже инструментов или пакетов SDK приведены в указанных ниже руководствах.

- [Создание фабрики данных и конвейера с помощью пакета SDK для .NET](quickstart-create-data-factory-dot-net.md)
- [Создание фабрики данных и конвейера с помощью пакета PowerShell](quickstart-create-data-factory-powershell.md)
- [Создание фабрики данных Azure и конвейера с помощью REST API](quickstart-create-data-factory-rest-api.md)
- [Краткое руководство. Создание фабрики данных с помощью портала Azure](quickstart-create-data-factory-portal.md)
