---
title: Наборы данных
description: Сведения о наборах данных в Фабрике данных. Наборы данных представляют входные и выходные данные.
author: dcstwh
ms.author: weetok
ms.reviewer: jburchel
ms.service: data-factory
ms.topic: conceptual
ms.custom: seo-lt-2019
ms.date: 08/24/2020
ms.openlocfilehash: 167fb0014f2f0a9e7a2530fe276289f94347146e
ms.sourcegitcommit: f611b3f57027a21f7b229edf8a5b4f4c75f76331
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104785790"
---
# <a name="datasets-in-azure-data-factory"></a>Наборы данных в фабрике данных Azure
> [!div class="op_single_selector" title1="Выберите используемую версию службы "Фабрика данных":"]
> * [Версия 1](v1/data-factory-create-datasets.md)
> * [Текущая версия](concepts-datasets-linked-services.md)

[!INCLUDE[appliesto-adf-asa-md](includes/appliesto-adf-asa-md.md)]


В этой статье описывается, какие бывают наборы данных, каким образом они определяются в формате JSON, а также как они используются в конвейерах фабрики данных Azure.

Чтобы получить общие представления о фабрике данных, ознакомьтесь со статьей [Общие сведения о службе фабрики данных Azure, службе интеграции данных в облаке](introduction.md).

## <a name="overview"></a>Обзор
Фабрика данных может иметь один или несколько конвейеров. **Конвейер** — это логическая группа **действий**, которые вместе выполняют задачу. Действия в конвейере определяют операции с данными. Теперь **набор данных** — это именованное представление данных, которое указывает данные, необходимые для использования в **действиях**, разделяя их на входные и выходные. Наборы данных представляют данные в разных хранилищах, например в таблицах, файлах, папках и документах. Например, набор данных больших двоичных объектов Azure указывает контейнер больших двоичных объектов и папку в хранилище BLOB-объектов, из которой действие должно считывать данные.

Перед созданием набора данных необходимо создать [**связанную службу**](concepts-linked-services.md), чтобы связать хранилище данных с фабрикой данных. Связанные службы напоминают строки подключения, определяющие сведения о подключении, необходимые для подключения фабрики данных к внешним ресурсам. Таким образом, набор данных представляет структуру данных в связанных хранилищах данных, а связанная служба определяет подключение к источнику данных. Например, связанная служба хранилища Azure связывает учетную запись хранения с фабрикой данных. Набор данных BLOB-объектов Azure представляет собой контейнер BLOB-объектов и папку в учетной записи хранения Azure, содержащую входные BLOB-объекты для обработки.

Ниже приведен пример сценария. Чтобы скопировать данные из хранилища BLOB-объектов в базу данных SQL, создайте две связанные службы: хранилище BLOB-объектов Azure и база данных SQL Azure. Затем создайте два набора данных: текстовый DataSet с разделителями (который ссылается на связанную службу хранилища BLOB-объектов Azure, при условии, что в качестве источника есть текстовые файлы) и набор данных таблицы SQL Azure (который ссылается на связанную службу базы данных SQL Azure). Связанные службы хранилища BLOB-объектов Azure и базы данных SQL Azure содержат строки подключения, которые фабрика данных использует во время выполнения для подключения к службе хранилища Azure и базе данных SQL Azure соответственно. Текстовый набор с разделителями указывает контейнер больших двоичных объектов и папку больших двоичных объектов, которые содержат входные большие двоичные объекты в хранилище BLOB-объектов, а также параметры, связанные с форматированием. Набор данных таблицы SQL Azure определяет таблицу SQL в базе данных SQL, в которую будут копироваться данные.

На следующей схеме показана связь между конвейером, действием, набором данных и связанной службой в фабрике данных.

![Связь между конвейером, действием, набором данных и связанными службами](media/concepts-datasets-linked-services/relationship-between-data-factory-entities.png)


## <a name="dataset-json"></a>JSON набора данных
Набор данных в Фабрике данных определяется в формате JSON, как показано ниже.

```json
{
    "name": "<name of dataset>",
    "properties": {
        "type": "<type of dataset: DelimitedText, AzureSqlTable etc...>",
        "linkedServiceName": {
                "referenceName": "<name of linked service>",
                "type": "LinkedServiceReference",
        },
        "schema":[

        ],
        "typeProperties": {
            "<type specific property>": "<value>",
            "<type specific property 2>": "<value 2>",
        }
    }
}
```
В следующей таблице описаны свойства приведенного выше объекта JSON.

Свойство | Описание | Обязательно |
-------- | ----------- | -------- |
name | Имя набора данных. Дополнительные сведения см. в статье [Фабрика данных Azure — правила именования](naming-rules.md). |  Да |
type | Тип набора данных. Укажите один из типов, поддерживаемых фабрикой данных (например: DelimitedText, AzureSqlTable). <br/><br/>Дополнительные сведения см. в разделе [о типах наборов данных](#dataset-type). | Да |
схема | Схема набора данных, представляющая физический тип данных и форму. | Нет |
typeProperties | Свойства типа различаются для каждого типа. Сведения о поддерживаемых типах и их свойствах см. в разделе [Тип набора данных](#dataset-type). | Да |

При импорте схемы набора данных нажмите кнопку **Импорт схемы** и выберите Импорт из источника или из локального файла. В большинстве случаев вы будете импортировать схему непосредственно из источника. Но если у вас уже есть локальный файл схемы (файл Parquet или CSV с заголовками), можно указать Фабрике данных использовать этот файл как основу для схемы.

В действии копирования наборы данных используются в источнике и приемнике. Схема, определенная в наборе данных, необязательна в качестве ссылки. Если необходимо применить сопоставление столбцов и полей между источником и приемником, см. статью [сопоставление схем и типов](copy-activity-schema-and-type-mapping.md).

В средстве "Поток данных" наборы данных используются в преобразованиях источника и приемника. Наборы данных определяют базовые схемы данных. Если у ваших данных нет схемы, вы можете использовать смещение схемы для источника и приемника. Метаданные из наборов данных отображаются в исходном преобразовании в качестве проекции источника. Проекция в преобразовании источника представляет собой данные средства "Поток данных" посредством определенных имен и типов.

## <a name="dataset-type"></a>Тип набора данных

Фабрика данных Azure поддерживает различные типы наборов данных в зависимости от используемых хранилищ. Список хранилищ данных, поддерживаемых фабрикой данных, можно найти в статье [Обзор соединителя](connector-overview.md) . Щелкните хранилище данных, чтобы узнать, как создать связанную службу и набор данных для нее.

Например, для текстового набора данных с разделителями тип набора данных имеет значение **DelimitedText** , как показано в следующем примере JSON:

```json
{
    "name": "DelimitedTextInput",
    "properties": {
        "linkedServiceName": {
            "referenceName": "AzureBlobStorage",
            "type": "LinkedServiceReference"
        },
        "annotations": [],
        "type": "DelimitedText",
        "typeProperties": {
            "location": {
                "type": "AzureBlobStorageLocation",
                "fileName": "input.log",
                "folderPath": "inputdata",
                "container": "adfgetstarted"
            },
            "columnDelimiter": ",",
            "escapeChar": "\\",
            "quoteChar": "\""
        },
        "schema": []
    }
}
```

## <a name="create-datasets"></a>Создание наборов данных
Наборы данных можно создавать с помощью таких инструментов и пакетов SDK: [API .NET](quickstart-create-data-factory-dot-net.md), [PowerShell](quickstart-create-data-factory-powershell.md), [REST API](quickstart-create-data-factory-rest-api.md), шаблон Azure Resource Manager, портал Azure.

## <a name="current-version-vs-version-1-datasets"></a>Наборы данных текущей версии и версии 1

Ниже приведены некоторые различия между наборами данных службы "Фабрика данных" текущей версии и версии 1.

- Внешнее свойство не поддерживается в текущей версии. Оно заменено [триггером](concepts-pipeline-execution-triggers.md).
- Политики и свойства доступности не поддерживаются в текущей версии. Время начала конвейера зависит от [триггеров](concepts-pipeline-execution-triggers.md).
- Наборы данных с заданной областью (наборы данных, определенные в конвейере) не поддерживаются в текущей версии.

## <a name="next-steps"></a>Дальнейшие действия
Пошаговые инструкции по созданию конвейеров и наборов данных с помощью одного из указанных ниже инструментов или пакетов SDK приведены в указанных ниже руководствах.

- [Создание фабрики данных и конвейера с помощью пакета SDK для .NET](quickstart-create-data-factory-dot-net.md)
- [Создание фабрики данных и конвейера с помощью пакета PowerShell](quickstart-create-data-factory-powershell.md)
- [Создание фабрики данных Azure и конвейера с помощью REST API](quickstart-create-data-factory-rest-api.md)
- [Краткое руководство. Создание фабрики данных с помощью портала Azure](quickstart-create-data-factory-portal.md)
