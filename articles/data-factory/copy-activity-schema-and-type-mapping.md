---
title: Сопоставление схем и типов данных в действии копирования
description: Узнайте, как действие копирования в фабрике данных Azure сопоставляет схемы и типы данных из исходных данных с данными приемника.
services: data-factory
documentationcenter: ''
author: linda33wj
manager: shwang
ms.reviewer: craigg
ms.service: data-factory
ms.workload: data-services
ms.topic: conceptual
ms.date: 06/22/2020
ms.author: jingwang
ms.openlocfilehash: afcc7ad34807b74fa0b1ddaaa29223d8a6e25584
ms.sourcegitcommit: 75041f1bce98b1d20cd93945a7b3bd875e6999d0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2021
ms.locfileid: "98702225"
---
# <a name="schema-and-data-type-mapping-in-copy-activity"></a>Сопоставление схем и типов данных в действии копирования
[!INCLUDE[appliesto-adf-asa-md](includes/appliesto-adf-asa-md.md)]

В этой статье описывается, как действие копирования фабрики данных Azure выполняет сопоставление схемы и сопоставление типов данных из источника данных с данными приемника.

## <a name="schema-mapping"></a>Сопоставление схем

### <a name="default-mapping"></a>Сопоставление по умолчанию

По умолчанию действие копирования сопоставляет исходные данные с приемниками **по именам столбцов** с учетом регистра. Если приемник не существует, например, запись в файлы, имена исходных полей будут сохраняться как имена приемников. Такое сопоставление по умолчанию поддерживает гибкие схемы и смещение схемы от источника к приемнику от выполнения до выполнения. все данные, возвращаемые хранилищем исходных данных, можно скопировать в приемник.

Если источником является текстовый файл без строки заголовка, необходимо [явное сопоставление](#explicit-mapping) , так как источник не содержит имен столбцов.

### <a name="explicit-mapping"></a>Явное сопоставление

Можно также указать явное сопоставление, чтобы настроить сопоставление столбцов и полей от источника к приемнику в зависимости от нужды. При явном сопоставлении можно скопировать только частичные исходные данные в приемник или сопоставить исходные данные с приемниками с разными именами или перерисовать табличные или иерархические данные. Действие копирования:

1. Считывает данные из источника и определяет исходную схему.
2. Применяет заданное сопоставление.
3. Записывает данные в приемник.

Дополнительные сведения

- [Табличный источник для табличного приемника](#tabular-source-to-tabular-sink)
- [Иерархический источник для табличного приемника](#hierarchical-source-to-tabular-sink)
- [Табличный/иерархический источник в иерархический приемник](#tabularhierarchical-source-to-hierarchical-sink)

Вы можете настроить сопоставление в пользовательском интерфейсе создания фабрики данных — > действия копирования > вкладке Сопоставление или программно указать сопоставление в свойстве действие копирования — > `translator` . В `translator`  ->  `mappings` объектах Array-> поддерживаются следующие свойства: > `source` и `sink` , указывающие на конкретный столбец или поле для отображения данных.

| Свойство | Описание                                                  | Обязательно |
| -------- | ------------------------------------------------------------ | -------- |
| name     | Имя столбца или поля источника или приемника. Применяется для табличных источников и приемников. | Да      |
| ordinal  | Индекс столбца. Начало с 1. <br>Применяется и требуется при использовании текста с разделителями без строки заголовка. | Нет       |
| path     | Выражение пути JSON для каждого поля, которое необходимо извлечь или отобразить. Применяется для иерархических источников и приемников, например Cosmos DB, MongoDB или других соединителей.<br>Для полей в корневом объекте путь JSON начинается с root `$` ; для полей внутри массива `collectionReference` , выбранного свойством, путь JSON начинается с элемента массива без `$` . | Нет       |
| type     | Промежуточный тип данных фабрики данных столбца источника или приемника. В общем случае нет необходимости указывать или изменять это свойство. Дополнительные сведения о [сопоставлении типов данных](#data-type-mapping). | Нет       |
| culture  | Язык и региональные параметры столбца источника или приемника. Применяется, если тип — `Datetime` или `Datetimeoffset` . Значение по умолчанию — `en-us`.<br>В общем случае нет необходимости указывать или изменять это свойство. Дополнительные сведения о [сопоставлении типов данных](#data-type-mapping). | Нет       |
| format   | Строка формата, используемая, если тип — `Datetime` или `Datetimeoffset` . Сведения о формате даты и времени см. в статье [Строки настраиваемых форматов даты и времени](/dotnet/standard/base-types/custom-date-and-time-format-strings). В общем случае нет необходимости указывать или изменять это свойство. Дополнительные сведения о [сопоставлении типов данных](#data-type-mapping). | Нет       |

Следующие свойства поддерживаются `translator` в дополнение к `mappings` :

| Свойство            | Описание                                                  | Обязательный |
| ------------------- | ------------------------------------------------------------ | -------- |
| collectionReference | Применяется при копировании данных из иерархического источника, например Cosmos DB, MongoDB или других соединителей.<br>Для итерации и извлечения данных из объектов **в поле массива** с таким же шаблоном и построчного преобразования этих данных по каждому объекту укажите путь JSON массива для перекрестного применения. | Нет       |

#### <a name="tabular-source-to-tabular-sink"></a>Табличный источник для табличного приемника

Например, чтобы скопировать данные из Salesforce в базу данных SQL Azure и явным образом сопоставлять три столбца:

1. На вкладке действие копирования — > сопоставление нажмите кнопку **Импорт схем** , чтобы импортировать схемы источника и приемника.

2. Сопоставьте необходимые поля и исключите или удалите остальные.

![Преобразовать табличный в табличный](media/copy-activity-schema-and-type-mapping/map-tabular-to-tabular.png)

Такое же сопоставление можно настроить следующим образом в полезных данных действия копирования (см `translator` . раздел):

```json
{
    "name": "CopyActivityTabularToTabular",
    "type": "Copy",
    "typeProperties": {
        "source": { "type": "SalesforceSource" },
        "sink": { "type": "SqlSink" },
        "translator": {
            "type": "TabularTranslator",
            "mappings": [
                {
                    "source": { "name": "Id" },
                    "sink": { "name": "CustomerID" }
                },
                {
                    "source": { "name": "Name" },
                    "sink": { "name": "LastName" }
                },
                {
                    "source": { "name": "LastModifiedDate" },
                    "sink": { "name": "ModifiedDate" }
                }
            ]
        }
    },
    ...
}
```

Для копирования данных из текстовых файлов с разделителями без строки заголовка столбцы представляются по порядковому номеру, а не по именам. 

```json
{
    "name": "CopyActivityTabularToTabular",
    "type": "Copy",
    "typeProperties": {
        "source": { "type": "DelimitedTextSource" },
        "sink": { "type": "SqlSink" },
        "translator": {
            "type": "TabularTranslator",
            "mappings": [
                {
                    "source": { "ordinal": "1" },
                    "sink": { "name": "CustomerID" }
                }, 
                {
                    "source": { "ordinal": "2" },
                    "sink": { "name": "LastName" }
                }, 
                {
                    "source": { "ordinal": "3" },
                    "sink": { "name": "ModifiedDate" }
                }
            ]
        }
    },
    ...
}
```

#### <a name="hierarchical-source-to-tabular-sink"></a>Иерархический источник для табличного приемника

При копировании данных из иерархического источника в табличный приемник действие копирования поддерживает следующие возможности:

- Извлечение данных из объектов и массивов.
- Перекрестное применение нескольких объектов с одинаковым шаблоном из массива, в этом случае для преобразования одного объекта JSON в несколько записей в табличном результате.

Для более сложных иерархических преобразований можно использовать [поток данных](concepts-data-flow-overview.md). 

Например, если у вас есть исходный документ MongoDB со следующим содержимым:

```json
{
    "id": {
        "$oid": "592e07800000000000000000"
    },
    "number": "01",
    "date": "20170122",
    "orders": [
        {
            "prod": "p1",
            "price": 23
        },
        {
            "prod": "p2",
            "price": 13
        },
        {
            "prod": "p3",
            "price": 231
        }
    ],
    "city": [ { "name": "Seattle" } ]
}
```

И вы хотите скопировать его в текстовый файл в следующем формате с помощью строки заголовка, выполнив сведение данных внутри массива *(order_pd и order_price)* и перекрестного объединения с общими корневыми сведениями *(число, Дата и город)*:

| orderNumber | orderDate | order_pd | order_price | city    |
| ----------- | --------- | -------- | ----------- | ------- |
| 01          | 20170122  | P1       | 23          | Seattle |
| 01          | 20170122  | P2       | 13          | Seattle |
| 01          | 20170122  | P3       | 231         | Seattle |

Вы можете определить такое сопоставление в пользовательском интерфейсе создания фабрики данных:

1. На вкладке действие копирования — > сопоставление нажмите кнопку **Импорт схем** , чтобы импортировать схемы источника и приемника. Когда фабрика данных выполняет выборку самых верхних объектов при импорте схемы, если какое-либо поле не отображается, его можно добавить в нужный слой в иерархии — навести указатель на существующее имя поля и выбрать добавить узел, объект или массив.

2. Выберите массив, из которого необходимо выполнить итерацию и извлечение данных. Он будет автоматически заполнен как **ссылка на коллекцию**. Обратите внимание, что для такой операции поддерживается только один массив.

3. Сопоставьте необходимые поля с приемником. Фабрика данных автоматически определяет соответствующие пути JSON для иерархической стороны.

> [!NOTE]
> Для записей, в которых массив, помеченный как ссылка на коллекцию, пуст и установлен флажок, вся запись пропускается.

![Сопоставлять иерархическую структуру с табличным с помощью пользовательского интерфейса](media/copy-activity-schema-and-type-mapping/map-hierarchical-to-tabular-ui.png)

Можно также переключиться в **Расширенный редактор**, в этом случае можно непосредственно просматривать и изменять пути JSON полей. Если вы решили добавить новое сопоставление в этом представлении, укажите путь к JSON.

![Сопоставьте иерархическую структуру с табличным с помощью расширенного редактора](media/copy-activity-schema-and-type-mapping/map-hierarchical-to-tabular-advanced-editor.png)

Такое же сопоставление можно настроить следующим образом в полезных данных действия копирования (см `translator` . раздел):


```json
{
    "name": "CopyActivityHierarchicalToTabular",
    "type": "Copy",
    "typeProperties": {
        "source": { "type": "MongoDbV2Source" },
        "sink": { "type": "DelimitedTextSink" },
        "translator": {
            "type": "TabularTranslator",
            "mappings": [
                {
                    "source": { "path": "$['number']" },
                    "sink": { "name": "orderNumber" }
                },
                {
                    "source": { "path": "$['date']" },
                    "sink": { "name": "orderDate" }
                },
                {
                    "source": { "path": "['prod']" },
                    "sink": { "name": "order_pd" }
                },
                {
                    "source": { "path": "['price']" },
                    "sink": { "name": "order_price" }
                },
                {
                    "source": { "path": "$['city'][0]['name']" },
                    "sink": { "name": "city" }
                }
            ],
            "collectionReference": "$['orders']"
        }
    },
    ...
}
```

#### <a name="tabularhierarchical-source-to-hierarchical-sink"></a>Табличный/иерархический источник в иерархический приемник

Поток взаимодействия с пользователем аналогичен [иерархическим источникам табличного приемника](#hierarchical-source-to-tabular-sink). 

При копировании данных из табличного источника в иерархический приемник не поддерживается запись в массив внутри объекта.

При копировании данных из иерархического источника в иерархический приемник можно дополнительно сохранить иерархию всего слоя, выбрав объект или массив и сопоставляемого с приемником, не затрагивая внутренние поля.

Для более расширенного преобразования «перерисовка данных» можно использовать [поток данных](concepts-data-flow-overview.md). 

### <a name="parameterize-mapping"></a>Параметризация сопоставления

Если необходимо создать конвейер преобразованный для динамического копирования большого числа объектов, определите, можно ли использовать [сопоставление по умолчанию](#default-mapping) или необходимо определить [явное сопоставление](#explicit-mapping) для соответствующих объектов.

Если требуется явное сопоставление, можно выполнить следующие действия:

1. Определите параметр с типом объекта на уровне конвейера, например `mapping` .

2. Параметризация сопоставления: на вкладке "действие копирования — >" выберите Добавление динамического содержимого и выберите указанный выше параметр. Полезные данные действия будут выглядеть следующим образом:

    ```json
    {
        "name": "CopyActivityHierarchicalToTabular",
        "type": "Copy",
        "typeProperties": {
            "source": {...},
            "sink": {...},
            "translator": {
                "value": "@pipeline().parameters.mapping",
                "type": "Expression"
            },
            ...
        }
    }
    ```

3. Создайте значение для передачи в параметр сопоставления. Это должен быть весь объект `translator` определения. см. раздел примеры в [явном сопоставлении](#explicit-mapping) . Например, при копировании табличного источника в табличный приемник значение должно быть равно `{"type":"TabularTranslator","mappings":[{"source":{"name":"Id"},"sink":{"name":"CustomerID"}},{"source":{"name":"Name"},"sink":{"name":"LastName"}},{"source":{"name":"LastModifiedDate"},"sink":{"name":"ModifiedDate"}}]}` .

## <a name="data-type-mapping"></a>Сопоставление типов данных

Действие копирования выполняет сопоставление типов источников с типами приемников со следующим потоком: 

1. Преобразование исходных типов данных исходного кода в промежуточные типы данных фабрики данных Azure.
2. Автоматическое преобразование промежуточного типа данных в соответствии с соответствующими типами приемников, применимое как для [сопоставления по умолчанию](#default-mapping) , так и для [явного сопоставления](#explicit-mapping).
3. Преобразование промежуточных типов данных фабрики данных Azure в собственные типы данных приемника.

В настоящее время действие копирования поддерживает следующие промежуточные типы данных: Boolean, Byte, байтовый массив, DateTime, DatetimeOffset, десятичное, двойное, GUID, Int16, Int32, Int64, SByte, Single, String, TimeSpan, UInt16, UInt32 и UInt64.

Между промежуточными типами из источника в приемник поддерживаются следующие преобразования типов данных.

| саурце\синк | Логическое | массив байтов; | Decimal | Дата и время <small>(1)</small> | Float-Point <small>(2)</small> | GUID | Целое число <small>(3)</small> | Строка | TimeSpan |
| ----------- | ------- | ---------- | ------- | ---------------------------- | ------------------------------ | ---- | -------------------------- | ------ | -------- |
| Логическое     | ✓       |            | ✓       |                              | ✓                              |      | ✓                          | ✓      |          |
| массив байтов;  |         | ✓          |         |                              |                                |      |                            | ✓      |          |
| Дата и время   |         |            |         | ✓                            |                                |      |                            | ✓      |          |
| Decimal     | ✓       |            | ✓       |                              | ✓                              |      | ✓                          | ✓      |          |
| Float-Point | ✓       |            | ✓       |                              | ✓                              |      | ✓                          | ✓      |          |
| GUID        |         |            |         |                              |                                | ✓    |                            | ✓      |          |
| Целое число     | ✓       |            | ✓       |                              | ✓                              |      | ✓                          | ✓      |          |
| Строка      | ✓       | ✓          | ✓       | ✓                            | ✓                              | ✓    | ✓                          | ✓      | ✓        |
| TimeSpan    |         |            |         |                              |                                |      |                            | ✓      | ✓        |

(1) Дата-время включает DateTime и DateTimeOffset.

(2) точка с плавающей запятой включает Single и Double.

(3) целое число включает значения SByte, Byte, Int16, UInt16, Int32, UInt32, Int64 и UInt64.

> [!NOTE]
> - В настоящее время такое преобразование типов данных поддерживается при копировании между табличными данными. Иерархические источники и приемники не поддерживаются, что означает отсутствие преобразования определяемого системой типа данных между промежуточными типами источника и приемника.
> - Эта функция работает с последней моделью набора данных. Если этот параметр не отображается в пользовательском интерфейсе, попробуйте создать новый набор данных.

Следующие свойства поддерживаются в действии копирования для преобразования типов данных (в `translator` разделе для программной разработки).

| Свойство                         | Описание                                                  | Обязательный |
| -------------------------------- | ------------------------------------------------------------ | -------- |
| типеконверсион                   | Включите новый интерфейс преобразования типов данных. <br>Значение по умолчанию — false из-за обратной совместимости.<br><br>Для новых действий копирования, созданных с помощью пользовательского интерфейса создания фабрики данных, начиная с 2020 июня, это преобразование типов данных по умолчанию включено для лучшей работы, а на вкладке "действие копирования — >" для применимых сценариев можно просмотреть следующие параметры преобразования типов. <br>Для создания конвейера программным путем необходимо явно задать `typeConversion` для свойства значение true, чтобы включить его.<br>Для существующих действий копирования, созданных до выпуска этой функции, вы не увидите параметры преобразования типов в пользовательском интерфейсе создания фабрики данных для обеспечения обратной совместимости. | Нет       |
| типеконверсионсеттингс           | Группа параметров преобразования типов. Применяется `typeConversion` , если для задано значение `true` . Следующие свойства находятся в этой группе. | Нет       |
| *Ниже `typeConversionSettings`* |                                                              |          |
| алловдататрункатион              | Разрешить усечение данных при преобразовании исходных данных в приемник с другим типом во время копирования, например от десятичного до целого числа, из типа DatetimeOffset в DateTime. <br>Значение по умолчанию — true. | Нет       |
| треатбулеанаснумбер             | Рассматривать логические значения как числа, например true как 1.<br>Значение по умолчанию — false. | Нет       |
| dateTimeFormat                   | Строка форматирования при преобразовании дат без смещения часового пояса и строк, например `yyyy-MM-dd HH:mm:ss.fff` .  Подробные сведения см. в [строках настраиваемых форматов даты и времени](/dotnet/standard/base-types/custom-date-and-time-format-strings) . | Нет       |
| датетимеоффсетформат             | Строка форматирования при преобразовании дат с смещением часового пояса и строками, например `yyyy-MM-dd HH:mm:ss.fff zzz` .  Подробные сведения см. в [строках настраиваемых форматов даты и времени](/dotnet/standard/base-types/custom-date-and-time-format-strings) . | Нет       |
| тимеспанформат                   | Строка форматирования при преобразовании между периодами времени и строками, например `dd\.hh\:mm` . Подробные сведения см. в [строках настраиваемого формата TimeSpan](/dotnet/standard/base-types/custom-timespan-format-strings) . | Нет       |
| culture                          | Сведения о языке и региональных параметрах, используемые при преобразовании типов, например `en-us` или `fr-fr` . | Нет       |

**Пример**.

```json
{
    "name": "CopyActivity",
    "type": "Copy",
    "typeProperties": {
        "source": {
            "type": "ParquetSource"
        },
        "sink": {
            "type": "SqlSink"
        },
        "translator": {
            "type": "TabularTranslator",
            "typeConversion": true,
            "typeConversionSettings": {
                "allowDataTruncation": true,
                "treatBooleanAsNumber": true,
                "dateTimeFormat": "yyyy-MM-dd HH:mm:ss.fff",
                "dateTimeOffsetFormat": "yyyy-MM-dd HH:mm:ss.fff zzz",
                "timeSpanFormat": "dd\.hh\:mm",
                "culture": "en-gb"
            }
        }
    },
    ...
}
```

## <a name="legacy-models"></a>Устаревшие модели

> [!NOTE]
> Следующие модели для отображения исходных столбцов и полей в приемник по-прежнему поддерживаются в целях обратной совместимости. Мы рекомендуем использовать новую модель, упомянутую в [сопоставлении схем](#schema-mapping). Пользовательский интерфейс создания фабрики данных переключился на создание новой модели.

### <a name="alternative-column-mapping-legacy-model"></a>Альтернативное сопоставление столбцов (устаревшая модель)

Можно указать действие копирования — > `translator`  ->  `columnMappings` , чтобы сопоставлять табличные данные. В этом случае раздел Structure необходим для входных и выходных наборов данных. Функция сопоставления столбцов поддерживает сопоставление **всех или подмножества столбцов в разделе structure набора данных, используемого в качестве источника, со всеми столбцами в разделе structure набора данных, используемого в качестве приемника**. Ниже приведены неправильные условия, которые приводят к порождению исключения.

- В результате запроса исходного хранилища данных нет имени столбца, указанного в разделе structure входного набора данных.
- Приемник данных (если имеется предопределенная схема) не содержит имя столбца, указанное в разделе structure выходного набора данных.
- Меньше или больше столбцов в structure набора данных приемника, чем указано в сопоставлении.
- Повторяющееся сопоставление.

В следующем примере входной набор данных имеет структуру и указывает на таблицу в локальной базе данных Oracle.

```json
{
    "name": "OracleDataset",
    "properties": {
        "structure":
         [
            { "name": "UserId"},
            { "name": "Name"},
            { "name": "Group"}
         ],
        "type": "OracleTable",
        "linkedServiceName": {
            "referenceName": "OracleLinkedService",
            "type": "LinkedServiceReference"
        },
        "typeProperties": {
            "tableName": "SourceTable"
        }
    }
}
```

В этом примере выходной набор данных имеет структуру и указывает на таблицу в Салесфоце.

```json
{
    "name": "SalesforceDataset",
    "properties": {
        "structure":
        [
            { "name": "MyUserId"},
            { "name": "MyName" },
            { "name": "MyGroup"}
        ],
        "type": "SalesforceObject",
        "linkedServiceName": {
            "referenceName": "SalesforceLinkedService",
            "type": "LinkedServiceReference"
        },
        "typeProperties": {
            "tableName": "SinkTable"
        }
    }
}
```

Ниже приведен фрагмент JSON, который определяет действие копирования в конвейере. Столбцы из источника сопоставлены со столбцами в приемнике с помощью свойства **Translator**  ->  **columnMappings** .

```json
{
    "name": "CopyActivity",
    "type": "Copy",
    "inputs": [
        {
            "referenceName": "OracleDataset",
            "type": "DatasetReference"
        }
    ],
    "outputs": [
        {
            "referenceName": "SalesforceDataset",
            "type": "DatasetReference"
        }
    ],
    "typeProperties":    {
        "source": { "type": "OracleSource" },
        "sink": { "type": "SalesforceSink" },
        "translator":
        {
            "type": "TabularTranslator",
            "columnMappings":
            {
                "UserId": "MyUserId",
                "Group": "MyGroup",
                "Name": "MyName"
            }
        }
    }
}
```

Если вы используете синтаксис `"columnMappings": "UserId: MyUserId, Group: MyGroup, Name: MyName"`, чтобы указать сопоставление столбцов, оно будет поддерживаться без изменений.

### <a name="alternative-schema-mapping-legacy-model"></a>Альтернативное сопоставление схемы (устаревшая модель)

Можно указать действие копирования — > `translator`  ->  `schemaMapping` для сопоставления данных в виде иерархической формы и табличных данных, например копирования из MongoDB/остальное в текстовый файл и копирования из Oracle в API Azure Cosmos DB для MongoDB. В разделе `translator` действия копирования поддерживаются следующие свойства.

| Свойство            | Описание                                                  | Обязательно |
| :------------------ | :----------------------------------------------------------- | :------- |
| type                | Свойство Type преобразователя действий копирования должно иметь значение **табулартранслатор** . | Да      |
| schemaMapping       | Коллекция пар "ключ-значение", которая представляет отношение сопоставления **от стороны источника к стороне приемника**.<br/>- **Ключ:** представляет источник. Для **табличного источника** укажите имя столбца, как определено в структуре набора данных. для **иерархического источника** укажите выражение пути JSON для каждого поля, которое необходимо извлечь и отобразить.<br>- **Значение:** представляет приемник. Для **табличного приемника** укажите имя столбца, как определено в структуре набора данных. для **иерархического приемника** укажите выражение пути JSON для каждого поля, которое необходимо извлечь и отобразить. <br>В случае иерархических данных для полей в корневом объекте путь JSON начинается с root $; для полей в массиве, выбранном `collectionReference` свойством, путь JSON начинается с элемента массива. | Да      |
| collectionReference | Для итерации и извлечения данных из объектов **в поле массива** с таким же шаблоном и построчного преобразования этих данных по каждому объекту укажите путь JSON массива для перекрестного применения. Это свойство поддерживается только при копировании иерархических данных. | Нет       |

**Пример. копирование из MongoDB в Oracle:**

Например, если у вас есть документ MongoDB со следующим содержимым:

```json
{
    "id": {
        "$oid": "592e07800000000000000000"
    },
    "number": "01",
    "date": "20170122",
    "orders": [
        {
            "prod": "p1",
            "price": 23
        },
        {
            "prod": "p2",
            "price": 13
        },
        {
            "prod": "p3",
            "price": 231
        }
    ],
    "city": [ { "name": "Seattle" } ]
}
```

и вы хотите скопировать его в таблицу Azure SQL в следующем формате путем сведения данных внутри массива *(order_pd и order_price)* и перекрестного соединения с общими сведениями о корневом объекте *(number, date и city)*.

| orderNumber | orderDate | order_pd | order_price | city    |
| ----------- | --------- | -------- | ----------- | ------- |
| 01          | 20170122  | P1       | 23          | Seattle |
| 01          | 20170122  | P2       | 13          | Seattle |
| 01          | 20170122  | P3       | 231         | Seattle |

Настройте правило сопоставления схем, как в следующем примере JSON действия копирования.

```json
{
    "name": "CopyFromMongoDBToOracle",
    "type": "Copy",
    "typeProperties": {
        "source": {
            "type": "MongoDbV2Source"
        },
        "sink": {
            "type": "OracleSink"
        },
        "translator": {
            "type": "TabularTranslator",
            "schemaMapping": {
                "$.number": "orderNumber",
                "$.date": "orderDate",
                "prod": "order_pd",
                "price": "order_price",
                "$.city[0].name": "city"
            },
            "collectionReference":  "$.orders"
        }
    }
}
```

## <a name="next-steps"></a>Дальнейшие действия
См. другие статьи о действиях копирования:

- [Действие копирования в фабрике данных Azure](copy-activity-overview.md)
