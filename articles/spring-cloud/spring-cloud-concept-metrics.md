---
title: Основные сведения о метриках для Azure Spring Cloud
description: Узнайте, как просматривать метрики в Azure с пружинным облаком
author: bmitchell287
ms.service: spring-cloud
ms.topic: conceptual
ms.date: 09/08/2020
ms.author: brendm
ms.custom: devx-track-java
ms.openlocfilehash: 5506d2da0ccf09de7db7aff744984ae93c59fd32
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100571710"
---
# <a name="understand-metrics-for-azure-spring-cloud"></a>Общие сведения о метриках для Azure Веснного облака

Обозреватель метрик Azure — это компонент портал Microsoft Azure, который позволяет строить диаграммы, визуально сопоставлять тенденции, а также изучать пики и DIP в метриках. Используйте обозреватель метрик для анализа работоспособности и использования ресурсов. 

В Azure Веснного облака есть две точки зрения для метрик.
* Диаграммы на каждой странице обзора приложений
* Страница «Общие метрики»

 ![Диаграммы метрик](media/metrics/metrics-1.png)

В разделе **Общие сведения о** приложении представлены краткие проверки состояния для каждого приложения. На странице Общие **метрики** содержатся все метрики, доступные для справки. Вы можете создавать собственные диаграммы на странице Общие метрики и закреплять их на панели мониторинга.

## <a name="application-overview-page"></a>Страница "Обзор приложения"
Выберите приложение в разделе " **приложения** " для поиска диаграмм на странице "Обзор".  

 ![Управление метриками приложений](media/metrics/metrics-2.png)

На каждой странице **Обзор приложения** представлена диаграмма метрик, позволяющая выполнять быструю проверку состояния приложения.  

 ![Общие сведения о метриках приложений](media/metrics/metrics-3.png)

Azure Веснного облака предоставляет пять диаграмм с метриками, которые обновляются каждую минуту:

* **Ошибки HTTP-сервера**: число ошибок для HTTP-запросов к приложению
* **Данные в**: байтов, полученных приложением
* **Исходящие данные**: отправленные приложением байты
* **Запросы**: запросы, полученные приложением
* **Среднее время отклика**: среднее время отклика приложения

Для диаграммы можно выбрать диапазон времени от одного часа до семи дней.

## <a name="common-metrics-page"></a>Страница «Общие метрики»

**Метрики** в левой области навигации указывают на страницу Общие метрики.

Сначала выберите метрики для просмотра:

![Выбор представления метрики](media/metrics/metrics-4.png)

Сведения обо всех параметрах метрик можно найти в [разделе](#user-metrics-options) ниже.

Затем выберите тип агрегирования для каждой метрики:

![Агрегирование метрик](media/metrics/metrics-5.png)

Тип статистической обработки указывает, как объединять точки метрик в диаграмме по времени. Каждая минута имеет одну необработанную точку метрики, а тип предварительной агрегирования в пределах минуты предварительно определяется типом метрик.
* Sum: суммировать все значения в качестве целевых выходных данных.
* Среднее: используйте среднее значение периода в качестве целевого выходных данных.
* Макс./мин. Использование значения max/min в периоде в качестве целевого выходных данных.

Диапазон времени можно также изменить с последних 30 минут на последние 30 дней или в настраиваемый диапазон времени.

![Изменение метрики](media/metrics/metrics-6.png)

Представление по умолчанию включает все метрики аппликатион'с в облачной службе Azure весны. Метрики одного приложения или экземпляра можно фильтровать на экране.  Нажмите кнопку **Добавить фильтр**, задайте для свойства значение **приложение** и выберите целевое приложение, которое необходимо отслеживать, в текстовом поле **значения** . 

Можно использовать два вида фильтров (свойств):
* Приложение: фильтровать по имени приложения
* Экземпляр: фильтровать по экземпляру приложения

![Фильтры метрик](media/metrics/metrics-7.png)

Можно также использовать параметр **Применить разделение** , который будет рисовать несколько строк для одного приложения:

![Разделение метрик](media/metrics/metrics-8.png)

>[!TIP]
> Вы можете создавать собственные диаграммы на странице метрики и закреплять их на **панели мониторинга**. Начните с названия диаграммы.  Затем выберите **Pin to dashboard in the top right corner** (Закрепить на панели в верхнем правом углу). Теперь можно проверить приложение на **Панели мониторинга** на портале.

## <a name="user-metrics-options"></a>Параметры метрик пользователя

В следующих таблицах показаны доступные метрики и сведения.

### <a name="error"></a>Ошибка
>[!div class="mx-tdCol2BreakAll"]
>| Имя | Имя метрики пружинного выключателя | Unit | Сведения |
>|----|----|----|------------|
>| Tomcat. Global. Error | Tomcat. Global. Error | Count | Количество ошибок, произошедших в обработанных запросах |

### <a name="performance"></a>Производительность
>[!div class="mx-tdCol2BreakAll"]
>| Имя | Имя метрики пружинного выключателя | Unit | Сведения |
>|----|----|----|------------|
>| System. ЦП. Использование | System. ЦП. Использование | Процент | Последняя загрузка ЦП для всей системы (устарела и не рекомендуется использовать ее). Это значение равно Double в интервале [0,0, 1,0]. Значение 0,0 означает, что все ЦП были неактивны в течение последнего наблюдаемого периода времени, а значение 1,0 означает, что все ЦП были активно запущены 100% времени в течение последнего наблюдаемого периода.|
>| обработка. ЦП. Использование | Процент использования ЦП приложением | Процент | Последнее использование ЦП для виртуальная машина Java процесса (устарело и не предлагать использовать его). Это значение равно Double в интервале [0,0, 1,0]. Значение 0,0 означает, что ни один из процессоров не выполнял поток из процесса ВИРТУАЛЬНОЙ машины Java в течение последнего наблюдаемого периода времени, а значение 1,0 означает, что все ЦП активно работали потоки из ВИРТУАЛЬНОЙ машины Java 100% времени в течение последнего наблюдаемого периода. Потоки из ВИРТУАЛЬНОЙ машины Java включают в себя потоки приложений, а также внутренние потоки ВИРТУАЛЬНОЙ машины Java.|
>| аппкпуусаже | Использование ЦП приложения (Предварительная версия) | Процент | Последнее использование ЦП процессом ВИРТУАЛЬНОЙ машины Java в отношении ЦП, выделенного для этого приложения, двойное значение типа в диапазоне от [0,0 до 1,0]. Значение 0,0 означает, что ни один из процессоров не выполнял поток из процесса ВИРТУАЛЬНОЙ машины Java в течение последнего наблюдаемого периода времени, а значение 1,0 означает, что все ЦП активно работали потоки из ВИРТУАЛЬНОЙ машины Java 100% времени в течение последнего наблюдаемого периода. Потоки из ВИРТУАЛЬНОЙ машины Java включают в себя потоки приложений, а также внутренние потоки ВИРТУАЛЬНОЙ машины Java.|
>| виртуальной машины Java. Memory. COMMITTED | виртуальной машины Java. Memory. COMMITTED | Байты | Представляет объем памяти, который гарантированно доступен для использования ВИРТУАЛЬНОЙ машины Java. ВИРТУАЛЬНОЙ машины Java может освободить память для системы, а фиксация может быть меньше, чем инициализация. зафиксированное значение всегда будет больше или равно используемому. |
>| виртуальной машины Java. Memory. used | виртуальной машины Java. Memory. used | Байты | Представляет объем памяти, используемый в данный момент в байтах. |
>| виртуальной машины Java. Memory. Max | виртуальной машины Java. Memory. Max | Байты | Представляет максимальный объем памяти, который может использоваться для управления памятью. Объем используемой и зафиксированной памяти всегда будет меньше или равен Max, если определено максимальное значение. Выделение памяти может завершиться ошибкой, если она попытается увеличить используемую память, например, которая использовалась > зафиксирована, даже если используется <= Max все равно будет иметь значение true (например, если в системе недостаточно виртуальной памяти). |
>| виртуальной машины Java. GC. max. Data. size | виртуальной машины Java. GC. max. Data. size | Байты | Пиковое использование памяти пула памяти старого поколения с момента запуска виртуальной машины Java. |
>| виртуальной машины Java. GC. Live. Data. size | виртуальной машины Java. GC. Live. Data. size | Байты | Размер пула памяти старого поколения после полного GC. |
>| виртуальной машины Java. GC. Memory. выдвинуто | виртуальной машины Java. GC. Memory. выдвинуто | Байты | Число положительных увеличений размера пула памяти старого поколения до сборки мусора в после сборки мусора. |
>| виртуальной машины Java. GC. Memory. распределяемый | виртуальной машины Java. GC. Memory. распределяемый | Байты | Увеличивается при увеличении размера пула памяти создания Титов после одного сборщика мусора до следующего. |
>| виртуальной машины Java. GC. Pause. Total. Count | виртуальной машины Java. GC. Pause (Итого — число) | Count | Общее число GC после запуска этого ЖМВ, включая Титов и Old GC. |
>| виртуальной машины Java. GC. Pause. Общее. время | виртуальной машины Java. GC. Pause (всего-время) | Миллисекунды | Общее время, затраченное на сборку мусора после запуска ЖМВ, включая Титов и Old GC. |

### <a name="performance-net"></a>Производительность (.NET)

>[!div class="mx-tdCol2BreakAll"]
>| Имя | Имя метрики пружинного выключателя | Unit | Сведения |
>|------|-----------------------------|------|---------|
>| Использование ЦП       | Использование ЦП      | Процент      | Процент использования ЦП процессом относительно всех ресурсов ЦП системы [0-100]. |
>| Рабочий набор     | Рабочий набор    | Мегабайты    | Объем рабочего набора, используемого процессом. |
>| Размер кучи сборщика мусора    | GC-heap-размер   | Мегабайты    | Общий размер кучи, сообщаемый сборщиком мусора. |
>| Число GC Gen 0  | Gen-0-GC-Count | Count        | Число сборок мусора поколения 0 в секунду. |
>| Число GC Gen 1  | Gen-1-GC-Count | Count        | Число сборок мусора поколения 1 в секунду. |
>| Число сборок мусора поколения 2  | Gen-2-GC-Count | Count        | Число сборок мусора поколения 2 в секунду. |
>| Время в GC      | время — GC      | Процент      | Процент времени сборки мусора с момента последнего сбора мусора. |
>| Размер кучи поколения 0 | Gen-0-size     | Байты        | Размер кучи поколения 0. |
>| Размер кучи поколения 1 | Gen-1-size     | Байты        | Размер кучи поколения 1. |
>| Размер кучи поколения 2 | Gen-2-size     | Байты        | Размер кучи поколения 2. |
>| Размер кучи LOH   | LOH-размер       | Байты        | Размер кучи кучи больших объектов. |
>| Скорость выделения | ставка распределения     | Байты        | Число байтов, выделенных в секунду. |
>| Число сборок  | число сборок | Count        | Число загруженных сборок. |
>| Число исключений | число исключений | Count       | Число исключений в секунду. |
>| Число потоков пула потоков      | ThreadPool — число потоков              | Count | Число потоков пула потоков. |
>| Мониторинг количества конфликтов блокировок | монитор-блокировка-состязание-количество        | Count | Число конфликтов в секунду при попытке снять блокировку монитора. |
>| Длина очереди пула потоков      | ThreadPool — длина очереди              | Count | Длина очереди рабочих элементов пула потоков. |
>| Число завершенных элементов пула потоков | ThreadPool — завершено — количество элементов | Count | Число завершенных рабочих элементов пула потоков. |
>| Число активных таймеров               | Счетчик "активный — таймер"               | Count | Количество таймеров, которые активны в данный момент. Активным называется таймер, который регистрируется в такте в какой-то момент в будущем и еще не был отменен. |

Дополнительные сведения см. в разделе [счетчики DotNet](/dotnet/core/diagnostics/dotnet-counters).

### <a name="request"></a>Запрос
>[!div class="mx-tdCol2BreakAll"]
>| Имя | Имя метрики пружинного выключателя | Unit | Сведения |
>|----|----|----|------------|
>| Tomcat. Global. Sent | Tomcat. Global. Sent | Байты | Объем отправленного веб-сервера Tomcat данных |
>| Tomcat. Global. Received. | Tomcat. Global. Received. | Байты | Объем полученного веб-сервера Tomcat данных |
>| Tomcat. Global. Request. Total. Count | Tomcat. Global. Request (всего — Count) | Count | Общее число обработанных запросов веб-сервера Tomcat |
>| Tomcat. Global. Request. Max | Tomcat. Global. Request. Max | Миллисекунды | Максимальное время, в течение которого веб-сервер Tomcat обработать запрос |

### <a name="request-net"></a>Запрос (.NET)

>[!div class="mx-tdCol2BreakAll"]
>| Имя | Имя метрики пружинного выключателя | Unit | Сведения |
>|------|-----------------------------|------|---------|
>| Число запросов в секунду | запросов в секунду | Count | Частота запросов. |
>| Общее количество запросов | Всего запросов | Count | Общее число запросов. |
>| Текущие запросы | текущие запросы | Count | Число текущих запросов. |
>| Неудачные запросы | Неудачные запросы | Count | Количество невыполненных запросов. |

Дополнительные сведения см. в разделе [счетчики DotNet](/dotnet/core/diagnostics/dotnet-counters).

### <a name="session"></a>Сеанс
>[!div class="mx-tdCol2BreakAll"]
>| Имя | Имя метрики пружинного выключателя | Unit | Сведения |
>|----|----|----|------------|
>| Tomcat. Sessions. Active. Max | Tomcat. Sessions. Active. Max | Count | Максимальное количество сеансов, которые были активными одновременно |
>| Tomcat. Sessions. Alive. Max | Tomcat. Sessions. Alive. Max | Миллисекунды | Наибольшее время (в секундах) истечения срока действия сеанса |
>| Tomcat. Sessions. Created | Tomcat. Sessions. Created | Count | Число созданных сеансов |
>| Tomcat. Sessions. Expires | Tomcat. Sessions. Expires | Count | Число просроченных сеансов |
>| Tomcat. Sessions. отклонено | Tomcat. Sessions. отклонено | Count | Число сеансов, которые не были созданы, так как достигнуто максимальное число активных сеансов. |
>| Tomcat. Sessions. Active. Current | Tomcat. Sessions. Active. Current | Count | Число активных сеансов Tomcat |

## <a name="see-also"></a>См. также

* [Краткое руководство. Мониторинг приложений Azure Spring Cloud с помощью журналов, метрик и трассировки](spring-cloud-quickstart-logs-metrics-tracing.md)

* [Начало работы с обозревателем метрик Azure](../azure-monitor/essentials/metrics-getting-started.md)

* [Анализ журналов и метрик с помощью параметров диагностики](./diagnostic-services.md)

## <a name="next-steps"></a>Дальнейшие шаги

* [Руководство. Мониторинг ресурсов, использующих пружинные облака, с помощью оповещений и групп действий](./spring-cloud-tutorial-alerts-action-groups.md)

* [Квоты и планы обслуживания для Azure Веснного облака](./spring-cloud-quotas.md)
