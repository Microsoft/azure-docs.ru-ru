---
title: Как использовать разрешения в Azure Веснного облака
description: В этой статье показано, как создать пользовательские роли для разрешений в Azure Веснного облака.
author: MikeDodaro
ms.author: brendm
ms.service: spring-cloud
ms.topic: how-to
ms.date: 09/04/2020
ms.custom: devx-track-java
ms.openlocfilehash: 0c0b3bd81e0f73a7879382e28516378bd722bc17
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96498648"
---
# <a name="how-to-use-permissions-in-azure-spring-cloud"></a>Как использовать разрешения в Azure Веснного облака
В этой статье показано, как создать настраиваемые роли, которые делегируют разрешения для облачных ресурсов Azure весны. Пользовательские роли расширяют [встроенные роли Azure](../role-based-access-control/built-in-roles.md) с различными разрешениями на хранение.

Мы будем реализовывать следующие пользовательские роли:

* **Роль разработчика**: 
    * Развернуть
    * Проверить
    * Перезапустить приложения
    * Можно применять и вносить изменения в конфигурации приложений в репозитории Git.
    * Может получить поток журнала
* **Бизнес-операции — проектирование надежности сайтов**: 
    * Перезапустить приложения
    * Получение потоков журнала
    * Не удается внести изменения в приложения или конфигурации
* **Роль действий Azure pipelines/Jenkins/GitHub**:
    * Может выполнять операции создания, чтения, обновления и удаления
    * Может создавать и настраивать все в Azure Веснного облака и приложений в рамках экземпляра службы: Azure Pipelines, Jenkins или GitHub, используя шаблоны terraform или ARM.

## <a name="define-developer-role"></a>Определение роли разработчика

Роль разработчика включает разрешения для перезапуска приложений и просмотра их потоков журналов, но не может вносить изменения в приложения и конфигурацию.

### <a name="navigate-subscription-and-resource-group-access-control-iam"></a>Навигация по подписке и управлению доступом к группам ресурсов (IAM)

Чтобы приступить к определению роли, выполните следующие действия.

1. В портал Azure откройте подписку и группу ресурсов, в которых необходимо назначить настраиваемую роль.
2. Открытый **Контроль доступа (IAM)**.
3. Выберите **+ Добавить**.
4. Щелкните **добавить настраиваемую роль**.
5. Щелкните **Далее**.

   ![Создание настраиваемой роли](media/spring-cloud-permissions/create-custom-role.png)

6. Щелкните **Добавить разрешения**.

   ![Начало добавления разрешений](media/spring-cloud-permissions/add-permissions.png)

### <a name="search-for-azure-spring-cloud-permissions"></a>Поиск разрешений Azure весны в облаке:
7. В поле поиска выполните поиск по запросу *Microsoft.app*.
Выберите *Microsoft Azure пружинное облако*.

   ![Выберите Azure пружины Cloud](media/spring-cloud-permissions/spring-cloud-permissions.png)

8. Выберите разрешения для роли разработчика:

В **Microsoft. аппплатформ/пружины** выберите:
* Запись: создание или обновление экземпляра облачной службы Azure весны
* Чтение: получение экземпляра облачной службы Azure весны
* Другие: список тестовых ключей для экземпляра облачной службы Azure весны

Из **Microsoft. аппплатформ/пружины/Apps** выберите:
* Чтение: чтение Microsoft Azure пружинного приложения
* Другое: получение URL-адреса для ресурса приложения Microsoft Azure пружины Cloud

Из **Microsoft. аппплатформ, пружины, приложений и привязок** выберите:
* Чтение: чтение Microsoft Azure "Привязка приложения" пружины Cloud

В **Microsoft. аппплатформ/пружины/приложения/развертывания** выберите:
* Запись: развернутое Microsoft Azureное облачное приложение для весны
* Чтение: чтение и развертывание облачного приложения с пружиной Microsoft Azure
* Другие: Запуск Microsoft Azure развертывания облачных приложений с пружиной
* Другие: завершение развертывания Microsoft Azure весны облачных приложений
* Другие: перезапустите развертывание облачного приложения Microsoft Azure весны
* Другое: получение URL-адреса файла журнала развертывания приложения весны Microsoft Azure

Из **Microsoft. аппплатформ/пружина/приложения/домены** выберите:
* Чтение: Прочитайте Microsoft Azure пользовательский домен приложения пружины Cloud

Из **Microsoft. аппплатформ/пружины/сертификатов** выберите:
* Чтение: чтение Microsoft Azure весны облачный сертификат

В **Microsoft. аппплатформ/Locations/оператионресултс/пружины** выберите:
* Чтение: результат операции чтения

В **Microsoft. аппплатформ/Locations/значение operationstatus/** идентификатор операции выберите:
* Чтение: состояние операции чтения

    [![Создание разрешений ](media/spring-cloud-permissions/developer-permissions-box.png) девелоплер](media/spring-cloud-permissions/developer-permissions-box.png#lightbox)

9. Нажмите кнопку **Добавить**.

10. Проверьте разрешения.

11. Щелкните **Проверка и создание**.

## <a name="define-devops-engineer-role"></a>Определение роли инженера DevOps
Эта процедура определяет роль с разрешениями на развертывание, тестирование и перезапуск облачных приложений Azure весны.

1. Повторите эту процедуру, чтобы перейти к подписке, группе ресурсов и контролю доступа (IAM).
2. Выберите разрешения для роли инженера DevOps:

В **Microsoft. аппплатформ/пружины** выберите:
* Запись: создание или обновление экземпляра облачной службы Azure весны
* Удаление: удаление экземпляра облачной службы Azure весны
* Чтение: получение экземпляра облачной службы Azure весны
* Другие: включение конечной точки тестирования экземпляра облачной службы Azure весны
* Другие: отключение конечной точки тестирования экземпляра облачной службы Azure весны
* Другие: список тестовых ключей для экземпляра облачной службы Azure весны
* Другое: повторное создание тестового ключа для экземпляра облачной службы Azure весны

Из **Microsoft. аппплатформ/пружины/Apps** выберите:
* Запись: напишите Microsoft Azure приложение "пружинное облако"
* Удаление: Удаление приложения Microsoft Azure пружины Cloud
* Чтение: чтение Microsoft Azure пружинного приложения
* Другое: получение URL-адреса для ресурса приложения Microsoft Azure пружины Cloud
* Другое: Проверка пользовательского домена Microsoft Azure весны облачного приложения

Из **Microsoft. аппплатформ, пружины, приложений и привязок** выберите:
* Запись: Write Microsoft Azureная привязка приложения пружины Cloud
* Удаление: удаляется Microsoft Azureная привязка приложения пружины Cloud
* Чтение: чтение Microsoft Azure "Привязка приложения" пружины Cloud

В **Microsoft. аппплатформ/пружины/приложения/развертывания** выберите:
* Запись: развернутое Microsoft Azureное облачное приложение для весны
* Удаление: Удаление развертывания облачного приложения Azure весны
* Чтение: чтение и развертывание облачного приложения с пружиной Microsoft Azure
* Другие: Запуск Microsoft Azure развертывания облачных приложений с пружиной
* Другие: завершение развертывания Microsoft Azure весны облачных приложений
* Другие: перезапустите развертывание облачного приложения Microsoft Azure весны
* Другое: получение URL-адреса файла журнала развертывания приложения весны Microsoft Azure

Из **Microsoft. аппплатформ/пружины/Apps/deployments/SKU** выберите:
* Read: вывод списка доступных SKU для развертывания приложения

Из **Microsoft. аппплатформ/Locations** выберите:
* Другие: Проверка доступности имени

Из Microsoft. Аппплатформ/Locations/Оператионресултс/пружинный выбор: чтение: результат операции чтения

В **Microsoft. аппплатформ/Locations/значение operationstatus/** идентификатор операции выберите:
* Чтение: состояние операции чтения

В **Microsoft. аппплатформ/SKU** выберите:
* Чтение: вывод списка доступных номеров SKU

   [![Разрешения ](media/spring-cloud-permissions/dev-ops-permissions.png) на разработку и Op](media/spring-cloud-permissions/dev-ops-permissions.png#lightbox)

3. Нажмите кнопку **Добавить**.

4. Проверьте разрешения.

5. Щелкните **Проверка и создание**.

## <a name="define-ops---site-reliability-engineering-role"></a>Определение роли по проектированию надежности для операций на сайте
Эта процедура определяет роль с разрешениями на развертывание, тестирование и перезапуск облачных приложений Azure весны.

1. Повторите эту процедуру, чтобы перейти к подписке, группе ресурсов и контролю доступа (IAM).

2. Выберите разрешения для роли "Проектирование надежности" Ops-site:

В **Microsoft. аппплатформ/пружины** выберите:
* Чтение: получение экземпляра облачной службы Azure весны
* Другие: список тестовых ключей для экземпляра облачной службы Azure весны

Из **Microsoft. аппплатформ/пружины/Apps** выберите:
* Чтение: чтение Microsoft Azure пружинного приложения

Из **Microsoft. аппплатформ/Apps/deployments** выберите:
* Чтение: чтение и развертывание облачного приложения с пружиной Microsoft Azure
* Другие: Запуск Microsoft Azure развертывания облачных приложений с пружиной
* Другие: завершение развертывания Microsoft Azure весны облачных приложений
* Другие: перезапустите развертывание облачного приложения Microsoft Azure весны

В **Microsoft. аппплатформ/Locations/оператионресултс/пружины** выберите:
* Чтение: результат операции чтения

В **Microsoft. аппплатформ/Locations/значение operationstatus/** идентификатор операции выберите:
* Чтение: состояние операции чтения

   [![Разрешения ](media/spring-cloud-permissions/ops-sre-permissions.png) Ops и выполняются](media/spring-cloud-permissions/ops-sre-permissions.png#lightbox)

3. Нажмите кнопку **Добавить**.

4. Проверьте разрешения.

5. Щелкните **Проверка и создание**.

## <a name="define-azure-pipelinesprovisioning-role"></a>Определение роли Azure Pipelines и подготовки
Эта роль действий Jenkins/GitHub позволяет создавать и настраивать все приложения в Azure для весны и приложений с помощью экземпляра службы. Эта роль предназначена для высвобождения или развертывания кода.

1. Повторите эту процедуру, чтобы перейти к подписке, группе ресурсов и контролю доступа (IAM).

2. Откройте параметры **разрешений** .

3. Выберите разрешения для роли Azure Pipelines и подготовки:
  
В **Microsoft. аппплатформ/пружины** выберите:
* Запись: создание или обновление экземпляра облачной службы Azure весны
* Удаление: удаление экземпляра облачной службы Azure весны
* Чтение: получение экземпляра облачной службы Azure весны
* Другие: включение конечной точки тестирования экземпляра облачной службы Azure весны
* Другие: отключение конечной точки тестирования экземпляра облачной службы Azure весны
* Другие: список тестовых ключей для экземпляра облачной службы Azure весны
* Другое: повторное создание тестового ключа для экземпляра облачной службы Azure весны

Из **Microsoft. аппплатформ/пружины/Apps** выберите:
* Запись: напишите Microsoft Azure приложение "пружинное облако"
* Удаление: Удаление приложения Microsoft Azure пружины Cloud
* Чтение: чтение Microsoft Azure пружинного приложения
* Другое: получение URL-адреса для ресурса приложения Microsoft Azure пружины Cloud
* Другое: Проверка пользовательского домена Microsoft Azure весны облачного приложения

Из **Microsoft. аппплатформ, пружины, приложений и привязок** выберите:
* Запись: Write Microsoft Azureная привязка приложения пружины Cloud
* Удаление: удаляется Microsoft Azureная привязка приложения пружины Cloud
* Чтение: чтение Microsoft Azure "Привязка приложения" пружины Cloud

В **Microsoft. аппплатформ/пружины/приложения/развертывания** выберите:
* Запись: развернутое Microsoft Azureное облачное приложение для весны
* Удаление: Удаление развертывания облачного приложения Azure весны
* Чтение: чтение и развертывание облачного приложения с пружиной Microsoft Azure
* Другие: Запуск Microsoft Azure развертывания облачных приложений с пружиной
* Другие: завершение развертывания Microsoft Azure весны облачных приложений
* Другие: перезапустите развертывание облачного приложения Microsoft Azure весны
* Другое: получение URL-адреса файла журнала развертывания приложения весны Microsoft Azure

В **Microsoft. аппплатформ/SKU** выберите:
* Чтение: вывод списка доступных номеров SKU

Из **Microsoft. аппплатформ/Locations** выберите:
* Другие: Проверка доступности имени

В **Microsoft. аппплатформ/Locations/оператионресултс/пружины** выберите:
* Чтение: результат операции чтения

В **Microsoft. аппплатформ/Locations/значение operationstatus/** идентификатор операции выберите:
* Чтение: состояние операции чтения

В **Microsoft. аппплатформ/SKU** выберите:
* Чтение: вывод списка доступных номеров SKU

   [![Разрешения ](media/spring-cloud-permissions/pipelines-permissions-box.png) конвейеров](media/spring-cloud-permissions/pipelines-permissions-box.png#lightbox)  

4. Нажмите кнопку **Добавить**.

5. Проверьте разрешения.

6. Щелкните **Проверка и создание**.


## <a name="see-also"></a>См. также раздел
* [Создание или обновление пользовательских ролей Azure с помощью портала Azure](../role-based-access-control/custom-roles-portal.md)

Дополнительные сведения о трех методах, определяющих пользовательские разрешения, см. в следующих статьях:
* [Клонирование роли](../role-based-access-control/custom-roles-portal.md#clone-a-role)
* [Создание клиента с нуля](../role-based-access-control/custom-roles-portal.md#start-from-scratch)
* [Запуск из JSON](../role-based-access-control/custom-roles-portal.md#start-from-json)