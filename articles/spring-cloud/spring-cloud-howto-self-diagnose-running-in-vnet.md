---
title: Самостоятельное устранение неполадок в облачной виртуальной сети Azure
description: Узнайте, как самостоятельно диагностировать и устранять проблемы в Azure Веснного облака, работающего в виртуальной сети.
author: MikeDodaro
ms.author: brendm
ms.service: spring-cloud
ms.topic: how-to
ms.date: 01/25/2021
ms.custom: devx-track-java
ms.openlocfilehash: 5407213b62902326d53b73e42ee3af1ba9b11524
ms.sourcegitcommit: dac05f662ac353c1c7c5294399fca2a99b4f89c8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "102125103"
---
# <a name="self-diagnose-running-azure-spring-cloud-in-vnet"></a>Самостоятельная диагностика с запуском Azure Веснного облака в виртуальной сети
Служба диагностики Azure весны в облаке поддерживает Интерактивное устранение неполадок в виртуальных сетях без настройки. Служба диагностики Azure весны в облаке выявляет проблемы и предоставляет сведения, которые помогают устранить неполадки и устранить их.

## <a name="navigate-to-the-diagnostics-page"></a>Переход на страницу "Диагностика"
Следующая процедура запускает диагностику для сетевых приложений.
1. Войдите на портал Azure.
1. Перейдите на страницу Обзор Azure Spring Cloud.
1. В меню в левой области навигации выберите **Диагностика и устранение проблем** .
1. Выберите третью категорию ( **сеть**).

   ![Название самодиагностического средства](media/spring-cloud-self-diagnose-vnet/self-diagostic-title.png)

## <a name="view-a-diagnostic-report"></a>Просмотр диагностического отчета
После щелчка категории **сети** вы можете просмотреть две проблемы, связанные с сетью, для которых в вашей виртуальной сети вставлено облако Azure веснного облака: **разрешение DNS** и **требуемый исходящий трафик**.

   ![Параметры самостоятельной диагностики](media/spring-cloud-self-diagnose-vnet/self-diagostic-dns-req-outbound-options.png)

Выберите целевую задачу, чтобы просмотреть диагностический отчет. Отобразится сводка диагностики, например: 

* *Ресурс удален.*
* *Ресурс не развернут в собственной виртуальной сети*.

Некоторые результаты содержат связанную документацию. В разных подсетях результаты будут отображаться отдельно.

## <a name="dns-resolution"></a>DNS-разрешение 
Если выбрано **разрешение DNS**, результаты будут указывать на наличие проблем с DNS в приложениях.  Работоспособные приложения перечислены ниже.

* *Проблемы DNS устранены без проблем в подсети "subnet01"*.
* *Проблемы DNS устранены без проблем в подсети "subnet02"*.

Следующий пример диагностического отчета показывает, что работоспособность приложения неизвестна. Отчетный период времени не включает время, когда было сообщено о состоянии работоспособности.  Предположим, что время окончания контекста — *2021-03-03T04:20:00Z*. Последняя метка времени в **таблице разрешения DNS** — *2021-03-03T03:39:00Z*, предыдущий день. Возможно, журнал проверки работоспособности не был отправлен из-за заблокированной сети. 

Результаты неизвестного состояния работоспособности содержат соответствующую документацию.  Для просмотра раскрывающегося списка можно щелкнуть левую угловую скобку.

   ![Неизвестный DNS-сервер](media/spring-cloud-self-diagnose-vnet/self-diagostic-dns-unknown.png)

Если вы неправильно настроили набор записей зоны Частная зона DNS, вы получите критически важный результат, например: `Failed to resolve the Private DNS in subnet xxx` . 

В раскрывающемся списке **таблицы разрешения DNS** можно найти подробные сведения о сообщении, из которого можно проверить конфигурацию.

## <a name="required-outbound-traffic"></a>Требуемый исходящий трафик 

Если выбрать **необходимый исходящий трафик**, результаты будут указывать на наличие проблем с исходящим трафиком в приложениях.  Работоспособные приложения перечислены ниже.

* * Требуемый исходящий трафик устранен без проблем в подсети "subnet01".
* * Требуемый исходящий трафик устранен без проблем в подсети "subnet02".

Если какая-либо подсеть заблокирована с помощью NSG или правил брандмауэра, и если журнал не заблокирован, то будут обнаружены следующие сбои. Вы можете проверить, не были ли изменялись все [обязанности клиента](spring-cloud-vnet-customer-responsibilities.md).
    
   ![Сбой конечной точки](media/spring-cloud-self-diagnose-vnet/self-diagostic-endpoint-failed.png)

Если в `Required Outbound Traffic Table Renderings` течение 30 минут нет данных, результатом будет `health status unknown` . Возможно, ваша сеть заблокирована или служба журналов не работает.

   ![Конечная точка диагностики неизвестна](media/spring-cloud-self-diagnose-vnet/self-diagostic-endpoint-unknown.png)

## <a name="see-also"></a>См. также раздел
* [Самостоятельная диагностика Azure Веснного облака](spring-cloud-howto-self-diagnose-solve.md)