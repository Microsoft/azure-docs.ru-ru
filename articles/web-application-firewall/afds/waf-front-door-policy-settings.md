---
title: Параметры политики для брандмауэра веб-приложения с помощью передней дверцы Azure
description: Знакомство с брандмауэром веб-приложения (WAF).
author: vhorne
ms.service: web-application-firewall
ms.topic: article
services: web-application-firewall
ms.date: 08/21/2019
ms.author: victorh
ms.openlocfilehash: 08b21ccd7f7958f00546583f680ecb8cde4a20c8
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "75932620"
---
# <a name="policy-settings-for-web-application-firewall-on-azure-front-door"></a>Параметры политики для брандмауэра веб-приложения на передней дверце Azure

Политика брандмауэра веб-приложения (WAF) позволяет управлять доступом к веб-приложениям с помощью набора настраиваемых и управляемых правил. Имя политики WAF должно быть уникальным. При попытке использовать существующее имя вы получите ошибку проверки. Существует несколько параметров уровня политики, которые применяются ко всем правилам, указанным для этой политики, как описано в этой статье.

## <a name="waf-state"></a>Состояние WAF

Политика WAF для передней дверцы может находиться в одном из следующих двух состояний:
- **Включено:** Если политика включена, WAF активно проверяет входящие запросы и выполняет соответствующие действия в соответствии с определениями правил.
- **Отключено.** если политика отключена, проверка WAF приостанавливается. Входящие запросы будут обходить WAF и отправляются на серверные части на основе маршрутизации на передней дверце.

## <a name="waf-mode"></a>Режим WAF

Для политики WAF можно настроить один из следующих двух режимов работы.

- **Режим обнаружения** При запуске в режиме обнаружения WAF не принимает никаких действий, кроме Monitor, и регистрирует запрос и соответствующее правило WAF в журналах WAF. Включите диагностику ведения журнала для передней дверцы (при использовании портала это можно сделать, перейдя к разделу **Диагностика** в портал Azure).

- **Режим предотвращения** Если настроено выполнение в режиме предотвращения, WAF выполняет указанное действие, если запрос соответствует правилу. Все запросы, для которых обнаружены совпадающие правила, также регистрируются в журналах WAF.

## <a name="waf-response-for-blocked-requests"></a>WAF ответ для заблокированных запросов

По умолчанию, когда WAF блокирует запрос из-за сопоставленного правила, он возвращает код состояния 403 с параметром- **запрос блокирует** сообщение. Для ведения журнала также возвращается строка ссылки.

Вы можете определить пользовательский код состояния ответа и ответное сообщение, если запрос заблокирован WAF. Поддерживаются следующие настраиваемые коды состояния:

- 200 ОК
- 403 запрещено
- метод 405 не разрешен
- 406 неприемлемо
- 429. слишком много запросов

Код состояния настраиваемого ответа и ответное сообщение являются параметром уровня политики. После настройки все заблокированные запросы получают одно и то же состояние пользовательского ответа и ответное сообщение.

## <a name="uri-for-redirect-action"></a>Универсальный код ресурса (URI) для действия перенаправления

Необходимо определить универсальный код ресурса (URI) для перенаправления запросов, если для любого из правил, содержащихся в политике WAF, выбрано действие **перенаправления** . Этот URI перенаправления должен быть допустимым сайтом HTTP (S) и после настройки. все запросы, соответствующие правилам с действием "перенаправление", будут перенаправляться на указанный сайт.


## <a name="next-steps"></a>Дальнейшие действия
- Узнайте, как определить [пользовательские ответы](waf-front-door-configure-custom-response-code.md) WAF
