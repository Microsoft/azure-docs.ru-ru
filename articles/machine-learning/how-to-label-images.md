---
title: Теги для изображений в проекте маркировки
title.suffix: Azure Machine Learning
description: Узнайте, как использовать средства добавления тегов к данным, чтобы быстро подготовить данные для Машинного обучения в проекте маркировки Машинного обучения Azure.
author: sdgilley
ms.author: sgilley
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.date: 07/27/2020
ms.custom: data4ml
ms.openlocfilehash: eb8c69a6bf009543e104a472469c243638726f60
ms.sourcegitcommit: 31cfd3782a448068c0ff1105abe06035ee7b672a
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/10/2021
ms.locfileid: "98060373"
---
# <a name="tag-images-in-a-labeling-project"></a>Теги для изображений в проекте маркировки 

После того как администратор проекта [создаст проект маркировки данных](./how-to-create-labeling-projects.md#create-a-data-labeling-project) в службе "Машинное обучение Azure", вы можете применить средство добавления меток, чтобы быстро подготовить данные для проекта Машинного обучения. В этой статье рассматриваются следующие вопросы:

> [!div class="checklist"]
> * Доступ к проектам маркировки
> * Средства добавления меток
> * Сведения об использовании средств для конкретных задач маркировки

## <a name="prerequisites"></a>Предварительные требования

* [Учетная запись Майкрософт](https://account.microsoft.com/account) или учетная запись Azure Active Directory для организации и проекта.
* Доступ уровня участника к рабочей области, которая содержит проект маркировки.

## <a name="sign-in-to-the-workspace"></a>Вход в рабочую область

1. Войдите в [Студию машинного обучения Azure](https://ml.azure.com).

1. Выберите подписку и рабочую область, которая содержит проект маркировки.  Эту информацию можно получить у администратора проекта.

1. Чтобы найти проект, в области слева выберите **Маркировка данных**.  

## <a name="understand-the-labeling-task"></a>Понимание задачи маркировки

В таблице проектов маркировки данных выберите **ссылку для маркировки** для своего проекта.

Вы увидите инструкции, относящиеся к вашему проекту. Здесь описаны типы данных, которые вы в нем встретите, правила принятия решений и другие важные сведения. Изучив эту информацию, в верхней части страницы выберите **Задачи**  или в нижней части страницы щелкните **Запуск маркировки**.

## <a name="common-features-of-the-labeling-task"></a>Общие функции для задачи маркировки

В любой задаче расстановки меток нужно выбрать подходящий тег (или несколько тегов) из набора, заданного администратором проекта. Первые девять тегов можно выбирать нажатием цифровых клавиш на клавиатуре.  

В задачах классификации изображений вы можете отображать несколько изображений одновременно. Используйте значки над областью изображения, чтобы выбрать макет. 

Чтобы выбрать сразу все отображаемые изображения, нажмите **Select all** (Выбрать все). Круглая кнопка выбора в правом верхнем углу изображения позволяет выбрать конкретное изображение. Чтобы присвоить тег, нужно выбрать по меньшей мере одно изображение. Если выбраны несколько изображений, каждый выбранный тег будет применен ко всем выбранным изображениям.

В нашем примере выбран макет 2×2, и мы намерены применить тег Mammal (Млекопитающее) к изображениям медведя и касатки. Изображение акулы уже помечено тегом Cartilaginous fish (Хрящевая рыба), а игуана пока никак не помечена.

![Макеты с несколькими изображениями и выбор](./media/how-to-label-images/layouts.png)

> [!Important] 
> Переключайте макеты только в тот момент, когда отображается новая страница данных без меток. Переключение макетов приводит к очистке всех несохраненных тегов на странице.

Azure включает кнопку **Отправить**, когда вы присвоите теги всем изображениям на странице. Нажмите **Отправить**, чтобы сохранить работу.

После отправки тегов для отображаемых данных Azure обновит страницу, предоставив новый набор изображений из рабочей очереди.

### <a name="assisted-machine-learning-preview"></a>Полуавтоматическое машинное обучение (предварительная версия) 

> [!IMPORTANT]
> В настоящее время выпущена общедоступная предварительная версия службы полуавтоматического машинного обучения.
> Предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для производственных рабочих нагрузок. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Могут срабатывать алгоритмы машинного обучения. Если эти алгоритмы включены в проекте, результат может быть следующим.

* Когда будет помечена часть изображений, в верхней части экрана рядом с именем проекта могут появиться **кластеризованные задачи**.  Это означает, что изображения сгруппированы. Теперь похожие изображения собраны на одной странице,  и переключившись на одно из таких представлений, можно воспользоваться преимуществами группирования.  

* На более позднем этапе рядом с именем проекта могут появится **задачи с предварительной маркировкой**.  При этом изображения будут отображаться с предложенной меткой, которая поступает из модели классификации машинного обучения. Ни одна из моделей машинного обучения не обеспечивает 100%-ю точность. Хотя мы используем только те изображения, для которых такая модель достоверна, эти изображения все же могут быть помечены неправильно.  При появлении этих меток перед отправкой страницы исправьте те из них, которые назначены неправильно.  

* Для моделей обнаружения объектов вы можете увидеть, что ограничивающие прямоугольники и метки уже существуют.  Исправьте любые неточности, прежде чем отправлять страницу.

Модель машинного обучения может быть достаточно точной только для предварительной маркировки небольшого подмножества изображений (особенно на ранних этапах проекта). После маркировки этих изображений проект маркировки вернется в ручной режим добавления меток, чтобы собрать дополнительные данные для следующего цикла обучения модели. Со временем модель станет более достоверной для большей части изображений, в результате чего в дальнейшем количество задач предварительной маркировки в проекте увеличится.

## <a name="tag-images-for-multi-class-classification"></a>Присвоение изображениям тегов для многоклассовой классификации

Если проект имеет тип "Классификация изображений с множеством классов", то один тег присваивается всему изображению в целом. Вы можете в любой момент просмотреть инструкции, открыв страницу **Instructions** (Инструкции) и выбрав элемент **View detailed instructions** (Просмотреть подробные инструкции).

Если вы заметите ошибку после присвоения тега изображению, ее можно исправить. Выберите значок **X** на метке, которая отображается под изображением, чтобы очистить тег. Или выберите изображение и задайте другой класс. Вновь выбранное значение заменит ранее примененный тег.

## <a name="tag-images-for-multi-label-classification"></a>Присвоение изображениям тегов для классификации с несколькими метками

Если вы работаете над проектом типа "Классификация изображений со множеством меток", вы можете применить к изображению один *или несколько* тегов. Чтобы просмотреть инструкции по проекту, откройте страницу **Instructions** (Инструкции) и выберите элемент **View detailed instructions** (Просмотреть подробные инструкции).

Выберите изображение для маркировки, а затем нажмите нужный тег. Этот тег применяется ко всем выбранным изображениям, после чего выбор изображений отменяется. Чтобы применить новые теги, необходимо повторно выбрать изображения. В следующей анимации демонстрируется процесс присвоения тегов с несколькими метками.

1. Функция **Выбрать все** используется для применения тега Ocean (Океан)
1. Выбрано одно изображение с тегом Closeup (Крупный план).
1. Выбраны три изображения с тегом Wide angle (Широкий угол).

![Анимация, демонстрирующая рабочий поток присвоения нескольких меток](./media/how-to-label-images/multilabel.gif)

Чтобы исправить ошибку, можно щелкнуть значок **X**, чтобы очистить отдельные теги, либо выбрать изображения и выбрать тег, чтобы удалить его со всех выбранных изображений. Вот как выглядит этот сценарий. Щелчок по тегу Land (Земля) удалит этот тег из двух выбранных изображений.

![Снимок экрана с отменой множественного выбора](./media/how-to-label-images/multiple-deselection.png)

Azure включает кнопку **Отправить** только после того, как вы присвоите каждому изображению хотя бы один тег. Нажмите **Отправить**, чтобы сохранить работу.


## <a name="tag-images-and-specify-bounding-boxes-for-object-detection"></a>Расстановка тегов и ограничивающих прямоугольников для обнаружения объектов

Если проект имеет тип "Идентификация объектов (ограничивающие прямоугольники)", для каждого изображения вам нужно указать один или несколько ограничивающих прямоугольников и применить тег к каждому прямоугольнику. Изображения могут иметь несколько ограничивающих прямоугольников, каждый из которых имеет один тег. Ссылка **View detailed instructions** (Просмотреть подробные инструкции) поможет вам определить, допустимо ли в текущем проекте добавлять несколько ограничивающих прямоугольников.

1. Выберите тег для ограничивающего прямоугольника, который вы хотите создать.
1. Выберите средство **Rectangular box** (Прямоугольник) ![Средство определения прямоугольника](./media/how-to-label-images/rectangular-box-tool.png) или нажмите клавишу R.
3. Щелкните и перетащите указатель мыши, чтобы приближенно задать диагональ ограничивающего прямоугольника. Скорректируйте размер и/или положение ограничивающего прямоугольника, перетаскивая его края или углы.

![Создание ограничивающего прямоугольника](./media/how-to-label-images/bounding-box-sequence.png)

Чтобы удалить ограничивающий прямоугольник, щелкните значок с изображением креста (X), который отображается рядом с ограничивающим прямоугольником после его создания.

Вы не можете изменить тег для уже существующего ограничивающего прямоугольника. Если при назначении тега будет допущена ошибка, придется удалить ограничивающий прямоугольник и создать новый с правильным тегом.

По умолчанию вы можете изменять существующие ограничивающие прямоугольники. Средство **Lock/unlock regions** (Установить/снять блокировку регионов) ![Средство блокировки и снятия блокировки регионов](./media/how-to-label-images/lock-bounding-boxes-tool.png) или нажатие клавиши L переключает это поведение. Если регионы заблокированы, вы можете изменить форму и/или расположение только для нового ограничивающего прямоугольника.

Используйте средство **Управление регионами** ![Значок средства управления регионами — четыре стрелки, указывающие от центра фигуры вверх, направо, вниз, налево.](./media/how-to-label-images/regions-tool.png) или нажмите клавишу M, чтобы изменить существующий ограничивающий прямоугольник. Перетаскивайте края или углы, чтобы скорректировать форму. Щелкните внутри ограничивающего прямоугольника, чтобы перетащить его целиком. Если вы не можете изменить регион, вы скорее всего включили средство **Lock/unlock regions** (Установить/снять блокировку регионов).

Чтобы создать несколько ограничивающих прямоугольников одинакового размера, используйте средство **Template-based box** (Прямоугольник по шаблону) средство ![Средство прямоугольника по шаблону](./media/how-to-label-images/template-box-tool.png) или нажмите клавишу T. Если у изображения нет ограничивающих прямоугольников, когда вы активируете средство создания прямоугольников по шаблону, оно создаст прямоугольники размером 50×50 пикселей. Если вы уже создали ограничивающий прямоугольник, а затем активировали средство создания прямоугольника по шаблону, новые ограничивающие прямоугольники будут иметь тот же размер, что и последний созданный прямоугольник. Размер прямоугольников, созданных по шаблону, можно изменить после размещения. Изменение размера прямоугольника, созданного по шаблону, влияет только на этот конкретный прямоугольник.

Чтобы удалить *все* ограничивающие прямоугольники в текущем изображении, выберите средство **Delete all regions** (Удалить все регионы) ![Средство удаления регионов](./media/how-to-label-images/delete-regions-tool.png).

После создания ограничивающих прямоугольников для изображения выберите **Отправить**, чтобы сохранить работу.

## <a name="tag-images-and-specify-polygons-for-image-segmentation"></a>Присвоение изображениям тегов и указание прямоугольников для сегментации изображений 

Если проект имеет тип "Сегментация экземпляра (прямоугольник)", для каждого изображения вам нужно присвоить один или несколько полигонов и применить тег к каждому прямоугольнику. Изображения могут иметь несколько ограничивающих прямоугольников, каждый из которых имеет один тег. Щелкните ссылку **View detailed instructions** (Просмотреть подробные инструкции), чтобы определить, допустимо ли в текущем проекте добавлять несколько ограничивающих прямоугольников.

1. Выберите тег для прямоугольника, который вы хотите создать.
1. Выберите средство **Нарисовать многоугольную область** ![Средство "Нарисовать многоугольную область"](./media/how-to-label-images/polygon-tool.png) или нажмите клавишу P.
1. Щелкните каждую точку многоугольника.  Когда фигура будет закончена, дважды щелкните для завершения.

    :::image type="content" source="media/how-to-label-images/polygon.gif" alt-text="Создание многоугольников для кошки и собаки":::

Чтобы удалить многоугольник, щелкните значок с изображением креста (X), который отображается рядом с многоугольником после его создания.

Если вы хотите изменить тег для многоугольника, выберите средство **Move region** (Переместить область), щелкните многоугольник и выберите нужный тег.

Вы можете изменить существующие многоугольники. Средство **Lock/unlock regions** (Установить/снять блокировку регионов) ![Изменение многоугольника с помощью средства блокировки и снятия блокировки регионов](./media/how-to-label-images/lock-bounding-boxes-tool.png) или нажатие клавиши L переключает это поведение. Если регионы заблокированы, вы можете изменить форму и/или расположение только для нового многоугольника.

Используйте средство **Добавление или удаление точек многоугольника** ![Значок средства добавления или удаления точек многоугольника.](./media/how-to-label-images/add-remove-points-tool.png) или нажмите клавишу U, чтобы откорректировать существующий многоугольник. Щелкните многоугольник, чтобы добавить или удалить точку. Если вы не можете изменить регион, вы скорее всего включили средство **Lock/unlock regions** (Установить/снять блокировку регионов).

Чтобы удалить *все* многоугольники в текущем изображении, выберите средство **Delete all regions** (Удалить все регионы) ![Средство удаления всех областей](./media/how-to-label-images/delete-regions-tool.png).

После создания многоугольников для изображения выберите **Отправить**, чтобы сохранить работу.

## <a name="finish-up"></a>Завершение работы

После отправки страницы данных с тегами Azure назначит вам новый набор данных без меток из рабочей очереди. Если нет доступных данных без меток, вы увидите сообщение об этом со ссылкой на домашнюю страницу портала.

Завершив работу по добавлению меток, нажмите свое имя в правом верхнем углу портала меток и выберите действие **Выход**. Если вы не выйдете самостоятельно, через некоторое время завершится период ожидания и Azure передаст ваши данные другому маркировщику.

## <a name="next-steps"></a>Дальнейшие действия

* См. статью [Обучение модели классификации изображений](./tutorial-train-models-with-aml.md).


