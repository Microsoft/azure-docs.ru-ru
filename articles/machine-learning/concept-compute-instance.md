---
title: Сведения о вычислительном экземпляре Машинного обучения Azure
titleSuffix: Azure Machine Learning
description: Сведения о вычислительном экземпляре Машинного обучения Azure, полностью управляемой облачной рабочей станции.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.author: sgilley
author: sdgilley
ms.date: 10/02/2020
ms.openlocfilehash: ef753043218f259c69082dbb8682517be79cf95c
ms.sourcegitcommit: 24f30b1e8bb797e1609b1c8300871d2391a59ac2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/10/2021
ms.locfileid: "100099801"
---
# <a name="what-is-an-azure-machine-learning-compute-instance"></a>Сведения о вычислительном экземпляре Машинного обучения Azure

Вычислительный экземпляр Машинное обучение Azure — это управляемая облачная Рабочая станция для специалистов по обработке и анализу данных.

Вычислительные экземпляры упрощают начало работы с Машинным обучением Azure, а также предоставляют ИТ-администраторам возможности управления и подготовки предприятия.  

Используйте вычислительный экземпляр в качестве полностью настроенной и управляемой среды разработки в облаке для машинного обучения. Их также можно использовать в качестве целевого объекта вычислений для обучения и для целей разработки и тестирования.  

Для обучения модели производственного уровня используйте [кластер машинное обучение Azure COMPUTE](how-to-create-attach-compute-cluster.md) с возможностями масштабирования с несколькими узлами. Для развертывания модели производственного класса используйте [кластер службы Azure Kubernetes](how-to-deploy-azure-kubernetes-service.md).

Для работы функциональности Jupyter экземпляра вычислительных ресурсов необходимо убедиться, что связь через веб-сокет не отключена. Убедитесь, что сеть допускает подключения WebSocket к *. instances.azureml.net и *. instances.azureml.ms.

## <a name="why-use-a-compute-instance"></a>Зачем использовать вычислительный экземпляр?

Вычислительный экземпляр — это полностью управляемая облачная Рабочая станция, оптимизированная для среды разработки машинного обучения. Он предоставляет следующие преимущества:

|Основные преимущества|Описание|
|----|----|
|Производительность|Вы можете создавать и развертывать модели с помощью интегрированных записных книжек и следующих средств в Машинное обучение Azure Studio:<br/>— Jupyter;<br/>— JupyterLab;<br/>-RStudio (Предварительная версия)<br/>Вычислительный экземпляр полностью интегрирован с Машинное обучение Azure рабочей областью и Studio. Вы можете обмениваться записными книжками и данными с другими специалистами по анализу данных в рабочей области.<br/> Можно также использовать [VS Code](https://techcommunity.microsoft.com/t5/azure-ai/power-your-vs-code-notebooks-with-azml-compute-instances/ba-p/1629630) с экземплярами вычислений.
|Управляемость и безопасность|Сократите воздействие на систему безопасности и обеспечьте соответствие корпоративным требованиям безопасности. Вычислительные экземпляры предоставляют надежные политики управления и защищенные сетевые конфигурации, такие как:<br/><br/>— Автоинициализация из шаблонов диспетчер ресурсов или пакета SDK для Машинное обучение Azure<br/>- [Управление доступом на основе ролей в Azure (Azure RBAC)](../role-based-access-control/overview.md)<br/>- [поддержка виртуальной сети;](./how-to-secure-training-vnet.md#compute-instance)<br/>— политика SSH для включения или отключения доступа по протоколу SSH.<br/>TLS 1,2 включен |
|Предварительно настроено &nbsp; для &nbsp; машинного обучения|Сэкономьте время на задачах настройки благодаря предварительно настроенным, актуальным пакетам машинного обучения, платформам для глубокого обучения и драйверам GPU.|
|Полные возможности настройки|Широкая поддержка типов виртуальных машин Azure, включая GPU, и сохраняемая низкоуровневая настройка, например установка пакетов и драйверов, позволяют без труда реализовывать сложные сценарии. |

Вы можете [создать вычислительный экземпляр](how-to-create-manage-compute-instance.md?tabs=python#create) самостоятельно, или администратор может [создать вычислительный экземпляр](how-to-create-manage-compute-instance.md?tabs=python#create-on-behalf-of-preview).

## <a name="tools-and-environments"></a><a name="contents"></a>Средства и среды

> [!IMPORTANT]
> Элементы, отмеченные (Предварительная версия) в этой статье, сейчас доступны в общедоступной предварительной версии.
> Предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для производственных рабочих нагрузок. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Вычислительный экземпляр Машинного обучения Azure позволяет создавать, обучать и развертывать модели в полностью интегрированной среде записных книжек в рабочей области.

Вы можете запускать записные книжки Jupyter в [VS Code](https://techcommunity.microsoft.com/t5/azure-ai/power-your-vs-code-notebooks-with-azml-compute-instances/ba-p/1629630) используя экземпляр COMPUTE в качестве удаленного сервера без необходимости SSH. Можно также включить интеграцию VS Code через [Удаленное расширение SSH](https://devblogs.microsoft.com/python/enhance-your-azure-machine-learning-experience-with-the-vs-code-extension/).

Вы можете [установить пакеты](how-to-access-terminal.md#install-packages) и [Добавить ядра](how-to-access-terminal.md#add-new-kernels) в вычислительный экземпляр.  

Следующие средства и среды уже установлены на вычислительном экземпляре: 

|Общие средства и среды|Сведения|
|----|:----:|
|Драйверы|`CUDA`</br>`cuDNN`</br>`NVIDIA`</br>`Blob FUSE` |
|Библиотека Intel MPI||
|Azure CLI ||
|Образцы Машинного обучения Azure ||
|Docker||
|Nginx||
|NCCL 2.0 ||
|Protobuf|| 

|Средства и среды **R**|Сведения|
|----|:----:|
|Выпуск RStudio Server с открытым исходным кодом (Предварительная версия)||
|Ядро R||
|Пакет SDK Машинного обучения Azure для R|[azuremlsdk](https://azure.github.io/azureml-sdk-for-r/reference/index.html)</br>Примеры пакета SDK|

|Средства и среды **PYTHON**|Сведения|
|----|----|
|Anaconda Python||
|Jupyter и расширения||
|Jupyterlab и расширения||
[Пакет SDK службы "Машинное обучение Azure" для Python](/python/api/overview/azure/ml/intro?preserve-view=true&view=azure-ml-py)</br>из PyPI|Включает большинство дополнительных пакетов azureml.  Чтобы просмотреть полный список, [откройте окно терминала в вычислительном экземпляре](how-to-access-terminal.md) и выполните команду <br/> `conda list -n azureml_py36 azureml*` |
|Другие пакеты PyPI|`jupytext`</br>`tensorboard`</br>`nbconvert`</br>`notebook`</br>`Pillow`|
|Пакеты Conda|`cython`</br>`numpy`</br>`ipykernel`</br>`scikit-learn`</br>`matplotlib`</br>`tqdm`</br>`joblib`</br>`nodejs`</br>`nb_conda_kernels`|
|Пакеты глубокого обучения|`PyTorch`</br>`TensorFlow`</br>`Keras`</br>`Horovod`</br>`MLFlow`</br>`pandas-ml`</br>`scrapbook`|
|Пакеты ONNX|`keras2onnx`</br>`onnx`</br>`onnxconverter-common`</br>`skl2onnx`</br>`onnxmltools`|
|Образцы SDK Python и R для Машинного обучения Azure||

Все пакеты Python устанавливаются в среде **Python 3.6 — AzureML**.  

## <a name="accessing-files"></a>Доступ к файлам

Записные книжки и скрипты R хранятся в учетной записи хранения по умолчанию для рабочей области в общей папке Azure.  Эти файлы находятся в каталоге "Файлы пользователя". Это хранилище упрощает обмен записными книжками между вычислительными экземплярами. Кроме того, учетная запись хранения позволяет безопасно сохранять записные книжки при завершении работы или удалении вычислительного экземпляра.

Учетная запись общей папки Azure в рабочей области подключается как диск в вычислительном экземпляре. Этот диск является рабочим каталогом по умолчанию для Jupyter, Jupyter Labs и RStudio. Это означает, что записные книжки и другие файлы, созданные в Jupyter, JupyterLab или RStudio, автоматически сохраняются в общей папке и доступны для использования в других экземплярах вычислений.

Файлы в общей папке доступны из всех вычислительных экземпляров в данной рабочей области. Любые изменения этих файлов в вычислительном экземпляре надежно сохраняются в общей папке.

Вы также можете клонировать последние образцы Машинного обучения Azure в папку в каталоге "Файлы пользователя" в общей папке рабочей области.

Запись небольших файлов на сетевые диски может выполняться медленнее, чем при записи на локальный диск экземпляра COMPUTE.  При записи большого количества небольших файлов попробуйте использовать каталог непосредственно в вычислительном экземпляре, например каталог `/tmp`. Обратите внимание, что эти файлы не будут доступны из других экземпляров вычислений. 

Вы можете использовать `/tmp` каталог в вычислительном экземпляре для временных данных.  Однако не создавайте большие файлы данных на диске операционной системы вычислительного экземпляра.  Вместо этого используйте [хранилища данных](concept-azure-machine-learning-architecture.md#datasets-and-datastores) . Если вы установили расширение JupyterLab Git, это также может привести к снижению производительности вычислительного экземпляра.

## <a name="managing-a-compute-instance"></a>Управление вычислительным экземпляром

В рабочей области в студии Машинного обучения Azure выберите **Вычисление**, а затем вверху выберите **Вычислительный экземпляр**.

![Управление вычислительным экземпляром](./media/concept-compute-instance/manage-compute-instance.png)

Вы можете выполнять следующие действия.

* [Создание вычислительного экземпляра](#create). 
* Обновите вкладку "вычисленные экземпляры".
* Запустите, приостанавливает и перезапустите вычислительный экземпляр.  Вы платите за экземпляр при его запуске. Останавливает вычислительный экземпляр, если он не используется для снижения затрат. Остановка вычислительного экземпляра освобождает его. При необходимости снова запустите ее. Обратите внимание, что остановка вычислительного экземпляра останавливает выставление счетов за часы вычислений, но плата за диск, общедоступный IP-адрес и стандартный балансировщик нагрузки по-прежнему будет взиматься.
* Удаление вычислительного экземпляра.
* Отфильтруйте список экземпляров вычислений, чтобы отображались только созданные вами.

Для каждого вычислительного экземпляра в рабочей области, который можно использовать, можно:

* Доступ к Jupyter, JupyterLab или RStudio в вычислительном экземпляре.
* Подключение к вычислительному экземпляру по протоколу SSH. Доступ по протоколу SSH по умолчанию отключен, но его можно включить во время создания вычислительного экземпляра. Доступ по протоколу SSH осуществляется с помощью открытого и закрытого ключей. На вкладке приводятся подробные сведения об SSH-подключении, такие как IP-адрес, имя пользователя и номер порта.
* Получение сведений об определенном вычислительном экземпляре, таких как IP-адрес и регион.

[Azure RBAC](../role-based-access-control/overview.md) позволяет контролировать, какие пользователи в рабочей области могут создавать, удалять, запускать, останавливаться и перезапускать вычислительные экземпляры. Все пользователи с ролью участника или владельца рабочей области могут создавать, удалять, запускать, останавливать и перезапускать вычислительные экземпляры в рабочей области. Однако доступ к Jupyter, JupyterLab и RStudio на этом вычислительном экземпляре разрешен только создателю определенного вычислительного экземпляра или назначенному пользователю, если он был создан от их имени. Вычислительный экземпляр предназначен для одного пользователя с правами root и может проходить через Jupyter/JupyterLab/RStudio. В вычислительном экземпляре будет входить однопользовательский вход, и все действия будут использовать удостоверение этого пользователя для Azure RBAC, а для выполнения экспериментов — идентификаторы. Доступ по протоколу SSH контролируется с помощью открытого и закрытого ключей.

Эти действия можно контролировать с помощью Azure RBAC:
* *Microsoft.MachineLearningServices/workspaces/computes/read*
* *Microsoft.MachineLearningServices/workspaces/computes/write*
* *Microsoft.MachineLearningServices/workspaces/computes/delete*
* *Microsoft. Мачинелеарнингсервицес/рабочие области/вычислений/запуск/действие*
* *Microsoft. Мачинелеарнингсервицес/рабочие области/вычислений/действие*
* *Microsoft. Мачинелеарнингсервицес/рабочие области/вычислений/перезагрузка/действие*

Чтобы создать вычислительный экземпляр, необходимо иметь разрешения на следующие действия:
* *Microsoft.MachineLearningServices/workspaces/computes/write*
* *Microsoft.MachineLearningServices/workspaces/checkComputeNameAvailability/action*


### <a name="create-a-compute-instance"></a><a name="create"></a>Создание экземпляра вычислений

В рабочей области Машинное обучение Azure Studio [Создайте новый вычислительный экземпляр](how-to-create-attach-compute-studio.md#compute-instance) из раздела **вычислений** или **записных книжек** , когда будете готовы запустить одну из ваших записных книжек. 

Экземпляр можно также создать одним из следующих способов:
* Непосредственно из [интегрированных записных книжек](tutorial-1st-experiment-sdk-setup.md#azure)
* На портале Azure
* Из шаблона Azure Resource Manager. Пример шаблона см. в разделе [Создание шаблона вычислительной машинное обучение Azure](https://github.com/Azure/azure-quickstart-templates/tree/master/101-machine-learning-compute-create-computeinstance).
* С помощью [пакета SDK для машинное обучение Azure](https://github.com/MicrosoftDocs/azure-docs/blob/master/articles/machine-learning/concept-compute-instance.md)
* Из [расширения CLI для машинное обучение Azure](reference-azure-machine-learning-cli.md#computeinstance)

Выделенные ядра для каждого региона на каждую квоту семейства виртуальных машин и общая региональная квота, применяемая к созданию вычислительных экземпляров, объединены и используются совместно с Машинное обучение Azureной квотой вычислительных кластеров для обучения. При остановке вычислительного экземпляра квота не освобождается для того, чтобы вы могли перезапустить вычислительный экземпляр.


### <a name="create-on-behalf-of-preview"></a>Создание от имени (Предварительная версия)

Как администратор вы можете создать вычислительный экземпляр от имени анализу данных и присвоить ему экземпляр с помощью:
* [Шаблон Azure Resource Manager](https://github.com/Azure/azure-quickstart-templates/tree/master/101-machine-learning-compute-create-computeinstance).  Дополнительные сведения о том, как найти ИД клиента и идентификатор объекта, необходимые в этом шаблоне, см. в разделе [Поиск кодов объектов удостоверений для конфигурации проверки подлинности](../healthcare-apis/find-identity-object-ids.md).  Эти значения также можно найти на портале Azure Active Directory.
* REST API

Анализу данных, для которых создается вычислительный экземпляр, должны быть предоставлены следующие разрешения RBAC Azure: 
* *Microsoft. Мачинелеарнингсервицес/рабочие области/вычислений/запуск/действие*
* *Microsoft. Мачинелеарнингсервицес/рабочие области/вычислений/действие*
* *Microsoft. Мачинелеарнингсервицес/рабочие области/вычислений/перезагрузка/действие*
* *Microsoft. Мачинелеарнингсервицес/рабочие области/вычислений/аппликатионакцесс/действие*

Анализу данных может запускать, прекращать и перезапускать вычислительный экземпляр. Они могут использовать вычислительный экземпляр для:
* Jupyter
* JupyterLab
* RStudio
* Интегрированные записные книжки

## <a name="compute-target"></a>Целевой объект вычисления

Вычислительные экземпляры можно использовать в качестве [целевого объекта вычислений для обучения](concept-compute-target.md#train) аналогично кластерам обучения Машинного обучения Azure. 

Вычислительный экземпляр:
* Содержит очередь заданий.
* Безопасно запускает задания в среде виртуальной сети, не требуя, чтобы предприятия открывали порт SSH. Задание выполняется в контейнерной среде и упаковывает зависимости модели в контейнер DOCKER.
* Может выполнять несколько небольших заданий в параллельном режиме (Предварительная версия).  Два задания на ядро могут выполняться параллельно, в то время как остальные задания помещаются в очередь.
* Поддерживает распределенные задания обучения для нескольких GPU с одним узлом

Вы можете использовать вычислительный экземпляр в качестве локального целевого объекта развертывания для сценариев тестирования и отладки.


## <a name="what-happened-to-notebook-vm"></a><a name="notebookvm"></a>Что произошло с виртуальной машиной для записных книжек?

Вычислительные экземпляры заменяют виртуальную машину для записных книжек.  

Все файлы записных книжек, хранящиеся в общей папке рабочей области, и данные в хранилищах данных рабочей области доступны из вычислительного экземпляра. Однако все пользовательские пакеты, ранее установленные на виртуальной машине записной книжки, потребуется переустановить на вычислительном экземпляре. Ограничения квоты, применяемые к созданию вычислительных кластеров, будут также применяться к созданию вычислительных экземпляров.

Создавать новые виртуальные машины для записных книжек нельзя. Однако вы по-прежнему можете получать доступ к созданным виртуальным машинам для записных книжек и использовать все их возможности. Вычислительные экземпляры можно создавать в той же рабочей области, что и существующие виртуальные машины для записных книжек.


## <a name="next-steps"></a>Дальнейшие действия

* [Создание вычислительного экземпляра и управление им](how-to-create-manage-compute-instance.md)
* [Руководство. Обучение модели Машинного обучения](tutorial-1st-experiment-sdk-train.md) — демонстрация использования вычислительного экземпляра со встроенной записной книжкой.
