---
title: 'ML Studio (классическая модель): Управление жизненным циклом приложений — Azure'
description: Применение рекомендаций по управлению жизненным циклом приложений в Машинное обучение Azure Studio (классическая модель)
services: machine-learning
ms.service: machine-learning
ms.subservice: studio-classic
ms.topic: how-to
author: likebupt
ms.author: keli19
ms.date: 10/27/2016
ms.openlocfilehash: 82d6f1fd250621ec34015970e1339ccfbd134675
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "100518408"
---
# <a name="application-lifecycle-management-in-azure-machine-learning-studio-classic"></a>Управление жизненным циклом приложений в Машинное обучение Azure Studio (классическая модель)

**ПРИМЕНИМО К:**  ![Применимо к.](../../../includes/media/aml-applies-to-skus/yes.png)Студия машинного обучения (классическая)   ![Неприменимо к.](../../../includes/media/aml-applies-to-skus/no.png)[Машинное обучение Azure](../overview-what-is-machine-learning-studio.md#ml-studio-classic-vs-azure-machine-learning-studio)


Машинное обучение Azure Studio (классическая модель) — это инструмент для разработки экспериментов машинного обучения, которые поддерживаются в облачной платформе Azure. Это решение позволяет объединить в рамках одной платформы возможности Visual Studio IDE и масштабируемой облачной службы. Вы можете использовать стандартные методики управления жизненным циклом приложений (ALM) с управлением версиями различных ресурсов для автоматического выполнения и развертывания в Машинное обучение Azure Studio (классическая модель). В этой статье рассматриваются некоторые возможности и подходы.

[!INCLUDE [updated-for-az](../../../includes/updated-for-az.md)]

## <a name="versioning-experiment"></a>Управление версиями эксперимента
Для управления версиями экспериментов рекомендуется использовать один из двух способов. Вы можете воспользоваться встроенным журналом выполнения или экспортировать эксперимент в файл формата JSON для внешнего управления. У каждого подхода есть свои преимущества и недостатки.

### <a name="experiment-snapshots-using-run-history"></a>Моментальные снимки эксперимента с использованием журнала выполнения
В модели выполнения эксперимента по Машинное обучение Azure Studio (классическая модель) неизменяемый моментальный снимок эксперимента передается в планировщик заданий при каждом нажатии кнопки **выполнить** в редакторе экспериментов. Чтобы просмотреть этот список моментальных снимков, нажмите кнопку **Журнал выполнения** на панели команд в представлении редактора экспериментов.

![Кнопка "Журнал выполнения"](./media/version-control/runhistory.png)

Моментальный снимок затем можно открыть в режиме блокировки, щелкнув имя эксперимента, соответствующее моменту отправки на выполнение и создания моментального снимка. Обратите внимание: для редактирования доступен только первый элемент в списке, который представляет текущий эксперимент. Кроме того, моментальные снимки могут быть в разных состояниях, включая завершение или частичное выполнение, сбой, сбой или частичное выполнение, а также черновое состояние.

![Список журнала выполнения](./media/version-control/runhistorylist.png)

Открыв моментальный снимок, вы можете сохранить эксперимент как новый, а затем изменить его. Моментальный снимок эксперимента может содержать такие ресурсы, как обученные модели, преобразования, наборы данных и т. д., версии которых были обновлены. В таком случае моментальный снимок будет также содержать ссылки на исходные версии этих ресурсов, соответствующие времени создания снимка. Если сохранить заблокированный моментальный снимок как новый эксперимент, Машинное обучение Azure Studio (классическая модель) обнаружит наличие более новой версии этих ресурсов и автоматически обновит их в новом эксперименте.

При удалении эксперимента все его моментальные снимки также удаляются.

### <a name="exportimport-experiment-in-json-format"></a>Экспорт и импорт эксперимента в формат JSON
Моментальные снимки журнала выполнения сохраняют неизменяемую версию эксперимента в Машинное обучение Azure Studio (классическая модель) каждый раз, когда она отправляется на выполнение. Вы также можете сохранить локальную копию эксперимента и включить его в используемую вами систему управления версиями, например Team Foundation Server, чтобы потом повторно создать эксперимент из этого локального файла. Для этого можно использовать такие командлеты [PowerShell студии машинного обучения Azure](https://aka.ms/amlps): [*Export-AmlExperimentGraph*](https://github.com/hning86/azuremlps#export-amlexperimentgraph) и [*Import-AmlExperimentGraph*](https://github.com/hning86/azuremlps#import-amlexperimentgraph).

Обратите внимание, что JSON-файл — это текстовое представление диаграммы эксперимента, которое может включать ссылку на такие ресурсы в рабочей области, как набор данных или обученные модели. Он не содержит сериализованную версию ресурса. Когда вы пытаетесь импортировать документ JSON обратно в рабочую область, ресурсы, на которые ссылается эксперимент, должны уже существовать, а их идентификаторы должны совпадать с идентификаторами ресурсов, ссылки на которые используются в эксперименте. Иначе вы не сможете получить доступ к импортированному эксперименту.

## <a name="versioning-trained-model"></a>Управление версиями обученной модели
Обученная модель в Машинное обучение Azure Studio (классическая) сериализуется в формат, известный как iLearner-файл ( `.iLearner` ), и хранится в учетной записи хранилища BLOB-объектов Azure, связанной с рабочей областью. Получить копию iLearner можно с помощью API переобучения. В [этой статье](./retrain-machine-learning-model.md) объясняется, как работает API переобучения. Основные действия:

1. Настройте обучающий эксперимент.
2. Добавьте выходной порт веб-службы в модуль "Обучение модели" или модуль, который создает обученную модель, например Настройка гиперпараметра модели" или "Создание модели R".
3. Выполните обучающий эксперимент, а затем разверните его как веб-службу для обучения модели.
4. Вызовите конечную точку BES обучающей веб-службы, а затем укажите имя файла iLearner и расположение учетной записи хранения BLOB-объектов, где он будет храниться.
5. По завершении вызова BES будет создан файл iLearner.

Кроме того, получить файл iLearner можно с помощью командлета PowerShell [*Download-AmlExperimentNodeOutput*](https://github.com/hning86/azuremlps#download-amlexperimentnodeoutput). Это может быть проще, если просто требуется получить копию файла iLearner без необходимости программного переобучения модели.

Создав файл iLearner, содержащий обученную модель, вы можете применить стратегию управления версиями. В стратегии может быть предусмотрено применение префикса или постфикса в рамках соглашения об именовании. При этом файл iLearner остается в хранилище BLOB-объектов либо копируется или импортируется в систему управления версиями.

Сохраненный файл iLearner затем можно использовать для оценки при помощи развернутых веб-служб.

## <a name="versioning-web-service"></a>Управление версиями веб-службы
Можно развернуть два типа веб-служб из эксперимента Машинное обучение Azure Studio (классическая модель). Классическая веб-служба тесно связана с экспериментом и рабочей областью. Новая веб-служба использует платформу Azure Resource Manager. Она больше не связана с исходным экспериментом или с рабочей областью.

### <a name="classic-web-service"></a>Классическая веб-служба
Для управления версиями классической веб-службы можно использовать конструкцию конечной точки веб-службы. Ниже показан типичный процесс:

1. В прогнозном эксперименте разверните новую классическую веб-службу, содержащую конечную точку по умолчанию.
2. Создайте новую конечную точку с именем ep2, которая предоставляет текущую версию эксперимента или обученной модели.
3. Затем обновите прогнозный эксперимент и обученную модель.
4. После этого повторно разверните прогнозный эксперимент, который, в свою очередь, обновит конечную точку по умолчанию. Но это не изменит конечную точку ep2.
5. Теперь можно создать дополнительную конечную точку с именем ep3, которая предоставляет новую версию эксперимента и обученной модели.
6. Если необходимо, вернитесь к шагу 3.

Со временем у вас может быть несколько конечных точек, созданных в одной и той же веб-службе. Каждая конечная точка представляет копию эксперимента (соответствующую определенной точке во времени), который содержит версию обученной модели (так же соответствующую определенной точке во времени). Затем с помощью внешней логики можно определить, какую конечную точку вызывать, что соответствует выбору обученной модели для оценочного выполнения.

Для получения аналогичного результата также можно создать несколько идентичных конечных точек веб-службы и обновить различные версии файла iLearner с помощью конечной точки. В [этой статье](create-models-and-endpoints-with-powershell.md) подробно описано, как это сделать.

### <a name="new-web-service"></a>Новая веб-служба
При создании новой веб-службы на основе Azure Resource Manager конструкция конечной точки недоступна. Вместо этого можно создать файлы определения веб-службы (WSD) в формате JSON из прогнозного эксперимента с помощью командлет PowerShell [Export-AmlWebServiceDefinitionFromExperiment](https://github.com/hning86/azuremlps#export-amlwebservicedefinitionfromexperiment) или с помощью [*Export-азмлвебсервице*](/powershell/module/az.machinelearning/export-azmlwebservice) PowerShell командлет из развернутой веб-службы на основе диспетчер ресурсов.

Экспортированный и обработанный с помощью системы управления версиями файл WSD можно развернуть как новую веб-службу в другом плане веб-службы и другом регионе Azure. Но убедитесь, что вы указали правильную конфигурацию учетной записи хранения, а также идентификатор нового плана веб-службы. Чтобы применить исправление в других файлах iLearner, можно изменить файл WSD, обновить ссылку на расположение обученной модели и развернуть его в качестве новой веб-службы.

## <a name="automate-experiment-execution-and-deployment"></a>Автоматическое выполнение и развертывание эксперимента
Важным аспектом управления жизненным циклом приложений является возможность автоматического выполнения и развертывания приложения. В Машинное обучение Azure Studio (классическая модель) это можно сделать с помощью [модуля PowerShell](https://aka.ms/amlps). Ниже приведен пример комплексных действий, которые относятся к стандартному автоматизированному процессу выполнения и развертывания ALM с помощью [модуля PowerShell машинное обучение Azure Studio (классическая модель)](https://aka.ms/amlps). Для выполнения каждого шага используется один или несколько командлетов PowerShell.

1. [Отправка набора данных](https://github.com/hning86/azuremlps#upload-amldataset).
2. Скопируйте обучающий эксперимент в рабочую область из [рабочей области](https://github.com/hning86/azuremlps#copy-amlexperiment) или [коллекции](https://github.com/hning86/azuremlps#copy-amlexperimentfromgallery) или [импортируйте](https://github.com/hning86/azuremlps#import-amlexperimentgraph)[экспортированный](https://github.com/hning86/azuremlps#export-amlexperimentgraph) эксперимент с локального диска.
3. [Обновите набор данных](https://github.com/hning86/azuremlps#update-amlexperimentuserasset) в обучающем эксперименте.
4. [Запустите обучающий эксперимент](https://github.com/hning86/azuremlps#start-amlexperiment).
5. [Повысьте уровень обученной модели](https://github.com/hning86/azuremlps#promote-amltrainedmodel).
6. [Скопируйте прогнозный эксперимент](https://github.com/hning86/azuremlps#copy-amlexperiment) в рабочую область.
7. [Обновите обученную модель](https://github.com/hning86/azuremlps#update-amlexperimentuserasset) в прогнозном эксперименте.
8. [Выполните прогнозный эксперимент](https://github.com/hning86/azuremlps#start-amlexperiment).
9. [Разверните веб-службу](https://github.com/hning86/azuremlps#new-amlwebservice) из прогнозного эксперимента.
10. Протестируйте конечную точку [RRS](https://github.com/hning86/azuremlps#invoke-amlwebservicerrsendpoint) или [BES](https://github.com/hning86/azuremlps#invoke-amlwebservicebesendpoint) веб-службы.

## <a name="next-steps"></a>Дальнейшие действия
* Скачайте модуль [PowerShell для машинное обучение Azure Studio (классическая модель)](https://aka.ms/amlps) и начните АВТОМАТИЗИРОВАТЬ задачи ALM.
* Узнайте, как [создавать большое число моделей машинного обучения и управлять ими, используя только один эксперимент](create-models-and-endpoints-with-powershell.md), с помощью PowerShell и API переобучения.
* См. дополнительные сведения о [развертывании веб-служб машинного обучения Azure](deploy-a-machine-learning-web-service.md).