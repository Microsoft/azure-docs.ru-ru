---
title: 'ML Studio (классическая модель): миграция на Машинное обучение Azure веб-службу'
description: Перестройте веб-службы Studio (классические) в качестве конечных точек конвейера в Машинное обучение Azure
services: machine-learning
ms.service: machine-learning
ms.subservice: studio
ms.topic: how-to
author: xiaoharper
ms.author: zhanxia
ms.date: 03/08/2021
ms.openlocfilehash: 5e467d22cc3230bd9945fb276dc16cf1fa765bb6
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "103565505"
---
# <a name="rebuild-a-studio-classic-web-service-in-azure-machine-learning"></a>Перестроение веб-службы Studio (классической) в Машинное обучение Azure

Из этой статьи вы узнаете, как перестроить веб-службу Studio (классической) в качестве **конечной точки** в машинное обучение Azure.

Используйте Машинное обучение Azure конечные точки конвейера для выполнения прогнозов, повторного обучения моделей или выполнения любого универсального конвейера. Конечная точка RESTFUL позволяет запускать конвейеры с любой платформы. 

Эта статья входит в состав Studio (классическая модель) для Машинное обучение Azure серии миграции. Дополнительные сведения о миграции на Машинное обучение Azure см. в [статье Обзор миграции](migrate-overview.md).

> [!NOTE]
> Эта серия миграции посвящена конструктору перетаскивания. Дополнительные сведения о программном развертывании моделей см. [в статье Развертывание моделей машинного обучения в Azure](../how-to-deploy-and-where.md).

## <a name="prerequisites"></a>Предварительные требования

- Учетная запись Azure с активной подпиской. [Создайте учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) бесплатно.
- Рабочая область машинного обучения Azure. [Создайте рабочую область Машинного обучения Azure](../how-to-manage-workspace.md#create-a-workspace).
- Конвейер обучения Машинное обучение Azure. Дополнительные сведения см. [в разделе перестроение (классическая) эксперимента в машинное обучение Azure](migrate-rebuild-experiment.md).

## <a name="real-time-endpoint-vs-pipeline-endpoint"></a>Конечная точка конвейера и конечной точки в реальном времени

Веб-службы Studio (классические) были заменены **конечными точками** в машинное обучение Azure. Используйте следующую таблицу, чтобы выбрать тип используемой конечной точки:

|Веб-служба Studio (классическая модель)| Замена Машинное обучение Azure
|---|---|
|Запрос и ответ веб-службы (прогнозирование в реальном времени)|Конечная точка для прогнозирования в реальном времени|
|Пакетная веб-служба (прогнозирование пакетов)|Конечная точка конвейера|
|Переобучение веб-службы (повторное обучение)|Конечная точка конвейера| 


## <a name="deploy-a-real-time-endpoint"></a>Развертывание конечной точки для прогнозирования в реальном времени

В Studio (классическая модель) вы использовали **веб-службу Request/реагируют** для развертывания модели для прогнозов в реальном времени. В Машинное обучение Azure вы используете **конечную точку в режиме реального времени**.

Существует несколько способов развертывания модели в Машинное обучение Azure. Один из самых простых способов — использовать конструктор для автоматизации процесса развертывания. Чтобы развернуть модель как конечную точку в режиме реального времени, выполните следующие действия.

1. Запустите завершенный конвейер обучения по крайней мере один раз.
1. После завершения выполнения в верхней части холста выберите **создать конвейер** вывода в  >  **режиме реального времени**.

    ![создание конвейера вывода в реальном времени](./media/migrate-rebuild-web-service/create-inference-pipeline.png)
        
    Конструктор преобразует обучающий конвейер в конвейер вывода в режиме реального времени. Аналогичное преобразование также происходит в студии (классическая модель).

    В конструкторе шаг преобразования также [регистрирует обученную модель в рабочей области машинное обучение Azure](../how-to-deploy-and-where.md#registermodel).

1. Выберите **Отправить** , чтобы запустить конвейер вывода в режиме реального времени и убедиться, что он успешно запущен.

1. После проверки конвейера вывода выберите **развернуть**.

1. Введите имя конечной точки и тип вычислений.

    В следующей таблице описаны параметры вычислений развертывания в конструкторе.

    | Целевой объект вычисления | Используется для | Описание | Создание |
    | ----- |  ----- | ----- | -----  |
    |[Служба Azure Kubernetes (AKS)](../how-to-deploy-azure-kubernetes-service.md) |Вывод в реальном времени|Крупномасштабные и рабочие развертывания. Быстрое время отклика и Автомасштабирование службы.| Созданный пользователем. Дополнительные сведения см. в разделе [Создание целевых объектов вычислений](../how-to-create-attach-compute-studio.md#inference-clusters). |
    |[Экземпляры контейнеров Azure ](../how-to-deploy-azure-container-instance.md)|Тестирование или разработка | Небольшие рабочие нагрузки на основе ЦП, требующие менее 48 ГБ ОЗУ.| Автоматически создается Машинное обучение Azure.

### <a name="test-the-real-time-endpoint"></a>Тестирование конечной точки для прогнозирования в реальном времени

После завершения развертывания можно просмотреть дополнительные сведения и проверить конечную точку.

1. Перейдите на вкладку **конечные точки** .
1. Выберите конечную точку.
1. Откройте вкладку **Тест**.
    
    ![Снимок экрана: вкладка "конечные точки" с кнопкой "конечная точка теста"](./media/migrate-rebuild-web-service/test-realtime-endpoint.png)

## <a name="publish-a-pipeline-endpoint-for-batch-prediction-or-retraining"></a>Публикация конечной точки конвейера для прогнозирования или переобучения пакетной службы

Вы также можете использовать конвейер обучения для создания **конечной точки конвейера** вместо конечной точки в режиме реального времени. Используйте **конечные точки конвейера** для выполнения прогнозирования или повторного обучения пакетной службы.

Конечные точки конвейера заменяют **конечные точки выполнения пакета**  Studio (классическая модель) и **переобучающие веб-службы**.

### <a name="publish-a-pipeline-endpoint-for-batch-prediction"></a>Публикация конечной точки конвейера для прогнозирования пакетной службы

Публикация конечной точки пакетного прогнозирования аналогична конечной точке в режиме реального времени.

Чтобы опубликовать конечную точку конвейера для прогнозирования пакетной службы, выполните следующие действия.

1. Запустите завершенный конвейер обучения по крайней мере один раз.

1. После завершения выполнения в верхней части холста выберите **создать** конвейер  >  **пакетного вывода** конвейера вывода.

    ![Снимок экрана, показывающий кнопку создания конвейера вывода в обучающем конвейере](./media/migrate-rebuild-web-service/create-inference-pipeline.png)
        
    Конструктор преобразует обучающий конвейер в конвейер вывода пакета. Аналогичное преобразование также происходит в студии (классическая модель).

    В конструкторе этот шаг также [регистрирует обученную модель в рабочей области машинное обучение Azure](../how-to-deploy-and-where.md#registermodel).

1. Нажмите кнопку **Отправить** , чтобы запустить конвейер вывода пакетов и убедиться, что оно успешно завершено.

1. После проверки конвейера вывода выберите **опубликовать**.
 
1. Создайте новую конечную точку конвейера или выберите существующую.
    
    Новая конечная точка конвейера создает новую конечную точку для вашего конвейера. 

    Если выбрана существующая конечная точка конвейера, то существующий конвейер не перезаписывается. Вместо этого Машинное обучение Azure версии каждого конвейера в конечной точке. Вы можете указать, какая версия должна выполняться при вызове функции RESTFUL. Кроме того, необходимо задать конвейер по умолчанию, если в вызове RESTFUL не указана версия.


 ### <a name="publish-a-pipeline-endpoint-for-retraining"></a>Публикация конечной точки конвейера для повторного обучения

Чтобы опубликовать конечную точку конвейера для повторного обучения, у вас уже должен быть черновик конвейера, который обучает модель. Дополнительные сведения о создании конвейера обучения см. в статье [Перестроение (классическая) эксперимента](migrate-rebuild-experiment.md).

Чтобы повторно использовать конечную точку конвейера для переобучения, необходимо создать **параметр конвейера** для входного набора данных. Это позволяет динамически настраивать набор данных для обучения, чтобы можно было переучить модель.

Чтобы опубликовать конечную точку конвейера повторного обучения, выполните следующие действия.

1. Запустите конвейер обучения по крайней мере один раз.
1. После завершения выполнения выберите модуль набор данных.
1. В области сведения о модуле выберите **задать в качестве параметра конвейера**.
1. Введите описательное имя, например "InputDataset".    

    ![Снимок экрана, посвященный созданию параметра конвейера](./media/migrate-rebuild-web-service/create-pipeline-parameter.png)

    При этом создается параметр конвейера для входного набора данных. При вызове конечной точки конвейера для обучения можно указать новый набор данных для повторного обучения модели.

1. Нажмите кнопку **Опубликовать**.

    ![Снимок экрана, посвященный кнопке "опубликовать" в обучающем конвейере](./media/migrate-rebuild-web-service/create-retraining-pipeline.png)


## <a name="call-your-pipeline-endpoint-from-the-studio"></a>Вызов конечной точки конвейера из студии

После создания конечной точки конвейера для вывода или переобучения вы можете вызвать конечную точку непосредственно из браузера.

1. Перейдите на вкладку **конвейеры** и выберите **конечные точки конвейера**.
1. Выберите конечную точку конвейера, которую требуется запустить.
1. Нажмите кнопку **Submit** (Отправить).

    После выбора параметра **Отправить** можно указать любые параметры конвейера.

## <a name="next-steps"></a>Следующие шаги

В этой статье вы узнали, как перестроить веб-службу Studio (классической) в Машинное обучение Azure. Следующим шагом является [Интеграция веб-службы с клиентскими приложениями](migrate-rebuild-integrate-with-client-app.md).


См. Другие статьи в серии миграции Studio (классическая модель):

1. [Обзор миграции](migrate-overview.md).
1. [Перенос набора данных](migrate-register-dataset.md).
1. [Перестройте конвейер обучения Studio (классический)](migrate-rebuild-experiment.md).
1. **Перестройте веб-службу Studio (классическая)**.
1. [Интегрируйте веб-службу машинное обучение Azure с клиентскими приложениями](migrate-rebuild-integrate-with-client-app.md).
1. Выполните [миграцию выполнения скрипта R](migrate-execute-r-script.md).
