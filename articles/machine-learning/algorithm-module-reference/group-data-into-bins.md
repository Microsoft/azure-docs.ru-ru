---
title: 'Группирование данных в ячейки: Справочник по модулям'
titleSuffix: Azure Machine Learning
description: Узнайте, как использовать модуль группирования данных в ячейки для группирования чисел и изменения распределения непрерывных данных.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/13/2020
ms.openlocfilehash: 392cb9b4c2ded1b98b79ce8dcd780ac59e96b78a
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "91998490"
---
# <a name="group-data-into-bins-module"></a>Группирование данных в модуль "ячейки"

В этой статье описывается, как использовать модуль данные группы в модуле «ячейки» в Машинное обучение Azure Designer для группировки номеров или изменения распределения непрерывных данных.

Модуль Группирование данных в ячейки поддерживает несколько вариантов группирования данных. Вы можете настроить, каким образом задаются границы ячеек и как по ним распределяются значения. Например, администратор может сделать следующее:  

+ вручную ввести ряд значений, которые будут использоваться в качестве границ ячеек;  
+ присвоить значения ячейкам с помощью *квантилей* или процентилей;  
+ принудительно установить равномерное распределение значений по ячейкам.  

## <a name="more-about-binning-and-grouping"></a>Дополнительные сведения о квантовании и группировании

*Группирования* или группирование данных (иногда именуемое *дискретизация*) является важным инструментом при подготовке числовых данных для машинного обучения. Это полезно в таких сценариях:

+ Столбец непрерывных чисел имеет слишком много уникальных значений для эффективного моделирования. Поэтому вы автоматически или вручную назначаете значения группам, чтобы создать меньший набор дискретных диапазонов.

+ Необходимо заменить столбец чисел значениями по категориям, представляющими определенные диапазоны.

    Например, можно сгруппировать значения в столбце возраста в настраиваемые диапазоны, например 1–15, 16–22, 23–30 и т. д., для анализа демографического состава пользователей.

+ Набор данных включает несколько значений, которые значительно выходят за пределы ожидаемого диапазона, и эти значения оказывают слишком сильное влияние на обучаемую модель. Чтобы уменьшить уровень смещения в модели, можно преобразовать данные в однородное распределение с помощью метода квантилей.

    При использовании этого метода модуль Группирование данных в ячейки определяет оптимальные расположения и ширину ячеек, чтобы в каждую ячейку попало приблизительное равное количество выборок. Затем, в зависимости от выбранного метода нормализации, значения в ячейках преобразуются в процентили или сопоставлены с номером ячейки.

### <a name="examples-of-binning"></a>Примеры группирования

На следующей схеме показано распределение числовых значений до и после группирования с помощью метода *квантилей*. Обратите внимание, что по сравнению с необработанными данными в левой части данные были сгруппированы и преобразованы в нормальное распределение с единичной дисперсией.  

> [!div class="mx-imgBorder"]
> ![Визуализация результата](media/module/group-data-into-bins-result-example.png)

Так как существует много способов группирования данных и все из них можно настраивать, мы рекомендуем поэкспериментировать с различными методами и значениями. 

## <a name="how-to-configure-group-data-into-bins"></a>Как настроить модуль "Группирование данных в ячейки"

1. Добавьте модуль **данные группы в** конвейер в конструкторе. Этот модуль можно найти в категории **Преобразование данных**.

2. Соедините набор данных, содержащий числовые данные, с ячейкой. Дискретизация можно применять только к столбцам, содержащим числовые данные. 

    Если набор данных содержит столбцы с нечисловыми данными, используйте модуль [Выбор столбцов в наборе данных](select-columns-in-dataset.md), чтобы выбрать подмножество столбцов для работы.

3. Укажите режим группирования. Режим группирования определяет другие параметры, поэтому сначала обязательно выберите параметр **режим группирования** . Поддерживаются следующие типы группирования:

    - **Quantiles** (Квантили). В рамках метода квантилей значения распределяются по ячейкам на основе процентильных рангов. Этот метод также называется равной высоте группирования.

    - **Равная ширина**: при использовании этого параметра необходимо указать общее число ячеек. Значения из столбца данных помещаются в ячейки, в которых каждая ячейка имеет одинаковый интервал между начальным и конечным значениями. В результате в некоторых ячейках может оказаться больше элементов, если значения плотнее распределены в районе определенной точки.

    - **Custom Edges** (Настраиваемые границы). Для каждой ячейки можно задать начальное значение. Значение границы всегда является нижней границей ячейки. 
    
      Например, предположим, что нужно сгруппировать значения по двум ячейкам. Один из них будет иметь значения больше 0, а значение будет меньше или равно 0. В этом случае для границ ячеек вы вводите **0** в **разделенном запятыми списке границ ячеек**. Выходные данные модуля будут иметь значение 1 и 2, что указывает индекс ячейки для каждого значения строки. Обратите внимание, что список значений с разделителями-запятыми должен находиться в возрастающем порядке, например 1, 3, 5, 7.
    
    > [!Note]
    > Режим *MDL энтропии* определен в Studio (классическая модель), а соответствующий пакет с открытым исходным кодом, который можно использовать для поддержки в конструкторе, еще не существует.        

4. Если вы используете режимы **квантилей** и **Equals** группирования, используйте параметр **количество ячеек** , чтобы указать, сколько ячеек или *квантилей* нужно создать.

5. Для **столбцов в ячейку** Используйте селектор столбцов, чтобы выбрать столбцы, значения которых нужно указать в ячейке. Столбцы должны содержать данные числового типа.

    Для всех подходящих столбцов из тех, что вы выберете, применяется одинаковое правило группирования. Если необходимо указать некоторые столбцы с помощью другого метода, используйте отдельный экземпляр модуля данные группы в модуле "ячейки" для каждого набора столбцов.

    > [!WARNING]
    > При выборе столбца, который не является допустимым типом, создается ошибка времени выполнения. Модуль возвращает ошибку, как только он обнаруживает столбец недопустимого типа. Если появляется сообщение об ошибке, проверьте все выбранные столбцы. В ошибке не приводится список недопустимых столбцов.

6. Для **режима вывода** укажите, как следует выводить значения квантования:

    + **Append**: создает новый столбец со значениями binned и добавляет его во входную таблицу.

    + **Inplace** (Замещение). Исходные значения в наборе данных заменяются новыми.

    + **ResultOnly** (Только результат). Возвращаются только столбцы с результирующими данными.

7. При выборе режима **квантилей** группирования используйте параметр **нормализация квантилей** , чтобы определить, как значения нормализованы перед сортировкой в квантилей. Обратите внимание, что нормализация значений преобразует значения, но не влияет на конечное количество ячеек.

    Поддерживаются следующие типы нормализации:

    + **Percent**: значения нормализованы в диапазоне [0100].

    + **Пкуантиле**: значения нормализованы в диапазоне [0, 1].

    + **Куантилеиндекс**: значения нормализованы в диапазоне [1, число ячеек].

8. Если выбран параметр **пользовательские грани** , введите разделенный запятыми список чисел, которые будут использоваться в качестве *краев ячеек* в **списке с разделителями-запятыми** в текстовом поле границы ячеек. 

    Значения отмечают точку, которая делит ячейки. Например, если ввести одно значение границы ячейки, будут созданы две ячейки. При вводе двух граничных значений ячейки будут созданы три ячейки.

    Значения должны быть отсортированы в том порядке, в котором создаются ячейки, от нижнего к верхнему.

10. Выберите параметр **столбцы тегов как категория** , чтобы указать, что столбцы квантования должны обрабатываться как переменные категорий.

11. Отправьте конвейер.

## <a name="results"></a>Результаты

Модуль Группирование данных в ячейки возвращает набор данных, в котором все элементы сгруппированы в соответствии с выбранным режимом. 

Он также возвращает *Преобразование группирования*. Эта функция может быть передана модулю [Apply преобразование](apply-transformation.md) для создания новых образцов данных с использованием того же режима и параметров группирования.  

> [!TIP]
> При использовании группирования для обучающих данных необходимо использовать один и тот же метод группирования для данных, используемых для тестирования и прогнозирования. Также необходимо использовать одни и те же ячейки и ширину ячеек. 
> 
> Чтобы гарантировать, что данные всегда преобразуются с помощью одного и того же метода группирования, рекомендуется сохранить полезные преобразования данных. Затем примените их к другим наборам данных с помощью модуля " [Применить преобразование](apply-transformation.md) ".

## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь с [набором доступных модулей](module-reference.md) в службе Машинного обучения Azure. 
