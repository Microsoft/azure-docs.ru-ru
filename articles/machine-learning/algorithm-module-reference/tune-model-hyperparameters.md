---
title: Настройка гиперпараметров модели
titleSuffix: Azure Machine Learning
description: Используйте модуль настройки модели в конструкторе, чтобы выполнить настройку параметров для настройки параметров Hyper-Parameters.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: reference
author: likebupt
ms.author: keli19
ms.date: 10/10/2020
ms.openlocfilehash: 2bbf75ba5de4ad20e11261bdcfd1204b1a0b0766
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "93420637"
---
# <a name="tune-model-hyperparameters"></a>Настройка гиперпараметров модели

В этой статье описывается, как использовать модуль настройки модели "Параметры" в конструкторе Машинное обучение Azure. Цель состоит в том, чтобы определить оптимальные параметры для модели машинного обучения. Модуль создает и тестирует несколько моделей, используя различные сочетания параметров. Он сравнивает метрики по всем моделям, чтобы получить сочетания параметров. 

*Параметры* термов и *параметров* могут быть запутанными. *Параметры* модели задаются на правой панели модуля. По сути, этот модуль выполняет настройку *параметров* для параметров указанного параметра. Он изучает оптимальный набор _параметров_, которые могут различаться для каждого конкретного дерева принятия решений, набора данных или метода регрессии. Процесс поиска оптимальной конфигурации иногда называется *настройкой*. 

Модуль поддерживает следующий метод для поиска оптимальных параметров модели: *встроенные обучение и настройка.* В этом методе вы настраиваете набор параметров для использования. Затем вы разрешите модулю выполнять итерацию по нескольким сочетаниям. Модуль измеряет точность до тех пор, пока не найдет "наилучшую" модель. При работе с большинством модулей для обучения можно выбрать параметры, которые следует изменить в ходе обучающего процесса, которые должны оставаться исправленными.

В зависимости от того, как долго должен выполняться процесс настройки, может быть решено полностью протестировать все сочетания. Можно также сократить процесс, установив сетку комбинаций параметров и проверив случайное подмножество сетки параметров.

Этот метод создает обученную модель, которую можно сохранить для повторного использования.  

> [!TIP] 
> Можно выполнить связанную задачу. Прежде чем начать настройку, примените выбор компонентов, чтобы определить столбцы или переменные с наибольшим значением сведений.

## <a name="how-to-configure-tune-model-hyperparameters"></a>Настройка параметров настройки модели  

Изучение оптимальных параметров для модели машинного обучения требует значительного использования конвейеров.

### <a name="train-a-model-by-using-a-parameter-sweep"></a>Обучение модели с помощью очистки параметров  

В этом разделе описывается выполнение базовой очистки параметров, которая обучает модель с помощью модуля настройки модели.

1.  Добавьте модуль Настройка параметров модели в конвейер в конструктор.

2.  Соедините обученную модель с крайним левым входом. 

    > [!NOTE] 
    > **Параметры настройки модели** могут подключаться только к встроенным модулям алгоритма машинного обучения и не могут поддерживать настраиваемую модель, встроенную в **модель создания Python**.


3.  Добавьте набор данных, который необходимо использовать для обучения, и соедините его с средним входом параметров настройки модели.  

    При необходимости, если имеется набор данных с тегами, его можно подключить к крайнему правому порту ввода (**необязательный проверочный набор данных**). Это позволяет измерять точность во время обучения и настройки.

4.  На правой панели окна Настройка параметров модели выберите значение для **параметра режим очистки параметров**. Этот параметр определяет способ выбора параметров.

    - **Вся сетка**: при выборе этого параметра модуль выполняет циклическую выборку по сетке, предопределенную системой, чтобы попробовать различные сочетания и определить лучший. Этот параметр полезен, если неизвестно, какие параметры лучше всего подходят, и хотите попробовать все возможные сочетания значений.

    - **Случайная очистка**. при выборе этого параметра модуль будет случайным образом выбирать значения параметров через определенный системой диапазон. Необходимо указать максимальное число запусков, которое должен выполнить модуль. Этот параметр полезен, если необходимо повысить производительность модели, используя выбранные метрики, но по-прежнему сэкономить вычислительные ресурсы.    

5.  В **столбце Метка** откройте Селектор столбцов, чтобы выбрать один столбец меток.

6.  Выберите число запусков:

    - **Максимальное число запусков при случайном повороте**: при выборе случайного значения можно указать, сколько раз должна быть обработана модель, с помощью случайного сочетания значений параметров.

7.  Для **ранжирования** выберите одну метрику, которая будет использоваться для ранжирования моделей.

    При выполнении очистки параметра модуль вычисляет все применимые метрики для типа модели и возвращает их в отчете **результаты очистки** . Модуль использует отдельные метрики для моделей регрессии и классификации.

    Однако выбранная метрика определяет, как будут ранжированы модели. Только верхняя модель, упорядоченная по выбранной метрике, выводится в качестве обученной модели для использования в качестве оценки.

8.  Для параметра **случайное начальное значение** введите число, которое будет использоваться для запуска очистки параметров. 

9. Отправьте конвейер.

## <a name="results-of-hyperparameter-tuning"></a>Результаты настройки параметров

По завершении обучения:

+ Чтобы просмотреть результаты очистки, можно либо щелкнуть правой кнопкой мыши модуль, затем выбрать **визуализировать**, либо щелкнуть правой кнопкой мыши порт левого выхода модуля для визуализации.

    **Результаты очистки** включают все метрики параметров и точности, применяемые к типу модели, а метрику, выбранную для ранжирования, определяет, какая модель считается наилучшей.

+ Чтобы сохранить моментальный снимок обученной модели, выберите вкладку **выходные данные + журналы** на правой панели модуля **обучение модели** . Щелкните значок **зарегистрировать набор данных** , чтобы сохранить модель как модуль для повторного использования.


## <a name="technical-notes"></a>Технические примечания

В этом разделе содержатся сведения о реализации и советы.

### <a name="how-a-parameter-sweep-works"></a>Как работает очистка параметров

При настройке очистки параметров необходимо определить область поиска. Поиск может использовать конечное число параметров, выбранных случайным образом. Или это может быть исчерпывающим поиском по определенному пространству параметров.

+ **Случайная очистка**. Этот параметр обучает модель с помощью заданного количества итераций. 

  Вы указываете диапазон значений для итерации, и модуль использует случайное выбранное подмножество этих значений. Значения выбираются с заменой, что означает, что числа, ранее выбранные случайным образом, не удаляются из пула доступных номеров. Так что вероятность выбора любого значения остается одинаковой во всех проходах.  

+ **Вся сетка**: параметр для использования всей сетки означает, что каждое сочетание проверяется. Этот параметр является наиболее подробным, но он требует больше времени. 

### <a name="controlling-the-length-and-complexity-of-training"></a>Контроль длины и сложности обучения

Перебор множества сочетаний параметров может занимать много времени, поэтому модуль предоставляет несколько способов ограничения процесса:

+ Ограничьте количество итераций, используемых для тестирования модели.
+ Ограничьте пространство параметров.
+ Ограничьте количество итераций и пространство параметров.

Рекомендуется использовать конвейер с параметрами, чтобы определить наиболее эффективный метод обучения по определенному набору данных и модели.

### <a name="choosing-an-evaluation-metric"></a>Выбор показателя оценки

По завершении тестирования модель представляет отчет, который содержит точность для каждой модели, чтобы можно было просматривать результаты метрик:

- Для всех моделей двоичной классификации используется однородный набор метрик.
- Точность используется для всех моделей многоклассовой классификации.
- Для моделей регрессии используется другой набор метрик. 

Однако во время обучения необходимо выбрать *одну* метрику для использования в ранжировании моделей, созданных в процессе настройки. В зависимости от бизнес-задачи и стоимости ложных срабатываний и ложных отрицательных результатов может оказаться, что оптимальная метрика отличается.

#### <a name="metrics-used-for-binary-classification"></a>Метрики, используемые для двоичной классификации

-   **Точность** — это отношение истинных результатов к общему количеству вариантов.  

-   **Точность** — это отношение истинных результатов к положительным результатам.  

-   **Отзыв** — это часть всех правильных результатов по всем результатам.  

-   **F-Score** — это мера, которая распределяет точность и отзыв.  

-   **AUC** — это значение, представляющее область под кривой, когда ложные срабатывания на оси x и истинные положительные результаты отображаются на оси y.  

-   **Средняя степень потери журнала** — это разница между двумя распределениями вероятностей: значением true и значением в модели.  

#### <a name="metrics-used-for-regression"></a>Метрики, используемые для регрессии

-   Среднее значение " **абсолютная ошибка** " усредняет все ошибки в модели, где *Ошибка* означает расстояние прогнозируемого значения от истинного значения. Это часто сокращается как *Mae*.  

-   **Корень средней квадратной ошибки** измеряет среднее значение квадратов ошибок, а затем принимает корень этого значения. Это часто сокращается как *Корень среднеквадратичной погрешности*.  

-   **Относительная абсолютная ошибка** представляет ошибку в процентах от истинного значения.  

-   **Относительное квадратичное сообщение об** ошибке нормализует общую квадратную ошибку путем деления на общую квадратную ошибку прогнозируемых значений.  

-   **Коэффициент определения** — это одно число, указывающее, насколько хорошо данные помещаются в модель. Значение 1 означает, что модель точно соответствует данным. Нулевое значение означает, что данные являются случайными или иным образом не могут соответствовать модели. Часто это называется *r <sup>2</sup>*, *r <sup>2</sup>* или *r-Square*.  

### <a name="modules-that-dont-support-a-parameter-sweep"></a>Модули, не поддерживающие очистка параметров

Почти все средства обучения в Машинное обучение Azure поддерживают перекрестную проверку с помощью встроенной очистки параметров, которая позволяет выбирать параметры конвейера. Если разработчик не поддерживает задание диапазона значений, вы по-прежнему можете использовать его при перекрестной проверке. В этом случае для очистки выбирается диапазон допустимых значений. 


## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь с [набором доступных модулей](module-reference.md) в службе Машинного обучения Azure. 

