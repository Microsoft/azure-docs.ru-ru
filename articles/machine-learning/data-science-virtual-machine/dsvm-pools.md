---
title: Общие пулы
titleSuffix: Azure Data Science Virtual Machine
description: Узнайте, как создать & развернуть общий пул виртуальных машин для обработки и анализа данных (Dsvm) в качестве общего ресурса для команды.
keywords: deep learning, AI, data science tools, data science virtual machine, geospatial analytics, team data science process
services: machine-learning
ms.service: data-science-vm
author: vijetajo
ms.author: vijetaj
ms.topic: conceptual
ms.date: 12/10/2018
ms.openlocfilehash: a118d5a3e716a80bda21ffe82a8cefd1da1202f3
ms.sourcegitcommit: e972837797dbad9dbaa01df93abd745cb357cde1
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100519717"
---
# <a name="create-a-shared-pool-of-data-science-virtual-machines"></a>Создание общего пула виртуальных машин для обработки и анализа данных

В этой статье вы узнаете, как создать общий пул виртуальных машин для обработки и анализа данных (Dsvm) для команды. Преимущества использования общего пула включают более эффективное использование ресурсов, удобство совместного доступа и совместной работы, а также более эффективное управление ресурсами DSVM.

Для создания пула DSVM можно использовать множество методик и технологий. В этой статье рассматриваются пулы для интерактивных виртуальных машин. Вычислительная среда Машинного обучения Azure является альтернативной управляемой инфраструктурой для вычислений. Дополнительные сведения см. в разделе [Создание кластера вычислений](../how-to-create-attach-compute-cluster.md).

## <a name="interactive-vm-pool"></a>Пул интерактивных виртуальных машин

При использовании пула интерактивных виртуальных машин, с которыми совместно работает вся команда разработчиков решений на основе ИИ или обработки и анализа данных, пользователи могут входить на доступный экземпляр DSVM, а не на выделенный экземпляр, назначаемый каждому набору пользователей. Эта установка обеспечивает лучшую доступность и более эффективное использование ресурсов.

Используйте технологию [масштабируемых наборов виртуальных машин Azure](../../virtual-machine-scale-sets/index.yml) , чтобы создать интерактивный пул виртуальных машин. Масштабируемые наборы позволяют создавать и администрировать группы идентичных виртуальных машин с автоматическим масштабированием и балансировкой нагрузки.

Пользователь выполняет вход по IP-адресу или DNS-адресу основного пула. Масштабируемый набор автоматически перенаправляет сеанс доступной DSVM. Так как пользователям требуется единообразная и привычная среда независимо от виртуальной машины, в которой выполняется вход, все экземпляры виртуальной машины в масштабируемом наборе подключаются к общему сетевому диску, например к общей папке службы файлов Azure или NFS. Как правило, общая рабочая область пользователя размещается в общем хранилище файлов, которое подключается к каждому из экземпляров.

Пример шаблона Azure Resource Manager, который создает масштабируемый набор с экземплярами DSVM на основе Ubuntu, можно найти на сайте [GitHub](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.json). Пример [файла параметров](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.parameters.json) для шаблона Azure Resource Manager можно найти в том же расположении.

Вы можете создать масштабируемый набор из шаблона Azure Resource Manager, указав значения для файла параметров в Azure CLI:

```azurecli-interactive
az group create --name [[NAME OF RESOURCE GROUP]] --location [[ Data center. For eg: "West US 2"]
az deployment group create --resource-group  [[NAME OF RESOURCE GROUP ABOVE]]  --template-uri https://raw.githubusercontent.com/Azure/DataScienceVM/master/Scripts/CreateDSVM/Ubuntu/dsvm-vmss-cluster.json --parameters @[[PARAMETER JSON FILE]]
```

В приведенных выше командах предполагается, что у вас есть следующее:

* Копия файла параметров со значениями, указанными для вашего экземпляра масштабируемого набора.
* Требуемое число экземпляров виртуальных машин.
* Указатели на общий ресурс службы файлов Azure.
* Учетные данные для учетной записи хранения, которая будет подключена к каждой виртуальной машине.

На файл параметров указывают локальные ссылки в командах. Вы также можете передать встроенные параметры или запросить их в сценарии.  

Приведенный выше шаблон позволяет использовать протокол SSH и порт JupyterHub из интерфейсного масштабируемого набора во внутреннем пуле DSVM на основе Ubuntu. Как пользователь, вы входите на виртуальную машину на Secure Shell (SSH) или в JupyterHub обычным образом. Так как экземпляры виртуальных машин можно динамически масштабировать или уменьшать, любое состояние должно быть сохранено в подключенной общей папке файлов Azure. Тот же подход можно использовать для создания пула DSVM на основе Windows.

В репозитории Azure DataScienceVM на сайте GitHub можно также найти [сценарий, который подключает общий ресурс службы файлов Azure](https://raw.githubusercontent.com/Azure/DataScienceVM/master/Extensions/General/mountazurefiles.sh). Этот сценарий подключает общий ресурс службы файлов Azure в заданной точке подключения внутри файла параметров. Кроме того, он создает гибкие связи с подключенным диском в домашнем каталоге начального пользователя. Каталог записных книжек пользователя в общей папке службы файлов Azure имеет программную связь с `$HOME/notebooks/remote` каталогом, чтобы пользователи могли получать доступ, запускать и сохранять свои записные книжки Jupyter. Это же соглашение можно использовать при создании дополнительных пользователей на виртуальной машине, чтобы добавить указатель на рабочую область Jupyter каждого пользователя в общий ресурс службы файлов Azure.

Масштабируемые наборы виртуальных машин поддерживают автомасштабирование. Можно задать правила создания дополнительных экземпляров и время масштабирования экземпляров. Например, вы можете уменьшить масштаб до нуля экземпляров, чтобы сэкономить на использовании облачного оборудования, когда виртуальные машины простаивают. Подробное описание процедуры [автомасштабирования](../../virtual-machine-scale-sets/virtual-machine-scale-sets-autoscale-overview.md) приведено в документации по масштабируемым наборам виртуальных машин.

## <a name="next-steps"></a>Дальнейшие шаги

* [Настройка общего удостоверения](dsvm-common-identity.md)
* [Безопасное хранение учетных данных для доступа на виртуальной машине для обработки и анализа данных](dsvm-secure-access-keys.md)