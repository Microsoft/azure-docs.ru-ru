---
title: Руководство по созданию модели прогнозирования с помощью автоматизированного ML (часть 1 из 2)
titleSuffix: Azure Machine Learning
description: Узнайте, как создавать и развертывать модели автоматизированного ML, чтобы можно было использовать оптимальную модель для прогнозирования результатов в Microsoft Power BI.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.author: samkemp
author: samuel100
ms.reviewer: sdgilley
ms.date: 12/11/2020
ms.openlocfilehash: 897f493edf6ccdebb25c201e8e4f9babfb0754c5
ms.sourcegitcommit: 1bdcaca5978c3a4929cccbc8dc42fc0c93ca7b30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/13/2020
ms.locfileid: "97370877"
---
# <a name="tutorial-power-bi-integration---create-the-predictive-model-using-automated-machine-learning-part-1-of-2"></a>Руководство по интеграции Power BI. Создание прогнозной модели с помощью автоматизированного машинного обучения (часть 1 из 2)

В первой части этого учебника показано, как обучить и развернуть прогнозную модель машинного обучения с помощью автоматизированного машинного обучения в Студии машинного обучения Azure.  Во второй части показано, как использовать оптимальную модель для прогнозирования результатов в Microsoft Power BI.

Изучив это руководство, вы:

> [!div class="checklist"]
> * Создание вычислительного кластера Машинного обучения Azure
> * Создание набора данных
> * Создание выполнения автоматизированного ML
> * Развертывание оптимальной модели в конечной точке оценки в реальном времени


Есть три способа создания и развертывания модели, которая будет использоваться в Power BI.  В этой статье рассматривается вариант В: Обучение и развертывание моделей с помощью автоматизированного ML в студии.  Этот вариант предусматривает процесс разработки в режиме без использования кода, который полностью автоматизирует подготовку данных и обучение модели. 

Вместо этого можно использовать:

* [Вариант А. Обучение и развертывание моделей с помощью Записных книжек](tutorial-power-bi-custom-model.md) — использование подхода code-first и записных книжек Jupyter, размещенных в Студии машинного обучения Azure.
* [Вариант Б. Обучение и развертывание моделей с помощью конструктора](tutorial-power-bi-designer-model.md) (пользовательский интерфейс перетаскивания), при использовании которого не требуется писать много кода.

## <a name="prerequisites"></a>Предварительные требования

- Подписка Azure ([доступна бесплатная пробная версия](https://aka.ms/AMLFree)). 
- Рабочая область машинного обучения Azure. Если у вас еще нет рабочей области, см. инструкции по [созданию рабочей области машинного обучения Azure](./how-to-manage-workspace.md#create-a-workspace).

## <a name="create-compute-cluster"></a>Создание вычислительного кластера

Автоматизированное ML автоматически обучает множество различных моделей машинного обучения, чтобы найти наиболее подходящий алгоритм и параметры. Машинное обучение Azure параллелизует выполнение обучения модели в вычислительном кластере.

Войдите в [Студию машинного обучения Azure](https://ml.azure.com), выберите **Вычислительная среда** в меню слева и щелкните вкладку **Вычислительные кластеры**. Выберите **Создать**:

:::image type="content" source="media/tutorial-power-bi/create-compute-cluster.png" alt-text="Снимок экрана: создание вычислительного кластера":::.

На экране **Создание вычислительного кластера** сделайте следующее:

1. Выберите размер виртуальной машины (в рамках этого учебника подходит компьютер `Standard_D11_v2`).
1. Щелкните **Далее**.
1. Укажите допустимое имя вычислительного ресурса.
1. Оставьте значение **Минимальное число узлов** равным 0.
1. Измените значение **Максимальное число узлов** на 4.
1. Выберите **Создать**.

Как можно видеть, состояние кластера изменилось на значение **Создание**.

>[!NOTE]
> После создания в кластере не будет узлов, что подразумевает отсутствие затрат на вычислительные ресурсы. Затраты возникают только при выполнении задания автоматизированного ML. После 120 секунд простоя кластер автоматически выполнит обратное масштабирование до 0.


## <a name="create-dataset"></a>Создание набора данных

В этом руководстве показано, как использовать набор данных [diabetes](https://www4.stat.ncsu.edu/~boos/var.select/diabetes.html), который доступен в [Открытых наборах данных Azure](https://azure.microsoft.com/services/open-datasets/).

Чтобы создать набор данных, в меню слева выберите **Наборы данных** и щелкните **Создать набор данных**. Вы увидите следующие варианты:

:::image type="content" source="media/tutorial-power-bi/create-dataset.png" alt-text="Снимок экрана: создание набора данных":::.

Выберите **Из Открытых наборов данных** и на экране **Создание набора на основе Открытых наборов данных** сделайте следующее:

1. Введите *diabetes* на панели поиска.
1. Выберите **Пример: Diabetes**.
1. Щелкните **Далее**.
1. Укажите имя набора данных — *diabetes*.
1. Выберите **Создать**.

Данные можно просмотреть, выбрав набор данных, и щелкнув **Просмотр**:

:::image type="content" source="media/tutorial-power-bi/explore-dataset.png" alt-text="Снимок экрана: изучение набора данных":::.

Данные имеют 10 базовых входных переменных (например, возраст, пол, индекс массы тела, среднее кровяное давление и шесть показателей сыворотки крови) и одну целевую переменную с именем **Y** (количественный показатель развития диабета в единицах измерения за один год в сравнении с исходным значением).

## <a name="create-automated-ml-run"></a>Создание выполнения автоматизированного ML

Войдите в [Студию машинного обучения Azure](https://ml.azure.com), выберите **Автоматизированное машинное обучение** в меню слева, а затем **New Automated ML Run** (Новое выполнение автоматизированного ML):

:::image type="content" source="media/tutorial-power-bi/create-new-run.png" alt-text="Снимок экрана: создание нового выполнения автоматизированного ML":::.

Затем выберите ранее созданный набор данных **diabetes** и щелкните **Далее**:

:::image type="content" source="media/tutorial-power-bi/select-dataset.png" alt-text="Снимок экрана: выбор набора данных":::.
 
На экране **Configure run** (Настройка выполнения) сделайте следующее:

1. В разделе **Имя эксперимента** выберите **Создать**.
1. Укажите имя эксперимента.
1. В поле целевого столбца выберите **Y**.
1. В поле **Выберите вычислительный кластер** выберите созданный ранее вычислительный кластер. 

Заполненная форма должна выглядеть следующим образом:

:::image type="content" source="media/tutorial-power-bi/configure-automated.png" alt-text="Снимок экрана: настройка автоматизированного ML":::.

Наконец, необходимо выбрать задачу машинного обучения — **Регрессия**:

:::image type="content" source="media/tutorial-power-bi/configure-task.png" alt-text="Снимок экрана: настройка задачи":::.

Нажмите кнопку **Готово**.

> [!IMPORTANT]
> Автоматизированному ML потребуется около 30 минут, чтобы завершить обучение 100 различных моделей.

## <a name="deploy-the-best-model"></a>Развертывание лучшей модели

После завершения выполнения автоматизированного ML можно просмотреть список всех различных моделей машинного обучения, которые были использованы, выбрав вкладку **Модели**. Модели упорядочены по производительности — первой отображается наиболее производительная модель. После выбора лучшей модели кнопка **Развернуть** активируется.

:::image type="content" source="media/tutorial-power-bi/list-models.png" alt-text="Снимок экрана, показывающий список моделей":::.

При выборе **Развернуть** появится экран **Развернуть модель**:

1. Укажите имя для службы модели — используйте **diabetes-model**.
1. Выберите **Служба контейнеров Azure**.
1. Выберите **Развернуть**.

Должно отобразиться сообщение о том, что модель успешно развернута.

## <a name="next-steps"></a>Дальнейшие действия

Из этого учебника вы узнали, как обучить и развернуть модель машинного обучения с помощью автоматизированного ML. В следующем учебнике показано, как использовать (оценивать) эту модель с помощью Power BI.

> [!div class="nextstepaction"]
> [Учебник. Использование модели в Power BI](/power-bi/connect-data/service-aml-integrate?context=azure/machine-learning/context/ml-context)
