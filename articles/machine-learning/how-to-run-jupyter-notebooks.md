---
title: Запуск записных книжек Jupyter в рабочей области
titleSuffix: Azure Machine Learning
description: Узнайте, как запустить записную книжку Jupyter, не открывая рабочую область в Машинное обучение Azure Studio.
services: machine-learning
author: abeomor
ms.author: osomorog
ms.reviewer: sgilley
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.custom: how-to
ms.date: 01/19/2021
ms.openlocfilehash: 7bb1ce8141f609feb4f354aa85f202915e197f37
ms.sourcegitcommit: fc401c220eaa40f6b3c8344db84b801aa9ff7185
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/20/2021
ms.locfileid: "98599292"
---
# <a name="how-to-run-jupyter-notebooks-in-your-workspace"></a>Выполнение веб-приложений Jupyter Notebook в рабочей области

Узнайте, как запускать записные книжки Jupyter непосредственно в рабочей области в Машинное обучение Azure Studio. Работать с записными книжками можно не только в [Jupyter](https://jupyter.org/) или [JupyterLab](https://jupyterlab.readthedocs.io), но и прямо в рабочей области.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://aka.ms/AMLFree), прежде чем начинать работу.
* Рабочая область машинного обучения. См. сведения о [создании рабочей области машинного обучения Azure](how-to-manage-workspace.md).

## <a name="create-notebooks"></a><a name="create"></a> Создание записных книжек

В рабочей области Машинного обучения Azure создайте новое веб-приложение Jupyter Notebook и начните работу. При создании записная книжка размещается в хранилище рабочей области по умолчанию. Доступ к этой записной книжке можно предоставить любому пользователю, у которого есть доступ к рабочей области. 

Чтобы создать записную книжку: 

1. Откройте рабочую область [Студии машинного обучения](https://ml.azure.com).
1. Выберите **Записные книжки** слева. 
1. Выберите значок **Создать файл** над списком **Файлы пользователя** в разделе **Мои файлы**.

    :::image type="content" source="media/how-to-run-jupyter-notebooks/create-new-file.png" alt-text="Создание файла":::

1. Присвойте файлу имя. 
1. Для файлов записной книжки Jupyter выберите **Записная книжка** в качестве типа файла.
1. Выберите каталог для файла.
1. Нажмите кнопку **создания**.

Кроме того, можно создавать текстовые файлы.  Выберите в качестве типа файла **Text** (Текстовый файл) и добавьте расширение к имени (например, myfile.py или myfile.txt).  

Вы также можете передавать папки и файлы, в том числе записные книжки, используя инструменты, которые находятся в верхней части страницы "Записные книжки".  В разделе предварительного просмотра отображаются записные книжки и большинство типов текстовых файлов.  Для большинства других типов файлов предварительный просмотр недоступен.

> [!IMPORTANT]
> Содержимое записных книжек и сценариев потенциально может считывать данные из сеансов и получать доступ к данным без Организации в Azure.  Загружать файлы только из надежных источников. Дополнительные сведения см. в разделе рекомендации по [безопасному коду](concept-secure-code-best-practice.md#azure-ml-studio-notebooks).

### <a name="clone-samples"></a>Клонирование примеров

Рабочая область содержит папку **Samples** (Примеры) с записными книжками, предназначенными для изучения пакета SDK и использования в качестве примеров для ваших собственных проектов машинного обучения.  Вы можете клонировать эти записные книжки в собственную папку в контейнере хранилища рабочей области.  

Пример см. в разделе [Учебник. Создание первого эксперимента машинного обучения](tutorial-1st-experiment-sdk-setup.md#azure).

### <a name="use-files-from-git-and-version-my-files"></a><a name="terminal"></a> Использование файлов из Git и работа с версиями файлов

Доступ ко всем операциям Git можно получить с помощью окна терминала. Все файлы и папки Git будут храниться в файловой системе рабочей области.

> [!NOTE]
> Добавьте файлы и папки в папку **~/cloudfiles/code/Users**, чтобы они отображались во всех средах Jupyter.

Чтобы открыть терминал:

1. Откройте рабочую область [Студии машинного обучения](https://ml.azure.com).
1. Выберите **Записные книжки** слева.
1. Выберите любую записную книжку, расположенную в разделе **Файлы пользователя** слева.  Если у вас нет записных книжек, сначала [создайте записную книжку](#create).
1. Выберите целевой объект **вычислений** или создайте новый и дождитесь его запуска.
1. Выберите значок **Open terminal** (Открыть терминал).

    :::image type="content" source="media/how-to-run-jupyter-notebooks/open-terminal.png" alt-text="Откройте терминал":::

1. Если значок не отображается, нажмите кнопку **...** справа от целевого объекта вычислений и выберите **Открыть терминал**.

    :::image type="content" source="media/how-to-run-jupyter-notebooks/alt-open-terminal.png" alt-text="Открытие терминала с помощью меню &quot;...&quot;":::


Дополнительные сведения см. в разделе [Клонирование репозиториев Git в файловую систему рабочей области](concept-train-model-git-integration.md#clone-git-repositories-into-your-workspace-file-system).

### <a name="copy-and-paste-in-terminal"></a>Копирование и вставка в терминале

> * Windows: `Ctrl-Insert` копирование и использование `Ctrl-Shift-v` или `Shift-Insert` для вставки.
> * Mac OS: `Cmd-c` для копирования и `Cmd-v` для вставки.
> * Браузеры FireFox и IE могут не поддерживать разрешения буфера обмена корректно.

### <a name="share-notebooks-and-other-files"></a>Общий доступ к записным книжкам и другим файлам

Скопируйте и вставьте URL-адрес, чтобы совместно использовать записную книжку или файл.  Только другие пользователи рабочей области могут получить доступ к этому URL-адресу.  Узнайте больше о [предоставлении доступа к рабочей области](how-to-assign-roles.md).

## <a name="edit-a-notebook"></a>Изменение записной книжки

Чтобы изменить записную книжку, откройте любую записную книжку, расположенную в разделе **User Files** (Файлы пользователя) рабочей области. Щелкните ячейку, которую хотите изменить. 

Вы можете изменить записную книжку без подключения к вычислительному экземпляру.  Если нужно выполнить ячейки в записной книжке, выберите или создайте вычислительный экземпляр.  Если выбрать остановленный вычислительный экземпляр, он автоматически начнется при запуске первой ячейки.

При запуске вычислительного экземпляра можно также использовать функцию завершения кода на платформе [IntelliSense](https://code.visualstudio.com/docs/editor/intellisense)в любой записной книжке Python.

Вы также можете запустить Jupyter или JupyterLab на панели инструментов записной книжки.  Машинное обучение Azure не предоставляет обновления и исправления ошибок из Jupyter или JupyterLab, так как они являются продуктами с открытым кодом вне компетенции службы поддержки Майкрософт.

### <a name="focus-mode"></a>Режим фокусировки

Используйте режим фокусировки, чтобы развернуть текущее представление, чтобы вы могли сосредоточиться на активных вкладках. Режим фокусировки скрывает обозреватель файлов записных книжек.

1. На панели инструментов окна терминала выберите **режим фокусировки** , чтобы включить режим фокусировки. В зависимости от ширины окна это может находиться в элементе меню.. **.** на панели инструментов.
1. В режиме фокусировки вернитесь к стандартному представлению, выбрав **стандартное представление**.

    :::image type="content" source="media/how-to-run-jupyter-notebooks/focusmode.gif" alt-text="Переключение режима фокусировки/стандартного представления":::


### <a name="use-intellisense"></a>Использование IntelliSense

[IntelliSense](https://code.visualstudio.com/docs/editor/intellisense) — это средство завершения кода, включающее ряд функций: список членов, сведения о параметрах, краткие сведения и полное слово. Эти возможности помогают получать дополнительные сведения об используемом коде, отслеживать параметры при вводе и добавлять вызовы свойств и методов путем нескольких нажатий клавиш.  

При вводе кода используйте клавиши Ctrl + пробел для активации IntelliSense.

### <a name="clean-your-notebook-preview"></a>Очистка записной книжки (Предварительная версия)

> [!IMPORTANT]
> Функция сбора в настоящее время доступна в общедоступной предварительной версии.
> Предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для производственных рабочих нагрузок. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

В ходе создания записной книжки обычно используются ячейки, используемые для просмотра или отладки данных. Функция *сбора данных* поможет вам создать чистую записную книжку без этих внешних ячеек.

1. Выполните все ячейки записной книжки.
1. Выберите ячейку, содержащую код, который нужно запустить для новой записной книжки. Например, код, который отправляет эксперимент или, возможно, код, регистрирующий модель.
1. Выберите значок **сбор** , отображаемый на панели инструментов ячейки.
    :::image type="content" source="media/how-to-run-jupyter-notebooks/gather.png" alt-text="Снимок экрана: выбор значка сбора данных":::
1. Введите имя новой записной книжки для собранных сведений.  

Новая Записная книжка содержит только ячейки кода, при этом все ячейки должны получить те же результаты, что и выбранная ячейка для сбора.

### <a name="save-and-checkpoint-a-notebook"></a>Сохранение и контрольная точка записной книжки

Машинное обучение Azure создает файл контрольных точек при создании файла *ipynb* .

На панели инструментов записной книжки выберите меню, а затем **файл &gt; сохранить и контрольная точка** , чтобы вручную сохранить записную книжку, и она добавит файл контрольных точек, связанный с записной книжкой.

:::image type="content" source="media/how-to-run-jupyter-notebooks/file-save.png" alt-text="Снимок экрана инструмента &quot;сохранение&quot; на панели инструментов записной книжки":::

Каждая Записная книжка автоматически сохраняется каждые 30 секунд. Функция автосохранения обновляет только исходный файл *ipynb* , а не файл контрольных точек.
 
Выберите **контрольные точки** в меню Записная книжка, чтобы создать именованную контрольную точку и вернуть ее к сохраненной контрольной точке.

## <a name="delete-a-notebook"></a>Удаление записной книжки

Записные книжки в папке **Samples** (Примеры) удалить *нельзя*.  Эти записные книжки входят в состав Студии и обновляются каждый раз при публикации нового пакета SDK.  

Вы *можете* удалить записные книжки из папки **User files** (Файлы пользователя) любым из следующих способов:

* В Студии выберите **...** в конце папки или файла.  Убедитесь, что используется поддерживаемый браузер (Microsoft Edge, Chrome или Firefox).
* На любой панели инструментов записной книжки выберите [**Открыть терминал**](#terminal)  , чтобы открыть окно терминала для вычислительного экземпляра.
* Воспользуйтесь инструментами Jupyter или JupyterLab.

## <a name="run-a-notebook-or-python-script"></a>Запуск скрипта записной книжки или Python

Чтобы запустить записную книжку или сценарий Python, сначала подключитесь к выполняющемуся [вычислительному экземпляру](concept-compute-instance.md). Если у вас нет вычислительной операции, выполните следующие действия, чтобы создать ее: 

1. Выберите **+** на панели инструментов записной книжки или скрипта. 
2. Присвойте имя вычислительной операции и выберите значение **Virtual Machine Size** (Размер виртуальной машины). 
3. Нажмите кнопку **создания**.
4. Вычислительный экземпляр автоматически подключается к файлу.  Теперь можно запускать ячейки записной книжки или скрипт Python, используя инструмент слева от вычислительного экземпляра.

Только вы можете просматривать и использовать созданные вами вычислительные операции.  Ваша папка **User files** (Файлы пользователя) хранится отдельно от виртуальной машины и является общей для всех вычислительных операций в рабочей области.

### <a name="view-logs-and-output"></a>Просмотр журналов и выходных данных

Используйте [мини-приложения записной книжки](/python/api/azureml-widgets/azureml.widgets?preserve-view=true&view=azure-ml-py) для просмотра хода выполнения и журналов. Мини-приложение работает асинхронно и предоставляет обновленные сведения до тех пор, пока обучение не будет завершено. Мини-приложения Машинного обучения Azure также поддерживаются в Jupyter и JupyterLab.

:::image type="content" source="media/how-to-run-jupyter-notebooks/jupyter-widget.png" alt-text="Снимок экрана: мини-приложение записной книжки Jupyter ":::

## <a name="explore-variables-in-the-notebook"></a>Изучение переменных в записной книжке

На панели инструментов записной книжки используйте **Обозреватель переменных** , чтобы отобразить имя, тип, длину и примеры значений для всех переменных, созданных в записной книжке.

:::image type="content" source="media/how-to-run-jupyter-notebooks/variable-explorer.png" alt-text="Снимок экрана: средство обозревателя переменных":::

Выберите инструмент, чтобы отобразить окно обозревателя переменных.

:::image type="content" source="media/how-to-run-jupyter-notebooks/variable-explorer-window.png" alt-text="Снимок экрана: окно обозревателя переменных":::

## <a name="navigate-with-a-toc"></a>Навигация с помощью ОГЛАВЛЕНИя

На панели инструментов записной книжки  **Используйте средство оглавление, чтобы** отобразить или скрыть оглавление.  Начните Markdown ячейку с заголовком, чтобы добавить ее в оглавление. Щелкните запись в таблице, чтобы прокрутить ее к этой ячейке в записной книжке.  

:::image type="content" source="media/how-to-run-jupyter-notebooks/table-of-contents.png" alt-text="Снимок экрана: оглавление в записной книжке":::

## <a name="change-the-notebook-environment"></a>Изменение среды записной книжки

Панель инструментов записной книжки позволяет изменить среду, в которой выполняется Записная книжка.  

При этом не меняется ни состояние записной книжки, ни значения переменных в ней.

|Действие  |Результат  |
|---------|---------| --------|
|Остановка ядра     |  Все выполняемые ячейки останавливаются. При выполнении ячейки ядро автоматически перезапускается. |
|Переход в другой раздел рабочей области     |     Выполняемые ячейки останавливаются. |

Эти действия сбрасывают состояние записной книжки и все переменные в записной книжке.

|Действие  |Результат  |
|---------|---------| --------|
| Изменение ядра | Записная книжка использует новое ядро. |
| Переключение вычисления    |     Записная книжка автоматически использует новое вычисление. |
| Сброс вычисления | Повторный запуск при попытке выполнить ячейку. |
| Остановка вычисления     |    Ячейки не выполняются.  |
| Открытие записной книжки в Jupyter или JupyterLab     |    Записная книжка открывается на новой вкладке.  |

### <a name="add-new-kernels"></a>Добавление новых ядер

В записной книжке будут автоматически найдены все ядра Jupyter, установленные на подключенном вычислительном экземпляре.  Чтобы добавить ядро к вычислительной операции:

1. Выберите [**Открыть терминал**](#terminal) на панели инструментов записной книжки.
1. Создайте новую среду с помощью терминала.  Например, приведенный ниже код создает `newenv` :
    ```shell
    conda create -y --name newenv
    ```
1. Активируйте среду.  Например, после создания среды `newenv`:

    ```shell
    conda activate newenv
    ```
1. Установите PIP и пакет ипикернел в новой среде и создайте ядро для этого conda env.

    ```shell
    conda install -y pip
    conda install -y ipykernel
    python -m ipykernel install --user --name newenv --display-name "Python (newenv)"
    ```

> [!NOTE]
> Для управления пакетами в записной книжке используйте функции " **% PIP** " или " **% conda** Magic" для автоматической установки пакетов в **выполняющийся в настоящее время ядре**, а не в разделе **! PIP** или **! conda** , который ссылается на все пакеты (включая пакеты вне текущего выполняющегося ядра).

Можно установить любое из [доступных ядер Jupyter](https://github.com/jupyter/jupyter/wiki/Jupyter-kernels).

### <a name="status-indicators"></a>Индикаторы состояния

Индикатор рядом с раскрывающимся списком **Compute** (Вычисление) отображает его состояние.  Состояние также отображается в самом раскрывающемся списке.  

|Color |Состояние вычисления |
|---------|---------| 
| Зеленый | Вычисление выполняется |
| Красный |Сбой при вычислении | 
| Черный | Вычисление остановлено |
|  Голубой |Создание, запуск, перезапуск, настройка вычисления |
|  Серый |Идет процесс удаления или остановки вычисления |

Индикатор рядом с раскрывающимся списком **Kernel** (Ядро) отображает его состояние.

|Color |Состояние ядра |
|---------|---------|
|  Зеленый |Ядро подключено, неактивно или занято|
|  Серый |Ядро не подключено |

## <a name="shortcut-keys"></a>Сочетания клавиш
Как и в записных книжках Jupyter, блокноты Машинное обучение Azure Studio имеют модальный пользовательский интерфейс. Клавиатура выполняет разные действия в зависимости от того, в каком режиме находится ячейка записной книжки. Записные книжки Машинное обучение Azure Studio поддерживают следующие два режима для заданной ячейки кода: режим команд и режим редактирования.

### <a name="command-mode-shortcuts"></a>Сочетания клавиш для режима команд

Ячейка находится в режиме команд, когда нет текстового курсора для ввода текста. Когда ячейка находится в режиме команд, вы можете редактировать записную книжку целиком, но не вводить ее в отдельные ячейки. Введите режим команд, нажав `ESC` или выполнив команду мыши вне области редактора ячейки.  Левая граница активной ячейки — синяя и сплошная, а кнопка **выполнения** — синяя.

   :::image type="content" source="media/how-to-run-jupyter-notebooks/command-mode.png" alt-text="Ячейка записной книжки в режиме команд ":::

| Сочетание клавиш                      | Описание                          |
| ----------------------------- | ------------------------------------|
| ВВОД                         | Вход в режим редактирования             |        
| SHIFT + ВВОД                 | Запустить ячейку, выберите ниже         |     
| Control/Command + ввод       | Запуск ячейки                            |
| ALT + ВВОД                   | Запустить ячейку, вставить ячейку кода ниже    |
| Control/Command + ALT + ВВОД | Выполните ячейку, вставьте Markdown ячейку ниже|
| ALT + R                       | Выполнить все      |                       
| Y                             | Преобразовать ячейку в код    |                         
| M                             | Преобразовать ячейку в Markdown  |                       
| Вверх/K                          | Выбор ячейки выше    |               
| Down/J                        | Выбор ячейки ниже    |               
| A                             | Вставить ячейку кода выше  |            
| B                             | Вставить ячейку кода ниже   |           
| Control/Command + Shift + A   | Вставить Markdown ячейку выше    |      
| Control/Command + Shift + B   | Вставить Markdown ячейку ниже   |       
| X                             | Вырезать выбранную ячейку    |               
| C                             | Копировать выбранную ячейку   |               
| Shift + V                     | Вставить выбранную ячейку выше           |
| V                             | Вставить выбранную ячейку ниже    |       
| D D                           | Удалить выбранную ячейку|                
| O                             | Переключить выходные данные         |              
| Shift + O                     | Переключить прокрутку вывода   |          
| я                           | Ядро прерываний |                   
| 0 0                           | Перезапустить ядро |                     
| Shift + пробел                 | Прокрутка вверх  |                         
| Пробел                         | Прокрутка вниз|
| Вкладка                           | Изменение фокуса на следующий изменяемый элемент (при отключенной ловушке вкладки)|
| Control/Command + S           | Сохранить записную книжку |                      
| 1                             | Изменение на H1|                       
| 2                             | Изменение на H2|                        
| 3                             | Изменить на H3|                        
| 4                             | Изменить на H4 |                       
| 5                             | Изменить на H5 |                       
| 6                             | Изменить на H6 |                       

### <a name="edit-mode-shortcuts"></a>Сочетания клавиш режима правки

Режим правки обозначается текстовым курсором для ввода текста в области редактора. Если ячейка находится в режиме редактирования, ее можно ввести в ячейку. Войдите в режим редактирования, нажав `Enter` или выполнив команду мыши в области редактора ячейки. Левая граница активной ячейки — зеленый и штриховой, а кнопка **выполнения** — зеленая. Вы также видите запрос курсора в ячейке в режиме редактирования.

   :::image type="content" source="media/how-to-run-jupyter-notebooks/edit-mode.png" alt-text="Ячейка записной книжки в режиме редактирования":::

С помощью следующих сочетаний клавиш можно легко перемещаться и выполнять код в Машинное обучение Azure записных книжках в режиме редактирования.

| Сочетание клавиш                      | Описание|                                     
| ----------------------------- | ----------------------------------------------- |
| ESC                        | Вход в режим команд|  
| Элемент управления/команда + пробел       | Активация IntelliSense |
| SHIFT + ВВОД                 | Запустить ячейку, выберите ниже |                         
| Control/Command + ввод       | Запуск ячейки  |                                      
| ALT + ВВОД                   | Запустить ячейку, вставить ячейку кода ниже  |              
| Control/Command + ALT + ВВОД | Выполните ячейку, вставьте Markdown ячейку ниже  |          
| ALT + R                       | Выполнение всех ячеек     |                              
| Up                            | Переместить курсор вверх или предыдущую ячейку    |             
| Down                          | Переместить курсор вниз или следующую ячейку |                  
| Control/Command + S           | Сохранить записную книжку   |                                
| Элемент управления/команда + стрелка вверх          | Переход к началу ячейки   |                             
| Элемент управления/команда + вниз        | Передох к концу ячейки |                                 
| Вкладка                           | Завершение кода или отступ (если включена ловушка табуляции) |
| Control/Command + M           | Включить или отключить ловушку вкладки  |                       
| Control/Command +]           | Отступ |                                         
| Control/Command + [           | Понижение уровня  |                                        
| Элемент управления/команда + A           | Выбрать все|                                      
| Control/Command + Z           | Отменить |                                           
| Control/Command + Shift + Z   | Повторить |                                           
| Control/Command + Y           | Повторить |                                           
| Control, Command и Home        | Переход к началу ячейки|                                
| Control, команда + End         | Передох к концу ячейки   |                               
| Элемент управления/команда + Left        | Переход на одно слово влево |                               
| Элемент управления/команда + Right       | Переход на одно слово вправо |                              
| Control/Command + Backspace   | Удаление слова перед |                             
| Control, Command и DELETE      | Удаление слова после |                              
| Control/Command +/           | Переключить комментарий на Cu

## <a name="find-compute-details"></a>Сведения о вычислениях

Сведения о вычислительных операциях см. на странице **Compute** (Вычисления) в [Студии](https://ml.azure.com).

## <a name="next-steps"></a>Дальнейшие действия

* [Выполнение первого эксперимента](tutorial-1st-experiment-sdk-train.md)
* [Резервное копирование хранилища файлов с помощью моментальных снимков](../storage/files/storage-snapshots-files.md)