---
title: Запуск записных книжек Jupyter в рабочей области
titleSuffix: Azure Machine Learning
description: Узнайте, как запустить записную книжку Jupyter, не открывая рабочую область в Машинное обучение Azure Studio.
services: machine-learning
author: abeomor
ms.author: osomorog
ms.reviewer: sgilley
ms.service: machine-learning
ms.subservice: core
ms.topic: conceptual
ms.custom: how-to
ms.date: 01/19/2021
ms.openlocfilehash: 18ccadcf43d41c677a665ed068d093f51389b576
ms.sourcegitcommit: b4647f06c0953435af3cb24baaf6d15a5a761a9c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/02/2021
ms.locfileid: "101657338"
---
# <a name="run-jupyter-notebooks-in-your-workspace"></a>Запуск записных книжек Jupyter в рабочей области

Узнайте, как запускать записные книжки Jupyter непосредственно в рабочей области в Машинное обучение Azure Studio. Работать с записными книжками можно не только в [Jupyter](https://jupyter.org/) или [JupyterLab](https://jupyterlab.readthedocs.io), но и прямо в рабочей области.

Сведения о создании файлов и управлении ими, включая записные книжки, см. [в статье Создание файлов и управление ими в рабочей области](how-to-manage-files.md).

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://aka.ms/AMLFree), прежде чем начинать работу.
* Рабочая область машинного обучения. См. сведения о [создании рабочей области машинного обучения Azure](how-to-manage-workspace.md).

## <a name="edit-a-notebook"></a>Изменение записной книжки

Чтобы изменить записную книжку, откройте любую записную книжку, расположенную в разделе **User Files** (Файлы пользователя) рабочей области. Щелкните ячейку, которую хотите изменить.  Если у вас нет записных книжек в этом разделе, см. статью [Создание файлов и управление ими в рабочей области](how-to-manage-files.md).

Вы можете изменить записную книжку без подключения к вычислительному экземпляру.  Если нужно выполнить ячейки в записной книжке, выберите или создайте вычислительный экземпляр.  Если выбрать остановленный вычислительный экземпляр, он автоматически начнется при запуске первой ячейки.

При запуске вычислительного экземпляра можно также использовать функцию завершения кода на платформе [IntelliSense](https://code.visualstudio.com/docs/editor/intellisense)в любой записной книжке Python.

Вы также можете запустить Jupyter или JupyterLab на панели инструментов записной книжки.  Машинное обучение Azure не предоставляет обновления и исправления ошибок из Jupyter или JupyterLab, так как они являются продуктами с открытым кодом вне компетенции службы поддержки Майкрософт.

## <a name="focus-mode"></a>Режим фокусировки

Используйте режим фокусировки, чтобы развернуть текущее представление, чтобы вы могли сосредоточиться на активных вкладках. Режим фокусировки скрывает обозреватель файлов записных книжек.

1. На панели инструментов окна терминала выберите **режим фокусировки** , чтобы включить режим фокусировки. В зависимости от ширины окна это может находиться в элементе меню.. **.** на панели инструментов.
1. В режиме фокусировки вернитесь к стандартному представлению, выбрав **стандартное представление**.

    :::image type="content" source="media/how-to-run-jupyter-notebooks/focusmode.gif" alt-text="Переключение режима фокусировки/стандартного представления":::

## <a name="use-intellisense"></a>Использование IntelliSense

[IntelliSense](https://code.visualstudio.com/docs/editor/intellisense) — это средство завершения кода, включающее ряд функций: список членов, сведения о параметрах, краткие сведения и полное слово. Эти возможности помогают получать дополнительные сведения об используемом коде, отслеживать параметры при вводе и добавлять вызовы свойств и методов путем нескольких нажатий клавиш.  

При вводе кода используйте клавиши Ctrl + пробел для активации IntelliSense.

## <a name="clean-your-notebook-preview"></a>Очистка записной книжки (Предварительная версия)

> [!IMPORTANT]
> Функция сбора в настоящее время доступна в общедоступной предварительной версии.
> Предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для производственных рабочих нагрузок. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены. Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

В ходе создания записной книжки обычно используются ячейки, используемые для просмотра или отладки данных. Функция *сбора данных* поможет вам создать чистую записную книжку без этих внешних ячеек.

1. Выполните все ячейки записной книжки.
1. Выберите ячейку, содержащую код, который нужно запустить для новой записной книжки. Например, код, который отправляет эксперимент или, возможно, код, регистрирующий модель.
1. Выберите значок **сбор** , отображаемый на панели инструментов ячейки.
    :::image type="content" source="media/how-to-run-jupyter-notebooks/gather.png" alt-text="Снимок экрана: выбор значка сбора данных":::
1. Введите имя новой записной книжки для собранных сведений.  

Новая Записная книжка содержит только ячейки кода, при этом все ячейки должны получить те же результаты, что и выбранная ячейка для сбора.

## <a name="save-and-checkpoint-a-notebook"></a>Сохранение и контрольная точка записной книжки

Машинное обучение Azure создает файл контрольных точек при создании файла *ipynb* .

На панели инструментов записной книжки выберите меню, а затем **файл &gt; сохранить и контрольная точка** , чтобы вручную сохранить записную книжку, и она добавит файл контрольных точек, связанный с записной книжкой.

:::image type="content" source="media/how-to-run-jupyter-notebooks/file-save.png" alt-text="Снимок экрана инструмента &quot;сохранение&quot; на панели инструментов записной книжки":::

Каждая Записная книжка автоматически сохраняется каждые 30 секунд. Функция автосохранения обновляет только исходный файл *ipynb* , а не файл контрольных точек.
 
Выберите **контрольные точки** в меню Записная книжка, чтобы создать именованную контрольную точку и вернуть ее к сохраненной контрольной точке.

## <a name="export-a-notebook"></a>Экспорт записной книжки

На панели инструментов записной книжки выберите меню и **экспортируйте как** , чтобы экспортировать записную книжку как любой из поддерживаемых типов:

* Записная книжка
* Python
* HTML
* LaTeX

:::image type="content" source="media/how-to-run-jupyter-notebooks/export-notebook.png" alt-text="Экспорт записной книжки на компьютер":::

Экспортированный файл сохраняется на компьютере.

## <a name="run-a-notebook-or-python-script"></a>Запуск скрипта записной книжки или Python

Чтобы запустить записную книжку или сценарий Python, сначала подключитесь к выполняющемуся [вычислительному экземпляру](concept-compute-instance.md).

* Если у вас нет вычислительной операции, выполните следующие действия, чтобы создать ее:

    1. На панели инструментов записной книжки или скрипта справа от раскрывающегося списка вычисление выберите **+ создать вычисление**. В зависимости от размера экрана он может находиться в меню **...**
        :::image type="content" source="media/how-to-run-jupyter-notebooks/new-compute.png" alt-text="Создать новое вычисление":::
    1. Присвойте имя вычислительной операции и выберите значение **Virtual Machine Size** (Размер виртуальной машины). 
    1. Нажмите кнопку **создания**.
    1. Вычислительный экземпляр автоматически подключается к файлу.  Теперь можно запускать ячейки записной книжки или скрипт Python, используя инструмент слева от вычислительного экземпляра.

* Если у вас остановленный вычислительный экземпляр, выберите  **начать вычисление** справа от раскрывающегося списка вычисление. В зависимости от размера экрана он может находиться в меню **...**

    :::image type="content" source="media/how-to-run-jupyter-notebooks/start-compute.png" alt-text="Запустить вычислительный экземпляр":::

Только вы можете просматривать и использовать созданные вами вычислительные операции.  Ваша папка **User files** (Файлы пользователя) хранится отдельно от виртуальной машины и является общей для всех вычислительных операций в рабочей области.

### <a name="view-logs-and-output"></a>Просмотр журналов и выходных данных

Используйте [мини-приложения записной книжки](/python/api/azureml-widgets/azureml.widgets?preserve-view=true&view=azure-ml-py) для просмотра хода выполнения и журналов. Мини-приложение работает асинхронно и предоставляет обновленные сведения до тех пор, пока обучение не будет завершено. Мини-приложения Машинного обучения Azure также поддерживаются в Jupyter и JupyterLab.

:::image type="content" source="media/how-to-run-jupyter-notebooks/jupyter-widget.png" alt-text="Снимок экрана: мини-приложение записной книжки Jupyter ":::

## <a name="explore-variables-in-the-notebook"></a>Изучение переменных в записной книжке

На панели инструментов записной книжки используйте **Обозреватель переменных** , чтобы отобразить имя, тип, длину и примеры значений для всех переменных, созданных в записной книжке.

:::image type="content" source="media/how-to-run-jupyter-notebooks/variable-explorer.png" alt-text="Снимок экрана: средство обозревателя переменных":::

Выберите инструмент, чтобы отобразить окно обозревателя переменных.

:::image type="content" source="media/how-to-run-jupyter-notebooks/variable-explorer-window.png" alt-text="Снимок экрана: окно обозревателя переменных":::

## <a name="navigate-with-a-toc"></a>Навигация с помощью ОГЛАВЛЕНИя

На панели инструментов записной книжки  **Используйте средство оглавление, чтобы** отобразить или скрыть оглавление.  Начните Markdown ячейку с заголовком, чтобы добавить ее в оглавление. Щелкните запись в таблице, чтобы прокрутить ее к этой ячейке в записной книжке.  

:::image type="content" source="media/how-to-run-jupyter-notebooks/table-of-contents.png" alt-text="Снимок экрана: оглавление в записной книжке":::

## <a name="change-the-notebook-environment"></a>Изменение среды записной книжки

Панель инструментов записной книжки позволяет изменить среду, в которой выполняется Записная книжка.  

При этом не меняется ни состояние записной книжки, ни значения переменных в ней.

|Действие  |Результат  |
|---------|---------| --------|
|Остановка ядра     |  Все выполняемые ячейки останавливаются. При выполнении ячейки ядро автоматически перезапускается. |
|Переход в другой раздел рабочей области     |     Выполняемые ячейки останавливаются. |

Эти действия сбрасывают состояние записной книжки и все переменные в записной книжке.

|Действие  |Результат  |
|---------|---------| --------|
| Изменение ядра | Записная книжка использует новое ядро. |
| Переключение вычисления    |     Записная книжка автоматически использует новое вычисление. |
| Сброс вычисления | Повторный запуск при попытке выполнить ячейку. |
| Остановка вычисления     |    Ячейки не выполняются.  |
| Открытие записной книжки в Jupyter или JupyterLab     |    Записная книжка открывается на новой вкладке.  |

## <a name="add-new-kernels"></a>Добавление новых ядер

[Используйте терминал ](how-to-access-terminal.md#add-new-kernels) для создания и добавления новых ядер в вычислительный экземпляр. В записной книжке будут автоматически найдены все ядра Jupyter, установленные на подключенном вычислительном экземпляре.

Используйте раскрывающееся меню ядра справа, чтобы перейти на любой из установленных ядер.  


### <a name="status-indicators"></a>Индикаторы состояния

Индикатор рядом с раскрывающимся списком **Compute** (Вычисление) отображает его состояние.  Состояние также отображается в самом раскрывающемся списке.  

|Color |Состояние вычисления |
|---------|---------| 
| Зеленый | Вычисление выполняется |
| Красный |Сбой при вычислении | 
| Черный | Вычисление остановлено |
|  Голубой |Создание, запуск, перезапуск, настройка вычисления |
|  Серый |Идет процесс удаления или остановки вычисления |

Индикатор рядом с раскрывающимся списком **Kernel** (Ядро) отображает его состояние.

|Color |Состояние ядра |
|---------|---------|
|  Зеленый |Ядро подключено, неактивно или занято|
|  Серый |Ядро не подключено |

## <a name="find-compute-details"></a>Сведения о вычислениях

Сведения о вычислительных операциях см. на странице **Compute** (Вычисления) в [Студии](https://ml.azure.com).

## <a name="troubleshooting"></a>Устранение неполадок

* Если вы не можете подключиться к записной книжке, убедитесь, что связь с веб-сокетом **не** отключена. Для работы Jupyter функций вычислительных экземпляров необходимо включить связь через веб-сокет. Убедитесь, что сеть допускает подключения WebSocket к *. instances.azureml.net и *. instances.azureml.ms. 

* При развертывании экземпляра COMPUTE в рабочей области частной связи доступ к нему можно получить только из виртуальной сети. Если вы используете пользовательский DNS или файл hosts, добавьте запись для <имя экземпляра>. <region> . instances.azureml.ms с частным IP-адресом частной конечной точки рабочей области. Дополнительные сведения см. в статье о [пользовательской службе DNS](./how-to-custom-dns.md?tabs=azure-cli) .
    
## <a name="next-steps"></a>Дальнейшие действия

* [Выполнение первого эксперимента](tutorial-1st-experiment-sdk-train.md)
* [Резервное копирование хранилища файлов с помощью моментальных снимков](../storage/files/storage-snapshots-files.md)
* [Работа в безопасных средах](./how-to-secure-training-vnet.md#compute-instance)