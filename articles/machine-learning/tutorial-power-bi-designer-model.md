---
title: Руководство. Создание прогнозной модели с помощью перетаскивания (часть 1 из 2)
titleSuffix: Azure Machine Learning
description: Узнайте, как создать и развернуть модель прогнозирования машинного обучения с помощью конструктора. Позже вы сможете использовать ее для прогнозирования результатов в Microsoft Power BI.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.author: samkemp
author: samuel100
ms.reviewer: sdgilley
ms.date: 12/11/2020
ms.custom: designer
ms.openlocfilehash: 995979c7fe100637aa8e241489805fb09d6723f7
ms.sourcegitcommit: 1140ff2b0424633e6e10797f6654359947038b8d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/30/2020
ms.locfileid: "97814794"
---
# <a name="tutorial-power-bi-integration---drag-and-drop-to-create-the-predictive-model-part-1-of-2"></a>Руководство по Интеграция Power BI. Создание прогнозной модели с помощью перетаскивания (часть 1 из 2)

В первой части этого руководства показано, как обучить и развернуть прогнозную модель машинного обучения с помощью конструктора Машинного обучения Azure. Конструктор — это пользовательский интерфейс с возможностью перетаскивания, для работы с которым не требуется писать много кода. Во второй части показано, как использовать модель для прогнозирования результатов в Microsoft Power BI.

Изучив это руководство, вы:

> [!div class="checklist"]
> * создадите вычислительный экземпляр Машинного обучения Azure;
> * создадите кластер вывода Машинного обучения Azure;
> * Создание набора данных.
> * обучите модель регрессии;
> * развернете модель в конечной точке оценки в реальном времени.


Есть три способа создания и развертывания модели, которая будет использоваться в Power BI.  В этой статье рассматривается вариант Б — обучение и развертывание моделей с помощью конструктора.  Этот вариант предусматривает разработку с помощью конструктора, при использовании которого не требуется писать много кода.  

Но вместо него можно использовать один из следующих вариантов:

* [Вариант А. Обучение и развертывание моделей с помощью записных книжек Jupyter Notebook.](tutorial-power-bi-custom-model.md) Этот вариант предусматривает использование подхода Code First и записных книжек Jupyter Notebook, размещенных в Студии машинного обучения Azure.
* [Вариант В. Обучение и развертывание моделей с помощью автоматизированного машинного обучения.](tutorial-power-bi-automated-model.md) Этот вариант предусматривает разработку без использования кода с полной автоматизацией подготовки данных и обучения модели.

## <a name="prerequisites"></a>Предварительные требования

- Подписка Azure. Если у вас нет подписки, вы можете использовать [бесплатную пробную версию](https://aka.ms/AMLFree). 
- Рабочая область машинного обучения Azure. Если у вас нет рабочей области, см. раздел [Создание рабочих областей Машинного обучения Azure и управление ими](./how-to-manage-workspace.md#create-a-workspace).
- Начальные знания о рабочих процессах машинного обучения.


## <a name="create-compute-to-train-and-score"></a>Создание вычислительного экземпляра для обучения и оценки

С помощью инструкций из этого раздела вы создадите *вычислительный экземпляр*. Вычислительные экземпляры используются для обучения моделей машинного обучения. Вы также создадите *кластер вывода* для размещения развернутой модели для оценки в реальном времени.

Войдите в [Студию машинного обучения Azure](https://ml.azure.com). В меню слева выберите **Вычисления** и **Создать**:

:::image type="content" source="media/tutorial-power-bi/create-new-compute.png" alt-text="Снимок экрана: создание вычислительного экземпляра.":::

На странице **Создание вычислительного экземпляра** выберите размер виртуальной машины. Для работы с этим руководством выберите виртуальную машину **Standard_D11_v2**. Нажмите кнопку **Далее**. 

На странице **Параметры** присвойте вычислительному экземпляру имя. Щелкните **Создать**. 

>[!TIP]
> Вычислительный экземпляр также можно использовать для создания и запуска записных книжек.

Для параметра **Состояние** вашего вычислительного экземпляра теперь отображается значение **Создается**. Подготовка виртуальной машины занимает около 4 минут. 

Пока вы ждете, на странице **Вычисления** откройте вкладку **Кластеры вывода**. Затем нажмите кнопку **Создать**:

:::image type="content" source="media/tutorial-power-bi/create-cluster.png" alt-text="Снимок экрана: создание кластера вывода.":::

На странице **Создание кластера вывода** выберите регион и размер виртуальной машины. Для работы с этим руководством выберите виртуальную машину **Standard_D11_v2**. Нажмите кнопку **Далее**. 

На странице **Настройка параметров**:

1. Укажите допустимое имя вычислительного ресурса.
1. Выберите **Разработка и тестирование** в качестве назначения кластера. При этом будет создан один узел для размещения развернутой модели.
1. Щелкните **Создать**.

Для параметра **Состояние** кластера вывода теперь отображается значение **Создается**. Развертывание кластера с одним узлом занимает около 4 минут.

## <a name="create-a-dataset"></a>Создание набора данных

В этом руководстве используется [набор данных Diabetes](https://www4.stat.ncsu.edu/~boos/var.select/diabetes.html). Этот набор данных доступен в [Открытых наборах данных Azure](https://azure.microsoft.com/services/open-datasets/).

Чтобы создать набор данных, в меню слева выберите **Наборы данных**. Затем щелкните **Создать набор данных**. Вы увидите следующие параметры:

:::image type="content" source="media/tutorial-power-bi/create-dataset.png" alt-text="Снимок экрана: создание набора данных.":::

Выберите элемент **Из Открытых наборов данных**. На странице **Создание набора данных из Открытых наборов данных** сделайте следующее:

1. С помощью строки поиска выполните поиск по запросу *diabetes*.
1. Выберите **Пример: Diabetes**.
1. Выберите **Далее**.
1. Присвойте набору данных имя *diabetes*.
1. Щелкните **Создать**.

Чтобы просмотреть данные, выберите набор данных и щелкните **Изучить**:

:::image type="content" source="media/tutorial-power-bi/explore-dataset.png" alt-text="Снимок экрана: изучение набора данных.":::

Данные содержат 10 базовых входных переменных (например, возраст, пол, индекс массы тела, среднее кровяное давление и шесть показателей сыворотки крови), а также одну целевую переменную с именем **Y**. Эта переменная представляет собой количественный показатель развития диабета за год в сравнении с исходным значением.

## <a name="create-a-machine-learning-model-by-using-the-designer"></a>Создание модели Машинного обучения с помощью конструктора

После создания вычислений и наборов данных вы можете создать модель машинного обучения с помощью конструктора. В Студии машинного обучения Azure выберите **Конструктор** и **Новый конвейер**:

:::image type="content" source="media/tutorial-power-bi/create-designer.png" alt-text="Снимок экрана: создание конвейера.":::

Вы увидите пустой *холст* и меню **Параметры**:

:::image type="content" source="media/tutorial-power-bi/select-compute.png" alt-text="Снимок экрана: выбор целевого объекта вычислений.":::

В меню **Параметры** щелкните **Выбрать целевой объект вычислений**. Выберите созданный ранее вычислительный экземпляр, а затем нажмите кнопку **Сохранить**. Измените **имя черновика** на другое запоминающееся имя, например *diabetes-model*. Наконец, введите описание.

В списке активов разверните узел **Наборы данных** и выберите набор данных **diabetes**. Перетащите этот компонент на холст:

:::image type="content" source="media/tutorial-power-bi/drag-component.png" alt-text="Снимок экрана: перетаскивание компонента на холст.":::

Затем перетащите следующие компоненты на холст:

1. **Линейная регрессия** (находится в разделе **Алгоритмы Машинного обучения**).
1. **Обучение модели** (находится в разделе **Обучение модели**).

На холсте обратите внимание на кружки в верхней и нижней части компонентов. Это порты.

:::image type="content" source="media/tutorial-power-bi/connections.png" alt-text="Снимок экрана: порты отсоединенных компонентов.":::
 
Теперь *соедините* компоненты. Выберите порт в нижней части набора данных **diabetes**. Перетащите его на порт в правой верхней части компонента **Обучение модели**. Выберите порт в нижней части компонента **Линейная регрессия**. Перетащите его на порт в левой верхней части компонента **Обучение модели**.

Выберите столбец в наборе данных, который будет использоваться как переменная метки (целевая) для прогнозирования. Выберите компонент **Обучение модели** и щелкните **Изменить столбец**. 

В диалоговом окне выберите **Ввести имя столбца** > **Y**:

:::image type="content" source="media/tutorial-power-bi/label-columns.png" alt-text="Снимок экрана: выбор столбца метки.":::

Щелкните **Сохранить**. *Рабочий процесс* машинного обучения должен выглядеть так:

:::image type="content" source="media/tutorial-power-bi/connected-diagram.png" alt-text="Снимок экрана: соединенные компоненты.":::

Нажмите кнопку **Submit** (Отправить). В разделе **Эксперимент** щелкните **Создать**. Присвойте эксперименту имя и щелкните **Отправить**.

>[!NOTE]
> Первый запуск эксперимента занимает около 5 минут. Последующие запуски выполняются гораздо быстрее — кэши в конструкторе уже выполнили компоненты, и задержка будет меньше.

После завершения эксперимента вы увидите следующее:

:::image type="content" source="media/tutorial-power-bi/completed-run.png" alt-text="Снимок экрана: завершенное выполнение.":::

Чтобы проверить журналы экспериментов, выберите **Обучить модель** и щелкните **Выходные данные и журналы**.

## <a name="deploy-the-model"></a>Развертывание модели

Чтобы развернуть модель, в верхней части холста конвейера выберите **Создать конвейер вывода** > **Конвейер вывода в режиме реального времени**:

:::image type="content" source="media/tutorial-power-bi/pipeline.png" alt-text="Снимок экрана: выбор конвейера вывода в реальном времени.":::
 
Конвейер будет сжат до компонентов, требуемых для оценки модели. При оценке данных вы не узнаете значения целевых переменных. Поэтому **Y** можно удалить из набора данных. 

Чтобы удалить **Y**, добавьте компонент **Выбор столбцов в наборе данных** на холст. Присоедините компонент, чтобы набор данных diabetes был входным. Результаты выводятся в компонент **Оценка модели**:

:::image type="content" source="media/tutorial-power-bi/remove-column.png" alt-text="Снимок экрана: удаление столбца.":::

Выберите компонент **Выбор столбцов в наборе данных** на холсте и щелкните **Изменить столбцы**. 

В диалоговом окне **Выбор столбцов** выберите **По имени**. Убедитесь, что выбраны все входные переменные, но целевой объект *не* выбран:

:::image type="content" source="media/tutorial-power-bi/removal-settings.png" alt-text="Снимок экрана: удаление параметров столбцов.":::

Щелкните **Сохранить**. 

Наконец, выберите компонент **Оценка модели** и убедитесь, что флажок **Добавить столбцы оценки к выходным данным** снят. Чтобы сократить задержку, прогнозы отправляются обратно без входных данных.

:::image type="content" source="media/tutorial-power-bi/score-settings.png" alt-text="Снимок экрана: параметры компонента &quot;Оценка модели&quot;.":::

В верхней части холста выберите **Отправить**.

После успешного выполнения конвейера вывода можно развернуть модель в кластере вывода. Выберите **Развернуть**. 

В диалоговом окне **Настройка конечной точки для прогнозирования в реальном времени** щелкните **Развернуть новую конечную точку для прогнозирования в реальном времени**. Присвойте конечной точке имя *my-diabetes-model*. Выберите созданный ранее вывод и щелкните **Развернуть**:

:::image type="content" source="media/tutorial-power-bi/endpoint-settings.png" alt-text="Снимок экрана: параметры конечной точки для прогнозирования в реальном времени.":::
## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнали, как обучить и развернуть модель конструктора. В следующей части показано, как использовать (оценить) эту модель в Power BI.

> [!div class="nextstepaction"]
> [Руководство. Использование модели в Power BI](/power-bi/connect-data/service-aml-integrate?context=azure/machine-learning/context/ml-context)
