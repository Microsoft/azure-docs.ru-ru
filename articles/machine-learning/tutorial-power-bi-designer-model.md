---
title: Руководство. Создание прогнозной модели с помощью перетаскивания (часть 1 из 2)
titleSuffix: Azure Machine Learning
description: Узнайте, как создать и развернуть прогнозную модель машинного обучения с помощью конструктора, чтобы использовать ее для прогнозирования результатов в Microsoft Power BI.
services: machine-learning
ms.service: machine-learning
ms.subservice: core
ms.topic: tutorial
ms.author: samkemp
author: samuel100
ms.reviewer: sdgilley
ms.date: 12/11/2020
ms.openlocfilehash: f0e1ffe60069a2379f8eddab1aae74db2b4eac50
ms.sourcegitcommit: 1bdcaca5978c3a4929cccbc8dc42fc0c93ca7b30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/13/2020
ms.locfileid: "97370789"
---
# <a name="tutorial--power-bi-integration---drag-and-drop-to-create-the-predictive-model-part-1-of-2"></a>Руководство.  Интеграция Power BI. Создание прогнозной модели с помощью перетаскивания (часть 1 из 2)

В первой части этого руководства показано, как обучить и развернуть прогнозную модель машинного обучения с помощью конструктора Машинного обучения Azure — пользовательского интерфейса с поддержкой перетаскивания, для работы с которым не требуется писать много кода. Во второй части показано, как использовать модель для прогнозирования результатов в Microsoft Power BI.

Изучив это руководство, вы:

> [!div class="checklist"]
> * создадите вычислительный экземпляр Машинного обучения Azure;
> * создадите кластер вывода Машинного обучения Azure;
> * создадите набор данных;
> * обучите регрессионную модель;
> * развернете модель в конечной точке оценки в реальном времени.


Есть три способа создания и развертывания модели, которая будет использоваться в Power BI.  В этой статье рассматривается вариант Б — обучение и развертывание моделей с помощью конструктора.  Этот вариант предусматривает разработку модели с помощью конструктора (пользовательский интерфейс перетаскивания), при использовании которого не требуется писать много кода.  

Вместо этого можно использовать:

* [Вариант А. Обучение и развертывание моделей с помощью записных книжек](tutorial-power-bi-custom-model.md) — использование подхода code-first и записных книжек Jupyter, размещенных в Студии машинного обучения Azure.
* [Вариант В. Обучение и развертывание моделей с помощью автоматизированного машинного обучения](tutorial-power-bi-automated-model.md) — интерфейс для разработки, при использовании которого не нужно писать код и который полностью автоматизирует подготовку и обучение модели.

## <a name="prerequisites"></a>Предварительные требования

- Подписка Azure ([доступна бесплатная пробная версия](https://aka.ms/AMLFree)). 
- Рабочая область машинного обучения Azure. Если у вас еще нет рабочей области, см. инструкции по [созданию рабочей области Машинного обучения Azure](./how-to-manage-workspace.md#create-a-workspace).
- Начальные знания о рабочих процессах машинного обучения.


## <a name="create-compute-for-training-and-scoring"></a>Создание вычислительного экземпляра для обучения и оценки

В этом разделе показано, как создать *вычислительный экземпляр* для обучения моделей машинного обучения. Также вы создадите *кластер вывода* для размещения развернутой модели для оценки в реальном времени.

Войдите в [студию машинного обучения Azure](https://ml.azure.com), выберите **Вычислительная среда** в меню слева и щелкните **Создать**:

:::image type="content" source="media/tutorial-power-bi/create-new-compute.png" alt-text="Снимок экрана: создание вычислительного экземпляра":::

В открывшемся окне **Создание вычислительного экземпляра** укажите размер виртуальной машины (для работы с этим руководством выберите `Standard_D11_v2`) и щелкните **Далее**. На странице параметров укажите допустимое имя вычислительного экземпляра и щелкните **Создать**. 

>[!TIP]
> Вычислительный экземпляр также можно использовать для создания и выполнения записных книжек.

Для параметра **Состояние** вычислительного экземпляра будет отображаться значение **Создается**. Подготовка компьютера займет около 4 минут. В это время вы можете выбрать вкладку **Кластер вывода** на странице вычислительного экземпляра и щелкнуть **Создать**:

:::image type="content" source="media/tutorial-power-bi/create-cluster.png" alt-text="Снимок экрана: создание кластера вывода":::

На итоговой странице **Создание кластера вывода** укажите регион и размер виртуальной машины (для работы с этим руководством выберите `Standard_D11_v2`) и щелкните **Далее**. На странице **Настройка параметров**:

1. Укажите допустимое имя вычислительного ресурса.
1. Выберите **Разработка и тестирование** в качестве предназначения кластера (будет создан один узел для размещения развернутой модели).
1. Выберите **Создать**.

Для параметра **Состояние** кластера вывода будет отображаться значение **Создается**. Развертывание кластера с одним узлом займет около 4 минут.

## <a name="create-a-dataset"></a>Создание набора данных

В этом руководстве показано, как использовать набор данных [diabetes](https://www4.stat.ncsu.edu/~boos/var.select/diabetes.html), который доступен в [Открытых наборах данных Azure](https://azure.microsoft.com/services/open-datasets/).

Чтобы создать набор данных, в меню слева выберите **Наборы данных** и щелкните **Создать набор данных** — вы увидите следующие варианты:

:::image type="content" source="media/tutorial-power-bi/create-dataset.png" alt-text="Снимок экрана: создание набора данных":::.

Выберите **Из Открытых наборов данных** и на экране **Создание набора на основе Открытых наборов данных** сделайте следующее:

1. Введите *diabetes* на панели поиска.
1. Выберите **Пример: diabetes**.
1. Щелкните **Далее**.
1. Укажите имя набора данных — *diabetes*.
1. Выберите **Создать**.

Данные можно просмотреть, выбрав набор данных, и щелкнув **Просмотр**:

:::image type="content" source="media/tutorial-power-bi/explore-dataset.png" alt-text="Снимок экрана: изучение набора данных":::

Данные имеют 10 базовых входных переменных (например, возраст, пол, индекс массы тела, среднее кровяное давление и шесть показателей сыворотки крови) и одну целевую переменную с именем **Y** (количественный показатель развития диабета в единицах измерения за один год в сравнении с исходным значением).

## <a name="create-a-machine-learning-model-using-designer"></a>Создание модели Машинного обучения с помощью конструктора

После создания вычислительного экземпляра и наборов данных можно переходить к созданию модели машинного обучения с помощью конструктора. В Студии машинного обучения Azure выберите **Конструктор** и **Новый конвейер**:

:::image type="content" source="media/tutorial-power-bi/create-designer.png" alt-text="Снимок экрана: создание конвейера":::

На пустом *холсте* отобразится меню **Параметры**:

:::image type="content" source="media/tutorial-power-bi/select-compute.png" alt-text="Снимок экрана: выбор целевого объекта вычислений":::

В меню **Параметры** щелкните **Выберите целевой объект вычислений**, а затем укажите созданный ранее вычислительный экземпляр и щелкните **Сохранить**. Измените **имя черновика** на другое запоминающееся имя (например, *diabetes-model*) и введите описание.

Затем в списке ресурсов разверните узел **Наборы данных**, выберите набор данных **diabetes** и перетащите этот модуль на холст:

:::image type="content" source="media/tutorial-power-bi/drag-component.png" alt-text="Снимок экрана: перетаскивание компонента":::

Затем перетащите следующие компоненты на холст:

1. Линейная регрессия (находится в разделе **Алгоритмы машинного обучения**).
1. Обучение модели (находится в разделе **Обучение модели**).

Холст должен выглядеть следующим образом (обратите внимание, что в верхней и нижней части компонентов есть небольшие круги, которые выделены красным цветом и называются портами):

:::image type="content" source="media/tutorial-power-bi/connections.png" alt-text="Снимок экрана: отсоединенные компоненты":::
 
Далее необходимо *соединить* эти компоненты. Выберите порт в нижней части набора данных **diabetes** и перетащите его к правому порту в верхней части компонента **Обучение модели**. Выберите порт в нижней части компонента **Линейная регрессия** и перетащите его к левому порту в верхней части порта **Обучение модели**.

Выберите столбец в наборе данных, который будет использоваться как переменная метки (целевая) для прогнозирования. Выберите компонент **Обучение модели** и щелкните **Изменить столбец**. В диалоговом окне щелкните **Ввести имя столбца** и в раскрывающемся списке выберите **Y**:

:::image type="content" source="media/tutorial-power-bi/label-columns.png" alt-text="Снимок экрана: выбор столбца меток":::

Нажмите **Сохранить**. *Рабочий процесс* машинного обучения должен выглядеть так:

:::image type="content" source="media/tutorial-power-bi/connected-diagram.png" alt-text="Снимок экрана: соединенные компоненты":::

Выберите **Отправить** и щелкните **Создать** под экспериментом. Укажите имя эксперимента и щелкните **Отправить**.

>[!NOTE]
> Выполнение эксперимента при первом запуске займет около 5 минут. Последующие запуски выполняются гораздо быстрее — кэши в конструкторе уже выполнили компоненты, и задержка будет меньше.

После завершения эксперимента вы увидите следующее:

:::image type="content" source="media/tutorial-power-bi/completed-run.png" alt-text="Снимок экрана: завершенное выполнение":::

Чтобы просмотреть журналы эксперимента, выберите **Обучить модель** и щелкните **Выходные данные и журналы**.

## <a name="deploy-the-model"></a>Развертывание модели

Чтобы развернуть модель, выберите **Создать конвейер вывода** (находится в верхней части холста) и щелкните **Конвейер вывода в реальном времени**:

:::image type="content" source="media/tutorial-power-bi/pipeline.png" alt-text="Снимок экрана: конвейер вывода в реальном времени":::
 
Конвейер будет сжат до компонентов, требуемых для оценки модели. При оценке данных вы не будете знать значения целевой переменной, поэтому можно удалить **Y** из набора данных. Для этого добавьте на холст компонент **Выбор столбцов в наборе данных**. Соедините компонент, чтобы набор данных diabetes был входным. Результаты будут выведены в компонент **Оценка модели**:

:::image type="content" source="media/tutorial-power-bi/remove-column.png" alt-text="Снимок экрана: удаление столбца":::

Выберите компонент **Выбор столбцов в наборе данных** на холсте и щелкните **Изменить столбцы**. В диалоговом окне выбора столбцов выберите **По имени** и убедитесь, что выбраны все входные переменные, **кроме** целевой:

:::image type="content" source="media/tutorial-power-bi/removal-settings.png" alt-text="Снимок экрана: удаление параметров столбца":::

Нажмите **Сохранить**. Наконец, выберите компонент **Оценка модели** и убедитесь, что флажок **Добавлять столбцы оценки в вывод** снят (отправляться обратно будут только прогнозы, а не входные данные *и* прогнозы, что сокращает задержку):

:::image type="content" source="media/tutorial-power-bi/score-settings.png" alt-text="Снимок экрана: параметры компонента оценки модели":::

В верхней части холста выберите **Отправить**.

После успешного выполнения конвейера вывода можно развернуть модель в кластере вывода. Выберите **Развернуть**. Отобразится диалоговое окно **Настройка конечной точки для прогнозирования в реальном времени**. Выберите **Развернуть новую конечную точку для прогнозирования в реальном времени**, назовите конечную точку **my-diabetes-model**, выберите ранее созданный вывод и щелкните **Развернуть**:

:::image type="content" source="media/tutorial-power-bi/endpoint-settings.png" alt-text="Снимок экрана: параметры конечной точки для прогнозирования в реальном времени":::
## <a name="next-steps"></a>Дальнейшие действия

Из этого руководства вы узнали, как обучить и развернуть модель конструктора. В следующей части показано, как использовать (оценить) эту модель в Power BI.

> [!div class="nextstepaction"]
> [Руководство. Использование модели в Power BI](/power-bi/connect-data/service-aml-integrate?context=azure/machine-learning/context/ml-context)
