---
title: Создание голосового помощника с помощью Azure Percept DK и Azure Percept Audio
description: Узнайте, как создать и развернуть решение для распознавания речи без написания кода в Azure Percept DK.
author: elqu20
ms.author: v-elqu
ms.service: azure-percept
ms.topic: tutorial
ms.date: 02/17/2021
ms.custom: template-how-to
ms.openlocfilehash: 3c5e6fd62e4f4db9ccc1306d32d09b8338cbf963
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102098032"
---
# <a name="create-a-voice-assistant-with-azure-percept-dk-and-azure-percept-audio"></a>Создание голосового помощника с помощью Azure Percept DK и Azure Percept Audio

В этом учебнике вы создадите голосовой помощник из шаблона для использования с Azure Percept DK и Azure Percept Audio. Демоверсия голосового помощника выполняется в [Azure Percept Studio](https://go.microsoft.com/fwlink/?linkid=2135819) и содержит набор виртуальных объектов, управляемых голосом. Для управления объектом следует сказать ключевое слово (это может быть слово или короткая фраза), которое активирует устройство, а затем произнести команду. Каждый шаблон реагирует на определенный набор команд.

В этом руководстве рассматривается настройка устройств, создание голосового помощника и необходимых ресурсов [служб распознавания речи](https://docs.microsoft.com/azure/cognitive-services/speech-service/overview), тестирование голосового помощника, настройка ключевого слова и создание пользовательских ключевых слов.

## <a name="prerequisites"></a>Предварительные требования

- Azure Percept DK (DevKit).
- Azure Percept Audio.
- Динамик или наушники, которые можно подключить к аудиовходу 3,5 мм (необязательно)
- [Подписка Azure.](https://azure.microsoft.com/free/)
- [Выполненная настройка Azure Percept DK](./quickstart-percept-dk-set-up.md). Предполагается, что вы уже подключили DevKit к сети Wi-Fi, создали центр Интернета вещей и подключили к нему DevKit.
- [Настройка Azure Percept Audio](./quickstart-percept-audio-setup.md)


## <a name="create-a-voice-assistant-using-an-available-template"></a>Создание голосового помощника с помощью доступного шаблона

1. Перейдите в [Azure Percept Studio](https://go.microsoft.com/fwlink/?linkid=2135819).

1. Откройте вкладку **Demos & tutorials** (Демоверсии и учебники).

    :::image type="content" source="./media/tutorial-no-code-speech/portal-overview.png" alt-text="Снимок экрана: домашняя страница портала Azure.":::

1. Щелкните **Try out voice assistant templates** (Попробовать шаблоны голосового помощника) в разделе **Speech tutorials and demos** (Учебники и демоверсии для распознавания речи). В правой части экрана откроется окно.

1. Выполните в нем следующие действия.

    1. Из раскрывающегося меню **IoT Hub** (Центр Интернета вещей) выберите центр Интернета вещей, к которому подключено устройство DevKit.

    1. Из раскрывающегося меню **Device** (Устройство) выберите свое устройство DevKit.

    1. Выберите один из доступных шаблонов голосового помощника.

    1. Установите флажок **I agree to terms & conditions for this project** (Я принимаю условия для этого проекта).

    1. Нажмите кнопку **Создать**.

    :::image type="content" source="./media/tutorial-no-code-speech/template-creation.png" alt-text="Снимок экрана: создание голосового помощника с помощью шаблона.":::

1. После нажатия кнопки **Create** (Создать) на портале откроется новое окно для создания ресурса темы речи. Выполните в нем следующие действия.

    1. Выберите свою подписку Azure в поле **Subscription** (Подписка).

    1. Выберите предпочитаемую группу ресурсов из раскрывающегося меню **Resource group** (Группа ресурсов). Если вы хотите создать новую группу ресурсов для голосового помощника, щелкните **Create** (Создать) в раскрывающемся меню и следуйте инструкциям на экране.

    1. В поле **Application prefix** (Префикс приложения) введите имя. Это будет префикс для проекта и пользовательской команды.

    1. В разделе **Region** (Регион) выберите регион для развертывания ресурсов.

    1. В разделе **LUIS prediction pricing tier** (Ценовая категория службы прогнозирования LUIS) выберите **Standard** (Стандартный) (ценовая категория "Бесплатный" не поддерживает голосовые запросы).

    1. Нажмите кнопку **Создать** . Ресурсы для приложения голосового помощника будут развернуты в вашей подписке.

        > [!WARNING]
        > **НЕ** закрывайте это окно, пока портал не завершит развертывание ресурса. Преждевременное закрытие данного окна может привести к непредвиденному поведению голосового помощника. После развертывания ресурса отобразится демоверсия.

    :::image type="content" source="./media/tutorial-no-code-speech/resource-group.png" alt-text="Снимок экрана: окно выбора подписки и группы ресурсов.":::

## <a name="test-out-your-voice-assistant"></a>Тестирование голосового помощника

Чтобы взаимодействовать с голосовым помощником, произнесите ключевое слово, а затем — команду. Когда Ear SoM распознает ключевое слово, устройство издаст звуковой сигнал (который можно услышать, если подключены динамики или наушники), а индикаторы замигают синим цветом. Индикаторы будут быстро мигать синим цветом, пока команда обрабатывается. Ответ голосового помощника на вашу команду будет выведен в виде текста в окне демоверсии и воспроизведен через динамики или наушники. В качестве ключевого слова по умолчанию (приведенного рядом с **пользовательским ключевым словом**) задано слово "Computer", и каждый шаблон имеет набор совместимых команд для взаимодействия с виртуальными объектами в окне демоверсии. Например, если вы используете демоверсию для гостиничного бизнеса или здравоохранения, скажите "Computer, turn on TV", чтобы включить виртуальный телевизор.

:::image type="content" source="./media/tutorial-no-code-speech/hospitality-demo.png" alt-text="Снимок экрана: окно демоверсии для гостиничного бизнеса.":::

### <a name="hospitality-and-healthcare-demo-commands"></a>Команды демоверсий для гостиничного бизнеса и здравоохранения

В демоверсиях для гостиничного бизнеса и здравоохранения есть виртуальные телевизоры, светильники, жалюзи и термостаты, с которыми вы можете взаимодействовать. Поддерживаются следующие команды (и дополнительные варианты):

* "Turn on/off the lights" (Включить или выключить свет).
* "Turn on/off the TV" (Включить или выключить телевизор).
* "Turn on/off the AC" (Включить или выключить кондиционер).
* "Open/close the blinds" (Открыть или закрыть жалюзи).
* "Set temperature to X degrees" (Установить температуру в X градусов); (X — желаемая температура, например "75").

:::image type="content" source="./media/tutorial-no-code-speech/healthcare-demo.png" alt-text="Снимок экрана: окно демоверсии для здравоохранения.":::

### <a name="automotive-demo-commands"></a>Команды демоверсии для автомобиля

В демоверсии для автомобиля есть виртуальный обогреватель сидений, стеклообогреватель и термостат, с которыми можно взаимодействовать. Поддерживаются следующие команды (и дополнительные варианты):

* "Turn on/off the defroster" (Включить или выключить стеклообогреватель).
* "Turn on/off the seat warmer" (Включить или выключить обогреватель сидений).
* "Set temperature to X degrees" (Установить температуру в X градусов); (X — желаемая температура, например "75").
* "Increase/decrease the temperature by Y degrees" (Поднять или понизить температуру на Y градусов).


:::image type="content" source="./media/tutorial-no-code-speech/auto-demo.png" alt-text="Снимок экрана: окно демоверсии для автомобиля.":::

### <a name="inventory-demo-commands"></a>Команды демоверсии для инвентаризации

В демоверсии для инвентаризации есть виртуальные синие, желтые и зеленые коробки для взаимодействия с приложением виртуальной инвентаризации. Поддерживаются следующие команды (и дополнительные варианты):

* "Add/remove X boxes" (Добавить или удалить X коробок); (X — это количество коробок, например "4").
* "Order/ship X boxes" (Заказать или отправить X коробок).
* "How many boxes are in stock?" (Сколько коробок в наличии?)
* "Count Y boxes" (Подсчитать Y коробки); (Y — это цвет коробок, например "yellow" (желтый)).
* "Ship everything in stock" (Отправить все, что есть в наличии).


:::image type="content" source="./media/tutorial-no-code-speech/inventory-demo.png" alt-text="Снимок экрана: окно демоверсии для инвентаризации.":::

## <a name="configure-your-keyword"></a>Настройка ключевого слова

Можно настроить ключевое слово для приложения голосового помощника.

1. Щелкните **Change** (Изменить) рядом с полем **Custom Keyword** (Пользовательское ключевое слово) в окне демоверсии.

1. Выберите одно из доступных ключевых слов. Вы сможете выбрать любое из предложенных ключевых слов и всех созданных вами пользовательских ключевых слов.

1. Выберите команду **Сохранить**.

### <a name="create-a-custom-keyword"></a>Создание пользовательского ключевого слова

Можно создать собственное ключевое слово для голосового приложения. Обучение вашему пользовательскому ключевому слову может занять всего несколько минут.

1. Щелкните **+ Create Custom Keyword** (+ Создать пользовательское ключевое слово) в верхней части окна демоверсии. 

1. Введите нужное ключевое слово (отдельное слово или короткую фразу).

1. Выберите элемент **Speech resource** (Ресурс речи), который расположен возле пункта **Custom Command** (Пользовательская команда) в окне демоверсии и содержит префикс приложения.

1. Выберите команду **Сохранить**. 

## <a name="create-a-custom-command"></a>Создание пользовательской команды

Портал также предоставляет функциональные возможности для создания пользовательских команд с использованием существующих ресурсов службы "Речь". "Пользовательская команда" используется в самом приложении речевого помощника, а не в существующем приложении. Создавая пользовательскую команду, вы создаете новый проект для распознавания речи, который требует дополнительной разработки в [Speech Studio](https://speech.microsoft.com/).

Чтобы создать пользовательскую команду из окна демоверсии, щелкните **+ Create Custom Command** (+ Создать пользовательскую команду) в верхней части страницы и выполните следующие действия.

1. Введите имя пользовательской команды.

1. Введите описание проекта (необязательно).

1. Выберите предпочитаемый язык.

1. Выберите ресурс службы "Речь".

1. Выберите ресурс LUIS.

1. Выберите имеющийся ресурс разработки LUIS или создайте новый.

1. Нажмите кнопку **Создать**.

:::image type="content" source="./media/tutorial-no-code-speech/custom-commands.png" alt-text="Снимок экрана: окно создания пользовательских команд.":::

После создания пользовательской команды необходимо перейти в [Speech Studio](https://speech.microsoft.com/) для дальнейшей разработки. Если вы открыли Speech Studio и не видите свою пользовательскую команду в списке, выполните следующие действия.

1. На панели меню слева в Azure Percept Studio щелкните **Speech** (Речь) в разделе **AI Projects** (Проекты ИИ).

1. Выберите вкладку **Commands** (Команды).

    :::image type="content" source="./media/tutorial-no-code-speech/ai-projects.png" alt-text="Снимок экрана: список пользовательских команд, доступных для изменения.":::

1. Выберите пользовательскую команду, которую вы хотите разработать. Откроется проект в Speech Studio.

    :::image type="content" source="./media/tutorial-no-code-speech/speech-studio.png" alt-text="Снимок экрана: начальный экран Speech Studio.":::

Дополнительные сведения о разработке пользовательских команд см. в [документации по службе "Речь"](https://docs.microsoft.com/azure/cognitive-services/speech-service/custom-commands).

## <a name="troubleshooting"></a>Устранение неполадок

### <a name="voice-assistant-was-created-but-does-not-respond-to-commands"></a>Голосовой помощник был создан, но не отвечает на команды

Проверьте светодиодные индикаторы на доске высветки.

* Три горящих синих индикатора означают, что голосовой помощник готов к работе и ожидает ключевое слово.
* Если центральный индикатор (L02) горит белым цветом, то инициализация устройства DevKit завершена и его необходимо настроить с помощью ключевого слова.
* Если центральный светодиодный индикатор (L02) мигает белым, инициализация модели Audio SoM еще не завершилась. Инициализация может занять несколько минут.

Дополнительные сведения о светодиодных индикаторах см. в [статье об индикаторах](./audio-button-led-behavior.md).

### <a name="voice-assistant-does-not-respond-to-a-custom-keyword-created-in-speech-studio"></a>Голосовой помощник не реагирует на пользовательское ключевое слово, созданное в Speech Studio

Это может произойти, если модуль распознавания речи устарел. Выполните следующие действия, чтобы обновить модуль распознавания речи до последней версии.

1. Щелкните **Devices** (Устройства) на панели меню слева на домашней странице Azure Percept Studio.

1. Найдите и выберите свое устройство.

    :::image type="content" source="./media/tutorial-no-code-speech/devices.png" alt-text="Снимок экрана: список устройств в Azure Percept Studio.":::

1. В окне устройства выберите вкладку **Speech** (Речь).

1. Проверьте версию модуля распознавания речи. Если доступно обновление, рядом с номером версии вы увидите кнопку **Update** (Обновить).

1. Нажмите кнопку **Update** (Обновить), чтобы развернуть обновление модуля распознавания речи. Процесс обновления обычно занимает 2–3 минуты.

## <a name="clean-up-resources"></a>Очистка ресурсов

Завершив работу с приложением голосового помощника, выполните следующие действия, чтобы очистить ресурсы службы "Речь", развернутые в ходе работы с этим учебником.

1. На [портале Azure](https://portal.azure.com) выберите **Группы ресурсов** на панели меню слева или введите "Группы ресурсов" в строке поиска.

    :::image type="content" source="./media/tutorial-no-code-speech/azure-portal.png" alt-text="Снимок экрана: домашняя страница портала Azure, на которой отображается панель меню слева и элемент &quot;Группы ресурсов&quot;.":::

1. Выберите нужную группу ресурсов.

1. Выберите все шесть ресурсов, которые содержат ваш префикс приложения, и щелкните значок **Удалить** на панели меню вверху.
\
    :::image type="content" source="./media/tutorial-no-code-speech/select-resources.png" alt-text="Снимок экрана: ресурсы службы &quot;Речь&quot;, выбранные для удаления.":::

1. Чтобы подтвердить удаление, в поле подтверждения введите **yes** (Да), убедитесь, что выбраны правильные ресурсы, и нажмите кнопку **Удалить**.

    :::image type="content" source="./media/tutorial-no-code-speech/delete-confirmation.png" alt-text="Снимок экрана: окно подтверждения удаления.":::

> [!WARNING]
> Будут удалены все пользовательские ключевые слова, созданных с помощью удаляемых ресурсов службы "Речь", и демоверсия голосового помощника больше не будет работать.

## <a name="next-steps"></a>Next Steps

Теперь, когда вы создали решение для распознавания речи без написания кода, попробуйте создать [решение для визуального распознавания без написания кода](./tutorial-nocode-vision.md) для Azure Percept DK.
