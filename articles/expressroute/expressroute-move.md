---
title: 'ExpressRoute: Перемещение цепей из классической модели в Azure Resource Manager'
description: Узнайте, что происходит при перемещении канала Azure ExpressRoute из классической модели в модель развертывания Azure Resource Manager.
services: expressroute
author: duongau
ms.service: expressroute
ms.topic: how-to
ms.date: 12/15/2020
ms.author: duau
ms.openlocfilehash: dcba2e9de2b37e8c432f94781b3c4c369ad52395
ms.sourcegitcommit: 02ed9acd4390b86c8432cad29075e2204f6b1bc3
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/29/2020
ms.locfileid: "97807947"
---
# <a name="moving-expressroute-circuits-from-the-classic-to-the-resource-manager-deployment-model"></a>Перемещение каналов ExpressRoute из классической модели развертывания в модель развертывания с помощью Resource Manager
В этой статье приводятся общие сведения о том, что происходит при перемещении канала Azure ExpressRoute из классической модели в модель развертывания Azure Resource Manager.

Вы можете использовать один канал ExpressRoute для подключения к виртуальным сетям, которые развернуты как в классической модели, так и в моделях развертывания диспетчер ресурсов.

![Канал ExpressRoute, связанный с виртуальными сетями в обеих моделях развертывания](./media/expressroute-move/expressroute-move-1.png)

## <a name="expressroute-circuits-that-are-created-in-the-classic-deployment-model"></a>Каналы ExpressRoute, созданные с помощью классической модели развертывания
Каналы ExpressRoute, созданные в классической модели развертывания, необходимо сначала перенести в модель развертывания диспетчер ресурсов. Только затем может быть разрешено подключение к классическим и диспетчер ресурсов моделям развертывания. Подключение не теряется или нарушено при перемещении подключения. Все связи между виртуальными сетями в классической модели развертывания в рамках одной и той же подписки и между подписками сохраняются.

После успешного завершения перемещения канал ExpressRoute будет работать точно так же, как канал ExpressRoute, созданный в модели развертывания диспетчер ресурсов. Теперь вы можете подключаться к виртуальным сетям в модели развертывания с помощью Resource Manager.

После перемещения канала ExpressRoute в модель развертывания с помощью диспетчера ресурсов можно управлять только в модели развертывания диспетчер ресурсов. Операции управления пиринга, обновления свойств канала и удаления каналов будут доступны только с помощью модели развертывания диспетчер ресурсов. Дополнительные сведения о том, как можно управлять доступом к обеим моделям развертывания, см. в следующем разделе.

Для перемещения канала в модель развертывания диспетчер ресурсов не требуется включать поставщик услуг подключения.

## <a name="expressroute-circuits-that-are-created-in-the-resource-manager-deployment-model"></a>Каналы ExpressRoute, созданные с использованием модели развертывания с помощью Resource Manager
Каналы ExpressRoute, созданные с использованием модели развертывания с помощью Resource Manager, можно сделать доступными для обеих моделей развертывания. Любой канал ExpressRoute в подписке можно настроить на доступ из обеих моделей развертывания.

* Каналы ExpressRoute, созданные в модели развертывания диспетчер ресурсов, по умолчанию не имеют доступа к классической модели развертывания.
* Каналы ExpressRoute, которые были перемещены из классической модели развертывания в модель развертывания диспетчер ресурсов, по умолчанию доступны из обеих моделей развертывания.
* Канал ExpressRoute всегда имеет доступ к модели развертывания диспетчер ресурсов, независимо от того, была ли она создана в диспетчер ресурсов или классической модели развертывания. Вы можете создавать подключения к виртуальным сетям, выполнив инструкции по [связыванию виртуальных сетей](expressroute-howto-linkvnet-arm.md).
* Доступ к классической модели развертывания контролируется параметром **allowClassicOperations** в канале ExpressRoute.

> [!IMPORTANT]
> Применяются все квоты, описанные на странице об [ограничениях службы](../azure-resource-manager/management/azure-subscription-service-limits.md) . Например, в стандартном канале может быть установлено не более 10 связей или подключений между виртуальными сетями как при классической модели, так и модели развертывания с помощью Resource Manager.
> 
> 

## <a name="controlling-access-to-the-classic-deployment-model"></a>Управление доступом к классической модели развертывания
Канал ExpressRoute можно использовать для связи с виртуальными сетями в обеих моделях развертывания. Для этого задайте параметр **allowClassicOperations** в канале ExpressRoute.

Задав для параметра **allowClassicOperations** значение TRUE, можно связать виртуальные сети обеих моделей развертывания с каналом ExpressRoute. 
* Сведения о связывании виртуальных сетей в классической модели развертывания см. в статье [как связать виртуальные сети с классической моделью развертывания](expressroute-howto-linkvnet-classic.md).
* Сведения о связывании виртуальных сетей в модели развертывания диспетчер ресурсов см. в статье [связывание виртуальных сетей в модели развертывания Диспетчер ресурсов](expressroute-howto-linkvnet-arm.md).

Если задать для параметра **allowClassicOperations** значение FALSE, доступ к каналу из классической модели развертывания блокируется. Однако все виртуальные сети, связанные в классической модели развертывания, по-прежнему сохраняются. Канал ExpressRoute не отображается в классической модели развертывания.

## <a name="supported-operations-in-the-classic-deployment-model"></a>Поддерживаемые операции в классической модели развертывания
Если задать для параметра **allowClassicOperations** значение TRUE, в канале ExpressRoute поддерживаются следующие классические операции:

* получение сведений о канале ExpressRoute;
* создание, обновление, получение и удаление связей виртуальных сетей с классическими виртуальными сетями;
* создание, обновление, получение и удаление авторизации связей с виртуальными сетями для подключений между подписками.

Однако если **allowClassicOperations** имеет значение true, нельзя выполнять следующие классические операции:

* создание, обновление, получение и удаление частных и общедоступных пирингов протокола BGP Azure, а также пиринга Майкрософт;
* удаление каналов ExpressRoute.

## <a name="communication-between-the-classic-and-the-resource-manager-deployment-models"></a>Взаимодействие классической модели и модели развертывания с помощью Resource Manager
Канал ExpressRoute служит в качестве моста между классической моделью и моделью развертывания с помощью Resource Manager. Трафик между виртуальными сетями для обеих моделей развертывания может проходить через канал ExpressRoute, если обе виртуальные сети связаны с одним и тем же каналом.

Общая пропускная способность ограничена пропускной способностью шлюза виртуальной сети. В таких случаях трафик не вводит сети или сети поставщика услуг подключения. Перемещение трафика между виртуальными сетями будет полностью осуществляться в сети Майкрософт.

## <a name="access-to-azure-public-and-microsoft-peering-resources"></a>Доступ к ресурсам общедоступного пиринга Azure и пиринга Майкрософт
Доступ к ресурсам, который обычно осуществляется при помощи общедоступного пиринга Azure и пиринга Майкрософт, не будет прерываться.  

## <a name="whats-supported"></a>Поддерживаемые функции
В этом разделе описаны функции, которые поддерживаются при использовании каналов ExpressRoute:

* Вы можете использовать один канал ExpressRoute, чтобы получить доступ к виртуальным сетям, развернутым как в классической модели, так и в модели с использованием Resource Manager.
* Канал ExpressRoute можно переместить из классической модели в модель развертывания с помощью Resource Manager. После перемещения канал ExpressRoute будет продолжать работать так же, как и любой другой канал ExpressRoute, созданный в модели развертывания диспетчер ресурсов.
* Перемещение поддерживает только канал ExpressRoute. Эта операция не предусматривает перемещение связей, виртуальных сетей и VPN-шлюзов канала.
* После перемещения канала ExpressRoute в модель развертывания с помощью Resource Manager управлять жизненным циклом канала можно только при помощи этой модели. Это означает, что вы можете выполнять такие операции, как добавление, обновление и удаление пиринга, обновление свойств канала (например, пропускная способность, номер SKU и тип выставления счетов) и удаление каналов только в модели развертывания диспетчер ресурсов.
* Канал ExpressRoute служит в качестве моста между классической моделью и моделью развертывания с помощью Resource Manager. Трафик между виртуальными машинами в классических виртуальных сетях и виртуальных машинах в диспетчер ресурсов виртуальных сетях может взаимодействовать через ExpressRoute, если обе виртуальные сети связаны с одним каналом ExpressRoute.
* Подключение между подписками поддерживается в классической модели и модели развертывания с помощью Resource Manager.
* После перемещения канала ExpressRoute из классической модели в модель Azure Resource Manager вы можете [перенести виртуальные сети, связанные с каналом ExpressRoute](expressroute-migration-classic-resource-manager.md).

## <a name="whats-not-supported"></a>Что не поддерживается
В этом разделе описаны функции, которые не поддерживаются при использовании каналов ExpressRoute:

* Управление жизненным циклом канала ExpressRoute в классической модели развертывания.
* Поддержка управления доступом на основе ролей Azure (Azure RBAC) для классической модели развертывания. Вы не можете запускать элементы управления RBAC Azure в цепи в классической модели развертывания. Любой администратор или соадминистратор подписки может связать виртуальную сеть с каналом или удалить связь между ними.

## <a name="configuration"></a>Параметр Configuration
Следуйте указаниям в статье [Перемещение каналов ExpressRoute из классической модели развертывания в модель Resource Manager](expressroute-howto-move-arm.md).

## <a name="next-steps"></a>Дальнейшие действия
* [Перенос связанных виртуальных сетей ExpressRoute из классической модели на модель Resource Manager](expressroute-migration-classic-resource-manager.md)
* Сведения о рабочем процессе см. в статье [Процедуры ExpressRoute для подготовки каналов и состояний каналов](expressroute-workflows.md).
* Чтобы создать подключение ExpressRoute, выполните действия в следующих статьях:
  
  * [Создание канала ExpressRoute](expressroute-howto-circuit-arm.md)
  * [Настройка маршрутизации](expressroute-howto-routing-arm.md)
  * [Связывание виртуальной сети с каналом ExpressRoute](expressroute-howto-linkvnet-arm.md)

