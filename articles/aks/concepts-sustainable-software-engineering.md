---
title: Основные понятия — устойчивое проектирование программного обеспечения в Azure Kubernetes Services (AKS)
description: Сведения о устойчивом проектировании программного обеспечения в службе Azure Kubernetes (AKS).
services: container-service
ms.topic: conceptual
ms.date: 08/26/2020
ms.openlocfilehash: e179b49879b78b2bab738407984c0f50d161114b
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100572672"
---
# <a name="sustainable-software-engineering-principles-in-azure-kubernetes-service-aks"></a>Устойчивые принципы проектирования программного обеспечения в службе Azure Kubernetes (AKS)

Устойчивые принципы проектирования программного обеспечения — это набор компетенций, помогающих определять, собирать и выполнять устойчивые приложения. Общая цель состоит в том, чтобы сократить объем всех аспектов вашего приложения. [Принципы устойчивого проектирования программного обеспечения][principles-sse] имеют общие сведения о принципах устойчивого проектирования программного обеспечения.

Важно понимать, что разумным проектированием программного обеспечения является смена приоритетов и фокуса. Во многих случаях программное обеспечение разработано и выполняется в соответствии с высокой производительностью и низкой задержкой. Устойчивое проектирование программного обеспечения посвящено уменьшению как можно больше выбросов углерода. В некоторых случаях применение устойчивых принципов проектирования программного обеспечения может обеспечить более высокую производительность или снизить задержку, например, уменьшение общего сетевого пути. В других случаях уменьшение выбросов углекислого излучения может привести к снижению производительности или увеличению задержки, например к задержке рабочих нагрузок с низким приоритетом. Прежде чем приступать к применению устойчивых принципов проектирования программного обеспечения к приложению, ознакомьтесь с приоритетами, потребностями и компромиссами вашего приложения.

## <a name="measure-and-optimize"></a>Измерение и оптимизация

Чтобы уменьшить объем данных в кластерах AKS, необходимо понять, как используются ресурсы кластера. [Azure Monitor][azure-monitor] предоставляет сведения об использовании ресурсов кластера, например об использовании памяти и ЦП. Эти данные могут помочь проинформировать ваши решения об уменьшении объема данных в кластере и оценить влияние изменений. Вы также можете установить [Калькулятор Microsoft устойчивости][sustainability-calculator] , чтобы увидеть все ресурсы Azure.

## <a name="increase-resource-utilization"></a>Увеличение использования ресурсов

Одним из подходов к снижению объема работы является сокращение времени простоя для ресурсов вычислений. Сокращение времени простоя предполагает увеличение использования ресурсов вычислений. Например, если в кластере имеется четыре узла, каждый из которых работает под емкостью 50%, все четыре узла будут иметь неактивное значение 50% неиспользуемая емкость. Если вы сократили кластер до трех узлов, то одна и та же Рабочая нагрузка приведет к тому, что три узла будут работать с емкостью 67%, уменьшая неиспользуемую емкость до 33% на каждом узле и увеличивая эффективность использования.

> [!IMPORTANT]
> При рассмотрении внесения изменений в ресурсы в кластере убедитесь, что [Пулы системы][system-pools] имеют достаточно ресурсов для поддержания стабильности основных системных компонентов кластера. Никогда не уменьшайте ресурсы кластера до точки, в которой кластер может стать нестабильным.

После просмотра использования кластера рассмотрите возможность использования функций, предлагаемых [несколькими пулами узлов][multiple-node-pools]. Можно использовать [размер узла][node-sizing] для определения пулов узлов с определенными профилями ЦП и памяти, что позволяет адаптировать узлы к потребностям рабочей нагрузки. Определение размера узлов в целях рабочей нагрузки может помочь при выполнении нескольких узлов с более высоким уровнем использования. Вы также можете [настроить масштаб кластера и использовать][scale] [Горизонтальный Автомасштабирование Pod][scale-horizontal] и [Автоматическое масштабирование кластера в соответствии][scale-auto] с конфигурацией. Управление масштабированием кластера может помочь в обеспечении высокой загрузки всех узлов с сохранением изменений рабочей нагрузки кластера. В случаях, когда Рабочая нагрузка чувствительна к внезапному перерыву или прекращению работы, можно использовать [плашечные пулы][spot-pools] , чтобы воспользоваться преимуществами бездействующей емкости в Azure. Например, плашечные пулы могут хорошо работать в пакетных заданиях или средах разработки.

Увеличение использования может также сократить количество узлов, что снижает энергопотребление, потребляемое [резервированием ресурсов на каждом узле][resource-reservations].

Также проверьте *запросы* ЦП и памяти и *ограничения* в манифестах Kubernetes приложений. По мере уменьшения этих значений для памяти и ЦП в кластере будут доступны дополнительные ресурсы памяти и ЦП для выполнения других рабочих нагрузок. При выполнении дополнительных рабочих нагрузок с меньшим объемом ЦП и памяти кластер становится более плотным, что повышает эффективность использования. При уменьшении объема ЦП и памяти для приложений поведение приложений может стать неработоспособным или нестабильным, если задано слишком низкое значение. Перед изменением *запросов* ЦП и памяти и *ограничений* рекомендуется выполнить некоторые тесты теста производительности, чтобы понять, правильно ли заданы эти значения. Более того, не уменьшайте эти значения до момента, когда приложение станет нестабильным.

## <a name="reduce-network-travel"></a>Уменьшение сетевого пути

Уменьшение количества запросов на расстояние и ответов, отправляемых в кластер, и из него, как правило, сокращает потребление электроэнергии устройствами сети и сокращает выбросы. После проверки сетевого трафика рассмотрите возможность создания кластеров [в регионах][regions] ближе к источнику сетевого трафика. [Диспетчер трафика Azure][azure-traffic-manager] также можно использовать для маршрутизации трафика в ближайший кластер и [группы размещения][proiximity-placement-groups] , чтобы снизить расстояние между ресурсами Azure.

> [!IMPORTANT]
> Принимая во внимание внесение изменений в сети кластера, не уменьшайте нагрузку на сеть за счет требований к рабочей нагрузке. Например, использование [зон доступности][availability-zones] приводит к увеличению сети в кластере, но использование этой функции может потребоваться для удовлетворения требований рабочей нагрузки.

## <a name="demand-shaping"></a>Формирование спроса

По возможности рассмотрите возможность сдвига ресурсов кластера на время или регионы, в которых можно использовать избыточную емкость. Например, можно изменить время или регион для пакетного задания, чтобы запустить или использовать [плашечные пулы][spot-pools]. Также рекомендуется выполнить рефакторинг приложения, чтобы использовать очередь для отсчета выполняющихся рабочих нагрузок, которые не требуют немедленной обработки.

## <a name="next-steps"></a>Дальнейшие шаги

Дополнительные сведения о функциях AKS, упомянутых в этой статье:

* [Несколько пулов узлов][multiple-node-pools]
* [Размер узла][node-sizing]
* [Масштабирование кластера][scale]
* [Средство горизонтального автомасштабирования объектов pod][scale-horizontal]
* [Средство автомасштабирования кластера][scale-auto]
* [Плашечные пулы][spot-pools]
* [Пулы систем][system-pools]
* [Резервирование ресурсов][resource-reservations]
* [Группы размещения близкого взаимодействия][proiximity-placement-groups]
* [Зоны доступности][availability-zones]

[availability-zones]: availability-zones.md
[azure-monitor]: ../azure-monitor/containers/container-insights-overview.md
[azure-traffic-manager]: ../traffic-manager/traffic-manager-overview.md
[proiximity-placement-groups]: reduce-latency-ppg.md
[regions]: faq.md#which-azure-regions-currently-provide-aks
[resource-reservations]: concepts-clusters-workloads.md#resource-reservations
[scale]: concepts-scale.md
[scale-auto]: concepts-scale.md#cluster-autoscaler
[scale-horizontal]: concepts-scale.md#horizontal-pod-autoscaler
[spot-pools]: spot-node-pool.md
[multiple-node-pools]: use-multiple-node-pools.md
[node-sizing]: use-multiple-node-pools.md#specify-a-vm-size-for-a-node-pool
[sustainability-calculator]: https://azure.microsoft.com/blog/microsoft-sustainability-calculator-helps-enterprises-analyze-the-carbon-emissions-of-their-it-infrastructure/
[system-pools]: use-system-pools.md
[principles-sse]: https://docs.microsoft.com/learn/modules/sustainable-software-engineering-overview/