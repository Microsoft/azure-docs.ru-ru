---
title: Поддерживаемые версии Kubernetes в Службе Azure Kubernetes
description: Сведения о политике поддержки версии Kubernetes и жизненном цикле кластеров в Службе Azure Kubernetes (AKS).
services: container-service
ms.topic: article
ms.date: 09/08/2020
author: palma21
ms.author: jpalma
ms.openlocfilehash: 53093edb1d3c142336f06ec8544aaa7b55e37477
ms.sourcegitcommit: 8a74ab1beba4522367aef8cb39c92c1147d5ec13
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/20/2021
ms.locfileid: "98611259"
---
# <a name="supported-kubernetes-versions-in-azure-kubernetes-service-aks"></a>Поддерживаемые версии Kubernetes в Службе Azure Kubernetes (AKS)

Сообщество Kubernetes выпускает дополнительные версии примерно каждые три месяца. Недавно сообщество Kubernetes [увеличило окно поддержки для каждой версии с 9 месяцев до 12 месяцев](https://kubernetes.io/blog/2020/08/31/kubernetes-1-19-feature-one-year-support/), начиная с версии 1,19. Эти выпуски содержат новые функции и улучшения. Выпуски исправлений происходят чаще (иногда еженедельно) и предназначены для исправления критических ошибок в дополнительной версии. Эти выпуски исправлений включают исправления уязвимостей в системе безопасности или серьезные ошибки.

## <a name="kubernetes-versions"></a>Версии Kubernetes

Kubernetes использует стандартную схему управления версиями [семантического управления версиями](https://semver.org/) . Это означает, что каждая версия Kubernetes соответствует схеме нумерации:

```
[major].[minor].[patch]

Example:
  1.17.7
  1.17.8
```

Каждое число в версии указывает на общую совместимость с предыдущей версией:

* Основные версии изменяются, когда несовместимые изменения API или обратная совместимость могут быть разорваны.
* Дополнительные версии изменяются при внесении изменений в функциональность, обратная совместимость с другими вспомогательными выпусками.
* Изменения версий исправления при исправлении ошибок, совместимых с обратной совместимостью.

Пользователи должны будут запускать последнюю версию исправления дополнительной версии, например, если ваш производственный кластер включен **`1.17.7`** и **`1.17.8`** является последней доступной версией исправления, доступной для ряда *1,17* , следует выполнить обновление до **`1.17.8`** , как только это станет возможным, чтобы гарантировать, что кластер полностью обновлен и поддерживается.

## <a name="kubernetes-version-support-policy"></a>Политика поддержки версии Kubernetes

AKS определяет общедоступную версию в виде версии, включенной во все измерения уровня обслуживания или SLA, а также если она доступна во всех регионах. AKS поддерживает три общедоступных промежуточных версии Kubernetes:

* Последний общедоступный номер версии, выпущенный в AKS (который мы будем называть N).
* Две предыдущие промежуточные версии.
* Каждая поддерживаемая дополнительная версия также поддерживает не более двух (2) стабильных исправлений.
* AKS также может поддерживать предварительные версии, которые явно помечены и подчиняются [условиям предварительного просмотра][preview-terms].

> [!NOTE]
> AKS использует методы безопасного развертывания, которые предполагают постепенное развертывание области. Это означает, что новый выпуск может занять до 10 рабочих дней или новая версия будет доступна во всех регионах.

Поддерживаемое окно версий Kubernetes в AKS называется "N-2": (N (последний выпуск) — 2 (дополнительные версии)).

Например, если в AKS появились *1.17.* сегодня, поддержка предоставляется для следующих версий:

Новая дополнительная версия    |    Список поддерживаемых версий
-----------------    |    ----------------------
1.17. a               |    1.17. a, 1.17. b, 1.16. c, 1.16. d, 1,15 доллара. e, 1,15 доллара. f

Где ". Letter" является репрезентативной версией исправления.

При введении новой дополнительной версии не рекомендуется использовать и удалять самые старые дополнительные версии и исправления. Например, если текущий список поддерживаемых версий:

```
1.17.a
1.17.b
1.16.c
1.16.d
1.15.e
1.15.f
```

И AKS выпусков 1,18. \* это означает, что все 1,15. \* версии будут удалены, а поддержка будет прекращена в течение 30 дней.

> [!NOTE]
> Обратите внимание, что если клиенты работают в неподдерживаемой версии Kubernetes, они получат запрос на обновление при запросе поддержки кластера. В кластерах с неподдерживаемыми выпусками Kubernetes не включены [политики поддержки AKS](./support-policies.md).

Кроме того, AKS поддерживает не более двух выпусков **исправлений** для данной дополнительной версии. С учетом следующих поддерживаемых версий:

```
Current Supported Version List
------------------------------
1.17.8, 1.17.7, 1.16.10, 1.16.9
```

Если AKS выпуски `1.17.9` и `1.16.11` , самые старые версии исправления являются устаревшими и удалены, а список поддерживаемых версий выглядит следующим образом:

```
New Supported Version List
----------------------
1.17.*9*, 1.17.*8*, 1.16.*11*, 1.16.*10*
```

### <a name="supported-kubectl-versions"></a>Поддерживаемые `kubectl` версии

Можно использовать одну младшую версию более старой или более поздней `kubectl` относительно версии *KUBE-аписервер* , которая соответствует [политике поддержки Kubernetes для kubectl](https://kubernetes.io/docs/setup/release/version-skew-policy/#kubectl).

Например, если *KUBE-аписервер* находится в *1,17*, то можно использовать версии *1,16* — *1,18* `kubectl` с таким *KUBE-аписервер*.

Чтобы установить или обновить версию `kubectl` , запустите `az aks install-cli` .

## <a name="release-and-deprecation-process"></a>Процесс выпуска и устаревания

Вы можете ссылаться на будущие выпуски версий и устаревшие версии в [календаре выпуска AKS Kubernetes](#aks-kubernetes-release-calendar).

Для новых **вспомогательных** версий Kubernetes
1. AKS публикует предварительное объявление с запланированной датой выпуска новой версии и устаревшей версией старой версии в [заметках о выпуске AKS](https://aka.ms/aks/releasenotes) по крайней мере через 30 дней до удаления.
2. AKS публикует [уведомление о работоспособности службы](../service-health/service-health-overview.md) , доступное всем пользователям с AKS и доступом к порталу, и отправляет сообщение электронной почты администраторам подписки с запланированными датами удаления версий.
````
To find out who is your subscription administrators or to change it, please refer to [manage Azure subscriptions](https://docs.microsoft.com/azure/cost-management-billing/manage/add-change-subscription-administrator#assign-a-subscription-administrator).
````
3. У пользователей **30 дней** с момента удаления версии для обновления до поддерживаемой версии, чтобы продолжить получать поддержку.

Для новых версий **исправлений** Kubernetes
  * Из-за несрочного характера версий исправлений они могут быть добавлены в службу по мере их появления.
  * Как правило, AKS не выполняет широкую связь для выпуска новых версий исправлений. Однако AKS постоянно отслеживает и проверяет наличие доступных исправлений CVE, чтобы своевременно поддерживать их в AKS. Если обнаружено критическое исправление или требуется действие пользователя, AKS уведомит пользователей о необходимости обновления до нового доступного исправления.
  * У пользователей **30 дней** с момента удаления исправления из AKS для обновления до поддерживаемого исправления и продолжения поддержки.

### <a name="supported-versions-policy-exceptions"></a>Исключения политики поддерживаемых версий

AKS оставляет за собой право добавлять или удалять новые или существующие версии, которые были обнаружены, чтобы иметь один или несколько критически важных производственных ошибок или проблем безопасности без предварительного уведомления.

Определенные выпуски исправлений могут быть пропущены или ускорены в зависимости от серьезности ошибки или проблемы безопасности.

## <a name="azure-portal-and-cli-versions"></a>Версии портал Azure и CLI

При развертывании кластера AKS на портале или с Azure CLI кластер по умолчанию устанавливается в N-1 дополнительный номер версии и Последнее исправление. Например, если AKS поддерживает *1.17. a*, *1.17. b*, *1.16. c*, *1.16. d*, *1,15 доллара. e* и *1,15 доллара. f*, выбранная версия по умолчанию — *1.16. c*.

Чтобы узнать, какие версии доступны в настоящее время для вашей подписки и региона, используйте команду [​​az aks get-versions][az-aks-get-versions]. В следующем примере перечислены доступные версии Kubernetes для региона *EastUS*:

```azurecli-interactive
az aks get-versions --location eastus --output table
```

## <a name="aks-kubernetes-release-calendar"></a>Календарь выпуска AKS Kubernetes

Журнал предыдущих выпусков см. в разделе [Kubernetes](https://en.wikipedia.org/wiki/Kubernetes#History).

|  Версия K8s | Вышестоящий выпуск  | Предварительная версия AKS  | AKS ДЖ  | Окончание срока службы |
|--------------|-------------------|--------------|---------|-------------|
| 1.16  | Сен-19-19  | Янв 2019   | Мар 2020  | Янв 2021| 
| 1,17  | Dec-09-19  | Янв 2019   | Июл 2020  | 1,20 ДЖ | 
| 1,18  | Мар-23-20  | Май 2020 г.   | Авг 2020  | 1,21 ДЖ | 
| 1,19  | Авг-04-20  | Sep 2020   | 2020 ноября  | 1,22 ДЖ | 
| 1,20  | Dec-08-20  | Янв 2021   | Мар 2021  | 1,23 ДЖ |
| 1,21  | Апр-08-21 * | Май 2021 г.   | Июл 2021  | 1,24 ДЖ |

\* Вышестоящий выпуск Kubernetes 1,21 может быть изменен в качестве вышестоящего календарные, который еще должен быть завершен.


## <a name="faq"></a>ВОПРОСЫ И ОТВЕТЫ

**Как часто следует ждать обновления версий Kubernetes, чтобы поддерживать поддержку?**

С учетом Kubernetes 1,19, [сообщество с открытым исходным кодом расширило поддержку 1 года](https://kubernetes.io/blog/2020/08/31/kubernetes-1-19-feature-one-year-support/). AKS фиксируется для включения исправлений и поддержки, совпадающих с вышестоящими обязательствами, как минимум. Это означает, что начиная с кластеров AKS в 1,19, вы сможете выполнить обновление как минимум раз в год, чтобы остаться в поддерживаемой версии. Для версий на 1,18 или более ранних версиях окно поддержки остается в течение 9 месяцев, что требует обновления каждые 9 месяцев для поддержания поддерживаемой версии. Настоятельно рекомендуется регулярно тестировать новые версии и подготовиться к обновлению до более новых версий, чтобы захватить последние стабильные улучшения в Kubernetes.

**Что происходит, когда пользователь обновляет кластер Kubernetes с неподдерживаемой дополнительной версией?**

Если вы используете версию *n-3* или более раннюю, это означает, что вы находитесь за пределами службы поддержки и вам будет предложено выполнить обновление. Если обновление с версии n-3 до n-2 прошло успешную работу, вы вернетесь в наши политики поддержки. Пример:

- Если самая старая поддерживаемая версия AKS — *1,15 доллара. a* , а вы находитесь в *1.14. b* или более ранней версии, вы находитесь за пределами службы поддержки.
- При обновлении с *1.14. b* до *1,15 доллара. a* или более поздней версии вы вернетесь в наши политики поддержки.

Переход на более раннюю версию не поддерживается.

**Что означает "за пределами поддержки"**

"Вне поддержки" означает, что версия, которую вы используете, находится вне списка поддерживаемых версий, и вам будет предложено обновить кластер до поддерживаемой версии при запросе поддержки, если только вы не находитесь в течение 30-дневного льготного периода после устаревания версии. Кроме того, AKS не делает никакой среды выполнения или других гарантий для кластеров за пределами списка поддерживаемых версий.

**Что происходит, когда пользователь масштабирует кластер Kubernetes с неподдерживаемой дополнительной версией?**

Для небольших версий, которые не поддерживаются AKS, масштабирование должно выполняться, но нет гарантий качества обслуживания, поэтому настоятельно рекомендуется выполнить обновление, чтобы вернуть кластер в службу поддержки.

**Может ли пользователь постоянно оставаться в Kubernetes версии?**

Если в кластере не поддерживается более трех (3) дополнительных версий и обнаружены угрозы безопасности, Azure обращается к вам для упреждающего обновления кластера. Если вы не предпримете дальнейшие действия, Azure оставляет за собой право автоматически обновлять кластер от вашего имени.

**Какая версия поддерживает плоскость управления, если пул узлов не входит в одну из поддерживаемых версий AKS?**

Плоскость управления должна находиться в пределах окна версий из всех пулов узлов. Дополнительные сведения об обновлении плоскости управления или пулов узлов см. в документации по [обновлению пулов узлов](use-multiple-node-pools.md#upgrade-a-cluster-control-plane-with-multiple-node-pools).

**Можно ли пропустить несколько версий AKS во время обновления кластера?**

При обновлении поддерживаемого кластера AKS невозможно пропустить дополнительные версии Kubernetes. Например, Допускается обновление с параметром *1.12. x*  ->  *1.13. x* или *1.13. x*  ->  *1.14. x* , однако *1.12. x*  ->  *1.14. x* — нет.

Чтобы выполнить обновление, начиная с *1.12. x*  ->  *1.14. x*, сначала выполните обновление с *1.12. x*  ->  *1.13. x*, а затем выполните обновление с *1.13. x*  ->  *1.14. x*.

Пропуск нескольких версий может выполняться только при обновлении неподдерживаемой версии обратно в поддерживаемую версию. Например, обновление с неподдерживаемой версии *1.10. x* --> поддерживаемый *1,15 доллара. x* может быть завершен.

## <a name="next-steps"></a>Дальнейшие действия

Сведения об обновлении см. в статье [Обновление кластера Службы Azure Kubernetes (AKS)][aks-upgrade].

<!-- LINKS - External -->
[aks-engine]: https://github.com/Azure/aks-engine
[azure-update-channel]: https://azure.microsoft.com/updates/?product=kubernetes-service

<!-- LINKS - Internal -->
[aks-upgrade]: upgrade-cluster.md
[az-aks-get-versions]: /cli/azure/aks#az-aks-get-versions
[preview-terms]: https://azure.microsoft.com/support/legal/preview-supplemental-terms/
