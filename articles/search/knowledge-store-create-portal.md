---
title: Создание хранилища знаний на портале Azure
titleSuffix: Azure Cognitive Search
description: Используйте мастер импорта данных, чтобы создать хранилище знаний для сохранения обогащенного содержимого. Подключитесь к хранилищу знаний для анализа из других приложений или отправьте обогащенное содержимое в нисходящие процессы.
author: HeidiSteen
ms.author: heidist
manager: nitinme
ms.service: cognitive-search
ms.topic: quickstart
ms.date: 11/17/2020
ms.openlocfilehash: 3225013f09abd326c619b67caf77918889a64859
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "94741813"
---
# <a name="quickstart-create-an-azure-cognitive-search-knowledge-store-in-the-azure-portal"></a>Краткое руководство. Создание хранилища знаний службы "Когнитивный поиск Azure" на портале Azure

Хранилище знаний — это компонент Когнитивного поиска Azure, который сохраняет выходные данные конвейера обработки содержимого для последующего анализа или обработки. 

Конвейер принимает изображения и неструктурированный текст, применяет ИИ с помощью служб Cognitive Services (например, оптическое распознавание символов и обработку естественного языка), а также извлекает информацию и выводит новые структуры и сведения, которые ранее не существовали. Одним из физических артефактов, созданных конвейером, является [хранилище знаний](knowledge-store-concept-intro.md), доступ к которому можно получить с помощью средств для анализа и просмотра содержимого.

В этом кратком руководстве вы объедините службы и данные в облаке Azure, чтобы создать хранилище знаний. Когда все будет готово, запустите мастер **Импорт данных** на портале, чтобы импортировать все вместе. Конечный результат — исходное текстовое и созданное с помощью ИИ содержимое, которое можно просмотреть на портале ([обозреватель хранилища](knowledge-store-view-storage-explorer.md)).

## <a name="prerequisites"></a>Предварительные требования

Перед началом работы убедитесь, что у вас есть такие компоненты.

+ Учетная запись Azure с активной подпиской. [Создайте учетную запись](https://azure.microsoft.com/free/) бесплатно.

+ Служба "Когнитивный поиск Azure". [Создайте службу](search-create-service-portal.md) или [найдите имеющуюся службу](https://ms.portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Search%2FsearchServices) в рамках текущей подписки. Вы можете использовать бесплатную службу для выполнения инструкций, описанных в этом кратком руководстве. 

+ Учетная запись хранения Azure с [хранилищем BLOB-объектов](../storage/blobs/index.yml).

> [!NOTE]
> В этом кратком руководстве также используется [Azure Cognitive Services](https://azure.microsoft.com/services/cognitive-services/) для искусственного интеллекта. Так как рабочая нагрузка мала, Cognitive Services работает в фоновом режиме, чтобы обеспечить бесплатную обработку до 20 транзакций. Это означает, что вы можете выполнить это упражнение без создания дополнительного ресурса Cognitive Services.

## <a name="set-up-your-data"></a>Настройка данных

Выполните следующие действия, чтобы настроить контейнер больших двоичных объектов в службе хранилища Azure для хранения разнородных файлов содержимого.

1. [Скачайте HotelReviews_Free.csv](https://knowledgestoredemo.blob.core.windows.net/hotel-reviews/HotelReviews_Free.csv?sp=r&st=2019-11-04T01:23:53Z&se=2025-11-04T16:00:00Z&spr=https&sv=2019-02-02&sr=b&sig=siQgWOnI%2FDamhwOgxmj11qwBqqtKMaztQKFNqWx00AY%3D). Это данные отзывов об отелях, сохраненные в CSV-файле (с сайта Kaggle.com) и содержащие 19 элементов отзывов клиентов об одном отеле. 

1. [Создайте учетную запись хранения Azure](../storage/common/storage-account-create.md?tabs=azure-portal) или [найдите имеющуюся учетную запись](https://ms.portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Storage%2storageAccounts/) в текущей подписке. Служба хранилища Azure будет использоваться как для импорта необработанного содержимого, так и для хранилища знаний, которое является конечным результатом.

   + Выберите тип учетной записи **StorageV2 (общего назначения версии 2)** .

1. Откройте страницы служб BLOB-объектов и создайте контейнер *hotel-reviews*.

1. Щелкните **Отправить**.

    ![Передача данных](media/knowledge-store-create-portal/upload-command-bar.png "Отправка отзывов о гостинице")

1. Выберите файл **HotelReviews-Free.csv**, скачанный на первом шаге.

    ![Создание контейнера BLOB-объектов Azure](media/knowledge-store-create-portal/hotel-reviews-blob-container.png "Создание контейнера BLOB-объектов Azure")

1. Перед закрытием страниц хранилища BLOB-объектов используйте ссылку в левой области навигации, чтобы открыть страницу **Ключи доступа**. Получите строку подключения для извлечения данных из хранилища BLOB-объектов. Строка подключения выглядит следующим образом: `DefaultEndpointsProtocol=https;AccountName=<YOUR-ACCOUNT-NAME>;AccountKey=<YOUR-ACCOUNT-KEY>;EndpointSuffix=core.windows.net`

Теперь можно перейти к мастеру **импорта данных**.

## <a name="run-the-import-data-wizard"></a>Запуск мастера импорта данных

1. Войдите на [портал Azure](https://portal.azure.com/) с помощью своей учетной записи Azure.

1. [Найдите службу поиска](https://ms.portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Storage%2storageAccounts/) и на странице обзора щелкните **Импорт данных** на панели команд, чтобы создать хранилище знаний за четыре шага.

   ![Команда импорта данных](media/cognitive-search-quickstart-blob/import-data-cmd2.png)

### <a name="step-1-create-a-data-source"></a>Шаг 1. Создание источника данных

1. В разделе **Подключение к данным** выберите **Хранилище BLOB-объектов**, затем выберите учетную запись и созданный контейнер. 

1. Для параметра **Имя** введите `hotel-reviews-ds`.

1. Для параметра **Режима анализа** выберите **Текстовый файл с разделителями**, а затем установите флажок **Первая строка содержит заголовок**. Убедитесь, что в качестве **символа разделителя** задана запятая (,).

1. В поле **строки подключения** вставьте строку, скопированную на странице **Ключи доступа** в службе хранилища Azure.

1. В разделе **Контейнеры** введите имя контейнера больших двоичных объектов, содержащего данные.

    Теперь страница должна выглядеть, как на снимке экрана ниже.

    ![Создание объекта источника данных](media/knowledge-store-create-portal/hotel-reviews-ds.png "Создание объекта источника данных")

1. Перейдите к следующей странице.

### <a name="step-2-add-cognitive-skills"></a>Шаг 2. Добавление когнитивных навыков

На этом шаге мастера будет создан набор навыков с обогащениями когнитивных навыков. Исходные данные состоят из отзывов клиентов на нескольких языках. К навыкам, связанным с этим набором данных, относятся извлечение ключевых фраз, обнаружение тональности и преобразование текста. На более позднем шаге эти обогащения будут «проектироваться» в хранилище знаний как таблицы Azure.

1. Разверните раздел **Подключение Cognitive Services**. По умолчанию выбраны **бесплатные (ограниченные обогащения)** . Этот ресурс можно использовать, так как число записей в HotelReviews-Free.csv равно 19, а этот бесплатный ресурс позволяет выполнять до 20 транзакций в день.

1. Разверните узел **Добавление обогащений**.

1. В поле **Имя набора навыков** введите `hotel-reviews-ss`.

1. В **поле исходных данных** выберите **reviews_text**.

1. Для **степени детализации обогащения** выберите **Pages (5000 characters chunks)** (Страницы (блоки по 5000 знаков)).

1. Выберите следующие когнитивные навыки:
    + **Извлечение ключевых фраз**
    + **перевод текста**;
    + **Определение тональности**

      ![Создание набора навыков](media/knowledge-store-create-portal/hotel-reviews-ss.png "Создание набора навыков")

1. Разверните раздел **Save enrichments to knowledge store** (Сохранить обогащения в хранилище знаний).

1. Выберите эти **проекции таблиц Azure**:
    + **Документы**
    + **Страницы**
    + **Ключевые фразы**

1. Введите **строку подключения учетной записи хранения**, сохраненную на предыдущем шаге.

    ![Настройка хранилища знаний](media/knowledge-store-create-portal/hotel-reviews-ks.png "Настройка хранилища знаний")

1. При необходимости скачайте шаблон Power BI. Когда вы откроете шаблон в мастере, локальный PBIT-файл адаптируется в соответствии с формой данных.

1. Перейдите к следующей странице.

### <a name="step-3-configure-the-index"></a>Шаг 3. Настройка индекса

На этом шаге мастера будет настроен индекс для необязательных запросов полнотекстового поиска. Мастер выберет образец источника данных, чтобы вывести поля и типы данных. Необходимо только выбрать атрибуты для нужного поведения. Например, атрибут **Доступный для получения** позволяет службе поиска возвращать значение поля, а **Доступный для поиска** активирует полнотекстовый поиск по полю.

1. В поле **имени индекса** введите `hotel-reviews-idx`.

1. Для атрибутов примите значения по умолчанию: **Доступный для получения** и **Доступный для поиска** — для новых полей, создаваемых конвейером.

    Индекс должен выглядеть примерно так, как показано на следующем рисунке. Так как список длинный, на изображении видны не все поля.

    ![Настройка индекса](media/knowledge-store-create-portal/hotel-reviews-idx.png "Настройка индекса")

1. Перейдите к следующей странице.

### <a name="step-4-configure-the-indexer"></a>Шаг 4. Настройка индексатора

На этом шаге мастера мы настроим индексатор, который объединит источник данных, набор навыков и индекс, определенный на предыдущих шагах мастера.

1. Для параметра **Имя** введите `hotel-reviews-idxr`.

1. В поле **Расписание** следует использовать значение по умолчанию **Один раз**.

1. Щелкните **Отправить**, чтобы запустить индексатор. Извлечение данных, индексирование и применение когнитивных навыков выполняются на этом шаге.

## <a name="monitor-status"></a>Состояние монитора

Индексирование с использованием когнитивных навыков занимает больше времени, чем обычное индексирование на основе текста. Мастер откроет на странице обзорной информации список индексатора, что позволяет отслеживать ход выполнения. Вы также можете самостоятельно открыть страницу обзорной информации и щелкнуть **Индексаторы**.

На портале Azure найдите в журнале действий уведомлений ссылку состояния **уведомления Когнитивного поиска Azure**, которую можно щелкнуть. Выполнение может занять несколько минут.

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы обогатили данные с помощью Cognitive Services и спроецировали результаты в хранилище знаний, вы можете изучить обогащенный набор данных с помощью Обозревателя службы хранилища или Power BI.

Вы можете просмотреть содержимое в Обозревателе службы хранилища или выполнить шаг дальше с Power BI, чтобы получить полезные сведения с помощью визуализации.

> [!div class="nextstepaction"]
> [Просмотр с помощью Обозреватель службы хранилища](knowledge-store-view-storage-explorer.md)
> [Подключение с помощью Power BI](knowledge-store-connect-power-bi.md)

> [!Tip]
> Если вы хотите повторить это упражнение или выполнить инструкции из другого пошагового руководства по обогащению с помощью ИИ, удалите только индексатор *hotel-reviews-idxr*. При удалении индексатора счетчик бесплатных ежедневных транзакций сбрасывается обратно на нулевое значение для обработки Cognitive Services.
