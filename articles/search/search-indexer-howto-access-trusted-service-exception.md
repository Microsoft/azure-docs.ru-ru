---
title: Доступ индексатора к хранилищу Azure с помощью исключения доверенной службы
titleSuffix: Azure Cognitive Search
description: Включите доступ к данным с помощью индексатора в Azure Когнитивный поиск в данные, которые безопасно хранятся в службе хранилища Azure.
manager: nitinme
author: arv100kri
ms.author: arjagann
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 10/14/2020
ms.openlocfilehash: e139c15ef6de00376a4e1a88000d263c3486994b
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "92101381"
---
# <a name="indexer-access-to-azure-storage-using-the-trusted-service-exception-azure-cognitive-search"></a>Доступ индексатора к службе хранилища Azure с помощью исключения доверенной службы (Когнитивный поиск Azure)

Индексаторы в службе Когнитивный поиск Azure, которые обращаются к данным в учетных записях хранения Azure, могут использовать возможность [исключений доверенных служб](../storage/common/storage-network-security.md#exceptions) для безопасного доступа к данным. Этот механизм предлагает клиентам, которые не могут предоставить [доступ к индексатору с помощью правил брандмауэра IP](search-indexer-howto-access-ip-restricted.md) , простой, безопасной и бесплатной альтернативой для доступа к данным в учетных записях хранения.

> [!NOTE]
> Поддержка доступа к данным в учетных записях хранения через исключение доверенной службы ограничена хранилищем BLOB-объектов Azure и Azure Data Lake хранилищем Gen2. Хранилище таблиц Azure не поддерживается.

## <a name="step-1-configure-a-connection-using-a-managed-identity"></a>Шаг 1. Настройка подключения с помощью управляемого удостоверения

Следуйте инструкциям в статье [Настройка подключения к учетной записи хранения Azure с помощью управляемого удостоверения](search-howto-managed-identities-storage.md). По завершении вы зарегистрируете службу поиска с Azure Active Directory в качестве доверенной службы, и вам будут предоставлены разрешения в службе хранилища Azure, которые предоставляют права на доступ к данным или сведениям для поиска.

## <a name="step-2-allow-trusted-microsoft-services-to-access-the-storage-account"></a>Шаг 2. Разрешите доверенным службам Майкрософт доступ к учетной записи хранения

В портал Azure перейдите на вкладку **брандмауэры и виртуальные сети** учетной записи хранения. Убедитесь, что установлен флажок **разрешить доверенным службам Майкрософт доступ к этой учетной записи хранения** . Этот параметр позволяет конкретному экземпляру службы поиска с соответствующим доступом на основе ролей к учетной записи хранения (строгой проверки подлинности) получать доступ к данным в учетной записи хранения, даже если они защищены правилами брандмауэра IP.

![Исключение доверенной службы](media\search-indexer-howto-secure-access\exception.png "Исключение доверенной службы")

Теперь индексаторы смогут получать доступ к данным в учетной записи хранения, даже если учетная запись защищена с помощью правил брандмауэра IP.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения об индексаторах службы хранилища Azure:

- [Индексатор BLOB-объектов](search-howto-indexing-azure-blob-storage.md)
- [Индексатор Azure Data Lake Storage 2-го поколения](search-howto-index-azure-data-lake-storage.md)
- [Индексатор таблиц Azure](search-howto-indexing-azure-tables.md)