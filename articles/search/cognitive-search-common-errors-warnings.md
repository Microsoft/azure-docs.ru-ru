---
title: Ошибки и предупреждения, касающиеся индексатора
titleSuffix: Azure Cognitive Search
description: В этой статье содержатся сведения и решения для распространенных ошибок и предупреждений, которые могут возникнуть во время обогащения искусственного интеллекта в Azure Когнитивный поиск.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 09/23/2020
ms.openlocfilehash: 3ba0abe8510291351c10ba085ba7e42b8197d886
ms.sourcegitcommit: e6de1702d3958a3bea275645eb46e4f2e0f011af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102553244"
---
# <a name="troubleshooting-common-indexer-errors-and-warnings-in-azure-cognitive-search"></a>Устранение распространенных ошибок индексатора и предупреждений в Azure Когнитивный поиск

Эта статья содержит сведения и решения для распространенных ошибок и предупреждений, которые могут возникнуть во время индексирования и обогащения искусственного интеллекта в Azure Когнитивный поиск.

Индексирование останавливается, если число ошибок превышает ["максфаиледитемс"](cognitive-search-concept-troubleshooting.md#tip-3-see-what-works-even-if-there-are-some-failures). 

Если вы хотите, чтобы индексаторы проигнорировали эти ошибки (и пропустить "документы с ошибками"), рассмотрите возможность обновления `maxFailedItems` и, `maxFailedItemsPerBatch` как описано [здесь](/rest/api/searchservice/create-indexer#general-parameters-for-all-indexers).

> [!NOTE]
> Каждый неудачный документ вместе с ключом документа (если он доступен) будет отображаться как ошибка в состоянии выполнения индексатора. Можно использовать [API индексов](/rest/api/searchservice/addupdate-or-delete-documents) , чтобы вручную отправить документы в более поздний момент, если вы настроили индексатор для допуска сбоев.

Сведения об ошибке, приведенные в этой статье, помогут устранить ошибки, позволяя продолжить индексирование.

Предупреждения не останавливают индексирование, но они указывают на условия, которые могут привести к непредвиденным результатам. Принимается ли действие или не зависит от данных и сценария.

Начиная с версии API `2019-05-06` , ошибки индексатора на уровне элементов и предупреждения структурированы таким образом, чтобы обеспечить улучшенную ясность по причинам и дальнейшим действиям. Они содержат следующие свойства:

| Свойство. | Описание | Пример |
| --- | --- | --- |
| ключ | Идентификатор документа, на который влияет ошибка или предупреждение. | HTTPS: \/ /coromsearch.blob.core.windows.net/jfk-1k/docid-32112954.pdf |
| name | Имя операции, описывающей, где возникла ошибка или предупреждение. Он создается следующей структурой: [Category]. [Подкатегория]. [resourceType]. resourceName | Документекстрактион. azureblob. Миблобконтаинернаме обогащение. Вебапискилл. Мискиллнаме проекция. Сеарчиндекс. Аутпутфиелдмаппинг. myOutputFieldName проекция. SearchIndex. MergeOrUpload. myIndexName проекция. KnowledgeStore. Table. myTableName |
| message | Высокоуровневое описание ошибки или предупреждения. | Не удалось выполнить навык, так как произошел сбой запроса веб-API. |
| подробности | Дополнительные сведения, которые могут оказаться полезными для диагностики проблемы, например ответ WebApi, если при выполнении пользовательского навыка произошел сбой. | `link-cryptonyms-list - Error processing the request record : System.ArgumentNullException: Value cannot be null. Parameter name: source at System.Linq.Enumerable.All[TSource](IEnumerable`1 источник, Func `2 predicate) at Microsoft.CognitiveSearch.WebApiSkills.JfkWebApiSkills.` ... Оставшаяся часть трассировки стека... |
| документатионлинк | Ссылка на соответствующую документацию с подробными сведениями для отладки и устранения проблемы. Эта ссылка часто будет указывать на один из следующих разделов на этой странице. | https://go.microsoft.com/fwlink/?linkid=2106475 |

<a name="could-not-read-document"></a>

## <a name="error-could-not-read-document"></a>Ошибка: не удалось прочитать документ

Индексатору не удалось прочитать документ из источника данных. Это может произойти по следующим причинам.

| Причина | Сведения/пример | Решение |
| --- | --- | --- |
| Несогласованные типы полей в разных документах | "Тип значения имеет несоответствие типа столбца. Не удалось сохранить `'{47.6,-122.1}'` в столбце Authors.  Ожидаемый тип — Жаррай.  "Ошибка при преобразовании типа данных nvarchar в тип float."  "Не удалось выполнить преобразование при преобразовании значения nvarchar" 12 месяцев "в тип данных int".  «Арифметическое переполнение при преобразовании выражения к типу данных int». | Убедитесь, что тип каждого поля одинаков для разных документов. Например, если первое `'startTime'` поле документа является типом DateTime, а во втором — строкой, будет достигнута эта ошибка. |
| ошибки базовой службы источника данных | (от Cosmos DB) `{"Errors":["Request rate is large"]}` | Проверьте экземпляр хранилища, чтобы убедиться в его работоспособности. Возможно, потребуется настроить масштабирование или секционирование. |
| временные проблемы | ошибка на транспортном уровне при получении результатов с сервера. (поставщик: поставщик TCP, ошибка: 0 — существующее подключение было принудительно закрыто удаленным узлом | Иногда возникают непредвиденные проблемы с подключением. Попробуйте снова запустить документ через индексатор позже. |

<a name="could-not-extract-document-content"></a>

## <a name="error-could-not-extract-content-or-metadata-from-your-document"></a>Ошибка: не удалось извлечь содержимое или метаданные из документа
Индексатору с источником данных большого двоичного объекта не удалось извлечь содержимое или метаданные из документа (например, PDF-файл). Это может произойти по следующим причинам.

| Причина | Сведения/пример | Решение |
| --- | --- | --- |
| Превышен предельный размер BLOB-объекта | Документ содержит `'150441598'` байты, что превышает максимальный размер в `'134217728'` байтах для извлечения документа для текущего уровня служб. | [ошибки индексирования BLOB-объектов](search-howto-indexing-azure-blob-storage.md#DealingWithErrors) |
| тип содержимого BLOB-объекта не поддерживается | Документ имеет неподдерживаемый тип содержимого `'image/png'` | [ошибки индексирования BLOB-объектов](search-howto-indexing-azure-blob-storage.md#DealingWithErrors) |
| BLOB-объект зашифрован | Документ не может быть обработан. он может быть зашифрован или защищен паролем. | Вы можете пропустить большой двоичный объект с помощью [параметров больших двоичных объектов](search-howto-indexing-azure-blob-storage.md#PartsOfBlobToIndex). |
| временные проблемы | "Ошибка обработки BLOB-объекта: запрос был прерван: запрос был отменен". "Превышено время ожидания документа во время обработки". | Иногда возникают непредвиденные проблемы с подключением. Попробуйте снова запустить документ через индексатор позже. |

<a name="could-not-parse-document"></a>

## <a name="error-could-not-parse-document"></a>Ошибка: не удалось проанализировать документ
Индексатор считывает документ из источника данных, но возникла ошибка при преобразовании содержимого документа в указанную схему сопоставления полей. Это может произойти по следующим причинам.

| Причина | Сведения/пример | Решение |
| --- | --- | --- |
| Отсутствует ключ документа | Ключ документа не может быть указан или пуст | Убедитесь, что все документы содержат допустимые ключи документа. Ключ документа определяется путем установки свойства "Key" как части [определения индекса](/rest/api/searchservice/create-index#request-body). Индексаторы выдают эту ошибку, если не удается найти свойство, помеченное как "ключ", в определенном документе. |
| Недопустимый ключ документа | Длина ключа документа не должна превышать 1024 символов | Измените ключ документа в соответствии с требованиями проверки. |
| Не удалось применить сопоставление полей к полю | Не удалось применить функцию сопоставления `'functionName'` к полю `'fieldName'` . Массив не может иметь значение null. Имя параметра: байт | Дважды проверьте [сопоставления полей](search-indexer-field-mappings.md) , определенные в индексаторе, и сравните с данными указанного поля документа, в котором произошел сбой. Может потребоваться изменить сопоставления полей или данные документа. |
| Не удалось прочитать значение поля | Не удалось считать значение столбца `'fieldName'` по индексу `'fieldIndex'` . ошибка на транспортном уровне при получении результатов с сервера. (поставщик: поставщик TCP, ошибка: 0 — существующее подключение было принудительно закрыто удаленным узлом.) | Эти ошибки обычно возникают из-за непредвиденных проблем с подключением к базовой службе источника данных. Попробуйте снова запустить документ через индексатор позже. |

<a name="Could not map output field '`xyz`' to search index due to deserialization problem while applying mapping function '`abc`'"></a>

## <a name="error-could-not-map-output-field-xyz-to-search-index-due-to-deserialization-problem-while-applying-mapping-function-abc"></a>Ошибка: не удалось сопоставить поле вывода " `xyz` " с индексом поиска из-за ошибки десериализации при применении функции сопоставления " `abc` "
Возможно, выходное сопоставление завершилось ошибкой, так как выходные данные имеют неправильный формат для используемой функции сопоставления. Например, при применении функции сопоставления Base64Encode для двоичных данных будет выдаваться эта ошибка. Чтобы устранить эту проблему, либо перезапустите индексатор без указания функции сопоставления, либо убедитесь, что функция сопоставления совместима с типом данных поля вывода. Дополнительные сведения см. в разделе [сопоставление полей вывода](cognitive-search-output-field-mapping.md) .

<a name="could-not-execute-skill"></a>

## <a name="error-could-not-execute-skill"></a>Ошибка: не удалось выполнить навык
Индексатору не удалось запустить навык в наборе навыков.

| Причина | Сведения/пример | Решение |
| --- | --- | --- |
| Проблемы с временным подключением | Произошла временная ошибка. Повторите попытку позже. | Иногда возникают непредвиденные проблемы с подключением. Попробуйте снова запустить документ через индексатор позже. |
| Потенциальная ошибка продукта | Произошла непредвиденная ошибка. | Это указывает на неизвестный класс сбоя и может означать наличие ошибки в продукте. Отправьте запрос в [службу поддержки](https://ms.portal.azure.com/#create/Microsoft.Support) , чтобы получить помощь. |
| Во время выполнения навык обнаружил ошибку | (От навыка слияния) Одно или несколько значений смещения являются недопустимыми и не могут быть проанализированы. Элементы вставлены в конец текста | Чтобы устранить проблему, используйте сведения в сообщении об ошибке. Этот тип сбоя потребует действия для разрешения. |

<a name="could-not-execute-skill-because-the-web-api-request-failed"></a>

## <a name="error-could-not-execute-skill-because-the-web-api-request-failed"></a>Ошибка: не удалось выполнить навык, так как произошел сбой запроса веб-API
Не удалось выполнить навык, так как произошел сбой при вызове веб-API. Как правило, этот класс сбоя возникает, когда используются пользовательские навыки. в этом случае для устранения проблемы потребуется отладка пользовательского кода. Если же проблема связана со встроенным навыком, обратитесь к сообщению об ошибке, чтобы получить справку по устранению проблемы.

Во время отладки этой проблемы следует обратить внимание на любые предупреждения, связанные с [вводом навыков](#warning-skill-input-was-invalid) для этого навыка. Возможна ошибка конечной точки веб-API, так как индексатор передает непредвиденные входные данные.

<a name="could-not-execute-skill-because-web-api-skill-response-is-invalid"></a>

## <a name="error-could-not-execute-skill-because-web-api-skill-response-is-invalid"></a>Ошибка: не удалось выполнить навык, так как отклик о навыках веб-API недопустим
Не удалось выполнить навык, так как вызов веб-API вернул недопустимый ответ. Как правило, этот класс сбоя возникает, когда используются пользовательские навыки. в этом случае для устранения проблемы потребуется отладка пользовательского кода. Если же проблема связана со встроенным навыком, отправьте [заявку в службу поддержки](https://ms.portal.azure.com/#create/Microsoft.Support) , чтобы получить помощь.

<a name="skill-did-not-execute-within-the-time-limit"></a>

## <a name="error-skill-did-not-execute-within-the-time-limit"></a>Ошибка: навык не выполнялся в течение отведенного времени
Существует два варианта, при которых может возникнуть это сообщение об ошибке, каждое из которых должно обрабатываться по-разному. Следуйте приведенным ниже инструкциям в зависимости от того, какой навык возвращает эту ошибку.

### <a name="built-in-cognitive-service-skills"></a>Встроенные навыки работы со службой
Многие из встроенных функций, таких как определение языка, распознавание сущностей или распознавание текста, поддерживаются конечной точкой API-интерфейса для перекрывающегося службы. Иногда существуют временные проблемы с этими конечными точками, и время ожидания запроса истечет. Для временных проблем нет ограничений, за исключением ожидания, и повторите попытку. В качестве меры по устранению рисков рассмотрите возможность установки индексатора для [выполнения по расписанию](search-howto-schedule-indexers.md). Запланированное индексирование принимается с того места, на котором она была прервана. Если решены временные проблемы, обработка индексирования и обработки персонала должна продолжаться при следующем запланированном запуске.

Если эта ошибка продолжает отображаться в том же документе, что и встроенный навык, отправьте запрос в [службу поддержки](https://ms.portal.azure.com/#create/Microsoft.Support) , так как это не ожидается.

### <a name="custom-skills"></a>Пользовательские навыки
Если возникла ошибка времени ожидания с пользовательским навыком, который вы создали, то можете попробовать несколько вещей. Во-первых, проверьте свой пользовательский навык и убедитесь, что он не зависает в бесконечном цикле и что он возвращает результат согласованно. Убедившись в том, что это так, определите время выполнения вашего навыка. Если `timeout` для пользовательского определения навыка не было задано явно значение, по умолчанию `timeout` используется 30 секунд. Если 30 секунд недостаточно для выполнения вашего навыка, можно указать большее `timeout` значение для пользовательского определения навыка. Ниже приведен пример пользовательского определения навыка, в котором время ожидания равно 90 секунд:

```json
  {
        "@odata.type": "#Microsoft.Skills.Custom.WebApiSkill",
        "uri": "<your custom skill uri>",
        "batchSize": 1,
        "timeout": "PT90S",
        "context": "/document",
        "inputs": [
          {
            "name": "input",
            "source": "/document/content"
          }
        ],
        "outputs": [
          {
            "name": "output",
            "targetName": "output"
          }
        ]
      }
```

Максимальное значение, которое можно задать для параметра, `timeout` — 230 секунд.  Если ваша пользовательская квалификация не может выполняться постоянно в течение 230 секунд, можно подумать об уменьшении `batchSize` пользовательского навыка, чтобы у него было меньше документов для обработки в рамках одного выполнения.  Если вы уже установили значение `batchSize` 1, необходимо будет переписать навык, чтобы иметь возможность выполняться в течение 230 секунд или иным образом разделить его на несколько пользовательских навыков, чтобы время выполнения для любого отдельного пользовательского навыка не было больше 230 секунд. Дополнительные сведения см. в [документации по пользовательской квалификации](cognitive-search-custom-skill-web-api.md) .

<a name="could-not-mergeorupload--delete-document-to-the-search-index"></a>

## <a name="error-could-not-mergeorupload--delete-document-to-the-search-index"></a>Ошибка: не удалось " `MergeOrUpload` " | ' `Delete` ' документ в индексе поиска

Документ был прочитан и обработан, но индексатор не смог добавить его в индекс поиска. Это может произойти по следующим причинам.

| Причина | Сведения/пример | Решение |
| --- | --- | --- |
| Поле содержит слишком большой термин | Срок в документе превышает [ограничение в 32 КБ](search-limits-quotas-capacity.md#api-request-limits) | Это ограничение можно избежать, убедившись, что поле не настроено в качестве фильтруемого, аспекта или сортировки.
| Документ слишком велик для индексирования | Размер документа больше [максимального размера запроса API](search-limits-quotas-capacity.md#api-request-limits) | [Индексирование больших наборов данных](search-howto-large-index.md)
| Документ содержит слишком много объектов в коллекции | Коллекция в документе превышает [Максимальное число элементов в пределах всех сложных коллекций](search-limits-quotas-capacity.md#index-limits) "документ с ключом `'1000052'` содержит `'4303'` объекты в коллекциях (массивы JSON). Не более `'3000'` объектов может находиться в коллекциях во всем документе. Удалите объекты из коллекций и повторите индексирование документа ". | Рекомендуется уменьшить размер сложной коллекции в документе до предельного значения и избежать высокой загрузки хранилища.
| Не удается подключиться к целевому индексу (который сохраняется после повторных попыток), так как служба находится под другой нагрузкой, такой как запросы или индексирование. | Не удалось установить соединение с обновлением индекса. Служба поиска работает под высокой нагрузкой. | [Масштабирование службы поиска](search-capacity-planning.md)
| Служба поиска подготавливается к установке обновления службы или находится в процессе перенастройки топологии. | Не удалось установить соединение с обновлением индекса. Служба поиска в настоящее время находится в состоянии "отключена" или "служба поиска". | Настройка службы с по крайней мере 3 репликами для обеспечения доступности 99,9% на [документацию по соглашению об уровне обслуживания](https://azure.microsoft.com/support/legal/sla/search/v1_0/)
| Сбой в базовом ресурсе COMPUTE/Network (редких) | Не удалось установить соединение с обновлением индекса. Произошла неизвестная ошибка. | Настройте индексаторы для [выполнения по расписанию](search-howto-schedule-indexers.md) , чтобы выбрать состояние сбоя.
| Запрос на индексирование, выполненный в целевом индексе, не был подтвержден в течение времени ожидания из-за проблем с сетью. | Не удалось своевременно установить соединение с индексом поиска. | Настройте индексаторы для [выполнения по расписанию](search-howto-schedule-indexers.md) , чтобы выбрать состояние сбоя. Кроме того, попробуйте уменьшить [Размер пакета](/rest/api/searchservice/create-indexer#parameters) индексатора в случае повторения ошибки.

<a name="could-not-index-document-because-the-indexer-data-to-index-was-invalid"></a>

## <a name="error-could-not-index-document-because-some-of-the-documents-data-was-not-valid"></a>Ошибка: не удалось индексировать документ из-за недопустимых данных документа

Документ был прочитан и обработан индексатором, но из-за несоответствия конфигурации полей индекса и данных, извлеченных и обработанных индексатором, его не удалось добавить в индекс поиска. Это может произойти по следующим причинам.

| Причина | Сведения/пример
| --- | ---
| Тип данных полей, извлеченных индексатором, несовместим с моделью данных соответствующего поля целевого индекса. | Поле данных "_Data_" в документе с ключом "888" имеет недопустимое значение типа "EDM". строка "". Ожидался тип "Collection (EDM. String)". |
| Не удалось извлечь сущность JSON из строкового значения. | Не удалось проанализировать значение "типа" EDM. String "" поля "_Data_" как объект JSON. Ошибка: "после синтаксического анализа значения обнаружен непредвиденный символ:" ". Путь "_path_", строка 1, расположение 3162. " |
| Не удалось извлечь коллекцию сущностей JSON из строкового значения.  | Не удалось выполнить синтаксический анализ значения "типа" EDM. String "" поля "_Data_" как массива JSON. Ошибка: "после синтаксического анализа значения обнаружен непредвиденный символ:" ". Путь "[0]", строка 1, расположение 27. " |
| В исходном документе обнаружен неизвестный тип. | Неизвестный тип "_Unknown_" не может быть проиндексирован |
| В исходном документе использовалась несовместимая нотация для географических точек. | Строковые литералы точки WKT не поддерживаются. Вместо этого используйте литеральные литералы для точек в формате JSON |

Во всех этих случаях ознакомьтесь с [поддерживаемыми типами данных](/rest/api/searchservice/supported-data-types) и [сопоставлением типов данных для индексаторов](/rest/api/searchservice/data-type-map-for-indexers-in-azure-search) , чтобы убедиться в правильности построения схемы индекса и настройке соответствующих [сопоставлений полей индексатора](search-indexer-field-mappings.md). В сообщении об ошибке будут содержаться сведения, которые могут помочь в отслеживании источника несоответствия.

## <a name="error-integrated-change-tracking-policy-cannot-be-used-because-table-has-a-composite-primary-key"></a>Ошибка: невозможно использовать встроенную политику отслеживания изменений, так как таблица имеет составной первичный ключ

Это относится к таблицам SQL, и обычно происходит, когда ключ определен как составной ключ, или, если в таблице определен уникальный кластеризованный индекс (как в индексе SQL, а не в индексе службы поиска Azure). Основная причина заключается в том, что ключевой атрибут изменяется как составной первичный ключ в случае [уникального кластеризованного индекса](/sql/relational-databases/indexes/clustered-and-nonclustered-indexes-described). В этом случае убедитесь, что таблица SQL не имеет уникального кластеризованного индекса, или что поле ключа сопоставлено с полем, которое гарантированно не имеет повторяющихся значений.

<a name="could-not-process-document-within-indexer-max-run-time"></a>

## <a name="error-could-not-process-document-within-indexer-max-run-time"></a>Ошибка: не удалось обработать документ в течение максимального времени выполнения индексатора

Эта ошибка возникает, когда индексатор не может завершить обработку одного документа из источника данных в течение допустимого времени выполнения. [Максимальное время выполнения](search-limits-quotas-capacity.md#indexer-limits) сокращается при использовании навыков. При возникновении этой ошибки, если для Максфаиледитемс задано значение, отличное от 0, индексатор обходит документ в будущих запусках, чтобы индексация могла выполняться. Если вы не можете позволить себе пропустить какой-либо документ или если эта ошибка постоянно возникает, рассмотрите возможность разбиения документов на небольшие документы, чтобы выполнить частичный ход выполнения в рамках одного индексатора.

<имя = "возможно-не-проект-документ></a>

## <a name="error-could-not-project-document"></a>Ошибка: не удалось выполнить проект документа

Эта ошибка возникает, когда индексатор пытается выполнить [проецирование данных в хранилище знаний](knowledge-store-projection-overview.md) , и при нашей попытке произошла ошибка.  Этот сбой может быть последовательным и могут быть исправлены или быть временным сбоем в приемнике выходных данных проекции, который может потребоваться подождать и повторить попытку, чтобы устранить проблему.  Ниже приведен набор известных состояний сбоя и возможные способы их устранения.

| Причина | Сведения/пример | Решение |
| --- | --- | --- |
| Не удалось обновить большой двоичный объект проекции `'blobUri'` в контейнере `'containerName'` |Указанный контейнер не существует. | Индексатор проверит, был ли ранее создан указанный контейнер, и создаст его при необходимости, но выполняет эту проверку только один раз для выполнения индексатора. Эта ошибка означает, что что-то удалило контейнер после этого шага.  Чтобы устранить эту ошибку, попробуйте сделать это: Оставьте только сведения об учетной записи хранения, дождитесь завершения работы индексатора и повторно запустите индексатор. |
| Не удалось обновить большой двоичный объект проекции `'blobUri'` в контейнере `'containerName'` |Не удалось записать данные в транспортное соединение: существующее подключение было принудительно закрыто удаленным узлом. | Это должно быть временным сбоем в службе хранилища Azure, поэтому его следует устранить, выполнив индексатор. Если эта ошибка возникает постоянно, отправьте запрос в [службу поддержки](https://ms.portal.azure.com/#create/Microsoft.Support) , чтобы его можно было исследовать дальше.  |
| Не удалось обновить строку `'projectionRow'` в таблице `'tableName'` | Сервер занят. | Это должно быть временным сбоем в службе хранилища Azure, поэтому его следует устранить, выполнив индексатор. Если эта ошибка возникает постоянно, отправьте запрос в [службу поддержки](https://ms.portal.azure.com/#create/Microsoft.Support) , чтобы его можно было исследовать дальше.  |

<a name="could-not-execute-skill-because-a-skill-input-was-invalid"></a>

## <a name="warning-skill-input-was-invalid"></a>Предупреждение: недопустимые входные данные о навыках
Отсутствуют входные данные для навыка, неправильный тип или недопустимый другой. Предупреждающее сообщение будет указывать на это влияние:
1) Не удалось выполнить навык
2) Навык выполнен, но может иметь непредвиденные результаты

Профессиональные навыки имеют необходимые входные и необязательные входные данные. Например, [навык извлечения ключевых фраз](cognitive-search-skill-keyphrases.md) имеет два обязательных входа `text` , `languageCode` и необязательные входные данные. Входные данные пользовательского навыка считаются необязательными.

Если отсутствуют необходимые входные данные или если какой-либо из входных данных не является правильным типом, навык пропускается и выдает предупреждение. Пропущенные навыки не создают никаких выходов, поэтому, если другие навыки используют выходные данные пропущенного навыка, они могут создавать дополнительные предупреждения.

Если необязательный вход отсутствует, он по-прежнему будет выполняться, но может привести к непредвиденным результатам из-за отсутствующих входных данных.

В обоих случаях это предупреждение может быть ожидаемым из-за формы данных. Например, если имеется документ, содержащий сведения о людях с полями `firstName` , `middleName` и `lastName` , то у вас могут быть документы, для которых нет записи `middleName` . Если вы передаете в `middleName` качестве входных данных для навыка в конвейере, то ожидается, что этот ввод в навыках может отсутствовать. Необходимо оценить данные и сценарий, чтобы определить, требуются ли какие-либо действия в результате этого предупреждения.

Если вы хотите предоставить значение по умолчанию в случае отсутствия входных данных, можно использовать [Условный навык](cognitive-search-skill-conditional.md) , чтобы создать значение по умолчанию, а затем использовать выходные данные [условного навыка](cognitive-search-skill-conditional.md) в качестве входного навыка.


```json
{
    "@odata.type": "#Microsoft.Skills.Util.ConditionalSkill",
    "context": "/document",
    "inputs": [
        { "name": "condition", "source": "= $(/document/language) == null" },
        { "name": "whenTrue", "source": "= 'en'" },
        { "name": "whenFalse", "source": "= $(/document/language)" }
    ],
    "outputs": [ { "name": "output", "targetName": "languageWithDefault" } ]
}
```

| Причина | Сведения/пример | Решение |
| --- | --- | --- |
| Недопустимый тип ввода навыка | "Требуемый тип ввода навыка отличается от ожидаемого `String` . Имя: `text` , источник: `/document/merged_content` . "  "Требуемый ввод навыка отличается от ожидаемого формата. Имя: `text` , источник: `/document/merged_content` . "  "Невозможно выполнить итерацию для массива, не являющегося массивом `/document/normalized_images/0/imageCelebrities/0/detail/celebrities` ."  "Не удается выбрать `0` в массиве, отличном от массива `/document/normalized_images/0/imageCelebrities/0/detail/celebrities` " | Некоторые навыки предполагают ввод определенных типов, например [тональности навык](cognitive-search-skill-sentiment.md) , `text` который должен быть строкой. Если входные данные указывают на нестроковое значение, то навык не выполняется и не создает выходные данные. Убедитесь, что набор данных имеет одинаковые входные значения в типе, или используйте [Пользовательский навык веб-API](cognitive-search-custom-skill-web-api.md) , чтобы предварительно обработать входные данные. Если вы выполняете итерацию навыков по массиву, проверьте контекст навыка и введите `*` правильные позиции. Как правило, контекст и источник входных данных должны заканчиваться на `*` массивы. |
| Отсутствуют входные данные о навыках | "Отсутствуют обязательные входные данные о навыках. Имя: `text` , источник: `/document/merged_content` "" отсутствует значение " `/document/normalized_images/0/imageTags` .  "Не удается выбрать `0` длину массива `/document/pages` `0` ." | Если все документы получают это предупреждение, скорее всего, во входных путях есть опечатка, и необходимо дважды проверить регистр имени свойства, дополнительного или отсутствующего `*` в пути и убедиться, что документы из источника данных предоставляют необходимые входные данные. |
| Недопустимый ввод кода языка навыков | Ввод навыка `languageCode` имеет следующие коды языка `X,Y,Z` , по крайней мере один из которых является недопустимым. | Дополнительные сведения см. [ниже](cognitive-search-common-errors-warnings.md#skill-input-languagecode-has-the-following-language-codes-xyz-at-least-one-of-which-is-invalid) |

<a name="skill-input-languagecode-has-the-following-language-codes-xyz-at-least-one-of-which-is-invalid"></a>

## <a name="warning--skill-input-languagecode-has-the-following-language-codes-xyz-at-least-one-of-which-is-invalid"></a>Внимание! ввод навыка "languageCode" имеет следующие коды языка "X, Y, Z", по крайней мере один из которых является недопустимым.
Одно или несколько значений, переданных в необязательный `languageCode` Ввод подчиненного, не поддерживаются. Это может произойти, если вы передаете выходные данные [лангуажедетектионскилл](cognitive-search-skill-language-detection.md) в последующие навыки, а выходные данные состоят из большего числа языков, чем поддерживаются в этих нижестоящих навыках.

Обратите внимание, что также может появиться предупреждение, аналогичное этому, если в `countryHint` лангуажедетектионскилл передается недопустимый вход. Если это происходит, убедитесь, что поле, используемое в источнике данных для этого входа, содержит допустимые коды стран ISO 3166-1 Alpha-2 2. Если некоторые из них являются допустимыми и некоторые из них являются недопустимыми, перейдите к следующему руководству, но замените на `languageCode` `countryHint` и `defaultLanguageCode` с `defaultCountryHint` в соответствии с вашим вариантом использования.

Если известно, что все наборы данных находятся на одном языке, следует удалить [лангуажедетектионскилл](cognitive-search-skill-language-detection.md) и `languageCode` Ввод навыка и использовать `defaultLanguageCode` параметр навык для этого навыка, предполагая, что язык поддерживается для этого навыка.

Если вы уверены, что набор данных содержит несколько языков и поэтому вам нужны [лангуажедетектионскилл](cognitive-search-skill-language-detection.md) и `languageCode` входные данные, рассмотрите возможность добавления [кондитионалскилл](cognitive-search-skill-conditional.md) , чтобы отфильтровать текст с помощью языков, которые не поддерживаются до передачи текста в подчиненный навык.  Ниже приведен пример того, как это может выглядеть для Ентитирекогнитионскилл:

```json
{
    "@odata.type": "#Microsoft.Skills.Util.ConditionalSkill",
    "context": "/document",
    "inputs": [
        { "name": "condition", "source": "= $(/document/language) == 'de' || $(/document/language) == 'en' || $(/document/language) == 'es' || $(/document/language) == 'fr' || $(/document/language) == 'it'" },
        { "name": "whenTrue", "source": "/document/content" },
        { "name": "whenFalse", "source": "= null" }
    ],
    "outputs": [ { "name": "output", "targetName": "supportedByEntityRecognitionSkill" } ]
}
```

Ниже приведены некоторые ссылки на языки, поддерживаемые в настоящее время для каждого из навыков, которые могут вызвать это сообщение об ошибке:
* [Анализ текста поддерживаемых языков](../cognitive-services/text-analytics/language-support.md) (для [кэйфрасикстрактионскилл](cognitive-search-skill-keyphrases.md), [ентитирекогнитионскилл](cognitive-search-skill-entity-recognition.md), [сентиментскилл](cognitive-search-skill-sentiment.md)и [пиидетектионскилл](cognitive-search-skill-pii-detection.md))
* [Языки, поддерживаемые переводчиками](../cognitive-services/translator/language-support.md) (для [текста транслатионскилл](cognitive-search-skill-text-translation.md))
* [Сплитскилл текста](cognitive-search-skill-textsplit.md) Поддерживаемые языки: `da, de, en, es, fi, fr, it, ko, pt`

<a name="skill-input-was-truncated"></a>

## <a name="warning-skill-input-was-truncated"></a>Предупреждение: ввод навыка был усечен
Эти навыки имеют ограничения на длину текста, который можно проанализировать одновременно. Если текстовые входные данные для этих навыков превышены, мы будем усекать текст, чтобы соответствовать пределу, а затем выполнить этот Усеченный текст. Это означает, что навык выполняется, но не все данные.

В приведенном ниже примере Лангуажедетектионскилл `'text'` поле ввода может активировать это предупреждение, если оно превышает ограничение на количество символов. Ограничения на входные данные навыков можно найти в [документации по навыкам](cognitive-search-predefined-skills.md).

```json
 {
    "@odata.type": "#Microsoft.Skills.Text.LanguageDetectionSkill",
    "inputs": [
      {
        "name": "text",
        "source": "/document/text"
      }
    ],
    "outputs": [...]
  }
```

Если вы хотите убедиться, что весь текст проанализировался, рассмотрите возможность использования функции [разбиения](cognitive-search-skill-textsplit.md).

<a name="web-api-skill-response-contains-warnings"></a>

## <a name="warning-web-api-skill-response-contains-warnings"></a>Предупреждение: отклик о навыках веб-API содержит предупреждения
Индексатору удалось запустить навык в наборе навыков, но ответ от запроса веб-API сообщил о наличии предупреждений во время выполнения. Изучите предупреждения, чтобы понять, как затронутые данные и требуется ли предпринимать какие-либо действия.

<a name="the-current-indexer-configuration-does-not-support-incremental-progress"></a>

## <a name="warning-the-current-indexer-configuration-does-not-support-incremental-progress"></a>Предупреждение: текущая конфигурация индексатора не поддерживает добавочный ход выполнения

Это предупреждение возникает только для источников данных Cosmos DB.

Инкрементное индексирование позволяет восстановить работу индексатора при следующем запуске с того места, в котором она была прервана из-за временных сбоев или ограничения времени выполнения, и избежать таким образом повторного индексирования всей коллекции с нуля. Это особенно важно для индексации больших коллекций.

Возможность возобновления незавершенного задания индексации выполняется с помощью предиката для документов, упорядоченных по `_ts` столбцу. Индексатор использует отметку времени, чтобы определить, какой документ следует выбрать Далее. Если `_ts` столбец отсутствует или индексатор не может определить, упорядочивается ли он с помощью пользовательского запроса, то индексатор начинается в начале, и вы увидите это предупреждение.

Это поведение можно переопределить, включив инкрементный ход выполнения и отменив это предупреждение с помощью `assumeOrderByHighWatermarkColumn` Свойства Configuration.

Дополнительные сведения см. в разделе [инкрементный прогресс и пользовательские запросы](search-howto-index-cosmosdb.md#IncrementalProgress).

<a name="some-data-was-lost-during projection-row-x-in-table-y-has-string-property-z-which-was-too-long"></a>

## <a name="warning-some-data-was-lost-during-projection-row-x-in-table-y-has-string-property-z-which-was-too-long"></a>Предупреждение: некоторые данные были потеряны во время проекции. Строка "X" в таблице "Y" имеет слишком длинное строковое свойство "Z".

[Служба хранилища таблиц](https://azure.microsoft.com/services/storage/tables) имеет ограничения на то, как могут быть большие [свойства сущности](/rest/api/storageservices/understanding-the-table-service-data-model#property-types) . Строки могут содержать не более 32 000 символов. Если проецируется строка со строковым свойством длиннее 32 000 символов, то сохраняются только первые 32 000 символов. Чтобы обойти эту ошибку, Избегайте проецирования строк со строковыми свойствами длиннее 32 000 символов.

<a name="truncated-extracted-text-to-x-characters"></a>

## <a name="warning-truncated-extracted-text-to-x-characters"></a>Предупреждение: усеченный извлеченный текст с символами X
Индексаторы ограничивают объем текста, который можно извлечь из одного документа. Это ограничение зависит от ценовой категории: 32 000 символов для уровня Free, 64 000 для Basic, 4 000 000 для Standard, 8 000 000 для Standard S2 и 16 000 000 для уровня Standard S3. Текст, который был усечен, не будет индексироваться. Чтобы избежать этого предупреждения, попробуйте разбить документы с большим объемом текста на несколько небольших документов. 

Дополнительные сведения см. в разделе [ограничения индексатора](search-limits-quotas-capacity.md#indexer-limits).

<a name="could-not-map-output-field-x-to-search-index"></a>

## <a name="warning-could-not-map-output-field-x-to-search-index"></a>Предупреждение: не удалось соотнести выходное поле "X" с индексом поиска
Сопоставления полей вывода, которые ссылаются на несуществующие или нулевые данные, выдают предупреждения для каждого документа и получают пустое поле индекса. Чтобы решить эту проблему, дважды проверьте выходные данные сопоставления полей вывода для возможных опечаток или задайте значение по умолчанию, используя [Условный навык](cognitive-search-skill-conditional.md#sample-skill-definition-2-set-a-default-value-for-a-value-that-doesnt-exist). Дополнительные сведения см. в разделе [сопоставление полей вывода](cognitive-search-output-field-mapping.md) .

| Причина | Сведения/пример | Решение |
| --- | --- | --- |
| Невозможно выполнить итерацию для массива, не являющегося массивом | "Невозможно выполнить итерацию для массива, не являющегося массивом `/document/normalized_images/0/imageCelebrities/0/detail/celebrities` ." | Эта ошибка возникает, когда выходные данные не являются массивом. Если вы считаете, что выходные данные должны быть массивом, проверьте указанный путь к исходному полю источника выходных данных на наличие ошибок. Например, `*` в имени исходного поля может отсутствовать или быть лишним. Также возможно, что входные данные для этого навыка имеют значение null, что приводит к пустому массиву. В разделе " [Ввод данных о навыках](cognitive-search-common-errors-warnings.md#warning-skill-input-was-invalid) " содержатся аналогичные сведения о недопустимом разделе.    |
| Не удается выбрать `0` в массиве, отличном от массива | "Не удается выбрать `0` в массиве, отличном от массива `/document/pages` . | Это может произойти, если выходные данные опыта не создают массив, а имя поля источника выходных данных содержит индекс массива или `*` в его пути. Проверьте пути, указанные в именах исходных полей вывода, и значение поля для указанного имени поля. В разделе " [Ввод данных о навыках](cognitive-search-common-errors-warnings.md#warning-skill-input-was-invalid) " содержатся аналогичные сведения о недопустимом разделе.  |

<a name="the-data-change-detection-policy-is-configured-to-use-key-column-x"></a>

## <a name="warning-the-data-change-detection-policy-is-configured-to-use-key-column-x"></a>Внимание! политика обнаружения изменений данных настроена для использования ключевого столбца "X"
[Политики обнаружения изменений данных](/rest/api/searchservice/create-data-source#data-change-detection-policies) имеют определенные требования к столбцам, которые они используют для обнаружения изменений. Одно из этих требований заключается в том, что этот столбец обновляется при каждом изменении исходного элемента. Другим требованием является то, что новое значение для этого столбца больше, чем предыдущее значение. Ключевые столбцы не удовлетворяют этому требованию, так как они не меняются при каждом обновлении. Чтобы обойти эту неполадку, выберите другой столбец для политики обнаружения изменений.

<a name="document-text-appears-to-be-utf-16-encoded-but-is-missing-a-byte-order-mark"></a>

## <a name="warning-document-text-appears-to-be-utf-16-encoded-but-is-missing-a-byte-order-mark"></a>Внимание! текст документа выглядит как закодированный в кодировке UTF-16, но в нем отсутствует метка порядка байтов.

[Режимы синтаксического анализа индексатора](/rest/api/searchservice/create-indexer#blob-configuration-parameters) должны знать, как текст кодируется перед синтаксическим анализом. Двумя наиболее распространенными способами кодирования текста являются UTF-16 и UTF-8. UTF-8 — это кодировка переменной длины, где каждый символ имеет длину от 1 до 4 байт. UTF-16 — это кодировка фиксированной длины, в которой каждый символ имеет длину 2 байта. UTF-16 имеет два различных варианта: «с обратным порядком байтов» и «с прямым порядком байтов». Кодировка текста определяется с помощью метки порядка байтов, а также ряда байтов перед текстом.

| Кодирование | Метка порядка байтов |
| --- | --- |
| UTF-16 с обратным порядком байтов | 0xFE 0xFF |
| UTF-16 с прямым порядком байтов | 0xFF 0xFE |
| UTF-8 | 0xEF 0xBB 0xBF |

Если метка порядка байтов отсутствует, предполагается, что текст кодируется как UTF-8.

Чтобы обойти это предупреждение, определите кодировку текста для этого большого двоичного объекта и добавьте соответствующую метку порядка байтов.

<a name="cosmos-db-collection-has-a-lazy-indexing-policy"></a>

## <a name="warning-cosmos-db-collection-x-has-a-lazy-indexing-policy-some-data-may-be-lost"></a>Предупреждение: Cosmos DBная коллекция "X" имеет политику отложенного индексирования. Некоторые данные могут быть потеряны

Коллекции с политиками [отложенного](../cosmos-db/index-policy.md#indexing-mode) индексирования нельзя запрашивать согласованно, что приводит к отсутствующим данным в индексаторе. Чтобы обойти это предупреждение, измените политику индексирования на "постоянная".

## <a name="warning-the-document-contains-very-long-words-longer-than-64-characters-these-words-may-result-in-truncated-andor-unreliable-model-predictions"></a>Предупреждение: документ содержит очень длинные слова (длиннее 64 символов). Эти слова могут привести к усечению и/или ненадежным прогнозам модели.

Это предупреждение передается из службы Анализ текста.  В некоторых случаях можно спокойно проигнорировать это предупреждение, например, если документ содержит длинный URL-адрес (который, скорее всего, не является ключевой фразой или тональности и т. д.).  Имейте в виду, что если слово длиннее 64 символов, оно будет обрезано до 64 символов, что может повлиять на прогнозы модели.