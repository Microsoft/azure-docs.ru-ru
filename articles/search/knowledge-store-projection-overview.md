---
title: Основные понятия проекции
titleSuffix: Azure Cognitive Search
description: Сохраняйте обогащенные данные из конвейера индексирования искусственного интеллекта ии в хранилище знаний для использования в сценариях, отличных от полнотекстового поиска.
manager: nitinme
author: vkurpad
ms.author: vikurpad
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 06/30/2020
ms.openlocfilehash: 22db4f95bacd926208ac7edf3306cd136d81b00e
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "85565195"
---
# <a name="knowledge-store-projections-in-azure-cognitive-search"></a>"Проекции" магазина базы знаний в Azure Когнитивный поиск

Azure Когнитивный поиск позволяет расширить содержимое с помощью встроенных навыков и пользовательских навыков в процессе индексирования. Обогащение создают новые сведения, не существовавшие ранее: извлечение информации из изображений, обнаружение тональности, ключевых фраз и сущностей из текста. Дополнения также добавляют структуру к неструктурированному тексту. Все эти процессы приводят к созданию документов, которые делают полнотекстовый поиск более эффективным. Во многих случаях обогащенные документы полезны для сценариев, отличных от поиска, например для интеллектуального анализа знаний.

Проекции, компонент [хранилища знаний](knowledge-store-concept-intro.md), представляют собой представления расширенных документов, которые можно сохранить в физическом хранилище в целях интеллектуального анализа знаний. Проекция позволяет "проецировать" свои данные в фигуру, которая соответствует вашим потребностям, сохраняя связи, чтобы такие средства, как Power BI, могли считывать данные без дополнительных усилий.

Проекции могут быть табличными, с данными, хранящимися в строках и столбцах в хранилище таблиц Azure, или в объектах JSON, хранящихся в хранилище BLOB-объектов Azure. Можно определить несколько проекций данных, так как они дополняются углублением. Несколько проекций удобно использовать, если вы хотите, чтобы одни и те же данные отличались для отдельных вариантов использования.

Хранилище базы знаний поддерживает три типа проекций:

+ **Таблицы**. для данных, которые лучше представить в виде строк и столбцов, проекции таблиц позволяют определить схематизированных форму или проекцию в хранилище таблиц. Только допустимые объекты JSON можно запланировать как таблицы, в дополненном документе могут содержаться узлы, не имеющие именованных объектов JSON, а при проецировании этих объектов создается допустимый объект JSON с навыком или встроенным изменением формы.

+ **Объекты**. Если вам нужно представление JSON данных и дополнений, проекции объектов сохраняются как большие двоичные объекты. Только допустимые объекты JSON могут быть проецированы как объекты, в дополненном документе могут содержаться узлы, которые не называются объектами JSON, и при проецировании этих объектов Создайте допустимый объект JSON с навыком или встроенным изменением формы.

+ **Файлы**. Если необходимо сохранить изображения, извлеченные из документов, проектные проекции позволяют сохранить нормализованные изображения в хранилище BLOB-объектов.

Чтобы просмотреть проекции, определенные в контексте, пошаговое [Создание хранилища знаний в неактивных данных](knowledge-store-create-rest.md).

## <a name="projection-groups"></a>Группы проекций

В некоторых случаях необходимо проецировать обогащенные данные на разных фигурах в соответствии с различными целями. Хранилище знаний позволяет определить несколько групп проекций. Группы проекций имеют следующие основные характеристики взаимной исключительные праваи и взаимосвязи.

### <a name="mutual-exclusivity"></a>Взаимная исключительные права

Все содержимое, проецированное в одну группу, не зависит от данных, проецируемых в другие группы проекций.
Эта независимость подразумевает, что одни и те же данные могут быть разными, но повторяться в каждой группе проекций.

### <a name="relatedness"></a>Взаимосвязь

Группы проекции теперь позволяют проецировать документы между типами проекции, сохраняя связи между типами проекций. Все содержимое, проецируемое в одной группе проекции, сохраняет связи между данными в разных типах проекций. В таблицах связи основываются на созданном ключе, и каждый дочерний узел оставляет ссылку на родительский узел. В разных типах (таблицах, объектах и файлах) связи сохраняются, когда один узел проецируется по разным типам. Например, рассмотрим сценарий, в котором есть документ, содержащий изображения и текст. Можно проецировать текст в таблицы или объекты и изображения в файлы, в которых таблицы или объекты имеют столбец или свойство, содержащие URL-адрес файла.

## <a name="input-shaping"></a>Формирование ввода

Получение данных в правой форме или структуре является ключом к эффективному использованию, они являются таблицами или объектами. Возможность формирования или структурирования данных в зависимости от того, как вы планируете обращаться к ним и использовать ее, является ключевой возможностью, предоставляемой **в качестве навыка** для набора навыков.  

Проекции проще определить при наличии в дереве обогащения объекта, соответствующего схеме проекции. Обновленные [навыки работы с фигурами](cognitive-search-skill-shaper.md) позволяют создать объект из различных узлов дерева обогащения и сделать его родительским для нового узла. Уровень навыка " **фигура** " позволяет определять сложные типы с вложенными объектами.

Если определена новая фигура, содержащая все элементы, которые необходимо проецировать, эту фигуру теперь можно использовать в качестве источника для проекций или в качестве входных данных для другого навыка.

## <a name="projection-slicing"></a>Срез проекции

При определении группы проекций один узел в дереве обогащения может быть разбит на несколько связанных таблиц или объектов. Добавление проекции с исходным путем, который является дочерним по отношению к существующей проекции, приведет к тому, что дочерний узел выделится из родительского узла и проецируется в новую, но связанную таблицу или объект. Этот метод позволяет определить один узел в навыке, который может быть источником для всех проекций.

## <a name="table-projections"></a>Проекции таблиц

Так как это упрощает импорт, мы рекомендуем использовать проекции таблиц для просмотра данных с помощью Power BI. Кроме того, проекции таблиц позволяют изменять количество элементов между связями между таблицами. 

Можно проецировать один документ в индексе в несколько таблиц, сохраняя связи. При проецировании на несколько таблиц в каждой таблице будет отображаться полная фигура, если только дочерний узел не является источником другой таблицы в той же группе.

### <a name="defining-a-table-projection"></a>Определение проекции таблицы

При определении проекции таблицы в `knowledgeStore` элементе набора навыков Начните с сопоставления узла в дереве обогащения с источником таблицы. Обычно этот узел является выходными данными о **навыках** , добавленных в список навыков для создания конкретной формы, необходимой для проецирования в таблицы. Выбранный для проекта узел можно разделить на несколько таблиц. Определение таблиц — это список таблиц, которые необходимо проецировать.

Для каждой таблицы требуются три свойства:

+ tableName: имя таблицы в службе хранилища Azure.

+ Женератедкэйнаме: имя столбца для ключа, уникально идентифицирующего эту строку.

+ Источник. узел из дерева обогащения, из которого вы исследуете свои дополнения. Этот узел обычно является выходными данными фигуры, но может быть выходом любого из навыков.

Ниже приведен пример проекций таблицы.

```json
{
    "name": "your-skillset",
    "skills": [
      …your skills
    ],
"cognitiveServices": {
… your cognitive services key info
    },

    "knowledgeStore": {
      "storageConnectionString": "an Azure storage connection string",
      "projections" : [
        {
          "tables": [
            { "tableName": "MainTable", "generatedKeyName": "SomeId", "source": "/document/EnrichedShape" },
            { "tableName": "KeyPhrases", "generatedKeyName": "KeyPhraseId", "source": "/document/EnrichedShape/*/KeyPhrases/*" },
            { "tableName": "Entities", "generatedKeyName": "EntityId", "source": "/document/EnrichedShape/*/Entities/*" }
          ]
        },
        {
          "objects": [ ]
        },
        {
            "files": [ ]
        }
      ]
    }
}
```

Как показано в этом примере, ключевые фразы и сущности моделируются в разные таблицы и будут содержать ссылку на родительский элемент (MainTable) для каждой строки.

## <a name="object-projections"></a>Проекции объектов

Проекции объектов — это представления JSON дерева обогащения, которые могут быть источником из любого узла. Во многих случаях для создания проекции объекта можно использовать **тот же навык** , который создает проекцию таблицы. 

```json
{
    "name": "your-skillset",
    "skills": [
      …your skills
    ],
"cognitiveServices": {
… your cognitive services key info
    },

    "knowledgeStore": {
      "storageConnectionString": "an Azure storage connection string",
      "projections" : [
        {
          "tables": [ ]
        },
        {
          "objects": [
            {
              "storageContainer": "hotelreviews", 
              "source": "/document/hotel"
            }
          ]
        },
        {
            "files": [ ]
        }
      ]
    }
}
```

Для создания проекции объекта требуется несколько атрибутов, характерных для объекта:

+ storageContainer: контейнер больших двоичных объектов, в котором будут сохранены объекты
+ Source: путь к узлу дерева обогащения, который является корнем проекции

## <a name="file-projection"></a>Проекция файла

Проекции файлов похожи на проекции объектов и работают только с `normalized_images` коллекцией. Аналогично проекциям объектов, проекции файлов сохраняются в контейнере больших двоичных объектов с префиксом в виде папки для идентификатора документа в кодировке Base64. Проекции файлов не могут совместно использовать один контейнер с проекциями объектов и должны быть проецированы в другой контейнер.

```json
{
    "name": "your-skillset",
    "skills": [
      …your skills
    ],
"cognitiveServices": {
… your cognitive services key info
    },

    "knowledgeStore": {
      "storageConnectionString": "an Azure storage connection string",
      "projections" : [
        {
          "tables": [ ]
        },
        {
          "objects": [ ]
        },
        {
            "files": [
                 {
                  "storageContainer": "ReviewImages",
                  "source": "/document/normalized_images/*"
                }
            ]
        }
      ]
    }
}
```

## <a name="projection-lifecycle"></a>Жизненный цикл проекции

У ваших проекций есть жизненный цикл, связанный с исходными данными в источнике данных. По мере обновления и повторного индексирования данных проекции обновляются с учетом результатов обогащения, гарантируя, что проекции в конечном итоге согласуются с данными в источнике данных. Проекции наследуют политику удаления, настроенную для индекса. Проекции не удаляются при удалении индексатора или самой службы поиска.

## <a name="using-projections"></a>Использование проекций

После выполнения индексатора можно считывать проецированные данные в контейнерах или таблицах, заданных с помощью проекций.

Для аналитики исследование в Power BI — это просто Настройка табличного хранилища Azure в качестве источника данных. Вы можете легко создать набор визуализаций на основе данных, используя связи в.

Кроме того, если необходимо использовать обогащенные данные в конвейере обработки и анализа данных, вы можете [загрузить данные из больших двоичных объектов в Pandas](../machine-learning/team-data-science-process/explore-data-blob.md).

Наконец, если необходимо экспортировать данные из хранилища знаний, в фабрике данных Azure есть соединители для экспорта данных и их размещения в выбранной базе данных. 

## <a name="next-steps"></a>Дальнейшие действия

В качестве следующего шага создайте первое хранилище знаний, используя образцы данных и инструкции.

> [!div class="nextstepaction"]
> [Создание хранилища знаний в оставшейся базе данных](knowledge-store-create-rest.md).

Чтобы узнать больше о дополнительных концепциях проекций, таких как создание срезов, встроенное формирование и связи, начните с [определения проекций в хранилище знаний](knowledge-store-projections-examples.md)

> [!div class="nextstepaction"]
> [Определение проекций в хранилище знаний](knowledge-store-projections-examples.md)
