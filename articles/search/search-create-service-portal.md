---
title: Создание службы "Когнитивный поиск Azure" на портале
titleSuffix: Azure Cognitive Search
description: В этом кратком руководстве по порталу вы узнаете, как создать ресурс "Когнитивный поиск Azure" на портале Azure. Выберите группы ресурсов, регионы, а также номер SKU или ценовую категорию.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: quickstart
ms.date: 02/15/2021
ms.openlocfilehash: e183d81355d4db81e677f34b02330ddb9b631957
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "100651992"
---
# <a name="quickstart-create-an-azure-cognitive-search-service-in-the-portal"></a>Краткое руководство. Создание службы "Когнитивный поиск Azure" на портале

[Когнитивный поиск Azure](search-what-is-azure-search.md) — это ресурс Azure, используемый для добавления возможностей полнотекстового поиска в пользовательские приложения. Вы можете с легкостью интегрировать его со многими другими службами Azure, которые предоставляют данные или дополнительные средства обработки, с приложениями на серверах сети или с программным обеспечением, работающим на других облачных платформах.

Службу поиска можно создать с помощью [портала Azure](https://portal.azure.com/), как описано в этой статье. Можно также использовать [Azure PowerShell](search-manage-powershell.md), [Azure CLI](/cli/azure/search), [REST API управления](/rest/api/searchmanagement/) или [шаблон службы Azure Resource Manager](https://azure.microsoft.com/resources/templates/101-azure-search-create/).

[![Анимированный GIF-файл](./media/search-create-service-portal/AnimatedGif-AzureSearch-small.gif)](./media/search-create-service-portal/AnimatedGif-AzureSearch.gif#lightbox)

## <a name="before-you-start"></a>Перед началом работы

Следующие свойства службы фиксируются на все время существования службы, и для изменения любого из них требуется создать новую службу. Поскольку они фиксируются, учитывайте их влияние на использование при заполнении каждого свойства:

+ Имя службы станет частью конечной точки URL-адреса (изучите [советы](#name-the-service) по содержательным именам служб).
+ [Уровень служб](search-sku-tier.md) влияет на выставление счетов и задает верхний лимит производительности. Некоторые функции недоступны для бесплатного уровня.
+ Доступность определенных сценариев определяется регионом службы. Если вы нуждаетесь в [функциях высокого уровня безопасности](search-security-overview.md) или [обогащении с помощью ИИ](cognitive-search-concept-intro.md), вам необходимо создать службу "Когнитивный поиск Azure" в том же регионе, что и другие службы, или в регионах, которые предоставляют нужные функции. 

## <a name="subscribe-free-or-paid"></a>Подписка (бесплатная или платная)

[Откройте бесплатную учетную запись Azure](https://azure.microsoft.com/pricing/free-trial/?WT.mc_id=A261C142F) и используйте бесплатные кредиты, чтобы опробовать платные службы Azure. После того, как кредиты будут израсходованы, сохраните свою учетную запись. Вы сможете использовать ее для работы с бесплатными службами Azure, такими как веб-сайты. С вашей кредитной карты не будет взиматься плата, если вы явно не измените параметры и не попросите снимать плату.

Кроме того, вы можете [активировать преимущества подписчика MSDN](https://azure.microsoft.com/pricing/member-offers/msdn-benefits-details/?WT.mc_id=A261C142F). Подписка MSDN каждый месяц приносит вам кредиты, которыми можно оплачивать использование платных служб Azure. 

## <a name="find-azure-cognitive-search"></a>Как найти Когнитивный поиск Azure

1. Войдите на [портал Azure](https://portal.azure.com/).

1. Щелкните знак плюса ( **+ Создать ресурс**) в левом верхнем углу.

1. Используйте панель поиска, чтобы найти Когнитивный поиск Azure, или перейдите к ресурсу, выбрав **Веб** > **Azure Cognitive Search** (Когнитивный поиск Azure).

:::image type="content" source="media/search-create-service-portal/find-search3.png" alt-text="Создание ресурса на портале" border="false":::

## <a name="choose-a-subscription"></a>Выберите подписку.

Если у вас есть несколько подписок, выберите ту, которую будете использовать. Если вы реализуете [двойное шифрование](search-security-overview.md#double-encryption) или другие функции, которые зависят от удостоверений управляемых служб, выберите ту же подписку, что и для Azure Key Vault или других служб, для которых используются управляемые удостоверения.

## <a name="set-a-resource-group"></a>Настройка группы ресурсов

Группа ресурсов — это контейнер, содержащий связанные ресурсы для решения Azure. Он необходим для службы поиска. Это также полезно для управления ресурсами, включая затраты. Группа ресурсов может включать одну или несколько служб, используемых совместно. Например, если вы используете Когнитивный поиск Azure для индексирования базы данных Azure Cosmos DB, можно разместить обе службы в одной группу ресурсов для удобства управления. 

Если вы не объединяете ресурсы в одну группу или если существующие группы ресурсов заполнены ресурсами, используемыми в несвязанных решениях, создайте новую группу ресурсов только для своего ресурса Когнитивный поиск Azure. 

:::image type="content" source="media/search-create-service-portal/new-resource-group.png" alt-text="Создание группы ресурсов" border="false":::

Со временем вы можете контролировать текущие и запланированные затраты, а также просматривать расходы по отдельным ресурсам. На следующем снимке экрана показан тип сведений о затратах, которые можно увидеть при объединении нескольких ресурсов в одну группу.

:::image type="content" source="media/search-create-service-portal/resource-group-cost-management.png" alt-text="Управление затратами на уровне группы ресурсов" border="false":::

> [!TIP]
> Группы ресурсов упрощают очистку, поскольку при удалении группы также удаляются все службы внутри нее. Если проект прототипа использует нескольких служб, то, поместив их все в одну группу ресурсов, можно упростить очистку после завершения этого проекта.

## <a name="name-the-service"></a>Присвоение имени службе

В разделе сведений об экземпляре введите имя службы в поле **URL-адрес**. Это имя является частью URL-адреса конечной точки, к которой отправляются вызовы API: `https://your-service-name.search.windows.net`. Например, если вы хотите, чтобы конечная точка была `https://myservice.search.windows.net`, вы должны ввести `myservice`.

Требования к имени службы:

+ имя должно быть уникальным в пределах пространства имен search.windows.net;
+ длина имени — от 2 до 60 знаков;
+ имя должно содержать строчные буквы, цифры или дефисы ("-");
+ имя не должно содержать дефис ("-") в первых двух и последней позициях;
+ нельзя использовать несколько последовательных дефисов ("--") в любой позиции.

> [!TIP]
> Если вы считаете, что будете использовать несколько служб, мы рекомендуем использовать соглашение об именовании, по которому в имя службы добавляется название региона или расположения. Службы в одном регионе могут обмениваться данными без дополнительной оплаты. Таким образом, если Когнитивный поиск Azure находится в регионе "западная часть США", где у вас есть и другие службы, имя вида `mysearchservice-westus` позволит вам не открывать лишний раз страницу свойств при выборе ресурсов для объединения или присоединения.

## <a name="choose-a-location"></a>Выбор расположения

Когнитивный поиск Azure доступен в большинстве регионов, как описано на странице [Доступность продуктов по регионам](https://azure.microsoft.com/global-infrastructure/services/?products=search). В целом, если вы используете несколько служб Azure, выберите регион, в котором также размещена ваша служба данных или служба приложения. Это приводит к снижению или отсутствию расходов на пропускную способность для исходящих данных (за исходящие данные не взимается плата, если службы находятся в одном регионе).

+ Для [обогащения с помощью ИИ](cognitive-search-concept-intro.md) требуется, чтобы службы Cognitive Services находились в том же физическом регионе, что и Когнитивный Поиск Azure. Существует всего несколько регионов, которые не предоставляют оба решения. На странице [Доступность продуктов по регионам](https://azure.microsoft.com/global-infrastructure/services/?products=search) показаны две строки с флажками. Для недоступного сочетания флажки отсутствуют.

  :::image type="content" source="media/search-create-service-portal/region-availability.png" alt-text="Доступность по регионам" border="true":::

+ Следует обеспечить выполнение требований к непрерывности бизнес-процессов и аварийному восстановлению (BCDR), создавая несколько служб поиска в [парах регионов](../best-practices-availability-paired-regions.md#azure-regional-pairs). Например, если вы работаете в Северной Америке, для каждой службы можно выбрать пары регионов "Восточная часть США и Западная часть США" или "Центрально-северная часть США" и "Центрально-южная часть США".

Некоторые функции имеют ограниченную доступность при размещении в определенных регионах. Ограничения описаны в соответствующей документации:

+ [Двойное шифрование](search-security-overview.md#double-encryption)

+ [Использование Зон доступности в большом масштабе для повышения производительности](search-performance-optimization.md#availability-zones).

## <a name="choose-a-pricing-tier"></a>Выбор ценовой категории

Служба "Когнитивный поиск Azure" сейчас предлагается в [нескольких ценовых категориях](https://azure.microsoft.com/pricing/details/search/): "Бесплатный", "Базовый", "Стандартный" и "Оптимизировано для операций в хранилище". Каждая категория отличается собственным [объемом и ограничениями](search-limits-quotas-capacity.md). Подробные сведения см. в статье [Выбор ценовой категории для службы "Когнитивный поиск Azure"](search-sku-tier.md).

Ценовые категории "Базовый" и "Стандартный" чаще всего используются для рабочих нагрузок, но большинство клиентов начинает работу с уровня службы "Бесплатный". Основные различия между уровнями: размер секции и скорость, а также ограничения на количество объектов, которые можно создать.

Но не забывайте, что после создания службы ценовую категорию изменить нельзя. Если потребуется повысить или понизить категорию, нужно будет повторно создать службу.

## <a name="create-your-service"></a>Создание службы

Когда вы предоставите необходимые входные данные, переходите к созданию службы. 

:::image type="content" source="media/search-create-service-portal/new-service3.png" alt-text="Проверка и создание службы" border="false":::

Служба развертывается в течение нескольких минут. Ход выполнения можно отслеживать с помощью уведомлений Azure. Рассмотрите возможность закрепления службы на панели мониторинга для быстрого доступа в будущем.

:::image type="content" source="media/search-create-service-portal/monitor-notifications.png" alt-text="Мониторинг и закрепление службы" border="false":::

## <a name="get-a-key-and-url-endpoint"></a>Получение ключа и конечной точки URL-адреса

Если вы не используете портал, для программного доступа к новой службе необходимо указать конечную точку URL-адреса и API-ключ аутентификации.

1. Найдите и скопируйте конечную точку URL-адреса в правой части страницы **Обзор**.

1. На странице **Ключи** скопируйте любой из ключей администратора (они равноценны). API-ключи администратора необходимы для создания, обновления и удаления объектов в службе. Ключи запроса, напротив, предоставляют доступ для чтения к содержимому индекса.

   :::image type="content" source="media/search-create-service-portal/get-url-key.png" alt-text="Страница обзора службы с конечной точкой URL-адреса" border="false":::

Конечная точка и ключ не нужны для задач портала. Портал уже связан с вашим ресурсом службы "Когнитивный поиск Azure" с правами администратора. Для изучения пошагового руководства портала, начните с [краткого руководства. Создание индекса службы "Когнитивный поиск Azure" на портале](search-get-started-portal.md).

## <a name="scale-your-service"></a>Выполните масштабирование службы

Подготовив службу, вы можете выполнить ее масштабирование в соответствии со своими потребностями. Выбрав уровень "Стандартный" для службы "Когнитивный поиск Azure", вы сможете масштабировать свою службу в двух измерениях: репликах и секциях. Если вы выбрали уровень "Базовый", то сможете добавлять только реплики. Если подготовлена бесплатная служба, масштабирование будет недоступно.

***Секции*** позволяют службе хранить данные и осуществлять поиск в большем количестве документов.

***Реплики*** дают службе возможность справляться с повышенной нагрузкой запросов поиска.

Добавление ресурсов увеличивает ваш ежемесячный счет. [Калькулятор цен](https://azure.microsoft.com/pricing/calculator/) поможет вам понять, как выставляются счета при добавлении ресурсов. Помните, что вы можете выбирать число ресурсов на основе нагрузки. Например, вы можете сначала увеличить число ресурсов для создания полного начального индекса, а затем уменьшить его до уровня, который больше подходит для добавочного индексирования.

> [!Important]
> У службы должно быть [2 реплики для выполнения соглашения об уровне обслуживания только для чтения и 3 реплики для выполнения соглашения об уровне обслуживания чтения и записи](https://azure.microsoft.com/support/legal/sla/search/v1_0/).

1. Перейдите к странице своей службы поиска на портале Azure.
1. В области навигации слева щелкните **Параметры** > **Масштаб**.
1. Используйте ползунок, чтобы добавить ресурсы любого типа.

:::image type="content" source="media/search-create-service-portal/settings-scale.png" alt-text="Добавление емкости через реплики и секции" border="false":::

> [!Note]
> Хранение на уровне раздела и скорость увеличивается на более высоких уровнях. Дополнительные сведения см. в разделе [Service limits in Azure Search](search-limits-quotas-capacity.md) (Ограничения службы поиска Azure).

## <a name="when-to-add-a-second-service"></a>Когда следует добавлять вторую службу

Большинство пользователей использует только одну службу, подготовленную на уровне, который обеспечивает [правильный баланс ресурсов](search-sku-tier.md). В одной службе может размещаться несколько индексов с учетом [максимального ограничения выбранного уровня](search-capacity-planning.md), при этом все индексы изолированы друг от друга. В Когнитивном поиске Azure запросы могут направляться только в один индекс, сводя к минимуму вероятность случайного или преднамеренного получения данных из других индексов в той же службе.

Несмотря на то, что большинство пользователей использует только одну службу, избыточность служб может потребоваться, если в эксплуатационных целях необходимо обеспечить следующее:

+ [Непрерывность бизнес-процессов и аварийное восстановление (BCDR)](../best-practices-availability-paired-regions.md). Когнитивный поиск Azure не обеспечивает немедленную отработку отказа в случае сбоя.

+ [Многоклиентские архитектуры](search-modeling-multitenant-saas-applications.md) иногда вызывают две или более служб.

+ Глобально развернутые приложения могут потребовать службы поиска в каждой географической области для снижения задержки.

> [!NOTE]
> В Когнитивном поиске Azure невозможно разделить индексирование и операции запросов, то есть вы не сможете создать несколько служб для разделенных рабочих нагрузок. Индекс всегда запрашивается в службе, в которой он был создан (невозможно создать индекс в одной службе и скопировать его на другую).

Для обеспечения высокого уровня доступности вторая служба не является обязательной. Высокая доступность для запросов достигается за счет использования двух или более реплик в одной службе. Обновление реплик выполняется последовательно, то есть при развертывании обновления службы должна работать по крайней мере одна реплика. Дополнительные сведения об обеспечении бесперебойной работы см. в [Соглашении об уровне обслуживания](https://azure.microsoft.com/support/legal/sla/search/v1_0/).

## <a name="next-steps"></a>Дальнейшие действия

После подготовки службы вы можете продолжить создание своего первого индекса на портале.

> [!div class="nextstepaction"]
> [Краткое руководство. по созданию индекса службы "Когнитивный поиск Azure" на портале](search-get-started-portal.md)

Хотите оптимизировать и сократить ваши расходы на облако?

> [!div class="nextstepaction"]
> [Начните анализировать затраты с помощью службы "Управление затратами"](../cost-management-billing/costs/quick-acm-cost-analysis.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn)