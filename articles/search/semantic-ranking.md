---
title: Семантический рейтинг
titleSuffix: Azure Cognitive Search
description: Узнайте, как алгоритм семантического ранжирования работает в Azure Когнитивный поиск.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 03/22/2021
ms.openlocfilehash: bf311eb2b2d0ff7a9c17380d2e384bc05c6f05f3
ms.sourcegitcommit: f0a3ee8ff77ee89f83b69bc30cb87caa80f1e724
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/26/2021
ms.locfileid: "105562041"
---
# <a name="semantic-ranking-in-azure-cognitive-search"></a>Семантический рейтинг в Azure Когнитивный поиск

> [!IMPORTANT]
> Функции семантического поиска доступны в общедоступной предварительной версии, доступной в предварительной версии REST API и на портале. Функции предварительной версии предлагаются "как есть", в [дополнение к дополнительным условиям использования](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)и не обязательно должны иметь одинаковую реализацию при общедоступной доступности. Эти функции являются оплачиваемыми. Дополнительные сведения см. в разделе [доступность и цены](semantic-search-overview.md#availability-and-pricing).

Семантические ранжирование — это расширение конвейера выполнения запросов, которое повышает точность путем повторного ранжирования верхних совпадений исходного результирующего набора. Семантические ранжирование поддерживается большими сетями на основе преобразователя, обученными для захвата семантического значения терминов запроса, в отличие от лингвистического сопоставления по ключевым словам. В отличие от [алгоритма ранжирования сходства по умолчанию](index-ranking-similarity.md), семантический ранжирование использует контекст и значение слов для определения релевантности.

Семантические ранжирование — это и ресурсы, и время. Чтобы завершить обработку в рамках ожидаемой задержки операции запроса, входные данные для семантического ранжирования объединяются и уменьшаются, чтобы можно было как можно быстрее выполнить базовые операции формирования сводных данных и повторного ранжирования.

## <a name="pre-processing"></a>Предварительная обработка

Перед оценкой релевантности содержимое должно быть уменьшено до управляемого количества входов, которое может быть эффективно обработано семантическим ранжированием.

1. Во первых, уменьшение содержимого начинается с начального набора результатов, возвращенного [алгоритмом ранжирования сходства](index-ranking-similarity.md) по умолчанию, который используется для поиска по ключевым словам. Для любого заданного запроса результаты могут быть нескольких документов, вплоть до максимального предела в 1 000. Так как обработка большого количества совпадений займет слишком много времени, в семантическом ранжировании будет только самый верхний 50.

   Независимо от числа документов (один или 50) начальный результирующий набор устанавливает первую итерацию документа совокупности для семантического ранжирования.

1. Далее, по совокупности содержимое каждого поля в "searchFields" извлекается и объединяется в длинную строку.

1. После консолидации строк все строки с чрезмерным длинным периодом усекаются, чтобы обеспечить соответствие общей длины требованиям к входным данным этапа формирования сводных данных.

   Это упражнение заключается в том, почему важно располагать краткие поля сначала в "searchFields", чтобы они были включены в строку. При наличии очень больших документов с полями с большими объемами текста все данные после максимального ограничения игнорируются.

Каждый документ теперь представлен одной длинной строкой.

> [!NOTE]
> Строка состоит из токенов, а не символов или слов. Разметка определяется в зависимости от назначения анализатора в полях с возможностью поиска. Если вы используете специализированный анализатор, например nGram или Едженграм, может потребоваться исключить это поле из searchFields. Чтобы получить представление о том, как строки размечены, можно проверить выходные данные маркера анализатора с помощью [анализатора тестов REST API](/rest/api/searchservice/test-analyzer).

## <a name="extraction"></a>Извлечение

После уменьшения числа строк можно передать уменьшенные входные данные с помощью средств чтения и представления языка компьютера, чтобы определить, какие предложения и фразы лучше всего соответствуют документу, относительно запроса. Этот этап извлекает содержимое из строки, которая будет передвигаться вперед к семантическому ранжированию.

Входы для формирования сводных данных — это длинные строки, получаемые для каждого документа на этапе подготовки. В каждой строке модель формирования сводных данных находит наиболее репрезентативный объект. Это также создает [семантический заголовок](semantic-how-to-query-request.md) для документа. Каждый заголовок доступен в виде простой текстовой версии и выделенной версии, и часто меньше 200 слов на документ.

[Семантический ответ](semantic-answers.md) также будет возвращен, если был указан параметр "Answers", если запрос был создан в качестве вопроса, и если в длинной строке может быть найден объект, который, скорее всего, даст ответ на вопрос.

## <a name="semantic-ranking"></a>Семантический рейтинг

1. Заголовки оцениваются для концептуальной и семантической релевантности относительно предоставленного запроса.

   На следующей схеме показана схема "семантическая релевантность". Рассмотрим термин «капитал», который может использоваться в контексте финансового, закона, географического или грамматического законодательства. Если запрос содержит термины из одного и того же векторного пространства (например, "капитал" и "инвестиции"), то документ, который также содержит токены в одном кластере, будет оцениваться выше, чем на один.

   :::image type="content" source="media/semantic-search-overview/semantic-vector-representation.png" alt-text="Векторное представление для контекста" border="true":::

1. Объект @search.rerankerScore назначается каждому документу на основе семантической релевантности заголовка.

1. После оценки всех документов они перечисляются в порядке убывания по показателям и включаются в полезные данные ответа на запрос. Полезные данные включают ответы, обычный текст и выделенные заголовки, а также все поля, помеченные как извлекаемые или указанные в предложении SELECT.

## <a name="next-steps"></a>Дальнейшие действия

Семантические ранжирование предлагается на стандартных уровнях в конкретных регионах. Дополнительные сведения о доступности и регистрации см. в разделе [доступность и цены](semantic-search-overview.md#availability-and-pricing). Новый тип запроса включает структуры ранжирования и отклика семантического поиска. Чтобы приступить к работе, [Создайте семантический запрос](semantic-how-to-query-request.md).

Кроме того, ознакомьтесь со следующими статьями о ранжировании по умолчанию. Семантические ранжирование зависит от ранжирования для возврата начальных результатов. Знание выполнения запросов и ранжирования позволит вам получить общее представление о работе всего процесса.

+ [Полнотекстовый поиск в Azure Когнитивный поиск](search-lucene-query-architecture.md)
+ [Сходство и оценка в Когнитивном поиске Azure](index-similarity-and-scoring.md)
+ [Анализаторы для обработки текста в Azure Когнитивный поиск](search-analyzers.md)