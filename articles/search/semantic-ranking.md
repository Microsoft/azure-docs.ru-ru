---
title: Семантический рейтинг
titleSuffix: Azure Cognitive Search
description: Описывает алгоритм семантического ранжирования в Когнитивный поиск.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 03/12/2021
ms.openlocfilehash: 01c4d6475ec23b8a55d91e18f49cab27760aa907
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "104604293"
---
# <a name="semantic-ranking-in-azure-cognitive-search"></a>Семантический рейтинг в Azure Когнитивный поиск

> [!IMPORTANT]
> Функции семантического поиска доступны в общедоступной предварительной версии, доступной только в предварительной версии REST API. Функции предварительной версии предлагаются "как есть", в [дополнение к дополнительным условиям использования](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)и не обязательно должны иметь одинаковую реализацию при общедоступной доступности. Дополнительные сведения см. в разделе [доступность и цены](semantic-search-overview.md#availability-and-pricing).

Семантическое ранжирование — это расширение конвейера выполнения запросов, которое улучшает точность и отзыв путем повторного ранжирования верхних совпадений исходного результирующего набора. Семантические ранжирование поддерживается на основе моделей с глубокими возможностями чтения данных на компьютере, обученных для запросов, выраженных на естественном языке, в отличие от лингвистического сопоставления ключевых слов. В отличие от [алгоритма ранжирования сходства по умолчанию](index-ranking-similarity.md), семантический ранжирование использует контекст и значение слов для определения релевантности.

## <a name="how-semantic-ranking-works"></a>Принцип работы семантического ранжирования

Семантические ранжирование — это и ресурсы, и время. Чтобы завершить обработку в рамках ожидаемой задержки операции запроса, модель принимает в качестве входных данных только первые 50 документов, возвращенных из [алгоритма ранжирования сходства](index-ranking-similarity.md)по умолчанию. Результаты первоначального ранжирования могут включать более 50 соответствий, но только первые 50 будут переранжированы в семантическом виде. 

Для семантического ранжирования модель использует как считывание машинного обучения, так и пересылку обучающих материалов для повторной оценки документов в зависимости от того, насколько хорошо один из них соответствует намерению запроса.

### <a name="preparation-passage-extraction-phase"></a>Фаза подготовки (извлечения)

Для каждого документа в начальных результатах предусмотрено упражнение по извлечению, которое определяет ключевые фрагменты. Это уменьшенииное упражнение, которое сокращает содержимое до суммы, которая может быть обработана быстро.

1. Для каждого из 50 документов каждое поле в параметре searchFields вычисляется в последовательности. Содержимое каждого поля консолидируется в одну длинную строку. 

1. Затем производится усечение длинной строки, чтобы общая длина не превышала 8 000 маркеров. По этой причине рекомендуется сначала располагать краткие поля, чтобы они были включены в строку. При наличии очень больших документов с большими объемами текстовых полей все данные после ограничения маркера игнорируются.

1. Каждый документ теперь представлен одной длинной строкой длиной до 8 000 маркеров. Эти строки отправляются в модель формирования сводных данных, что приводит к дальнейшему сокращению строки. Модель формирования сводных данных оценивает длинную строку для ключевых предложений или расхождения, которые лучше всего представляют документ или отвечают на вопрос.

1. Выходные данные этого этапа — это заголовок (и, при необходимости, ответ). Заголовок не более 128 маркеров для каждого документа, и он считается наиболее репрезентативным для документа.

### <a name="scoring-and-ranking-phases"></a>Этапы оценки и ранжирования

На этом этапе все заголовки 50 оцениваются для оценки релевантности.

1. Оценка определяется путем вычисления каждого заголовка для концептуальной и семантической релевантности относительно предоставленного запроса.

   На следующей схеме показана схема "семантическая релевантность". Рассмотрим термин «капитал», который может использоваться в контексте финансового, закона, географического или грамматического законодательства. Если запрос содержит термины из одного и того же векторного пространства (например, "капитал" и "инвестиции"), то документ, который также содержит токены в одном кластере, будет оцениваться выше, чем на один.

   :::image type="content" source="media/semantic-search-overview/semantic-vector-representation.png" alt-text="Векторное представление для контекста" border="true":::

1. Выходные данные этого этапа @search.rerankerScore присвоены каждому документу. После оценки всех документов они перечисляются в порядке убывания и включаются в полезные данные ответа на запрос.

## <a name="next-steps"></a>Дальнейшие действия

Семантические ранжирование предлагается на стандартных уровнях в конкретных регионах. Дополнительные сведения и регистрация см. в разделе [доступность и цены](semantic-search-overview.md#availability-and-pricing). Новый тип запроса включает ранжирование релевантности и структуры отклика семантического поиска. Чтобы приступить к работе, [Создайте семантический запрос](semantic-how-to-query-request.md).

Кроме того, дополнительные сведения см. в одной из следующих статей.

+ [Обзор семантического поиска](semantic-search-overview.md)
+ [Возврат семантического ответа](semantic-answers.md)