---
title: Семантический рейтинг
titleSuffix: Azure Cognitive Search
description: Узнайте, как алгоритм семантического ранжирования работает в Azure Когнитивный поиск.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 03/22/2021
ms.openlocfilehash: c3a0a8bd5805757b92e3f5b046335c8883b4ba72
ms.sourcegitcommit: a67b972d655a5a2d5e909faa2ea0911912f6a828
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "104888929"
---
# <a name="semantic-ranking-in-azure-cognitive-search"></a>Семантический рейтинг в Azure Когнитивный поиск

> [!IMPORTANT]
> Функции семантического поиска доступны в общедоступной предварительной версии, доступной в предварительной версии REST API и на портале. Функции предварительной версии предлагаются "как есть", в [дополнение к дополнительным условиям использования](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)и не обязательно должны иметь одинаковую реализацию при общедоступной доступности. Эти функции являются оплачиваемыми. Дополнительные сведения см. в разделе [доступность и цены](semantic-search-overview.md#availability-and-pricing).

Семантические ранжирование — это расширение конвейера выполнения запросов, которое повышает точность путем повторного ранжирования верхних совпадений исходного результирующего набора. Семантические ранжирование поддерживается большими сетями на основе преобразователя, обученными для захвата семантического значения терминов запроса, в отличие от лингвистического сопоставления по ключевым словам. В отличие от [алгоритма ранжирования сходства по умолчанию](index-ranking-similarity.md), семантический ранжирование использует контекст и значение слов для определения релевантности.

Семантические ранжирование — это и ресурсы, и время. Чтобы завершить обработку в рамках ожидаемой задержки операции запроса, входные данные для семантического ранжирования объединяются и уменьшаются, чтобы можно было как можно быстрее выполнить базовые операции формирования сводных данных и повторного ранжирования.

## <a name="preparation-for-semantic-ranking"></a>Подготовка к семантическому ранжированию

Перед оценкой релевантности содержимое должно быть уменьшено до количества входных данных, которые могут быть эффективно обработаны семантическим ранжированием. Уменьшение содержимого включает следующую последовательность шагов.

1. Уменьшение содержимого начинается с использования начального набора результатов, возвращенного [алгоритмом ранжирования сходства](index-ranking-similarity.md) по умолчанию, который используется для поиска по ключевым словам. Результаты поиска могут содержать до 1 000 соответствий, но семантический рейтинг будет обрабатывать только первые 50. 

   При наличии запроса начальные результаты могут быть гораздо меньше 50 в зависимости от количества найденных совпадений. Независимо от числа документов, первоначальный результирующий набор — это документ совокупности для семантического ранжирования.

1. По документу совокупности содержимое каждого поля в "searchFields" извлекается и объединяется в длинную строку.

1. Все строки, которые имеют слишком много времени, усекаются, чтобы обеспечить соответствие общей длины требованиям к входным данным этапа формирования сводных данных. Это упражнение заключается в том, почему важно располагать краткие поля сначала в "searchFields", чтобы они были включены в строку. При наличии очень больших документов с полями с большими объемами текста все данные после максимального ограничения игнорируются.

Каждый документ теперь представлен одной длинной строкой.

> [!NOTE]
> Входные параметры для моделей — это маркеры, а не символы или слова. Разметка определяется в зависимости от назначения анализатора в полях с возможностью поиска. Чтобы получить представление о том, как строки размечены, можно проверить выходные данные маркера анализатора с помощью [анализатора тестов REST API](/rest/api/searchservice/test-analyzer).

## <a name="summarization"></a>Сводка

После уменьшения числа строк можно передать уменьшенные входные данные с помощью средств чтения и представления языка компьютера, чтобы определить, какие предложения и фразы лучше всего соответствуют документу, относительно запроса.

Входы для формирования сводных данных — это длинные строки, получаемые для каждого документа на этапе подготовки. В соответствии с заданными входными данными модель формирования сводных данных находит объект, который лучше соответствует соответствующему документу. Это также создает [семантический заголовок](semantic-how-to-query-request.md) для документа. Каждый заголовок доступен в виде обычного текста с выделением и меньше 200 слов на документ.

[Семантический ответ](semantic-answers.md) также будет возвращен, если был указан параметр "Answers", если запрос был создан в качестве вопроса, и если в длинной строке может быть найден объект, который, скорее всего, даст ответ на вопрос.

## <a name="scoring-and-ranking"></a>Оценка и ранжирование

1. Заголовки оцениваются для концептуальной и семантической релевантности относительно предоставленного запроса.

   На следующей схеме показана схема "семантическая релевантность". Рассмотрим термин «капитал», который может использоваться в контексте финансового, закона, географического или грамматического законодательства. Если запрос содержит термины из одного и того же векторного пространства (например, "капитал" и "инвестиции"), то документ, который также содержит токены в одном кластере, будет оцениваться выше, чем на один.

   :::image type="content" source="media/semantic-search-overview/semantic-vector-representation.png" alt-text="Векторное представление для контекста" border="true":::

1. Объект @search.rerankerScore назначается каждому документу на основе семантической релевантности заголовка.

1. После оценки всех документов они перечисляются в порядке убывания по показателям и включаются в полезные данные ответа на запрос. Полезные данные включают ответы, обычный текст и выделенные заголовки, а также все поля, помеченные как извлекаемые или указанные в предложении SELECT.

## <a name="next-steps"></a>Дальнейшие действия

Семантические ранжирование предлагается на стандартных уровнях в конкретных регионах. Дополнительные сведения о доступности и регистрации см. в разделе [доступность и цены](semantic-search-overview.md#availability-and-pricing). Новый тип запроса включает структуры ранжирования и отклика семантического поиска. Чтобы приступить к работе, [Создайте семантический запрос](semantic-how-to-query-request.md).

Кроме того, ознакомьтесь со следующими статьями о ранжировании по умолчанию. Семантические ранжирование зависит от ранжирования для возврата начальных результатов. Знание выполнения запросов и ранжирования позволит вам получить общее представление о работе всего процесса.

+ [Полнотекстовый поиск в Azure Когнитивный поиск](search-lucene-query-architecture.md)
+ [Сходство и оценка в Когнитивном поиске Azure](index-similarity-and-scoring.md)
+ [Анализаторы для обработки текста в Azure Когнитивный поиск](search-analyzers.md)