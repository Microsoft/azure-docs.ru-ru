---
title: Семантический рейтинг
titleSuffix: Azure Cognitive Search
description: Узнайте, как алгоритм семантического ранжирования работает в Azure Когнитивный поиск.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 03/18/2021
ms.openlocfilehash: 1406f865d60e6715b5f6a974225dc48958e8da6d
ms.sourcegitcommit: 2c1b93301174fccea00798df08e08872f53f669c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104775176"
---
# <a name="semantic-ranking-in-azure-cognitive-search"></a>Семантический рейтинг в Azure Когнитивный поиск

> [!IMPORTANT]
> Функции семантического поиска доступны в общедоступной предварительной версии, доступной только в предварительной версии REST API. Функции предварительной версии предлагаются "как есть", в [дополнение к дополнительным условиям использования](https://azure.microsoft.com/support/legal/preview-supplemental-terms/)и не обязательно должны иметь одинаковую реализацию при общедоступной доступности. Эти функции являются оплачиваемыми. Дополнительные сведения см. в разделе [доступность и цены](semantic-search-overview.md#availability-and-pricing).

Семантическое ранжирование — это расширение конвейера выполнения запросов, которое улучшает точность и отзыв путем повторного ранжирования верхних совпадений исходного результирующего набора. Семантические Ранжирование осуществляется с помощью современных моделей считывания, обученных для запросов, выраженных на естественном языке, в отличие от лингвистического сопоставления ключевых слов. В отличие от [алгоритма ранжирования сходства по умолчанию](index-ranking-similarity.md), семантический ранжирование использует контекст и значение слов для определения релевантности.

Семантические ранжирование — это и ресурсы, и время. Для завершения обработки в рамках ожидаемой задержки операции запроса входные данные объединяются и упрощаются, чтобы можно было как можно быстрее выполнить формирование сводных данных и анализ.

## <a name="preparation-for-semantic-ranking"></a>Подготовка к семантическому ранжированию

Перед оценкой релевантности содержимое должно быть уменьшено до количества параметров, которое может быть эффективно обработано семантическим ранжированием. Уменьшение содержимого включает следующую последовательность шагов.

1. Уменьшение содержимого начинается с использования начальных результатов, возвращенных [алгоритмом ранжирования сходства](index-ranking-similarity.md) по умолчанию, используемым для поиска по ключевым словам. Результаты поиска могут содержать до 1 000 соответствий, но семантический рейтинг будет обрабатывать только первые 50. 

   При наличии запроса начальные результаты могут быть гораздо меньше 50 в зависимости от количества найденных совпадений. Независимо от числа документов, первоначальный результирующий набор — это документ совокупности для семантического ранжирования.

1. По документу совокупности содержимое каждого поля в "searchFields" извлекается и объединяется в длинную строку.

1. Все строки, которые имеют слишком много времени, усекаются, чтобы обеспечить соответствие общей длины входным требованиям модели формирования сводных данных. Это упражнение заключается в том, почему важно располагать краткие поля сначала в "searchFields", чтобы они были включены в строку. При наличии очень больших документов с полями с большими объемами текста все данные после максимального ограничения игнорируются.

Каждый документ теперь представлен одной длинной строкой.

> [!NOTE]
> Входные параметры для моделей — это маркеры, которые не являются символами или словами. Разметка определяется в зависимости от назначения анализатора в полях с возможностью поиска. Чтобы получить представление о том, как строки размечены, можно проверить выходные данные маркера анализатора с помощью [анализатора тестов REST API](/rest/api/searchservice/test-analyzer).
>
> В настоящее время в этой предварительной версии длинные строки могут иметь длину не более 8 000 маркеров. Если при поиске не удается доставить ожидаемый ответ из глубокой части в документе, знание усечения содержимого поможет понять, почему. 

## <a name="summarization"></a>Сводка

После сокращения числа строк можно передать параметры с помощью считывания и представления языка компьютера, чтобы определить, какие предложения и фразы лучше всего подходят для этой модели относительно запроса.

Входные данные для формирования сводных данных представляют собой длинную строку на этапе подготовки. На основе этого входа модель формирования сводных данных оценивает содержимое, чтобы найти наиболее характерные для них фрагменты.

Выходные данные — это [семантический заголовок](semantic-how-to-query-request.md), в виде обычного текста и с выделением. Заголовок меньше, чем длинная строка, обычно меньше 200 слов на документ и считается самым репрезентативным документом. 

[Семантический ответ](semantic-answers.md) также будет возвращен, если был указан параметр "Answers", если запрос был создан в качестве вопроса, и если в длинной строке может быть найден объект, который, скорее всего, даст ответ на вопрос.

## <a name="scoring-and-ranking"></a>Оценка и ранжирование

На этом этапе теперь у вас есть заголовки для каждого документа. Заголовки оцениваются для соответствия запросу.

1. Оценка определяется путем вычисления каждого заголовка для концептуальной и семантической релевантности относительно предоставленного запроса.

   На следующей схеме показана схема "семантическая релевантность". Рассмотрим термин «капитал», который может использоваться в контексте финансового, закона, географического или грамматического законодательства. Если запрос содержит термины из одного и того же векторного пространства (например, "капитал" и "инвестиции"), то документ, который также содержит токены в одном кластере, будет оцениваться выше, чем на один.

   :::image type="content" source="media/semantic-search-overview/semantic-vector-representation.png" alt-text="Векторное представление для контекста" border="true":::

1. Выходные данные этого этапа @search.rerankerScore присвоены каждому документу. После оценки всех документов они перечисляются в порядке убывания и включаются в полезные данные ответа на запрос. Полезные данные включают ответы, обычный текст и выделенные заголовки, а также все поля, помеченные как извлекаемые или указанные в предложении SELECT.

## <a name="next-steps"></a>Дальнейшие действия

Семантические ранжирование предлагается на стандартных уровнях в конкретных регионах. Дополнительные сведения о доступности и регистрации см. в разделе [доступность и цены](semantic-search-overview.md#availability-and-pricing). Новый тип запроса включает ранжирование релевантности и структуры отклика семантического поиска. Чтобы приступить к работе, [Создайте семантический запрос](semantic-how-to-query-request.md).

Кроме того, ознакомьтесь со следующими статьями о ранжировании по умолчанию. Семантические ранжирование зависит от ранжирования для возврата начальных результатов. Знание выполнения запросов и ранжирования позволит вам получить общее представление о работе всего процесса.

+ [Полнотекстовый поиск в Azure Когнитивный поиск](search-lucene-query-architecture.md)
+ [Сходство и оценка в Когнитивном поиске Azure](index-similarity-and-scoring.md)
+ [Анализаторы для обработки текста в Azure Когнитивный поиск](search-analyzers.md)