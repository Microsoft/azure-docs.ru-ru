---
title: Визуализация журналов Когнитивный поиск Azure и метрик с помощью Power BI
description: Визуализация журналов Когнитивный поиск Azure и метрик с помощью Power BI
manager: eladz
author: MarkHeff
ms.author: maheff
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 09/25/2020
ms.openlocfilehash: 4056e892855c06ce6c412ec4a592ebcd97fc11a6
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96325389"
---
# <a name="visualize-azure-cognitive-search-logs-and-metrics-with-power-bi"></a>Визуализация журналов Когнитивный поиск Azure и метрик с помощью Power BI
[Azure когнитивный Поиск](./search-what-is-azure-search.md) позволяет хранить журналы операций и метрики службы для службы поиска в учетной записи хранения Azure. На этой странице приводятся инструкции по визуализации этой информации с помощью приложения шаблона Power BI. Приложение предоставляет подробную информацию о службе поиска, включая сведения об метриках поиска, индексирования, операций и служб.

Вы можете найти Power BI шаблон приложения **Azure когнитивный Поиск: анализ журналов и метрик** в [Power BI приложений Marketplace](https://appsource.microsoft.com/marketplace/apps).

## <a name="how-to-get-started-with-the-app"></a>Как приступить к работе с приложением

1. Включите ведение журнала метрик и ресурсов для службы поиска:

    1. Создание или указание существующей [учетной записи хранения Azure](../storage/common/storage-account-create.md) , в которой можно архивировать журналы
    1. Перейдите к службе Когнитивный поиск Azure в портал Azure
    1. В разделе Мониторинг в левом столбце выберите **параметры диагностики** .

        :::image type="content" source="media/search-monitor-logs-powerbi/diagnostic-settings.png" alt-text="Снимок экрана, показывающий, как выбрать параметры диагностики в разделе &quot;Мониторинг&quot; службы Когнитивный поиск Azure." border="false":::

    1. Выберите **+ Добавить параметр диагностики**
    1. Проверьте **Архив в учетной записи хранения**, укажите сведения об учетной записи хранения и проверьте **OperationLogs** и **аллметрикс** .

        :::image type="content" source="media/search-monitor-logs-powerbi/add-diagnostic-setting.png" alt-text="Снимок экрана, показывающий, как выбрать метрики и ведение журнала ресурсов на странице &quot;параметры диагностики&quot;.":::
    1. Нажмите кнопку **Сохранить**.

1. После включения ведения журнала используйте службу поиска, чтобы начать создавать журналы и метрики. Для отображения контейнеров в хранилище BLOB-объектов с этими журналами потребуется до часа. Вы увидите контейнер **Insights-Logs-operationlogs** для поиска журналов трафика и контейнер **Insights-метрики pt1m** для метрик.

1. Найдите приложение Azure Когнитивный поиск Power BI в [Power BI приложений Marketplace](https://appsource.microsoft.com/marketplace/apps) и установите его в новую или существующую рабочую область. Приложение называется **когнитивный Поиск Azure: анализ журналов и метрик**.

1. После установки приложения выберите приложение из списка приложений в Power BI.

    :::image type="content" source="media/search-monitor-logs-powerbi/azure-search-app-tile.png" alt-text="Снимок экрана, показывающий приложение Когнитивный поиск Azure для выбора из списка приложений.":::

1. Выберите **подключить** для подключения данных

    :::image type="content" source="media/search-monitor-logs-powerbi/get-started-with-your-new-app.png" alt-text="Снимок экрана, показывающий, как подключиться к данным в приложении Когнитивный поиск Azure.":::

1. Введите имя учетной записи хранения, содержащей журналы и метрики. По умолчанию приложение будет просматривать данные за последние 10 дней, но это значение можно изменить с помощью параметра **dayss** .

    :::image type="content" source="media/search-monitor-logs-powerbi/connect-to-storage-account.png" alt-text="Снимок экрана, показывающий, как ввести имя учетной записи хранения и число дней для запроса на странице &quot;подключение к Azure Когнитивный поиск&quot;.":::

1. Выберите **ключ** в качестве метода проверки подлинности и укажите ключ учетной записи хранения. Выберите **частный** в качестве уровня конфиденциальности. Щелкните Войти , чтобы начать процесс загрузки.

    :::image type="content" source="media/search-monitor-logs-powerbi/connect-to-storage-account-step-two.png" alt-text="Снимок экрана, показывающий, как ввести метод проверки подлинности, ключ учетной записи и уровень конфиденциальности на странице Подключение к Когнитивный поиск Azure.":::

1. Дождитесь обновления данных. Это может занять некоторое время в зависимости от объема данных. Вы можете увидеть, обновляются ли данные на основе индикатора ниже.

    :::image type="content" source="media/search-monitor-logs-powerbi/workspace-view-refreshing.png" alt-text="Снимок экрана, показывающий, как прочитать сведения на странице &quot;обновление данных&quot;.":::

1. После завершения обновления данных выберите **когнитивный Поиск отчет Azure** , чтобы просмотреть отчет.

    :::image type="content" source="media/search-monitor-logs-powerbi/workspace-view-select-report.png" alt-text="Снимок экрана, показывающий, как выбрать отчет Когнитивный поиск Azure на странице &quot;обновление данных&quot;.":::

1. Обязательно обновите страницу после открытия отчета, чтобы он открывался с данными.

    :::image type="content" source="media/search-monitor-logs-powerbi/powerbi-search.png" alt-text="Снимок экрана отчета Power BI Когнитивный поиск Azure.":::

## <a name="how-to-change-the-app-parameters"></a>Изменение параметров приложения
Если вы хотите визуализировать данные из другой учетной записи хранения или изменить число дней для запроса данных, выполните следующие действия, чтобы изменить параметры **Days** и **StorageAccount** .

1. Перейдите к Power BIным приложениям, найдите приложение Azure Когнитивный поиск и нажмите кнопку **изменить приложение** , чтобы просмотреть рабочую область.

    :::image type="content" source="media/search-monitor-logs-powerbi/azure-search-app-tile-edit.png" alt-text="Снимок экрана, показывающий, как выбрать кнопку &quot;изменить приложение&quot; для приложения Когнитивный поиск Azure.":::

1. Выберите **Параметры** в параметрах набора данных.

    :::image type="content" source="media/search-monitor-logs-powerbi/workspace-view-select-settings.png" alt-text="Снимок экрана, показывающий, как выбрать параметры из параметров набора данных Когнитивный поиск Azure.":::

1. На вкладке Наборы данных измените значения параметров и нажмите кнопку **Применить**. При возникновении проблемы с подключением обновите учетные данные источника данных на той же странице.

1. Вернитесь в рабочую область и выберите **Обновить сейчас** в параметрах набора данных.

    :::image type="content" source="media/search-monitor-logs-powerbi/workspace-view-select-refresh-now.png" alt-text="Снимок экрана, показывающий, как выбрать пункт &quot;Обновить сейчас&quot; в параметрах набора данных Azure Когнитивный поиск.":::

1. Откройте отчет, чтобы просмотреть обновленные данные. Также может потребоваться обновить отчет, чтобы просмотреть последние данные.

## <a name="troubleshooting"></a>Устранение неполадок
Если вы обнаружите, что данные не отображаются, выполните следующие действия по устранению неполадок:

1. Откройте отчет и обновите страницу, чтобы убедиться, что вы просматриваете последние данные. В отчете есть параметр для обновления данных. Выберите этот параметр, чтобы получить актуальные данные.

1. Убедитесь, что указаны правильные имя учетной записи хранения и ключ доступа. Имя учетной записи хранения должно соответствовать учетной записи, настроенной для журналов службы поиска.

1. Убедитесь, что ваша учетная запись хранения содержит сведения о контейнерах — **журналы-operationlogs** и **Insights-метрики-pt1m** , а каждый контейнер содержит данные. Журналы и метрики будут находиться в нескольких слоях папок.

1. Проверьте, не обновляется ли набор данных. На шаге 8 выше показан индикатор состояния обновления. Если обновление по-прежнему выполняется, дождитесь завершения обновления, чтобы открыть и обновить отчет.

## <a name="next-steps"></a>Дальнейшие действия
[Дополнительные сведения об Azure Когнитивный поиск](./index.yml)

[Что такое Power BI?](/power-bi/fundamentals/power-bi-overview)

[Основные понятия для разработчиков в службе Power BI](/power-bi/service-basic-concepts)