---
title: Основные понятия хранилища знаний
titleSuffix: Azure Cognitive Search
description: Отправляйте обогащенные документы в службу хранилища Azure, где их можно хранить, просматривать и преобразовывать, а также обеспечивать доступ к ним службе "Когнитивный поиск Azure" и другим приложениям.
author: HeidiSteen
manager: nitinme
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 06/30/2020
ms.openlocfilehash: 3ec556c6198a00f217568f6591bd4b43c7fc743e
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "88924305"
---
# <a name="knowledge-store-in-azure-cognitive-search"></a>Хранилище знаний в Azure Когнитивный поиск

Хранилище знаний — это компонент Когнитивного поиска Azure, который сохраняет выходные данные [конвейера обогащения с помощью ИИ](cognitive-search-concept-intro.md), для независимого анализа или обработки. *Обогащенный документ* — это выходные данные конвейера, созданные из содержимого, которое было извлечено, структурировано и проанализировано с использованием процессов ИИ. В стандартном конвейере на основе ИИ обогащенные документы являются временными и используются только во время индексирования, а затем удаляются. Выбор для создания хранилища знаний позволит сохранить обогащенные документы. 

Если вы ранее использовали когнитивные навыки, то знаете, что документ можно подвергнуть серии операций обогащения с помощью *наборов навыков*. Результат может быть индексом поиска или проекциями в хранилище знаний. Два выходных значения, индекс поиска и хранилище знаний, — это продукты одного конвейера, производные от одних и тех же входных данных, но результат структурирован, сохранен и использован разными способами.

Физически хранилищем знаний является [служба хранилища Azure](../storage/common/storage-account-overview.md) (хранилище таблиц Azure, хранилище BLOB-объектов Azure или оба). Любой инструмент или процесс, который может подключиться к службе хранилища Azure, может использовать содержимое хранилища знаний.


> [!VIDEO https://www.youtube.com/embed/XWzLBP8iWqg?version=3&start=235&end=426]


![Хранилище знаний на схеме конвейера](./media/knowledge-store-concept-intro/knowledge-store-concept-intro.svg "Хранилище знаний на схеме конвейера")

## <a name="benefits-of-knowledge-store"></a>Преимущества хранилища знаний

Хранилище знаний позволяет получить структуру, контекст и фактическое содержимое из неструктурированных и частично структурированных данных, таких как большие двоичные объекты и проанализированные файлы изображений, и даже из структурированных данных, преобразованных в новые формы. В [пошаговом руководстве](knowledge-store-create-rest.md) показано, как документ в формате JSON дробится на субструктуры, преобразуется в новые структуры и трансформируется другими способами. Затем он становится доступным для последующих процессов, таких как машинное обучение или обработка и анализ данных.

Хотя возможности конвейера обогащения с помощью ИИ сами по себе впечатляют, главным потенциалом хранилища знаний является способность изменять форму данных. Можно начать с базового набора навыков и совершенствовать его цикл за циклом, чтобы увеличить число уровней структур. Это позволит создавать структуры, пригодные для использования другими приложениями, помимо службы "Когнитивный поиск Azure".

Хранилище знаний обеспечивает следующие преимущества:

+ Обогащенные документы может использовать не только служба поиска, но и [средства аналитики и создания отчетов](#tools-and-apps). Power BI c Power Query являются оптимальным решением. Но и любое приложение, способное подключаться к службе хранилища Azure, может получать данные из созданного хранилища знаний.

+ Улучшение конвейера индексирования на основе ИИ в ходе отладки и определений набора навыков. Хранилище знаний предоставляет результат определения набора навыков в конвейере индексирования на основе ИИ. Эти результаты можно использовать для создания усовершенствованного набора навыков, так как вы можете отслеживать воздействие процесса обогащения. Просматривать содержимое хранилища знаний можно с помощью [Обозревателя службы хранилища](../vs-azure-tools-storage-manage-with-storage-explorer.md?tabs=windows) Azure.

+ Преобразование данных в новые формы. Теперь доступна функция преобразования данных, реализованная в коде набора навыков. [Навык формирователя](cognitive-search-skill-shaper.md) в службе "Когнитивный поиск Azure" был доработан для выполнения этой задачи. Преобразование формы позволяет определять проекцию, которая соответствует предполагаемому способу применения данных, сохраняя при этом взаимосвязи.

> [!Note]
> Только начинаете работать с обогащением с помощью ИИ и когнитивными навыками? Когнитивный поиск Azure интегрируется с функциями распознавания изображений и текста Cognitive Services. С помощью этих функций извлекаются сведения из файлов изображений, распознаются сущности, извлекаются ключевые фразы из текстовых файлов и т. д., после чего обогащаются исходные данные. Дополнительные сведения см. в статье [Что такое когнитивный поиск в службе "Поиск Azure"?](cognitive-search-concept-intro.md).

## <a name="physical-storage"></a>Физическое хранилище


> [!VIDEO https://www.youtube.com/embed/XWzLBP8iWqg?version=3&start=455&end=542]


Физическое выражение хранилища знаний обозначается с помощью элемента `projections` определения `knowledgeStore` в наборе навыков. Проекция определяет структуру выходных данных, которая должна соответствовать предполагаемому использованию.

Проекции могут храниться в виде таблиц, объектов или файлов.

```json
"knowledgeStore": { 
    "storageConnectionString": "<YOUR-AZURE-STORAGE-ACCOUNT-CONNECTION-STRING>", 
    "projections": [ 
        { 
            "tables": [ ], 
            "objects": [ ], 
            "files": [ ]
        },
                { 
            "tables": [ ], 
            "objects": [ ], 
            "files": [ ]
        }
```

Тип проекции, заданный в этой структуре, определяет тип хранилища, используемого хранилищем знаний.

+ Хранилище таблиц используется при определении `tables`. Определите проекцию таблицы, если вам нужны табличные структуры отчетов для входных данных средств аналитики или экспорта в виде кадров данных в другие хранилища данных. Можно указать несколько `tables`, чтобы получить подмножество или перекрестный раздел обогащенных документов. В одной группе проекции связи между таблицами сохраняются, чтобы можно было работать со всеми таблицами.

+ Хранилище BLOB-объектов используется при определении `objects` или `files`. Физическое представление `object` — это иерархическая структура JSON, которая представляет обогащенный документ. `file` — это изображение, извлеченное из документа, которое переносится в хранилище BLOB-объектов без изменений.

Один объект проекции содержит один набор `tables`, `objects`, `files`, и во многих случаях достаточно создать одну проекцию. 

Однако можно создать несколько наборов проекций `table`-`object`-`file`, и вы можете сделать это, если хотите использовать разные связи данных. В наборе данные связаны, если эти отношения существуют и могут быть обнаружены. При создании дополнительных наборов документы в каждой группе не будут связаны. Можно использовать несколько групп проекции, например, если вам нужно спроецировать данные для использования в интерактивной системе, где они должны быть представлены определенным образом. Кроме того, вы хотите спроецировать те же данные для использования в конвейере обработки и анализа данных, где они должны быть представлены иначе.

## <a name="requirements"></a>Требования 

Требуется указать параметр [Служба хранилища Azure](../storage/index.yml). Она обеспечивает физическое хранение. Вы можете использовать хранилище BLOB-объектов, хранилище таблиц или и то, и другое. Хранилище BLOB-объектов используется для неизмененных обогащенных документов, обычно когда выходные данные переводятся в нисходящие процессы. Хранилище таблиц предназначено для фрагментов обогащенных документов, обычно используемых для анализа и создания отчетов.

Требуется [набор навыков](cognitive-search-working-with-skillsets.md). Он содержит определение `knowledgeStore` и определяет структуру и композицию обогащенного документа. Нельзя создать хранилище знаний, используя пустой набор навыков. В наборе навыков должен быть хотя бы один навык.

Требуется [индексатор](search-indexer-overview.md). Набор навыков вызывается индексатором, который управляет выполнением. Индексаторы поставляются с собственным набором требований и атрибутов. Некоторые из этих атрибутов напрямую влияют на хранилище знаний:

+ Для индексаторов требуется [поддерживаемый источник данных Azure](search-indexer-overview.md#supported-data-sources) (конвейер, который в конечном итоге создает хранилище знаний, запускается путем извлечения данных из поддерживаемого источника в Azure). 

+ Для индексаторов необходим индекс поиска. Для индексатора требуется предоставить схему индекса, даже если вы не планируете ее использовать. Минимальный индекс имеет одно строковое поле, обозначенное как ключ.

+ Индексаторы предоставляют необязательные сопоставления полей, используемые для присвоения псевдонима исходного поля целевому полю. Если для сопоставления полей по умолчанию требуется изменение (для использования другого имени или типа), можно создать [сопоставление полей](search-indexer-field-mappings.md) в индексаторе. Для выходных данных хранилища знаний назначение может быть полем в BLOB-объекте или таблице.

+ Индексаторы имеют расписания и другие свойства, такие как механизмы обнаружения изменений, предоставляемые различными источниками данных, и могут применяться к хранилищу знаний. Например, можно [запланировать](search-howto-schedule-indexers.md) обогащение с регулярными интервалами для обновления содержимого. 

## <a name="how-to-create-a-knowledge-store"></a>Как создать хранилище знаний

Чтобы создать хранилище знаний, используйте портал или REST API ( `api-version=2020-06-30` ).

### <a name="use-the-azure-portal"></a>Использование портала Azure

Мастер **импорта данных** включает параметры для создания хранилища знаний. Для начального изучения [создайте свое первое хранилище знаний за четыре шага](knowledge-store-connect-power-bi.md).

1. Выберите поддерживаемый источник данных.

1. Укажите обогащение: присоедините ресурс, выберите навыки и укажите хранилище знаний. 

1. Создайте схему индекса. Это обязательный элемент, и мастер может создать ее автоматически.

1. Запустите мастер. На последнем шаге происходят извлечение, обогащение и сохранение.

### <a name="use-create-skillset-rest-api"></a>Использовать CREATE квалификационный набор (REST API)]

`knowledgeStore` определяется в [наборе навыков](cognitive-search-working-with-skillsets.md), который, в свою очередь, вызывается [индексатором](search-indexer-overview.md). Во время обогащения Когнитивный поиск Azure создает пространство в учетной записи хранения Azure и проецирует обогащенные документы как большие двоичные объекты или таблицы в зависимости от конфигурации.

REST API — это один из механизмов, с помощью которого можно создать хранилище знаний программным способом. Чтобы изучить этот вариант, просто [создайте свое первое хранилище знаний с помощью Postman и REST API](knowledge-store-create-rest.md).

<a name="tools-and-apps"></a>

## <a name="how-to-connect-with-tools-and-apps"></a>Подключение с помощью средств и приложений

После помещения обогащенных документов в хранилище любое средство или технология, способные подключаться к хранилищу BLOB-объектов или таблиц Azure, можно использовать для изучения, анализа или использования их содержимого. Вот список основных таких средств:

+ [Обозреватель службы хранилища](knowledge-store-view-storage-explorer.md) позволяет просматривать структуру и содержимое обогащенных документов. Его можно считать базовым средством для просмотра содержимого хранилища знаний.

+ [Power BI](knowledge-store-connect-power-bi.md) для отчетов и анализа. 

+ [Фабрика данных Azure](../data-factory/index.yml) позволяет выполнять дальнейшую обработку данных.

<a name="kstore-rest-api"></a>

## <a name="api-reference"></a>Справочник по API

Версия REST API `2020-06-30` предоставляет хранилище знаний через дополнительные определения в наборе навыков. Дополнительные сведения о способах вызова API также см. в разделе [Создание хранилища знаний с помощью Postman](knowledge-store-create-rest.md).

+ [Создание набора навыков (API-Version = 2020-06-30)](/rest/api/searchservice/create-skillset)
+ [Обновить набор навыков (API-Version = 2020-06-30)](/rest/api/searchservice/update-skillset)


## <a name="next-steps"></a>Дальнейшие действия

Хранилище знаний обеспечивает стойкость обогащенных документов, полезных при разработке набора навыков или создании структур и содержимого для использования любыми клиентскими приложениями, которые могут получить доступ к учетной записи службы хранилища Azure.

Самый простой подход к созданию обогащенных документов — на [портале](knowledge-store-create-portal.md), но вы также можете использовать post и REST API, что более удобно, если вы хотите узнать о том, как создаются и указываются объекты.

> [!div class="nextstepaction"]
> [Создание хранилища знаний с помощью REST и Postman](knowledge-store-create-rest.md)

Дополнительные сведения о проекциях, возможностях и способах [определения их в наборе навыков](knowledge-store-projection-overview.md)

> [!div class="nextstepaction"]
> [Проекции в хранилище знаний](knowledge-store-projection-overview.md)

Чтобы узнать больше о дополнительных концепциях проекций, таких как создание срезов, встроенное формирование и связи, начните с [определения проекций в хранилище знаний](knowledge-store-projections-examples.md)

> [!div class="nextstepaction"]
> [Определение проекций в хранилище знаний](knowledge-store-projections-examples.md)