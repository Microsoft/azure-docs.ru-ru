---
title: Оценка затрат
titleSuffix: Azure Cognitive Search
description: Сведения о оплачиваемых событиях, модели ценообразования и советы по управлению затратами на запуск службы Когнитивный поиск.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 01/15/2021
ms.openlocfilehash: 4ad362b983f81e2cdc10cdbccafd8dda951482d7
ms.sourcegitcommit: fc23b4c625f0b26d14a5a6433e8b7b6fb42d868b
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/17/2021
ms.locfileid: "98539552"
---
# <a name="how-to-estimate-and-manage-costs-of-an-azure-cognitive-search-service"></a>Оценка и управление затратами на службу Когнитивный поиск Azure

В этой статье вы узнаете о модели ценообразования, оплачиваемых мероприятиях и советах по управлению затратами на запуск службы Когнитивный поиск Azure.

## <a name="pricing-model"></a>Модель ценообразования

Архитектура масштабируемости в Azure Когнитивный поиск основана на гибких комбинациях реплик и секций, что позволяет изменять емкость в зависимости от того, требуется ли больше возможностей для запросов или индексирования, и платите только за то, что вам нужно.

Количество ресурсов, используемых службой поиска, умноженное на ставку выставления счетов, установленную уровнем служб, определяет стоимость запуска службы. Затраты и емкость тесно связаны. При оценке затрат, понимание емкости, необходимой для выполнения рабочих нагрузок индексирования и запросов, дает лучшие идеи относительно планируемых затрат.

В целях выставления счетов необходимо учитывать две простые формулы:

| Формула | Описание |
|---------|-------------|
| **R x P = SU** | Количество используемых реплик, умноженное на количество используемых секций, равно количеству *единиц поиска* (SU), используемых службой. SU — это единица ресурса, которая может быть либо секцией, либо репликой. |
| **Ставка для SU * — ежемесячные расходы** | Число серверов, умноженное на коэффициент выставления счетов за уровень, на котором подготовлена служба, является основным определителем общего ежемесячного счета. Некоторые функции или рабочие нагрузки имеют зависимости от других служб Azure, что может увеличить стоимость решения на уровне подписки. В разделе оплачиваемые события приведены функции, которые могут быть добавлены к счету. |

Каждая служба имеет как минимум одну единицу поиска (одна реплика, умноженная на одну секцию). Максимальное значение для любой службы — 36. Это максимальное значение можно получить несколькими способами: 6 секций x 6 реплик или 3 секции x 12 реплик, например. Обычно используется меньше общей емкости (например, 3-реплика, 3-секционная служба выставляется как 9 SUs). Допустимые сочетания см. на диаграмме с [комбинациями разделов и реплик](search-capacity-planning.md#chart) .

Ставка выставления счетов Почасовая цена на SU. Каждый уровень имеет более высокую скорость. Более высокие уровни поставляются с большими и спидиер разделами, и это влияет на общую почасовую ставку для этого уровня. Вы можете просмотреть ставки для каждого уровня на странице [сведения о ценах](https://azure.microsoft.com/pricing/details/search/) .

Большинство клиентов используют часть полной емкости в сети, удерживая остальные ресурсы в резерве. Для выставления счетов количество секций и реплик, которые вы переводите в оперативный режим, вычисляется формулой SU, определяет, что вы оплачиваете почасовой основе. 

## <a name="billable-events"></a>Оплачиваемые события

Решение, созданное на Когнитивный поиск Azure, может повлечь за собой следующие виды затрат:

+ [Затраты](#service-costs) на саму службу, выполняющую Круглосуточная, в минимальной конфигурации (один раздел и реплику) по базовому курсу. Это можно считать фиксированной стоимостью запуска службы.

+ Добавление емкости (реплик или секций), где затраты увеличиваются с приращением коэффициента оплаты. Если высокий уровень доступности является бизнес-требованием, вам потребуется 3 реплики.

+ Плата за пропускную способность (передача исходящих данных)

+ Дополнительные службы, необходимые для конкретных возможностей или функций:

  + Обогащение искусственного интеллекта (требуется [Cognitive Services](https://azure.microsoft.com/pricing/details/cognitive-services/))
  + хранилище знаний (требуется [хранилище Azure](https://azure.microsoft.com/pricing/details/storage/))
  + Добавочное дополнение (требуется [хранилище Azure](https://azure.microsoft.com/pricing/details/storage/), применяется к расширению искусственного интеллекта)
  + управляемые клиентом ключи и двойное шифрование (требуется [Azure Key Vault](https://azure.microsoft.com/pricing/details/key-vault/))
  + частные конечные точки для модели доступа без Интернета (требуется [Частная ссылка Azure](https://azure.microsoft.com/pricing/details/private-link/))

### <a name="service-costs"></a>Стоимость служб

В отличие от виртуальных машин или других ресурсов, которые можно "приостановить", чтобы избежать расходов, служба Когнитивный поиск Azure всегда доступна на оборудовании, выделенном для монопольного использования. Таким образом, создание службы — это оплачиваемое событие, которое запускается при создании службы и завершается при удалении службы. 

Минимальная стоимость — это первая единица поиска (одна реплика x одна секция) на коэффициенте оплаты. Это минимальное значение фиксируется во время существования службы, так как служба не может работать ни на что меньше этой конфигурации. 

Помимо минимума можно добавлять реплики и секции независимо друг от друга. Добавочное увеличение емкости с помощью реплик и секций увеличит счет на основе следующей формулы: **(реплики x секций x, тарифные счета)**, где плата зависит от выбранной ценовой категории.

При оценке стоимости решения поиска учитывайте, что цены и емкость не являются линейными (удвоение емкости больше, чем удвоение стоимости). Пример того, как работает формула, см. в разделе [как выделить реплики и секции](search-capacity-planning.md#how-to-allocate-replicas-and-partitions).

### <a name="bandwidth-charges"></a>Плата за пропускную способность

Использование [индексаторов](search-indexer-overview.md) может повлиять на выставление счетов, если источник данных Azure находится в другом регионе когнитивный Поиск Azure. В этом сценарии возможны затраты на перемещение исходящих данных из источника данных Azure в Когнитивный поиск Azure. Дополнительные сведения см. на страницах с ценами на интересующую вас платформу данных Azure.

При создании службы Когнитивный поиск Azure в том же регионе, в котором находятся данные, плата за исходящие данные может быть полностью устранена. Ниже приведены некоторые сведения на [странице цены на пропускную способность](https://azure.microsoft.com/pricing/details/bandwidth/).

+ Входящие данные: Корпорация Майкрософт не взимается за любые входящие данные ни в одну службу в Azure. 

+ Исходящие данные. к результатам запроса относятся исходящие данные. Когнитивный поиск не взимается за исходящие данные, а исходящие расходы из Azure возможны, если службы находятся в разных регионах.

  Эти расходы не являются частью счета Azure Когнитивный поиск. Они упомянуты здесь, поскольку если вы отправляете результаты в другие регионы или приложения, не относящиеся к Azure, вы можете увидеть, что эти затраты отражены в общем счете.

### <a name="ai-enrichment-with-cognitive-services"></a>Обогащение искусственного интеллекта с помощью Cognitive Services

Для [обогащения искусственного интеллекта](cognitive-search-concept-intro.md)необходимо запланировать [подключение оплачиваемого Cognitive Services ресурса Azure](cognitive-search-attach-cognitive-services.md)в том же регионе, что и когнитивный Поиск Azure, на ценовой категории S0 для обработки с оплатой по мере использования. Нет фиксированных затрат, связанных с присоединением Cognitive Services. Вы платите только за необходимую обработку.

| Операция | Принцип выставления счетов |
|-----------|----------------|
| Взлом документов, извлечение текста | Бесплатный |
| Взлом документов, Извлечение изображений | Счета выставляются в соответствии с количеством образов, извлеченных из документов. В [конфигурации индексатора](/rest/api/searchservice/create-indexer#indexer-parameters) **имажеактион** — это параметр, который запускает извлечение изображений. Если для **имажеактион** задано значение "нет" (по умолчанию), вы не будете получать оплату за извлечение изображений. Скорость извлечения образа описана на странице [сведений о ценах](https://azure.microsoft.com/pricing/details/search/) на когнитивный Поиск Azure.|
| [Встроенные когнитивные навыки](cognitive-search-predefined-skills.md) | Счет выставляется по той же ставке, что и при выполнении задачи с помощью Cognitive Services напрямую. |
| Пользовательские навыки | Пользовательский навык — это предоставляемые вами функции. Затраты на использование пользовательского навыка полностью зависят от того, вызывает ли пользовательский код другие службы с оплатой. |

Функция [добавочного обогащения (Предварительная версия)](cognitive-search-incremental-indexing-conceptual.md) позволяет создавать кэш, который обеспечивает более эффективное выполнение индексатора при выполнении только тех навыков, которые необходимы при изменении набора навыков в будущем, экономя время и деньги.

## <a name="tips-for-managing-costs"></a>Советы по управлению затратами

Следующие рекомендации помогут снизить затраты или более эффективно управлять затратами:

+ Создайте все ресурсы в одном и том же регионе или как можно меньшее количество регионов, чтобы свести к сведению или исключить плату за пропускную способность.

+ Объедините все службы в одну группу ресурсов, например Azure Когнитивный поиск, Cognitive Services и другие службы Azure, используемые в решении. В портал Azure найдите группу ресурсов и используйте команды **управления затратами** для анализа фактических и прогнозируемых расходов.

+ Рассмотрим веб-приложение Azure для внешнего приложения, чтобы запросы и ответы оставались в пределах границ центра обработки данных.

+ Увеличение масштаба для ресурсоемких операций, таких как индексирование, а затем изменение их вниз для обычных рабочих нагрузок запросов. Начните с минимальной конфигурации Когнитивный поиск Azure (одной SU, состоящей из одной секции и одной реплики), а затем Отслеживайте действия пользователей, чтобы определить закономерности использования, которые свидетельствуют о необходимости увеличения емкости. Если имеется прогнозируемый шаблон, вы можете синхронизировать масштабирование с действием (для автоматизации этого потребуется написать код).

+ Управление затратами встроено в инфраструктуру Azure. Дополнительные сведения об отслеживании затрат, средств и интерфейсов API см. в статье [Управление выставлением счетов и затратами](../cost-management-billing/cost-management-billing-overview.md) .

Не удается завершить работу службы поиска на временной основе. Выделенные ресурсы всегда работают, выделяются для монопольного использования в течение срока службы. Удаление службы является постоянной, а также удаляет связанные с ней данные.

В терминах самой службы единственным способом снижения счета является сокращение количества реплик и секций до уровня, который по-прежнему обеспечивает приемлемое соответствие производительности и [соглашений об уровне обслуживания](https://azure.microsoft.com/support/legal/sla/search/v1_0/), или создание службы на более низком уровне (часовые тарифы S1 ниже S2 или S3). Предполагая, что вы подготавливаете службу в нижней части проекций нагрузки, если вы масштабируемостьи службу, вы можете создать вторую более крупную службу, перестроить индексы во второй службе, а затем удалить первую из них.

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как отслеживать затраты и управлять ими в рамках подписки Azure.

> [!div class="nextstepaction"]
> [Документация по службе Управления затратами и выставления счетов Azure](../cost-management-billing/cost-management-billing-overview.md)