---
title: Импорт данных в индекс поиска с помощью портал Azure
titleSuffix: Azure Cognitive Search
description: Узнайте, как использовать мастер импорта данных в портал Azure для обхода данных Azure из Cosmos DB, хранилища BLOB-объектов, хранилища таблиц, базы данных SQL, Управляемый экземпляр SQL и SQL Server на виртуальных машинах Azure.
author: HeidiSteen
manager: nitinme
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 11/04/2019
ms.openlocfilehash: 7cff009d5d1e187e8d0330fadca530b57b3e3d21
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "88935217"
---
# <a name="import-data-wizard-for-azure-cognitive-search"></a>Мастер импорта данных для Когнитивный поиск Azure

Портал Azure предоставляет мастер **импорта данных** на панели мониторинга когнитивный Поиск Azure для создания прототипов и загрузки индекса. В этой статье рассматриваются преимущества и ограничения использования мастера, входных и выходных данных, а также некоторые сведения об использовании. Практическое руководство по пошаговому выполнению работы с мастером с помощью встроенных демонстрационных данных см. в разделе [Создание индекса когнитивный Поиск Azure с помощью](search-get-started-portal.md) краткого руководства по портал Azure.

Ниже перечислены операции, выполняемые этим мастером.

1 — подключение к поддерживаемому источнику данных Azure.

2. Создание схемы индекса, выводимой исходными данными выборки.

3. при необходимости добавьте дополнения искусственного интеллекта для извлечения или создания содержимого и структуры.

4. Запустите мастер, чтобы создать объекты, импортировать данные, задать расписание и другие параметры конфигурации.

Мастер выводит несколько объектов, которые сохраняются в службе поиска и доступны программно или в других средствах.

## <a name="advantages-and-limitations"></a>Преимущества и ограничения

Перед написанием кода можно использовать мастер для тестирования с созданием прототипов и проверки концепции. Мастер подключается к внешним источникам данных, выбирает данные для создания исходного индекса, а затем импортирует данные как документы JSON в индекс на Когнитивный поиск Azure. 

Выборка — это процесс, с помощью которого схема индекса выводится и имеет некоторые ограничения. При создании источника данных мастер выберет образец документов, чтобы решить, какие столбцы являются частью источника данных. Не все файлы считываются, так как это потенциально может занять несколько часов для очень больших источников данных. При наличии выбора документов исходные метаданные, такие как имя поля или тип, используются для создания коллекции Fields в схеме индекса. В зависимости от сложности исходных данных может потребоваться изменить исходную схему для точности или расширить ее для полноты. Вы можете внести свои изменения на странице Определение индекса.

В целом преимущества использования мастера очевидны: при условии соблюдения требований можно создавать прототипы индексируемого индекса за считанные минуты. Некоторые сложности индексирования, например предоставление данных в виде документов JSON, обрабатываются мастером.

Ниже приведены известные ограничения.

+ Мастер не поддерживает итерацию или повторное использование. Каждый проход по мастеру создает новый индекс, набор навыков и конфигурацию индексатора. В мастере могут сохраняться и повторно использоваться только источники данных. Чтобы изменить или уточнить другие объекты, необходимо использовать интерфейсы API или пакет SDK для .NET для извлечения и изменения структур.

+ Исходное содержимое должно находиться в поддерживаемом источнике данных Azure.

+ Выборка находится над подмножеством исходных данных. Для больших источников данных мастер может пропустить поля. Возможно, потребуется расширить схему или исправить выводимые типы данных, если выборка недостаточна.

+ Обогащение искусственного интеллекта, представленное на портале, ограничено несколькими встроенными навыками. 

+ [Хранилище знаний](knowledge-store-concept-intro.md), которое может быть создано мастером, ограничено в нескольких проекциях по умолчанию. Если вы хотите сохранить Расширенные документы, созданные мастером, то контейнер больших двоичных объектов и таблицы поставляются с именами и структурами по умолчанию.

<a name="data-source-inputs"></a>

## <a name="data-source-input"></a>Вход источника данных

Мастер **импорта данных** подключается к внешнему источнику данных с помощью внутренней логики, предоставляемой Azure когнитивный Поиск индексаторов, которые могут использовать образцы источника, чтения метаданных, взлома документов для чтения содержимого и структуры и сериализации содержимого как JSON для последующего импорта в когнитивный Поиск Azure.

Импорт можно выполнять только из одной таблицы, представления базы данных или эквивалентной структуры данных, однако структура может включать иерархические или вложенные структуры. Дополнительные сведения см. [в разделе как моделировать сложные типы](search-howto-complex-data-types.md).

Эту отдельную таблицу или представление следует создать перед запуском мастера, и оно должно содержать содержимое. По очевидным причинам нет смысла запускать мастер **импорта данных** в пустом источнике данных.

|  Выбор | Описание |
| ---------- | ----------- |
| **Существующий источник данных** |Если у вас уже есть индексаторы, определенные в службе поиска, возможно, имеется определение существующего источника данных, которое можно использовать повторно. В Azure Когнитивный поиск объекты источников данных используются только индексаторами. Объект источника данных можно создать программным способом или с помощью мастера **импорта данных** и использовать их по мере необходимости.|
| **Примеры**| Azure Когнитивный поиск предоставляет два встроенных образца источников данных, которые используются в руководствах и кратких руководствах: база данных SQL и база данных гостиниц, размещенные на Cosmos DB. Пошаговые инструкции по примерам гостиниц см. в разделе [Создание индекса в портал Azure](search-get-started-portal.md) кратком руководстве. |
| [**База данных SQL Azure или SQL Управляемый экземпляр**](search-howto-connecting-azure-sql-database-to-azure-search-using-indexers.md) |Имя службы, учетные данные пользователя базы данных с разрешением на чтение и имя базы данных можно указать на странице или через строку подключения ADO.NET. Выберите параметр строки подключения, чтобы просмотреть или настроить свойства. <br/><br/>На странице необходимо указать таблицу или представление, содержащие набор строк. Этот параметр появляется после успешного подключения, предоставляя раскрывающийся список для выбора.|
| **SQL Server на виртуальной машине Azure** |Укажите полное доменное имя службы, идентификатор и пароль пользователя, а также базу данных в качестве строки подключения. Чтобы использовать этот источник данных, необходимо предварительно установить сертификат в локальном хранилище, которое шифрует подключение. Инструкции см. [в статье подключение виртуальной машины SQL к Azure когнитивный Поиск](search-howto-connecting-azure-sql-iaas-to-azure-search-using-indexers.md). <br/><br/>На странице необходимо указать таблицу или представление, содержащие набор строк. Этот параметр появляется после успешного подключения, предоставляя раскрывающийся список для выбора. |
| [**Azure Cosmos DB**](search-howto-index-cosmosdb.md)|Требования включают учетную запись, базу данных и коллекцию. Все документы в коллекции будут включены в индекс. Можно определить запрос для спрямления или фильтрации набора строк или оставить запрос пустым. В этом мастере запрос не требуется.|
| [**хранилище BLOB-объектов Azure**](search-howto-indexing-azure-blob-storage.md) |Требования включают учетную запись хранения и контейнер. При необходимости, если имена больших двоичных объектов соответствует соглашению об именовании (с целью группирования), можно указать часть имени, которое соответствует имени виртуального каталога, в качестве имени папки в контейнере. Дополнительные сведения см. в статье [Индексирование документов в хранилище BLOB-объектов Azure с помощью службы поиска Azure](search-howto-indexing-azure-blob-storage.md). |
| [**Хранилище таблиц Azure**](search-howto-indexing-azure-tables.md) |Требования включают учетную запись хранения и имя таблицы. Кроме того, можно указать запрос для получения подмножества таблиц. Дополнительные сведения см. в статье [Индексирование хранилища таблиц Azure с помощью поиска Azure](search-howto-indexing-azure-tables.md). |

## <a name="wizard-output"></a>Выходные данные мастера

В фоновом режиме мастер создает, настраивает и вызывает следующие объекты. После запуска мастера выходные данные можно найти на страницах портала. Страница Обзор службы содержит списки индексов, индексаторов, источников данных и навыков. Определения индексов можно просмотреть в полном формате JSON на портале. Для других определений можно использовать [REST API](/rest/api/searchservice/) для получения конкретных объектов.

| Объект | Описание | 
|--------|-------------|
| [Источник данных](/rest/api/searchservice/create-data-source)  | Сохраняет сведения о соединении с исходными данными, включая учетные данные. Объект источника данных используется исключительно с индексаторами. | 
| [Index](/rest/api/searchservice/create-index) | Физическая структура данных, используемая для полнотекстового поиска и других запросов. | 
| [Набор навыков](/rest/api/searchservice/create-skillset) | Полный набор инструкций по управлению, преобразованию и формированию содержимого, включая анализ и извлечение данных из файлов изображений. За исключением очень простых и ограниченных структур, она включает ссылку на Cognitive Services ресурс, который обеспечивает обогащение. При необходимости оно также может содержать определение хранилища знаний.  | 
| [Индексатор](/rest/api/searchservice/create-indexer)  | Объект конфигурации, указывающий источник данных, целевой индекс, дополнительный набор знаний, необязательное расписание и необязательные параметры конфигурации для обработки ошибок и кодировки Base-64. |


## <a name="how-to-start-the-wizard"></a>Запуск мастера

Мастер импорта данных запускается с панели команд на странице обзора службы.

1. На [портале Azure](https://portal.azure.com) откройте страницу службы поиска на панели мониторинга или [найдите свою службу](https://ms.portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Search%2FsearchServices) в списке служб.

2. На странице обзора службы вверху нажмите кнопку **Импорт данных**.

   ![Команда "Импорт данных" на портале](./media/search-import-data-portal/import-data-cmd2.png "Запуск мастера импорта данных")

Вы также можете запустить **Импорт данных** из других служб Azure, включая Azure Cosmos DB, базу данных SQL azure, управляемый экземпляр SQL и хранилище BLOB-объектов Azure. Найдите **когнитивный Поиск добавить Azure** в области навигации слева на странице Обзор службы.

<a name="index-definition"></a>

## <a name="how-to-edit-or-finish-an-index-schema-in-the-wizard"></a>Как изменить или завершить схему индекса в мастере

Мастер создает неполный индекс, который будет заполнен документами, полученными из источника входных данных. Для создания функционального индекса убедитесь, что у вас заданы следующие элементы.

1. Завершен ли список полей? Добавьте новые поля, которые пропустили выборку, и удалите все, которые не добавляют значения в интерфейс поиска или не будут использоваться в [критерии фильтра](search-query-odata-filter.md) или [профиля оценки](index-add-scoring-profiles.md).

1. Подходит ли тип данных для входящих данных? Azure Когнитивный поиск поддерживает [типы данных модели EDM](/rest/api/searchservice/supported-data-types). Для данных SQL Azure существует [Диаграмма сопоставления](search-howto-connecting-azure-sql-database-to-azure-search-using-indexers.md#TypeMapping) , в которой используются эквивалентные значения. Дополнительные сведения см. в разделе [сопоставления полей и преобразования](search-indexer-field-mappings.md).

1. У вас есть одно поле, которое может использоваться в качестве *ключа*? Это поле должно быть EDM. String и должно однозначно идентифицировать документ. Для реляционных данных он может быть сопоставлен с первичным ключом. Для больших двоичных объектов это может быть `metadata-storage-path` . Если значения полей включают пробелы или дефисы, необходимо задать **ключ шифрования Base-64** на этапе **создания индексатора** в разделе **Дополнительные параметры**, чтобы отключить проверку для этих символов.

1. Задайте атрибуты, чтобы определить, как это поле используется в индексе. 

   Уделите время этому шагу, так как атрибуты определяют физическое выражение полей в индексе. Если вы хотите изменить атрибуты позже, даже программно, почти всегда потребуется удалить и перестроить индекс. Основные атрибуты, такие как доступные для **поиска** и **извлечения** , оказывают [незначительное влияние на хранилище](search-what-is-an-index.md#index-size). Включение фильтров и использование средств подбора повышает требования к хранилищу. 
   
   + Возможность **поиска** включает полнотекстовый поиск. Каждое поле, используемое в запросах произвольной формы или в выражениях запросов, должно иметь этот атрибут. Инвертированные индексы создаются для каждого поля с меткой **Доступный для поиска**.

   + Функция **извлечения** возвращает поле в результатах поиска. Каждое поле с содержимым для результатов поиска должно иметь этот атрибут. Настройка этого поля существенно не влияет на размер индекса.

   + **Фильтрование** позволяет ссылаться на поле в выражениях фильтра. Все поля, используемые в выражении **$filter**, должны иметь этот атрибут. Выражения фильтра используются для точных совпадений. Так как текстовые строки остаются без изменений, для работы с дословными выражениями в документах требуется дополнительное хранилище.

   + **Facet** позволяет поле для навигации с аспектами. Добавить метку **Аспектируемый** можно только к полям, также отмеченным как **фильтруемые**.

   + **Сортируемый** позволяет использовать поле в сортировке. Все поля, используемые в выражении **$Orderby**, должны иметь этот атрибут.

1. Требуется ли [лексический анализ](search-lucene-query-architecture.md#stage-2-lexical-analysis)? Для EDM. строковые поля, доступные для **поиска**. можно настроить **анализатор** , если требуется расширенное индексирование и запросы. 

   По умолчанию задано *Standard Lucene*, но вы можете выбрать *Microsoft English*, если нужно использовать анализатор Майкрософт для расширенной обработки лексики, например для разрешения неправильных форм существительных и глаголов. На портале можно указать только анализаторы языка. Использование пользовательского анализатора или анализатора, отличного от языка, такого как ключевое слово, шаблон и т. д., должно выполняться программно. Дополнительные сведения об анализаторах см. в разделе [Добавление анализаторов языка](search-language-support.md).

1. Требуются ли функции typeahead в виде автозаполнения или предлагаемых результатов? Установите флажок **предложить** , чтобы включить [предложения запроса typeahead и Автозаполнение](index-add-suggesters.md) для выбранных полей. Средства подбора добавляют к числу лексем с маркерами в индексе и, таким же, потребляют больше места для хранения.


## <a name="next-steps"></a>Дальнейшие действия

Лучшим способом понять преимущества и ограничения мастера является его пошаговое применение. В следующем кратком руководстве описывается каждый шаг.

> [!div class="nextstepaction"]
> [Создание индекса Когнитивный поиск Azure с помощью портал Azure](search-get-started-portal.md)