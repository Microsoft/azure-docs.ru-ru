---
title: Добавить проверку орфографии
titleSuffix: Azure Cognitive Search
description: Присоедините исправление правописания к конвейеру запросов, чтобы исправить опечатки в терминах запроса перед выполнением запроса.
manager: nitinme
author: HeidiSteen
ms.author: heidist
ms.service: cognitive-search
ms.topic: conceptual
ms.date: 03/02/2021
ms.custom: references_regions
ms.openlocfilehash: be72cae8d109bfeccd60e8c821625f75357568e3
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "103232364"
---
# <a name="add-spell-check-to-queries-in-cognitive-search"></a>Добавление проверки орфографии в запросы в Когнитивный поиск

> [!IMPORTANT]
> Исправление орфографии находится в общедоступной предварительной версии, доступном только в предварительной версии REST API. Предварительные версии функций предлагаются "как есть" в [дополнительных условиях использования](https://azure.microsoft.com/support/legal/preview-supplemental-terms/). Во время первоначального запуска предварительной версии плата за средство проверки орфографии не взимается. Дополнительные сведения см. в разделе [доступность и цены](semantic-search-overview.md#availability-and-pricing).

Вы можете улучшить отзыв, заменив правописание отдельными поисковыми запросами, прежде чем они достигают поисковой системы. Параметр средства **проверки орфографии** поддерживается для всех типов запросов: [простой](query-simple-syntax.md), [полный](query-lucene-syntax.md)и новый параметр [семантики](semantic-how-to-query-request.md) в настоящее время в общедоступной предварительной версии.

## <a name="prerequisites"></a>Предварительные требования

+ Существующий индекс поиска, содержащий англоязычные материалы

+ Клиент поиска для отправки запросов

  Клиент поиска должен поддерживать предварительный просмотр API-интерфейсов RESTFUL в запросе. Вы можете использовать [POST](search-get-started-rest.md), [Visual Studio Code](search-get-started-vs-code.md)или код, который вы изменили, чтобы вызовы интерфейса API для просмотра были вызваны другими компонентами.

+ [Запрос](/rest/api/searchservice/preview-api/search-documents) , использующий исправление орфографии, имеет "API-Version = 2020-06 -30-Preview", "Правописание = лексикон" и "куерилангуаже = en-US".

  Для средства проверки орфографии требуется Куерилангуаже, а в настоящее время "en-US" — единственное допустимое значение.

> [!Note]
> Параметр средства проверки орфографии доступен на всех уровнях в тех же регионах, которые обеспечивают семантический поиск. Вам не нужно регистрироваться на доступ к этой предварительной версии функции. Дополнительные сведения см. в разделе [доступность и цены](semantic-search-overview.md#availability-and-pricing).

## <a name="spell-correction-with-simple-search"></a>Исправление орфографии с помощью простого поиска

В следующем примере используется встроенный индекс из гостиницы-Sample, чтобы продемонстрировать исправление орфографии в простом текстовом запросе в свободной форме. Без исправления орфографии запрос возвращает нулевые результаты. При исправлении запрос возвращает один результат для Джонсон, ориентированного на семейство.

```http
POST https://[service name].search.windows.net/indexes/hotels-sample-index/docs/search?api-version=2020-06-30-Preview
{
    "search": "famly acitvites",
    "speller": "lexicon",
    "queryLanguage": "en-us",
    "queryType": "simple",
    "select": "HotelId,HotelName,Description,Category,Tags",
    "count": true
}
```

## <a name="spell-correction-with-full-lucene"></a>Исправление орфографии с полным Lucene

Исправление орфографии выполняется для отдельных терминов запроса, которые проводят анализ, поэтому можно использовать параметр средства проверки орфографии с некоторыми запросами Lucene, но не другими.

+ Несовместимые формы запросов, которые обходят анализ текста: шаблон, регулярное выражение, нечеткий
+ К совместимым формам запросов относятся: Поиск по полям, близость, повышение терминов

В этом примере используется поиск по полю категории с полным синтаксисом Lucene и неправильное написание термина запроса. После включения средства проверки орфографии опечатка в "Суиите" исправляется, и запрос будет выполнен.

```http
POST https://[service name].search.windows.net/indexes/hotels-sample-index/docs/search?api-version=2020-06-30-Preview
{
    "search": "Category:(Resort and Spa) OR Category:Suiite",
    "queryType": "full",
    "speller": "lexicon",
    "queryLanguage": "en-us",
    "select": "Category",
    "count": true
}
```

## <a name="spell-correction-with-semantic-search"></a>Исправление орфографии с помощью семантического поиска

Этот запрос с опечатками в каждом выражении, за исключением одного, пройдет проверку орфографии, чтобы получить релевантные результаты. Дополнительные сведения см. в разделе [Создание семантического запроса](semantic-how-to-query-request.md).

```http
POST https://[service name].search.windows.net/indexes/hotels-sample-index/docs/search?api-version=2020-06-30-Preview     
{
    "search": "hisotoric hotell wiht great restrant nad wiifi",
    "queryType": "semantic",
    "speller": "lexicon",
    "queryLanguage": "en-us",
    "searchFields": "HotelName,Tags,Description",
    "select": "HotelId,HotelName,Description,Category,Tags",
    "count": true
}
```

## <a name="language-considerations"></a>Дополнительные сведения

Параметр Куерилангуаже, необходимый для проверки орфографии, должен соответствовать любым [анализаторам языка](index-add-language-analyzers.md) , назначенным определениям полей в схеме индекса. 

+ Куерилангуаже определяет, какие словари используются для проверки орфографии, а также используется в качестве входных данных для [алгоритма семантического ранжирования](semantic-answers.md) , если используется "queryType = семантика".

+ Анализаторы языка используются во время индексирования и выполнения запросов для поиска соответствующих документов в индексе поиска. Пример определения поля, использующего анализатор языка, — `"name": "Description", "type": "Edm.String", "analyzer": "en.microsoft"` .

Для получения наилучших результатов при использовании средства проверки орфографии, если Куерилангуаже имеет значение en-US, то все анализаторы языка должны также иметь английский вариант ("en. Microsoft" или "en. Lucene").

> [!NOTE]
> Анализаторы, независимые от языка (такие как ключевое слово, Simple, Standard, «завершение», пробелы или `standardasciifolding.lucene` ), не конфликтуют с параметрами куерилангуаже.

В запросе запрос Куерилангуаже задается одинаково для средства проверки орфографии, ответов и заголовков. Для отдельных частей переопределение не предусмотрено.

Хотя содержимое в индексе поиска может состоять из нескольких языков, входные данные запроса, скорее всего, находятся в одном. Поисковая система не проверяет совместимость Куерилангуаже, анализатор языка и язык, на котором состоит содержимое, поэтому обязательно выполняйте запросы соответствующим образом, чтобы избежать получения неверных результатов.

## <a name="next-steps"></a>Следующие шаги

+ [Создание семантического запроса](semantic-how-to-query-request.md)
+ [Создание простого запроса](search-query-create.md)
+ [Использовать полный синтаксис запроса Lucene](query-Lucene-syntax.md)
+ [Использовать синтаксис простого запроса](query-simple-syntax.md)
+ [Обзор семантического поиска](semantic-search-overview.md)