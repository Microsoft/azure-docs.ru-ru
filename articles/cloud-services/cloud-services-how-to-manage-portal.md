---
title: Общие задачи управления облачными службами | Документация Майкрософт
description: Узнайте, как управлять облачными службами с помощью портала Azure. В этих примерах используется портал Azure.
ms.topic: article
ms.service: cloud-services
ms.date: 10/14/2020
ms.author: tagore
author: tanmaygore
ms.reviewer: mimckitt
ms.custom: ''
ms.openlocfilehash: a1b37ed1d15282224cc7de61ec6f8a98a4bbf732
ms.sourcegitcommit: e6de1702d3958a3bea275645eb46e4f2e0f011af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102610507"
---
# <a name="manage-cloud-services-classic-in-the-azure-portal"></a>Управление облачными службами (классическая модель) в портал Azure

> [!IMPORTANT]
> [Облачные службы Azure (Расширенная поддержка)](../cloud-services-extended-support/overview.md) — это новая модель развертывания на основе Azure Resource Manager для продукта облачных служб Azure.После этого изменения облачные службы Azure, работающие в модели развертывания на основе Service Manager Azure, были переименованы как облачные службы (классические), и все новые развертывания должны использовать [облачные службы (Расширенная поддержка)](../cloud-services-extended-support/overview.md).

В области **Облачные службы** портала Azure вы можете:

* Обновлять роли или развертывания облачной службы.
* Повысить уровень промежуточного развертывания до рабочего.
* Связывать ресурсы с облачной службой для отображения их зависимостей и их масштабирования.
* Удалять развертывания или облачные службы.

Дополнительные сведения о масштабировании облачных служб см. в статье [Как настроить автомасштабирование для облачной службы на портале](cloud-services-how-to-scale-portal.md).

## <a name="update-a-cloud-service-role-or-deployment"></a>Обновление роли или развертывания облачной службы
Если необходимо обновить код приложения для облачной службы, нажмите **Обновление** в колонке облачной службы. Одновременно можно обновить как одну, так и все роли. Для обновления можно передать новый файл пакета или конфигурации службы.

1. На [портале Azure][Azure portal]выберите облачную службу, которую требуется обновить. Откроется колонка экземпляра облачной службы.

2. В этой колонке выберите **Обновить**.

    ![Кнопка "Обновить"](./media/cloud-services-how-to-manage-portal/update-button.png)

3. Обновите развертывание с новым файлом пакета службы (.cspkg) и файлом конфигурации службы (.cscfg).

    ![Обновление развертывания](./media/cloud-services-how-to-manage-portal/update-blade.png)

4. При необходимости обновите учетную запись хранения и метку развертывания.

5. Если какая-либо роль имеет только один экземпляр роли, установите флажок **Развернуть, даже если одна роль или несколько содержат отдельный экземпляр**, чтобы обеспечить возможность обновления.

    Служба Azure гарантирует доступность облачной службы только в течение 99,95 % времени, если для каждой роли определены как минимум два экземпляра (виртуальные машины). Наличие двух экземпляров роли позволяет обрабатывать запросы клиентов на одной виртуальной машине во время обновления другой.

6. Установите флажок **Запустить развертывания**, чтобы применить обновление после передачи пакета.

7. Выберите **ОК**, чтобы начать обновление службы.

## <a name="swap-deployments-to-promote-a-staged-deployment-to-production"></a>Переключение из промежуточного в рабочее развертывание
Если вы решили развернуть новый выпуск облачной службы, то вы можете протестировать его в промежуточном развертывании. Используйте команду **Переключить** для переключения URL-адресов двух развертываний и повышения нового выпуска до рабочего развертывания.

Соответствующая команда представлена на странице **Облачные службы** или на панели мониторинга.

1. На [портале Azure][Azure portal]выберите облачную службу, которую требуется обновить. Откроется колонка экземпляра облачной службы.

2. В этой колонке выберите **Переключить**.

    ![Кнопка переключения облачных служб](./media/cloud-services-how-to-manage-portal/swap-button.png)

3. Откроется следующий запрос подтверждения.

    ![Переключение облачных служб](./media/cloud-services-how-to-manage-portal/swap-prompt.png)

4. Проверьте данные развертывания и выберите **ОК**, чтобы заменить развертывание.

    Переключение осуществляется мгновенно, поскольку при этом изменяются только виртуальные IP-адреса развертываний.

    Для экономии вычислительных ресурсов вы можете удалить промежуточную среду после того, как убедитесь в соответствии рабочего развертывания заданным характеристикам.

### <a name="common-questions-about-swapping-deployments"></a>Часто задаваемые вопросы о переключении развертываний

**Каковы предварительные требования для переключения развертываний?**

Существует два ключевых требования для успешного переключения развертываний.

- Если вы хотите использовать статический IP-адрес для вашего рабочего слота, необходимо также зарезервировать такой адрес для промежуточного слота. В противном случае переключение завершится ошибкой.

- Все экземпляры роли должны быть запущены перед выполнением переключения. Состояние экземпляров можно проверить в колонке **Обзор** на портале Azure. Также можно использовать команду [Get-AzureRole](/powershell/module/servicemanagement/azure.service/get-azurerole) в Windows PowerShell.

Обратите внимание, что обновления гостевой ОС и операции восстановления службы также могут быть причиной сбоя переключения развертывания. Дополнительные сведения см. в статье [Устранение неполадок, которые могут возникнуть при развертывании облачной службы](cloud-services-troubleshoot-deployment-problems.md).

**Переключается ли время простоя приложения? Как мне справиться?**

Как описано в предыдущем разделе, переключение развертывания обычно происходит быстро, потому что это просто изменение конфигурации в Azure Load Balancer. В некоторых случаях это может занять около 10 секунд и привести к временному сбою подключения. Чтобы ограничить воздействие на клиентов, рассмотрите возможность реализации [логики повтора для клиента](/azure/architecture/best-practices/transient-faults).

## <a name="delete-deployments-and-a-cloud-service"></a>Удаление развертываний и облачной службы
До удаления облачной службы необходимо удалить все текущие развертывания.

Для экономии вычислительных ресурсов вы можете удалить промежуточную среду после того, как убедитесь в соответствии рабочего развертывания заданным характеристикам. Вам выставляются счета за вычислительные ресурсы развернутых экземпляров роли, которые остановлены.

Чтобы удалить развертывание или облачную службу, выполните следующие действия.

1. На [портале Azure][Azure portal]выберите облачную службу, которую требуется удалить. Откроется колонка экземпляра облачной службы.

2. В этой колонке выберите **Удалить**.

    ![Кнопка удаления облачных служб](./media/cloud-services-how-to-manage-portal/delete-button.png)

3. Чтобы удалить облачную службу полностью, установите флажок **Облачная служба и ее развертывания**. Или можно установить флажок **Рабочее развертывание** или **Промежуточное развертывание**.

    ![Удаление облачных служб](./media/cloud-services-how-to-manage-portal/delete-blade.png)

4. В нижней части выберите **Удалить**.

5. Чтобы удалить облачную службу, выберите **Delete cloud service** (Удалить облачную службу). Затем в запросе подтверждения выберите **Да**.

> [!NOTE]
> Если был включен режим подробного мониторинга, то при удалении облачной службы необходимо вручную удалить соответствующие данные из учетной записи хранения. Сведения о расположении таблиц метрик см. в статье [Введение в мониторинг облачных служб](cloud-services-how-to-monitor.md).


## <a name="find-more-information-about-failed-deployments"></a>Поиск дополнительных сведений об ошибках развертывания
В верхней части колонки **Обзор** есть строка состояния. Если выбрать эту строку, откроется новая колонка с информацией об ошибках. Если развертывание не содержит ошибок, отобразится пустая колонка.

![Обзор облачных служб](./media/cloud-services-how-to-manage-portal/status-info.png)



[Azure portal]: https://portal.azure.com

## <a name="next-steps"></a>Дальнейшие действия
* [Общая настройка облачной службы](cloud-services-how-to-configure-portal.md).
* Узнайте, как [развернуть облачную службу](cloud-services-how-to-create-deploy-portal.md).
* Настройте [имя пользовательского домена](cloud-services-custom-domain-name-portal.md).
* Настройте [сертификаты TLS/SSL](cloud-services-configure-ssl-certificate-portal.md).