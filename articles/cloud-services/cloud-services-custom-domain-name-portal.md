---
title: Настройка пользовательского доменного имени в облачных службах (классическая модель) | Документация Майкрософт
description: Узнайте, как опубликовать в Интернете приложение или данные Azure на пользовательском домене, настроив параметры DNS.  В этих примерах используется портал Azure.
ms.topic: article
ms.service: cloud-services
ms.date: 10/14/2020
ms.author: tagore
author: tanmaygore
ms.reviewer: mimckitt
ms.custom: ''
ms.openlocfilehash: bced2345473dbcbb5b9adf0269de0bef0549e862
ms.sourcegitcommit: 6272bc01d8bdb833d43c56375bab1841a9c380a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2021
ms.locfileid: "98742375"
---
# <a name="configuring-a-custom-domain-name-for-an-azure-cloud-service-classic"></a>Настройка пользовательского доменного имени для облачной службы Azure (классическая модель)

> [!IMPORTANT]
> [Облачные службы Azure (Расширенная поддержка)](../cloud-services-extended-support/overview.md) — это новая модель развертывания на основе Azure Resource Manager для продукта облачных служб Azure.После этого изменения облачные службы Azure, работающие в модели развертывания на основе Service Manager Azure, были переименованы как облачные службы (классические), и все новые развертывания должны использовать [облачные службы (Расширенная поддержка)](../cloud-services-extended-support/overview.md).

При создании облачной службы Azure ей назначается поддомен **cloudapp.net**. Например, если имя облачной службы — contoso, пользователи будут иметь доступ к приложению по такому URL-адресу: `http://contoso.cloudapp.net`. Azure также назначает виртуальный IP-адрес.

Однако вы также можете предоставить свое приложение на свое собственное доменное имя, например **contoso.com**. В этой статье объясняется, как зарезервировать или настроить личное доменное имя для веб-ролей облачной службы.

Вы уже знаете, что такое записи CNAME и A? [Пропустите это объяснение](#add-a-cname-record-for-your-custom-domain).

> [!NOTE]
> Процедуры в этом задании применяются для облачных служб Azure. Дополнительные сведения о службе приложений см. в статье [Сопоставление существующего настраиваемого DNS-имени с веб-приложениями Azure](../app-service/app-service-web-tutorial-custom-domain.md). Дополнительные сведения о учетных записях хранения см. в статье [Настройка пользовательского доменного имени для конечной точки хранилища BLOB-объектов](../storage/blobs/storage-custom-domain-name.md).
> 
> 

<p/>

> [!TIP]
> Приступите к работе быстрее — воспользуйтесь НОВЫМ [пошаговым руководством](https://support.microsoft.com/kb/2990804)Azure!  Это позволяет привязать имя личного домена и защитить обмен данными (TLS) с помощью облачных служб Azure или веб-сайтов Azure.
> 
> 

## <a name="understand-cname-and-a-records"></a>Что такое записи CNAME и A
И записи CNAME (или записи псевдонимов), и записи А позволяют связать имя домена с конкретным сервером (или службой в данном случае), но они работают по-разному. При использовании записей А с облачными службами Azure существуют также некоторые особые соображения, которые следует учесть, принимая решение, какие именно записи использовать.

### <a name="cname-or-alias-record"></a>Запись CNAME, или запись псевдонима
Запись CNAME сопоставляет *конкретный* домен, например **contoso.com** или **www \. contoso.com**, с каноническим доменным именем. В этом случае каноническим доменным именем является доменное имя **[myapp].cloudapp.net** размещенного приложения Azure. После создания запись CNAME создает псевдоним для **[myapp].cloudapp.net**. Запись CNAME будет автоматически разрешаться в IP-адрес вашей службы **[myapp].cloudapp.net** , поэтому при изменении IP-адреса облачной службы не нужно предпринимать никаких действий.

> [!NOTE]
> Некоторые регистраторы домена позволяют сопоставлять поддомены только при использовании записи CNAME, например www \. contoso.com, а не корневых имен, таких как contoso.com. Дополнительные сведения о записи CNAME см. в документации вашего регистратора, [статье в Википедии о записи CNAME](https://en.wikipedia.org/wiki/CNAME_record) или в документе [Доменные имена IETF — реализация и спецификация](https://tools.ietf.org/html/rfc1035).

### <a name="a-record"></a>Запись A
Запись *A* сопоставляет домен, например **contoso.com** или **www \. contoso.com**, *или домен с подстановочными ЗНАКАМИ* , например **\* . contoso.com**, по IP-адресу. В случае облачной службы Azure — виртуальный IP-адрес службы. Основным преимуществом записи A в записи CNAME является то, что у вас может быть одна запись, использующая подстановочный знак, например \* *_. contoso.com_*, которая обрабатывает запросы для нескольких поддоменов, таких как **mail.contoso.com**, **Login.contoso.com** или **www \. contso.com**.

> [!NOTE]
> Так как запись А сопоставляется со статическим IP-адресом, она не может автоматически разрешаться в IP-адрес вашей облачной службы. IP-адрес, используемый облачной службой, выделяется при первом развертывании в пустом слоте (в рабочей среде или в промежуточном режиме). При удалении развертывания для слота IP-адрес освобождается Azure, а все будущие развертывания в слоте могут получить новый IP-адрес.
> 
> Удобно, что IP-адрес данного слота развертывания (производственного или промежуточного) сохраняется при переходе от промежуточного к производственному развертыванию или при выполнении обновления на месте существующего развертывания. Дополнительные сведения о том, как производить эти действия, см. в статье [Управление облачными службами](cloud-services-how-to-manage-portal.md).
> 
> 

## <a name="add-a-cname-record-for-your-custom-domain"></a>Добавление записи CNAME для пользовательского домена
Чтобы создать запись CNAME, необходимо с помощью средств, предоставляемых вашим регистратором, добавить в таблице DNS новую запись для пользовательского домена. Каждый регистратор имеет похожий, но немного отличный способ указания записи CNAME, хотя используется одна и та же концепция.

1. Чтобы найти доменное имя **.cloudapp.net** , назначенное для вашей облачной службы, используйте один из этих методов.

   * Войдите на [портал Azure], выберите облачную службу, просмотрите раздел **Обзор** , а затем найдите запись **URL-адрес сайта** .

       ![Раздел краткого описания, в котором отображается URL-адрес][csurl]

       **OR**
   * Установите и настройте [Azure Powershell](/powershell/azure/), а затем используйте следующую команду:

       ```powershell
       Get-AzureDeployment -ServiceName yourservicename | Select Url
       ```

     Сохраните имя домена, используемое в URL-адресе, возвращаемом любым методом, так как он понадобится при создании записи CNAME.
2. Войдите на веб-сайт своего регистратора DNS и перейдите на страницу управления DNS. Найдите ссылки или области сайта, обозначенные как **Имя домена**, **DNS** или **Управление сервером доменных имен**.
3. Теперь найдите место, где можно выбрать или ввести CNAME. Может потребоваться выбрать тип записи из раскрывающегося списка или перейти на страницу дополнительных параметров. Ищите слова **CNAME**, **Псевдоним** или **Поддомены**.
4. Кроме того, необходимо указать псевдоним домена или поддомена для CNAME, например **www** , если вы хотите создать псевдоним для **www \. customdomain.com**. Если вы хотите создать псевдоним для корневого домена, он может быть указан как **\@** символ "" в средствах DNS регистратора.
5. Затем необходимо предоставить каноническое имя узла, которым в данном случае является домен **cloudapp.net** вашего приложения.

Например, следующая запись CNAME перенаправляет весь трафик из **www \. contoso.com** в **contoso.cloudapp.NET**, имя пользовательского домена развернутого приложения:

| Псевдоним/Имя узла/Поддомен | Канонический домен |
| --- | --- |
| www |contoso.cloudapp.net |

> [!NOTE]
> Посетитель **www \. contoso.com** никогда не увидит истинный узел (contoso.cloudapp.NET), поэтому процесс пересылки невидим для конечного пользователя.
> 
> Приведенный выше пример применим только к трафику поддомена **www** . Поскольку с записями CNAME нельзя использовать подстановочные знаки, необходимо создать один CNAME для каждого домена или поддомена. Если вы хотите направить трафик из поддоменов, таких как *.contoso.com, на адрес cloudapp.net, можно настроить элемент **URL-адрес перенаправления** или **URL-адрес переадресации** в параметрах DNS или создать запись A.

## <a name="add-an-a-record-for-your-custom-domain"></a>Добавление записи A для пользовательского домена
Чтобы создать запись А, сначала необходимо найти виртуальный IP-адрес облачной службы. Затем необходимо с помощью средств, предоставляемых вашим регистратором, добавить в таблице DNS новую запись для пользовательского домена. Каждый регистратор имеет похожий, но немного отличный способ указания записи А, хотя используется одна и та же концепция.

1. Чтобы получить IP-адрес для своей облачной службы, используйте один из следующих способов.

   * Войдите на [портал Azure], выберите облачную службу, просмотрите раздел **Обзор** , а затем найдите запись **общедоступные IP-адреса** .

       ![Раздел краткого описания, в котором отображается VIP-адрес][vip]

       **OR**
   * Установите и настройте [Azure Powershell](/powershell/azure/), а затем используйте следующую команду:

       ```powershell
       get-azurevm -servicename yourservicename | get-azureendpoint -VM {$_.VM} | select Vip
       ```

     Сохраните IP-адрес, поскольку он понадобится при создании записи А.
2. Войдите на веб-сайт своего регистратора DNS и перейдите на страницу управления DNS. Найдите ссылки или области сайта, обозначенные как **Имя домена**, **DNS** или **Управление сервером доменных имен**.
3. Теперь найдите место, где можно выбрать или ввести запись А. Может потребоваться выбрать тип записи из раскрывающегося списка или перейти на страницу дополнительных параметров.
4. Выберите или введите домен или дочерний домен, который будет использовать эту запись А. Например, выберите **www** , если вы хотите создать псевдоним для **www \. customdomain.com**. Если вы хотите создать запись с подстановочными знаками для всех поддоменов, введите "*****". Будут рассмотрены все поддомены, такие как **mail.customdomain.com**, **login.customdomain.com** и **www \. customdomain.com**.

    Если вы хотите создать запись A для корневого домена, она может быть указана в качестве символа " **\@** " в средствах DNS регистратора.
5. Введите IP-адрес вашей облачной службы в предоставленном поле. Это связывает запись домена, используемую в записи А, с IP-адресом развертывания облачной службы.

Например, следующая запись A перенаправляет весь трафик из **contoso.com** на **137.135.70.239**, IP-адрес развертываемого приложения:

| Имя узла/Поддомен | IP-адрес |
| --- | --- |
| \@ |137.135.70.239 |

В этом примере показано создание записи А для корневого домена. Если вы хотите создать запись с подстановочными знаками, чтобы охватить все поддомены, введите "*****" в качестве поддомена.

> [!WARNING]
> IP-адреса в Azure по умолчанию являются динамическими. Чтобы ваш IP-адрес не изменялся, вы можете использовать [зарезервированный IP-адрес](/previous-versions/azure/virtual-network/virtual-networks-reserved-public-ip) .
> 
> 

## <a name="next-steps"></a>Следующие шаги
* [Управление облачными службами](cloud-services-how-to-manage-portal.md)
* [Сопоставление содержимого CDN с пользовательским доменом](../cdn/cdn-map-content-to-custom-domain.md)
* [Общая настройка облачной службы](cloud-services-how-to-configure-portal.md).
* Узнайте, как [развернуть облачную службу](cloud-services-how-to-create-deploy-portal.md).
* Настройте [сертификаты TLS/SSL](cloud-services-configure-ssl-certificate-portal.md).

[Expose Your Application on a Custom Domain]: #access-app
[Add a CNAME Record for Your Custom Domain]: #add-cname
[Expose Your Data on a Custom Domain]: #access-data
[VIP swaps]: cloud-services-how-to-manage-portal.md#how-to-swap-deployments-to-promote-a-staged-deployment-to-production
[Create a CNAME record that associates the subdomain with the storage account]: #create-cname
[Портал Azure]: https://portal.azure.com
[vip]: ./media/cloud-services-custom-domain-name-portal/csvip.png
[csurl]: ./media/cloud-services-custom-domain-name-portal/csurl.png