---
title: Устранение неполадок развертывания в облачной службе (классическая модель) | Документация Майкрософт
description: Во время развертывания облачной службы в Azure вы можете столкнуться с несколькими типичными проблемами. В этой статье приведены решения некоторых из них.
ms.topic: article
ms.service: cloud-services
ms.date: 10/14/2020
ms.author: tagore
author: tanmaygore
ms.reviewer: mimckitt
ms.custom: ''
ms.openlocfilehash: 7b3d7a9a674aab3976da9399f71ff4d8df08eb62
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "98741083"
---
# <a name="troubleshoot-azure-cloud-services-classic-deployment-problems"></a>Устранение неполадок развертывания облачных служб Azure (классическая модель)

> [!IMPORTANT]
> [Облачные службы Azure (Расширенная поддержка)](../cloud-services-extended-support/overview.md) — это новая модель развертывания на основе Azure Resource Manager для продукта облачных служб Azure.После этого изменения облачные службы Azure, работающие в модели развертывания на основе Service Manager Azure, были переименованы как облачные службы (классические), и все новые развертывания должны использовать [облачные службы (Расширенная поддержка)](../cloud-services-extended-support/overview.md).

При развертывании пакета приложения облачной службы в Azure сведения о развертывании можно получить на панели **Свойства** портала Azure. Сведения, отображающиеся на этой панели, можно использовать для устранения неполадок в работе облачной службы. Кроме того, вы можете передать эту информацию в службу поддержки Azure при открытии нового запроса на поддержку.

Панель **Свойства** можно найти следующим образом.

* На портале Azure щелкните развертывание нужной облачной службы, выберите **Все параметры**, а затем нажмите кнопку **Свойства**.

> [!NOTE]
> Содержимое панели **Свойства** можно скопировать в буфер обмена, щелкнув значок в правом верхнем углу панели.
>
>

[!INCLUDE [support-disclaimer](../../includes/support-disclaimer.md)]

## <a name="problem-i-cannot-access-my-website-but-my-deployment-is-started-and-all-role-instances-are-ready"></a>Проблема: у меня нет доступа к моему веб-сайту, но мое развертывание запущено и все экземпляры роли готовы
URL-адрес веб-сайта, отображаемый на портале, не включает в себя порт. По умолчанию для веб-сайтов используется порт 80. Если в приложении настроено использование другого порта, то при открытии веб-сайта в URL-адрес нужно добавить номер нужного порта.

1. На портале Azure щелкните развертывание нужной облачной службы.
2. На панели **Свойства** портала Azure проверьте порты на наличие экземпляров ролей (в разделе **Входные конечные точки**).
3. Если номер порта — не 80, добавьте правильное значение порта в URL-адрес при доступе к приложению. Чтобы указать нестандартный порт, введите URL-адрес, после него поставьте двоеточие (:), а затем укажите номер порта без пробелов.

## <a name="problem-my-role-instances-recycled-without-me-doing-anything"></a>Проблема: мои экземпляры ролей перезапускаются автоматически
Восстановление службы происходит автоматически, когда Azure обнаруживает проблемные узлы и, следовательно, перемещает экземпляры ролей в новые узлы. В этом случае экземпляры ролей могут перезапускаться автоматически. Чтобы определить, произошло ли восстановление службы, выполните следующие действия.

1. На портале Azure щелкните развертывание нужной облачной службы.
2. На панели **Свойства** портала Azure ознакомьтесь со сведениями и определите, восстанавливалась ли служба во время перезапуска ролей.

Кроме того, роли перезапускаются примерно раз в месяц, когда обновляются ОС узла и гостевая ОС.  
Дополнительные сведения см. в записи блога [Role Instance Restarts Due to OS Upgrades](/archive/blogs/kwill/role-instance-restarts-due-to-os-upgrades) (Перезапуск экземпляра роли из-за обновлений ОС).

## <a name="problem-i-cannot-do-a-vip-swap-and-receive-an-error"></a>Проблема: когда я пробую переключить виртуальный IP-адрес, отображается сообщение об ошибке
Переключение виртуального IP-адреса не допускается, если развертывание обновляется. Развертывание обновляется автоматически в таких случаях:

* доступна новая операционная система на виртуальной машине и на вашем устройстве настроено автоматическое обновление;
* выполняется восстановление службы.

Чтобы узнать, препятствует ли автоматическое обновление переключению виртуального IP-адреса, сделайте следующее:

1. На портале Azure щелкните развертывание нужной облачной службы.
2. На панели **Свойства** портала Azure найдите значение параметра **Состояние**. Если оно равно **Готово**, установите флажок **Последняя операция**, чтобы выяснить, не выполнялась ли операция, которая могла помешать переключению виртуального IP-адреса.
3. Повторите шаги 1 и 2 для развертывания в производственной среде.
4. Если выполняется автоматическое обновление, дождитесь его завершения, прежде чем пытаться переключить виртуальный IP-адрес.

## <a name="problem-a-role-instance-is-looping-between-started-initializing-busy-and-stopped"></a>Проблема: экземпляр роли циклически переключается между состояниями «Запущено», «Инициализация», «Занято» и «Остановлено»
Это может указывать на проблему с кодом, пакетом или файлом конфигурации приложения. В этом случае состояние будет изменяться каждые несколько минут, а на портале Azure могут отображаться примерно такие состояния: **Перезапуск**, **Занято** или **Инициализация**. Это означает, что что-то не так с приложением и что эта проблема не дает работать экземпляру роли.

Дополнительные сведения об устранении этой проблемы см. в записях блога [Azure PaaS Compute Diagnostics Data](/archive/blogs/kwill/windows-azure-paas-compute-diagnostics-data) (Данные диагностики для вычислительных сред Azure PaaS) и [Common issues that cause roles to recycle](cloud-services-troubleshoot-common-issues-which-cause-roles-recycle.md) (Распространенные проблемы, которые вызывают повторное использование ролей).

## <a name="problem-my-application-stopped-working"></a>Проблема: мое приложение перестало работать
1. На портале Azure щелкните экземпляр роли.
2. На панели **Свойства** портала Azure ознакомьтесь со следующими условиями, связанными с устранением проблемы:
   * Если экземпляр роли недавно был остановлен (можно проверить значение **Счетчик прерываний**), возможно, развертывание обновляется. Подождите: работа экземпляра роли может возобновиться автоматически.
   * Если состояние экземпляра роли — **Занято**, проверьте код приложения: возможно, обрабатывается событие [StatusCheck](/previous-versions/azure/reference/ee758135(v=azure.100)) . Может потребоваться добавить или исправить код, который обрабатывает это событие.
   * Просмотрите данные диагностики и сценарии устранения неполадок в записи блога [Данные компьютерной диагностики PaaS Azure](/archive/blogs/kwill/windows-azure-paas-compute-diagnostics-data).

> [!WARNING]
> Если перезапустить облачную службу, будут сброшены свойства развертывания, при этом сведения о первоначальной проблеме будут удалены.
>
>

## <a name="next-steps"></a>Дальнейшие действия
Просмотрите дополнительные [статьи об устранении неполадок](./cloud-services-allocation-failures.md) в облачных службах.

Чтобы узнать, как устранять неполадки ролей облачной службы с помощью диагностических данных компьютеров Azure PaaS, см. [серию статей в блоге Кевина Уильямсона](/archive/blogs/kwill/windows-azure-paas-compute-diagnostics-data).