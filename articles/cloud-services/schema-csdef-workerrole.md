---
title: Схема DEF. WorkerRole (классическая модель) облачных служб Azure | Документация Майкрософт
description: Рабочая роль Azure используется для обобщенной разработки и может выполнять фоновую обработку веб-роли. Сведения о схеме рабочей роли Azure.
ms.topic: article
ms.service: cloud-services
ms.date: 10/14/2020
ms.author: tagore
author: tanmaygore
ms.reviewer: mimckitt
ms.custom: ''
ms.openlocfilehash: 0871527187a3d678cb2b94bd8dc342cf2abde1ba
ms.sourcegitcommit: 6272bc01d8bdb833d43c56375bab1841a9c380a5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2021
ms.locfileid: "98743140"
---
# <a name="azure-cloud-services-classic-definition-workerrole-schema"></a>Схема WorkerRole определения облачных служб Azure (классическая модель)

> [!IMPORTANT]
> [Облачные службы Azure (Расширенная поддержка)](../cloud-services-extended-support/overview.md) — это новая модель развертывания на основе Azure Resource Manager для продукта облачных служб Azure.После этого изменения облачные службы Azure, работающие в модели развертывания на основе Service Manager Azure, были переименованы как облачные службы (классические), и все новые развертывания должны использовать [облачные службы (Расширенная поддержка)](../cloud-services-extended-support/overview.md).

Рабочая роль Azure используется для обобщенной разработки. Она может выполнять фоновую обработку для веб-роли.

По умолчанию определения службы хранятся в файле с расширением .csdef.

## <a name="basic-service-definition-schema-for-a-worker-role"></a>Базовая схема определения службы для рабочей роли
Ниже приведен базовый формат файла с определением службы для рабочей роли.

```xml
<ServiceDefinition …>
  <WorkerRole name="<worker-role-name>" vmsize="<worker-role-size>" enableNativeCodeExecution="[true|false]">
    <Certificates>
      <Certificate name="<certificate-name>" storeLocation="[CurrentUser|LocalMachine]" storeName="[My|Root|CA|Trust|Disallow|TrustedPeople|TrustedPublisher|AuthRoot|AddressBook|<custom-store>" />
    </Certificates>
    <ConfigurationSettings>
      <Setting name="<setting-name>" />
    </ConfigurationSettings>
    <Endpoints>
      <InputEndpoint name="<input-endpoint-name>" protocol="[http|https|tcp|udp]" localPort="<local-port-number>" port="<port-number>" certificate="<certificate-name>" loadBalancerProbe="<load-balancer-probe-name>" />
      <InternalEndpoint name="<internal-endpoint-name" protocol="[http|tcp|udp|any]" port="<port-number>">
         <FixedPort port="<port-number>"/>
         <FixedPortRange min="<minimum-port-number>" max="<maximum-port-number>"/>
      </InternalEndpoint>
     <InstanceInputEndpoint name="<instance-input-endpoint-name>" localPort="<port-number>" protocol="[udp|tcp]">
         <AllocatePublicPortFrom>
            <FixedPortRange min="<minimum-port-number>" max="<maximum-port-number>"/>
         </AllocatePublicPortFrom>
      </InstanceInputEndpoint>
    </Endpoints>
    <Imports>
      <Import moduleName="[RemoteAccess|RemoteForwarder|Diagnostics]"/>
    </Imports>
    <LocalResources>
      <LocalStorage name="<local-store-name>" cleanOnRoleRecycle="[true|false]" sizeInMB="<size-in-megabytes>" />
    </LocalResources>
    <LocalStorage name="<local-store-name>" cleanOnRoleRecycle="[true|false]" sizeInMB="<size-in-megabytes>" />
    <Runtime executionContext="[limited|elevated]">
      <Environment>
         <Variable name="<variable-name>" value="<variable-value>">
            <RoleInstanceValue xpath="<xpath-to-role-environment-settings>"/>
          </Variable>
      </Environment>
      <EntryPoint>
         <NetFxEntryPoint assemblyName="<name-of-assembly-containing-entrypoint>" targetFrameworkVersion="<.net-framework-version>"/>
         <ProgramEntryPoint commandLine="<application>" setReadyOnProcessStart="[true|false]"/>
      </EntryPoint>
    </Runtime>
    <Startup priority="<for-internal-use-only>">
      <Task commandLine="" executionContext="[limited|elevated]" taskType="[simple|foreground|background]">
        <Environment>
         <Variable name="<variable-name>" value="<variable-value>">
            <RoleInstanceValue xpath="<xpath-to-role-environment-settings>"/>
          </Variable>
        </Environment>
      </Task>
    </Startup>
    <Contents>
      <Content destination="<destination-folder-name>" >
        <SourceDirectory path="<local-source-directory>" />
      </Content>
    </Contents>
  </WorkerRole>
</ServiceDefinition>
```

## <a name="schema-elements"></a>Элементы схемы
Файл определения службы содержит следующие элементы (подробно описаны ниже):

[WorkerRole](#WorkerRole)

[ConfigurationSettings](#ConfigurationSettings)

[Параметр](#Setting)

[LocalResources](#LocalResources)

[LocalStorage](#LocalStorage)

[Конечные точки](#Endpoints)

[InputEndpoint](#InputEndpoint)

[InternalEndpoint](#InternalEndpoint)

[InstanceInputEndpoint](#InstanceInputEndpoint)

[AllocatePublicPortFrom](#AllocatePublicPortFrom)

[FixedPort](#FixedPort)

[фикседпортранже](#FixedPortRange)

[Сертификаты](#Certificates)

[Сертификат](#Certificate)

[Импортирует](#Imports)

[Импорт](#Import)

[Параметры выполнения](#Runtime)

[Среда](#Environment)

[EntryPoint](#EntryPoint)

[нетфксентрипоинт](#NetFxEntryPoint)

[ProgramEntryPoint](#ProgramEntryPoint)

[Переменная](#Variable)

[RoleInstanceValue](#RoleInstanceValue)

[Запуск](#Startup)

[Задача](#Task)

[Contents](#Contents)

[Содержимое](#Content)

[SourceDirectory](#SourceDirectory)

##  <a name="workerrole"></a><a name="WorkerRole"></a> WorkerRole
Элемент `WorkerRole` описывает роль для обобщенной разработки, которая может выполнять фоновую обработку для веб-роли. Служба может содержать любое число рабочих ролей либо не содержать ни одной.

В таблице ниже описаны атрибуты элемента `WorkerRole`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|name|строка|Обязательный. Имя рабочей роли. Это имя должно быть уникальным.|
|enableNativeCodeExecution|Логическое|Необязательный элемент. Значение по умолчанию — `true`. Выполнение машинного кода и полный уровень доверия включены по умолчанию. Установите для этого атрибута значение `false`, чтобы отключить для рабочей роли выполнение машинного кода и использовать частичное доверие Azure.|
|vmsize|строка|Необязательный параметр. Это значение используется для изменения размера виртуальной машины, выделяемой для роли. Значение по умолчанию — `Small`. Список возможных размеров виртуальной машины и их атрибутов см. в статье [Размеры для облачных служб](cloud-services-sizes-specs.md).|

##  <a name="configurationsettings"></a><a name="ConfigurationSettings"></a> ConfigurationSettings
Элемент `ConfigurationSettings` описывает коллекцию параметров конфигурации для рабочей роли. Этот элемент является родительским для элемента `Setting`.

##  <a name="setting"></a>Значение <a name="Setting"></a>
Элемент `Setting` описывает пару "имя — значение", которая определяет параметр конфигурации для экземпляра роли.

В таблице ниже описаны атрибуты элемента `Setting`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|name|строка|Обязательный. Уникальное имя параметра конфигурации.|

Параметры конфигурации для роли в формате пар "имя — значение", которые объявляются в файле определения службы и настраиваются в файле конфигурации службы.

##  <a name="localresources"></a><a name="LocalResources"></a> LocalResources
Элемент `LocalResources` описывает коллекцию локальных ресурсов хранилища для рабочей роли. Этот элемент является родительским для элемента `LocalStorage`.

##  <a name="localstorage"></a><a name="LocalStorage"></a> LocalStorage
Элемент `LocalStorage` определяет локальный ресурс хранилища, который предоставляет для место в файловой системе в среде выполнения. Для роли можно не определить ни одного или определить несколько локальных ресурсов хранилища.

> [!NOTE]
>  Элемент `LocalStorage` может отображаться как дочерний для элемента `WorkerRole`. Это нужно для обеспечения совместимости с предыдущими версиями пакета Azure SDK.

В таблице ниже описаны атрибуты элемента `LocalStorage`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|name|строка|Обязательный. Уникальное имя локального хранилища.|
|cleanOnRoleRecycle|Логическое|Необязательный элемент. Указывает, должно ли очищаться локальное хранилище при перезапуске роли. Значение по умолчанию — `true`.|
|sizeInMb|INT|Необязательный элемент. Требуемый объем дискового пространства, выделяемого для локального хранилища (МБ). Если значение не указано, по умолчанию выделяется 100 МБ. Минимальный объем выделяемого дискового пространства составляет 1 МБ.<br /><br /> Максимальный размер локальных ресурсов зависит от размера виртуальной машины. Дополнительные сведения см. в статье [Размеры для облачных служб](cloud-services-sizes-specs.md).|

Имя каталога, выделенного для локального ресурса хранилища, соответствует значению, указанному в атрибуте имени.

##  <a name="endpoints"></a><a name="Endpoints"></a> Конечные точки
Элемент `Endpoints` описывает для роли коллекцию, состоящую из входных (внешних) и внутренних конечных точек, а также входных конечных точек экземпляров. Этот элемент является родительским для элементов `InputEndpoint`, `InternalEndpoint` и `InstanceInputEndpoint`.

Входные и внутренние конечные точки выделяются раздельно. Служба может иметь в общей сложности 25 входных и внутренних конечных точек, а также входных конечных точек экземпляров. Их можно распределить между 25 ролями, доступными для службы. Например, вы можете выделить по пять входных конечных точек каждой из пяти ролей службы или по одной входной конечной точке каждой из 25 ролей.

> [!NOTE]
>  Для каждой развернутой роли требуется один экземпляр. Подготовка по умолчанию для подписки ограничена 20 ядрами, и, соответственно, 20 экземплярами роли. Если приложению требуется больше экземпляров, чем обеспечивается подготовкой по умолчанию, вы можете повысить это ограничение. Подробнее см. сведения на [странице службы поддержки](https://azure.microsoft.com/support/options/).

##  <a name="inputendpoint"></a><a name="InputEndpoint"></a> InputEndpoint
Элемент `InputEndpoint` описывает внешнюю конечную точку рабочей роли.

Вы можете определить несколько конечных точек в любой комбинации из следующего набора: HTTP, HTTPS, UDP и TCP. Для входной конечной точки можно задать любой номер порта на ваш выбор, но номера портов, указанные для каждой роли в службе, должны быть уникальными. Например, если вы укажете, что веб-роль использует порт 80 для HTTP и порт 443 для HTTPS, вы можете назначить для второй веб-роли порт 8080 для HTTP и порт 8043 для HTTPS.

В таблице ниже описаны атрибуты элемента `InputEndpoint`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|name|строка|Обязательный. Уникальное имя внешней конечной точки.|
|protocol|строка|Обязательный. Транспортный протокол для внешней конечной точки. Для рабочей роли возможными значениями могут быть `HTTP`, `HTTPS`, `UDP` или `TCP`.|
|порт|INT|Обязательный. Порт для внешней конечной точки. Можно задать любой номер порта на ваш выбор, но номера портов, указанные для каждой роли в службе, должны быть уникальными.<br /><br /> Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).|
|сертификат|строка|Обязательный для конечной точки HTTPS. Имя сертификата, определенное элементом `Certificate`.|
|localPort|INT|Необязательный элемент. Указывает порт, используемый для внутренних подключений к конечной точке. Атрибут `localPort` сопоставляет внешний порт конечной точки с внутренним портом в роли. Это полезно в сценариях, где роль должна обмениваться данными с внутренним компонентом через порт, который отличается от того, который предоставляется наружу.<br /><br /> Если значение `localPort` не указано, оно совпадает со значением атрибута `port`. Установите для параметра `localPort` значение *, чтобы автоматически назначить любой свободный порт. Номер этого порта можно узнать через API среды выполнения.<br /><br /> Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).<br /><br /> Атрибут `localPort` доступен только при использовании пакета Azure SDK версии 1.3 или выше.|
|ignoreRoleInstanceStatus|Логическое|Необязательный элемент. Если этому атрибуту присвоено значение `true`, состояние службы не учитывается и конечная точка не удаляется подсистемой балансировки нагрузки. Присвоение этому параметру значения `true` будет полезно для отладки занятых экземпляров службы. Значение по умолчанию — `false`. **Примечание.** Конечная точка по-прежнему может принимать трафик, даже если роль не находится в состоянии готовности.|
|loadBalancerProbe|строка|Необязательный параметр. Имя подсистемы балансировки нагрузки, связанной со входной конечной точкой. Дополнительные сведения см. в статье [Azure Cloud Services Definition LoadBalancerProbe Schema](schema-csdef-loadbalancerprobe.md) (Определение облачных служб Azure. Схема LoadBalancerProbe).|

##  <a name="internalendpoint"></a><a name="InternalEndpoint"></a> интерналендпоинт
Элемент `InternalEndpoint` описывает внутреннюю конечную точку рабочей роли. Внутренняя конечная точка доступна только для других экземпляров роли в службе и не является доступной для клиентов за пределами службы. Рабочая роль может иметь до пяти внутренних конечных точек HTTP, UDP или TCP.

В таблице ниже описаны атрибуты элемента `InternalEndpoint`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|name|строка|Обязательный. Уникальное имя внутренней конечной точки.|
|protocol|строка|Обязательный. Транспортный протокол для внутренней конечной точки. Возможные значения: `HTTP`, `TCP`, `UDP` или `ANY`.<br /><br /> Значение `ANY` указывает, что допустим любой протокол и любой порт.|
|порт|INT|Необязательный элемент. Порт, используемый для внутренних подключений системы балансировки нагрузки к конечной точке. Конечная точка с балансировкой нагрузки использует два порта: Один из них используется для общедоступного IP-адреса, а другой — для частного IP-адреса. Обычно это один порт, но вы можете использовать разные порты.<br /><br /> Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).<br /><br /> Атрибут `Port` доступен только при использовании пакета Azure SDK версии 1.3 или выше.|

##  <a name="instanceinputendpoint"></a><a name="InstanceInputEndpoint"></a> InstanceInputEndpoint
Элемент `InstanceInputEndpoint` описывает входную конечную точку экземпляра для рабочей роли. Входная конечная точка экземпляра связана с конкретным экземпляром роли с помощью переадресации портов в подсистеме балансировки нагрузки. Каждая входная конечная точка экземпляра сопоставляется с конкретным портом из диапазона возможных портов. Этот элемент является родительским для элемента `AllocatePublicPortFrom`.

Элемент `InstanceInputEndpoint` доступен только при использовании пакета Azure SDK версии 1.7 или выше.

В таблице ниже описаны атрибуты элемента `InstanceInputEndpoint`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|name|строка|Обязательный. Уникальное имя конечной точки.|
|localPort|INT|Обязательный. Указывает внутренний порт, который будут прослушивать все экземпляры ролей, чтобы получать входящий трафик, отправляемый из подсистемы балансировки нагрузки. Возможный диапазон значений — от 1 до 65 535 включительно.|
|protocol|строка|Обязательный. Транспортный протокол для внутренней конечной точки. Возможные значения: `udp` или `tcp`. Используйте `tcp` для трафика на основе HTTP и HTTPS.|

##  <a name="allocatepublicportfrom"></a><a name="AllocatePublicPortFrom"></a> аллокатепубликпортфром
Элемент `AllocatePublicPortFrom` описывает диапазон открытых портов, которые могут использовать внешние клиенты для доступа к входной конечной точке экземпляра. Из этого диапазона выделяется номер общедоступного порта (на виртуальном IP-адресе), который назначается каждой конечной точке экземпляра роли во время развертывания и обновления клиента. Этот элемент является родительским для элемента `FixedPortRange`.

Элемент `AllocatePublicPortFrom` доступен только при использовании пакета Azure SDK версии 1.7 или выше.

##  <a name="fixedport"></a><a name="FixedPort"></a> фикседпорт
Элемент `FixedPort` указывает порт для внутренней конечной точки, который обеспечивает подключения к конечной точке с балансировкой нагрузки.

Элемент `FixedPort` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `FixedPort`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|порт|INT|Обязательный. Порт для внутренней конечной точки. Применение этого атрибута имеет такой же эффект, как и настройка одинаковых значений для верхней и нижней границ диапазона портов `FixedPortRange`.<br /><br /> Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).|

##  <a name="fixedportrange"></a><a name="FixedPortRange"></a> FixedPortRange
Элемент `FixedPortRange` указывает диапазон портов, назначаемых внутренней конечной точке или входной конечной точке экземпляра. Он также устанавливает порт, используемый для подключений к конечной точке с балансировкой нагрузки.

> [!NOTE]
>  Элемент `FixedPortRange` работает по-разному в зависимости от того, в каком элементе он находится. Если элемент `FixedPortRange` находится в элементе `InternalEndpoint`, он открывает все порты подсистемы балансировки нагрузки в диапазоне от верхнего до нижнего значения соответствующих атрибутов для всех виртуальных машин, на которых выполняется эта роль. Если элемент `FixedPortRange` находится в элементе `InstanceInputEndpoint`, он открывает только один порт в диапазоне от верхнего до нижнего значения соответствующих атрибутов на каждой виртуальной машине, выполняющей эту роль.

Элемент `FixedPortRange` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `FixedPortRange`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|мин|INT|Обязательный. Минимальный номер порта в диапазоне. Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).|
|max|строка|Обязательный. Максимальный номер порта в диапазоне. Возможный диапазон значений — от 1 до 65 535 включительно (пакет Azure SDK версии 1.7 и выше).|

##  <a name="certificates"></a><a name="Certificates"></a> Сертификаты
Элемент `Certificates` описывает коллекцию сертификатов для рабочей роли. Этот элемент является родительским для элемента `Certificate`. Роль может иметь любое число связанных сертификатов. Дополнительные сведения об использовании элементов certificate см. в разделе [Шаг 2. Изменение файлов определения службы и конфигурации](cloud-services-configure-ssl-certificate-portal.md#step-2-modify-the-service-definition-and-configuration-files).

##  <a name="certificate"></a><a name="Certificate"></a> Certificate
Элемент `Certificate` описывает сертификат, связанный с рабочей ролью.

В таблице ниже описаны атрибуты элемента `Certificate`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|name|строка|Обязательный. Имя этого сертификата, которое используется для ссылки на него, когда оно связано с элементом HTTPS `InputEndpoint`.|
|storeLocation|строка|Обязательный. Расположение хранилища сертификатов, в котором размещается этот сертификат на локальном компьютере. Возможные значения: `CurrentUser` и `LocalMachine`.|
|storeName|строка|Обязательный. Имя хранилища сертификатов, в котором размещается этот сертификат на локальном компьютере. Возможные значения включают стандартные имена хранилищ `My`, `Root`, `CA`, `Trust`, `Disallowed`, `TrustedPeople`, `TrustedPublisher`, `AuthRoot`, `AddressBook` или любое пользовательское имя хранилища. Если указано пользовательское имя хранилища, хранилище создается автоматически.|
|permissionLevel|строка|Необязательный параметр. Указывает права доступа, предоставленные процессам роли. Если вы хотите, чтобы только процессы с повышенными привилегиями имели доступ к закрытому ключу, укажите разрешение `elevated`. Разрешение `limitedOrElevated` позволяет всем процессам роли получать доступ к закрытому ключу. Возможные значения: `limitedOrElevated` или `elevated`. Значение по умолчанию — `limitedOrElevated`.|

##  <a name="imports"></a><a name="Imports"></a> Импортирует
Элемент `Imports` описывает коллекцию модулей импорта для рабочей роли, которые добавляют компоненты в гостевую ОС. Этот элемент является родительским для элемента `Import`. Он является необязательным, и в роли может быть только один блок среды выполнения.

Элемент `Imports` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

##  <a name="import"></a><a name="Import"></a> Импортиру
Элемент `Import` указывает модуль для добавления в гостевую ОС.

Элемент `Import` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `Import`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|moduleName|строка|Обязательный. Имя модуля, который нужно импортировать. Допустимыми модулями являются:<br /><br /> — RemoteAccess;<br />— RemoteForwarder;<br />— Diagnostics.<br /><br /> Модули RemoteAccess и RemoteForwarder позволяют настроить экземпляр роли для подключения удаленного рабочего стола. Дополнительные сведения см. в статье [Включение подключения к удаленному рабочему столу для роли в облачных службах Azure](cloud-services-role-enable-remote-desktop-new-portal.md).<br /><br /> Модуль Diagnostics позволяет собирать диагностические данные экземпляра роли.|

##  <a name="runtime"></a><a name="Runtime"></a> Этапе
Элемент `Runtime` описывает коллекцию параметров переменных среды для рабочей роли, которые управляют средой выполнения хост-процесса Azure. Этот элемент является родительским для элемента `Environment`. Он является необязательным, и в роли может быть только один блок среды выполнения.

Элемент `Runtime` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `Runtime`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|executionContext|строка|Необязательный параметр. Указывает контекст, в котором запускается процесс роли. Контекст по умолчанию — `limited`.<br /><br /> -   `limited` — процесс запускается без прав администратора.<br />-   `elevated` — процесс запускается с правами администратора.|

##  <a name="environment"></a><a name="Environment"></a> PXE
Элемент `Environment` описывает коллекцию параметров переменных среды для рабочей роли. Этот элемент является родительским для элемента `Variable`. Роль может иметь любое число заданных переменных среды.

##  <a name="variable"></a><a name="Variable"></a> Перемен
Элемент `Variable` указывает переменную среды, которая будет установлена ​​в гостевой ОС.

Элемент `Variable` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `Variable`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|name|строка|Обязательный. Имя переменной среды для установки.|
|value|строка|Необязательный параметр. Задаваемое значение для переменной среды. Необходимо включить либо атрибут значения, либо элемент `RoleInstanceValue`.|

##  <a name="roleinstancevalue"></a><a name="RoleInstanceValue"></a> RoleInstanceValue
Элемент `RoleInstanceValue` указывает путь xPath, из которого извлекается значение переменной.

В таблице ниже описаны атрибуты элемента `RoleInstanceValue`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|xpath|строка|Необязательный параметр. Путь расположения параметров развертывания для экземпляра. Дополнительные сведения см. в статье [Предоставление параметров конфигурации ролей как переменной среды с помощью XPath](cloud-services-role-config-xpath.md).<br /><br /> Необходимо включить либо атрибут значения, либо элемент `RoleInstanceValue`.|

##  <a name="entrypoint"></a><a name="EntryPoint"></a> EntryPoint
Элемент `EntryPoint` указывает точку входа для роли. Этот элемент является родительским для элементов `NetFxEntryPoint`. Эти элементы позволяют указать в качестве точки входа роли приложение, отличное от стандартного WaWorkerHost.exe.

Элемент `EntryPoint` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

##  <a name="netfxentrypoint"></a><a name="NetFxEntryPoint"></a> NetFxEntryPoint
Элемент `NetFxEntryPoint` указывает программу, которую следует запустить для роли.

> [!NOTE]
>  Элемент `NetFxEntryPoint` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

В таблице ниже описаны атрибуты элемента `NetFxEntryPoint`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|аssemblyName|строка|Обязательный. Путь и имя файла сборки, содержащей точку входа. Путь задается относительно папки **\\ %ROLEROOT%\Approot** (не указывайте **\\ %ROLEROOT%\Approot** в `commandLine` , предполагается). **%ROLEROOT%** — это переменная среды, поддерживаемая Azure и представляющая расположение корневой папки для роли. Папка **\\ %ROLEROOT%\Approot** представляет папку приложения для вашей роли.|
|targetFrameworkVersion|строка|Обязательный. Версия .NET Framework, в которой создана сборка. Например, `targetFrameworkVersion="v4.0"`.|

##  <a name="programentrypoint"></a><a name="ProgramEntryPoint"></a> програментрипоинт
Элемент `ProgramEntryPoint` указывает программу, которую следует запустить для роли. Элемент `ProgramEntryPoint` указывает точку входа программы, которая не зависит от сборки .NET.

> [!NOTE]
>  Элемент `ProgramEntryPoint` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

В таблице ниже описаны атрибуты элемента `ProgramEntryPoint`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|commandLine|строка|Обязательный. Путь, имя файла и все аргументы командной строки для выполнения программы. Этот путь является относительным к папке **%ROLEROOT%\Approot** (не указывайте **%ROLEROOT%\Approot** в командной строке, это подразумевается). **%ROLEROOT%** — это переменная среды, поддерживаемая Azure и представляющая расположение корневой папки для роли. Папка **%ROLEROOT%\Approot** представляет папку приложения для роли.<br /><br /> Роль очищается, когда завершается программа, поэтому программу следует создавать для продолжительной работы, а не просто для выполнения ограниченной по времени задачи.|
|setReadyOnProcessStart|Логическое|Обязательный. Указывает, должен ли экземпляр роли ожидать от программы командной строки сигнал о начале работы. Сейчас этот аргумент должен иметь значение `true`. Возможность установить значение `false` зарезервирована для будущего использования.|

##  <a name="startup"></a><a name="Startup"></a> Запуска
Элемент `Startup` описывает коллекцию задач, выполняемых при запуске роли. Этот элемент может являться родительским для элемента `Variable`. Дополнительные сведения об использовании задач запуска роли см. в статье [Как настроить и выполнить задачи запуска для облачной службы](cloud-services-startup-tasks.md). Этот элемент является необязательным, и в роли может быть только один блок запуска.

В таблице ниже описаны атрибуты элемента `Startup`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|priority|INT|Только для внутреннего использования.|

##  <a name="task"></a><a name="Task"></a> Задачи
Элемент `Task` указывает задачу запуска, которая выполняется при запуске роли. Задачи запуска могут использоваться для выполнения задач, которые подготавливают роль для запуска, таких как установка программных компонентов или запуск других приложений. Задачи выполняются в порядке их размещения в блоке элементов `Startup`.

Элемент `Task` доступен только при использовании пакета Azure SDK версии 1.3 или выше.

В таблице ниже описаны атрибуты элемента `Task`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|commandLine|строка|Обязательный. Скрипт, например CMD-файл, содержащий команды для выполнения. Команда запуска и пакетные файлы должны быть сохранены в формате ANSI. Форматы файлов, которые размещают маркер порядка байтов в начале файла, не будут обрабатываться должным образом.|
|executionContext|строка|Задает контекст, в котором будет выполняться скрипт.<br /><br /> -   `limited` (по умолчанию) — выполняется с теми же привилегиями, что и роль, в которой размещается процесс.<br />-   `elevated` — запуск с правами администратора.|
|taskType|строка|Задает поведение выполнения команды.<br /><br /> -   `simple` (по умолчанию) — система ждет завершения задачи перед запуском других задач.<br />-   `background` — система не ждет завершения задачи.<br />-   `foreground` — аналогично фоновому режиму, за исключением того, что роль не перезапускается, пока все задачи переднего плана не будут завершены.|

##  <a name="contents"></a><a name="Contents"></a> Описание
Элемент `Contents` описывает коллекцию содержимого для рабочей роли. Этот элемент является родительским для элемента `Content`.

Элемент `Contents` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

##  <a name="content"></a><a name="Content"></a> Содержимое
Элемент `Content` определяет исходное расположение содержимого для копирования на виртуальную машину Azure и путь назначения, куда копируется содержимое.

Элемент `Content` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

В таблице ниже описаны атрибуты элемента `Content`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|ресурс destination|строка|Обязательный. Расположение на виртуальной машине Azure, куда помещается содержимое. Задается по отношению к папке **%ROLEROOT%\Approot**.|

Этот элемент является родительским для элемента `SourceDirectory`.

##  <a name="sourcedirectory"></a><a name="SourceDirectory"></a> SourceDirectory
Элемент `SourceDirectory` определяет локальный каталог, из которого копируется содержимое. Он используется для определения локального содержимого, которое копируется на виртуальную машину Azure.

Элемент `SourceDirectory` доступен только при использовании пакета Azure SDK версии 1.5 или выше.

В таблице ниже описаны атрибуты элемента `SourceDirectory`.

| attribute | Тип | Описание |
| --------- | ---- | ----------- |
|path|строка|Обязательный. Относительный или абсолютный путь к локальному каталогу, содержимое которого копируется на виртуальную машину Azure. В пути к каталогу поддерживается использование переменных среды.|

## <a name="see-also"></a>См. также
[Схема определения облачных служб (классических)](schema-csdef-file.md).



