---
title: Как добавить эталонные наборы данных в вашу среду с помощью службы "аналитика временных рядов Azure" | Документация Майкрософт
description: Из этой статьи вы узнаете, как добавить эталонный набор данных в среду аналитики временных рядов Azure.
ms.service: time-series-insights
services: time-series-insights
author: deepakpalled
ms.author: dpalled
manager: diviso
ms.reviewer: jasonh, kfile
ms.workload: big-data
ms.topic: conceptual
ms.date: 09/30/2020
ms.custom: seodec18
ms.openlocfilehash: d80d97a609aa3a464b9b114439fe7f4058e287c3
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96001836"
---
# <a name="create-a-reference-data-set-for-your-azure-time-series-insights-gen1-environment-using-the-azure-portal"></a>Создайте эталонный набор данных для среды Gen1 "аналитика временных рядов Azure" с помощью портал Azure

> [!CAUTION]
> Эта статья посвящена службе "Аналитика временных рядов Azure" 1-го поколения.

Из этой статьи вы узнаете, как добавить эталонный набор данных в среду Аналитики временных рядов Azure. Соединив эталонные данные с исходными, можно получить расширенные значения.

Эталонный набор данных — это коллекция элементов, которые дополняют события из вашего источника событий. Обработчик входящего трафика службы "аналитика временных рядов Azure" соединяет каждое событие из источника событий с соответствующей строкой данных в эталонном наборе данных. Это дополненное событие становится доступным для запроса. Это соединение основано на столбцах первичного ключа, определенных в эталонном наборе данных.

Ретроактивное объединение с эталонными данными не поддерживается. Таким же, только текущие и будущие входящие данные сопоставляются и соединяются со ссылочной датой после настройки и отправки.

## <a name="video"></a>Видео

### <a name="learn-about-time-series-insights-reference-data-modelbr"></a>Сведения о модели ссылочных данных аналитики временных рядов.</br>

> [!VIDEO <https://www.youtube.com/embed/Z0NuWQUMv1o>]

## <a name="add-a-reference-data-set"></a>Добавление эталонного набора данных

1. Войдите на [портал Azure](https://portal.azure.com).

1. Нахождение существующей среды службы "аналитика временных рядов Azure". На портале Azure щелкните **Все ресурсы** в меню слева. Выберите среду службы "аналитика временных рядов Azure".

1. Откройте страницу **Обзор**. Разверните раздел **основные компоненты** в верхней части страницы, чтобы перейти к **URL-адресу обозревателя "аналитика временных рядов** " и открыть ссылку.  

   [![Развернуть раздел Essentials](media/add-reference-data-set/essentials.png)](media/add-reference-data-set/essentials.png#lightbox)

   Просмотр обозревателя для среды службы "аналитика временных рядов Azure".

1. Разверните элемент выбора среды в обозревателе службы "аналитика временных рядов Azure". Выберите активную среду. Щелкните значок эталонные данные в правом верхнем углу страницы обозревателя.

   [![Добавление эталонных данных](media/add-reference-data-set/tsi-select-environment-and-data-icons.png)](media/add-reference-data-set/tsi-select-environment-and-data-icons.png#lightbox)

1. Нажмите кнопку **+ Добавить набор данных**, чтобы начать добавление нового набора данных.

   [![Добавление набора данных](media/add-reference-data-set/tsi-add-a-reference-data-set.png)](media/add-reference-data-set/tsi-add-a-reference-data-set.png#lightbox)

1. На странице **Новый эталонный набор данных** выберите формат данных:

   - выберите **CSV-файл** для данных с разделителями-запятыми (первая строка считается строкой заголовка);
   - Выберите **массив JSON** для данных в формате JSON (нотация объектов JavaScript).

   [![Выберите формат данных.](media/add-reference-data-set/tsi-select-data-upload-option.png)](media/add-reference-data-set/tsi-select-data-upload-option.png#lightbox)

1. Укажите данные, используя один из двух способов:

   - вставьте данные в текстовый редактор а затем нажмите кнопку **Проанализировать эталонные данные**;
   - нажмите кнопку **Выберите файл**, чтобы добавить данные из локального текстового файла.

   Например, вставьте данные CSV: [ ![ вставленные данные CSV](media/add-reference-data-set/select-csv-and-enter-data.png)](media/add-reference-data-set/select-csv-and-enter-data.png#lightbox)

   Например, вставьте данные массива JSON: [ ![ Вставка данных JSON](media/add-reference-data-set/select-json-option-and-enter-data.png)](media/add-reference-data-set/select-json-option-and-enter-data.png#lightbox)

   Если при анализе значений данных произойдет ошибка, она отобразится красным цветом в нижней части страницы, например таким образом: `CSV parsing error, no rows extracted`.

1. После успешного анализа данных появится сетка данных с отображением столбцов и строк с данными. Просмотрите сетку данных, чтобы убедиться, что все правильно.

   [![Проверка ссылочных данных](media/add-reference-data-set/review-displayed-data-grid.png)](media/add-reference-data-set/review-displayed-data-grid.png#lightbox)

1. Проверьте каждый столбец, чтобы понять предполагаемый тип данных, и при необходимости измените тип данных.  Выберите символ типа данных в заголовке столбца: **#** для Double (числовые данные), **T | F** для типа Boolean или **ABC** для String.

   [![Выбор типов данных в заголовках столбцов](media/add-reference-data-set/select-column-types.png)](media/add-reference-data-set/select-column-types.png#lightbox)

1. При необходимости переименуйте заголовки столбцов. Имя ключевого столбца необходимо для присоединения к соответствующему свойству в источнике события.

   > [!IMPORTANT]
   > Убедитесь, что имя ключевого столбца эталонных данных точно совпадает с именем события для входящих данных, включая чувствительность к регистру. Имена столбцов, не являющихся ключевыми, используются для добавления входящих данных с соответствующими значениями эталонных данных.

1. Введите значение в поле **Filter the rows...** (Отфильтровать строки...), чтобы при необходимости просмотреть отдельные строки. Фильтр используется для просмотра данных, но не применяется при их загрузке.

1. Присвойте имя набору данных, заполнив поле **Имя набора данных** над сеткой данных.

    [![Присвоение имени набору данных](media/add-reference-data-set/enter-reference-data-set-name.png)](media/add-reference-data-set/enter-reference-data-set-name.png#lightbox)

1. Укажите столбец **первичного ключа** в наборе данных, выбрав раскрывающееся меню над сеткой данных.

    [![Выбор столбца первичного ключа](media/add-reference-data-set/select-primary-key-column.png)](media/add-reference-data-set/select-primary-key-column.png#lightbox)

    **(Необязательно)** Нажмите **+** кнопку, чтобы добавить вторичный ключевой столбец в качестве составного первичного ключа. Если нужно отменить выбор, выберите пустое значение из раскрывающегося списка, чтобы удалить вторичный ключ.

1. Для передачи данных нажмите кнопку **передачи строк**.

    [![Отправка строк и подтверждение данных.](media/add-reference-data-set/confirm-upload-reference-data.png)](media/add-reference-data-set/confirm-upload-reference-data.png#lightbox)

    На странице вы увидите подтверждение завершенной загрузки и сообщение **Набор данных успешно отправлен**.

    > [!WARNING]
    > Столбцы или свойства, совместно используемые эталонными наборами данных, будут отображать **дублирующуюся ошибку передачи имени свойства** . Ошибка не помешает успешной передаче эталонных наборов данных. Его можно удалить, объединив строки, совместно использующие повторяющееся имя свойства.

1. Выберите **Добавить строку**, выполнить **групповое импорт строк** или **Добавить столбец** для добавления дополнительных значений ссылочных данных по мере необходимости.

    [![Добавление строки, строки с массовым импортом или добавление столбца.](media/add-reference-data-set/add-row-or-bulk-upload.png)](media/add-reference-data-set/add-row-or-bulk-upload.png#lightbox)

   > [!IMPORTANT]
   > Все строки, которые совместно используют уникальный ключ с другой строкой, будут иметь свои столбцы, переопределенные последней добавляемой строкой, которая использует этот уникальный ключ.

   > [!NOTE]
   > Добавленные строки **не** обязательно должны быть *прямоугольными* — они могут содержать меньшее, большее или изменяющееся число столбцов из других записей в эталонном наборе данных.

## <a name="next-steps"></a>Дальнейшие действия

- [Управление эталонными данными](time-series-insights-manage-reference-data-csharp.md) программными средствами.

- Полный справочник по API см. в документе [API эталонных данных](/rest/api/time-series-insights/gen1-reference-data-api) .