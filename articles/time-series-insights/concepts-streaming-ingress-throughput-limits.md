---
title: Ограничения пропускной способности приема потоковой передачи — Gen2 "аналитика временных рядов Azure" | Документация Майкрософт
description: Сведения о предельной пропускной способности в Gen2 Azure Time Series Insights.
author: lyrana
ms.author: lyhughes
manager: dpalled
ms.workload: big-data
ms.service: time-series-insights
services: time-series-insights
ms.topic: conceptual
ms.date: 01/21/2021
ms.custom: seodec18
ms.openlocfilehash: 72b78f49ed8b7016b92262de7256492fa6d5d7d1
ms.sourcegitcommit: b39cf769ce8e2eb7ea74cfdac6759a17a048b331
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2021
ms.locfileid: "98676807"
---
# <a name="streaming-ingestion-throughput-limits"></a>Ограничения пропускной способности приема потоковой передачи

Ниже описаны ограничения на входные данные потоковой передачи Azure Time Series Insights Gen2.

> [!TIP]
> Полный список всех ограничений см. в статье [Планирование среды Gen2 для аналитики временных рядов Azure](./how-to-plan-your-environment.md#review-azure-time-series-insights-gen2-limits) .

## <a name="per-environment-limitations"></a>Ограничения на среду

Как правило, скорость входящего трафика рассматривается как произведение числа устройств в организации, частоты отправки событий и размера каждого события:

* **число устройств** × **частота отправки событий** × **размер каждого события**.

По умолчанию служба "аналитика временных рядов Azure" Gen2 может принимать входящие данные с частотой **до 1 МБ в секунду (Мбит/с) на среду Gen2 "аналитика временных рядов Azure"**. Существуют дополнительные ограничения [для каждой секции центра](./concepts-streaming-ingress-throughput-limits.md#hub-partitions-and-per-partition-limits).

> [!TIP]
>
> * Запрос может предоставить поддержку скорости приема до 2 Мбит/с.
> * Свяжитесь с нами, если требуется более высокая пропускная способность, отправив запрос в службу поддержки через портал Azure.

* **Пример 1**.

    В Contoso Shipping имеется 100 000 устройств, которые создают событие три раза в минуту. Размер события составляет 200 байт. Они используют центр Интернета вещей с четырьмя секциями в качестве источника событий Gen2 для службы "аналитика временных рядов Azure".

  * Скорость приема для среды Azure Time Series Insights Gen2: **100 000 устройств * 200 байт/событие * (3/60 событий/с) = 1 Мбит/с**.
    * При условии сбалансированных секций ставка приема на секцию составит 0,25 Мбит/с.
    * Ставка приема для доставки Contoso должна быть в пределах ограничений масштабирования.

* **Пример 2.**

    Аналитика "contoso" имеет 10 000 устройств, каждый из которых создает событие каждую секунду. Они используют концентратор событий со значением счетчика секций 2 в качестве источника событий Gen2 для службы "аналитика временных рядов Azure". Размер события составляет 200 байт.

  * Скорость приема в окружении: **10 000 устройств * 200 байт/событие * 1 событие/с = 2 Мбит/с**.
    * Если предполагается сбалансированные секции, их частота каждого раздела будет составлять 1 Мбит/с.
    * Скорость приема в Contoso Fleet Analytics превышает ограничения, заданные для среды и секции. Они могут отправить запрос в службу "аналитика временных рядов Azure" Gen2 с помощью портал Azure, чтобы увеличить частоту приема для своей среды, и создать концентратор событий с дополнительными секциями в пределах ограничений.

## <a name="hub-partitions-and-per-partition-limits"></a>Секции центра и ограничения на секцию

При планировании среды Gen2 "аналитика временных рядов Azure" важно учитывать конфигурацию источников событий, которые будут подключаться к Gen2 "аналитика временных рядов Azure". Для включения горизонтального масштабирования в целях обработки событий Центр Интернета вещей Azure и Центры событий используют секции.

*Секция* — это упорядоченная последовательность событий, хранящаяся в центре. Число секций задается на этапе создания центра и не может быть изменено.

Рекомендации по секционированию Центров событий см. в разделе о [необходимом количестве секций](../event-hubs/event-hubs-faq.md#how-many-partitions-do-i-need).

> [!NOTE]
> Большинство центров Интернета вещей, используемых с Gen2 службы "аналитика временных рядов Azure", требуют только четыре раздела.

Независимо от того, создаете ли вы новый центр для среды Gen2 "аналитика временных рядов Azure" или используете существующую, необходимо рассчитать частоту приема каждого раздела, чтобы определить, не превышены ли они в пределы.

Gen2 "аналитика временных рядов Azure" в настоящее время имеет общий **предел для раздела в 0,5 Мбит/** с.

### <a name="iot-hub-specific-considerations"></a>Специфика работы с Центром Интернета вещей

Создаваемому в Центре Интернета вещей устройству назначается секция на постоянной основе. В этом случае Центр Интернета вещей может гарантировать упорядочение событий (так как назначение никогда не меняется).

Фиксированное назначение секции также влияет на экземпляры Gen2 временных рядов Azure, которые принимают данные, отправляемые из центра Интернета вещей. Когда сообщения с нескольких устройств перенаправляются в центр с помощью одного идентификатора устройства шлюза, они могут поступить в одну секцию одновременно, что может привести к превышению ограничений на масштаб каждой секции.

**Влияние**.

* Если в одном разделе реализована постоянная скорость приема данных по достижении предела, возможно, Azure Time Series Insights Gen2 не будет синхронизировать все данные телеметрии устройств до тех пор, пока не истечет срок хранения. При постоянном превышении ограничений приема отправленные данные могут быть потеряны.

Чтобы избежать подобных ситуаций, рекомендуются следующие методы.

* Перед развертыванием решения рассчитайте скорость приема на секцию.
* Оптимально распределите нагрузку на устройства Центра Интернета.

> [!IMPORTANT]
> Для сред, использующих центр Интернета вещей в качестве источника событий, вычислите скорость приема с помощью числа используемых устройств-концентраторов, чтобы ставка была меньше 0,5 Мбит/с на ограничение секций.
>
> * Даже если несколько событий поступают одновременно, это ограничение не будет превышено.

  ![Диаграмма секций Центра Интернета вещей](media/concepts-ingress-overview/iot-hub-partiton-diagram.png)

Дополнительные сведения об оптимизации пропускной способности центра и секций см. в следующих ресурсах:

* [Масштаб центра Интернета вещей](../iot-hub/iot-hub-scaling.md)
* [Масштаб Центра событий](../event-hubs/event-hubs-scalability.md#throughput-units)
* [Секции Центра событий](../event-hubs/event-hubs-features.md#partitions)

## <a name="next-steps"></a>Следующие шаги

* Дополнительные сведения о [хранении](./concepts-storage.md) данных
