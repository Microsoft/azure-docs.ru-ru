---
title: Выходные привязки HTTP для функций Azure
description: Узнайте, как вернуть HTTP-ответы в службе "функции Azure".
author: craigshoemaker
ms.topic: reference
ms.date: 02/21/2020
ms.author: cshoe
ms.openlocfilehash: a25658677e436edf4d001599bb4981f527016596
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "84697448"
---
# <a name="azure-functions-http-output-bindings"></a>Выходные привязки HTTP для функций Azure

Привязка для вывода HTTP используется для ответа отправителю запроса HTTP. Эта привязка требует наличия триггера HTTP и позволяет настроить ответ на запрос этого триггера.

Возвращаемое по умолчанию значение для функции, активируемой по HTTP:

- `HTTP 204 No Content` с пустым телом в Функциях 2.x и более поздних версий;
- `HTTP 200 OK` с пустым телом в Функциях 1.x.

## <a name="configuration"></a>Конфигурация

В следующей таблице описываются свойства конфигурации привязки, которые задаются в файле *function.json*. Для библиотек класса C# свойства атрибута, соответствующие этим свойствам *function.json*, отсутствуют.

|Свойство.  |Описание  |
|---------|---------|
| **type** |Нужно задать значение `http`. |
| **direction** | Нужно задать значение `out`. |
| **name** | Имя переменной, используемое в коде функции для ответа, или `$return` для использования возвращаемого значения. |

## <a name="usage"></a>Использование

Чтобы отправить ответ HTTP, используйте шаблоны ответов языкового стандарта. В C# или скрипте C# задайте тип возвращаемого значения функции `IActionResult` или `Task<IActionResult>`. В C# атрибут возвращаемого значения не является обязательным.

Примеры ответов см. в разделе с [примером триггера](./functions-bindings-http-webhook-trigger.md#example).

## <a name="hostjson-settings"></a>Параметры файла host.json

В этом разделе описаны глобальные параметры конфигурации, доступные для этой привязки в версиях 2. x и более поздних. Пример host.jsв файле ниже содержит только параметры версии 2. x + для этой привязки. Дополнительные сведения о глобальных параметрах конфигурации в версиях 2. x и более поздних версий см. в разделе [host.jsв справочнике по функциям Azure](functions-host-json.md).

> [!NOTE]
> Чтобы получить дополнительные сведения о файле host.json в Функции 1.x, см. статью [host.json reference for Azure Functions 1.x](functions-host-json-v1.md#http)(Справочник по файлу host.json для службы "Функции Azure" версии 1.x.).

```json
{
    "extensions": {
        "http": {
            "routePrefix": "api",
            "maxOutstandingRequests": 200,
            "maxConcurrentRequests": 100,
            "dynamicThrottlesEnabled": true,
            "hsts": {
                "isEnabled": true,
                "maxAge": "10"
            },
            "customHeaders": {
                "X-Content-Type-Options": "nosniff"
            }
        }
    }
}
```

|Свойство  |По умолчанию | Описание |
|---------|---------|---------| 
| кустомхеадерс|нет|Позволяет задавать пользовательские заголовки в HTTP-ответе. В предыдущем примере в ответ добавляется `X-Content-Type-Options` заголовок, чтобы избежать перехвата типа содержимого. |
|dynamicThrottlesEnabled|условия<sup>\*</sup>|Если этот параметр включен, то конвейер обработки запросов периодически проверяет системные счетчики производительности, например `connections/threads/processes/memory/cpu/etc` , и если какой-либо из этих счетчиков превышает встроенный высокий порог (80%), запросы будут отклонены с `429 "Too Busy"` ответом, пока счетчики не вернутся на обычные уровни.<br/><sup>\*</sup>Значение по умолчанию в плане потребления — `true` . По умолчанию выделенный план имеет значение `false` .|
|HSTS|не включено|Если `isEnabled` для задано значение `true` , то [поведением HTTP-протокола HTTPS (HSTS) в .NET Core](/aspnet/core/security/enforcing-ssl?view=aspnetcore-3.0&tabs=visual-studio#hsts) является принудительное применение, как определено в [ `HstsOptions` классе](/dotnet/api/microsoft.aspnetcore.httpspolicy.hstsoptions?view=aspnetcore-3.0). В приведенном выше примере свойство также задает [`maxAge`](/dotnet/api/microsoft.aspnetcore.httpspolicy.hstsoptions.maxage?view=aspnetcore-3.0#Microsoft_AspNetCore_HttpsPolicy_HstsOptions_MaxAge) 10 дней. Поддерживаются `hsts` следующие свойства: <table><tr><th>Свойство.</th><th>Описание</th></tr><tr><td>ексклудедхостс</td><td>Массив строк имен узлов, для которого заголовок HSTS не добавляется.</td></tr><tr><td>includeSubDomains</td><td>Логическое значение, указывающее, включен ли параметр Инклудесубдомаин заголовка с уровнем безопасности "Долгосрочный транспорт — Безопасность".</td></tr><tr><td>maxAge</td><td>Строка, определяющая параметр max-age заголовка с ограничением транспорта по безопасности.</td></tr><tr><td>Preload (Предварительная загрузка)</td><td>Логическое значение, указывающее, включен ли параметр предварительной загрузки заголовка с уровнем безопасности "Долгосрочный транспорт — Безопасность".</td></tr></table>|
|maxConcurrentRequests|100<sup>\*</sup>|Максимальное число функций HTTP, выполняемых параллельно. Это значение позволяет управлять параллелизмом, что может помочь в управлении использованием ресурсов. Например, у вас может быть функция HTTP, которая использует большое количество системных ресурсов (память, ЦП и сокеты), что вызывает проблемы при слишком высоком уровне параллелизма. Или у вас может быть функция, выполняющая исходящие запросы к сторонней службе, и эти вызовы должны быть ограничены скоростью. В таких случаях может помочь применение регулирования. <br/><sup>*</sup>Значение по умолчанию для плана потребления — 100. Значение по умолчанию для выделенного плана не ограничено ( `-1` ).|
|maxOutstandingRequests|200<sup>\*</sup>|Максимальное число невыполненных запросов, которое хранится в любой отдельно взятый момент времени. Это ограничение включает запросы, которые находятся в очереди, но еще не начали выполняться, а также все запросы в процессе выполнения. Все входящие запросы, превышающие это ограничение, отклоняются с ответом 429 "Too Busy" (Перегрузка). Это позволяет вызывающим объектам использовать стратегии повторов на основе времени, а также помогает вам контролировать максимальные задержки запросов. Эта настройка влияет только на очереди, которые создаются по пути выполнения средства обработки скриптов. Она не влияет на другие очереди, такие как очередь запросов ASP.NET. <br/><sup>\*</sup>Значение по умолчанию для плана потребления — 200. Значение по умолчанию для выделенного плана не ограничено ( `-1` ).|
|routePrefix|api|Префикс маршрута, который применяется ко всем маршрутам. Используйте пустую строку, чтобы удалить префикс по умолчанию. |

## <a name="next-steps"></a>Дальнейшие действия

- [Выполнение функции из HTTP-запроса](./functions-bindings-http-webhook-trigger.md)