---
title: Справочник по файлу host.json для службы "Функции Azure" версии 2.x
description: Справочная документация по файлу host.json для Функций Azure в среде выполнения версии V2.
ms.topic: conceptual
ms.date: 04/28/2020
ms.openlocfilehash: cbedf2212c52d8f1996d3cce0d96d494313ea525
ms.sourcegitcommit: e6de1702d3958a3bea275645eb46e4f2e0f011af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102608824"
---
# <a name="hostjson-reference-for-azure-functions-2x-and-later"></a>Справочник по host.json для Функций Azure 2.x и более поздних версий 

> [!div class="op_single_selector" title1="Выберите версию используемой среды выполнения функций Azure: "]
> * [Версия 1](functions-host-json-v1.md)
> * [Версия 2 +](functions-host-json.md)

Файл метаданных *host.json* содержит параметры глобальной конфигурации, влияющие на все функции приложения-функции. В этой статье перечислены параметры, доступные начиная с версии 2. x среды выполнения функций Azure.  

> [!NOTE]
> Эта статья предназначена для функций Azure 2. x и более поздних версий.  Чтобы получить дополнительные сведения о файле host.json в Функции 1.x, см. статью [host.json reference for Azure Functions 1.x](functions-host-json-v1.md)(Справочник по файлу host.json для службы "Функции Azure" версии 1.x.).

Другие параметры конфигурации приложения-функции управляются в [параметрах приложения](functions-app-settings.md) (для развернутых приложений) или в [local.settings.js](functions-run-local.md#local-settings-file) файле (для локальной разработки).

Конфигурации в host.js, связанные с привязками, применяются одинаково к каждой функции в приложении функции. 

Можно также [переопределить или применить параметры для каждой среды](#override-hostjson-values) с помощью параметров приложения.

## <a name="sample-hostjson-file"></a>Пример файла host.json

В следующем примере *host.jsв* файле для версии 2. x + указаны все возможные параметры (за исключением всех, которые предназначены только для внутреннего использования).

```json
{
    "version": "2.0",
    "aggregator": {
        "batchSize": 1000,
        "flushTimeout": "00:00:30"
    },
    "extensions": {
        "blobs": {},
        "cosmosDb": {},
        "durableTask": {},
        "eventHubs": {},
        "http": {},
        "queues": {},
        "sendGrid": {},
        "serviceBus": {}
    },
    "extensionBundle": {
        "id": "Microsoft.Azure.Functions.ExtensionBundle",
        "version": "[1.*, 2.0.0)"
    },
    "functions": [ "QueueProcessor", "GitHubWebHook" ],
    "functionTimeout": "00:05:00",
    "healthMonitor": {
        "enabled": true,
        "healthCheckInterval": "00:00:10",
        "healthCheckWindow": "00:02:00",
        "healthCheckThreshold": 6,
        "counterThreshold": 0.80
    },
    "logging": {
        "fileLoggingMode": "debugOnly",
        "logLevel": {
          "Function.MyFunction": "Information",
          "default": "None"
        },
        "applicationInsights": {
            "samplingSettings": {
              "isEnabled": true,
              "maxTelemetryItemsPerSecond" : 20,
              "evaluationInterval": "01:00:00",
              "initialSamplingPercentage": 100.0, 
              "samplingPercentageIncreaseTimeout" : "00:00:01",
              "samplingPercentageDecreaseTimeout" : "00:00:01",
              "minSamplingPercentage": 0.1,
              "maxSamplingPercentage": 100.0,
              "movingAverageRatio": 1.0,
              "excludedTypes" : "Dependency;Event",
              "includedTypes" : "PageView;Trace"
            },
            "enableLiveMetrics": true,
            "enableDependencyTracking": true,
            "enablePerformanceCountersCollection": true,            
            "httpAutoCollectionOptions": {
                "enableHttpTriggerExtendedInfoCollection": true,
                "enableW3CDistributedTracing": true,
                "enableResponseHeaderInjection": true
            },
            "snapshotConfiguration": {
                "agentEndpoint": null,
                "captureSnapshotMemoryWeight": 0.5,
                "failedRequestLimit": 3,
                "handleUntrackedExceptions": true,
                "isEnabled": true,
                "isEnabledInDeveloperMode": false,
                "isEnabledWhenProfiling": true,
                "isExceptionSnappointsEnabled": false,
                "isLowPrioritySnapshotUploader": true,
                "maximumCollectionPlanSize": 50,
                "maximumSnapshotsRequired": 3,
                "problemCounterResetInterval": "24:00:00",
                "provideAnonymousTelemetry": true,
                "reconnectInterval": "00:15:00",
                "shadowCopyFolder": null,
                "shareUploaderProcess": true,
                "snapshotInLowPriorityThread": true,
                "snapshotsPerDayLimit": 30,
                "snapshotsPerTenMinutesLimit": 1,
                "tempFolder": null,
                "thresholdForSnapshotting": 1,
                "uploaderProxy": null
            }
        }
    },
    "managedDependency": {
        "enabled": true
    },
    "retry": {
      "strategy": "fixedDelay",
      "maxRetryCount": 5,
      "delayInterval": "00:00:05"
    },
    "singleton": {
      "lockPeriod": "00:00:15",
      "listenerLockPeriod": "00:01:00",
      "listenerLockRecoveryPollingInterval": "00:01:00",
      "lockAcquisitionTimeout": "00:01:00",
      "lockAcquisitionPollingInterval": "00:00:03"
    },
    "watchDirectories": [ "Shared", "Test" ],
    "watchFiles": [ "myFile.txt" ]
}
```

В следующих разделах этой статьи объясняется каждое свойство верхнего уровня. Все они являются необязательными, если не указано иное.

## <a name="aggregator"></a>aggregator

[!INCLUDE [aggregator](../../includes/functions-host-json-aggregator.md)]

## <a name="applicationinsights"></a>applicationInsights

Этот параметр является дочерним элементом [ведения журнала](#logging).

Управляет параметрами Application Insights, включая [Параметры выборки](./configure-monitoring.md#configure-sampling).

Полную структуру JSON см. в предыдущем [примере host.jsв файле](#sample-hostjson-file).

> [!NOTE]
> Выборка журналов может привести к тому, что некоторые выполнения не будут отображаться в колонке монитора Application Insights. Чтобы избежать выборки журналов, добавьте `excludedTypes: "Request"` к `samplingSettings` значению.

| Свойство | По умолчанию | Описание |
| --------- | --------- | --------- | 
| самплингсеттингс | Н/Д | См. раздел [applicationInsights. самплингсеттингс](#applicationinsightssamplingsettings). |
| енаблеливеметрикс | true | Включает сбор динамических метрик. |
| енабледепенденцитраккинг | true | Включает отслеживание зависимостей. |
| енаблеперформанцекаунтерсколлектион | true | Включает сбор счетчиков производительности KUDU. |
| ливеметриксинитиализатионделай | 00:00:15 | Только для внутреннего использования. |
| хттпаутоколлектионоптионс | Н/Д | См. раздел [applicationInsights. хттпаутоколлектионоптионс](#applicationinsightshttpautocollectionoptions). |
| снапшотконфигуратион | Н/Д | См. раздел [applicationInsights. снапшотконфигуратион](#applicationinsightssnapshotconfiguration). |

### <a name="applicationinsightssamplingsettings"></a>applicationInsights. Самплингсеттингс

Дополнительные сведения об этих параметрах см. [в разделе Выборка в Application Insights](../azure-monitor/app/sampling.md). 

|Свойство | По умолчанию | Описание |
| --------- | --------- | --------- | 
| isEnabled | true | Включает или отключает выборку. | 
| maxTelemetryItemsPerSecond | 20 | Целевое количество элементов телеметрии, регистрируемых за секунду на каждом узле сервера. Если приложение выполняется на нескольких узлах, сократите это значение, чтобы оно оставалось в пределах общей целевой частоты трафика. | 
| евалуатионинтервал | 01:00:00 | Интервал повторного вычисления текущей скорости телеметрии. Вычисление выполняется на основе скользящего среднего. Вы можете сократить этот интервал, если наблюдаете неожиданные скачки данных телеметрии в сторону увеличения. |
| инитиалсамплингперцентаже| 100.0 | Первоначальный процент выборки, примененный в начале процесса выборки, для динамического изменения процентного значения. Не сокращайте значение во время отладки. |
| самплингперцентажеинкреасетимеаут | 00:00:01 | При изменении значения в процентах выборки это свойство определяет, как вскоре Application Insights может снова увеличить процент выборки для сбора дополнительных данных. |
| самплингперцентажедекреасетимеаут | 00:00:01 | При изменении значения в процентах выборки это свойство определяет, как вскоре Application Insights может уменьшить процент выборки для сбора меньшего объема данных. |
| минсамплингперцентаже | 0.1 | Так как процент выборки изменяется, это свойство определяет минимально разрешенный процент выборки. |
| макссамплингперцентаже | 100.0 | Так как процент выборки изменяется, это свойство определяет максимально допустимый процент выборки. |
| мовингаверажератио | 1.0 | Взвешенное значение, присваиваемое последнему значению при вычислении скользящего среднего. Используйте значение не больше 1. Использование значений ниже рекомендуемых приводит к тому, что скорость реагирования алгоритма на резкие изменения замедляется. |
| ексклудедтипес | null | Разделенный точками с запятой список типов, которые не нужно выделять. Распознаваемые типы: `Dependency` , `Event` , `Exception` , `PageView` , `Request` и `Trace` . Передаются все экземпляры указанных типов; типы, которые не указаны, являются примерами. |
| инклудедтипес | null | Разделенный точками с запятой список типов, для которых необходимо выполнить выборку. пустой список подразумевает все типы. Тип, указанный в списке `excludedTypes` переопределяемые типы переопределений. Распознаваемые типы: `Dependency` , `Event` , `Exception` , `PageView` , `Request` и `Trace` . Экземплярами указанных типов является выборка; типы, которые не указаны или подразумеваемые, передаются без выборки. |

### <a name="applicationinsightshttpautocollectionoptions"></a>applicationInsights. Хттпаутоколлектионоптионс

|Свойство | По умолчанию | Описание |
| --------- | --------- | --------- | 
| енаблехттптригжерекстендединфоколлектион | true | Включает или отключает расширенные сведения о HTTP-запросе для триггеров HTTP: заголовки корреляции входящих запросов, поддержку ключей многоплатформенного инструментирования, метод HTTP, путь и ответ. |
| enableW3CDistributedTracing | true | Включает или отключает поддержку протокола распределенной трассировки W3C (и включает устаревшую схему корреляции). Включается по умолчанию, если `enableHttpTriggerExtendedInfoCollection` имеет значение true. Если `enableHttpTriggerExtendedInfoCollection` имеет значение false, этот флаг применяется только к исходящим запросам, а не к входящим запросам. |
| енаблереспонсехеадеринжектион | true | Включает или отключает внедрение заголовков корреляции нескольких компонентов в ответы. Включение внедрения позволяет Application Insights создавать схему приложения, когда используются несколько ключей инструментирования. Включается по умолчанию, если `enableHttpTriggerExtendedInfoCollection` имеет значение true. Этот параметр не применяется `enableHttpTriggerExtendedInfoCollection` , если имеет значение false. |

### <a name="applicationinsightssnapshotconfiguration"></a>applicationInsights. Снапшотконфигуратион

Дополнительные сведения о моментальных снимках см. в статьях [Отладка моментальных снимков для исключений в приложениях .NET](../azure-monitor/app/snapshot-debugger.md) и устранение неполадок, связанных с [Application Insights snapshot Debugger или просмотром моментальных снимков](../azure-monitor/app/snapshot-debugger-troubleshoot.md).

|Свойство | По умолчанию | Описание |
| --------- | --------- | --------- | 
| ажентендпоинт | null | Конечная точка, используемая для подключения к службе Snapshot Debugger Application Insights. Если значение равно null, используется конечная точка по умолчанию. |
| каптуреснапшотмеморивеигхт | 0,5 | Вес, присвоенный текущему размеру памяти процесса при проверке наличия достаточного объема памяти для создания моментального снимка. Ожидаемое значение больше 0 в правильной дробной части (0 < Каптуреснапшотмеморивеигхт < 1). |
| фаиледрекуестлимит | 3 | Предельное число неудачных запросов для запроса моментальных снимков перед отключением обработчика телеметрии.|
| хандлеунтраккедексцептионс | true | Включает или отключает отслеживание исключений, которые не отслеживаются с помощью Application Insights телеметрии. |
| isEnabled | true | Включает или отключает сбор моментальных снимков | 
| исенаблединдевелопермоде | false | Включает или отключает сбор моментальных снимков в режиме разработчика. |
| исенабледвхенпрофилинг | true | Включает или отключает создание моментального снимка, даже если Application Insights Profiler собирает подробный сеанс профилирования. |
| исексцептионснаппоинтсенаблед | false | Включает или отключает фильтрацию исключений. |
| исловприоритиснапшотуплоадер | true | Определяет, следует ли запускать процесс Снапшотуплоадер с нормальным приоритетом. |
| максимумколлектионплансизе | 50 | Максимальное число проблем, которые можно отслеживанить в любое время в диапазоне от 1 до 9999. |
| максимумснапшотсрекуиред | 3 | Максимальное количество моментальных снимков, собранных для одной проблемы, в диапазоне от 1 до 999. Проблему можно рассматривать как отдельную инструкцию throw в приложении. Когда количество моментальных снимков, собираемых для проблемы, достигает этого значения, для этой проблемы больше не будет собираться моментальные снимки, пока не будут сброшены счетчики проблем (см `problemCounterResetInterval` . раздел), а `thresholdForSnapshotting` ограничение будет достигнуто снова. |
| проблемкаунтерресетинтервал | 24:00:00 | Частота сброса счетчиков проблем в диапазоне от одной минуты до семи дней. При достижении этого интервала все счетчики проблем сбрасываются в ноль. Существующие проблемы, которые уже достигли порогового значения для создания моментальных снимков, но еще не создали число моментальных снимков в `maximumSnapshotsRequired` , остаются активными. |
| провидеанонимаустелеметри | true | Определяет, следует ли отправить в корпорацию Майкрософт анонимное использование и данные телеметрии ошибок. Эти данные телеметрии могут использоваться при обращении в корпорацию Майкрософт для помощи в устранении проблем с Snapshot Debugger. Он также используется для наблюдения за шаблонами использования. |
| реконнектинтервал | 00:15:00 | Частота повторного подключения к конечной точке Snapshot Debugger. Допустимый диапазон — одна минута до одного дня. |
| шадовкопифолдер | null | Указывает папку, используемую для теневого копирования двоичных файлов. Если не задано, то будут использоваться папки, указанные в следующих переменных среды: Fabric_Folder_App_Temp, LOCALAPPDATA, APPDATA, TEMP. |
| шареуплоадерпроцесс | true | Если значение — true, только один экземпляр Снапшотуплоадер будет выполнять собираются и загружаются моментальные снимки для нескольких приложений, совместно использующих InstrumentationKey. Если задано значение false, Снапшотуплоадер будет уникальным для каждого кортежа (ProcessName, InstrumentationKey). |
| снапшотинловприоритисреад | true | Определяет, следует ли обрабатывать моментальные снимки в потоке с низким приоритетом ввода-вывода. Создание моментального снимка — это быстрая операция, но для отправки моментального снимка в службу Snapshot Debugger ее необходимо сначала записать на диск в виде минидампа. Это происходит в процессе Снапшотуплоадер. При установке этого значения в true используются операции ввода-вывода с низким приоритетом для записи минидампа, что не будет конкурировать с приложением для ресурсов. Установка этого значения в значение false ускоряет создание минидампа за счет снижения производительности приложения. |
| снапшотспердайлимит | 30 | Максимальное число моментальных снимков, разрешенных за один день (24 часа). Это ограничение также применяется на стороне службы Application Insights. Скорость передачи составляет не более 50 в день для каждого приложения (то есть ключа инструментирования). Это значение помогает предотвратить создание дополнительных моментальных снимков, которые в конечном итоге будут отклонены во время передачи. Нулевое значение полностью удаляет ограничение, что не рекомендуется. |
| снапшотспертенминутеслимит | 1 | Максимальное число моментальных снимков, разрешенное за 10 минут. Хотя для этого значения нет верхней границы, следует соблюдать осторожность при их увеличении в рабочих нагрузках, поскольку это может повлиять на производительность приложения. Создание моментального снимка выполняется быстро, но создание минидампа моментального снимка и его передача в службу Snapshot Debugger — это более медленная операция, которая будет конкурировать с приложением для ресурсов (как ЦП, так и ввода-вывода). |
| темпфолдер | null | Указывает папку для записи минидампа и файлов журналов отгрузки. Если параметр не задан, используется *%темп%\думпс* . |
| Параметр thresholdforsnapshotting задает | 1 | Количество раз, когда Application Insights должны увидеть исключение перед запросом моментальных снимков. |
| уплоадерпрокси | null | Переопределяет прокси-сервер, используемый в процессе отправки моментального снимка. Этот параметр может потребоваться использовать, если приложение подключается к Интернету через прокси-сервер. Snapshot Collector выполняется в процессе приложения и будет использовать те же параметры прокси-сервера. Однако загрузчик моментальных снимков выполняется как отдельный процесс, и вам может потребоваться настроить прокси-сервер вручную. Если это значение равно null, Snapshot Collector попытается автоматически определить адрес прокси-сервера путем проверки System .NET. WebRequest. Дефаултвебпрокси и передачи значения в средство передачи моментальных снимков. Если это значение не равно null, то автоматическое обнаружение не используется, а указанный здесь прокси-сервер будет использоваться в отправке моментальных снимков. |

## <a name="blobs"></a>BLOB-объекты

Параметры конфигурации можно найти в [триггерах и привязках BLOB-объектов хранилища](functions-bindings-storage-blob.md#hostjson-settings).  

## <a name="cosmosdb"></a>СosmosDB

Параметры конфигурации можно найти в разделе [host.json settings](functions-bindings-cosmosdb-v2-output.md#host-json) (параметры файла host.json).

## <a name="customhandler"></a>кустомхандлер

Параметры конфигурации для пользовательского обработчика. Дополнительные сведения см. в статье [пользовательские обработчики функций Azure](functions-custom-handlers.md#configuration).

```json
"customHandler": {
  "description": {
    "defaultExecutablePath": "server",
    "workingDirectory": "handler",
    "arguments": [ "--port", "%FUNCTIONS_CUSTOMHANDLER_PORT%" ]
  },
  "enableForwardingHttpRequest": false
}
```

|Свойство | По умолчанию | Описание |
| --------- | --------- | --------- |
| дефаултексекутаблепас | Н/Д | Исполняемый файл, запускаемый в качестве процесса настраиваемого обработчика. Это обязательный параметр при использовании пользовательских обработчиков и его значение относительно корня приложения-функции. |
| WorkingDirectory | *корень приложения функции* | Рабочий каталог, в котором запускается процесс настраиваемого обработчика. Это необязательный параметр, и его значение задается относительно корня приложения-функции. |
| аргументы | Н/Д | Массив аргументов командной строки для передачи в процесс пользовательского обработчика. |
| енаблефорвардингхттпрекуест | false | Если задано, все функции, состоящие только из HTTP-триггеров и выходных данных HTTP, перенаправляют исходный HTTP-запрос вместо [полезных данных запроса](functions-custom-handlers.md#request-payload)пользовательского обработчика. |

## <a name="durabletask"></a>durableTask

Параметры конфигурации можно найти в разделе [host.json settings](durable/durable-functions-bindings.md#host-json) (параметры файла host.json).

## <a name="eventhub"></a>eventHub

Параметры конфигурации можно найти в разделе [host.json settings](functions-bindings-event-hubs.md#host-json) (параметры файла host.json). 

## <a name="extensions"></a>extensions

Свойство, которое возвращает объект, содержащий все параметры определенной привязки, такие как [http](#http) и [eventHub](#eventhub).

## <a name="extensionbundle"></a>екстенсионбундле 

Пакеты расширений позволяют добавить совместимый набор функций расширений привязки к приложению-функции. Дополнительные сведения см. в разделе [пакеты расширений для локальной разработки](functions-bindings-register.md#extension-bundles).

[!INCLUDE [functions-extension-bundles-json](../../includes/functions-extension-bundles-json.md)]

## <a name="functions"></a>functions

Список функций, которые выполняют узел заданий. Пустой массив означает выполнение всех функций. Предназначен для использования только при [локальном выполнении](functions-run-local.md). Чтобы отключить определенные функции в приложениях-функциях Azure, выполните следующие действия в разделе [Способы отключения функций в решении "Функции Azure"](disable-function.md) вместо использования этого параметра.

```json
{
    "functions": [ "QueueProcessor", "GitHubWebHook" ]
}
```

## <a name="functiontimeout"></a>functionTimeout

Указывает время ожидания для всех функций. Он соответствует формату строки TimeSpan. 

| Тип плана | По умолчанию (мин.) | Максимум (мин) |
| -- | -- | -- |
| Потребление | 5 | 10 |
| Premium<sup>1</sup> | 30 | -1 (без ограничений)<sup>2</sup> |
| Выделенная (служба приложений) | 30 | -1 (без ограничений)<sup>2</sup> |

<sup>1</sup> выполнение плана Premium гарантируется только в течение 60 минут, но технически не ограничено.   
<sup>2</sup> значение `-1` указывает на неограниченное выполнение, но рекомендуется сохранить фиксированную верхнюю границу.

```json
{
    "functionTimeout": "00:05:00"
}
```

## <a name="healthmonitor"></a>healthMonitor

Параметры конфигурации для [монитора работоспособности узла](https://github.com/Azure/azure-webjobs-sdk-script/wiki/Host-Health-Monitor).

```
{
    "healthMonitor": {
        "enabled": true,
        "healthCheckInterval": "00:00:10",
        "healthCheckWindow": "00:02:00",
        "healthCheckThreshold": 6,
        "counterThreshold": 0.80
    }
}
```

|Свойство  |По умолчанию | Описание |
|---------|---------|---------| 
|Включено|true|Указывает, включена ли функция. | 
|healthCheckInterval|10 с|Интервал времени между периодическими фоновыми проверками работоспособности. | 
|healthCheckWindow|2 минуты|Скользящее окно времени, используемое в сочетании с параметром `healthCheckThreshold`.| 
|healthCheckThreshold|6|Максимальное количество попыток проверки работоспособности, которые могут завершиться сбоем, прежде чем инициируется повторный запуск.| 
|counterThreshold|0,80|Пороговое значение, при достижении которого счетчик производительности будет считаться неработоспособным.| 

## <a name="http"></a>http

Параметры конфигурации см. в статье [Триггеры и привязки HTTP в службе "Функции Azure"](functions-bindings-http-webhook-output.md#hostjson-settings).

## <a name="logging"></a>Ведение журнала

Управляет поведением ведения журнала приложения-функции, включая Application Insights.

```json
"logging": {
    "fileLoggingMode": "debugOnly",
    "logLevel": {
      "Function.MyFunction": "Information",
      "default": "None"
    },
    "console": {
        ...
    },
    "applicationInsights": {
        ...
    }
}
```

|Свойство  |По умолчанию | Описание |
|---------|---------|---------|
|fileLoggingMode|debugOnly|Определяет, какой уровень журнала файла включен.  Доступны следующие параметры: `never`, `always` и `debugOnly`. |
|LogLevel|Н/Д|Объект, который определяет фильтрацию категорий журналов для функций в приложении. Этот параметр позволяет фильтровать ведение журнала для конкретных функций. Дополнительные сведения см. в разделе [Настройка уровней ведения журнала](configure-monitoring.md#configure-log-levels). |
|console|Н/Д| Параметр ведения журнала [консоли](#console). |
|applicationInsights|Н/Д| Параметр [applicationInsights](#applicationinsights). |

## <a name="console"></a>console

Этот параметр является дочерним элементом [ведения журнала](#logging). Если не в режиме отладки, этот параметр контролирует ведение журнала консоли.

```json
{
    "logging": {
    ...
        "console": {
          "isEnabled": "false"
        },
    ...
    }
}
```

|Свойство  |По умолчанию | Описание |
|---------|---------|---------| 
|isEnabled|false|Включает или отключает ведение журнала консоли.| 

## <a name="manageddependency"></a>манажеддепенденци

Управляемая зависимость — это функция, которая в настоящее время поддерживается только функциями на основе PowerShell. Это позволяет автоматически управлять зависимостями службой. Если `enabled` свойство имеет значение `true` , `requirements.psd1` файл обрабатывается. Зависимости обновляются при выпуске любых дополнительных версий. Дополнительные сведения см. в разделе [управляемая зависимость](functions-reference-powershell.md#dependency-management) в статье PowerShell.

```json
{
    "managedDependency": {
        "enabled": true
    }
}
```

## <a name="queues"></a>queues

Параметры конфигурации можно найти в разделе [host.json settings](functions-bindings-storage-queue.md#host-json).  

## <a name="retry"></a>retry

Управляет параметрами [политики повтора](./functions-bindings-error-pages.md#retry-policies-preview) для всех выполнений в приложении.

```json
{
    "retry": {
        "strategy": "fixedDelay",
        "maxRetryCount": 2,
        "delayInterval": "00:00:03"  
    }
}
```

|Свойство  |По умолчанию | Описание |
|---------|---------|---------| 
|модель|null|Обязательный. Используемая стратегия повторных попыток. Допустимые значения: `fixedDelay` или `exponentialBackoff`.|
|maxRetryCount|null|Обязательный. Максимальное количество попыток выполнения каждой функции. `-1` Указывает на неограниченное время повтора.|
|делайинтервал|null|Задержка, используемая между повторными попытками с использованием `fixedDelay` стратегии.|
|minimumInterval|null|Минимальная задержка повторных попыток при использовании `exponentialBackoff` стратегии.|
|maximumInterval|null|Максимальная задержка повтора при использовании `exponentialBackoff` стратегии.| 

## <a name="sendgrid"></a>SendGrid

Параметры конфигурации можно найти в разделе [host.json settings](functions-bindings-sendgrid.md#host-json) (параметры файла host.json).

## <a name="servicebus"></a>serviceBus

Параметры конфигурации можно найти в разделе [host.json settings](functions-bindings-service-bus-output.md#host-json) (параметры файла host.json).

## <a name="singleton"></a>singleton

Параметры конфигурации для одноэлементной блокировки. Дополнительные сведения см. в [проблеме, посвященной одноэлементной блокировке, на портале GitHub](https://github.com/Azure/azure-webjobs-sdk-script/issues/912).

```json
{
    "singleton": {
      "lockPeriod": "00:00:15",
      "listenerLockPeriod": "00:01:00",
      "listenerLockRecoveryPollingInterval": "00:01:00",
      "lockAcquisitionTimeout": "00:01:00",
      "lockAcquisitionPollingInterval": "00:00:03"
    }
}
```

|Свойство  |По умолчанию | Описание |
|---------|---------|---------| 
|lockPeriod|00:00:15|Период времени, на который применяются блокировки уровня функции. Эти блокировки возобновляются автоматически.| 
|listenerLockPeriod|00:01:00|Период времени, на который применяются блокировки прослушивателя.| 
|listenerLockRecoveryPollingInterval|00:01:00|Интервал времени, используемый для восстановления блокировки прослушивателя, если блокировку прослушивателя не удалось получить при запуске.| 
|lockAcquisitionTimeout|00:01:00|Максимальный период времени, за который среда выполнения будет пытаться получить блокировку.| 
|lockAcquisitionPollingInterval|Н/Д|Интервал между попытками получения блокировки.| 

## <a name="version"></a>version

Это значение указывает версию схемы host.json. Строка версии `"version": "2.0"` необходима для приложения-функции, предназначенного для среды выполнения v2, или более поздней версии. Нет host.jsоб изменениях схемы между v2 и v3.

## <a name="watchdirectories"></a>watchDirectories

Набор [каталогов общего кода](functions-reference-csharp.md#watched-directories), изменения которого должны отслеживаться.  Гарантирует, что если код в этих каталогах изменится, то эти изменения будут применены вашими функциями.

```json
{
    "watchDirectories": [ "Shared" ]
}
```

## <a name="watchfiles"></a>ватчфилес

Массив из одного или нескольких имен файлов, которые отслеживаются для изменений, требующих перезапуска приложения.  Это гарантирует, что при изменении кода в этих файлах обновления будут отобраны своими функциями.

```json
{
    "watchFiles": [ "myFile.txt" ]
}
```

## <a name="override-hostjson-values"></a>Переопределение host.jsзначений

Могут существовать экземпляры, в которых вы хотите настроить или изменить определенные параметры в host.jsфайла для конкретной среды, не изменяя host.jsсамого файла.  Можно переопределить определенные host.jsзначений, чтобы создать эквивалентное значение в качестве параметра приложения. Когда среда выполнения находит параметр приложения в формате `AzureFunctionsJobHost__path__to__setting` , он переопределяет эквивалентную host.jsдля параметра, расположенного `path.to.setting` в JSON. При выражается в параметре приложения точка ( `.` ), используемая для обозначения ИЕРАРХИИ JSON, заменяется двойным символом подчеркивания ( `__` ). 

Например, предположим, что вы хотите отключить выборку Application Insights при локальном запуске. Если вы изменили локальный host.jsв файле, чтобы отключить Application Insights, это изменение может быть отправлено в рабочее приложение во время развертывания. Более безопасный способ сделать это — создать параметр приложения, как `"AzureFunctionsJobHost__logging__applicationInsights__samplingSettings__isEnabled":"false"` в `local.settings.json` файле. Это можно увидеть в следующем `local.settings.json` файле, который не публикуется:

```json
{
    "IsEncrypted": false,
    "Values": {
        "AzureWebJobsStorage": "{storage-account-connection-string}",
        "FUNCTIONS_WORKER_RUNTIME": "{language-runtime}",
        "AzureFunctionsJobHost__logging__applicationInsights__samplingSettings__isEnabled":"false"
    }
}
```

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Узнайте, как обновить файл host.json](functions-reference.md#fileupdate)

> [!div class="nextstepaction"]
> [Ознакомьтесь с глобальными параметрами в переменных среды](functions-app-settings.md)
