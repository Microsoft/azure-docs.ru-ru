---
title: Краткое руководство. Создание первой функции в Azure с помощью Visual Studio
description: Из этого краткого руководства вы узнаете, как создать и опубликовать Функцию Azure, активируемую HTTP-запросом, с помощью Visual Studio.
ms.assetid: 82db1177-2295-4e39-bd42-763f6082e796
ms.topic: quickstart
ms.date: 09/30/2020
ms.custom: devx-track-csharp, mvc, devcenter, vs-azure, 23113853-34f2-4f
ROBOTS: NOINDEX,NOFOLLOW
ms.openlocfilehash: 9e3144738bd259ab9be75059af00f125581bb37c
ms.sourcegitcommit: f3ec73fb5f8de72fe483995bd4bbad9b74a9cc9f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "102050126"
---
# <a name="quickstart-create-your-first-function-in-azure-using-visual-studio"></a>Краткое руководство. Создание первой функции в Azure с помощью Visual Studio

Из этой статьи вы узнаете, как создать функцию класса C# на основе библиотеки, которая отвечает на HTTP-запросы, используя Visual Studio. После локального тестирования кода его необходимо развернуть в <abbr title="Вычислительное окружение среды выполнения, в котором все сведения о сервере прозрачны для разработчиков приложений, что упрощает процесс развертывания и управления кодом.">независимая от сервера.</abbr> окружении <abbr title="Служба Azure, которая предоставляет недорогое окружение бессерверных вычислений для приложений.">Функции Azure</abbr>.

Выполнение этого краткого руководства предполагает небольшую дополнительную плату в несколько центов США, которая будет взиматься с вашей <abbr title="Профиль, который поддерживает данные для выставления счетов за использование Azure.">Учетная запись Azure</abbr>.

## <a name="1-prepare-your-environment"></a>1. Подготовка среды

+ Создайте <abbr title="Профиль, который поддерживает данные для выставления счетов за использование Azure.">account</abbr> Azure с активной <abbr title="Базовая организационная структура, в которой можно управлять ресурсами в Azure, обычно связанными с частным лицом или отделом в пределах организации.">Подписка</abbr>. [Создайте учетную запись](https://azure.microsoft.com/free/?ref=microsoft.com&utm_source=microsoft.com&utm_medium=docs&utm_campaign=visualstudio) бесплатно.

+ Установите [Visual Studio 2019](https://azure.microsoft.com/downloads/) и во время установки выберите рабочую нагрузку **разработки Azure**. 

![Установка Visual Studio с рабочей нагрузкой разработки в Azure](media/functions-create-your-first-function-visual-studio/functions-vs-workloads.png)

<br/>
<details>
<summary><strong>Использование взамен проекта Функций Azure</strong></summary>
Если вы хотите создать <abbr title="Логический контейнер для одной или нескольких отдельных функций, которые можно развертывать и администрировать вместе.">проект Функций Azure</abbr> с помощью Visual Studio 2017, сначала необходимо установить [последние версии инструментов Функций Azure](functions-develop-vs.md#check-your-tools-version).
</details>

## <a name="2-create-a-function-app-project"></a>2. Создание проекта приложения-функции

1. В строке меню Visual Studio выберите **Файл** > **Создать** > **Проект**.

1. В разделе **Создать новый проект** введите в поле поиска слово *функции*, выберите шаблон **Функции Azure**, а затем нажмите кнопку **Далее**.

1. В окне **Настройка нового проекта** введите **. <abbr title="Имя приложения-функции должно быть допустимым в качестве пространства имен C#, поэтому нельзя использовать подчеркивания, дефисы и другие символы, не являющиеся буквенно-цифровыми. Выберите ">Имя проекта</abbr>** для проекта, после чего выберите **Создать**. 

1. Укажите следующие сведения для параметров в области **Создание нового приложения Функций Azure**:

    + Выберите **<abbr title=". С помощью этого значения создается проект функции, использующий среду выполнения Функций Azure версии 3.x, которая поддерживает .NET Core 3.x. В Функциях Azure версии 1.x поддерживается .NET Framework. Выберите ">Функции Azure версии 3 (.NET Core)</abbr>** из раскрывающегося списка среды выполнения Функций Azure. (Дополнительные сведения см. в [обзоре версий среды выполнения Функций Azure](functions-versions.md).)
    
    + Выберите **<abbr title=". Это значение создает функцию, активированную HTTP-запросом.">Триггер HTTP</abbr>** выступает шаблоном функции.
    
    + Выберите **<abbr title=". Поскольку для Функции Azure требуется учетная запись хранения, она назначается или создается при публикации проекта в Azure. При активации с помощью HTTP-запроса строка подключения учетной записи хранения Azure не используется. Для всех остальных типов триггера требуется допустимая строка подключения к учетной записи хранения Azure.">Эмулятор хранилища</abbr>** из раскрывающегося списка учетной записи хранения.
        
    + Выберите **Анонимный** из <abbr title="Создаваемую функцию может активировать любой клиент без указания ключа. Этот параметр авторизации позволяет легко тестировать новые функции.">Уровень авторизации</abbr> . (Дополнительные сведения о ключах и авторизации см. в разделах [Ключи авторизации](functions-bindings-http-webhook-trigger.md#authorization-keys) и [Привязки HTTP и веб-перехватчика](functions-bindings-http-webhook.md).)

    + Выберите **Создать**.
        
## <a name="3-rename-the-function"></a>3. Переименование функции

Атрибут метода `FunctionName` задает имя функции. По умолчанию генерируется значение `Function1`. Поскольку набор средств не позволяет переопределить имя функции по умолчанию при создании проекта, уделите минуту на то, чтобы создать более подходящее имя для класса функции, файла или метаданных.

1. В **проводнике** щелкните правой кнопкой мыши файл Function1.cs и переименуйте его на *HttpExample.cs*.

1. В коде переименуйте класс Function1 в HttpExample.

1. В методе `HttpTrigger` с именем `Run` переименуйте атрибут `FunctionName` в `HttpExample`.


## <a name="4-run-the-function-locally"></a>4. Локальное выполнение функции

1. Чтобы запустить функцию, нажмите клавишу <kbd>F5</kbd> в Visual Studio.

1. Скопируйте URL-адрес функции из выходных данных среды выполнения функций Azure.

    ![Локальная среда выполнения Azure](../../includes/media/functions-run-function-test-local-vs/functions-debug-local-vs.png)

1. Вставьте URL-адрес для HTTP-запроса в адресной строке браузера. Добавьте строку запроса **?name=<YOUR_NAME>** в этот URL-адрес и выполните запрос. 

    ![Ответ функции localhost в браузере](../../includes/media/functions-run-function-test-local-vs/functions-run-browser-local-vs.png)

1. Чтобы остановить отладку, нажмите клавиши <kbd>Shift</kbd>+<kbd>F5</kbd> в Visual Studio.

<br/>
<details>
<summary><strong>Устранение неполадок</strong></summary>
 Возможно, вам потребуется включить исключение брандмауэра, чтобы инструменты могли обрабатывать HTTP-запросы. Уровни авторизации никогда не применяются при запуске функции в локальной среде.
</details>

## <a name="5-publish-the-project-to-azure"></a>5. Публикация проекта в Azure

1. Щелкните правой кнопкой мыши проект в **обозревателе решений** и выберите пункт **Опубликовать**.

1. В поле **Целевой объект** выберите **Azure**

    :::image type="content" source="../../includes/media/functions-vstools-publish/functions-visual-studio-publish-profile-step-1.png" alt-text="Экран &quot;Выбор целевого объекта Azure&quot;.":::

1. На вкладке **Указанный целевой объект** выберите **Приложение-функция Azure (Windows)** .

    :::image type="content" source="../../includes/media/functions-vstools-publish/functions-visual-studio-publish-profile-step-2.png" alt-text="Выбор приложения-функции Azure":::

1. На вкладке **Экземпляр Функций** выберите **Создать новую функцию Azure…** и используйте приведенные ниже значения:

    + В поле **Имя** укажите <abbr title="Используйте имя, которое однозначно идентифицирует новое приложение-функцию. Используйте это имя или введите новое. Допустимые символы: `a-z`, `0-9`,а также `-`.">Глобально уникальное имя</abbr>
    
    + **Выберите** подписку из раскрывающегося списка.
    
    + **Выберите** существующую <abbr title="Логический контейнер для связанных ресурсов Azure, которыми можно управлять как единым целым.">resource group</abbr> из раскрывающегося списка или нажмите **Создать**, чтобы создать группу ресурсов.
    
    + **Select** <abbr title="При публикации проекта в приложении-функции, которое работает в плане потребления, вы платите только за выполнение приложения-функции. Другие планы размещения связаны с дополнительными расходами.">Потребление</abbr> в раскрывающемся списке типа воспроизведения. (Дополнительные сведения см. в разделе [План потребления](consumption-plan.md).)
    
    + **Выберите**  <abbr title="Географическая ссылка на конкретный центр обработки данных Azure, в котором распределяются ресурсы. Список доступных регионов см. в разделе [Регионы](https://azure.microsoft.com/regions/).">location</abbr> из раскрывающегося списка.
    
    + **Выберите** <abbr="Учетная запись хранения Azure — обязательный ресурс для среды выполнения Функций. Выберите Создать, чтобы настроить учетную запись хранения общего назначения. Можно также использовать существующую учетную запись, которая соответствует требованиям учетной записи хранения.">учетная запись хранения Azure</abbr> из раскрывающегося списка

    ![Диалоговое окно "Создание службы приложений"](../../includes/media/functions-vstools-publish/functions-visual-studio-publish.png)

1. Выберите **Создать**. 

1. На вкладке **Экземпляр Функций** установите флажок **Run from package file** (Запустить из файла пакета). 

    :::image type="content" source="../../includes/media/functions-vstools-publish/functions-visual-studio-publish-profile-step-4.png" alt-text="Завершение создания профиля":::

    <br/>
    <details>
    <summary><strong>Что делает этот параметр?</strong></summary>
    При использовании параметра **Выполнение из файла пакета** приложение-функция развертывается с помощью [развертывания из ZIP-файла](functions-deployment-technologies.md#zip-deploy) с включенным режимом [Run-From-Package](run-functions-from-deployment-package.md) (Выполнение из пакета). Это рекомендуемый метод развертывания для проекта функций, так как он обеспечивает лучшую производительность.    
    </details>   

1. Нажмите кнопку **Готово**.

1. На странице Публикация нажмите **Опубликовать**.

1. На странице "Публикация" проверьте корневой URL-адрес приложения-функции.

1. На вкладке "Публикация" выберите **Управление в<abbr title=" Cloud Explorer, где с помощью Visual Studio можно просматривать содержимое сайта, запускать и останавливать работу приложения-функции, а также переходить непосредственно к ресурсам приложения-функции в Azure и на портале Azure.">Cloud Explorer</abbr>**
    
    :::image type="content" source="../../includes/media/functions-vstools-publish/functions-visual-studio-publish-complete.png" alt-text="Сообщение об успешной публикации":::
    

## <a name="6-test-your-function-in-azure"></a>6. Тестирование функции в Azure

1. В Cloud Explorer приложения-функция уже должно быть выбрано. В противном случае разверните свою подписку, выберите пункт **Службы приложений**, затем выберите новое приложение-функцию.

1. Щелкните правой кнопкой мыши приложение-функцию и выберите пункт **Открыть в браузере**. В веб-браузере по умолчанию откроется корень приложения-функции и отобразится страница, где указано, что приложение-функция работает. 

    :::image type="content" source="media/functions-create-your-first-function-visual-studio/function-app-running-azure.png" alt-text="Приложение-функция работает":::

1. В адресной строке браузера добавьте строку **/api/HttpExample?name=Functions** к базовому URL-адресу и выполните запрос.

    URL-адрес для вызова функции, активируемой HTTP-запросом, указывается в следующем формате:

    `http://<APP_NAME>.azurewebsites.net/api/HttpExample?name=Functions`

2. Перейдите по этому URL-адресу и увидите в браузере ответ на удаленный запрос GET, возвращаемый функцией. Он выглядит аналогично следующему примеру:

    :::image type="content" source="media/functions-create-your-first-function-visual-studio/functions-create-your-first-function-visual-studio-browser-azure.png" alt-text="Ответ функции в браузере":::

## <a name="7-clean-up-resources"></a>7. Очистка ресурсов

Чтобы избежать дополнительных расходов, удалите приложение-функцию и его ресурсы.

1. В Cloud Explorer разверните свою подписку и **Службы приложений**, щелкните правой кнопкой мыши приложение-функцию и выберите пункт **Открыть на портале**. 

1. На странице приложения-функции выберите вкладку **Обзор**, а затем щелкните ссылку в разделе **Группа ресурсов**.

   :::image type="content" source="media/functions-create-your-first-function-visual-studio/functions-app-delete-resource-group.png" alt-text="Выбор группы ресурсов, которую требуется удалить со страницы приложения-функции":::

1. На странице **Группа ресурсов** просмотрите список включенных ресурсов и убедитесь, что именно их нужно удалить.
 
1. Выберите **Удалить группу ресурсов** и следуйте инструкциям.

    Удаление может занять несколько минут. После этого на несколько секунд появится уведомление. Кроме того, можно выбрать значок колокольчика в верхней части страницы, чтобы просмотреть уведомление.

## <a name="next-steps"></a>Дальнейшие действия

Перейдите к следующей статье, чтобы узнать, как добавить <abbr title="Средство для связывания функции с очередью хранилища, с помощью которого можно будет создавать сообщения в очереди. Привязки — это декларативные соединения между функцией и другими ресурсами. Входная привязка предоставляет данные для функции, а выходная привязка предоставляет данные из функции для других ресурсов."> Выходная привязка очереди службы хранилища Azure</abbr> для вашей функции:

> [!div class="nextstepaction"]
> [Connect functions to Azure Storage using Visual Studio Code](functions-add-output-binding-storage-queue-vs.md) (Подключение функций к службе хранилища Azure с помощью Visual Studio Code)
