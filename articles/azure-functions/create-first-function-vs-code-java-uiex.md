---
title: Создание функции Java с помощью Visual Studio Code — Функции Azure
description: Узнайте, как создать функцию Java, а затем опубликовать локальный проект в бессерверном размещении в Функциях Azure с помощью расширения Функций Azure в Visual Studio Code.
ms.topic: quickstart
ms.date: 11/03/2020
ROBOTS: NOINDEX,NOFOLLOW
ms.openlocfilehash: 6c84bf4ebc73857fa0280ffbcbf46b68c2da630f
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102031724"
---
# <a name="quickstart-create-a-java-function-in-azure-using-visual-studio-code"></a>Краткое руководство. Создание функции Java в Azure с помощью Visual Studio Code

[!INCLUDE [functions-language-selector-quickstart-vs-code](../../includes/functions-language-selector-quickstart-vs-code.md)]

С помощью Visual Studio Code создайте функцию Java, которая отвечает на HTTP-запросы. Протестируйте код в локальной среде, а затем разверните его в бессерверном окружении Функций Azure.

Выполнение этого краткого руководства предполагает небольшую дополнительную плату в несколько центов США, которая будет взиматься с вашей <abbr title="Профиль, который поддерживает данные для выставления счетов за использование Azure.">Учетная запись Azure</abbr>.

Если вы не хотите использовать Visual Studio Code в качестве средства разработки, ознакомьтесь с аналогичными руководствами для разработчиков Java по использованию [Maven](create-first-function-cli-java.md), [Gradle](./functions-create-first-java-gradle.md) и [IntelliJ IDEA](/azure/developer/java/toolkit-for-intellij/quickstart-functions).

## <a name="1-prepare-your-environment"></a>1. Подготовка среды

Перед началом работы убедитесь, что выполнены следующие предварительные требования.

+ Учетная запись Azure с активной <abbr title="Базовая организационная структура, в которой можно управлять ресурсами в Azure, обычно связанными с частным лицом или отделом в пределах организации.">Подписка</abbr>. [Создайте учетную запись](https://azure.microsoft.com/free/?ref=microsoft.com&utm_source=microsoft.com&utm_medium=docs&utm_campaign=visualstudio) бесплатно.

+ [Java Developer Kit](/azure/developer/java/fundamentals/java-jdk-long-term-support) версии 8 или 11.

+ [Apache Maven](https://maven.apache.org) 3.0 или более поздней версии.

+ [Visual Studio Code](https://code.visualstudio.com/) на одной из [поддерживаемых платформ](https://code.visualstudio.com/docs/supporting/requirements#_platforms).

+ [Пакет расширения Java](https://marketplace.visualstudio.com/items?itemName=vscjava.vscode-java-pack)  

+ [Расширение "Функции Azure"](https://marketplace.visualstudio.com/items?itemName=ms-azuretools.vscode-azurefunctions) для Visual Studio Code.

<br/>
<hr/>

## <a name="2-create-your-local-functions-project"></a>2. <a name="create-an-azure-functions-project"></a>Создание локального проекта службы "Функции Azure"

1. Щелкните значок Azure на **панели действий**, а затем в области **Azure: Функции** щелкните значок **Создать проект...** .

    ![Выбор варианта "Создать проект"](./media/functions-create-first-function-vs-code/create-new-project.png)

1. **Выберите расположение каталога** для рабочей области проекта и щелкните **Выбрать**.

1. Введите следующие сведения по соответствующим запросам:

    + **Выберите язык для проекта приложения-функции**: Выберите `Java`.

    + **Выберите версию Java**: Выберите `Java 8` или `Java 11` в зависимости от того, какая из версий Java нужна для запуска функций в Azure. Выберите версию Java, которую вы проверили локально.

    + **Укажите идентификатор группы**: Выберите `com.function`.

    + **Укажите идентификатор артефакта**: Выберите `myFunction`.

    + **Укажите версию**: Выберите `1.0-SNAPSHOT`.

    + **Укажите имя пакета**: Выберите `com.function`.

    + **Укажите имя приложения**: Выберите `myFunction-12345`.

    + **Уровень авторизации**: выберите `Anonymous`, что позволит любому пользователю вызывать конечную точку функции.

    + **Выберите, как вы хотели бы открыть свой проект**. Выберите `Add to workspace`.

<br/>

<details>
<summary><strong>Не можете создать проект функции?</strong></summary>

Наиболее часто встречающимися проблемами, которые необходимо решать при создании проекта локальных функций, являются:
* У вас не установлено расширение Функций Azure. 
</details>

<br/>
<hr/>

## <a name="3-run-the-function-locally"></a>3. Локальное выполнение функции

1. Нажмите клавишу <kbd>F5</kbd>, чтобы запустить проект приложения-функции.

1. В окне **Терминал** вы увидите URL-адрес конечной точки вашей функции, которая работает локально.

    ![Выходные данные VS Code локальной функции](media/functions-create-first-function-vs-code/functions-vscode-f5.png)

1. При запущенных Core Tools перейдите в область **Azure: Функции**. В разделе **Функции** разверните **Локальный проект** > **Функции**. Щелкните правой кнопкой мыши (в Windows) или используйте <kbd>Ctrl-</kbd>щелчок (в macOS) на функции `HttpExample` и выберите **Выполнить функцию...** .

    :::image type="content" source="../../includes/media/functions-run-function-test-local-vs-code/execute-function-now.png" alt-text="Вариант &quot;Выполнить функцию&quot; из Visual Studio Code":::

1. В поле **Ввести текст запроса** вы увидите значение текста запроса `{ "name": "Azure" }`. Нажмите клавишу <kbd>ВВОД</kbd>, чтобы отправить это сообщение запроса в свою функцию.  

1. При выполнении функции локально и возврате ответа в Visual Studio Code отобразится уведомление. Сведения о выполнении функции отображаются на панели **Терминал**.

1. Нажмите клавиши <kbd>CTRL+C</kbd>, чтобы остановить Core Tools и отключить отладчик.

<br/>

<details>
<summary><strong>Не можете запустить функцию локально?</strong></summary>

Наиболее часто встречающимися проблемами, которые необходимо решать при выполнении проекта локальных функций, являются:
* Основные инструменты не установлены. 
*  При возникновении проблем с запуском в Windows убедитесь, что в качестве оболочки терминала по умолчанию для Visual Studio Code не настроена оболочка WSL Bash. 
</details>

<br/>
<hr/>

## <a name="4-sign-in-to-azure"></a>4. Вход в Azure

Чтобы опубликовать приложение, выполните вход в Azure. Если вы уже выполнили вход, перейдите к следующему разделу.

1. Щелкните значок Azure на панели действий, а затем в области **Azure: Функции** выберите кнопку **Войти в Azure...**

    ![Вход в Azure через VS Code](../../includes/media/functions-sign-in-vs-code/functions-sign-into-azure.png)

1. При появлении запроса в браузере **выберите учетную запись Azure** и **войдите** в нее с помощью учетных данных Azure.

1. После успешного входа в систему закройте новое окно браузера и вернитесь к Visual Studio Code.

<br/>
<hr/>

## <a name="5-publish-the-project-to-azure"></a>5. Публикация проекта в Azure

Ваше первое развертывание кода включает в себя создание ресурса Функций в вашей подписке Azure.

1. Щелкните значок Azure на панели действий, а затем в области **Azure: Функции** выберите кнопку **Deploy to function app...** (Развертывание в приложение-функцию).

    ![Публикация проекта в Azure](../../includes/media/functions-publish-project-vscode/function-app-publish-project.png)

1. Введите следующие сведения по соответствующим запросам:

    + **Select folder** (Выберите папку). Выберите папку, в которой находится ваше приложение-функция. 

    + **Выбрать подписку**. Выберите подписку, которую нужно использовать. Если у вас только одна подписка, вы не увидите этот параметр.

    + **Select Function App in Azure** (Выбор приложения-функции в Azure). Выберите `Create new Function App`.

    + **Enter a globally unique name for the function app** (Ввод глобально уникального имени для приложения-функции). В качестве пути для URL-адреса введите глобально уникальное в Azure имя. Введенное здесь имя проверяется, чтобы обеспечить глобальную уникальность.

    - **Select a location for new resources** (Выбор расположения для новых ресурсов).  Для повышения производительности выберите [регион](https://azure.microsoft.com/regions/) рядом с вами.

1. После создания приложения-функции и применения пакета развертывания отобразится уведомление. Выберите **View Output** (Просмотр выходных данных), чтобы просмотреть результаты создания и развертывания.

    ![Создание уведомления о завершении](../../includes/media/functions-publish-project-vscode/function-create-notifications.png)

<br/>

<details>
<summary><strong>Не удается опубликовать функцию?</strong></summary>

Из этого раздела вы узнали, как создать ресурсы Azure и развернуть локальный код в виде приложения-функции. Если не удалось:

* Проверьте выходные данные на наличие сведений об ошибке. Выходные данные также можно просмотреть, щелкнув значок колокольчика в правом нижнем углу. 
* Публикация выполнялась в существующем приложении-функции? Это действие перезаписывает содержимое этого приложения в Azure.
</details>

<br/>

<details>
<summary><strong>Какие ресурсы созданы?</strong></summary>

После завершения в вашей подписке создаются следующие ресурсы Azure с именами, производными от имени приложения-функции:

* **Группа ресурсов**. Группа ресурсов — это логический контейнер для связанных ресурсов в одном регионе.
* **Учетная запись хранения Azure.** Ресурс службы хранилища Azure хранит данные о состоянии и другую информацию о вашем проекте.
* **План потребления**. План потребления, который определяет базовый узел для бессерверного приложения-функции.
* **Приложение-функция**. Приложение-функция предоставляет окружение для выполнения кода функции и группирования функций в качестве логической единицы.
* **Application Insights**. Application Insights отслеживает использование бессерверных функций.

</details>

<br/>
<hr/>

## <a name="6-run-the-function-in-azure"></a>6. Запуск функции в Azure

1. Вернитесь в область **Azure: Functions** (Azure: Функции) на боковой панели, разверните подписку, выберите новое приложение-функцию и **Функции**. Щелкните правой кнопкой мыши (в Windows) или используйте <kbd>Ctrl-</kbd>щелчок (в macOS) на функции `HttpExample` и выберите **Выполнить функцию...** .

    :::image type="content" source="../../includes/media/functions-vs-code-run-remote/execute-function-now.png" alt-text="Вариант &quot;Выполнить функцию&quot; в Azure из Visual Studio Code":::

1. В поле **Ввести текст запроса** вы увидите значение текста запроса `{ "name": "Azure" }`. Нажмите клавишу ВВОД, чтобы отправить это сообщение запроса в свою функцию.  

1. При выполнении функции в Azure и возврате ответа в Visual Studio Code отобразится уведомление.

<br/>
<hr/>

## <a name="7-clean-up-resources"></a>7. Очистка ресурсов

Если вы не планируете перейти к [следующему шагу](#next-steps), удалите приложение-функцию и его ресурсы, чтобы не допустить излишних затрат.

1. В Visual Studio Code выберите на панели действий значок Azure и щелкните область "Функции" на боковой панели.
1. Выберите приложение-функцию, щелкните его правой кнопкой мыши и выберите действие **Delete Function app...** (Удалить приложение-функцию...).

<br/>
<hr/>

## <a name="next-steps"></a>Дальнейшие действия

Расширьте эту функцию, добавив <abbr title="в службе хранилища Azure для связывания функции с очередью хранилища, чтобы с его помощью она могла создавать сообщения в очереди.">выходную привязку</abbr>. Эта привязка записывает строку из HTTP-запроса в сообщение очереди Хранилища очередей Azure.

> [!div class="nextstepaction"]
> [Подключение Функций Azure к службе хранилища Azure с помощью средств командной строки](functions-add-output-binding-storage-queue-vs-code.md?pivots=programming-language-java)
