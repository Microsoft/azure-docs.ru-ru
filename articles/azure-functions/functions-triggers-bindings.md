---
title: Триггеры и привязки в решении "Функции Azure"
description: Узнайте, как использовать триггеры и привязки для подключения функции Azure к интерактивным событиям и облачным службам.
author: craigshoemaker
ms.topic: conceptual
ms.date: 02/18/2019
ms.author: cshoe
ms.openlocfilehash: 4cafe9af1eb5a765ab86bafb63cc9ab7d0889dc8
ms.sourcegitcommit: 59cfed657839f41c36ccdf7dc2bee4535c920dd4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/06/2021
ms.locfileid: "99627605"
---
# <a name="azure-functions-triggers-and-bindings-concepts"></a>Основные понятия триггеров и привязок в Функциях Azure

В этой статье вы узнаете о высокоуровневых концепциях, связанных с триггерами и привязками функций.

Триггеры являются причиной выполнения функции. Триггер определяет, как вызывается функция, а функция должна иметь только один триггер. С триггерами связаны данные, которые обычно являются полезными данными функции. 

Привязка к функции — это способ декларативного подключения другого ресурса к функции; привязки могут быть подключены как *входные привязки*, *выходные привязки* или и то, и другое. Данные привязок предоставляются функции в качестве параметров.

Вы можете комбинировать и сопоставлять различные привязки в соответствии со своими потребностями. Привязки необязательны, а у функции может быть одна или несколько входных и выходных привязок.

Триггеры и привязки позволяют избежать прописано доступа к другим службам. Функция получает нужные данные (например, содержимое сообщения из очереди) в виде параметров. Вы отправляете данные (например, для создания в очереди сообщения) с использованием возвращаемого значения функции. 

Рассмотрим следующие примеры реализации различных функций.

| Пример сценария | Триггер | Входная привязка | Выходная привязка |
|-------------|---------|---------------|----------------|
| Поступает новое сообщение очереди, которое запускает функцию для записи в другую очередь. | Очереди<sup>*</sup> | *Нет* | Очереди<sup>*</sup> |
|Запланированное задание считывает содержимое хранилища BLOB-объектов и создает новый документ Cosmos DB. | Таймер | Хранилище BLOB-объектов | Cosmos DB |
|Сетка событий используется для чтения изображения из хранилища BLOB-объектов и документа из Cosmos DB для отправки сообщения электронной почты. | Сетка событий Azure | Хранилище BLOB-объектов и Cosmos DB | SendGrid |
| Веб-перехватчик, использующий Microsoft Graph для обновления листа Excel. | HTTP | *Нет* | Microsoft Graph |

<sup>\*</sup> Представляет различные очереди

Эти примеры не являются исчерпывающими, но предоставляются для иллюстрации того, как можно использовать триггеры и привязки вместе.

###  <a name="trigger-and-binding-definitions"></a>Определения триггеров и привязок

Триггеры и привязки определяются по-разному в зависимости от языка разработки.

| Язык | Триггеры и привязки настраиваются... |
|-------------|--------------------------------------------|
| Библиотека классов C# | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Наименование методов и параметров с помощью атрибутов C# |
| Java | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Декорирование методов и параметров с помощью заметок Java  | 
| JavaScript, PowerShell, Python и TypeScript | &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Обновление [function.jsв](./functions-reference.md) ([схема](http://json.schemastore.org/function)) |

Для языков, которые используют function.js, портал предоставляет пользовательский интерфейс для добавления привязок на вкладке **Интеграция** . Вы также можете изменить файл непосредственно на портале на вкладке **код + тест** функции. Visual Studio Code позволяет легко [Добавить привязку к function.jsу в файле](functions-develop-vs-code.md?tabs=nodejs#add-a-function-to-your-project) , следуя удобному набору запросов. 

В .NET и Java тип параметра определяет тип данных для входных данных. Например, используйте `string` для привязки к тексту триггера очереди, массив байтов для чтения в двоичном виде и пользовательский тип для десериализации в объект. Так как функции библиотеки классов .NET и функции Java не полагаются на *function.js* для определений привязки, их нельзя создать и изменить на портале. Редактирование на портале c# основано на скрипте C#, который использует *function.json* вместо атрибутов.

Дополнительные сведения о добавлении привязок к существующим функциям см. в статье [Подключение функций к службам Azure с помощью привязок](add-bindings-existing-function.md).

В языках с динамическим типированием, таких как JavaScript, используйте свойство `dataType` в файле *function.json*. Например, задайте для `dataType` значение `binary`, чтобы прочитать содержимое HTTP-запроса в двоичном формате.

```json
{
    "dataType": "binary",
    "type": "httpTrigger",
    "name": "req",
    "direction": "in"
}
```

Другие варианты для `dataType` — `stream` и `string`.

## <a name="binding-direction"></a>Направление привязки

Все триггеры и привязки имеют свойство `direction` в файле [function.json](./functions-reference.md):

- Для триггеров направление всегда входящее (`in`).
- Для входных и выходных привязок используется как входящее (`in`), так и исходящее (`out`) направление.
- Некоторые привязки поддерживают специальное направление `inout`. При использовании `inout` вкладки **Интеграция** на портале доступен только **Расширенный редактор** .

Если вы используете для настройки триггеров и привязок [атрибуты в библиотеке классов](functions-dotnet-class-library.md), направление задается в конструкторе атрибута или вычисляется по типу параметра.

## <a name="add-bindings-to-a-function"></a>Добавление привязок к функции

Вы можете подключить функцию к другим службам с помощью входных или выходных привязок. Добавьте привязку, добавив определенные определения в функцию. Дополнительные сведения см. в разделе [Добавление привязок в существующую функцию в функциях Azure](add-bindings-existing-function.md).  

## <a name="supported-bindings"></a>Поддерживаемые привязки

[!INCLUDE [Full bindings table](../../includes/functions-bindings.md)]

Сведения о том, какие привязки доступны в предварительной версии или утверждены для использования в рабочей среде, см. в статье [Поддерживаемые языки в решении "Функции Azure"](supported-languages.md).

## <a name="bindings-code-examples"></a>Примеры кода привязок

Используйте следующую таблицу, чтобы найти примеры конкретных типов привязки, которые показывают, как работать с привязками в функциях. Сначала выберите вкладку Language (язык), соответствующую проекту. 

[!INCLUDE [functions-bindings-code-example-chooser](../../includes/functions-bindings-code-example-chooser.md)]

## <a name="custom-bindings"></a>Пользовательские привязки

Можно создавать пользовательские привязки входных и выходных данных. Привязки должны создаваться в .NET, но их можно использовать на любом поддерживаемом языке. Дополнительные сведения о создании пользовательских привязок см. в разделе [Создание настраиваемых входных и выходных привязок](https://github.com/Azure/azure-webjobs-sdk/wiki/Creating-custom-input-and-output-bindings).

## <a name="resources"></a>Ресурсы
- [Выражения привязки и шаблоны](./functions-bindings-expressions-patterns.md)
- [Использование возвращаемого значения функции Azure](./functions-bindings-return-value.md)
- [Как зарегистрировать выражение привязки](./functions-bindings-register.md)
- Проверочный.
  - [Методика тестирования кода с помощью Функций Azure](functions-test-a-function.md)
  - [Запуск функции, не активируемой HTTP-запросом, вручную](functions-manually-run-non-http.md)
- [Обработка ошибок привязки](./functions-bindings-errors.md)

## <a name="next-steps"></a>Дальнейшие действия
> [!div class="nextstepaction"]
> [Регистрация расширений привязки функций Azure](./functions-bindings-register.md)
