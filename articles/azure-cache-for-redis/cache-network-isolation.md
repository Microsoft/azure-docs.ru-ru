---
title: Параметры сетевой изоляции кэша Azure для Redis
description: В этой статье вы узнаете, как определить лучшее решение для сетевой изоляции в соответствии с вашими потребностями. Мы рассмотрим основы частной связи Azure, внедрения виртуальной сети Azure (VNet) и правил брандмауэра Azure с их преимуществами и ограничениями.
author: curib
ms.author: cauribeg
ms.service: cache
ms.topic: conceptual
ms.date: 10/15/2020
ms.openlocfilehash: ef284661d44f700cf0b5282efcd2e6f7b94fa3b6
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96621524"
---
# <a name="azure-cache-for-redis-network-isolation-options"></a>Параметры сетевой изоляции кэша Azure для Redis 
В этой статье вы узнаете, как определить лучшее решение для сетевой изоляции в соответствии с вашими потребностями. Мы рассмотрим основы частной связи Azure, внедрения виртуальной сети Azure (VNet) и правил брандмауэра Azure с их преимуществами и ограничениями.  

## <a name="azure-private-link-public-preview"></a>Частная ссылка Azure (общедоступная Предварительная версия) 
Частная связь Azure обеспечивает частное подключение из виртуальной сети к службам PaaS Azure. Она упрощает сетевую архитектуру и защищает подключение между конечными точками в Azure, устраняя доступность данных в общедоступном Интернете. 

### <a name="advantages"></a>Преимущества
* Поддерживается в кэше Azure уровня "базовый", "Стандартный" и "Премиум" для экземпляров Redis. 
* С помощью функции " [Частная связь Azure](../private-link/private-link-overview.md)" можно подключиться к экземпляру кэша Azure из виртуальной сети с помощью частной конечной точки, которой назначен частный IP-адрес в подсети в виртуальной сети. В этом случае экземпляры кэша доступны как в виртуальной сети, так и в общедоступной.  
* После создания частной конечной точки доступ к общедоступной сети можно ограничить с помощью `publicNetworkAccess` флага. По умолчанию для этого флага задано `Disabled` разрешение только на доступ к частным ссылкам. Можно задать значение `Enabled` или `Disabled` с помощью запроса PATCH. Дополнительные сведения см. [в статье кэш Azure для Redis с помощью частной связи Azure (Предварительная версия)](cache-private-link.md). 
* Все внешние зависимости кэша не влияют на правила NSG виртуальной сети.

### <a name="limitations"></a>Ограничения 
* Группы безопасности сети (NSG) отключены для частных конечных точек. Тем не менее, если в подсети есть другие ресурсы, к этим ресурсам будет применено применение NSG.
* Георепликация, правила брандмауэра, поддержка консоли портала, несколько конечных точек на кластеризованный кэш, сохранение в брандмауэре и подсети, внедренные кэши, пока не поддерживаются. 
* Для подключения к кластеризованному кэшу необходимо `publicNetworkAccess` задать значение, `Disabled` и может существовать только одно подключение к частной конечной точке.

> [!NOTE]
> При добавлении частной конечной точки в экземпляр кэша весь трафик Redis будет перемещен в частную конечную точку из-за DNS.
> Убедитесь, что предыдущие правила брандмауэра настроены ранее.  
>
>

## <a name="azure-virtual-network-injection"></a>Внедрение виртуальной сети Azure 
Виртуальная сеть — это фундаментальный Стандартный блок для частной сети в Azure. Виртуальная сеть позволяет многим ресурсам Azure безопасно взаимодействовать друг с другом, через Интернет и локальные сети. Виртуальная сеть аналогична традиционной сети, которую вы бы работали в собственном центре обработки данных, но с преимуществами инфраструктуры, масштабирования, доступности и изоляции Azure. 

### <a name="advantages"></a>Преимущества
* Если для экземпляра кэша Azure для Redis настроена виртуальная сеть, он не является общедоступным и доступен только из виртуальных машин и приложений в виртуальной сети.  
* Если виртуальная сеть объединена с ограниченными политиками NSG, она помогает снизить риск утечка данных. 
* Развертывание виртуальной сети обеспечивает повышенную безопасность и изоляцию кэша Azure для Redis, а также подсети, политики управления доступом и другие функции для дальнейшего ограничения доступа. 
* Георепликация поддерживается. 

### <a name="limitations"></a>Ограничения
* Внедренные кэши виртуальной сети доступны только для кэша Azure уровня "Премиум" для Redis. 
* При использовании внедренного кэша виртуальной сети необходимо открыть виртуальную сеть для кэширования зависимостей, например списков отзыва сертификатов, PKI, AKV, службы хранилища Azure, Azure Monitor и т. д.  


## <a name="azure-firewall-rules"></a>Правила брандмауэра Azure
[Брандмауэр Azure](../firewall/overview.md) — это управляемая облачная служба безопасности сети, которая защищает ресурсы виртуальной сети Azure. Это полностью работоспособный брандмауэр в качестве службы со встроенной высокой доступностью и масштабируемостью облака. Вы можете централизованно создавать, применять и регистрировать политики приложений и сетевых подключений в подписках и виртуальных сетях.  

### <a name="advantages"></a>Преимущества
* Когда правила брандмауэра будут настроены, подключения к кэшу будут доступны только для клиентов из указанного диапазона IP-адресов. Подключения из систем мониторинга кэша Azure для Redis всегда разрешены, даже если настроены правила брандмауэра. Также разрешены определенные правила NSG.  

### <a name="limitations"></a>Ограничения
* Правила брандмауэра можно использовать в сочетании с внедренными кэшами виртуальной сети, но в настоящее время не являются частными конечными точками. 


## <a name="next-steps"></a>Дальнейшие действия
* Узнайте, как настроить [кэш, внедренный в виртуальную сеть для экземпляра Redis Azure](cache-how-to-premium-vnet.md)уровня "Премиум".  
* Узнайте, как настроить [правила брандмауэра для всех уровней кэша Azure для Redis](cache-configure.md#firewall). 
* Узнайте, как [настроить частные конечные точки для всех уровней кэша Azure для Redis](cache-private-link.md).