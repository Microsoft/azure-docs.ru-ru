---
title: Power BI выходные данные Azure Stream Analytics
description: В этой статье описывается, как выводить данные из Azure Stream Analytics в Power BI.
author: enkrumah
ms.author: ebnkruma
ms.service: stream-analytics
ms.topic: conceptual
ms.date: 08/25/2020
ms.openlocfilehash: a94389a075fd62d80345a21e32f1bc977dfdee87
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "98020066"
---
# <a name="power-bi-output-from-azure-stream-analytics"></a>Power BI выходные данные Azure Stream Analytics

Вы можете использовать [Power BI](https://powerbi.microsoft.com/) в качестве выходных данных для задания Stream Analytics, чтобы обеспечить широкие возможности визуализации результатов анализа. Визуализация позволяет создавать панели мониторинга оперативных данных, формировать отчеты и составлять отчетности на основе метрик.

Выходные данные Power BI из Stream Analytics в настоящее время недоступны в регионах Azure для Китая (21Vianet) и Azure для Германии (T-Systems International).

## <a name="output-configuration"></a>Конфигурация выходных данных

В таблице ниже перечислены имена свойств и их описания для настройки выходных данных Power BI.

| Имя свойства | Описание |
| --- | --- |
| Псевдоним выходных данных |Укажите понятное имя, которое используется в запросах для направления выходных данных запроса в эти выходные данные Power BI. |
| Рабочая область группы |Чтобы иметь возможность обмениваться данными с другими пользователями Power BI, вы можете выбрать группы в своей учетной записи Power BI или щелкнуть **Моя рабочая область**, если не хотите записывать данные в группу. Для обновления существующей группы требуется повторно выполнить проверку подлинности в службе Power BI. |
| Имя набора данных |Укажите имя набора данных, который будет использоваться для выходных данных Power BI. |
| Имя таблицы |Имя таблицы в наборе выходных данных Power BI. Сейчас для вывода выходных данных из заданий Stream Analytics в Power BI можно использовать только одну таблицу в наборе данных. |
| Авторизовать подключение | Чтобы продолжить настройку параметров вывода, необходима авторизация Power BI. После предоставления этим выходным данным доступа к панели мониторинга Power BI доступ можно отозвать, изменив пароль учетной записи пользователя, удалив выходные данные задания или удалив задание Stream Analytics. | 

Пошаговые инструкции по настройке выходных данных и панели мониторинга Power BI приведены в учебнике [Stream Analytics и Power BI. Панель мониторинга для анализа потоковой передачи данных](stream-analytics-power-bi-dashboard.md).

> [!NOTE]
> Не создавайте вручную набор данных и таблицу на панели мониторинга Power BI. Они будут автоматически созданы при запуске задания, когда задание начнет вносить выходные данные в Power BI. Если запрос задания не создает никаких результатов, набор данных и таблица не создаются. Если в Power BI уже есть набор данных и таблица с именем, аналогичным указанному в этом задании Stream Analytics, существующие данные будут перезаписаны.
>

### <a name="create-a-schema"></a>Создание схемы

Azure Stream Analytics создает набор данных Power BI и схему таблицы для пользователя, если они еще не существуют. Во всех остальных случаях таблица обновляется с использованием новых значений. В настоящее время в наборе данных может существовать только одна таблица. 

Power BI использует политику хранения "первым поступил — первым обслужен" (FIFO). Данные будут собираться в таблице до тех пор, пока не будет собрано 200 000 строк.

> [!NOTE]
> Не рекомендуется использовать несколько выходов для записи в один набор данных, так как это может вызвать несколько проблем. Каждый выход пытается создать набор данных Power BI независимо друг от друга, что может привести к созданию множества данных с одним и тем же именем. Кроме того, если выходные данные не имеют единообразных схем, набор данных изменяет схему при каждой записи, что приводит к слишком большому числу запросов на изменение схемы. Даже если эти проблемы избежать, несколько выходов будут менее производительны, чем единые объединенные выходные данные.

### <a name="convert-a-data-type-from-stream-analytics-to-power-bi"></a>Преобразование типа данных из Stream Analytics в Power BI

Azure Stream Analytics обновляет модель данных динамически во время выполнения, если меняется схема вывода. Изменяются имена и типы столбцов, а добавление или удаление столбцов отслеживается.

В этой таблице представлено преобразование [типов данных Stream Analytics](/stream-analytics-query/data-types-azure-stream-analytics) в [типы данных Entity Data Model (EDM)](/dotnet/framework/data/adonet/entity-data-model), используемые в Power BI, если набор данных и таблица Power BI не созданы.

Из Stream Analytics | В Power BI
-----|-----
BIGINT | Int64
nvarchar(max) | Строка
DATETIME | Datetime
FLOAT | Double
Record array | Тип String, постоянное значение IRecord или IArray

### <a name="update-the-schema"></a>Обновление схемы

Stream Analytics определяет схему модели данных на основе первого набора событий в выходных данных. Затем (при необходимости) схема модели данных обновляется для размещения входящих событий, которые могут не соответствовать исходной схеме.

Избегайте запроса `SELECT *`, чтобы предотвратить динамическое обновление схемы в строках. Помимо потенциального влияния на производительность, это также может привести к неопределенности значения времени, затраченного на результаты. Выберите те поля, которые должны отображаться на панели мониторинга Power BI. Кроме того, значения данных должны соответствовать выбранному типу данных.

Предыдущий или текущий | Int64 | Строка | Datetime | Double
-----------------|-------|--------|----------|-------
Int64 | Int64 | Строка | Строка | Double
Double | Double | Строка | Строка | Double
Строка | Строка | Строка | Строка | Строка 
Datetime | Строка | Строка |  Datetime | Строка

## <a name="output-batch-size"></a>Размер выходного пакета

Сведения о размере выходного пакета см. в разделе [ограничения API-интерфейса Power BI](/power-bi/developer/automation/api-rest-api-limitations).

## <a name="next-steps"></a>Дальнейшие действия

* [Использование управляемого удостоверения для проверки подлинности задания Azure Stream Analytics в Power BI (Предварительная версия)](powerbi-output-managed-identity.md)
* [Краткое руководство. по созданию задания Stream Analytics с помощью портала Azure](stream-analytics-quick-create-portal.md)