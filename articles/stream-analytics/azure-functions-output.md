---
title: Выходные данные функций Azure из Azure Stream Analytics
description: В этой статье описываются функции Azure в качестве выходных данных для Azure Stream Analytics.
author: enkrumah
ms.author: ebnkruma
ms.service: stream-analytics
ms.topic: conceptual
ms.date: 08/25/2020
ms.openlocfilehash: e5ea7a1abbbd6ab4be32955179227fbd539cf641
ms.sourcegitcommit: 42a4d0e8fa84609bec0f6c241abe1c20036b9575
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "98019624"
---
# <a name="azure-functions-output-from-azure-stream-analytics"></a>Выходные данные функций Azure из Azure Stream Analytics

Функции Azure — это бессерверная служба вычислений, которая позволяет выполнять код по требованию без необходимости явно подготавливать или администрировать инфраструктуру. Они позволяют реализовать код, который запускается событиями, возникающими в Azure или партнерских службах. Эта возможность Функций Azure реагировать на триггеры упрощает вывод данных Azure Stream Analytics. Этот выходной адаптер позволяет пользователям подключать Stream Analytics к Функциям Azure и запускать сценарий или часть кода в ответ на ряд событий.

Выходные данные функций Azure из Stream Analytics недоступны в регионах Azure для Китая и Azure для Германии (Международная система T-Systems). Подключение к функциям Azure в виртуальной сети (VNet) из задания Stream Analytics, которое выполняется в кластере с несколькими клиентами, также не поддерживается.

Azure Stream Analytics вызывает Функции Azure через триггеры HTTP. Адаптер выходных данных функции Azure доступен со следующими настраиваемыми свойствами:

| Имя свойства | Описание |
| --- | --- |
| Приложение-функция |Имя приложения-функции Azure. |
| Компонент |Имя функции в приложении-функции Azure. |
| Клавиши |Если нужно использовать службу "Функции Azure" из другой подписки это можно сделать, предоставив ключ для доступа к функции. |
| Максимальный размер пакета |Свойство, которое позволяет задать максимальный размер для каждого выходного пакета, отправляемого в функцию Azure. Объем входных данных задается в байтах. По умолчанию это значение равно 262 144 байт (256 КБ). |
| Максимальное количество пакетов  |Свойство, которое позволяет указать максимальное число событий в каждом пакете, отправляемых в функции Azure. По умолчанию используется значение 100. |

Azure Stream Analytics ожидает HTTP-состояние 200 из приложения-функции для пакетов, которые были успешно обработаны.

Когда служба Azure Stream Analytics получает исключение 413 (сущность запроса HTTP слишком большая) из службы "Функции Azure", размер пакетов, отправляемых в службу "Функции Azure", уменьшается. В коде функции Azure это исключение позволяет убедится, что Azure Stream Analytics не отправляет пакеты слишком большого размера. Кроме того, убедитесь, что максимальное количество пакетов и размеры значений, используемые в функции, соответствуют значениям, введенным на портале Stream Analytics.

> [!NOTE]
> Во время тестового подключения Stream Analytics отправляет пустой пакет в Функции Azure для проверки, если соединение между ними работает. Убедитесь, что приложение-функция обрабатывает пустые пакетные запросы, чтобы убедиться, что проверка пройдена.

Кроме того, в ситуации, когда во временном окне не происходит целевое событие, никакие выходные данные не генерируются. В результате функция **computeResult** не вызывается. Такое поведение согласуется со встроенными оконными агрегатными функциями.

## <a name="partitioning"></a>Секционирование

Ключ секции основан на предложении PARTITION BY в запросе. Количество модулей записи вывода соответствует входному секционированию для [полностью параллельных запросов](stream-analytics-scale-jobs.md).

## <a name="output-batch-size"></a>Размер выходного пакета

Размер пакета по умолчанию составляет 262 144 байт (256 КБ). Число событий в пакете по умолчанию равно 100. Размер пакета можно настроить, его можно увеличить или уменьшить в параметрах вывода Stream Analytics.

## <a name="next-steps"></a>Дальнейшие действия

* [Краткое руководство. по созданию задания Stream Analytics с помощью портала Azure](stream-analytics-quick-create-portal.md)
* [Краткое руководство. Создание задания Azure Stream Analytics с помощью Azure CLI](quick-create-azure-cli.md)
* [Краткое руководство. Создание задания Azure Stream Analytics с помощью шаблона ARM](quick-create-azure-resource-manager.md)
* [Краткое руководство. Создание задания Stream Analytics с помощью Azure PowerShell](stream-analytics-quick-create-powershell.md)
* [Краткое руководство. Создание задания Azure Stream Analytics с помощью Visual Studio](stream-analytics-quick-create-vs.md)
* [Краткое руководство. Создание задания Azure Stream Analytics в Visual Studio Code](quick-create-visual-studio-code.md)