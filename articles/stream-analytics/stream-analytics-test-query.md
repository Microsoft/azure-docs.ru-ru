---
title: Проверка задания Azure Stream Analytics с демонстрационными данными
description: В этой статье описывается тестирование задания Azure Stream Analytics, примера входных данных и отправка демонстрационных данных на портале Azure.
author: ajetasin
ms.author: ajetasi
ms.service: stream-analytics
ms.topic: how-to
ms.date: 3/6/2020
ms.custom: seodec18
ms.openlocfilehash: eff9103f476e6074ab46198ff8cc78588675569f
ms.sourcegitcommit: 42a4d0e8fa84609bec0f6c241abe1c20036b9575
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/08/2021
ms.locfileid: "98020049"
---
# <a name="test-an-azure-stream-analytics-job-in-the-portal"></a>Тестирование задания Azure Stream Analytics на портале

В Azure Stream Analytics можно протестировать запрос без запуска или остановки задания. Вы можете проверить запросы к входящим данным из источников потоковой передачи или отправить пример данных из локального файла на портале Azure. Вы также можете тестировать запросы локально из локальных демонстрационных данных или динамических данных в [Visual Studio](stream-analytics-live-data-local-testing.md) и [Visual Studio Code](visual-studio-code-local-run-live-input.md).

## <a name="automatically-sample-incoming-data-from-input"></a>Автоматически выборке входных данных из ввода

Azure Stream Analytics автоматически извлекает события из потоков ввода. Можно выполнять запросы к примеру по умолчанию или задать конкретный интервал времени для образца.

1. Войдите на портал Azure.

2. Выберите существующее задание Stream Analytics.

3. На странице задания Stream Analytics в разделе **Топологии задания** установите флажок **Запрос**, чтобы открыть окно редактора запросов. 

4. Чтобы просмотреть пример списка входящих событий, выберите значок вход с файлом, и примеры событий будут автоматически отображаться в **предварительной версии входных данных**.

   а. Тип сериализации для данных автоматически определяется в формате JSON или CSV. Можно вручную изменить его, а также на JSON, CSV, AVRO, изменив параметр в раскрывающемся меню.
    
   б. Используйте селектор для просмотра данных в **таблице** или **необработанном** формате.
    
   в. Если данные не являются актуальными, выберите **Обновить** , чтобы просмотреть последние события.

   В таблице ниже приведен пример данных в **формате таблицы**.

   ![Azure Stream Analytics пример входных данных в формате таблицы](./media/stream-analytics-test-query/asa-sample-table.png)

   В следующей таблице приведен пример данных в **формате RAW**:

   ![Azure Stream Analytics пример входных данных в формате RAW](./media/stream-analytics-test-query/asa-sample-raw.png)

5. Чтобы протестировать запрос с входящими данными, выберите **тестовый запрос**. Результаты отображаются на вкладке **Результаты теста** . Можно также выбрать **загрузить результаты** , чтобы скачать результаты.

   ![Azure Stream Analytics образец результатов тестового запроса](./media/stream-analytics-test-query/asa-test-query.png)

6. Чтобы проверить запрос по определенному диапазону входящих событий, выберите **выбрать диапазон времени**.
   
   ![Azure Stream Analytics диапазон времени для входящих событий выборки](./media/stream-analytics-test-query/asa-select-time-range.png)

7. Задайте диапазон времени для событий, которые вы хотите использовать для проверки запроса, и выберите **Пример**. В течение этого интервала времени можно получить до 1000 событий или 1 МБ, в зависимости от того, какое из них происходит первым.

   ![Azure Stream Analytics задать диапазон времени для входящих событий выборки](./media/stream-analytics-test-query/asa-set-time-range.png)

8. После выборки событий для выбранного периода времени они отображаются на вкладке **Просмотр ввода** .

   ![Azure Stream Analytics просмотреть результаты теста](./media/stream-analytics-test-query/asa-view-test-results.png)

9. Выберите **Сброс** , чтобы просмотреть пример списка входящих событий. Если выбран параметр **сбросить**, выбор диапазона времени будет потерян. Выберите **тестовый запрос** для проверки запроса и просмотра результатов на вкладке **Результаты теста** .

10. При внесении изменений в запрос нажмите кнопку **Сохранить запрос** , чтобы проверить новую логику запроса. Это позволяет итеративно изменить запрос и снова проверить его, чтобы увидеть, как изменяются выходные данные.

11. После проверки результатов, отображаемых в браузере, можно приступать к **запуску** задания.

## <a name="upload-sample-data-from-a-local-file"></a>Отправка демонстрационных данных из локального файла

Вместо использования данных в реальном времени можно использовать образцы данных из локального файла для проверки Azure Stream Analytics запроса.

1. Войдите на портал Azure.
   
2. Найдите имеющееся задание Stream Analytics и выберите его.

3. На странице задания Stream Analytics в разделе **Топологии задания** установите флажок **Запрос**, чтобы открыть окно редактора запросов.

4. Чтобы проверить запрос с помощью локального файла, выберите **отправить образец входных данных** на вкладке **Просмотр ввода** . 

   ![На снимке экрана показан параметр отправки образца входных данных.](./media/stream-analytics-test-query/asa-upload-sample-file.png)

5. Отправьте локальный файл для проверки запроса. Вы можете отправлять файлы только с форматами JSON, CSV или AVRO. Нажмите кнопку **ОК**.

   ![На снимке экрана показано диалоговое окно «Отправка демонстрационных данных», в котором можно выбрать файл.](./media/stream-analytics-test-query/asa-upload-sample-json-file.png)

6. Как только вы отправляете файл, содержимое файла можно просмотреть в виде таблицы или в формате RAW. Если выбрать параметр **сбросить**, образец данных вернется к входящим входным данным, описанным в предыдущем разделе. Любой другой файл можно передать для тестирования запроса в любое время.

7. Выберите **тестовый запрос** , чтобы проверить запрос к отправленному образцу файла.

8. Результаты теста отображаются на основе запроса. Вы можете изменить запрос и нажать кнопку **Сохранить запрос** для проверки новой логики запроса. Это позволяет итеративно изменить запрос и снова проверить его, чтобы увидеть, как изменяются выходные данные.

9. При использовании нескольких выходов в запросе результаты отображаются на основе выбранных выходных данных. 

   ![Azure Stream Analytics выбранные выходные данные](./media/stream-analytics-test-query/asa-sample-test-selected-output.png)

10. После проверки результатов, отображаемых в браузере, можно **запустить** задание.

## <a name="limitations"></a>Ограничения

1.  Политика времени не поддерживается в тестировании на портале:

    * Вне порядка. будут упорядочены все входящие события.
    * Последнее поступление: событие прибытия не будет заноситься, так как Stream Analytics может использовать только существующие данные для тестирования.
   
2.  Функция UDF языка C# не поддерживается.

3.  Все тесты будут выполняться с заданием, имеющим одну единицу потоковой передачи.

4.  Размер времени ожидания равен одной минуте. Так что любой запрос с размером окна больше одной минуты не может получить никаких данных.

5.  Машинное обучение не поддерживается.

6. Пример API-интерфейса данных регулируется после пяти запросов в 15-минутном окне. По окончании 15-минутного периода можно выполнить дополнительные запросы на выборку данных. Это ограничение применяется на уровне подписки.

## <a name="troubleshooting"></a>Устранение неполадок

1.  При возникновении этой ошибки возникла проблема с сетевым подключением при получении результатов. Проверьте параметры сети и брандмауэра. ", выполните следующие действия:

  * Чтобы проверить подключение к службе, откройте [https://queryruntime.azurestreamanalytics.com/api/home/index](https://queryruntime.azurestreamanalytics.com/api/home/index) в браузере. Если вы не можете открыть эту ссылку, обновите параметры брандмауэра.
  
2. При возникновении этой ошибки "размер запроса слишком велик. Сократите размер входных данных и повторите попытку. "выполните следующие действия:

  * Уменьшение размера входных данных — протестируйте запрос с примером файла меньшего размера или с меньшим диапазоном времени.
  * Уменьшить размер запроса — чтобы проверить выбор запроса, выберите часть запроса, а затем щелкните **проверить выбранный запрос**.


## <a name="next-steps"></a>Дальнейшие действия
* [Создание решения IOT с помощью Stream Analytics](./stream-analytics-build-an-iot-solution-using-stream-analytics.md). в этом учебнике вы узнаете, как создать комплексное решение с генератором данных, который будет имитировать трафик на платном стенде.

* [Справочник по языку запросов Azure Stream Analytics](/stream-analytics-query/stream-analytics-query-language-reference)

* [Примеры запросов для распространенных шаблонов использования Stream Analytics](stream-analytics-stream-analytics-query-patterns.md)

* [Общие сведения о входных данных Azure Stream Analytics](stream-analytics-add-inputs.md)

* [Описание выходных данных из Azure Stream Analytics](stream-analytics-define-outputs.md)
