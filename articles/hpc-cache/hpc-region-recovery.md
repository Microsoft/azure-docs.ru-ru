---
title: Региональная избыточность и восстановление после сбоя с помощью кэша HPC Azure
description: Способы предоставления возможностей отработки отказа для аварийного восстановления с помощью кэша HPC Azure
author: ekpgh
ms.service: hpc-cache
ms.topic: conceptual
ms.date: 10/30/2019
ms.author: v-erkel
ms.openlocfilehash: 9159807f55ae52393b8fccec339fcc94c3e4ebb0
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "87061378"
---
# <a name="use-multiple-caches-for-regional-failover-recovery"></a>Использование нескольких кэшей для восстановления региональных отработок отказа

Каждый экземпляр кэша Azure HPC выполняется в определенной подписке и в одном регионе. Это означает, что рабочий процесс кэша может быть прерван, если в регионе имеется полный сбой.

В этой статье описывается стратегия снижения риска нарушения работы с помощью второго региона для отработки отказа кэша.

Ключ использует хранилище серверной части, доступное из нескольких регионов. Это может быть либо локальная система NAS с соответствующей поддержкой DNS, либо хранилище больших двоичных объектов Azure, которое находится в другом регионе из кэша.

При переходе рабочего процесса в основной регион данные сохраняются в долгосрочном хранилище за пределами региона. Если область кэша становится недоступной, можно создать дубликат экземпляра кэша Azure HPC в дополнительном регионе, подключиться к тому же хранилищу и возобновить работу из нового кэша.

## <a name="planning-for-regional-failover"></a>Планирование региональной отработки отказа

Чтобы настроить кэш, подготовленный для возможной отработки отказа, выполните следующие действия.

1. Убедитесь, что серверное хранилище доступно во втором регионе.
1. При планировании создания экземпляра основного кэша необходимо также подготовиться к репликации этого процесса установки во втором регионе. Включить следующие элементы:

   1. Структура виртуальной сети и подсети
   1. Емкость кэша
   1. Сведения о целевом хранилище, имена и пути к пространству имен
   1. Сведения о клиентских компьютерах, если они находятся в том же регионе, что и кэш
   1. Команда подключения для использования клиентами кэша

   > [!NOTE]
   > Кэш Azure HPC можно создать программным путем с помощью [шаблона Azure Resource Manager](../azure-resource-manager/templates/overview.md) или путем прямого доступа к его API. Для получения дополнительных сведений обратитесь к группе кэша HPC Azure.

## <a name="failover-example"></a>Пример отработки отказа

В качестве примера предположим, что вы хотите разместить кэш HPC Azure в регионе "Восточная часть США" Azure. Он будет получать доступ к данным, хранящимся в локальном центре обработки данных.

Вы можете использовать кэш в регионе "Западная часть США 2" в качестве резервной копии для отработки отказа.

При создании кэша в восточной части США Подготовьте второй кэш для развертывания в западной части США 2. Для автоматизации этой подготовки можно использовать скрипты или шаблоны.

В случае сбоя на уровне региона в восточной части США создайте кэш, подготовленный в регионе "Западная часть США 2".

После создания кэша добавьте целевые объекты хранилища, которые указывают на одно и то же локальное хранилище данных, и используйте те же обобщенные пути к пространству имен, что и целевые объекты хранения старого кэша.

Если исходные клиенты затрагиваются, создайте новые клиенты в регионе "Западная часть США 2" для использования с новым кэшем.

Все клиенты должны будут подключать новый кэш, даже если на них не повлияло отключение региона. Новый кэш имеет разные адреса подключения от старого.

## <a name="learn-more"></a>Дополнительные сведения

Руководство по архитектуре приложений Azure содержит дополнительные сведения о [восстановлении при прерывании работы службы на уровне региона](<https://docs.microsoft.com/azure/architecture/resiliency/recovery-loss-azure-region>).
