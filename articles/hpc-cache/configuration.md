---
title: Настройка параметров кэша Azure HPC
description: В этой статье объясняется, как настроить дополнительные параметры для кэша, такие как MTU и без-root-Squash, а также как получить доступ к Экспресс-моментальным снимкам из целевых объектов хранилища BLOB-объектов Azure.
author: ekpgh
ms.service: hpc-cache
ms.topic: how-to
ms.date: 12/21/2020
ms.author: v-erkel
ms.openlocfilehash: 02bf862cdc3b20ef3e5fdb024f474267efa0c70d
ms.sourcegitcommit: 6cca6698e98e61c1eea2afea681442bd306487a4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/24/2020
ms.locfileid: "97760509"
---
# <a name="configure-additional-azure-hpc-cache-settings"></a>Настройка дополнительных параметров кэша Azure HPC

На странице **Конфигурация** в портал Azure есть параметры для настройки нескольких параметров. Большинству пользователей не нужно изменять эти параметры, используя значения по умолчанию.

В этой статье также описывается использование функции Snapshot для целевых объектов хранилища BLOB-объектов Azure. Функция моментального снимка не имеет настраиваемых параметров.

Чтобы просмотреть параметры, откройте страницу **настройки** кэша в портал Azure.

![снимок экрана страницы конфигурации в портал Azure](media/configuration.png)

> [!TIP]
> В [видео "Управление кэшем Azure HPC](https://azure.microsoft.com/resources/videos/managing-hpc-cache/) " отображается страница конфигурации и ее параметры.

## <a name="adjust-mtu-value"></a>Изменить значение MTU
<!-- linked from troubleshoot-nas article -->

Можно выбрать максимальный размер блока передачи для кэша, используя раскрывающееся меню с именем **MTU**.

Значение по умолчанию — 1500 байт, но его можно изменить на 1400.

> [!NOTE]
> Если вы уменьшите размер MTU кэша, убедитесь, что клиенты и системы хранения, которые обмениваются данными с кэшем, имеют одинаковый параметр MTU или меньшее значение.

Уменьшение значения MTU кэша может помочь обойти ограничения по размеру пакетов в оставшейся части сети кэша. Например, некоторые VPN не могут успешно передавать полный размер 1500-байтовых пакетов. Уменьшение размера пакетов, отправляемых через VPN, может устранить эту ошибку. Однако обратите внимание, что нижний параметр MTU кэша означает, что любой другой компонент, который обменивается данными с кэшем, включая клиентов и системы хранения, должен также иметь параметр MTU с меньшим значением, чтобы избежать проблем с связью.

Если вы не хотите изменять параметры MTU на других системных компонентах, не следует уменьшать значение параметра MTU кэша. Существуют и другие решения для обхода ограничений по размеру пакетов VPN. Дополнительные сведения об диагностике и устранении этой проблемы см. в статье [Настройка ограничений размера пакетов VPN](troubleshoot-nas.md#adjust-vpn-packet-size-restrictions) в разделе Устранение неполадок NAS.

Дополнительные сведения о параметрах MTU в виртуальных сетях Azure см. в статье [Настройка производительности TCP/IP для виртуальных машин Azure](../virtual-network/virtual-network-tcpip-performance-tuning.md).

## <a name="configure-root-squash"></a>Настройка корневых Squash
<!-- linked from troubleshoot and from access policies -->

Параметр **Включить корневой Squash** определяет, как кэш Azure HPC обрабатывает запросы от привилегированного пользователя на клиентских компьютерах.

Если параметр root Squash включен, пользователи из клиента автоматически сопоставляются с пользователем «никто» при отправке запросов через кэш HPC Azure. Кроме того, он не позволяет клиентским запросам использовать биты разрешений Set-UID.

Если параметр root Squash отключен, запрос от корневого пользователя клиента (UID 0) передается в серверную систему хранения NFS в качестве корневого каталога. Такая конфигурация может допускать недопустимый доступ к файлам.

Установка корневого squash в кэше может помочь компенсировать требуемый ``no_root_squash`` параметр в системах NAS, которые используются в качестве целевых объектов хранилища. (Дополнительные сведения о [необходимых компонентах хранилища NFS](hpc-cache-prerequisites.md#nfs-storage-requirements)). Она также может повысить безопасность при использовании целевых объектов хранилища BLOB-объектов Azure.

Значение по умолчанию — **Да**. (Кэши, созданные до апреля 2020, могут иметь значение по умолчанию **No**.)

> [!TIP]
> Вы также можете задать корневой Squash для конкретных экспортов хранилища, настроив [политики клиентского доступа](access-policies.md#root-squash).

## <a name="view-snapshots-for-blob-storage-targets"></a>Просмотр моментальных снимков для целевых объектов хранилища BLOB-объектов

Кэш Azure HPC автоматически сохраняет моментальные снимки хранилища для целевых объектов хранилища BLOB-объектов Azure. Моментальные снимки предоставляют краткую точку ссылки для содержимого контейнера серверной части хранилища.

Моментальные снимки не заменяют резервные копии данных и не содержат сведений о состоянии кэшированных данных.

> [!NOTE]
> Эта функция моментального снимка отличается от функции моментального снимка, включенной в программное обеспечение хранилища NetApp или Исилон. Эти реализации моментальных снимков сбрасывают изменения из кэша в систему хранения серверной части перед созданием моментального снимка.
>
> Для повышения эффективности моментальный снимок кэша HPC Azure не сбрасывает изменения и только записывает данные, записанные в контейнер больших двоичных объектов. Этот моментальный снимок не представляет состояние кэшированных данных, поэтому он может не включать последние изменения.

Эта функция доступна только для целей хранилища BLOB-объектов Azure, и ее конфигурация не может быть изменена.

Моментальные снимки создаются каждые восемь часов, в формате UTC 0:00, 08:00 и 16:00.

В кэше Azure HPC хранятся моментальные снимки ежедневно, еженедельно и ежемесячно, пока они не будут заменены новыми. Ограничения:

* до 20 моментальных снимков за день
* до 8 моментальных снимков за неделю
* до 3 ежемесячных моментальных снимков

Получите доступ к моментальным снимкам из `.snapshot` каталога в пространстве имен целевого объекта хранилища BLOB-объектов.
