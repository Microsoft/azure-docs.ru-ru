---
title: Обновление основной версии в базе данных Azure для MySQL — одиночный сервер
description: В этой статье описывается, как можно обновить основную версию базы данных Azure для MySQL — одиночный сервер.
author: ambhatna
ms.author: ambhatna
ms.service: mysql
ms.topic: how-to
ms.date: 1/13/2021
ms.openlocfilehash: b62f4ebc61ac27478788d8b2bae5e4145f87ac8b
ms.sourcegitcommit: 484f510bbb093e9cfca694b56622b5860ca317f7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/21/2021
ms.locfileid: "98630206"
---
# <a name="major-version-upgrade-in-azure-database-for-mysql-single-server"></a>Обновление основной версии в базе данных Azure для MySQL с одним сервером

> [!IMPORTANT]
> Обновление основной версии для одного сервера базы данных Azure для MySQL доступно в общедоступной предварительной версии.

В этой статье описывается, как можно обновить основную версию MySQL на месте в базе данных Azure для MySQL Single Server.

Эта функция позволит клиентам выполнять обновление на месте серверов MySQL 5,6 до MySQL 5,7 с помощью кнопки без перемещения данных или изменения строки подключения приложения.

> [!Note]
> * Обновление основной версии доступно только для обновления основной версии с MySQL 5,6 до MySQL 5,7<br>
> * Обновление основной версии на сервере реплики пока не поддерживается.
> * Сервер будет недоступен во время операции обновления. Поэтому рекомендуется выполнять обновления во время планового периода обслуживания.

## <a name="perform-major-version-upgrade-from-mysql-56-to-mysql-57-using-azure-portal"></a>Выполнение обновления основной версии с MySQL 5,6 до MySQL 5,7 с помощью портал Azure

Выполните следующие действия, чтобы выполнить обновление основной версии для базы данных Azure сервера MySQL 5,6 с помощью портал Azure

> [!IMPORTANT]
> Рекомендуется сначала выполнить обновление на восстановленной копии сервера, а не напрямую обновлять рабочую среду. См. раздел [как выполнить восстановление до точки во времени](howto-restore-server-portal.md#point-in-time-restore).

1. В [портал Azure](https://portal.azure.com/)выберите существующий сервер базы данных Azure для MySQL 5,6.

2. На странице **Обзор** нажмите кнопку **Обновить** на панели инструментов.

3. В разделе **Обновление** нажмите кнопку **ОК** , чтобы обновить сервер базы данных Azure для MySQL 5,6 на сервер 5,7.

   :::image type="content" source="./media/how-to-major-version-upgrade-portal/upgrade.png" alt-text="Обзор базы данных Azure для MySQL — обновление":::

4. В уведомлении будет подтверждено, что обновление прошло успешно.


## <a name="perform-major-version-upgrade-from-mysql-56-to-mysql-57-using-azure-cli"></a>Выполнение обновления основной версии с MySQL 5,6 до MySQL 5,7 с помощью Azure CLI

Выполните следующие действия, чтобы выполнить обновление основной версии для базы данных Azure сервера MySQL 5,6 с помощью Azure CLI

> [!IMPORTANT]
> Рекомендуется сначала выполнить обновление на восстановленной копии сервера, а не напрямую обновлять рабочую среду. См. раздел [как выполнить восстановление до точки во времени](howto-restore-server-cli.md#server-point-in-time-restore).

1. Установите [Azure CLI для Windows](/cli/azure/install-azure-cli) или используйте Azure CLI в [Azure Cloud Shell](../cloud-shell/overview.md) для запуска команд обновления. 
 
   Для этого обновления требуется версия 2.16.0 или более поздняя Azure CLI. Если вы используете Azure Cloud Shell, последняя версия уже установлена. Выполните команду az version, чтобы узнать установленную версию и зависимые библиотеки. Чтобы обновиться до последней версии, выполните команду az upgrade.

2. После входа выполните команду [AZ MySQL Server Upgrade](https://docs.microsoft.com/cli/azure/mysql/server?view=azure-cli-latest#az_mysql_server_upgrade&preserve-view=true) :
    
   ```azurecli
   az mysql server upgrade --name testsvr --resource-group testgroup --subscription MySubscription --target-server-version 5.7"
   ```
   
   В командной строке отображается сообщение "-выполняющемуся". После того как сообщение больше не будет отображаться, обновление версии будет завершено.

## <a name="frequently-asked-questions"></a>Часто задаваемые вопросы

### <a name="when-will-this-upgrade-feature-be-ga-as-we-have-mysql-v56-in-our-production-environment-that-we-need-to-upgrade"></a>Когда эта функция обновления будет общедоступна, так как у нас есть MySQL v 5.6 в производственной среде, которую нужно обновить?

Общедоступная версия этой функции планируется до выхода из MySQL v 5.6. Однако эта функция готова к работе и полностью поддерживается Azure, поэтому ее следует использовать в вашей среде с уверенностью. Рекомендуется сначала выполнить и протестировать его на восстановленной копии сервера, чтобы оценить время простоя и выполнить проверку совместимости приложений перед запуском в рабочей среде. Дополнительные сведения см. в статье [как выполнить восстановление](howto-restore-server-portal.md#point-in-time-restore) на момент времени, чтобы создать копию сервера на момент времени. 

### <a name="will-this-cause-downtime-of-the-server-and-if-so-how-long"></a>Это приведет к простою сервера и, если да, сколько времени?

Да, сервер будет недоступен в процессе обновления, поэтому мы рекомендуем выполнить эту операцию во время планового периода обслуживания. Предполагаемое время простоя зависит от размера базы данных, подготовленного объема хранилища (количество операций ввода-вывода в секунду) и количества таблиц в базе данных. Время обновления прямо пропорционально количеству таблиц на сервере. Обновление основных серверов SKU должно занять больше времени, чем на стандартной платформе хранения. Чтобы оценить время простоя для серверной среды, рекомендуется сначала выполнить обновление для восстановленной копии сервера.  

### <a name="it-is-noted-that-it-is-not-supported-on-replica-server-yet-what-does-that-mean-concrete"></a>Отмечено, что он еще не поддерживается на сервере реплики. Что означает конкретное?

В настоящее время обновление основной версии не поддерживается для сервера реплики. Это означает, что не следует запускать его для серверов, участвующих в репликации (на исходном или сервере-реплике). Если вы хотите протестировать обновление серверов, участвующих в репликации, прежде чем добавить поддержку реплики для обновления, рекомендуется выполнить следующие действия:

1. Во время запланированного обслуживания следует [отключить репликацию и удалить сервер реплики](howto-read-replicas-portal.md) после записи его имени и всех сведений о конфигурации (параметры брандмауэра, конфигурации параметров сервера, если они отличаются от исходного сервера).
2. Выполните обновление исходного сервера.
3. Подготавливает новый сервер реплики чтения с тем же именем и параметрами конфигурации, которые были сохранены на шаге 1. Новый сервер реплики будет на v 5.7 автоматически после обновления исходного сервера до версии 5.7.

### <a name="what-will-happen-if-we-do-not-choose-to-upgrade-our-mysql-v56-server-before-february-5-2021"></a>Что произойдет, если не обновить сервер MySQL v 5.6 до 5 февраля 2021?

Вы по-прежнему можете продолжить работу сервера MySQL v 5.6, как и раньше. Azure **никогда не будет** выполнять принудительное обновление на сервере. Однако будут применены ограничения, описанные в статье [Политика управления версиями базы данных Azure для MySQL](concepts-version-policy.md) .

## <a name="next-steps"></a>Дальнейшие действия

Сведения о [политике управления версиями базы данных Azure для MySQL](concepts-version-policy.md).
