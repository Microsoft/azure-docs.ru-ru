---
title: Импорт и экспорт — база данных Azure для MySQL
description: В этой статье описываются распространенные способы импорта и экспорта баз данных в базе данных Azure для MySQL с помощью средств, таких как MySQL Workbench.
author: savjani
ms.author: pariks
ms.service: mysql
ms.subservice: migration-guide
ms.topic: conceptual
ms.date: 10/30/2020
ms.openlocfilehash: 049a0ad45ea82210d8fac28db0fb3d067841bba4
ms.sourcegitcommit: a9ce1da049c019c86063acf442bb13f5a0dde213
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2021
ms.locfileid: "105625149"
---
# <a name="migrate-your-mysql-database-by-using-import-and-export"></a>Перенос базы данных MySQL с помощью импорта и экспорта

[!INCLUDE[applies-to-single-flexible-server](includes/applies-to-single-flexible-server.md)]

В этой статье описываются два обычных подхода к импорту и экспорту данных в базе данных Azure для сервера MySQL с помощью MySQL Workbench.

Подробные и исчерпывающие инструкции по миграции см. в разделе [материалы руководства по миграции](https://github.com/Azure/azure-mysql/tree/master/MigrationGuide). 

Другие сценарии миграции см. в разделе [руководств по миграции баз данных](https://datamigration.microsoft.com/). 

## <a name="prerequisites"></a>Предварительные условия

Перед началом миграции базы данных MySQL необходимо выполнить следующие действия.
- Создайте [сервер базы данных Azure для MySQL с помощью портал Azure](quickstart-create-mysql-server-database-using-azure-portal.md).
- Скачайте и установите [MySQL Workbench](https://dev.mysql.com/downloads/workbench/) или другое стороннее средство MySQL для импорта и экспорта.

## <a name="create-a-database-on-the-azure-database-for-mysql-server"></a>Создание базы данных в службе базы данных Azure для сервера MySQL
Создайте пустую базу данных на сервере базы данных Azure для MySQL с помощью MySQL Workbench, Toad или Navicat. База данных может иметь то же имя, что и база данных, которая содержит данные дампа. Вы также можете создать базу данных с другим именем.

Чтобы подключиться, выполните следующие действия.

1. В портал Azure найдите сведения о подключении на панели **Обзор** базы данных Azure для MySQL.

   :::image type="content" source="./media/concepts-migrate-import-export/1_server-overview-name-login.png" alt-text="Снимок экрана: сведения о подключении к серверу базы данных Azure для MySQL в портал Azure.":::

1. Добавьте сведения о подключении MySQL Workbench.

   :::image type="content" source="./media/concepts-migrate-import-export/2_setup-new-connection.png" alt-text="Строка подключения MySQL Workbench":::

## <a name="determine-when-to-use-import-and-export-techniques"></a>Определение необходимости использования методов импорта и экспорта

> [!TIP]
> Для сценариев, в которых требуется выгрузить и восстановить всю базу данных, используйте вместо этого подход [дампа и восстановления](concepts-migrate-dump-restore.md) .

В следующих сценариях с помощью инструментов MySQL можно импортировать базы данных и экспортировать их в базу. Для других средств перейдите к разделу "методы миграции" (стр. 22) с [руководством по миграции базы данных MySQL в Azure](https://github.com/Azure/azure-mysql/blob/master/MigrationGuide/MySQL%20Migration%20Guide_v1.1.pdf). 

- Если необходимо выборочно выбрать несколько таблиц для импорта из существующей базы данных MySQL в базу данных Azure MySQL, лучше использовать метод импорта и экспорта.  Таким образом, можно пропустить все ненужные таблицы в процессе переноса, чтобы сэкономить время и ресурсы. Например, используйте параметр `--include-tables` или `--exclude-tables` с [mysqlpump](https://dev.mysql.com/doc/refman/5.7/en/mysqlpump.html#option_mysqlpump_include-tables) и параметр `--tables` с [mysqldump](https://dev.mysql.com/doc/refman/5.7/en/mysqldump.html#option_mysqldump_tables).
- При перемещении объектов базы данных, отличных от таблиц, явно создайте эти объекты. Включите ограничения (первичный ключ, внешний ключ и индексы), представления, функции, процедуры, триггеры и другие объекты базы данных, которые требуется перенести.
- При перемещении данных из внешних источников данных, отличных от базы данных MySQL, создайте неструктурированные файлы и импортируйте их с помощью команды [mysqlimport](https://dev.mysql.com/doc/refman/5.7/en/mysqlimport.html).

> [!Important]
> Как один сервер, так и гибкий сервер поддерживают *только подсистему хранилища InnoDB*. Убедитесь, что все таблицы в базе данных используют подсистему хранилища InnoDB при загрузке данных в базу данных Azure для MySQL.
>
> Если база данных источника использует другую подсистему хранилища, перед миграцией базы данных преобразуйте ее в подсистему InnoDB. Например, при наличии WordPress или веб-приложения, которое использует ядро MyISAM, сначала преобразуйте таблицы путем переноса данных в таблицы InnoDB. Используйте предложение `ENGINE=INNODB`, чтобы задать ядро для создания таблицы, а затем передайте данные в совместимую таблицу перед переносом.

   ```sql
   INSERT INTO innodb_table SELECT * FROM myisam_table ORDER BY primary_key_columns
   ```

## <a name="performance-recommendations-for-import-and-export"></a>Рекомендации по повышению производительности импорта и экспорта

Для оптимальной производительности импорта и экспорта данных рекомендуется выполнить следующие действия.
-   Перед загрузкой данных создайте кластеризованные индексы и первичные ключи. Загрузка данных в порядке первичного ключа.
-   Отложить создание вторичных индексов до загрузки данных.
-   Отключите ограничения внешнего ключа перед загрузкой данных. Отключение проверки внешнего ключа обеспечивает значительный прирост производительности. Включите ограничения и проверьте данные после загрузки, чтобы обеспечить целостность данных.
-   Загружайте данные в параллельном режиме. Не выполняйте слишком много параллельных операций, так как ресурсы при этом могут кончиться. Отслеживайте ресурсы с помощью метрик, доступных на портале Azure.
-   Используйте секционированные таблицы, когда это необходимо.

## <a name="import-and-export-data-by-using-mysql-workbench"></a>Импорт и экспорт данных с помощью MySQL Workbench
Существует два способа экспорта и импорта данных в MySQL Workbench: из контекстного меню обозревателя объектов или из области навигатора. Для каждого метода используется другая цель.

> [!NOTE]
> Если вы добавляете подключение к MySQL Single Server или гибкому серверу (Предварительная версия) в MySQL Workbench, выполните следующие действия.
> - Для MySQL Single Server убедитесь, что имя пользователя указано в формате *\<username@servername>* .
> - Для гибкого сервера MySQL используйте *\<username>* только. При использовании *\<username@servername>* для подключения произойдет сбой подключения.

### <a name="run-the-table-data-export-and-import-wizards-from-the-object-browser-context-menu"></a>Запуск мастеров экспорта и импорта табличных данных из контекстного меню обозревателя объектов

:::image type="content" source="./media/concepts-migrate-import-export/p1.png" alt-text="Снимок экрана с командами мастера экспорта и импорта MySQL Workbench в контекстном меню обозревателя объектов.":::

Мастеры табличных данных поддерживают операции импорта и экспорта с помощью CSV-и JSON-файлов. Мастеры включают в себя несколько параметров конфигурации, таких как разделители, выбор столбцов и выбор кодировки. Каждый мастер можно запустить для локального или удаленного подключения к серверам MySQL. Операция импорта включает сопоставление таблиц, столбцов и типов.

Для доступа к этим мастерам из контекстного меню обозревателя объектов щелкните правой кнопкой мыши таблицу, а затем выберите **Мастер экспорта данных таблицы** или **Мастер импорта табличных данных**.

#### <a name="the-table-data-export-wizard"></a>Мастер экспорта данных таблицы

Экспорт таблицы в CSV-файл:

1. Щелкните правой кнопкой мыши таблицу базы данных, которую необходимо экспортировать.
1. Выберите **Table Data Export Wizard** (Мастер экспорта данных таблиц). Выберите столбцы, которые необходимо экспортировать, смещение строки (при необходимости) и количество (при необходимости).
1. На панели **Выбор данных для экспорта** нажмите кнопку **Далее**. Выберите путь к файлу, тип файла CSV или JSON. Также выберите разделитель строк, метод включения строк и разделитель полей.
1. В области **Выбор расположения выходного файла** нажмите кнопку **Далее**.
1. На панели **Экспорт данных** нажмите кнопку **Далее**.

#### <a name="the-table-data-import-wizard"></a>Мастер импорта данных таблицы

Чтобы импортировать таблицу из CSV-файла, выполните следующие действия.

1. Щелкните правой кнопкой мыши таблицу базы данных, которую необходимо импортировать.
1. Найдите и выберите импортируемый CSV-файл, а затем нажмите кнопку **Далее**.
1. Выберите целевую таблицу (Новая или существующая), установите или снимите флажок **усечь таблицу перед импортом** , а затем нажмите кнопку **Далее**.
1. Выберите кодировку и столбцы для импорта, а затем нажмите кнопку **Далее**.
1. На панели **Импорт данных** нажмите кнопку **Далее**. Мастер импортирует данные.

### <a name="run-the-sql-data-export-and-import-wizards-from-the-navigator-pane"></a>Запуск мастеров экспорта и импорта данных SQL из области навигатора
Используйте мастер, чтобы экспортировать или импортировать данные SQL, созданные в MySQL Workbench, или команду mysqldump. Вы можете получить доступ к мастерам из области **навигатора** или выбрать пункт **сервер** в главном меню.

#### <a name="export-data"></a>Экспорт данных

:::image type="content" source="./media/concepts-migrate-import-export/p2.png" alt-text="Снимок экрана с использованием панели Навигатор для вывода панели экспорта данных в MySQL Workbench.":::

Для экспорта данных MySQL можно использовать панель « **Экспорт данных** ».

1. В MySQL Workbench в области **Навигатор** выберите **Экспорт данных**.

1. На панели **Экспорт данных** выберите каждую схему, которую необходимо экспортировать.
 
   Для каждой схемы можно выбрать определенные объекты схемы или таблицы для экспорта. Параметры конфигурации включают экспорт в папку проекта или автономный файл SQL, дамп хранимых подпрограмм и событий или пропуск данных таблицы.

   Кроме того, можно использовать **Экспорт результирующего набора** для экспорта определенного результирующего набора в редакторе SQL в другой формат, например CSV, JSON, HTML и XML.

1. Выберите объекты базы данных, которые необходимо экспортировать, и настройте связанные параметры.
1. Выберите **Обновить** , чтобы загрузить текущие объекты.
1. При необходимости выберите **Дополнительные параметры** в правом верхнем углу, чтобы уточнить операцию экспорта. Например, можно добавить блокировки таблиц, использовать инструкцию replace вместо insert и заключить идентификаторы в кавычки в виде обратного апострофа.
1. Щелкните **начать экспорт** , чтобы начать процесс экспорта.


#### <a name="import-data"></a>Импорт данных

:::image type="content" source="./media/concepts-migrate-import-export/p3.png" alt-text="Снимок экрана с использованием панели Навигатор для вывода панели импорта данных в MySQL Workbench.":::

Панель « **Импорт данных** » можно использовать для импорта или восстановления экспортированных данных из операции экспорта данных или команды mysqldump.

1. В MySQL Workbench в области **Навигатор** выберите **Экспорт и восстановление данных**.
1. Выберите папку проекта или автономный файл SQL, выберите схему для импорта или нажмите кнопку **создать** , чтобы определить новую схему.
1. Выберите **начать импорт** , чтобы начать процесс импорта.

## <a name="next-steps"></a>Дальнейшие шаги
- Другой способ миграции см. [в статье Перенос базы данных MySQL в базу данных Azure для MySQL с помощью функции дампа и восстановления](concepts-migrate-dump-restore.md).
- Дополнительные сведения о миграции баз данных в базу данных Azure для MySQL см. в статье о [миграции баз данных](https://github.com/Azure/azure-mysql/tree/master/MigrationGuide).
