---
title: Краткое руководство. Создание гибкого сервера Базы данных Azure для MySQL (портал Azure)
description: В этой статье показано, как быстро создать гибкий сервер Базы данных Azure для MySQL с помощью портала Azure.
author: savjani
ms.author: pariks
ms.service: mysql
ms.custom: mvc
ms.topic: quickstart
ms.date: 10/22/2020
ms.openlocfilehash: 074b799a4f0e83c47aac0b2b3fca5386bd45429f
ms.sourcegitcommit: 27d616319a4f57eb8188d1b9d9d793a14baadbc3
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/15/2021
ms.locfileid: "100521974"
---
# <a name="quickstart-use-the-azure-portal-to-create-an-azure-database-for-mysql-flexible-server"></a>Краткое руководство. Создание сервера Базы данных Azure для MySQL (гибкий сервер) с помощью портала Azure

Гибкий сервер Базы данных Azure для MySQL — это управляемая служба, которая позволяет запускать, администрировать и масштабировать в облаке серверы MySQL с высоким уровнем доступности. В этом кратком руководстве показано, как с помощью портала Azure создать гибкий сервер.

> [!IMPORTANT] 
> Сейчас предоставляется общедоступная предварительная версия гибкого сервера Базы данных Azure для MySQL.

Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/) Azure, прежде чем начинать работу.

## <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure
Перейдите на [портал Azure](https://portal.azure.com/). Введите свои учетные данные для входа на портал. Панель мониторинга службы является представлением по умолчанию.

## <a name="create-an-azure-database-for-mysql-flexible-server"></a>Создание гибкого сервера Базы данных Azure для MySQL

Гибкий сервер создается с определенным набором [вычислительных ресурсов и ресурсов хранения](./concepts-compute-storage.md). Он создается в [группе ресурсов Azure](../../azure-resource-manager/management/overview.md).

Чтобы создать гибкий сервер, сделайте следующее:

1. На портале Azure выполните поиск по фразе **Серверы Базы данных Azure для MySQL** и выберите этот вариант.
    
    > :::image type="content" source="./media/quickstart-create-server-portal/find-mysql-portal.png" alt-text="Снимок экрана: поиск серверов Базы данных Azure для MySQL.":::

2. Выберите **Добавить**. 

3. На странице **Выбор варианта развертывания Базы данных Azure для MySQL** выберите вариант развертывания **Гибкий сервер**.
     
    > :::image type="content" source="./media/quickstart-create-server-portal/deployment-option.png" alt-text="Снимок экрана: выбор варианта &quot;Гибкий сервер&quot;.":::    

4. На вкладке **Основные сведения** введите следующие данные: 

    > :::image type="content" source="./media/quickstart-create-server-portal/create-form.png" alt-text="Снимок экрана: вкладка &quot;Основные сведения&quot; на странице &quot;Гибкий сервер&quot;."::: 
                                    
    |**Параметр**|**Рекомендуемое значение**|**Описание**|
    |---|---|---|
    Подписка|Имя вашей подписки|Подписка Azure, которую вы хотите использовать для сервера. Если у вас есть несколько подписок, выберите ту, через которую будут выставляться счета за использование этого ресурса.|
    Группа ресурсов|**myresourcegroup**| Новое имя группы ресурсов или уже имеющееся из подписки.|
    Имя сервера |**mydemoserver**|Уникальное имя для идентификации гибкого сервера. Имя домена `mysql.database.azure.com` добавляется к указанному имени сервера. Имя сервера может содержать только строчные буквы, цифры и знак дефиса (-). Оно должно содержать от 3 до 63 символов.|
    Имя администратора |**mydemouser**| Ваша собственная учетная запись для входа, используемая при подключении к серверу. В качестве имени пользователя для администратора нельзя использовать варианты **azure_superuser**, **admin**, **administrator**, **root**, **guest** или **public**.|
    Пароль |Ваш пароль| Новый пароль для учетной записи администратора сервера. Пароль должен содержать от 8 до 128 символов. Пароль должен содержать символы следующих трех категорий: прописные латинские буквы, строчные латинские буквы, цифры (0–9) и специальные символы (!, $, #, % и т. д.).|
    Region|Ближайший к пользователям регион| Ближайшее к пользователям расположение.|
    Версия|**5.7**| Основной номер версии MySQL.|
    Вычисления и хранилище | **С накапливаемыми ресурсами**, **Standard_B1ms**, **10 ГиБ**, **7 дней**. | Конфигурации вычислительных ресурсов, хранилища и резервного копирования для нового сервера. Щелкните **Настройка сервера**. **С увеличивающейся производительностью**, **Standard_B1ms**, **10 ГиБ** и **7 дней** — это значения по умолчанию для параметров **Уровень вычислительных ресурсов**, **Объем вычислительных ресурсов**, **Размер хранилища** и **Период хранения** для резервных копий. Вы можете оставить эти значения как есть или изменить их. Чтобы сохранить настроенные параметры вычислительной среды и хранилища, щелкните **Сохранить** и продолжайте настройку. На приведенном ниже снимке экрана представлены доступные варианты для вычислительной среды и хранилища.|
    
    > :::image type="content" source="./media/quickstart-create-server-portal/compute-storage.png" alt-text="Снимок экрана: варианты для вычислительной среды и хранилища.":::

5. Настройка параметров сетевого подключения

    На вкладке **Сеть** можно выбрать метод доступа к серверу. Гибкий сервер Базы данных Azure для MySQL предоставляет два метода подключения к серверу: 
   - Открытый доступ (разрешенные IP-адреса)
   - Закрытый доступ (интеграция виртуальной сети) 
   
   Открытый доступ позволяет обращаться к серверу только с нескольких разрешенных IP-адресов, которые добавлены в правило брандмауэра. Этот метод не позволяет внешним приложениям и инструментам подключаться к серверу и любой базе данных на сервере, если не создано правило, открывающее брандмауэр для конкретных IP-адресов или диапазонов. Закрытый доступ (интеграция с виртуальной сетью) поддерживает доступ к серверу только из виртуальной сети. В этом кратком руководстве показано, как настроить открытый доступ для подключения к серверу. [Дополнительные сведения о вариантах подключения см. в статье с описанием основных понятий](./concepts-networking.md).

    > [!NOTE]
    > После создания сервера изменить метод подключения невозможно. Например, если во время создания вы выбрали вариант **Открытый доступ (разрешенные IP-адреса)** , то позже вы не сможете назначить **Закрытый доступ (интеграция с виртуальной сетью)** . Мы настоятельно рекомендуем создавать сервер с закрытым доступом, чтобы защитить доступ к серверу через интеграцию с виртуальной сетью. [Дополнительные сведения о закрытом доступе см. в статье с описанием основных понятий](./concepts-networking.md).

    > :::image type="content" source="./media/quickstart-create-server-portal/networking.png" alt-text="Снимок экрана: вкладка &quot;Сеть&quot;.":::  

6. Щелкните элемент **Проверка и создание**, чтобы проверить конфигурацию гибкого сервера.

7. Щелкните **Создать**, чтобы подготовить сервер. Подготовка может занять несколько минут.

8. На панели инструментов щелкните элемент **Уведомления** (значок колокольчика), чтобы отслеживать процесс развертывания. Когда развертывание завершится, вы сможете щелкнуть действие **Закрепить на панели мониторинга**, чтобы создать на панели мониторинга на портале Azure новую плитку. Эта плитка открывает страницу **Обзор** для этого сервера. Ссылка **Переход к ресурсу** открывает страницу **Обзор** для этого сервера.

По умолчанию для сервера создаются следующие базы данных: information_schema, mysql, performance_schema и sys.

> [!NOTE]
> Чтобы избежать проблем с подключением, убедитесь, что сеть разрешает исходящий трафик на порт 3306, который используется Базой данных Azure для MySQL.  

## <a name="connect-to-the-server-by-using-mysqlexe"></a>Подключение к серверу с помощью mysql.exe

Если вы создали гибкий сервер с закрытым доступом (интеграция с виртуальной сетью), к этому серверу нужно будет подключаться с другого ресурса в той же виртуальной сети. Например, можно создать виртуальную машину и добавить ее в виртуальную сеть, созданную для гибкого сервера. Дополнительные сведения см. в [документации по настройке частного доступа](how-to-manage-virtual-network-portal.md).

Если вы создали гибкий сервер с открытым доступом (разрешенные IP-адреса), вы можете добавить локальный IP-адрес в список правил брандмауэра на этом сервере. Пошаговые инструкции см. в [документации по созданию и администрированию правил брандмауэра](how-to-manage-firewall-portal.md).

Вы можете использовать [mysql.exe](https://dev.mysql.com/doc/refman/8.0/en/mysql.html) или [MySQL Workbench](./connect-workbench.md), чтобы подключиться к серверу из локальной среды. 

```bash
wget --no-check-certificate https://dl.cacerts.digicert.com/DigiCertGlobalRootCA.crt.pem
mysql -h mydemoserver.mysql.database.azure.com -u mydemouser -p --ssl=true --ssl-ca=DigiCertGlobalRootCA.crt.pem
```

Если вы выполнили подготовку гибкого сервера с использованием **открытого доступа**, вы также можете использовать [Azure Cloud Shell](https://shell.azure.com/bash) для подключения к гибкому серверу с помощью предустановленного клиента MySQL, как показано ниже:

Чтобы использовать Azure Cloud Shell для подключения к гибкому серверу, вам потребуется разрешить сетевой доступ из Azure Cloud Shell к гибкому серверу. Для этого можно перейти в колонку **Сеть** на портале Azure для гибкого сервера MySQL, установить флажок для параметра "Разрешить открытый доступ от любой службы Azure к этому серверу" в разделе **Брандмауэр** и нажать кнопку "Сохранить".

> [!NOTE]
> Устанавливайте флажок **Разрешить открытый доступ от любой службы Azure к этому серверу** только для целей разработки и тестирования. Он настраивает брандмауэр таким образом, чтобы разрешить подключения от IP-адресов, выделенных любой службе или ресурсу Azure, включая подключения из подписок других клиентов.

Щелкните **Попробовать**, чтобы запустить Azure Cloud Shell и воспользоваться следующими командами для подключения к гибкому серверу. В этой команде укажите фактические значения имени сервера, имени пользователя и пароля. 

```azurecli-interactive
wget --no-check-certificate https://dl.cacerts.digicert.com/DigiCertGlobalRootCA.crt.pem
mysql -h mydemoserver.mysql.database.azure.com -u mydemouser -p --ssl=true --ssl-ca=DigiCertGlobalRootCA.crt.pem
```

Если вы видите следующее сообщение об ошибке при подключении к гибкому серверу (после выполнения команды ранее), вы не настроили правило брандмауэра с помощью упомянутого ранее параметра "Разрешить общий доступ от любой службы Azure к этому серверу" или не сохранили этот параметр. Настройте брандмауэр и повторите попытку.

ОШИБКА 2002 (HY000): Can't connect to MySQL server on <servername> (115) (Не удалось подключиться к серверу MySQL по адресу)

## <a name="clean-up-resources"></a>Очистка ресурсов
Вы создали гибкий сервер Базы данных Azure для MySQL в группе ресурсов. Если вы ожидаете, что в будущем эти ресурсы вам не понадобятся, их можно удалить, удалив группу ресурсов или сам сервер MySQL. Чтобы удалить группу ресурсов, выполните следующие шаги.

1. Войдите на портал Azure; найдите в поиске и выберите **Группы ресурсов**.
1. В списке групп ресурсов выберите имя группы ресурсов.
1. На странице **Обзор** для группы ресурсов выберите **Удалить группу ресурсов**.
1. В диалоговом окне подтверждения введите имя группы ресурсов и щелкните **Удалить**.

Чтобы удалить сервер, нажмите кнопку **Удалить** на странице **Обзор** для этого сервера, как показано ниже:

> [!div class="mx-imgBorder"]
> :::image type="content" source="./media/quickstart-create-server-portal/delete-server.png" alt-text="Снимок экрана: удаление сервера":::.

## <a name="next-steps"></a>Следующие шаги

> [!div class="nextstepaction"]
> [Создание веб-приложения PHP (Laravel) с использованием MySQL](tutorial-php-database-app.md)
