---
title: Обзор гибкого сервера Базы данных Azure для MySQL
description: Узнайте о гибком сервере Базы данных Azure для MySQL, службе реляционной базы данных в облаке Microsoft на основе MySQL Community Edition.
author: savjani
ms.service: mysql
ms.author: pariks
ms.custom: mvc
ms.topic: overview
ms.date: 8/21/2020
ms.openlocfilehash: 7841affc7a8988cb113af3b728ae117093000011
ms.sourcegitcommit: d49bd223e44ade094264b4c58f7192a57729bada
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/02/2021
ms.locfileid: "99257463"
---
# <a name="azure-database-for-mysql---flexible-server-preview"></a>Гибкий сервер Базы данных Azure для MySQL (предварительная версия)

База данных Azure для MySQL на базе MySQL Community Edition доступна в двух режимах развертывания:
- Одиночный сервер 
- Гибкий сервер (предварительная версия)

В этой статье приводится обзор и основные понятия модели развертывания гибкого сервера. Сведения о том, как решить, какой вариант развертывания подходит для вашей рабочей нагрузки, см. в статье [Выбор подходящего варианта для сервера MySQL в Azure](./../select-right-deployment-type.md).

## <a name="overview"></a>Обзор

Гибкий сервер Базы данных Azure для MySQL — это полностью управляемая служба базы данных, призванная обеспечить более детализированный контроль и гибкость функций управления базами данных и параметров конфигурации. Как правило, эта служба обеспечивает лучшую гибкость и настройку конфигурации сервера на основе требований пользователей. Архитектура гибкого сервера позволяет обеспечивать высокий уровень доступности в пределах одной или нескольких зон доступности. Гибкие серверы также предоставляют больше возможностей для оптимизации затрат, позволяя останавливать и запускать сервер и номера SKU с накапливаемыми ресурсами. Это идеально подходит для рабочих нагрузок, не требующих постоянной работы с полной нагрузкой на вычислительные ресурсы. В настоящее время служба поддерживает версии сообщества MySQL 5.7. Сейчас служба доступна в режиме предварительной версии во многих [регионах Azure](https://azure.microsoft.com/global-infrastructure/services/).

Гибкие серверы обеспечивают: 
- разработку приложений, которым требуются лучшие возможности управления и настройки;
- высокий уровень доступности с избыточностью в пределах зоны;
- управляемые периоды обслуживания.

![Концептуальная схема гибкого сервера](media/overview/1-flexible-server-conceptual-diagram.png) 

## <a name="high-availability-within-and-across-availability-zones"></a>Высокий уровень доступности в пределах зон доступности и между ними

Модель развертывания гибкого сервера позволяет обеспечивать высокий уровень доступности в пределах одной или нескольких зон доступности. В этой архитектуре ресурсы вычислений и хранилища разделены. Ядро СУБД работает на виртуальной машине, а файлы данных находятся в службе хранилища Azure. Хранилище поддерживает три локально избыточные синхронные копии файлов базы данных, гарантирующие устойчивость данных в любое время. 

В рамках одной зоны доступности, если сервер выходит из строя из-за запланированных или незапланированных событий, служба поддерживает высокий уровень доступности серверов, используя следующую автоматическую процедуру:

1. Будет подготовлена новая виртуальная машина для вычислений.
2. Хранилище с файлами данных сопоставляется с новой виртуальной машиной.
3. Ядро СУБД MySQL переходит в режим "в сети" на новой виртуальной машине.
4. Клиентские приложения могут повторно подключаться после того, как сервер будет готов к приему подключений.
   
:::image type="content" source="media/overview/2-flexible-server-architecture.png" alt-text="Концептуальная схема высокого уровня доступности в рамках одной зоны"::: 

Если настроен высокий уровень доступности с избыточностью в пределах зоны, служба подготавливает и обслуживает сервер горячей замены в зоне доступности в одном и том же регионе Azure. Изменения данных на исходном сервере синхронно реплицируются на резервный сервер во избежание потери данных. При повышении уровня доступности с избыточностью в пределах зоны после запуска планового или внепланового события отработки отказа резервный сервер немедленно переходит в оперативный режим и становится доступным для обработки входящих транзакций. Типичное время отработки отказа составляет от 60 до 120 секунд. Это позволяет службе поддерживать высокий уровень доступности и обеспечивает повышенную отказоустойчивость к отдельным сбоям в зоне доступности в заданном регионе Azure. 

Дополнительные сведения см. в документации с [основными понятиями высокого уровня доступности](concepts-high-availability.md).

:::image type="content" source="media/overview/3-flexible-server-overview-zone-redundant-ha.png" alt-text="Концептуальная схема высокой доступности с избыточностью в пределах зоны"::: 

## <a name="automated-patching-with-managed-maintenance-window"></a>Автоматизированное исправление с управляемым периодом обслуживания

Служба выполняет автоматическую установку исправлений, Установка исправлений включает обновления для системы безопасности и программного обеспечения. Для ядра MySQL в рамках планового обслуживания также включены обновления дополнительных версий. Пользователи могут настроить расписание исправлений, управляемое системой, или задать собственное расписание. В течение запланированного обслуживания устанавливается исправление, и для завершения обновления может потребоваться перезапустить сервер в рамках процесса исправления. С помощью настраиваемого расписания пользователи могут сделать цикл исправлений прогнозируемым и выбрать период обслуживания с минимальным влиянием на бизнес-процессы. Как правило, служба придерживается графика ежемесячных выпусков в рамках непрерывной интеграции и выпуска.

Дополнительные сведения см. в статье [Запланированное обслуживание на гибком сервере Базы данных Azure для MySQL](concepts-maintenance.md). 

## <a name="automatic-backups"></a>Автоматическое резервное копирование

Служба гибкого сервера автоматически создает резервные копии и сохраняет их в локально избыточном или геоизбыточном хранилище, настроенном пользователем. Резервные копии можно использовать для восстановления сервера на любой момент в течение периода хранения резервной копии. По умолчанию срок хранения резервных копий составляет 7 дней. Хранение можно дополнительно продлить на срок до 35 дней. Все резервные копии шифруются с помощью 256-битового шифрования AES. 

Дополнительные сведения см. в документации с [основными понятиями о резервном копировании](concepts-backup-restore.md).

## <a name="network-isolation"></a>Сетевая изоляция

У вас есть два сетевых параметра для подключения к Гибкому серверу Базы данных Azure для MySQL. Вы можете выбрать **частный доступ (интеграция с виртуальной сетью)** или **общий доступ (разрешенные IP-адреса)** . 

* **Частный доступ (интеграция с виртуальной сетью)** . Вы можете развернуть гибкий сервер в [виртуальной сети Azure](../../virtual-network/virtual-networks-overview.md). Виртуальные сети Azure используют частное и безопасное сетевое подключение. Это позволит ресурсам в виртуальной сети взаимодействовать через частные IP-адреса.

   Выберите вариант интеграции с виртуальной сетью, если вам нужны следующие возможности.
   * Подключение из ресурсов Azure в той же виртуальной сети к гибкому серверу с помощью частных IP-адресов.
   * Использование VPN или ExpressRoute для подключения к гибкому серверу со стороны ресурсов, не относящихся к Azure.
   * Отсутствие общедоступной конечной точки

* **Общий доступ (разрешенные IP-адреса)** . Вы можете развернуть гибкий сервер с помощью общедоступной конечной точки. Общедоступная конечная точка — это общедоступный DNS-адрес. Фраза "разрешенные IP-адреса" относится к диапазону IP-адресов, который вы выбрали для предоставления разрешения на доступ к серверу. Эти разрешения называются **правилами брандмауэра**.

Дополнительные сведения см. в документации с [общими понятиями о сети](concepts-networking.md).

## <a name="adjust-performance-and-scale-within-seconds"></a>Быстрая настройка производительности и масштабирования

Служба гибкого сервера предоставляется с тремя уровнями номеров SKU: "С накапливаемыми ресурсами", "Общего назначения" и "Оптимизированная для операций в памяти". Вариант "С накапливаемыми ресурсами" лучше всего подходит для экономичной разработки и небольших рабочих нагрузок, для которых не требуется непрерывная полная вычислительная мощность. Варианты "Общего назначения" и "Оптимизированная для операций в памяти" лучше подходят для рабочих нагрузок, в которых требуются высокая степень параллелизма, масштабирование и прогнозируемая производительность. Вы можете создать свое первое приложение в небольшой базе данных за несколько долларов в месяц, а затем изменить масштаб в соответствии с потребностями решения. Масштабирование хранилища выполняется без прерывания работы, в том числе с поддержкой автоматического расширения. Благодаря динамической масштабируемости база данных может прозрачно реагировать на быстро меняющиеся требования к ресурсам. Вы платите только за те ресурсы, которые используете. 

Дополнительные сведения см. в документации с [общими понятиями о вычислениях и хранилище](concepts-compute-storage.md).

## <a name="scale-out-your-read-workload-with-up-to-10-read-replicas"></a>Масштабирование рабочей нагрузки чтения, используя до 10 реплик чтения

MySQL является популярным ядром базы данных для поддержки мобильных и веб-приложений в Интернете. Многие наши клиенты используют его для образовательных веб-служб, служб потоковой передачи видео, решений для цифровых платежей, платформ торговли по Интернету, игр, порталов новостей, а также веб-сайтов государственных учреждений и здравоохранения. Эти службы нужны для обслуживания и масштабирования по мере роста трафика в мобильных и веб-приложениях.

На стороне приложений приложение обычно разрабатывается на Java или php и переносится для запуска в  [масштабируемые наборы виртуальных машин Azure](../../virtual-machine-scale-sets/overview.md) , [Службы приложений Azure](../../app-service/overview.md) или контейнеризуется для выполнения в  [Службе Azure Kubernetes (AKS)](../../aks/intro-kubernetes.md). Использование масштабируемого набора виртуальных машин, Службы приложений или AKS в качестве базовой инфраструктуры упрощает масштабирование приложений за счет мгновенной подготовки новых виртуальных машин и репликации компонентов приложений без отслеживания состояния обеспечения работы запросов. Однако в таком случае база данных становится централизованным компонентом отслеживания состояния, что часто делает ее узким местом.

Функция реплики чтения позволяет реплицировать данные с гибкого сервера Базы данных Azure для MySQL на сервер, предназначенный только для чтения. Вы можете реплицировать данные с исходного сервера на **максимум 10 реплик**. Реплики чтения асинхронно обновляются с помощью [технологии репликации на основе позиции файла собственного двоичного журнала (binlog) ядра MySQL](https://dev.mysql.com/doc/refman/5.7/en/replication-features.html). Вы можете использовать решение для прокси-сервера подсистемы балансировки нагрузки, например [ProxySQL](https://techcommunity.microsoft.com/t5/azure-database-for-mysql/load-balance-read-replicas-using-proxysql-in-azure-database-for/ba-p/880042), чтобы эффективно масштабировать рабочую нагрузку приложения для считывания реплик без затрат на рефакторинг. 

Подробные сведения см. в статье [Основные понятия реплик чтения](concepts-read-replicas.md). 


## <a name="stopstart-server-to-optimize-cost"></a>Запуск и остановка сервера для оптимизации затрат

Служба гибкого сервера позволяет останавливать и запускать сервер по запросу для снижения затрат. Выставление счетов за уровень вычислений немедленно прекращается при остановке сервера. Это позволяет значительно сократить затраты при разработке, тестировании и для прогнозируемых рабочих нагрузок с ограничением по времени. Сервер находится в остановленном состоянии в течение семи дней, если не будет перезапущен раньше. 

Дополнительные сведения см. в статье [Основные понятия работы с сервером в Базе данных Azure для MySQL (Гибкий сервер)](concept-servers.md). 

## <a name="enterprise-grade-security-and-privacy"></a>Безопасность и конфиденциальность корпоративного уровня

В службе гибкого сервера используется проверенный криптографический модуль с сертификацией FIPS 140-2 для шифрования неактивных данных. Шифруются все данные, включая резервные копии и временные файлы, создаваемые при выполнении запросов. Служба использует 256-разрядный шифр AES, включенный в шифрование службы хранилища Azure. Ключами управляет система (по умолчанию). 

Служба по умолчанию шифрует все перемещаемые данные с использованием протокола. Гибкие серверы поддерживают только зашифрованные подключения по протоколу TLS 1.2, а все входящие подключения с использованием TLS 1.0 и TLS 1.1 будут отклонены. 

Дополнительные сведения см. в документации по [использованию зашифрованного подключения к гибким серверам](https://docs.mongodb.com/manual/tutorial/configure-ssl).

Гибкие серверы предоставляют полностью частный доступ к серверам с помощью интеграции с [виртуальной сетью Azure](../../virtual-network/virtual-networks-overview.md). К серверам в виртуальной сети Azure можно подключиться только через частные IP-адреса. При интеграции с виртуальной сетью отклоняется общий доступ и к серверам нельзя подключиться с помощью общедоступных конечных точек. 

Дополнительные сведения см. в документации с [общими понятиями о сети](concepts-networking.md).


## <a name="monitoring-and-alerting"></a>Мониторинг и оповещения

Служба гибкого сервера оснащена встроенными функциями мониторинга производительности и оповещений. Все метрики Azure записываются ежеминутно, и каждая из них предоставляет данные за последние 30 дней. Вы можете настроить оповещения на основе метрик. Служба предоставляет метрики сервера узла для мониторинга использования ресурсов и позволяет настраивать журналы медленных запросов. С помощью этих средств можно быстро оптимизировать рабочие нагрузки и настроить оптимальную производительность сервера. 

Дополнительные сведения см. в документации с [общими понятиями о мониторинге](concepts-monitoring.md).

## <a name="migration"></a>Миграция

В этой службе работает версия MySQL виртуального сообщества. Это обеспечивает полную совместимость приложений и минимальные затраты на рефакторинг при переносе в службу отдельного сервера существующих приложений, разработанных для ядра СУБД MySQL. Миграцию на отдельный сервер можно выполнить любым из следующих способов.

- **Создание резервной копии и восстановление**. Для миграций в автономной среде, где допустим некоторый простой для пользователей, самым быстрым способом миграции будет создание резервной копии с последующим восстановлением, для которой применяются такие средства сообщества, как mysqldump/mydumper. Дополнительные сведения см. в статье "Миграция с использованием дампа и восстановления". 
- **Azure Database Migration Service**. Чтобы без проблем выполнить простую миграцию на отдельный сервер с минимальным временем простоя, можно применить [Azure Database Migration Service](../../dms/tutorial-mysql-azure-mysql-online.md). 

## <a name="azure-regions"></a>Регионы Azure

Одним из преимуществ выполнения рабочей нагрузки в Azure является глобальный доступ. На сегодня гибкий сервер для Базы данных Azure для MySQL доступен в следующих регионах Azure:

| Region | Доступность | Высокий уровень доступности, избыточный между зонами | 
| --- | --- | --- |
| Западная Европа | :heavy_check_mark: | :heavy_check_mark: |
| Северная Европа | :heavy_check_mark: | :heavy_check_mark: |
| южная часть Соединенного Королевства | :heavy_check_mark: | :x: | 
| восточная часть США 2 | :heavy_check_mark: | :heavy_check_mark: |
| Западная часть США 2 | :heavy_check_mark: | :heavy_check_mark: |
| Центральная часть США | :heavy_check_mark: | :x: | 
| Восточная часть США | :heavy_check_mark: | :heavy_check_mark: |
| Центральная Канада | :heavy_check_mark: | :x: | 
| Southeast Asia | :heavy_check_mark: | :heavy_check_mark: |
| Республика Корея, центральный регион | :heavy_check_mark: | :x: | 
| Japan East | :heavy_check_mark: | :x: | 
| Восточная Австралия | :heavy_check_mark: | :heavy_check_mark: |

Скоро будут добавлены и другие регионы.

## <a name="contacts"></a>Контакты
Если у вас возникли вопросы или предложения, связанные с использованием гибкого сервера Базы данных Azure для MySQL, вы можете отправить сообщение электронной почты команде разработчиков Базы данных Azure для MySQL ([@Ask Базы данных Azure для MySQL](mailto:AskAzureDBforMySQL@service.microsoft.com)). Учтите, что это не электронный адрес службы технической поддержки.

Кроме того, попробуйте обратиться сюда:

- Для обращения в службу поддержки Azure [отправьте запрос с портала Azure](https://portal.azure.com/?#blade/Microsoft_Azure_Support/HelpAndSupportBlade).
- Чтобы устранить проблему, связанную с учетной записью, отправьте [запрос в службу поддержки](https://ms.portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/newsupportrequest) на портале Azure.
- Чтобы отправить отзыв или отправить запрос на новые возможности, создайте запись через [UserVoice](https://feedback.azure.com/forums/597982-azure-database-for-mysql).

## <a name="next-steps"></a>Дальнейшие действия
Итак, вы завершили знакомство с режимом развертывания Базы данных Azure для MySQL с отдельным сервером и теперь готовы

- создать свой первый сервер. 
  - [Создание Базы данных Azure для MySQL (Гибкий сервер) с помощью портала Azure](quickstart-create-server-portal.md)
  - [Создание Базы данных Azure для MySQL (Гибкий сервер) с помощью Azure CLI](quickstart-create-server-cli.md)
  - [Управление гибким сервером Базы данных Azure для MySQL с помощью Azure CLI](how-to-manage-server-portal.md)

- Создание первого приложения на предпочитаемом языке:
  - [Python](connect-python.md)
  - [PHP](connect-php.md)
