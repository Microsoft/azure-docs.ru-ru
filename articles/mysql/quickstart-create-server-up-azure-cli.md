---
title: Краткое руководство. Создание Базы данных Azure для MySQL с помощью команды az mysql up
description: Краткое руководство по созданию сервера Базы данных Azure для MySQL с помощью команды Azure CLI (интерфейса командной строки) up.
author: savjani
ms.author: pariks
ms.service: mysql
ms.devlang: azurecli
ms.topic: quickstart
ms.date: 3/18/2020
ms.custom: mvc, devx-track-azurecli
ms.openlocfilehash: d89cc41ed26124ae4ad2e6689be6d59278c3d9da
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "94542173"
---
# <a name="quickstart-create-an-azure-database-for-mysql-using-a-simple-azure-cli-command---az-mysql-up-preview"></a>Краткое руководство. Создание Базы данных Azure для MySQL с помощью простой команды Azure CLI — az mysql up (предварительная версия)

> [!IMPORTANT]
> Команда Azure CLI [az mysql up](/cli/azure/ext/db-up/mysql#ext-db-up-az-mysql-up) находится в предварительной версии.

База данных Azure для MySQL — это управляемая служба, которая позволяет вам запускать, администрировать и масштабировать высокодоступные базы данных MySQL в облаке. Azure CLI используется для создания ресурсов Azure и управления ими из командной строки или с помощью скриптов. В этом кратком руководстве описывается, как с помощью команды [az mysql up](/cli/azure/ext/db-up/mysql#ext-db-up-az-mysql-up) создать сервер Базы данных Azure для MySQL, используя Azure CLI. Кроме сервера, команда `az mysql up` создает пример базы данных, привилегированного пользователя в базе данных, открывает брандмауэр для служб Azure и создает правила брандмауэра по умолчанию для клиентского компьютера. Это позволяет ускорить процесс разработки.

## <a name="prerequisites"></a>Предварительные требования

Если у вас еще нет подписки Azure, создайте [бесплатную](https://azure.microsoft.com/free/) учетную запись Azure, прежде чем начинать работу.

Для этой статьи требуется запустить локально Azure CLI версии 2.0 или более поздней. Чтобы узнать, какая установлена версия, выполните команду `az --version`. Если вам необходимо выполнить установку или обновление, см. статью [Установка Azure CLI 2.0](/cli/azure/install-azure-cli).

Вам потребуется выполнить вход в учетную запись с помощью команды [az login](/cli/azure/authenticate-azure-cli). Запишите свойство **id** из выходных данных команды для соответствующего имени подписки.

```azurecli
az login
```

Если вы используете несколько подписок, выберите соответствующую, в которой за ресурс будет взиматься плата. Выберите конкретный идентификатор подписки вашей учетной записи, выполнив команду [az account set](/cli/azure/account). Подставьте свойство **subscription ID** из выходных данных **az login** для своей подписки в заполнитель для идентификатора подписки.

```azurecli
az account set --subscription <subscription id>
```

## <a name="create-an-azure-database-for-mysql-server"></a>Создайте сервер базы данных Azure для MySQL.

Чтобы использовать команды, установите расширение [db-up](/cli/azure/ext/db-up). Если возникает ошибка, убедитесь, что вы установили последнюю версию Azure CLI. Дополнительные сведения см. в статье [Установка Azure CLI](/cli/azure/install-azure-cli).

```azurecli
az extension add --name db-up
```

Создайте сервер Базы данных Azure для MySQL с помощью следующей команды.

```azurecli
az mysql up
```

Сервер создается с приведенными ниже значениями по умолчанию (если вы вручную их не переопределите).

**Параметр** | **Значение по умолчанию** | **Описание**
---|---|---
server-name | Генерируемое системой | Уникальное имя, которое определяет базу данных Azure для сервера MySQL.
resource-group | Генерируемое системой | Новая группа ресурсов Azure.
sku-name | GP_Gen5_2 | Имя номера SKU. В сокращенной записи соответствует схеме {ценовая категория}\_{поколение вычислительных ресурсов}\_{число виртуальных ядер}. По умолчанию — это сервер общего назначения 5-го поколения с 2 виртуальными ядрами. Сведения об уровнях можно получить на [странице расценок](https://azure.microsoft.com/pricing/details/mysql/).
backup-retention | 7 | Срок хранения резервной копии. Указывается в днях.
geo-redundant-backup | Выключено | Позволяет включить или отключить создание геоизбыточных резервных копий для этого сервера.
location | westus2 | Расположение сервера в Azure.
ssl-enforcement | Активировано | Позволяет включить или отключить SSL для этого сервера.
storage-size | 5120 | Объем хранилища сервера (в мегабайтах).
version | 5.7 | Основной номер версии MySQL.
admin-user | Генерируемое системой | Имя для входа администратора.
admin-password | Генерируемое системой | Пароль администратора.

> [!NOTE]
> Дополнительные сведения о команде `az mysql up` и ее дополнительных параметрах см. в [документации по Azure CLI](/cli/azure/ext/db-up/mysql#ext-db-up-az-mysql-up).

Сервер создается со следующими параметрами.

- Создается правило брандмауэра devbox. Azure CLI пытается определить IP-адрес компьютера, с которого выполняется команда `az mysql up`, и разрешает доступ к этому IP-адресу.
- Параметру "Разрешить доступ к службам Azure" задано значение "Вкл." Этот параметр настраивает брандмауэр сервера на прием подключений от всех ресурсов Azure, включая ресурсы вне вашей подписки.
- Параметру `wait_timeout` присвоено значение 8 часов.
- Создается пустая база данных с именем sampledb.
- В sampledb создается привилегированный пользователь с именем root.

> [!NOTE]
> База данных Azure для MySQL обменивается данными через порт 3306. При подключении из корпоративной сети исходящий трафик через порт 3306 может быть запрещен брандмауэром сети. Чтобы подключиться к серверу, ваш ИТ-отдел должен открыть порт 3306.

## <a name="get-the-connection-information"></a>Получение сведений о подключении

После выполнения команды `az mysql up` вам возвращается список строк подключения для распространенных языков программирования. Эти строки подключения предварительно настроены с использованием определенных атрибутов созданного сервера Базы данных Azure для MySQL.

Чтобы еще раз перечислить строки подключения, вы можете использовать команду [az mysql show-connection-string](/cli/azure/ext/db-up/mysql#ext-db-up-az-mysql-show-connection-string).

## <a name="clean-up-resources"></a>Очистка ресурсов

Очистите все ресурсы, созданные при работе с кратким руководством, с помощью следующей команды. Эта команда удаляет сервер Базы данных Azure для MySQL и группу ресурсов.

```azurecli
az mysql down --delete-group
```

Если вы хотите удалить только созданный сервер, выполните команду [az mysql down](/cli/azure/ext/db-up/mysql#ext-db-up-az-mysql-down).

```azurecli
az mysql down
```

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Проектирование первой базы данных Azure для MySQL](./tutorial-design-database-using-cli.md)
