---
title: Рекомендации по производительности — база данных Azure для MySQL
description: В этой статье описываются рекомендации по мониторингу и настройке производительности для базы данных Azure для MySQL.
author: mksuni
ms.author: sumuth
ms.service: mysql
ms.topic: conceptual
ms.date: 11/23/2020
ms.openlocfilehash: 30176e2df850e6d2794ab9c1542bcb6a89d8f89f
ms.sourcegitcommit: aaa65bd769eb2e234e42cfb07d7d459a2cc273ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/27/2021
ms.locfileid: "98880412"
---
# <a name="best-practices-for-optimal-performance-of-your-azure-database-for-mysql---single-server"></a>Рекомендации по оптимальной производительности базы данных Azure для MySQL — одиночный сервер

Узнайте о рекомендациях по повышению производительности при работе с базой данных Azure для MySQL — Single Server. По мере добавления новых возможностей на платформу мы будем продолжать уточнять рекомендации, описанные в этом разделе.

## <a name="physical-proximity"></a>Физическое сходство

 Убедитесь, что приложение и база данных развернуты в одном регионе. Быстрая проверка перед запуском любого теста производительности заключается в определении задержки сети между клиентом и базой данных с помощью простого запроса SELECT 1. 

## <a name="accelerated-networking"></a>Ускорение работы в сети

Используйте ускоренную сеть для сервера приложений, если вы используете виртуальную машину Azure, Azure Kubernetes или службы приложений. Функция ускорения работы в сети позволяет использовать виртуализацию ввода-вывода с единым корнем (SR-IOV), повышая тем самым производительность сети виртуальной машины. Этот высокопроизводительный метод обеспечивает обход узла на пути к данным, что уменьшает задержку, дрожание и нагрузку ЦП. Он предназначен для ресурсоемких рабочих нагрузок сети на виртуальных машинах поддерживаемых типов.

## <a name="connection-efficiency"></a>Эффективность подключения

Установка нового соединения всегда является дорогостоящей и трудоемкой задачей. Когда приложение запрашивает подключение к базе данных, оно определяет приоритет выделения существующих бездействующих подключений к базе данных, а не создает новый.  Ниже приведены некоторые параметры для оптимальных методов подключения.

- **Проксискл**. Используйте [проксискл](https://proxysql.com/) , который предоставляет встроенные пулы подключений и [распределяет нагрузку](https://techcommunity.microsoft.com/t5/azure-database-for-mysql/load-balance-read-replicas-using-proxysql-in-azure-database-for/ba-p/880042) по нескольким репликам чтения, как это необходимо по запросу, с любыми изменениями в коде приложения.

- **Прокси-сервер данных Heimdall**. Кроме того, можно также использовать прокси-сервер данных Heimdall — специализированное прокси-решение, не зависящее от поставщика. Он поддерживает кэширование запросов и разделение чтения и записи с обнаружением задержки репликации. Вы также можете обратиться к статье [ускорение производительности MySQL с помощью прокси-сервера Heimdall](https://techcommunity.microsoft.com/t5/azure-database-for-mysql/accelerate-mysql-performance-with-the-heimdall-proxy/ba-p/1063349).  

- **Постоянное или Long-Livedное подключение**: Если приложение содержит короткие транзакции или запросы, обычно с временем выполнения < 5-10 мс, замените короткие подключения на постоянные подключения. Замена коротких соединений на постоянные подключения требует лишь незначительных изменений в коде, но он оказывает значительное влияние в плане повышения производительности во многих типичных сценариях приложений. Не забудьте установить время ожидания или закрыть соединение по завершении транзакции.

- **Реплика**. Если вы используете реплику, используйте [проксискл](https://proxysql.com/) для балансировки нагрузки между сервером-источником и доступным для чтения сервером вторичной реплики. Узнайте [, как настроить проксискл](https://techcommunity.microsoft.com/t5/azure-database-for-mysql/scaling-an-azure-database-for-mysql-workload-running-on/ba-p/1105847).

## <a name="data-import-configurations"></a>Конфигурации импорта данных

- Можно временно масштабировать экземпляр до более высокого размера SKU перед началом операции импорта данных, а затем масштабировать его после успешного завершения импорта.
- Вы можете импортировать данные с минимальным временем простоя с помощью [Azure Database Migration Service (DMS)](https://datamigration.microsoft.com/) для оперативной или автономной миграции. 

## <a name="azure-database-for-mysql-memory-recommendations"></a>Рекомендации по использованию памяти базой данных Azure для MySQL

Для обеспечения производительности базы данных Azure для MySQL рекомендуется выделить достаточно ОЗУ, чтобы рабочий набор находился почти полностью в памяти. 

- Проверьте, используется ли процент использования памяти для достижения [лимитов](./concepts-pricing-tiers.md) с помощью [метрик для сервера MySQL](./concepts-monitoring.md). 
- Настройте оповещения по таким числам, чтобы гарантировать, что по мере того, как серверы будут превышены, можно предпринять действия по приглашению для их исправления. В зависимости от определенных ограничений проверьте, масштабируется ли размер SKU базы данных — либо до более высокого размера вычислений, либо до лучшей ценовой категории, что приводит к значительному увеличению производительности. 
- Увеличение масштаба до тех пор, пока номера производительности больше не будут значительно удалены после операции масштабирования. Сведения о мониторинге метрик экземпляра базы данных см. в разделе [метрики базы данных MySQL](./concepts-monitoring.md#metrics).

## <a name="next-steps"></a>Дальнейшие действия

- [Рекомендации по работе сервера с базой данных Azure для MySQL](concept-operation-excellence-best-practices.md) <br/>
- [Рекомендации по мониторингу базы данных Azure для MySQL](concept-monitoring-best-practices.md)<br/>
- [Приступая к работе с базой данных Azure для MySQL](quickstart-create-mysql-server-database-using-azure-portal.md)<br/>