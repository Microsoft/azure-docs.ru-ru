---
title: Оптимизация инвестиций в облако с помощью Управления затратами Azure
description: Эта статья поможет извлечь максимальную выгоду из инвестиций в облако, сократить затраты и оценить, на что тратятся ваши деньги.
author: bandersmsft
ms.author: banders
ms.date: 05/27/2020
ms.topic: conceptual
ms.service: cost-management-billing
ms.subservice: cost-management
ms.reviewer: adwise
ms.custom: seodec18
ms.openlocfilehash: fc9b6c4edc5d08c30b1eadb5084155b10d0e55a3
ms.sourcegitcommit: fc401c220eaa40f6b3c8344db84b801aa9ff7185
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/20/2021
ms.locfileid: "98601506"
---
# <a name="how-to-optimize-your-cloud-investment-with-azure-cost-management"></a>Как оптимизировать инвестиции в облако с помощью службы "Управление затратами Azure"

Служба "Управление затратами Azure" предоставляет средства для планирования, анализа и сокращения расходов, позволяющие максимизировать инвестиции в облачную среду. В этом документе рассматривается методический подход к управлению затратами и приведен обзор инструментов, помогающих решить сложности с сокращением затрат в вашей организации. Azure упрощает создание и развертывание облачных решений. Однако важно, чтобы эти решения были оптимизированы для минимизации затрат в организации. Следуя принципам, изложенным в этом документе, и используя наши инструменты, вы сможете обеспечить эффективную работу своей организации.

## <a name="methodology"></a>Методика

Управление затратами является организационной проблемой. Его нужно выполнять на постоянной основе, прежде чем тратить деньги на облачные ресурсы. Чтобы успешно внедрить управление затратами и оптимизировать затраты, в вашей организации:

- должна быть настроена эффективная работа с применением надлежащих инструментов;
- должны быть назначены ответственные за расходы;
- должны приниматься соответствующие меры для оптимизации расходов.

Чтобы обеспечить успешное управление затратами, в вашей организации должна быть налажена работа трех описанных ниже ключевых групп.

- **Финансисты**. Сотрудники, отвечающие за одобрение запросов на финансирование во всей организации на основе прогнозов расходов на облако. Они оплачивают соответствующие счета и назначают часть бюджета различным командам для обеспечения подотчетности.
- **Менеджеры**. Сотрудники, принимающие решения в организации, которые должны понимать расходы на облако для их оптимизации.
- **Команды разработки приложений**. Инженеры, управляющие облачными ресурсами на ежедневной основе, которые разрабатывают службы для удовлетворения потребностей организации. Эти команды нуждаются в гибкости, чтобы обеспечить максимальную отдачу от предоставленного бюджета.

### <a name="key-principles"></a>Ключевые принципы

Приведенные ниже принципы помогут вам реализовать эффективное управление расходами на облачные вычисления в вашей организации.

Чтобы получить дополнительные сведения, см. в видео о [настройке службы "Управление затратами" для успешной работы](https://www.youtube.com/watch?v=dVuwITdSAZ4). Чтобы просмотреть другие видео, посетите канал YouTube, посвященный [службе "Управление затратами"](https://www.youtube.com/c/AzureCostManagement).

>[!VIDEO https://www.youtube.com/embed/dVuwITdSAZ4]

#### <a name="planning"></a>Планирование

Комплексное предварительное планирование позволяет адаптировать использование облака к конкретным бизнес-требованиям. Задайте себе вопрос:

- Какую бизнес-проблему я решаю?
- Какие схемы использования предполагаются для моих ресурсов?

Ваши ответы помогут выбрать предложения, которые подходят именно вам. Они определяют инфраструктуру и метод ее использования для повышения эффективности потребления ресурсов Azure.

#### <a name="visibility"></a>Видимость

При должном структурировании служба "Управление затратами" помогает вам информировать персонал о расходах на службы Azure, за которые они несут ответственность, или о средствах, которые они тратят. Azure предлагает службы, которые помогают понять, *на что* тратятся ваши деньги. Воспользуйтесь преимуществами этих средств. Они могут помочь вам найти ресурсы, которые недостаточно используются, удалить ненужные ресурсы и максимизировать возможности экономии.

#### <a name="accountability"></a>Система отчетности

Распределите затраты по командам в организации, чтобы соответствующие сотрудники отвечали за расходы своей команды. Чтобы полностью понять расходы своей организации на Azure, нужно организовать свои ресурсы более очевидным образом с точки зрения затрат. Хороший механизм организации помогает управлять расходами и сокращать их, а также назначать сотрудников, ответственных за эффективное расходование средств в компании.

#### <a name="optimization"></a>Optimization

Примите меры, чтобы сократить свои расходы. Анализируйте аналитические сведения, полученные за счет планирования и повышения прозрачности расходов. Рассмотрите возможность оптимизации покупок и лицензирования, а также изменений развертывания инфраструктуры, которые подробно рассматриваются ниже в этом документе.

#### <a name="iteration"></a>Итерация

Все в вашей организации должны участвовать в жизненном цикле управления затратами. Сотрудникам необходимо постоянно участвовать в оптимизации расходов. Будьте внимательны по отношению к этому итеративному процессу и сделайте его ключевым для управления расходами на облако в своей организации.

![Схема, на которой показаны основные принципы (видимость, система отчетности и оптимизация)](./media/cost-mgt-best-practices/principles.png)

## <a name="plan-with-cost-in-mind"></a>Планирование с учетом стоимости

Прежде чем развертывать облачные ресурсы, оцените следующие пункты:

- Предложение Azure, которое наилучшим образом отвечает вашим потребностям.
- Ресурсы, которые вы планируете использовать.
- Сколько они могут стоить.

Azure предоставляет средства, помогающие с процессом оценки. Средства могут дать вам хорошее представление об инвестициях, необходимых для выполнения ваших рабочих нагрузок. Затем вы можете выбрать наилучшую конфигурацию для своей ситуации.

### <a name="azure-onboarding-options"></a>Варианты подключения к Azure

Начиная работать со службой "Управление затратами", нужно изучить предложения Azure и определить наиболее подходящее для вас. Подумайте о том, как вы планируете использовать Azure в будущем. Также необходимо рассмотреть модель выставления счетов, которую нужно настроить. При принятии решения учитывайте следующие вопросы:

- Как долго вы планируете использовать Azure? Вы тестируете или планируете построить долгосрочную инфраструктуру?
- Как вы планируете платить за использование Azure? Вы планируете выполнять предоплату по заниженной цене или оплачивать счет в конце месяца?

Дополнительные сведения о различных вариантах приобретения Azure см. на [этой странице](https://azure.microsoft.com/pricing/purchase-options/). Ниже приведены некоторые из наиболее распространенных моделей выставления счетов.

#### <a name="free"></a>[Бесплатный](https://azure.microsoft.com/free/)

- 12 месяцев использования популярных бесплатных служб.
- 200 долл. США на счете для работы со службами в течение 30 дней.
- Более 25 служб, которые всегда предоставляются бесплатно.

#### <a name="pay-as-you-go"></a>[Оплата по мере использования](https://azure.microsoft.com/offers/ms-azr-0003p)

- Отсутствие минимальных платежей и обязательств.
- Конкурентные цены.
- Оплата по мере использования
- Отмена в любое время.

#### <a name="enterprise-agreement"></a>[Соглашение Enterprise](https://azure.microsoft.com/pricing/enterprise-agreement/)

- Варианты предоплаты Azure (прежнее название — денежное обязательство)
- Доступ к сниженным ценам на предложения Azure.

#### <a name="azure-in-csp"></a>[Azure в CSP](https://azure.microsoft.com/offers/ms-azr-0145p/)

- Партнеры CSP выполняют роль первой точки контакта по удовлетворению потребностей своих клиентов и центра отношений с клиентами.
- Партнеры CSP обеспечивают подготовку новых клиентов, заказывают подписки, управляют ими и выполняют административные задачи от имени своих клиентов.
- Партнеры CSP поставляют службы вместе с уникальными решениями или перепродают доступ к службам Azure с модифицированными ценами, условиями оплаты и выставления счетов.

## <a name="estimate-the-cost-of-your-solution"></a>Оценка затрат на решения

Прежде чем развертывать инфраструктуру, оцените, сколько будет стоить ваше решение. Так вы сможете заранее сформировать бюджет для рабочей нагрузки вашей организации. Затем вы сможете сравнить предположительный и фактический бюджеты, чтобы проверить правильность своей первоначальной оценки. И вы можете сравнить предположения с фактической стоимостью развернутого решения.

### <a name="azure-pricing-calculator"></a>Калькулятор цен Azure

Калькулятор цен Azure позволяет вам смешивать и сопоставлять различные комбинации служб Azure, чтобы увидеть смету расходов. Вы можете реализовать свое решение в Azure различными способами: каждый может повлиять на общие расходы. Заранее думая обо всех требованиях к инфраструктуре в рамках облачного развертывания, вы сможете использовать инструмент наиболее эффективно. Так вы сможете получить точную оценку своих предполагаемых расходов в Azure.

Дополнительные сведения см. на странице [калькулятора цен Azure](https://azure.microsoft.com/pricing/calculator).

### <a name="azure-migrate"></a>Служба "Миграция Azure"

Миграция Azure — это служба, которая оценивает текущие рабочие нагрузки вашей организации в локальных центрах обработки данных. Она дает вам представление о том, что вам может понадобиться в альтернативном решении Azure. Во-первых, служба миграции анализирует ваши локальные компьютеры, чтобы определить, возможна ли миграция. Затем она рекомендует размер виртуальной машины в Azure для обеспечения максимальной производительности. Наконец, она также подсчитывает затраты на решение на основе Azure.

Дополнительные сведения см. на странице [Сведения о службе "Миграция Azure"](../../migrate/migrate-services-overview.md).

## <a name="analyze-and-manage-your-costs"></a>Анализ и управление затратами

Следите за тем, как затраты в вашей организации меняются со временем. Приведенные ниже методы помогут вам правильно понимать свои расходы и управлять ими.

### <a name="organize-resources-to-maximize-cost-insights-and-accountability"></a>Упорядочение ресурсов для максимальной эффективности анализа затрат и системы отчетности

Если структура выставления счетов для Azure и иерархия ресурсов хорошо спланированы, вы получите хорошее представление о затратах и сможете управлять ими при создании облачной инфраструктуры. Просмотрите видео [Настройка иерархий объектов](https://www.youtube.com/watch?v=n3TLRaYJ1NY), чтобы получить более полное представление о доступных средствах организации ресурсов и о том, как их использовать. Чтобы просмотреть другие видео, посетите канал YouTube, посвященный [службе "Управление затратами"](https://www.youtube.com/c/AzureCostManagement).

>[!VIDEO https://www.youtube.com/embed/n3TLRaYJ1NY]

При оценке и создании иерархии задайте себе следующие вопросы.

*Какая иерархия выставления счетов доступна мне и какие области я могу использовать?*

Определите тип предложения Azure, который вам нужен. Так вы узнаете, как будут выставляться счета для вашей организации. Области, доступные для конкретного типа выставления счетов Azure, описаны в статье [Общие сведения об областях и работа с ними](understand-work-scopes.md).

*Если у меня несколько команд, как организовать подписки и группы ресурсов?*

Очень часто для каждой команды создаются отдельные подписки или группы ресурсов. Это помогает четко разделить затраты и обеспечить отчетность каждой группы. Обратите внимание, что затраты привязываются к подписке или группе ресурсов.

Если у вас есть команды, у которых несколько подписок, вы можете объединить подписки для каждой команды в группу управления, чтобы анализировать затраты команды совместно. Группы управления, подписки и группы ресурсов входят в иерархию Azure RBAC. Используйте их совместно, чтобы управлять доступом в командах.

Ресурсы могут охватывать несколько областей, особенно если этими ресурсами пользуются несколько команд или если они используются для нескольких рабочих нагрузок. Вы можете присвоить ресурсам теги, чтобы проще различать их. Подробнее о тегах рассказывается в следующем разделе.

*Есть ли у меня рабочая среда и среда разработки?*

Вы можете снизить затраты, воспользовавшись подписками для разработки и тестирования. Если рабочие нагрузки охватывают несколько команд или областей Azure, вы можете присвоить им теги, чтобы проще различать эти нагрузки.

### <a name="tag-shared-resources"></a>Присвоение тегов общим ресурсам

Теги — это удобный способ определить затраты, которые приходятся на несколько команд или областей Azure. Например, у вас может быть почтовый сервер, которым пользуются многие команды. Вы можете разместить общие ресурсы, например свой почтовый сервер, в подписке, выделенной для общих ресурсов, или разместить их в существующей подписке. Если поместить их в существующую подписку, для владельца подписки может быть неудобно то, что затраты на общие ресурсы прибавляются к ежемесячным затратам его команды. В таком случае можно использовать тег, чтобы обозначить ресурс как общий, а не принадлежащий команде.

Или же у вас могут быть веб-приложения или среды, например тестовая или рабочая среда, которые используют ресурсы нескольких подписок, принадлежащих разным командам. Чтобы правильно идентифицировать затраты на рабочие нагрузки, вы можете присвоить теги их ресурсам. Если теги применены правильно, их можно использовать в качестве фильтров при анализе затрат, что поможет выявить тенденции в затратах.

Если вы решили использовать теги, вы можете настроить политику Azure для принудительного присвоения тегов ресурсам. В видео о [просмотре политик тегов с помощью службы "Управление затратами Azure"](https://www.youtube.com/watch?v=nHQYcYGKuyw) описаны инструменты для масштабируемого принудительного присвоения тегов ресурсам. Чтобы просмотреть другие видео, посетите канал YouTube, посвященный [службе "Управление затратами"](https://www.youtube.com/c/AzureCostManagement).

>[!VIDEO https://www.youtube.com/embed/nHQYcYGKuyw]

### <a name="use-cost-analysis"></a>Использование анализа затрат

Анализ затрат позволяет подробно анализировать расходы вашей организации путем их сегментирования и фрагментирования, используя стандартные свойства ресурсов. Рассмотрите следующие распространенные вопросы как руководство для своего анализа. Отвечая на эти вопросы на регулярной основе, вы сможете оставаться более информированными и принимать более осознанные решения.

- **Ожидаемые затраты за текущий месяц**. Сколько средств потрачено на данный момент в этом месяце? Выхожу ли я за пределы бюджета?
- **Исследование аномалий**. Проводите рутинные проверки, чтобы убедиться, что расходы остаются в разумных пределах обычного использования. Какие тенденции здесь можно заметить? Происходили ли какие-либо выбросы?
- **Сверка счетов**. Превышает ли сумма в последнем счете-фактуре сумму за предыдущий месяц? Как статьи расходов менялись на протяжении месяцев?
- **Внутреннее взимание средств за использование**. Теперь, когда известно, какая оплата взимается, как эти расходы нужно разделить в организации?

Дополнительные сведения см. в статье [Краткое руководство: изучение и анализ затрат с помощью службы анализа затрат](quick-acm-cost-analysis.md).

### <a name="export-billing-data-on-a-schedule"></a>Экспорт данных о выставлении счетов по расписанию

Вам нужно импортировать свои данные о выставлении счетов во внешнюю систему, например на панель мониторинга или в финансовую систему? Настройте автоматический экспорт в службу хранилища Azure, чтобы не скачивать файлы вручную каждый месяц. После этого вы можете легко настроить автоматическую интеграцию с другими системами для синхронизации данных о выставлении счетов.

Дополнительные сведения об экспорте данных о выставлении счетов см. в статье [Руководство. Создание экспортированных данных и управление ими](tutorial-export-acm-data.md).

### <a name="create-budgets"></a>Создание бюджетов

После того как вы определили и проанализировали свои схемы расходов, важно начать устанавливать ограничения для себя и своих команд. Бюджеты Azure дают вам возможность устанавливать бюджет на основе расходов или бюджет на основе использования с множеством пороговых значений и предупреждений. Проверяйте созданные бюджеты на регулярной основе, чтобы отслеживать прогресс израсходования бюджета и вносить необходимые изменения. Бюджеты Azure также позволяют настраивать триггер автоматизации при достижении заданного порога бюджета. Например, можно настроить службу так, чтобы она завершала работу виртуальных машин. Вы также можете перевести свою инфраструктуру на другую ценовую категорию при срабатывании триггера превышения бюджета.

Дополнительные сведения см. в статье [Руководство. Создание и управление бюджетами Azure](tutorial-acm-create-budgets.md).

Дополнительные сведения об автоматизации на основе бюджета см. в статье [Управление затратами с помощью API управления бюджетом Azure](../manage/cost-management-budget-scenario.md).

## <a name="act-to-optimize"></a>Действия для оптимизации
Используйте следующие способы оптимизации расходов.

### <a name="cut-out-waste"></a>Исключение лишних затрат

После того как вы развернули свою инфраструктуру в Azure, важно убедиться, что она используется. Самый простой способ начать экономить сразу — это пересмотреть свои ресурсы и удалить те, которые не используются. На этом этапе также следует определить эффективность использования ресурсов.

#### <a name="azure-advisor"></a>Помощник по Azure

Помощник по Azure — это служба, которая, среди прочего, идентифицирует виртуальные машины с низким уровнем использования ЦП или сети. В этой службе вы можете завершить работу машин или изменить их размер на основе расчетной стоимости, чтобы продолжить их работу. Помощник также предоставляет рекомендации по покупке зарезервированных экземпляров. Рекомендации основаны на последних 30 днях использования виртуальной машины. Соблюдение рекомендаций поможет вам сократить расходы.

Общие сведения о Помощнике по Azure см. в [этой статье](../../advisor/advisor-overview.md).

### <a name="size-your-vms-properly"></a>Настройка надлежащего размера виртуальных машин

Настройка размера виртуальных машин оказывает существенное влияние на общую стоимость использования Azure. Количество виртуальных машин, необходимых в Azure, может не совпадать с количеством экземпляров, в настоящее время развернутых в локальном центре обработки данных. Убедитесь, что вы выбрали правильный размер для рабочих нагрузок, которые планируете запускать.

Дополнительные сведения см. на странице [Azure IaaS: proper sizing and cost](https://azure.microsoft.com/resources/videos/azurecon-2015-azure-iaas-proper-sizing-and-cost/) (Azure IaaS: правильный размер и стоимость).

### <a name="use-purchase-discounts"></a>Использование скидок на покупку

Azure предоставляет множество скидок, которыми ваша организация может воспользоваться, чтобы сэкономить деньги.

#### <a name="azure-reservations"></a>Резервирования Azure

Благодаря резервированию в Azure можно внести предоплату за использование вычислительной мощности виртуальной машины или Базы данных SQL за один или три года. Предоплата позволяет получить скидку на использование ресурсов. Однолетние и трехлетние контракты на резервирование Azure позволят сэкономить существенную сумму (до 72 %) по сравнению с оплатой вычислительных ресурсов для виртуальной машины или базы данных SQL по мере использования. Резервирования предоставляют скидку при выставлении счетов и не влияют на состояние выполнения ваших виртуальных машин или баз данных SQL.

Дополнительные сведения см. в статье [Общие сведения об Azure Reserved VM Instances](../reservations/save-compute-costs-reservations.md).

#### <a name="use-azure-hybrid-benefit"></a>Использование программы "Преимущество гибридного использования Azure"

Если у вас уже есть лицензии Windows Server или SQL Server в локальных развертываниях, вы можете использовать программу "Преимущество гибридного использования Azure" для экономии в Azure. При использовании преимущества Windows Server каждая лицензия покрывает стоимость ОС (до двух виртуальных машин), и вы платите только за базовые расходы на вычисление. Вы можете использовать существующие лицензии SQL Server, чтобы сэкономить до 55 % на предложениях базы данных SQL на основе виртуального ядра. К предложениям относятся SQL Server на виртуальных машинах Azure и SQL Server Integration Services.

Дополнительные сведения см. на странице [Преимущество гибридного использования Azure](https://azure.microsoft.com/pricing/hybrid-benefit/) с калькулятором.

### <a name="other-resources"></a>Другие ресурсы

В Azure также есть служба, которая позволяет создавать службы, использующие преимущества избыточной емкости в Azure для получения сниженных тарифов. Дополнительные сведения см. в статье [Использование низкоприоритетных виртуальных машин в пакетной службе](../../batch/batch-low-pri-vms.md).

## <a name="next-steps"></a>Дальнейшие действия
- Если вы не знакомы со службой "Управление затратами Azure", перейдите к [этой статье](../cost-management-billing-overview.md), чтобы узнать, как она позволяет отслеживать и контролировать затраты на Azure и оптимизировать использование ресурсов.