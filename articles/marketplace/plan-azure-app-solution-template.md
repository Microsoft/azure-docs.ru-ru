---
title: Планирование шаблона решения для предложения приложения Azure
description: Узнайте, что необходимо для создания плана шаблона решения для нового предложения приложения Azure с помощью портала коммерческого рынка в центре партнеров Майкрософт.
author: aarathin
ms.author: aarathin
ms.reviewer: dannyevers
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: conceptual
ms.date: 11/06/2020
ms.openlocfilehash: aab856b1e1d2d991cc4964d061a990dbedbeddb7
ms.sourcegitcommit: aaa65bd769eb2e234e42cfb07d7d459a2cc273ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/27/2021
ms.locfileid: "98876517"
---
# <a name="plan-a-solution-template-for-an-azure-application-offer"></a>Планирование шаблона решения для предложения приложения Azure

В этой статье описываются требования к публикации плана шаблона решения для предложения приложения Azure. План шаблона решения — это один из двух типов планов, поддерживаемых предложениями приложений Azure. Сведения о разнице между этими двумя типами планов см. в разделе [типы планов](plan-azure-application-offer.md#plans). Если вы еще не сделали это, прочитайте статью [планирование предложения приложения Azure](plan-azure-application-offer.md).

Для типа плана шаблона решения требуется [шаблон Azure Resource Manager (шаблон ARM)](../azure-resource-manager/templates/overview.md) для автоматического развертывания инфраструктуры решения.

## <a name="solution-template-requirements"></a>Требования к шаблонам решений

| Требования | Сведения |
| ------------ | ------------- |
| Выставление счетов и ценообразование | Планы шаблонов решений не предназначены для transactов, но их можно использовать для развертывания платных предложений виртуальных машин, которые выставляются через коммерческий магазин Майкрософт. Ресурсы, развертываемые с помощью шаблона ARM решения, настраиваются в подписке Azure клиента. Виртуальные машины с оплатой по мере использования преобразуются в транзакции с клиентом через корпорацию Майкрософт и выставляются через подписку Azure клиента. <br><br> Для выставления счетов за использование собственной лицензии (BYOL), несмотря на то, что стоимость инфраструктуры выставляется по подписке клиента, вы самостоятельно проставляете платежи по лицензированию программного обеспечения непосредственно клиенту. |
| Совместимый с Azure виртуальный жесткий диск (VHD) | Виртуальные машины должны быть созданы на платформе Windows или Linux. Дополнительные сведения см. в разделе:<ul><li>[Создание технического ресурса виртуальной машины Azure](./azure-vm-create-certification-faq.md#address-a-vulnerability-or-an-exploit-in-a-vm-offer) (для виртуальных жестких дисков Windows)</li><li>[Дистрибутивы Linux, одобренные в Azure](../virtual-machines/linux/endorsed-distros.md) (для виртуальных жестких дисков Linux).</li></ul> |
| Определение потребления услуг клиентами | Для всех шаблонов решений, опубликованных в Azure Marketplace, требуется включить атрибуты использования клиента. Дополнительные сведения о соотношении использования клиентов и о том, как ее включить, см. в статье о соотношении [использования клиентов в Azure](azure-partner-customer-usage-attribution.md). |
| Использование управляемых дисков | По умолчанию для материализованных виртуальных машин "инфраструктура как услуга" (IaaS) в Azure используется параметр " [управляемые диски](../virtual-machines/managed-disks-overview.md) ". В шаблонах решений необходимо использовать управляемые диски.<ul><li>Чтобы обновить шаблоны решений, следуйте указаниям в статье [Использование управляемых дисков в Azure Resource Manager шаблонах](../virtual-machines/using-managed-disks-template-deployments.md)и используйте предоставленные [образцы](https://github.com/Azure/azure-quickstart-templates).</li><li>Чтобы опубликовать VHD в качестве образа в Azure Marketplace, импортируйте базовый виртуальный жесткий диск управляемых дисков в учетную запись хранения, используя либо [Azure PowerShell](/previous-versions/azure/virtual-machines/scripts/virtual-machines-powershell-sample-copy-managed-disks-vhd) , либо [Azure CLI](/previous-versions/azure/virtual-machines/scripts/virtual-machines-cli-sample-copy-managed-disks-vhd)</ul> |
| Пакет развертывания | Вам потребуется пакет развертывания, который позволит клиентам развернуть план. При создании нескольких планов, требующих одной и той же технической настройки, можно использовать один и тот же пакет плана. Дополнительные сведения см. в следующем разделе: пакет развертывания. |
|||

## <a name="deployment-package"></a>Пакет развертывания

Пакет развертывания содержит все файлы шаблонов, необходимые для этого плана, а также все дополнительные ресурсы, Упакованные в ZIP-файл.

Все приложения Azure должны содержать эти два файла в корневой папке ZIP-архива:

- Файл шаблона Resource Manager с именем [mainTemplate.json](../azure-resource-manager/managed-applications/publish-service-catalog-app.md?tabs=azure-powershell#create-the-arm-template). Этот шаблон определяет ресурсы для развертывания в подписке Azure клиента. Примеры шаблонов Resource Manager см. в [коллекции шаблонов Azure для быстрого начала работы](https://azure.microsoft.com/documentation/templates/) или в соответствующем репозитории [GitHub: шаблоны Resource Manager для быстрого начала работы](https://github.com/azure/azure-quickstart-templates).
- Определение пользовательского интерфейса для процесса создания приложения Azure с именем [createUiDefinition.json](../azure-resource-manager/managed-applications/create-uidefinition-overview.md). В пользовательском интерфейсе укажите элементы, которые позволяют указать значения параметров.

Максимальный размер файлов

- До 1 ГБ при общем сжатии. Размер ZIP-архива
- До 1 ГБ для любого отдельного несжатого файла в ZIP-архиве

Все новые предложения приложений Azure также должны включать в себя GUID [определения потребления услуг Azure клиентами партнеров](azure-partner-customer-usage-attribution.md).

## <a name="azure-regions"></a>Регионы Azure

Вы можете опубликовать план в общедоступном регионе Azure, в регионе Azure для государственных организаций или в обоих регионах. Перед публикацией в регионе [Azure для государственных организаций](../azure-government/documentation-government-manage-marketplace-partners.md) протестируйте и проверьте план в среде, так как некоторые конечные точки могут отличаться. Чтобы настроить и проверить план, запросите пробную учетную запись на странице [Пробная версия Microsoft Azure для государственных организаций](https://azure.microsoft.com/global-infrastructure/government/request/).

Вы, как издатель, должны предоставить элементы управления соответствием, меры безопасности и рекомендации. Azure для государственных организаций использует физически изолированные центры обработки данных и сети (расположенные строго в США).

Список стран и регионов, поддерживаемых коммерческим магазином, см. в статье [Поддержка географической доступности и валюты](marketplace-geo-availability-currencies.md).

Службы Azure для государственных организаций обрабатывают данные, подпадающие под определенные нормы и требования государственных организаций, например FedRAMP, NIST 800,171 (DIB), ITAR, IRS 1075, DoD L4 и CJIS. Чтобы сообщить о сертификации по этим программам, можно предоставить до 100 описывающих их ссылок. Это могут быть ссылки на ваше участие в программе или ссылки на описание вашего соответствия требованиям этих программ на ваших собственных веб-сайтах. Эти ссылки видны только клиентам Azure для государственных организаций.

## <a name="choose-who-can-see-your-plan"></a>Выберите, кто может просматривать ваш план

Каждый план можно настроить как видимый для всех (открытых) или только для конкретной аудитории (частная). Можно создать до 100 планов и до 45, которые могут быть частными. Вам может потребоваться создать частный план, чтобы предложить различные варианты ценообразования или технические настройки для конкретных клиентов.

Вы предоставляете доступ к частному плану с помощью идентификаторов подписки Azure с возможностью включения описания каждого назначенного идентификатора подписки. Можно добавить не более 10 идентификаторов подписок вручную или до 10 000 идентификаторов подписок с помощью. CSV-файл. Идентификаторы подписки Azure должны быть уникальными и могут содержать только строчные буквы.

> [!NOTE]
> Если вы публикуете частный план, вы можете изменить его видимость на "общий" позже. Однако после публикации общедоступного плана его видимость нельзя изменить на частный.

Для планов шаблонов решений можно также скрыть план в Azure Marketplace. Это может потребоваться, если план развертывается только косвенно с помощью другого шаблона решения или управляемого приложения.

> [!NOTE]
> Частные планы не поддерживаются подписками Azure, установленными через торгового посредника по программе поставщика облачных решений (CSP).

Дополнительные сведения см. [в разделе частные предложения в коммерческом магазине Майкрософт](private-offers.md).

## <a name="next-steps"></a>Дальнейшие действия

- [Создание предложения приложения Azure в коммерческом магазине](create-new-azure-apps-offer.md)