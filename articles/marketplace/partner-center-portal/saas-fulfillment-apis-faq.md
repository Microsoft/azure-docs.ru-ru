---
title: Часто задаваемые вопросы об API-интерфейсе выполнения SaaS — коммерческом рынке Майкрософт
description: Узнайте о некоторых требованиях к интеграции для коммерческого рынка Майкрософт, чтобы позволить клиентам Azure подписываться на предложения SaaS.
ms.service: marketplace
ms.subservice: partnercenter-marketplace-publisher
ms.topic: conceptual
ms.date: 03/19/2021
author: mingshen-ms
ms.author: mingshen
ms.openlocfilehash: 760e7210d054e44dfec6d6a6e480baecd04d6807
ms.sourcegitcommit: ed7376d919a66edcba3566efdee4bc3351c57eda
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2021
ms.locfileid: "105044130"
---
# <a name="common-questions-about-saas-fulfillment-apis"></a>Часто задаваемые вопросы о API-интерфейсах выполнения SaaS

В этой статье описываются некоторые требования к интеграции для коммерческого рынка Майкрософт, позволяющие клиентам Azure подписываться на предложения SaaS.

## <a name="discovery-experience"></a>Возможности обнаружения

После публикации предложения SaaS пользователи Azure смогут найти его в Azure Marketplace. Клиенты могут фильтровать предложения на основе типа продукта (SaaS) и обнаруживать службы SaaS, в которых они интересуются.

## <a name="purchase-experience"></a>Возможности приобретения

Когда пользователь заинтересован в определенной службе SaaS, он может подписываться на него из Azure Marketplace.

### <a name="what-does-it-mean-for-an-azure-user-to-subscribe-to-a-saas-offer-in-azure-marketplace"></a>Что означает, что пользователь Azure может подписываться на предложение SaaS в Azure Marketplace?

Это означает, что пользователь может просмотреть условия использования и заявление о конфиденциальности, связанные со службой SaaS, и согласиться платить за него согласно заданным вами условиям выставления счетов, издателю предложения SaaS в счете Майкрософт. Пользователи могут использовать существующий профиль оплаты в Azure для оплаты потребления службы SaaS.

Эта возможность полезна несколькими способами. Теперь клиенты могут обнаруживать и подписываться на одном месте, используя Microsoft Cloudную платформу в качестве надежного источника, не венесуэльскому при этом все программное обеспечение, которое он намеревается использовать. Кроме того, клиенты могут использовать свой существующий профиль оплаты без необходимости в явной оплате каждого программного обеспечения независимо от ISV.

### <a name="is-the-user-charged-automatically-when-the-offer-is-subscribed"></a>Будет ли пользователь автоматически заряжен при подписании предложения?

При подписке на предложение SaaS пользователь согласен платить за использование службы SaaS на платформе Майкрософт. Однако плата начнется только при использовании предложения. Пользователь должен перейти к предложению SaaS и подтвердить создание учетной записи, чтобы начать использование предложения. Затем вы получите уведомление Майкрософт, чтобы начать выставление счетов для этой подписки SaaS клиента.

### <a name="how-are-you-notified-when-a-user-subscribes-to-your-saas-offer"></a>Как вы получаете уведомления, когда пользователь подписывается на предложение SaaS?

После подписки на предложение пользователь Azure может обнаруживать все свои предложения в Azure и управлять ими. По умолчанию состояние недавно подписанного предложения SaaS отображается как **подготовка, ожидание выполнения**. В этом состоянии пользователю Azure будет предложено ввести действие для **настройки учетной записи**, чтобы перейти к интерфейсу управления подписками SaaS в портал Azure.

Когда пользователь выбирает **настройку учетной записи**, он перенаправляется на веб-сайт службы SaaS. Издатель настроил URL-адрес во время публикации предложения. Эта страница называется целевой страницей издателя. Пользователи Azure входят на целевую страницу SaaS на основе существующих учетных данных Azure Active Directory (Azure AD) в Azure.

> [!IMPORTANT]
> Вы должны войти в систему покупателя, используя Azure Active Directory, единый вход (Azure AD SSO) в соответствии с инструкциями [политики](/legal/marketplace/certification-policies?context=/azure/marketplace/context/context). `mail`Свойство пользовательского ресурса, полученное из Microsoft Graph API, предоставляет контактные данные для использования с Azure AD и `userPrincipalName` MSA. Возможно, поле "почта" пусто для Azure AD, и пользователь может не иметь записи электронной почты. Если это так, мы рекомендуем определить это и запросить контактное письмо. Это единственный шанс получить Контактное сообщение электронной почты, чтобы связаться с клиентом во время или после процесса организации клиента.

Когда пользователь Azure перенаправляется на целевую страницу, к URL-адресу запроса добавляется маркер. Этот маркер является кратковременным и действителен в течение 24 часов. Затем можно обнаружить наличие этого маркера и вызвать API Майкрософт, чтобы получить дополнительный контекст, связанный с маркером.

![Поток подписки клиента](media/saas-metering-service-integration-flow-a.png)

Дополнительные сведения о контракте API для обработки сценариев Transact в жизненном цикле предложения SaaS см. в разделе [API-интерфейс выполнения SaaS](pc-saas-fulfillment-api-v2.md).

### <a name="how-do-you-know-the-saas-offer-to-which-the-user-subscribes-in-azure"></a>Как узнать предложение SaaS, на которое пользователь подписывается в Azure?

Ответ на `Resolve` API включает сведения о предложении и плане, связанные с подпиской SaaS.

### <a name="how-can-the-azure-user-change-the-plan-associated-with-this-azure-subscription"></a>Как пользователь Azure может изменить план, связанный с этой подпиской Azure?

* Пользователь Azure может изменить план, связанный с подпиской SaaS, непосредственно в интерфейсе SaaS или на платформе Майкрософт.

* Преобразования можно выполнять в любое время в цикле выставления счетов. Вам будет предложено подтвердить любое преобразование, которое вступит в силу после подтверждения.

* Предварительно оплаченный план (**ежемесячный** или **ежегодный**) оценивается по мере использования. Все превышения, созданные до момента преобразования, будут начисляться в следующем счете. На основе нового плана будет выдаваться новое превышение.

>[!Note]
>Вы можете заблокировать переход на более раннюю версию, если не хотите поддерживать определенные пути преобразования.

Приведенная ниже последовательность фиксирует поток, когда клиент Azure изменяет план в интерфейсе SaaS:

![Поток изменения плана клиента](media/saas-metering-service-integration-flow-b.png)

Приведенная ниже последовательность охватывает поток, когда клиент Azure изменяет план в Интернет-магазине Майкрософт:

![Поток изменения плана Интернет-магазина клиента](media/saas-metering-service-integration-flow-c.png)

### <a name="how-can-the-azure-user-unsubscribe-from-the-plan-associated-with-azure-subscription"></a>Как пользователь Azure может отменить подписку на план, связанный с подпиской Azure?

Пользователь Azure может отменить подписывание приобретенного предложения SaaS либо непосредственно в интерфейсе SaaS, либо с помощью платформы Майкрософт. После того как пользователь отменяет подписывание, он больше не будет платить за следующий цикл выставления счетов.

Приведенная ниже последовательность фиксирует поток, когда клиент Azure отменяет подписывание предложения SaaS в интерфейсе SaaS:

![Клиент отменяет подписывание в интерфейсе SaaS](media/saas-metering-service-integration-flow-d.png)

Приведенная ниже последовательность фиксирует поток при отмене подписки пользователя Azure в Интернет-магазине Майкрософт:

![Клиент отменяет подписывание в Интернет-магазине Майкрософт](media/saas-metering-service-integration-flow-e.png)

## <a name="next-steps"></a>Дальнейшие действия

[API-интерфейсы службы из Marketplace для контроля потребления](./marketplace-metering-service-apis.md)
