---
title: Обзор IPv6 для виртуальной сети Azure
titlesuffix: Azure Virtual Network
description: Описание IPv6 для конечных точек IPv6 и маршрутов данных в виртуальной сети Azure.
services: virtual-network
documentationcenter: na
author: KumudD
manager: twooley
ms.service: virtual-network
ms.devlang: NA
ms.topic: conceptual
ms.workload: infrastructure-services
ms.date: 03/31/2020
ms.author: kumud
ms.openlocfilehash: bb7769298940095900da25e61e13612b92bad00c
ms.sourcegitcommit: f28ebb95ae9aaaff3f87d8388a09b41e0b3445b5
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2021
ms.locfileid: "103419105"
---
# <a name="what-is-ipv6-for-azure-virtual-network"></a>Что такое IPv6 для виртуальной сети Azure?

Протокол IPv6 для виртуальной сети Azure (VNet) позволяет размещать приложения на платформе Azure с поддержкой адресации IPv6 и IPv4 как в виртуальной сети, так и с доступом в Интернет и из него. В связи с исчерпанием общедоступных IPv4-адресов новые сети для мобильных устройств и Интернета вещей часто создаются на базе протокола IPv6. Даже давно существующие поставщики услуг Интернета и мобильные сети постепенно переходят на IPv6. Службы, которые поддерживают только адресацию IPv4, оказываются в числе аутсайдеров как на существующих, так и на новых рынках. Двойной стек IPv4/IPv6 позволяет службам, размещенным на платформе Azure, преодолевать этот технологический разрыв на глобальном уровне: такие службы способны взаимодействовать как с существующими устройствами с поддержкой IPv4, так и с новыми устройствами и сетями на базе IPv6.

Встроенная поддержка протокола IPv6 на платформе Azure позволяет легко реализовать двойной стек (IPv4/IPv6) для подключения к Интернету приложений, размещенных в среде Azure. Благодаря этому можно легко развертывать виртуальные машины с распределением нагрузки по протоколу IPv6 как для входящих, так и для исходящих соединений. Эта функция по-прежнему доступна, и дополнительные сведения о ней приведены [здесь](../load-balancer/load-balancer-ipv6-overview.md).
Виртуальная сеть IPv6 для Azure намного более функциональна и позволяет развертывать на платформе Azure полноценные решения на базе архитектуры IPv6.


На схеме ниже представлено простое развертывание с использованием двойного стека (IPv4/IPv6) в среде Azure:

![Схема развертывания сети IPv6](./media/ipv6-support-overview/ipv6-sample-diagram.png)

## <a name="benefits"></a>Преимущества

Преимущества IPv6 для виртуальной сети Azure

- Помогает расширить охват приложений на платформе Azure на растущие рынки мобильных устройств и Интернета вещей.
- Виртуальные машины с поддержкой двойного стека IPv4/IPv6 обеспечивают максимальную гибкость при развертывании служб. Один экземпляр службы может подключаться к интернет-клиентам с поддержкой как IPv4, так и IPv6.
- В основе — проверенная временем и стабильная платформа для взаимодействия виртуальных машин с Интернетом на базе IPv6 в среде Azure.
- Безопасность является частью общей концепции платформы, так как соединение с Интернетом по протоколу IPv6 устанавливается только по непосредственному запросу из развернутой службы.

## <a name="capabilities"></a>Возможности

Архитектура IPv6 для виртуальной сети Azure поддерживает перечисленные ниже функции и возможности.

- Клиенты Azure могут создавать собственные адресные пространства виртуальной сети IPv6 с учетом потребностей своих приложений и пользователей, а также легко интегрировать их со своим локальным пространством IP-адресов.
- Виртуальные сети двойного стека (IPv4 и IPv6) с подсетями на базе двойного стека позволяют приложениям взаимодействовать с ресурсами как IPv4, так и IPv6 в собственной виртуальной сети и в Интернете.
    > [!IMPORTANT]
    > Размер подсетей для протокола IPv6 должен составлять в точности /64.  Это обеспечит совместимость, если в будущем вы решите реализовать маршрутизацию из подсети в локальную сеть, поскольку некоторые маршрутизаторы поддерживают только IPv6-маршруты типа /64.  
- Защищайте свои ресурсы с помощью правил IPv6 для групп безопасности сети.
    - Кроме того, механизмы защиты от распределенных атак типа "отказ в обслуживании", реализованные на платформе Azure, распространяются и на публичные IP-адреса, доступные из Интернета.
- Задавайте пользовательские маршруты для маршрутизации трафика IPv6 в своей виртуальной сети — в частности, при использовании сетевых виртуальных модулей для расширения возможностей своего приложения.
- Все виртуальные машины Linux и Windows могут использовать протокол IPv6 для виртуальной сети Azure.
- В рамках [стандартной общедоступной подсистемы балансировки нагрузки IPv6](virtual-network-ipv4-ipv6-dual-stack-standard-load-balancer-powershell.md), позволяющей создавать устойчивые масштабируемые приложения, поддерживаются перечисленные ниже функции и возможности.
    - Опциональный зонд работоспособности IPv6, который оценивает работоспособность экземпляров серверного пула, способных принимать новые потоки.
    - Опциональные правила для исходящего трафика, которые обеспечивают полный декларативный контроль над исходящим подключением для масштабирования и настройки этой возможности в соответствии с определенными потребностями.
    - Опциональные множественные конфигурации внешнего интерфейса, благодаря которым одна подсистема балансировки нагрузки может использовать несколько общедоступных IPv6-адресов: один интерфейсный протокол и порт могут использоваться несколькими интерфейсными адресами.
    - Опциональные порты IPv6 могут повторно использоваться серверными экземплярами благодаря функции *плавающего IP-адреса* в правилах балансировки нагрузки. 
    - Примечание. Балансировка нагрузки не приводит к преобразованию протокола (NAT64 не применяется). 
    - Примечание. Балансировку нагрузки IPv6 можно осуществлять только на основной сетевой интерфейс виртуальной машины Azure. 
- Поддержка [стандартной внутренней подсистемы балансировки нагрузки IPv6](ipv6-dual-stack-standard-internal-load-balancer-powershell.md) для создания устойчивых многоуровневых приложений в виртуальных сетях Azure.   
- Поддержка базовой общедоступной подсистемы балансировки нагрузки IPv6 для совместимости с развернутыми службами прежних версий.
- Поддержка [резервирования общедоступных IPv6-адресов и диапазонов адресов](ipv6-public-ip-address-prefix.md) обеспечивает устойчивую и предсказуемую IPv6-адресацию с возможностью легко создавать фильтры для размещенных на платформе Azure приложений вашей компании и ее клиентов.
- Общедоступные IP-адреса уровня экземпляра позволяют подключаться через Интернет по протоколу IPv6 непосредственно к отдельным виртуальным машинам.
- Функция [добавления IPv6-адресации в уже развернутые службы, поддерживающие только протокол IPv4](ipv6-add-to-existing-vnet-powershell.md), позволяет легко добавить поддержку нового протокола в существующие службы без их повторного развертывания.  Этот процесс никак не влияет на текущий трафик по протоколу IPv4, поэтому в зависимости от особенностей ваших приложений и операционной системы поддержку IPv6 можно добавлять даже в работающие службы.    
- Клиенты Интернета могут обращаться к вашим приложениям на базе двойного стека по протоколу, который выбирают сами, благодаря поддержке записей IPv6 (AAAA) в DNS Azure. 
- Вы можете создавать приложения на базе двойного стека, которые автоматически масштабируются с учетом текущей нагрузки, с помощью масштабируемых наборов виртуальных машин с поддержкой IPv6.
- Поддержка [пиринга виртуальной сети](virtual-network-peering-overview.md) (как на региональном, так и на глобальном уровне) позволяет легко связывать виртуальные сети на базе двойного стека: конечные точки IPv4 и IPv6 на виртуальных машинах в одноранговых сетях смогут взаимодействовать между собой. Вы даже сможете связывать сети двойного стека с виртуальными сетями, которые поддерживают только IPv4, при переводе развернутых у вас служб на двойной стек. 
- Доступны функции устранения неполадок и диагностики IPv6 с метриками и оповещениями подсистемы балансировки нагрузки, а также такие функции Наблюдателя за сетями, как захват пакетов, журналы потоков NSG, устранение неполадок и мониторинг соединений.   

## <a name="scope"></a>Область
IPv6 для виртуальной сети Azure — это базовый набор функций, который позволяет клиентам размещать на платформе Azure приложения с поддержкой двойного стека технологий (IPv4+IPv6).  Мы планируем постепенно добавлять поддержку IPv6 и в другие сетевые службы Azure, а также со временем предложить версии служб PaaS Azure с поддержкой двойного стека, а тем временем все службы PaaS Azure доступны через конечные точки IPv4 в виртуальных машинах с поддержкой двойного стека.   

## <a name="limitations"></a>Ограничения
В текущей реализации IPv6 для виртуальной сети Azure действуют перечисленные ниже ограничения.
- Функции IPv6 для виртуальной сети Azure доступны во всех глобальных регионах, где предлагаются коммерческие службы Azure, а также в регионах, где предлагаются службы Azure для государственных учреждений США, с использованием всех методов развертывания.  
- В виртуальной сети с поддержкой IPv6 МОЖНО использовать шлюзы ExpressRoute для трафика на базе только IPv4.  Мы планируем добавить поддержку трафика IPv6.   
- Шлюзы VPN НЕЛЬЗЯ использовать в виртуальных сетях с поддержкой IPv6 (ни непосредственно, ни в режиме пиринга UseRemoteGateway).
- Платформа Azure (AKS и т. п.) не поддерживает соединения IPv6 для Контейнеров. 
- Виртуальные машины и масштабируемые наборы виртуальных машин на базе только IPv6 не поддерживаются; для каждого сетевого интерфейса должна быть хотя бы одна IPv4-конфигурация. 
- При добавлении поддержки IPv6 в уже развернутые IPv4-службы диапазоны IPv6-адресов нельзя добавить в виртуальную сеть с использованием существующих ссылок для навигации по ресурсам.  
- В общедоступной DNS Azure уже поддерживается прямой поиск DNS для IPv6-адресов, однако обратный поиск пока не реализован.   

## <a name="pricing"></a>Цены

Плата за ресурсы и пропускную способность IPv6 на платформе Azure рассчитывается по тем же тарифам, что и для IPv4. Дополнительная плата за использование протокола IPv6 не взимается. Вы можете ознакомиться с подробными ценами за использование [общедоступных IP-адресов](https://azure.microsoft.com/pricing/details/ip-addresses/), [пропускной способности сети](https://azure.microsoft.com/pricing/details/bandwidth/) или [подсистемы балансировки нагрузки](https://azure.microsoft.com/pricing/details/load-balancer/).

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как [развертывать приложения двойного стека на базе IPv6 с помощью Azure PowerShell](virtual-network-ipv4-ipv6-dual-stack-standard-load-balancer-powershell.md).
- Узнайте, как [развертывать приложения двойного стека на базе IPv6 с помощью Azure CLI](virtual-network-ipv4-ipv6-dual-stack-standard-load-balancer-cli.md).
- Узнайте, как [развертывать приложения двойного стека на базе IPv6 с помощью шаблонов Resource Manager (JSON-файлов)](ipv6-configure-standard-load-balancer-template-json.md).
