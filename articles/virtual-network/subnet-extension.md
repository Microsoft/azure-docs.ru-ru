---
title: Расширение подсети в Azure | Документация Майкрософт
description: Сведения о расширении подсети в Azure.
services: virtual-network
documentationcenter: na
author: anupam-p
manager: narayan
editor: ''
tags: azure-resource-manager
ms.assetid: ''
ms.service: virtual-network
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/31/2019
ms.author: anupand
ms.openlocfilehash: 555c903dc3375080a8b0d006d2aac7216854c939
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "99539304"
---
# <a name="subnet-extension"></a>Расширение подсети
Миграция рабочей нагрузки в общедоступное облако требует тщательного планирования и координации. Одним из ключевых соображений может быть возможность хранить IP-адреса. Это может быть важным, особенно если у ваших приложений есть зависимость IP-адресов или требования соответствия требованиям для использования конкретных IP-адресов. Виртуальная сеть Azure решает эту проблему, позволяя создавать виртуальную сеть и подсети с помощью выбранного диапазона IP-адресов.

Миграция может стать сложной задачей, если описанное выше требование относится к дополнительному требованию для сохранения некоторых приложений в локальной среде. В таком случае необходимо разделить приложения между Azure и локальной средой без перенумерации IP-адресов с обеих сторон. Кроме того, необходимо разрешить приложениям взаимодействовать так, как если бы они настроились в одной сети.

Одним из решений для описанной выше проблемы является расширение подсети. Расширение сети позволяет приложениям взаимодействовать с одним и тем же доменом вещания, если они существуют в различных физических расположениях, устраняя необходимость в перепроектировании топологии сети. 

В то время как расширение сети не является хорошей практикой, приведенные ниже варианты использования могут быть необходимыми.

- **Поэтапная миграция**. наиболее распространенный сценарий заключается в том, что вы хотите выполнить миграцию. Необходимо сначала перенести несколько приложений, а во время — перенести остальные приложения в Azure.
- **Задержка**. требования к низкой задержке могут быть еще одной причиной того, что некоторые приложения будут находиться в локальной среде, чтобы обеспечить максимально близкое к вашему центру обработки данных.
- **Соответствие**. другой вариант использования заключается в том, что для сохранения некоторых приложений в локальной среде могут потребоваться требования соответствия.
 
> [!NOTE] 
> Не следует расширять подсети, если это не требуется. В случае расширения подсетей следует попытаться сделать ее промежуточным шагом. Со временем следует попытаться перечислить приложения в локальной сети и перенести их в Azure.

В следующем разделе мы обсудим, как можно расширить подсети в Azure.


## <a name="extend-your-subnet-to-azure"></a>Расширение подсети в Azure
 Вы можете расширить свои локальные подсети в Azure с помощью сетевого решения, накладываемого на уровень 3. В большинстве решений используется технология наложения, такая как ВКСЛАН, для расширения сети уровня 2 с помощью сети оверлея уровня 3. На схеме ниже показано обобщенное решение. В этом решении одна и та же подсеть существует на обеих сторонах:, в Azure и в локальной среде. 

![Пример расширения подсети](./media/subnet-extension/subnet-extension.png)

IP-адреса из подсети назначаются виртуальным машинам в Azure и локальной среде. Как Azure, так и локальная среда имеют NVA, вставленные в свои сети. Когда виртуальная машина в Azure пытается связаться с виртуальной машиной в локальной сети, NVA Azure захватывает этот пакет, инкапсулирует его и отправляет через VPN/Express Route в локальную сеть. Локальная NVA получает пакет, декапсулатес его и пересылает его предполагаемому получателю в своей сети. В возвращаемом трафике используется аналогичный путь и логика.

В приведенном выше примере Azure NVA и локальный NVA обмениваются данными и изучите IP-адреса друг за другом. Более сложные сети также могут иметь службу сопоставления, которая поддерживает сопоставление между NVA и IP-адресами за ними. Когда NVA получает пакет, он запрашивает службу сопоставления, чтобы найти адрес NVA с конечным IP-адресом, на котором он находится.

В следующем разделе вы найдете сведения о решениях расширения подсети, протестированных в Azure.

## <a name="next-steps"></a>Дальнейшие действия 
[Расширьте подсеть в Azure с помощью решений поставщиков.](https://github.com/microsoft/Azure-LISP)