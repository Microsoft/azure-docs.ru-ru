---
title: Перенос приложения IoT Central Azure v2 на v3 | Документация Майкрософт
description: Как администратор, Узнайте, как перенести приложение Azure IoT Central v2 в версии 3.
author: troyhopwood
ms.author: troyhop
ms.date: 01/18/2021
ms.topic: conceptual
ms.service: iot-central
services: iot-central
ms.openlocfilehash: 3f81ae72af48ec934d1c2c2567ebdd212d8e0499
ms.sourcegitcommit: 3c3ec8cd21f2b0671bcd2230fc22e4b4adb11ce7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/25/2021
ms.locfileid: "98763464"
---
# <a name="migrate-your-v2-iot-central-application-to-v3"></a>Перенос приложения IoT Central v2 в версии 3

*Эта статья относится к администраторам.*

В настоящее время при создании нового IoT Central приложения это приложение v3. Если вы ранее создали приложение, то в зависимости от того, когда оно было создано, это может быть v2. В этой статье описывается, как выполнить миграцию версии 2 в приложение v3, чтобы использовать новейшие функции IoT Central.

Сведения о том, как определить версию приложения IoT Central, см. в разделе [сведения о приложении](howto-get-app-info.md).

Ниже приведены действия по переносу приложения из v2 в версии 3.

1. Создайте новое приложение v3 из приложения V2.
1. Настройте приложение v3.
1. Удаление в приложение v2.

## <a name="create-a-new-v3-application"></a>Создание нового приложения v3

Используйте мастер миграции для создания нового приложения v3.

IoT Central не поддерживает миграцию в существующее приложение v3. Чтобы автоматически переместить существующие устройства, используйте мастер миграции для создания приложения v3.

Мастер миграции:

- Создает новое приложение v3.
- Проверяет шаблоны устройств на совместимость с v3.
- Копирует все шаблоны устройств в новое приложение v3.
- Копирует всех пользователей и назначения ролей в новое приложение v3.

> [!NOTE]
> Чтобы обеспечить совместимость устройств с v3, типы-примитивы в шаблоне устройства становятся свойствами объекта. Вам не нужно вносить никаких изменений в код устройства.

Для переноса приложения на v3 необходимо быть администратором.

1. В меню **Администрирование** выберите пункт **Миграция в приложение v3**:

    :::image type="content" source="media/howto-migrate/migrate-menu.png" alt-text="Снимок экрана, на котором показан мастер миграции приложений":::

1. Введите новое **имя приложения** и при необходимости измените автоматически сформированный  **URL-адрес**. URL-адрес не может совпадать с URL-адресом текущего приложения V2. Однако вы можете изменить URL-адрес позже после удаления приложения V2.

1. Выберите **создать новое приложение v3**.

    :::image type="content" source="media/howto-migrate/create-app.png" alt-text="Снимок экрана, показывающий параметры в мастере миграции приложений":::

    В зависимости от количества и сложности шаблонов устройств этот процесс может занять несколько минут.

    > [!Warning]
    > Создание приложения v3 завершится ошибкой, если в любом шаблоне устройства есть поля, которые начинаются с цифры или содержат любой из следующих символов (,,,,,,,,,,,, `+` `*` `?` `^` `$` `(` `)` `[` `]` `{` `}` `|` `\` ). Схема шаблона устройства ДТДЛ, используемая в приложениях v3, не позволяет использовать эти символы. Обновите шаблон устройства, чтобы устранить эту проблему перед миграцией на v3.

1. Когда новое приложение v3 будет готово, выберите **Открыть новое приложение** , чтобы открыть его.

    :::image type="content" source="media/howto-migrate/open-app.png" alt-text="Снимок экрана, показывающий мастер миграции приложений после миграции приложений":::

## <a name="configure-the-v3-application"></a>Настройка приложения v3

После создания нового приложения версии 3 перед переносом устройств из приложения V2 в приложение v3 необходимо внести изменения в конфигурацию.

> [!TIP]
> Уделите несколько минут [ознакомлению с v3](overview-iot-central-tour.md#navigate-your-application) , так как в нем есть некоторые отличия от предыдущей версии.

Ниже приведены некоторые рекомендуемые действия по настройке, которые следует учитывать.

- [Настройка панелей мониторинга](howto-add-tiles-to-your-dashboard.md)
- [Настройка экспорта данных](howto-export-data.md)
- [Настройка правил и действий](quick-configure-rules.md)
- [Настройка пользовательского интерфейса приложения](howto-customize-ui.md)

Если приложение v3 настроено в соответствии с вашими потребностями, вы можете перенести устройства из приложения V2 в приложение v3.

## <a name="move-your-devices-to-the-v3-application"></a>Перемещение устройств в приложение v3

После завершения этого шага все устройства обмениваются данными только с новым приложением v3.

> [!IMPORTANT]
> Перед перемещением устройств в приложение v3 удалите все устройства, созданные в приложении v3.

На этом шаге все существующие устройства перемещаются в новое приложение v3. Данные устройства не копируются.

Выберите **переместить все устройства** , чтобы начать перемещение устройств. Выполнение этого шага может занять несколько минут.

:::image type="content" source="media/howto-migrate/move-devices.png" alt-text="Снимок экрана, на котором показан мастер миграции приложений с параметром &quot;переместить устройства&quot;":::

После завершения перемещения перезапустите все устройства, чтобы убедиться, что они подключаются к новому приложению v3.

> [!WARNING]
> Не удаляйте приложение v3, так как приложение v2 теперь неработоспособно.

## <a name="delete-your-old-v2-application"></a>Удаление старого приложения V2

После проверки того, что все работает правильно в новом приложении v3, удалите старое приложение v2. Этот шаг гарантирует, что счет за неиспользуемое приложение не будет взиматься.

> [!Note]
> Чтобы удалить приложение, необходимо иметь разрешения на удаление ресурсов в подписке Azure, выбранной при создании приложения. Дополнительные сведения см. в статье [Использование управления доступом на основе ролей для контроля доступа к ресурсам в подписке Azure](../../active-directory/role-based-access-control-configure.md).

1. В приложении V2 выберите вкладку **Администрирование** в меню.
2. Выберите **Удалить** , чтобы окончательно удалить приложение IOT Central. Этот параметр окончательно удаляет все данные, связанные с этим приложением.

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы узнали, как перенести приложение, предлагаем следующий шаг — просмотреть [Пользовательский интерфейс IOT Central Azure](overview-iot-central-tour.md) , чтобы увидеть изменения в версии 3.
