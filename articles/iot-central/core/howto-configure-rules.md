---
title: Настройка правил и действий в Azure IoT Central | Документация Майкрософт
description: В этой статье показано, как разработчику настроить правила и действия на основе телеметрии в своем приложении Azure IoT Central.
author: vavilla
ms.author: vavilla
ms.date: 12/23/2020
ms.topic: how-to
ms.service: iot-central
services: iot-central
manager: philmea
ms.openlocfilehash: 378a1dbcfbc89cdf9b24dc2490db583f1135b9a2
ms.sourcegitcommit: ab829133ee7f024f9364cd731e9b14edbe96b496
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/28/2020
ms.locfileid: "97796794"
---
# <a name="configure-rules"></a>Настройка правил

*Эта статья предназначена для операторов, разработчиков и администраторов.*

Правила в IoT Central — это настраиваемый инструмент реагирования, который активируется отслеживаемыми событиями подключенных устройств. В разделах ниже описано, как вычисляются правила.

## <a name="select-target-devices"></a>Выбор целевых устройств

Используйте раздел целевых устройств, чтобы выбрать устройства, к которым будет применяться правило. Фильтры позволяют дополнительно уточнить, какие устройства должны быть выбраны. Для фильтрации набора устройств используются свойства в шаблоне устройства. Сами по себе фильтры не активируют действие. На следующем снимке экрана показаны целевые устройства с типом шаблона устройства **Refrigerator** (Холодильник). Фильтр указывает, что правило должно включать в себя только устройства **Refrigerator** (Холодильник), у которых свойство **Manufactured State** (Штат производства) имеет значение **Washington** (Вашингтон).

![Условия](media/howto-configure-rules/filters.png)

## <a name="use-multiple-conditions"></a>Применение нескольких условий

Условия активируют правила. В настоящее время при добавлении нескольких условий в правило они объединяются логической операцией "И". Иными словами, должны быть выполнены все условия, чтобы правило приняло значение True.  

На следующем снимке экрана условия проверяют, когда температура превышает 70&deg; Фаренгейта (21 градус Цельсия), а влажность меньше 10. Если оба этих оператора имеют значение True, правило принимает значение True и активирует действие.

![На снимке экрана показан монитор холодильника с условиями, заданными для температуры и влажности.](media/howto-configure-rules/conditions.png)

### <a name="use-a-cloud-property-in-a-value-field"></a>Использование облачного свойства в поле значения

Вы можете указать облачное свойство в шаблоне устройства в поле **Value** (Значение) для условия. Типы облачного свойства и значения телеметрии должны совпадать. Например, если значение **Temperature** (Температура) относится к типу Double, то только облачные свойства типа Double отображаются как параметры в раскрывающемся списке **Value** (Значение).

Если выбрано значение телеметрии типа события, то в раскрывающемся списке **Value** (Значение) доступен параметр **Any** (Любой). Параметр **Any** (Любой) означает, что правило срабатывает, когда приложение получает событие этого типа, независимо от полезных данных.

## <a name="use-aggregate-windowing"></a>Использование объединенных временных окон

Правила оценивают объединенные временные окна как "переворачивающиеся" окна. На следующем снимке экрана временное окно составляет 5 минут. Каждые пять минут правило оценивает данные за прошедшие пять минут. Данные оцениваются только один раз в пределах временного окна, которому они соответствуют.

!["Переворачивающиеся" окна](media/howto-configure-rules/tumbling-window.png)

## <a name="use-rules-with-iot-edge-modules"></a>Использование правил с модулями IoT Edge

На правила, применяемые к модулям IoT Edge, распространяется ограничение. Правила для телеметрии из разных модулей не оцениваются как допустимые правила. Давайте рассмотрим следующий пример. Первое условие правила основано на данных телеметрии температуры из модуля А. Второе условие правила основано на данных телеметрии влажности из модуля Б. Так как два условия относятся к разным модулям, это недопустимый набор условий. Правило недопустимо, и при попытке сохранить его отобразится сообщение об ошибке.

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы узнали, как настроить правило в приложении IoT Central Azure, вы можете узнать, как [настроить дополнительные правила](howto-configure-rules-advanced.md) с помощью Power Automate или Azure Logic Apps.
