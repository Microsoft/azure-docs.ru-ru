---
title: Сведения об архитектуре Azure IoT Central | Документация Майкрософт
description: В этой статье описаны ключевые понятия, связанные с архитектурой Azure IoT Central.
author: dominicbetts
ms.author: dobett
ms.date: 12/19/2020
ms.topic: conceptual
ms.service: iot-central
services: iot-central
manager: philmea
ms.openlocfilehash: c2d5310d1a664aa2e22d4241d8066e41d9c82bd1
ms.sourcegitcommit: ab829133ee7f024f9364cd731e9b14edbe96b496
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/28/2020
ms.locfileid: "97796726"
---
# <a name="azure-iot-central-architecture"></a>Архитектура Azure IoT Central

В этой статье приведено краткое описание архитектуры Microsoft Azure IoT Central.

![Архитектура верхнего уровня](media/concepts-architecture/architecture.png)

## <a name="devices"></a>Устройства

Устройства обмениваются данными с приложением Azure IoT Central. Устройство может:

- отправлять измерения (например, данные телеметрии);
- синхронизировать параметры с приложением.

В Azure IoT Central данные, которыми устройство может обмениваться с приложением, указываются в шаблоне устройства. Дополнительные сведения о шаблонах устройства см. в разделе об [управлении метаданными](#metadata-management).

Дополнительные сведения о подключении устройств к приложению Azure IoT Central см. в [этой](concepts-get-connected.md) статье.

## <a name="azure-iot-edge-devices"></a>устройство Azure IoT Edge.

Также как и устройства, созданные с помощью [пакетов SDK для Azure IoT](https://github.com/Azure/azure-iot-sdks), [устройства Azure IoT Edge](../../iot-edge/about-iot-edge.md) можно подключить к приложению IoT Central. IoT Edge позволяет запускать облачную аналитику и пользовательскую логику непосредственно на устройствах IoT, управляемых IoT Central. Среда выполнения IoT Edge позволяет выполнять следующие задачи:

- Установка и обновление рабочих нагрузок на устройстве.
- Поддержание стандартов безопасности IoT Edge на устройстве.
- Обеспечение рабочего состояния модулей IoT Edge.
- Передача данных о состоянии работоспособности модуля в облако для удаленного мониторинга.
- Управление связью между подчиненными конечными устройствами и устройством IoT Edge, между модулями на устройстве IoT Edge, а также между устройством IoT Edge и облаком.

![IoT Central Azure с Azure IoT Edge](./media/concepts-architecture/iotedge.png)

IoT Central предоставляет следующие возможности для устройств IoT Edge.

- Шаблоны устройств для описания возможностей устройства IoT Edge, например:
  - Возможность отправки манифеста развертывания, которая помогает управлять манифестом для парка устройств.
  - Модули, запускаемые на устройстве IoT Edge.
  - Данные телеметрии, которые отправляет каждый модуль.
  - Каждый модуль сообщает о свойствах.
  - Команды, на которые отвечает каждый модуль.
  - Связи между устройством шлюза IoT Edge и подчиненным устройством.
  - Свойства облака, которые не хранятся на устройстве IoT Edge.
  - Настройки, панели мониторинга и формы, которые являются частью вашего приложения IoT Central.

  Дополнительные сведения см. в статье [Connect Azure IOT Edge Devices to a Azure IOT Central Application](./concepts-iot-edge.md) .

- Возможность подготавливать IoT Edge устройства в масштабе с помощью службы подготовки устройств Интернета вещей Azure
- Правила и действия.
- Настраиваемые панели мониторинга и аналитика.
- Непрерывный экспорт данных телеметрии с устройств IoT Edge.

### <a name="iot-edge-device-types"></a>Типы устройств IoT Edge

IoT Central классифицирует IoT Edge типов устройств следующим образом:

- Конечные устройства. Устройство IoT Edge может иметь нисходящие конечные устройства, но эти устройства не подготавливаются в IoT Central.
- Устройства шлюзов с подчиненными устройствами. Устройство шлюза и подчиненные устройства подготавливаются в IoT Central.

![Обзор IoT Central с IoT Edge](./media/concepts-architecture/gatewayedge.png)

### <a name="iot-edge-patterns"></a>Шаблоны IoT Edge

IoT Central поддерживает следующие шаблоны устройств IoT Edge:

#### <a name="iot-edge-as-leaf-device"></a>IoT Edge в качестве конечного устройства

![IoT Edge в качестве конечного устройства](./media/concepts-architecture/edgeasleafdevice.png)

Устройство IoT Edge подготовлено в IoT Central, а все нижестоящие устройства и их данные телеметрии представлены как поступающие от устройства IoT Edge. Подчиненные устройства, подключенные к устройству IoT Edge, не подготавливаются в IoT Central.

#### <a name="iot-edge-gateway-device-connected-to-downstream-devices-with-identity"></a>IoT Edge устройство шлюза подключено к подчиненным устройствам с удостоверением

![IoT Edge с удостоверением подчиненного устройства](./media/concepts-architecture/edgewithdownstreamdeviceidentity.png)

IoT Edge устройство подготавливается в IoT Central вместе с подчиненными устройствами, подключенными к IoT Edge устройству. Поддержка среды выполнения для подготовки подчиненных устройств через шлюз в настоящее время не поддерживается.

#### <a name="iot-edge-gateway-device-connected-to-downstream-devices-with-identity-provided-by-the-iot-edge-gateway"></a>IoT Edge устройство шлюза подключено к подчиненным устройствам с удостоверением, предоставленным шлюзом IoT Edge

![IoT Edge с подчиненным устройством без удостоверения](./media/concepts-architecture/edgewithoutdownstreamdeviceidentity.png)

IoT Edge устройство подготавливается в IoT Central вместе с подчиненными устройствами, подключенными к IoT Edge устройству. В настоящее время поддержка шлюза, предоставляющего удостоверения для подчиненных устройств и подготовки нижестоящих устройств, сейчас не поддерживается. Если вы перенесете собственный модуль трансляции идентификаторов, IoT Central поддерживает этот шаблон.

## <a name="cloud-gateway"></a>Облачный шлюз

Azure IoT Central использует Центр Интернета вещей Azure как облачный шлюз, позволяющий подключаться к устройству. Центр Интернета вещей позволяет:

- выполнять прием данных в нужном масштабе в облаке;
- управлять устройствами;
- устанавливать надежное подключение.

Дополнительные сведения о Центре Интернета вещей Azure см. в [этой документации](../../iot-hub/index.yml).

Дополнительные сведения о подключении устройств в Azure IoT Central см. в [этой статье](concepts-get-connected.md).

## <a name="data-stores"></a>Хранилища данных

Azure IoT Central хранит данные приложения в облаке. Хранимые данные приложения включают в себя:

- шаблоны устройств;
- удостоверения устройств;
- метаданные устройств;
- данные о пользователях и ролях.

Azure IoT Central использует хранилище временных рядов для данных измерений, отправляемых с устройств. Данные временных рядов, полученные с устройств, используются в службе аналитики.

## <a name="analytics"></a>Analytics

Служба аналитики отвечает за создание пользовательских передаваемых данных, отображаемых в приложении. Оператор может [настраивать аналитику](howto-create-analytics.md), отображаемую в приложении. Служба аналитики создана на основе службы [Аналитика временных рядов Azure](https://azure.microsoft.com/services/time-series-insights/) и обрабатывает данные измерений, отправляемые с устройств.

## <a name="rules-and-actions"></a>Правила и действия

[Правила и действия](tutorial-create-telemetry-rules.md) вместе позволяют автоматизировать задачи в приложении. Конструктор может определить правила на основе телеметрии устройства (например, если температура превышает указанное пороговое значение). Azure IoT Central использует обработчик потоков, чтобы определить выполнение условий правила. Когда условие правила выполнено, оно активирует действие, установленное конструктором. Например, может отправляться сообщение электронной почты, чтобы известить инженера, что температура устройства слишком высокая.

## <a name="metadata-management"></a>Управление метаданными

В приложении Azure IoT Central шаблоны устройств определяют поведение и возможности типов устройств. Например, шаблон холодильника указывает данные телеметрии, которые холодильник отправляет в приложение.

![Архитектура шаблона](media/concepts-architecture/template-architecture.png)

В [шаблоне устройства](concepts-device-templates.md) IOT Central содержит:

- **Модель устройства** для указания возможностей устройства, например отправки данных телеметрии, свойств, определяющих состояние устройства, и команд, на которые реагирует устройство. Возможности устройства организованы в один или несколько интерфейсов.
- **Свойства облака** укажите свойства, IOT Central хранилища для устройства. Эти свойства хранятся только в IoT Central и никогда не отправляются на устройство.
- **Представления** указывают панели мониторинга и формы, создаваемые построителем, чтобы оператор мог отслеживать устройства и управлять ими.
- **Настройки** позволяют построителю переопределять некоторые определения в модели устройства, чтобы сделать их более релевантными для приложения IOT Central.

Приложение может иметь одно или несколько имитированных и реальных устройств, созданных на основе каждого шаблона.

## <a name="data-export"></a>Экспорт данных

В приложении IoT Central Azure вы можете [непрерывно экспортировать данные](howto-export-data.md) в собственные концентраторы событий Azure и экземпляры служебной шины Azure. Вы также можете периодически экспортировать данные в учетную запись хранилища BLOB-объектов Azure. IoT Central может экспортировать измерения, устройства и шаблоны устройств.

## <a name="batch-device-updates"></a>Обновления устройства пакетной службы

В приложении IoT Central Azure можно [создавать и запускать задания](howto-run-a-job.md) для управления подключенными устройствами. Эти задания позволяют выполнять групповые обновления свойств или параметров устройства, а также выполнять команды. Например, можно создать задание, чтобы увеличить скорость вентилятора для нескольких рефрижератедных компьютеров.

## <a name="role-based-access-control-rbac"></a>Управление доступом на основе ролей (RBAC)

Каждое приложение IoT Central имеет собственную встроенную систему RBAC. [Администратор может определить правила доступа](howto-manage-users-roles.md) для приложения IOT Central Azure, используя одну из стандартных ролей или создав настраиваемую роль. С помощью ролей можно определить, какие области приложения доступны пользователю и какие действия пользователь может выполнять.

## <a name="security"></a>Безопасность

Возможности безопасности в пределах Azure IoT Central:

- Данные шифруются при передаче и во время хранения.
- Проверка подлинности осуществляется с помощью Azure Active Directory или учетной записи Майкрософт. Поддерживается двухфакторная проверка подлинности.
- Полная изоляция клиентов.
- Безопасность на уровне устройств.

## <a name="ui-shell"></a>Оболочка пользовательского интерфейса

Оболочка пользовательского интерфейса — это современное приложение HTML5 на основе браузера, которое быстро реагирует на запросы.
Администратор может настроить пользовательский интерфейс приложения, применяя пользовательские темы и изменяя ссылки на справку, чтобы они указывали на пользовательские справочные ресурсы. Дополнительные сведения о настройке пользовательского интерфейса см. в статье [Настройка пользовательского интерфейса Azure IOT Central](howto-customize-ui.md) .

Оператор может создавать персонализированные панели мониторинга приложений. Можно использовать несколько панелей мониторинга, отображающих различные данные, и переключаться между ними.

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы узнали об архитектуре IoT Central Azure, рекомендуем следующий шаг — узнать о [подключении устройств](concepts-get-connected.md) в Azure IOT Central.