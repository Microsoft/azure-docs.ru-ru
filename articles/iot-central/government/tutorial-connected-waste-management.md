---
title: Руководство по созданию приложения для интерактивного управления отходами с использованием Azure IoT Central
description: Узнайте, как создать приложение для интерактивного управления отходами с помощью шаблонов приложений Azure IoT Central.
author: miriambrus
ms.author: miriamb
ms.date: 12/11/2020
ms.topic: tutorial
ms.service: iot-central
services: iot-central
ms.openlocfilehash: 8085409c3dc38d17b6fe0d3cb15857b2396e23b6
ms.sourcegitcommit: 6d6030de2d776f3d5fb89f68aaead148c05837e2
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/05/2021
ms.locfileid: "97881350"
---
# <a name="tutorial-create-a-connected-waste-management-app"></a>Руководство по Создание приложения для интеллектуального управления отходами

В этом руководстве показано, как создать приложение для интерактивного управления отходами с использованием Azure IoT Central. 

В частности, вы узнаете, как выполнять следующие задачи: 

* создание приложения с помощью шаблона *интерактивного управления отходами* Azure IoT Central;
* Изучение и настройка панели мониторинга оператора. 
* изучение шаблона устройства для интерактивного мусорного бака;
* Изучение имитированных устройств.
* Изучение и настройка правил.
* Настройка заданий.
* настройка фирменной символики приложения.

## <a name="prerequisites"></a>Предварительные требования

подписка Azure (рекомендуется). В качестве альтернативы вы можете использовать бесплатную пробную версию, предоставляемую на семь дней. Если у вас еще нет подписки, создайте ее на [странице регистрации в Azure](https://aka.ms/createazuresubscription);

## <a name="create-your-app-in-azure-iot-central"></a>Создание приложения в Azure IoT Central

При работе с эти разделом вы создадите в Azure IoT Central приложение на основе шаблона интерактивного управления отходами. Это делается так.

1. Перейдите в [Azure IoT Central](https://aka.ms/iotcentral).

    Если у вас есть подписка Azure, выполните вход с ее учетными данными. В противном случае используйте для входа учетную запись Майкрософт:

    ![Снимок экрана: вход в учетную запись Майкрософт.](./media/tutorial-connectedwastemanagement/sign-in.png)

1. В области слева выберите **Сборка**. Затем выберите вкладку **Государственное учреждение**. На странице государственных учреждений будут показаны несколько шаблонов приложений для соответствующих организаций.

    ![Снимок экрана: страница сборки в Azure IoT Central.](./media/tutorial-connectedwastemanagement/iotcentral-government-tab-overview.png)

1. Выберите шаблон приложения для **интерактивного управления отходами**. Он включает пример шаблона устройства для интерактивного мусорного бака, имитированное устройство, панель мониторинга оператора и предварительно настроенные правила мониторинга.    

1. Выберите **Создать приложение**. Откроется диалоговое окно **Новое приложение**. Укажите сведения для следующих полей:
    * **Имя приложения**. По умолчанию для приложения используется имя **Интерактивное управление отходами**. За именем следует строка уникального идентификатора, который создает Azure IoT Central. При желании вы можете выбрать другое имя приложения. Имя приложения также можно изменить позже.
    * **URL-адрес**. При необходимости можно выбрать нужный URL-адрес. Его можно изменить позже. 
    * **Ценовой план.** Если у вас есть подписка Azure, укажите каталог, подписку Azure и регион в соответствующих полях диалогового окна **Данные для выставления счетов**. Если у вас нет подписки, выберите вариант **Бесплатный**, чтобы активировать семидневную подписку на пробную версию и указать необходимые контактные данные.  

    Дополнительные сведения о каталогах и подписках см. в статье [Краткое руководство. Создание приложения Azure IoT Central](../core/quick-deploy-iot-central.md).

1. В нижней части страницы выберите **Создать**. 

    ![Снимок экрана: диалоговое окно создания приложения в Azure IoT Central.](./media/tutorial-connectedwastemanagement/new-application-connectedwastemanagement.png)
    
    ![Снимок экрана: диалоговое окно сведений для выставления счетов в Azure IoT Central.](./media/tutorial-connectedwastemanagement/new-application-connectedwastemanagement-billinginfo.png)

 
Созданное приложение состоит из таких предварительно настроенных компонентов:
* примеры панелей мониторинга для операторов;
* предварительно определенных примеров шаблонов устройств для интерактивного мусорного бака;
* имитированных устройств для интерактивного мусорного бака;
* правила и задания;
* примера фирменной символики. 

Вы можете в любое время вносить изменения в свое приложение. Теперь изучим приложение и настроим его.  

## <a name="explore-and-customize-the-operator-dashboard"></a>Изучение и настройка панели мониторинга оператора 

Обратите внимание на **панель мониторинга для управления отходами Wide World**, которая отображается после создания приложения.

   ![Снимок экрана: панель мониторинга для управления отходами Wide World.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-dashboard1.png)

Как сборщик вы можете создавать и настраивать на панели мониторинга представления, которые будут использовать операторы. Сначала ознакомимся с панелью мониторинга. 

>[!NOTE]
>Все данные, отображаемые на панели мониторинга, основаны на данных имитированного устройства, которое более подробно рассматривается в следующем разделе. 

Панель мониторинга состоит из разных плиток:

* **Плитка с изображением службы управления отходами Wide World Waste.** Первая на панели мониторинга плитка — это плитка вымышленной службы управления отходами Wide World Waste. Вы можете настроить эту плитку и добавить в свое изображение или удалить ее. 

* **Плитка изображения мусорного бака.** Вы можете использовать плитки изображения и содержимого для создания визуального представления отслеживаемого устройства вместе с описанием. 

* **Плитка КПЭ уровня заполнения.** На плитке отображается значение, передаваемое датчиком *уровня заполнения* в мусорном баке. Датчик уровня заполнения и другие датчики, такие как *анализатор запаха* или *веса*, в мусорном баке можно контролировать удаленно. Оператор может принимать соответствующие меры, например вызывать мусоровоз. 

* **Карта зон для мониторинга отходов.** Эта плитка использует службу Azure Maps, которую можно настроить непосредственно в Azure IoT Central. На фрагменте карты отображается расположение устройств. Попробуйте навести указатель мыши на карте и использовать на ней элементы управления, такие как увеличение, уменьшение и развертывание.

     ![Снимок экрана: карта панели мониторинга шаблона для интерактивного управления отходами.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-dashboard-map.png)


* **Линейчатая диаграмма уровня заполнения, запаха и веса.** На диаграмме можно визуализировать один или несколько типов данных телеметрии устройства. Линейчатую диаграмму также можно развернуть.  

  ![Снимок экрана: линейчатая диаграмма панели мониторинга шаблона для интерактивного управления отходами.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-dashboard-barchart.png)


* **Field Services.** Панель мониторинга содержит ссылку на интеграцию со службами Dynamics 365 Field Services из приложения Azure IoT Central. Например, можно использовать службы Field Services для создания запросов в службу вывоза отходов. 


### <a name="customize-the-dashboard"></a>Настройка панели мониторинга 

Вы можете настроить панель мониторинга, выбрав меню **Изменить**. Затем вы можете добавить новые плитки или настроить существующие. Вот как выглядит панель мониторинга в режиме правки: 

![Снимок экрана: панель мониторинга шаблона для интерактивного управления отходами в режиме правки.](./media/tutorial-connectedwastemanagement/edit-dashboard.png)

Кроме того, вы можете выбрать **+ Создать**, чтобы создать панель мониторинга и настроить ее с нуля. Вы можете создать несколько панелей мониторинга и переключаться между ними с помощью меню панелей. 

## <a name="explore-the-device-template"></a>Изучение шаблона устройства

В шаблоне устройства в Azure IoT Central определены возможности устройства, среди которых могу т быть телеметрия, свойства или команды. Как автор решения вы можете определить шаблоны, которые представляют возможности подключаемых устройств. 

Приложение для интерактивного управления отходами поставляется с примером шаблона для интерактивного мусорного бака.

Чтобы просмотреть шаблон устройства, сделайте следующее:

1. В области приложения Azure IoT Central слева в выберите **Шаблоны устройств**. 

    ![Снимок экрана: список шаблонов устройств в приложении.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-devicetemplate.png)

1. В списке **Шаблоны устройств** выберите **Интерактивный мусорный бак**.

1. Изучите возможности шаблона устройства. Вы увидите определяемые шаблоном датчики **уровня заполнения**, **веса** и **расположения**, а также **анализатор запаха** и пр.

   ![Снимок экрана: сведения, предоставляемые в шаблоне устройства для интерактивного мусорного бака.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-devicetemplate-connectedbin.png)


### <a name="customize-the-device-template"></a>Настройка шаблона устройства

Чтобы настроить шаблон, сделайте следующее:
1. Выберите **Настроить** в меню шаблона устройства.
1. Найдите тип телеметрии **Анализатор запаха**.
1. Замените **отображаемое имя** **Анализатор запаха** на **Уровень запаха**.
1. Попробуйте изменить единицу измерения или установите **минимальное** и **максимальное** значения.
1. Щелкните **Сохранить**. 

### <a name="add-a-cloud-property"></a>Добавление свойства облака 

Это делается так.
1. В меню шаблона устройства выберите **Облачное свойство**.
1. Выберите **Добавить облачное свойство**. В Azure IoT Central можно добавить свойство, которое относится к устройству, но не должно быть отправлено устройством. Один из примеров такого свойства — порог для оповещения, относящийся к области установки, сведениям о ресурсе или обслуживании. 
1. Щелкните **Сохранить**. 
 
### <a name="views"></a>Представления 
Шаблон интерактивного мусорного бака поставляется с предварительно определенными представлениями. Изучите представления и при необходимости обновите их. В представлениях определяется, как операторы видят данные устройства и вводят облачные свойства. 

  ![Снимок экрана: представления "Шаблоны устройств" для шаблона интерактивного управления отходами.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-devicetemplate-views.png)

### <a name="publish"></a>Публикация 

Если вы внесли изменения, обязательно опубликуйте шаблон устройства. 

### <a name="create-a-new-device-template"></a>Создание шаблона нового устройства 

Чтобы создать шаблон устройства, нажмите кнопку **+ Создать**, и выполните приведенные инструкции. Вы можете создать настраиваемый шаблон устройства с нуля или выбрать шаблон из каталога устройств Azure. 

## <a name="explore-simulated-devices"></a>Изучение имитированных устройств

В Azure IoT Central вы можете также создавать имитированные устройства для тестирования шаблона устройства и приложения. 

Приложение для интерактивного управления отходами поставляется с двумя имитированными устройствами, связанными с шаблоном интерактивного мусорного бака. 

### <a name="view-the-devices"></a>Просмотр устройств

1. В области Azure IoT Central слева выберите **Устройство**. 

   ![Снимок экрана: устройства для шаблона интерактивного управления отходами.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-devices.png)

1. Выберите устройство **Интерактивный мусорный бак**.  

     ![Снимок экрана: свойства устройств для шаблона интерактивного управления отходами.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-devices-bin1.png)

1. Перейдите на вкладку **Свойства облака**. Измените значение параметра **Порог оповещения о заполнении бака** с **95** на **100**. 

Ознакомьтесь со вкладками **Свойства устройства** и **Панель мониторинга устройства**. 

> [!NOTE]
> Все вкладки настроены с помощью представлений шаблонов устройств.

### <a name="add-new-devices"></a>Добавление новых устройств

Вы можете добавить новые устройства, нажав кнопку **+ Создать** на вкладке **Устройства**. 

## <a name="explore-and-configure-rules"></a>Изучение и настройка правил

В Azure IoT Central можно создавать правила для автоматического мониторинга телеметрии устройств и активации действий при выполнении одного или нескольких условий. Действия могут включать отправку уведомлений по электронной почте, активацию действия Power Automate или запуск действия веб-перехватчика для отправки данных в другие службы.

В приложении для интерактивного управления отходами есть четыре примера правил.

### <a name="view-rules"></a>Просмотр правил
1. В области Azure IoT Central слева выберите **Правила**.

   ![Снимок экрана: правила для шаблона интерактивного управления отходами.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-rules.png)

1. Выберите **Оповещение о заполнении бака**.

     ![Снимок экрана: окно оповещения о заполнении бака.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-binfullalert.png)

 1. Перед активацией **оповещения о заполнении бака** проверяется следующее условие: **Уровень заполнения больше или равен порогу для оповещения о заполнении бака**.

    **Порог для оповещения о заполнении бака** — это облачное свойство, которое определяется в шаблоне устройства для интерактивного мусорного бака. 

Теперь создадим действие отправки сообщения.

### <a name="create-an-email-action"></a>Создание действия отправки сообщения

В списке правила **Действия** вы можете настроить действие электронной почты:
1. Нажмите **+ Электронная почта**. 
1. В качестве **отображаемого имени** введите **Оповещение о высоком уровне pH**.
1. В поле **Кому** введите адрес электронной почты, связанный с вашей учетной записью Azure IoT Central. 
1. При необходимости введите заметку, которая будет включена в текст сообщения электронной почты.
1. Выберите **Готово** > **Сохранить**. 

Если будет выполнено настроенное условие, вы получите сообщение электронной почты.

>[!NOTE]
>Приложение отправляет сообщения электронной почты при каждом выполнении условия. Отключите правило, чтобы прекратить получение сообщений при соблюдении условия автоматического правила. 
  
Чтобы создать новое правило, в области **Правила** слева выберите **+Создать**.

## <a name="configure-jobs"></a>Настройка заданий

В Azure IoT Central с помощью заданий можно активировать обновления свойств устройства или облака на нескольких устройствах. Вы также можете использовать задания для активации команд устройства на нескольких устройствах. Azure IoT Central автоматизирует для вас рабочий процесс. 

1. В области Azure IoT Central слева выберите **Задания**. 
1. Выберите **+ Создать** и настройте одно или несколько заданий. 

## <a name="customize-your-application"></a>Настройка приложения 

Создатель приложения может изменить несколько параметров, чтобы настроить взаимодействие с пользователем в приложении.

### <a name="change-the-application-theme"></a>Изменение темы приложения

Это делается так.
1. Перейдите к разделу **Администрирование** > **Настройка приложения**.
1. Выберите **Изменить**, чтобы выбрать изображение для отправки в качестве **логотипа приложения**.
1. Выберите **Изменить**, чтобы выбрать изображение для отправки в качестве **значка браузера** (изображение, которое будет отображаться на вкладках браузера).
1. Вы также можете заменить цвета браузера по умолчанию, добавив шестнадцатеричные коды цветов HTML. Для этой цели используйте поля **Заголовок** и **Выделение**.

   ![Снимок экрана: шаблон интерактивного управления отходами, настройка приложения.](./media/tutorial-connectedwastemanagement/connectedwastemanagement-customize-your-application.png)

1. Кроме того, вы можете изменять изображения для приложений. Последовательно выберите **Администрирование** > **Параметры приложения** > **Выбор изображения**, чтобы выбрать изображения для отправки в качестве изображения для приложения.
1. Кроме того, вы можете изменить тему. Для этого выберите **Параметры** в заголовке приложения.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы не собираетесь дальше использовать это приложение, удалите его, выполнив следующие действия.

1. В области слева в приложении Azure IoT Central выберите **Администрирование**.
1. Последовательно выберите элементы **Параметры приложения** > **Удалить**.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [эталонной архитектуре решения для интеллектуального мониторинга отходов](./concepts-connectedwastemanagement-architecture.md)
