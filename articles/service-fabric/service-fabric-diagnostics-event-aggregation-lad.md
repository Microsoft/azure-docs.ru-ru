---
title: Агрегирование событий с помощью система диагностики Azure Linux
description: Ознакомьтесь со сведениями об агрегировании и сборе событий с использованием LAD для мониторинга и диагностики кластеров Azure Service Fabric.
ms.topic: conceptual
ms.date: 2/25/2019
ms.openlocfilehash: bd5efc6b661bf25ce7946cda0bcfa01be4c351a7
ms.sourcegitcommit: a9ce1da049c019c86063acf442bb13f5a0dde213
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/27/2021
ms.locfileid: "105628940"
---
# <a name="event-aggregation-and-collection-using-linux-azure-diagnostics"></a>Агрегирование и сбор событий с помощью системы диагностики Azure для Linux
> [!div class="op_single_selector"]
> * [Windows](service-fabric-diagnostics-event-aggregation-wad.md)
> * [Linux](service-fabric-diagnostics-event-aggregation-lad.md)
>
>

Во время работы кластера Azure Service Fabric рекомендуется централизованно собирать журналы со всех узлов. Централизованное хранение журналов упрощает анализ и устранение неполадок в кластере, а также в приложениях и службах, работающих в этом кластере.

Один из способов отправки и сбора журналов заключается в использовании расширения системы диагностики Azure для Linux (LAD), которое отправляет журналы в службу хранилища Azure, а также может отправлять журналы в Azure Application Insights или Центры событий. Вы также можете использовать внешний процесс для чтения событий из хранилища и их размещения в продукте платформы анализа, например [Azure Monitor журналов](./service-fabric-diagnostics-oms-setup.md) или другого решения для анализа журналов.

## <a name="log-and-event-sources"></a>Источники журналов и событий

### <a name="service-fabric-platform-events"></a>События платформы Service Fabric
Service Fabric создает несколько готовых журналов посредством [LTTng](https://lttng.org), включая журналы операционных событий и событий среды выполнения. Эти журналы хранятся в расположении, указанном в шаблоне Resource Manager кластера. Чтобы получить или задать сведения об учетной записи хранения, выполните поиск по тегу **AzureTableWinFabETWQueryable** и найдите **StoreConnectionString**.

### <a name="application-events"></a>События приложения
 События, которые создаются кодом ваших приложений и служб согласно вашим указаниям во время инструментирования программного обеспечения. Вы можете использовать любое решение для ведения журналов, которое создает текстовые файлы журнала, например LTTng. Дополнительные сведения см. в описании трассировки вашего приложения в документации по LTTng.

[Мониторинг и диагностика служб в настройке разработки на локальном компьютере](service-fabric-diagnostics-how-to-monitor-and-diagnose-services-locally-linux.md).

## <a name="deploy-the-diagnostics-extension"></a>Развертывание расширения системы диагностики
Первым шагом при сборе журналов является развертывание расширения системы диагностики на каждой виртуальной машине в кластере Service Fabric. Расширение системы диагностики собирает журналы на каждой виртуальной машине и отправляет их в указанную учетную запись хранения. 

Чтобы развернуть расширение системы диагностики на виртуальных машинах в кластере в ходе его создания, переключите параметр **Диагностика** в состояние **Вкл**. После создания кластера этот параметр нельзя изменить с помощью портала. Соответствующие изменения необходимо будет внести в шаблоне Resource Manager.

Это необходимо для того, чтобы настроить агент LAD для наблюдения за указанными файлами журнала. Каждый раз при добавлении новой стройки в файл он создает запись системного журнала, которая отправляется в указанное вами хранилище (таблицу).


## <a name="next-steps"></a>Дальнейшие шаги

1. Дополнительные сведения о том, какие события нужно анализировать при устранении неполадок, см. в [документации по LTTng](https://lttng.org/docs) и статье [Использование диагностического расширения Linux для мониторинга данных о состоянии и производительности виртуальных машин под управлением Linux](../virtual-machines/extensions/diagnostics-linux.md).
2. [Настройте агент Log Analytics](service-fabric-diagnostics-event-analysis-oms.md) для сбора метрик, мониторинга развернутых в кластере контейнеров и визуализации журналов. 
