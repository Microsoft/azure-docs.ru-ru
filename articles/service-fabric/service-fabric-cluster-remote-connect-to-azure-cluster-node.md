---
title: Удаленное подключение к узлу кластера Azure Service Fabric
description: Узнайте, как установить удаленное подключение к экземпляру масштабируемого набора (узел кластера Service Fabric).
ms.topic: conceptual
ms.date: 03/23/2018
ms.openlocfilehash: 98d573af4fc2026134e75d4caf24a09e57e52c87
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96012550"
---
# <a name="remote-connect-to-a-virtual-machine-scale-set-instance-or-a-cluster-node"></a>Удаленное подключение к экземпляру масштабируемого набора виртуальных машин или узлу кластера
В кластере Service Fabric в Azure для каждого определяемого типа узла кластера [настраивается отдельный масштаб виртуальных машин](service-fabric-cluster-nodetypes.md).  Вы можете установить удаленное подключение к определенным экземплярам масштабируемого набора (узлам кластера).  В отличие от одноэкземплярных виртуальных машин, экземпляры масштабируемых наборов не имеют собственных виртуальных IP-адресов. Поэтому поиск IP-адреса и порта, которые можно использовать для удаленного подключения к определенному экземпляру, может оказаться непростой задачей.

Чтобы найти IP-адрес и порт, которые можно использовать для удаленного подключения к определенному экземпляру, выполните следующие действия.

1. Получите правила NAT для входящих подключений для протокола удаленного рабочего стола (RDP).

    Обычно у каждого типа узла, определенного в кластере, есть собственные виртуальные IP-адреса и выделенная подсистема балансировки нагрузки. По умолчанию имя подсистемы балансировки нагрузки для типа узла имеет следующий формат: *LB-{имя кластера}-{тип узла}*. Например, *LB-mycluster-FrontEnd*. 
    
    На странице подсистемы балансировки нагрузки в портал Azure выберите **Параметры**  >  **правила NAT для входящего трафика**. 

    ![Снимок экрана со страницей балансировщика нагрузки в портал Azure. В меню слева в разделе параметры выбраны правила NAT для входящего трафика.](./media/service-fabric-cluster-remote-connect-to-azure-cluster-node/lb-window.png)

    На следующем снимке экрана показаны правила NAT для входящих подключений для типа узла с именем FrontEnd: 

    ![Снимок экрана, показывающий правила NAT для входящего трафика для балансировщика нагрузки. Для каждого правила указаны имя, IP-версия, назначение, цель и служба.](./media/service-fabric-cluster-remote-connect-to-azure-cluster-node/nat-rules.png)

    Для каждого узла IP-адрес отображается в столбце **Назначение**, столбец **Целевой объект** предоставляет экземпляр масштабируемого набора, а столбец **Служба** содержит номер порта. При удаленном подключении каждому узлу в возрастающем порядке выделяется порт, начиная с порта 3389.

    Кроме того, можно найти правила NAT в разделе `Microsoft.Network/loadBalancers` шаблона Resource Manager для кластера.
    
2. Чтобы проверить сопоставление входного и целевого портов узла, щелкните его правило и просмотрите значение **целевого порта**. На следующем снимке экрана показано правило NAT для входящих подключений для узла **FrontEnd (Instance 1)** из предыдущего шага. Обратите внимание, что несмотря на то, что номер порта (входящий трафик) — 3390, целевой порт сопоставляется с портом 3389, портом для службы протокола удаленного рабочего стола на целевом сервере.  

    ![Сопоставление целевых портов](./media/service-fabric-cluster-remote-connect-to-azure-cluster-node/port-mapping.png)

    По умолчанию для кластеров Windows целевым портом является порт 3389, который сопоставляется со службой протокола удаленного рабочего стола на целевом узле. Для кластеров Linux целевым портом является порт 22, который сопоставляется со службой Secure Shell (SSH).

3. Установите удаленное подключение к определенному узлу (экземпляр масштабируемого набора). Можно использовать имя пользователя и пароль, заданные при создании кластера, или любые другие настроенные учетные данные. 

    На следующем снимке экрана показано подключение к удаленному рабочему столу к узлу **FrontEnd (Instance 1)** в кластере Windows:
    
    ![Подключение к удаленному рабочему столу](./media/service-fabric-cluster-remote-connect-to-azure-cluster-node/rdp-connect.png)

    К узлам Linux можно подключиться с помощью SSH (для краткости приведенный ниже пример повторно использует тот же IP-адрес и порт):

    ``` bash
    ssh SomeUser@40.117.156.199 -p 3390
    ```


На следующем этапе ознакомьтесь с указанными ниже статьями:
* Дополнительные сведения о возможности развертывания в любом месте и сравнении с кластерами под управлением Azure см. в статье [Создание кластеров Service Fabric в Windows Server или Linux](service-fabric-deploy-anywhere.md).
* Сведения о [безопасности кластера](service-fabric-cluster-security.md).
* [Обновление значений диапазона портов RDP](./scripts/service-fabric-powershell-change-rdp-port-range.md) в кластере виртуальных машин после развертывания
* [Обновление имени пользователя и пароля администратора](./scripts/service-fabric-powershell-change-rdp-user-and-pw.md) для виртуальных машин кластера

