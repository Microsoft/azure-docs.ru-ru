---
title: Упаковка существующего исполняемого файла в Azure Service Fabric
description: Узнайте, как упаковать существующее приложение в качестве гостевого исполняемого файла для его развертывания в кластере Service Fabric.
ms.topic: conceptual
ms.date: 03/15/2018
ms.openlocfilehash: 8b808d092001196a4d2150e44d508e031db95554
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96017752"
---
# <a name="deploy-an-existing-executable-to-service-fabric"></a>Развертывание существующего исполняемого файла вручную
В Azure Service Fabric можно запустить как службу приложение любого типа, в том числе приложения Node.js, Java или C++. В Service Fabric такие типы служб называются гостевыми исполняемыми файлами.

Гостевые исполняемые файлы обрабатываются в Service Fabric как службы без отслеживания состояния. Это значит, что они будут размещены на узлах кластера на основе доступности и других метрик. В этой статье описывается, как упаковать и развернуть гостевой исполняемый файл в кластере Service Fabric, используя Visual Studio или служебную программу командной строки.

## <a name="benefits-of-running-a-guest-executable-in-service-fabric"></a>Преимущества запуска гостевого исполняемого файла в Service Fabric
Запуск гостевого исполняемого файла в кластере Service Fabric имеет несколько преимуществ.

* обеспечение высокой доступности; Каждый набор масштабирования помещает свои виртуальные машины в группу доступности с 5 доменами сбоя (FD) и 5 доменами обновления (UD) для обеспечения доступности (дополнительные сведения о доменах сбоя и обновления см. Приложения, работающие в среде Service Fabric, отличаются высоким уровнем доступности. Service Fabric обеспечивает выполнение экземпляров приложения.
* Мониторинг исправности. Service Fabric наблюдает за работоспособностью приложений и в случае сбоя предоставляет диагностические данные.   
* Управление жизненным циклом приложений. Service Fabric не только обновляет приложения без ущерба для работы пользователей, но и автоматически откатывает приложение к предыдущей версии, если во время обновления возникло событие ухудшения работоспособности.    
* Плотность. В одном кластере могут работать несколько приложений, что позволяет отказаться от использования отдельного оборудования для каждого приложения.
* Возможность обнаружения: с помощью REST можно вызвать службу именования Service Fabric для поиска других служб в кластере. 

## <a name="samples"></a>Примеры
* [Пример для упаковки и развертывания гостевого исполняемого файла](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started)
* [Пример двух гостевых исполняемых файлов (C# и Node.js), которые взаимодействуют через службу именования с помощью REST](https://github.com/Azure-Samples/service-fabric-dotnet-containers)

## <a name="overview-of-application-and-service-manifest-files"></a>Обзор файлов манифестов приложений и служб
При развертывании гостевого исполняемого файла рекомендуем ознакомиться с моделью развертывания и упаковки Service Fabric, которая описана в [этой статье](service-fabric-application-model.md). Модель упаковки Service Fabric основана на двух XML-файлах — манифестах приложения и службы. Определение схемы для файла ApplicationManifest.xml и ServiceManifest.xml устанавливается с пакетом SDK в расположении *C:\Program Files\Microsoft SDKs\Service Fabric\schemas\ServiceFabricServiceModel.xsd*.

* **Манифест приложения.** Этот манифест используется для описания приложения. В файле указаны службы, из которых состоит приложение, и другие параметры развертывания для одной или нескольких служб (например, число экземпляров).

  В Service Fabric приложение — это единица развертывания и обновления. Приложение может обновляться как одна единица, для которой выполняется управление потенциальными сбоями и откатами. Service Fabric гарантирует, что процесс обновления либо будет выполнен успешно, либо (в случае сбоя) не оставит приложение в неизвестном или нестабильном состоянии.
* **Манифест служб.** Манифест служб описывает компоненты службы. В этом файле содержится такая информация, как имя и тип службы, ее код и конфигурация. Манифест службы также включает некоторые дополнительные параметры, которые могут использоваться для настройки службы после ее развертывания.

## <a name="application-package-file-structure"></a>Структура файла пакета приложения
Чтобы развернуть приложение в Service Fabric, такое приложение должно соответствовать предопределенной структуре каталогов. Ниже приведен пример этой структуры.

```
|-- ApplicationPackageRoot
    |-- GuestService1Pkg
        |-- Code
            |-- existingapp.exe
        |-- Config
            |-- Settings.xml
        |-- Data
        |-- ServiceManifest.xml
    |-- ApplicationManifest.xml
```

Каталог ApplicationPackageRoot содержит файл ApplicationManifest.xml, определяющий приложение. Дочерний каталог для каждой службы, включенной в приложение, используется для хранения всех артефактов, необходимых службе. Подкаталоги включают файл ServiceManifest.xml и, как правило, следующие каталоги:

* *Код*. В этом каталоге содержится код службы.
* *Конфигурация*. Этот каталог содержит файл Settings.xml (и другие файлы при необходимости), к которому служба может получить доступ во время выполнения для получения конкретных параметров конфигурации.
* *Данные*. Здесь хранятся дополнительные локальные данные, которые могут потребоваться службе. Обратите внимание, что в этом каталоге могут храниться только временные данные. Service Fabric не копирует и не реплицирует изменения, внесенные в каталог Data, при перемещении службы (например, во время отработки отказа).

> [!NOTE]
> Если каталоги `config` и `data` вам не нужны, не создавайте их.
>
>

## <a name="next-steps"></a>Дальнейшие действия
В приведенных ниже статьях описаны связанные сведения и задачи.
* [Развертывание гостевого исполняемого файла](service-fabric-deploy-existing-app.md)
* [Развертывание нескольких пользовательских приложений](./service-fabric-deploy-existing-app.md)
* [Создание первого приложения в качестве гостевого исполняемого файла с помощью Visual Studio](quickstart-guest-app.md)
* [Пример для упаковки и развертывания гостевого исполняемого файла](https://github.com/Azure-Samples/service-fabric-dotnet-getting-started), включая ссылку на предварительную версию средства упаковки
* [Пример двух гостевых исполняемых файлов (C# и Node.js), которые взаимодействуют через службу именования с помощью REST](https://github.com/Azure-Samples/service-fabric-containers)
