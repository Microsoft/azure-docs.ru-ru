---
title: Предоставление учетных данных сервера для обнаружения приложений, зависимостей и экземпляров SQL Server и баз данных
description: Сведения о том, как указать учетные данные сервера в диспетчере конфигурации устройств
author: vikram1988
ms.author: vibansa
ms.manager: abhemraj
ms.topic: how-to
ms.date: 01/26/2021
ms.openlocfilehash: 2359855ce3949eb022a03f6e8e2dbc05f98907db
ms.sourcegitcommit: f3ec73fb5f8de72fe483995bd4bbad9b74a9cc9f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "102054999"
---
# <a name="provide-server-credentials-to-discover-applications-dependencies-and-sql-server-instances-and-databases"></a>Предоставление учетных данных сервера для обнаружения приложений, зависимостей и экземпляров SQL Server и баз данных

В этой статье приводятся сведения о добавлении нескольких учетных данных сервера в диспетчере конфигурации устройств для инвентаризации программного обеспечения (Обнаружение установленных приложений), анализ зависимостей без агента и обнаружение SQL Server экземпляров и баз данных.

> [!Note]
> Обнаружение и оценка SQL Server экземпляров и баз данных, работающих в среде VMware, теперь находится на этапе предварительной версии. Чтобы испытать эту функцию, используйте [**эту ссылку**](https://aka.ms/AzureMigrate/SQL) для создания проекта в **Восточная Австралияном** регионе. Если у вас уже есть проект в Восточная Австралия и вы хотите испытать эту функцию, убедитесь, что вы выполнили эти [**Предварительные требования**](how-to-discover-sql-existing-project.md) на портале.

[Устройство "миграция Azure](migrate-appliance.md) " — это упрощенное устройство, используемое службой "миграция Azure": Оценка серверов для обнаружения локальных серверов, работающих в среде VMware, и отправки в Azure конфигурации сервера и метаданных производительности. Устройство также можно использовать для инвентаризации программного обеспечения, анализа зависимостей без агента и обнаружения экземпляров SQL Server и баз данных.

Если вы хотите использовать эти функции, можно указать учетные данные сервера, выполнив следующие действия. Устройство будет пытаться автоматически сопоставлять учетные данные с серверами для выполнения функций обнаружения.

## <a name="add-credentials-for-servers-running-in-vmware-environment"></a>Добавление учетных данных для серверов, работающих в среде VMware

### <a name="types-of-server-credentials-supported"></a>Типы поддерживаемых учетных данных сервера

В диспетчере конфигурации устройства можно добавить несколько учетных данных сервера, которые могут быть учетными данными домена, не домена (Windows или Linux) или SQL Server проверки подлинности.

Типы поддерживаемых учетных данных сервера перечислены в следующей таблице:

Тип учетных данных | Описание
--- | ---
**Учетные данные домена** | Вы можете добавить **учетные данные домена** , выбрав параметр в раскрывающемся списке **Добавить учетные данные** модальные. <br/><br/> Чтобы предоставить учетные данные домена, необходимо указать **имя домена** , которое должно быть указано в формате полного доменного имени (например, prod.Corp.contoso.com). <br/><br/> Также необходимо указать понятное имя для учетных данных, имени пользователя и пароля. <br/><br/> Добавленные учетные данные домена будут автоматически проверены на наличие подлинности в Active Directory домена. Это позволяет предотвратить блокировку учетных записей, когда устройство пытается сопоставлять учетные данные домена с обнаруженными серверами. <br/><br/> Устройство не будет пытаться сопоставлять учетные данные домена, которые не прошли проверку. Чтобы продолжить инвентаризацию программного обеспечения, необходимо иметь хотя бы один успешно проверенный доменные учетные данные или хотя бы один Недоменный учетные данные.<br/><br/>Учетные данные домена, автоматически сопоставленные с серверами Windows, будут использоваться для инвентаризации программного обеспечения. их также можно использовать для обнаружения экземпляров SQL Server и баз данных _(если на серверах SQL Server настроен режим проверки подлинности Windows)_.<br/> Дополнительные [сведения](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/authentication-in-sql-server) о типах режимов проверки подлинности, поддерживаемых на серверах SQL Server.
**Учетные данные, не являющиеся доменами (Windows или Linux)** | Вы можете добавить **Windows (без домена)** или **Linux (без домена)** , выбрав необходимый параметр в раскрывающемся списке **Добавить учетные данные** модальные. <br/><br/> Необходимо указать понятное имя для учетных данных, имени пользователя и пароля.
**SQL Server учетные данные проверки подлинности** | SQL Server учетные данные для **проверки подлинности** можно добавить, выбрав параметр в раскрывающемся списке **Добавить учетные данные** модальные. <br/><br/> Необходимо указать понятное имя для учетных данных, имени пользователя и пароля. <br/><br/> Этот тип учетных данных можно добавить для обнаружения SQL Server экземпляров и баз данных, работающих в среде VMware, если на серверах SQL Server настроен режим проверки подлинности SQL Server.<br/> Дополнительные [сведения](https://docs.microsoft.com/dotnet/framework/data/adonet/sql/authentication-in-sql-server) о типах режимов проверки подлинности, поддерживаемых на серверах SQL Server.<br/><br/> Необходимо указать хотя бы один успешно проверенный доменный учетные данные или хотя бы одну учетную запись Windows (не доменных), чтобы устройство выполнило инвентаризацию программного обеспечения для обнаружения SQL, установленного на серверах, прежде чем использовать SQL Server учетные данные проверки подлинности для обнаружения SQL Server экземпляров и баз данных.

Проверьте разрешения, необходимые для учетных данных Windows или Linux, чтобы выполнить инвентаризацию программного обеспечения, анализ зависимостей без агента и обнаружение экземпляров и баз данных SQL Server.

### <a name="required-permissions"></a>Необходимые разрешения

В следующей таблице перечислены разрешения, необходимые для учетных данных сервера, указанных на устройстве, для выполнения соответствующих функций.

Функция | Учетные данные Windows | Учетные данные Linux
---| ---| ---
**Инвентаризация программного обеспечения** | Учетная запись гостевого пользователя | Обычная или обычная учетная запись пользователя (разрешения на доступ не для sudo)
**Обнаружение экземпляров SQL Server и баз данных** | Учетная запись пользователя, которая является членом роли сервера sysadmin. | _Сейчас не поддерживается_
**Анализ зависимостей без агента** | Учетная запись домена или не домена (локальная) с разрешениями администратора | Корневая учетная запись пользователя или <br/> Учетная запись с такими разрешениями для файлов/бин/нетстат и/бин/ЛС: CAP_DAC_READ_SEARCH и CAP_SYS_PTRACE.<br/><br/> Задайте эти возможности с помощью следующих команд: <br/><br/> sudo сеткап CAP_DAC_READ_SEARCH, CAP_SYS_PTRACE = EP/бин/ЛС<br/><br/> sudo сеткап CAP_DAC_READ_SEARCH, CAP_SYS_PTRACE = EP/бин/нетстат

### <a name="recommended-practices-to-provide-credentials"></a>Рекомендации по предоставлению учетных данных

- Рекомендуется создать выделенную учетную запись пользователя домена с [необходимыми разрешениями](add-server-credentials.md#required-permissions), которая ограничивается выполнением инвентаризации программного обеспечения, анализом зависимостей без агента и обнаружением экземпляров SQL Server и баз данных на нужных серверах.
- Для запуска инвентаризации программного обеспечения рекомендуется предоставить по крайней мере один проверенный учетные данные домена или хотя бы один Недоменный учетные данные.
- Для обнаружения экземпляров SQL Server и баз данных можно указать учетные данные домена, если на серверах SQL Server настроен режим проверки подлинности Windows.
-  Можно также указать SQL Server учетные данные для проверки подлинности, если на серверах SQL Server настроен режим проверки подлинности SQL Server, но рекомендуется предоставить по крайней мере один проверенный учетные данные домена или хотя бы один учетные данные Windows (не домена), чтобы устройство было сначала выполнять инвентаризацию программного обеспечения.

## <a name="credentials-handling-on-appliance"></a>Обработка учетных данных на устройстве

- Все учетные данные, указанные в диспетчере конфигурации устройства, хранятся локально на сервере устройства и не отправляются в Azure.
- Учетные данные, хранящиеся на сервере устройства, шифруются с помощью API защиты данных (DPAPI).
- После добавления учетных данных устройство пытается автоматически сопоставлять учетные данные для выполнения обнаружения на соответствующих серверах.
- Устройство использует учетные данные, автоматически сопоставленные на сервере для всех последующих циклов обнаружения, пока учетные данные могут получить необходимые данные обнаружения. Если учетные данные перестанут работать, устройство снова попытается выполнить карту из списка добавленных учетных данных и продолжить текущее обнаружение на сервере.
- Добавленные учетные данные домена будут автоматически проверены на наличие подлинности в Active Directory домена. Это позволяет предотвратить блокировку учетных записей, когда устройство пытается сопоставлять учетные данные домена с обнаруженными серверами. Устройство не будет пытаться сопоставлять учетные данные домена, которые не прошли проверку.
- Если устройство не может сопоставлять учетные данные домена или не домены с сервером, вы увидите состояние "учетные данные недоступны" для сервера в проекте.

## <a name="next-steps"></a>Дальнейшие действия

Ознакомьтесь с учебниками по [обнаружению серверов, работающих в среде VMware](tutorial-discover-vmware.md) .