---
title: Поддержка миграции VMware в службе "миграция Azure"
description: Сведения о поддержке миграции виртуальных машин VMware в Azure Migration.
author: anvar-ms
ms.author: anvar
ms.manager: bsiva
ms.topic: conceptual
ms.date: 06/08/2020
ms.openlocfilehash: cbb1db15eed53af1d0e4590e1b228e5e47680560
ms.sourcegitcommit: d135e9a267fe26fbb5be98d2b5fd4327d355fe97
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/10/2021
ms.locfileid: "102614927"
---
# <a name="support-matrix-for-vmware-migration"></a>Таблица поддержки для переноса виртуальных машин VMware

В этой статье приведены общие сведения о параметрах и ограничениях для переноса виртуальных машин VMware с помощью службы миграции [Azure: миграция сервера](migrate-services-overview.md#azure-migrate-server-migration-tool) . Если вы ищете информацию о том, как оценить виртуальные машины VMware для миграции в Azure, ознакомьтесь с [матрицей поддержки оценки](migrate-support-matrix-vmware.md).


## <a name="migration-options"></a>Варианты переноса

Перенести виртуальные машины VMware можно несколькими способами.

- **Использование миграции без агента**. Перенесите виртуальные машины, не требуя установки каких-либо компонентов. Вы развертываете [устройство "миграция Azure](migrate-appliance.md) " для миграции без агента.
- **Использование миграции на основе агентов**. Установите на виртуальной машине агент для репликации. Для миграции на основе агентов вы развертываете [устройство репликации](migrate-replication-appliance.md).

Ознакомьтесь с [этой статьей](server-migrate-overview.md) , чтобы выяснить, какой метод вы хотите использовать.

## <a name="migration-limitations"></a>Ограничения миграции

- Для репликации можно выбрать до 10 виртуальных машин с помощью портал Azure. Если вы хотите перенести другие компьютеры, выполните репликацию в группы из 10. Количество виртуальных машин, которые можно реплицировать с помощью командлетов PowerShell, не ограничено. Мы рекомендуем реплицировать не более 500 виртуальных машин за раз из одного vCenter с помощью PowerShell, чтобы обеспечить оптимальную производительность.
- Для миграции без агента VMware можно одновременно запустить до 500 репликаций из каждой vCenter Server.

## <a name="agentless-migration"></a>Миграция без агента 

В этом разделе перечислены требования для миграции без агента.

### <a name="vmware-requirements-agentless"></a>Требования к VMware (без агента)

В таблице перечислены требования гипервизора VMware.

**VMware** | **Сведения**
--- | ---
**VMware vCenter Server** | Версия 5,5, 6,0, 6,5, 6,7, 7,0.
**VMware vSphere узла ESXI** | Версия 5,5, 6,0, 6,5, 6,7, 7,0.
**vCenter Server разрешения** | Миграция без агента использует [устройство](migrate-appliance.md)миграции. Устройству требуются следующие разрешения в vCenter Server:<br/><br/> - **Хранилище данных. Обзор** (хранилище данных — > обзор хранилища данных): Разрешить обзор файлов журналов виртуальных машин для устранения неполадок при создании и удалении моментальных снимков.<br/><br/> - **DataStore. FileManagement** (хранилище данных-> файловых операций низкого уровня): разрешить операции чтения, записи, удаления и переименования в браузере хранилища данных для устранения неполадок при создании и удалении моментальных снимков.<br/><br/> - **VirtualMachine.Config. Отслеживания изменений** (виртуальная машина — > отслеживание изменений на диске). Разрешите включить или отключить отслеживание изменений дисков виртуальных машин, чтобы запрашивать измененные блоки данных между моментальными снимками.<br/><br/> - **VirtualMachine.Config. Дисклеасе** (виртуальная машина — > Аренда диска). Разрешите операции аренды диска для виртуальной машины, чтобы прочитать диск с помощью пакета средств разработки VMware vSphere виртуального диска (вддк).<br/><br/> - **VirtualMachine. подготовка. дискрандомреад** (виртуальная машина — > подготовка — > разрешить доступ к диску только для чтения). Разрешите открытие диска на виртуальной машине, чтобы прочитать диск с помощью вддк.<br/><br/> - **VirtualMachine. подготовка. дискрандомакцесс** (виртуальная машина — > подготовка — > разрешить доступ к диску). Разрешите открытие диска на виртуальной машине, чтобы прочитать диск с помощью вддк.<br/><br/> - **VirtualMachine. подготовка. жетвмфилес** (виртуальная машина — > подготовка — > разрешить загрузку виртуальных машин): разрешает операции чтения для файлов, связанных с виртуальной машиной, скачивать журналы и устранять неполадки в случае сбоя.<br/><br/> - **VirtualMachine. State. \* *_ (Виртуальная машина — > Управление моментальными снимками). Разрешите Создание и Управление моментальными снимками виртуальных машин для репликации. <br/> <br/> -_* VirtualMachine. взаимодействие. выключена** (виртуальная машина-> взаимодействие > выключение питания): разрешить выключение виртуальной машины во время миграции в Azure.



### <a name="vm-requirements-agentless"></a>Требования к виртуальной машине (без агента)

В таблице приведены требования к миграции без агента для виртуальных машин VMware.

**Поддержка** | **Сведения**
--- | ---
**Поддерживаемые операционные системы** | Вы можете перенести операционные системы [Windows](https://support.microsoft.com/help/2721672/microsoft-server-software-support-for-microsoft-azure-virtual-machines) и [Linux](../virtual-machines/linux/endorsed-distros.md) , которые поддерживаются в Azure.
**Виртуальные машины Windows в Azure** | Перед миграцией может потребоваться [внести некоторые изменения](prepare-for-migration.md#verify-required-changes-before-migrating) в виртуальные машины. 
**Виртуальные машины Linux в Azure** | Для некоторых виртуальных машин могут потребоваться изменения, позволяющие им работать в Azure.<br/><br/> Для Linux служба "миграция Azure" автоматически вносит изменения в эти операционные системы:<br/> -Red Hat Enterprise Linux 7,8, 7,7, 7,6, 7,5, 7,4, 7,0, 6. x<br/> -Центная ОС 7,7, 7,6, 7,5, 7,4, 6. x</br> -SUSE Linux Enterprise Server 12 SP1 +<br/> -SUSE Linux Enterprise Server 15 с пакетом обновления 1 <br/>-Ubuntu 19,04, 19,10, 14.04 LTS, 16.04 LTS, 18.04 LTS<br/> -Debian 7, 8, 9 <br/> Oracle Linux 7.7, Oracle Linux 7.7-CI.<br/> Для других операционных систем [необходимые изменения](prepare-for-migration.md#verify-required-changes-before-migrating) вносятся вручную.
**Загрузка Linux** | Если/boot находится в выделенной секции, он должен находиться на диске ОС, а не распределяться по нескольким дискам.<br/> Если/boot является частью корневого раздела (/), то раздел "/" должен находиться на диске ОС и не охватывать другие диски.
**Загрузка UEFI** | Поддерживается. Виртуальные машины на основе UEFI будут перенесены на виртуальные машины Azure поколения 2. 
**Размер диска** | 2 ТБ диска ОС;  32 ТБ для дисков данных.
**Ограничения дискового пространства** |  До 60 дисков на виртуальную машину.
**Зашифрованные диски и тома** | Виртуальные машины с зашифрованными дисками или томами не поддерживаются для миграции.
**Кластер общих дисков** | Не поддерживается.
**Независимые диски** | Не поддерживается.
**RDM/транзитные диски** | Если у виртуальных машин есть RDM или транзитные диски, эти диски не будут реплицированы в Azure.
**NFS** | Тома NFS, подключенные к виртуальным машинам как тома, не реплицируются.
**цели iSCSI** | Виртуальные машины с целями iSCSI не поддерживаются для миграции без агента.
**Многопутевой ввод-вывод** | Не поддерживается.
**Хранилище vMotion** | Не поддерживается. Репликация не будет работать, если виртуальная машина использует операцию Storage vMotion.
**Объединенные сетевые карты** | Не поддерживается.
**Протокол** | Не поддерживается.
**Целевой диск** | Виртуальные машины можно перенести только на управляемые диски ("Стандартный", "Стандартный SSD", SSD "Премиум") в Azure.
**Одновременная репликация** | 500 виртуальных машин на vCenter Server. Если у вас больше, перенесите их в пакетах 500.
**Автоматическая установка агента виртуальной машины Azure (агент Windows и Linux)** | Поддерживается для Windows Server 2008 R2, начиная с версии. <br/> Поддерживается для RHEL6, RHEL7, CentOS7, Ubuntu 14,04, Ubuntu 16,04, Ubuntu 18.04. Проверьте список [необходимых пакетов](https://docs.microsoft.com/azure/virtual-machines/extensions/agent-linux#requirements)для этих операционных систем Linux.

### <a name="appliance-requirements-agentless"></a>Требования к устройству (без агента)

Миграция без агента использует [устройство "миграция Azure](migrate-appliance.md)". Вы можете развернуть устройство как виртуальную машину VMware с помощью шаблона OVA, импортированного в vCenter Server или с помощью [скрипта PowerShell](deploy-appliance-script.md).

- Узнайте больше о [требованиях к устройству](migrate-appliance.md#appliance---vmware) для VMware.
- Узнайте больше о URL-адресах Azure, к которым устройство будет обращаться в [общедоступных](migrate-appliance.md#public-cloud-urls) облаках и облаках для [государственных организаций](migrate-appliance.md#government-cloud-urls).
- В Azure для государственных организаций необходимо развернуть устройство [с помощью скрипта](deploy-appliance-script-government.md).

### <a name="port-requirements-agentless"></a>Требования к портам (без агента)

**Устройство** | **Соединение**
--- | ---
Устройство | Исходящие подключения через порт 443 для передачи реплицируемых данных в Azure, а также для взаимодействия со службами Службы "миграция Azure", координирующими репликацию и миграцию.
Сервер vCenter | Входящие подключения через порт 443, чтобы разрешить устройству управлять репликацией — создание моментальных снимков, копирование данных, освобождение моментальных снимков
узел vSphere/ESXI | Входящий трафик через TCP-порт 902, чтобы устройство реплицирует данные из моментальных снимков.

## <a name="agent-based-migration"></a>Миграция на основе агентов 


В этом разделе перечислены требования к миграции на основе агентов.


### <a name="vmware-requirements-agent-based"></a>Требования к VMware (на основе агентов)

В этой таблице приведены сводные сведения о поддержке и ограничениях для серверов виртуализации VMware.

**Требования к VMware** | **Сведения**
--- | ---
**VMware vCenter Server** | Версии 5,5, 6,0, 6,5 или 6,7.
**VMware vSphere узла ESXI** | Версии 5,5, 6,0, 6,5 или 6,7.
**vCenter Server разрешения** | Учетная запись только для чтения для vCenter Server.

### <a name="vm-requirements-agent-based"></a>Требования к виртуальной машине (на основе агентов)

В таблице представлена сводная информация о поддержке виртуальных машин VMware, которые требуется перенести с помощью миграции на основе агентов.

**Поддержка** | **Сведения**
--- | ---
**Рабочая нагрузка компьютера** | Служба "миграция Azure" поддерживает миграцию любой рабочей нагрузки (например, Active Directory, SQL Server и т. д.), выполняющейся на поддерживаемом компьютере.
**Операционные системы** | Для получения последних сведений ознакомьтесь с [поддержкой операционной системы](../site-recovery/vmware-physical-azure-support-matrix.md#replicated-machines) для Site Recovery. Служба "миграция Azure" обеспечивает идентичную поддержку операционной системы виртуальных машин.
**Файловая система Linux или гостевое хранилище** | Для получения последних сведений ознакомьтесь с [поддержкой файловой системы Linux](../site-recovery/vmware-physical-azure-support-matrix.md#linux-file-systemsguest-storage) для Site Recovery. Служба "миграция Azure" имеет идентичную поддержку файловой системы Linux.
**Сеть и хранилище** | Для получения последних сведений ознакомьтесь с требованиями к [сети](../site-recovery/vmware-physical-azure-support-matrix.md#network) и [хранилищу](../site-recovery/vmware-physical-azure-support-matrix.md#storage) для Site Recovery. Служба "миграция Azure" предоставляет идентичные требования к сети или хранилищу.
**Требования Azure** | Для получения последних сведений ознакомьтесь с требованиями к сети, [хранилищу](../site-recovery/vmware-physical-azure-support-matrix.md#azure-storage)и [вычислениям](../site-recovery/vmware-physical-azure-support-matrix.md#azure-compute) [Azure](../site-recovery/vmware-physical-azure-support-matrix.md#azure-vm-network-after-failover)для Site Recovery. Служба "миграция Azure" имеет одинаковые требования к миграции VMware.
**Служба Mobility Service** | Агент службы Mobility Service должен быть установлен на каждой виртуальной машине, которую необходимо перенести.
**Загрузка UEFI** | Поддерживается. Виртуальные машины на основе UEFI будут перенесены на виртуальные машины Azure поколения 2. 
**UEFI — безопасная загрузка**         | Не поддерживается для миграции.
**Целевой диск** | Виртуальные машины можно перенести только на управляемые диски ("Стандартный", "Стандартный SSD", SSD "Премиум") в Azure.
**Размер диска** | 2 ТБ диска ОС; 32 ТБ для дисков данных.
**Ограничения дискового пространства** |  До 63 дисков на виртуальную машину.
**Зашифрованные диски и тома** | Виртуальные машины с зашифрованными дисками или томами не поддерживаются для миграции.
**Кластер общих дисков** | Не поддерживается.
**Независимые диски** | Поддерживается.
**Транзитные диски** | Поддерживается.
**NFS** | Тома NFS, подключенные к виртуальным машинам как тома, не реплицируются.
**цели iSCSI** | Поддерживается.
**Многопутевой ввод-вывод** | Не поддерживается.
**Хранилище vMotion** | Поддерживается
**Объединенные сетевые карты** | Не поддерживается.
**Протокол** | Не поддерживается.




### <a name="appliance-requirements-agent-based"></a>Требования к устройству (на основе агента)

При настройке устройства репликации с помощью шаблона OVA, предоставленного в центре миграции Azure, устройство работает под управлением Windows Server 2016 и соответствует требованиям поддержки. Если вручную настроить устройство репликации на физическом сервере, убедитесь, что оно соответствует требованиям.

- Узнайте о [требованиях к устройству репликации](migrate-replication-appliance.md#appliance-requirements) для VMware.
- На устройстве должна быть установлена MySQL. Сведения о [вариантах установки](migrate-replication-appliance.md#mysql-installation).
- Сведения о URL-адресах, к которым устройство репликации должно иметь доступ в [общедоступных](migrate-replication-appliance.md#url-access) и [правительственных](migrate-replication-appliance.md#azure-government-url-access) облаках.
- Проверьте [порты](migrate-replication-appliance.md#port-access) , к которым требуется доступ устройству репликации.

### <a name="port-requirements-agent-based"></a>Требования к портам (на основе агента)

**Устройство** | **Соединение**
--- | ---
Виртуальные машины | Служба Mobility Service, работающая на виртуальных машинах, обменивается данными с локальным устройством репликации (сервером конфигурации) через порт HTTPS 443 Inbound для управления репликацией.<br/><br/> Виртуальные машины отправляют данные репликации на сервер обработки (запущенный на компьютере сервера конфигурации) через HTTPS-порт 9443 для входящих подключений. Этот порт можно изменить.
Устройство репликации | Устройство репликации управляет репликацией с помощью Azure через порт HTTPS 443 Outbound.
Сервер обработки | Сервер обработки получает данные репликации, оптимизирует и шифрует их и отправляет в службу хранилища Azure по исходящему порту 443.<br/> По умолчанию сервер обработки запускается на устройстве репликации.

## <a name="azure-vm-requirements"></a>Требования для виртуальных машин Azure

Все локальные виртуальные машины, реплицируемые в Azure (с миграцией без агента или на основе агента), должны соответствовать требованиям к виртуальным машинам Azure, приведенным в этой таблице. 

**Компонент** | **Requirements** 
--- | --- | ---
Операционная система на виртуальной машине | Проверяет поддерживаемые операционные системы виртуальных машин VMware для миграции.<br/> Можно выполнить миграцию любой рабочей нагрузки, работающей в поддерживаемой операционной системе. 
Архитектура операционной системы на виртуальной машине | 64-разрядная 
Размер диска операционной системы | До 2048 ГБ 
Число дисков операционной системы | 1 
Число дисков с данными | 64 ГБ и меньше 
Размер диска данных | До 32 ТБ
Сетевые адаптеры | Поддерживаются несколько адаптеров.
Общий виртуальный жесткий диск | Не поддерживается. 
Диск FC | Не поддерживается. 
BitLocker | Не поддерживается.<br/><br/> Перед миграцией компьютера необходимо отключить BitLocker.
имя виртуальной машины; | От 1 до 63 символов.<br/><br/> при этом допустимы только буквы, цифры и дефисы<br/><br/> Имя компьютера должно начинаться и заканчиваться буквой или цифрой. 
Подключение после миграции — Windows | Чтобы подключиться к виртуальным машинам Azure под Windows после миграции, выполните следующие действия.<br/><br/> — Перед миграцией включите RDP на локальной виртуальной машине.<br/><br/> Убедитесь в том, что правила для протоколов TCP и UDP для **общедоступного** профиля добавлены, а протокол RDP разрешен в разделе **Брандмауэр Windows** > **Разрешенные программы** для всех профилей.<br/><br/> Для доступа к VPN типа "сеть — сеть" Включите RDP и разрешите RDP в **брандмауэре Windows**  ->  **Разрешенные приложения и компоненты** для **доменов и частных** сетей.<br/><br/> Кроме того, убедитесь, что для политики SAN операционной системы задано значение **OnlineAll**. [Подробнее.](prepare-for-migration.md)
Подключение после миграции — Linux | Чтобы подключиться к виртуальным машинам Azure после миграции с помощью SSH, сделайте следующее:<br/><br/> Перед миграцией на локальном компьютере убедитесь, что служба Secure Shell настроена на запуск, а правила брандмауэра разрешают SSH-подключение.<br/><br/> После отработки отказа на виртуальной машине Azure разрешите входящие подключения к порту SSH для правил группы безопасности сети на виртуальной машине, на которую выполнен переход, и для подсети Azure, к которой он подключен.<br/><br/> Кроме того, добавьте общедоступный IP-адрес для виртуальной машины.  


## <a name="next-steps"></a>Дальнейшие действия

[Выберите](server-migrate-overview.md) вариант миграции VMware.
