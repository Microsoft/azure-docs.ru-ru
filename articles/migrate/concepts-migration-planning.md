---
title: Создание плана миграции с помощью службы "миграция Azure"
description: Содержит руководство по созданию плана миграции с помощью службы "миграция Azure".
author: rashi-ms
ms.author: rajosh
ms.manager: abhemraj
ms.topic: conceptual
ms.date: 11/11/2020
ms.openlocfilehash: 1c2be47060004d464003c00cbbddb3b58a136e3c
ms.sourcegitcommit: 42e4f986ccd4090581a059969b74c461b70bcac0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "104871152"
---
# <a name="build-migration-plan-with-azure-migrate"></a>Создание плана миграции с помощью службы "Миграция Azure"

Выполните инструкции из этой статьи, чтобы создать план миграции в Azure с помощью службы " [Миграция Azure](migrate-services-overview.md)". 

## <a name="define-cloud-migration-goals"></a>Определение целей миграции в облако

Прежде чем начать, понимание и оценка [мотивации](/azure/cloud-adoption-framework/strategy/motivations) для перехода в облако может повлиять на успех бизнеса. Как описано в [облачной инфраструктуре внедрения](/azure/cloud-adoption-framework), существует ряд триггеров и результатов.   

**Бизнес-событие** | **Результат миграции**
--- | ---
Прекращение использования центров обработки данных | Cost 
Слияние, поглощение или отчуждение | Снижение сложности в отношении поставщиков и технических сложностей
Сокращение капитальных расходов | Оптимизация внутренних операций
Окончание поддержки критически важных технологий | Повышение гибкости организации
Реагирование на изменения состояния соответствия нормативным требованиям | Подготовка к внедрению новых технических возможностей
Новые требования к независимости данных | Масштабирование в соответствии с рыночными требованиями
Сокращение нарушений в работе и улучшение стабильности ИТ | Масштабирование в соответствии с географическими потребностями

Определение мотивации поможет вам закрепить стратегические цели миграции. Следующим шагом является обнаружение и планирование пути миграции, предназначенного для рабочих нагрузок. Средство [Azure Migrate: обнаружение и оценка](migrate-services-overview.md#azure-migrate-discovery-and-assessment-tool) позволяет оценивать локальные рабочие нагрузки, а также предоставляет рекомендации и средства, помогающие выполнить миграцию.

## <a name="understand-your-digital-estate"></a>Анализ цифровых активов

Для начала определите локальную инфраструктуру, приложения и зависимости. Это поможет вам определить рабочие нагрузки для миграции в Azure и собрать оптимизированные проекции затрат. Средство обнаружения и оценки помогает находить используемые рабочие нагрузки, зависимости между рабочими нагрузками и оптимизацией рабочей нагрузки.

### <a name="workloads-in-use"></a>Используемые рабочие нагрузки

Служба "миграция Azure" использует упрощенное устройство миграции Azure для выполнения безагентного обнаружения локальных виртуальных машин VMware, виртуальных машин Hyper-V, других виртуализированных серверов и физических серверов. Непрерывное обнаружение собирает сведения о конфигурации сервера, метаданные производительности, а также данные приложений. Ниже показано, как устройство собирает данные с локальных серверов. 

- Метаданные сервера, диска и сетевого адаптера.

- Установленные приложения, роли и компоненты.

- Данные о производительности, в том числе о загрузке ЦП и использовании памяти, количестве операций ввода-вывода в секунду на дисках и пропускной способности.

После сбора данных можно экспортировать список инвентаризации приложений, чтобы найти приложения и SQL Server экземпляры, работающие на серверах. С помощью средства оценки базы данных службы "Миграция Azure" вы можете определить степень готовности SQL Server.

 ![Инвентаризация приложений на портале](./media/concepts-migration-planning/application-inventory-portal.png)

 ![Экспорт инвентарного списка приложений](./media/concepts-migration-planning/application-inventory-export.png)

Вместе с данными, обнаруженными с помощью средства обнаружения и оценки, вы можете использовать данные базы данных управления конфигурацией (CMDB) для создания представления о сервере и расположении базы данных, а также понять, как распределяются серверы по подразделениям, владельцам приложений, географическим и т. д. Это помогает решить, какие рабочие нагрузки следует назначить приоритету миграции. 

### <a name="dependencies-between-workloads"></a>Зависимости между рабочими нагрузками

После обнаружения серверов можно [проанализировать зависимости](concepts-dependency-visualization.md), чтобы визуализировать и выявить межсерверные зависимости, а также определить стратегии оптимизации для перемещения взаимозависимых серверов в Azure. Визуализация позволяет понять, используются ли определенные серверы, а не переносить их, если они могут быть списаны.  Анализ зависимостей помогает убедиться, что ничего не пропущено, и избежать непредвиденных простоев во время миграции. После инвентаризации приложений и анализа зависимостей можно создать группы серверов с высоким доверительным уровнем и начать их оценку.

 ![Сопоставление зависимостей](./media/concepts-migration-planning/expand-client-group.png)

### <a name="optimization-and-sizing"></a>Оптимизация и определение размера

Azure обеспечивает гибкость при изменении размера облачной емкости с течением времени, а миграция позволяет оптимизировать ресурсы ЦП и памяти, выделенные для серверов. Создание оценки для выявленных серверов поможет понять историю изменения производительности рабочей нагрузки. Это очень важно для правильного определения размера номеров SKU виртуальных машин Azure и рекомендаций по дискам в Azure.

## <a name="assess-migration-readiness"></a>Оценка готовности к миграции


### <a name="readinesssuitability-analysis"></a>Анализ готовности и пригодности

Вы можете экспортировать отчет об оценке и выполнить фильтрацию по приведенным ниже категориям, чтобы определить степень готовности к работе в Azure.

- **Готово к работе с Azure**: серверы можно перенести как есть в Azure без каких-либо изменений. 
- **Условно готово к работе с Azure**: серверы можно перенести в Azure, но в соответствии с рекомендациями по исправлению, указанными в оценке, необходимо внести небольшие изменения.
- **Не готово к работе с Azure**: серверы нельзя перенести в Azure "как есть". Прежде чем выполнять миграцию, необходимо устранить проблемы в соответствии с руководством по исправлению. 
- **Неизвестная готовность**: службе "миграция Azure" не удается определить готовность сервера из-за недостаточных метаданных.

С помощью оценок базы данных можно определить готовность содержащих данные активов SQL Server для миграции в Базу данных SQL Azure или Управляемые экземпляры SQL Azure. В результатах оценки указывается состояние готовности каждого экземпляра SQL Server к миграции (в процентах). Кроме того, для каждого экземпляра можно увидеть рекомендуемый целевой объект в Azure, потенциальные препятствия для миграции, число критических изменений, готовность к работе с Базой данных SQL Azure или виртуальной машиной Azure SQL, а также уровень совместимости. Вы можете более подробно изучить влияние препятствий для миграции и рекомендации по их устранению.

 ![Результаты оценки базы данных](./media/concepts-migration-planning/database-assessment-portal.png)

### <a name="sizing-recommendations"></a>Рекомендации по определению размера

После того как сервер помечается как готовый для Azure, в ходе обнаружения и оценки вносятся рекомендации по выбору размера, которые указывают номер SKU и тип диска виртуальной машины Azure для ваших серверов. Вы можете получить рекомендации по размерам на основе журнала производительности (для оптимизации ресурсов при миграции) или на основе параметров локального сервера без ведения журнала производительности. В оценке базы данных можно просмотреть рекомендации для SKU базы данных, ценовой категории и уровня вычислений.  

### <a name="get-compute-costs"></a>Получение данных о затратах на вычислительные ресурсы

Параметр определения размера на основе производительности в результатах оценки службы "Миграция Azure" поможет выбрать подходящий размер виртуальных машин. Его можно также использовать в качестве рекомендации по оптимизации рабочих нагрузок в Azure. Помимо изменения размера, затраты на Azure можно сократить и несколькими другими способами. 

- **Зарезервированные экземпляры**. С помощью [зарезервированных экземпляров](https://azure.microsoft.com/pricing/reserved-vm-instances/) можно значительно сократить затраты по сравнению с ценовой моделью [оплаты по мере использования](https://azure.microsoft.com/pricing/purchase-options/pay-as-you-go/).
- **Преимущество гибридного использования Azure**. Модель [Преимущество гибридного использования Azure](https://azure.microsoft.com/pricing/purchase-options/pay-as-you-go/) позволяет использовать в Azure локальные лицензии Windows Server с активной программой Software Assurance или подписки на Linux в сочетании с зарезервированными экземплярами.
- **Соглашение Enterprise**. Использование [Соглашения Azure Enterprise (EA)](../cost-management-billing/manage/ea-portal-agreements.md) может обеспечить экономию на подписках и службах Azure.
- **Предложения**. Существует несколько [предложений Azure](https://azure.microsoft.com/support/legal/offer-details/). Например, предложения [Разработка и тестирование с оплатой по мере использования](https://azure.microsoft.com/pricing/dev-test/) и [Enterprise — разработка и тестирование](https://azure.microsoft.com/offers/ms-azr-0148p/) позволяют воспользоваться более низкими тарифами на виртуальные машины для разработки и тестирования.
- **Время доступности виртуальной машины**. Вы можете просматривать, в какие дни месяца и часы суток запускались виртуальные машины Azure. Отключение серверов, когда они не используются, может снизить затраты (неприменимо для RIs).
- **Целевой регион**. Вы можете создавать оценки в разных регионах, чтобы определить, не окажется ли миграция в конкретный регион более экономичной. 

### <a name="visualize-data"></a>Визуализируйте данные

Отчеты об обнаружении и оценке (с информацией о готовности к Azure и распределением ежемесячных затрат) можно просмотреть на портале. Вы также можете экспортировать оценку и расширить план миграции с помощью дополнительных визуализаций. Можно создать несколько оценок с различными сочетаниями свойств и выбрать набор свойств, которые лучше подходят для вашего бизнеса.  

 ![Обзор оценок](./media/concepts-migration-planning/assessment-summary.png)

### <a name="evaluate-gapsblockers"></a>Оценка недочетов и препятствий

При определении приложений и рабочих нагрузок, которые требуется перенести, определите для них ограничения на время простоя и найдите операционные зависимости между приложениями и базовой инфраструктурой. Этот анализ поможет спланировать миграции в соответствии с целевым временем восстановления (RTO) и позволит почти полностью исключить потерю данных. Перед миграцией рекомендуется выполнить проверку и устранить все проблемы с совместимостью или неподдерживаемыми функциями, которые могут препятствовать миграции сервера или базы данных SQL. Для этого можно получить отчет об обнаружении и оценке Azure "миграция и оценка базы данных Azure". 

### <a name="prioritize-workloads"></a>Определение приоритетов рабочих нагрузок

После сбора данных инвентаризации можно выбрать приложения и рабочие нагрузки, которые нужно перенести первыми. Разработайте подход "применения и изучения" для систематического и управляемого переноса приложений, который позволит устранить все недочеты до того, как начнется полная миграция.

Чтобы определить приоритеты для миграции, можно использовать такие стратегические факторы, как сложность, время на миграцию, срочность для бизнеса, требования к рабочей и нерабочей среде, соответствие требованиям, требования к безопасности, знания о приложениях и т. п. 

Несколько рекомендаций

- **Определение кандидатов, требующих минимальных усилий**. Используйте отчеты об оценке для определения тех объектов, миграцию которых выполнить проще всего. Это могут быть серверы и базы данных, полностью готовые к миграции в Azure или требующие для этого минимальных усилий. В таблице приведено несколько способов, которыми это можно сделать.

    **Состояние** | **Действие**
    --- | ---
    **Виртуальные машины, готовые к работе в Azure** | Экспортируйте отчет об оценке и отфильтруйте все серверы с состоянием " *Готово" для Azure*. Это может быть первая группа серверов, которые вы переносите в Azure и перемещаете к ней с помощью средства [миграции Azure: Server Migration](migrate-services-overview.md#azure-migrate-server-migration-tool) Tool.
    **Операционные системы, которые вскоре не будут поддерживаться** | Экспортируйте отчет об оценке и отфильтруйте все серверы под Windows Server 2008 R2/Windows Server 2008. Для этих операционных систем истекает срок поддержки, и только Azure предоставляет бесплатно три года обновлений безопасности при переносе в Azure. Если при этом вы выберете Преимущество гибридного использования Azure в сочетании с зарезервированными экземплярами, экономия может быть значительно выше.
    **Миграция SQL Server** | Используйте рекомендации по оценке базы данных для переноса баз данных, готовых к работе с Базой данных SQL Azure, с помощью средства миграции баз данных службы "Миграция Azure". Базы данных, готовые для виртуальной машины Azure SQL, можно перенести с помощью средства миграции серверов службы "Миграция Azure".
    **Программное обеспечение, которое вскоре не будет поддерживаться** | Экспортируйте данные инвентаризации приложений и отфильтруйте все программное обеспечение или все расширения, для которых вскоре может окончиться срок поддержки. Определите приоритеты этих приложений для миграции.
    **Подготовленные серверы** | Экспорт отчета об оценке и Фильтрация серверов с низким уровнем использования ЦП (%) и использование памяти (%).  Выполните миграцию на виртуальную машину Azure нужного размера, чтобы сократить затраты на неиспользуемые ресурсы.
    **Серверы с избыточной наготовкой** | Экспорт отчета по оценке и фильтра для серверов с высокой загрузкой ЦП (%) и использование памяти (%).  Решите ограничения емкости, не прерывайте работу серверов с повышенными ограничениями и увеличьте производительность, перенесите эти серверы в Azure. Используйте в Azure возможности автомасштабирования для удовлетворения спроса.<br/><br/> Проанализируйте отчеты об оценке для изучения ограничений хранилища. Проанализируйте число операций ввода-вывода и пропускную способность для дисков и определите рекомендуемый тип диска.

- **От малого к большему**. Для начала переместите приложения и рабочие нагрузки с минимальными риском и сложностью, чтобы убедиться в надежности стратегии миграции. Проанализируйте рекомендации в результатах оценки службы "Миграция Azure" вместе с репозиторием CMDB, чтобы найти и перенести рабочие нагрузки для разработки и тестирования, которые могут стать кандидатами для пилотной миграции. Отзывы и знания, полученные по результатам пилотных миграций, могут быть полезны при переносе рабочих нагрузок.  
- **Соответствие требованиям**. В Azure предлагается самый масштабный в отрасли портфель решений по соответствию требованиям с точки зрения разнообразия и наполненности предложений. Определяя приоритеты миграции, учитывайте требования к соответствию, чтобы приложения и рабочие нагрузки соответствовали национальным, региональным и отраслевым стандартам и законодательству. Это особенно важно для организаций, которые имеют дело с критически важным для бизнеса процессом, хранят у себя конфиденциальную информацию или работают в строго регулируемых отраслях. В организациях таких типов так много часто меняющихся стандартов и нормативных актов, что учесть все моменты довольно трудно.  

## <a name="finalize-the-migration-plan"></a>Составление окончательного плана миграции

Прежде чем составлять окончательный план миграции, обязательно учтите и устраните другие потенциальные препятствия, приведенные ниже. 

- **Требования к сети**. Оцените ограничения пропускной способности и задержки сети, которые могут привести к непредвиденным задержкам и негативно сказаться на скорости репликации миграции.
- **Корректировки по результатам тестирования и после миграции**. Оставьте запас по времени для проведения тестов производительности и пользовательского приемочного тестирования перенесенных приложений, а также для настройки и корректировки приложений после миграции, например обновления строк подключения к базе данных, настройки веб-серверов, перемещения данных в новую среду и очистки прежних систем и т. п.
- **Разрешения**. Ознакомьтесь с рекомендуемыми разрешениями Azure, ролями доступа к серверу и базе данных, а также разрешениями, необходимыми для миграции.
- **Обучение**. Подготовьте свою организацию к цифровому преобразованию. Для успешного изменения организационной структуры важна прочная база для обучения. Ознакомьтесь с бесплатными обучающими курсами на [Microsoft Learn](/learn/azure/?ocid=CM_Discovery_Checklist_PDF), в том числе курсами по основам Azure, архитектурам решений и безопасности. Посоветуйте своей команде изучить  [сертификации Azure](https://www.microsoft.com/learning/certification-overview.aspx?ocid=CM_Discovery_Checklist_PDF).  
- **Поддержка реализации**. При необходимости воспользуйтесь поддержкой для своей реализации. При миграции в облако многие организации предпочитают обратиться за помощью к стороннему поставщику. Чтобы получить персонализированную помощь для быстрого и уверенного перехода на Azure, воспользуйтесь программой  [Поставщик управляемых служб Azure Expert](https://www.microsoft.com/solution-providers/search?cacheId=9c2fed4f-f9e2-42fb-8966-4c565f08f11e&ocid=CM_Discovery_Checklist_PDF) или службой  [FastTrack for Azure](https://azure.microsoft.com/programs/azure-fasttrack/?ocid=CM_Discovery_Checklist_PDF).  


Создайте эффективный план миграции в облако, содержащий подробные сведения о приложениях, которые требуется перенести, доступности приложений и баз данных, ограничениях по времени простоя и вехах миграции. В плане необходимо учесть, сколько времени займет копирование данных, и оставить реалистичный запас для тестирования после миграции и мероприятия по перемещению данных. 

Чтобы проверить, работают ли перенесенные приложения должным образом и все ли объекты базы данных и связи данных перенесены в облако, следует включить в план тестирования после миграции функциональные возможности, интеграцию, безопасность, тестирование производительности и варианты использования.  

Создайте план миграции и объявите о периоде обслуживания, чтобы перенести приложения и базы данных с минимальным временем простоя, а также ограничить потенциальное влияние процесса миграций на операционную деятельность и бизнес в целом.  

## <a name="migrate"></a>Миграция

Перед началом полномасштабной миграции рекомендуется выполнить тестовую миграцию в службе "Миграция Azure". Тестовая миграция помогает оценить требуемое время и скорректировать план миграции. Это позволит выявить потенциальные проблемы и устранить их до проведения полной миграции.

Когда вы будете готовы к миграции, используйте средство миграции с сервера Azure Migration Tool и службу миграции данных Azure (DMS), чтобы обеспечить простой и интегрированный процесс миграции с комплексным отслеживанием.

- С помощью средства миграции сервера можно перенести локальные виртуальные машины и серверы, а также виртуальные машины, расположенные в другом частном или общедоступном облаке (включая AWS, обеспечить), с нулевым временем простоя.
- Azure DMS предоставляет полностью управляемую службу, предназначенную для обеспечения бесперебойной миграции с нескольких источников базы данных на платформы данных Azure с минимальным временем простоя.  

## <a name="next-steps"></a>Дальнейшие действия

- Проанализируйте процесс [миграции в облако](/azure/architecture/cloud-adoption/getting-started/migrate)   в инфраструктуре внедрения облачных технологий Azure.
- Получите [краткий обзор](migrate-services-overview.md) службы "миграция Azure" и просмотрите [видео о начале работы](https://youtu.be/wFfq3YPxYHE).
- Узнайте больше об оценке виртуальных машин для миграции на [виртуальные машины Azure](concepts-assessment-calculation.md).
