---
title: Перемещение ресурсов классической модели развертывания Azure
description: Используйте Azure Resource Manager для перемещения ресурсов классического развертывания в новую группу ресурсов или подписку.
ms.topic: conceptual
ms.date: 07/09/2019
ms.openlocfilehash: 78b9769a31fa0c96c12e18d05cb9c484aa52a1d5
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "75485290"
---
# <a name="move-guidance-for-classic-deployment-model-resources"></a>Перемещение руководств по ресурсам классической модели развертывания

Шаги по перемещению ресурсов, развернутых с помощью классической модели, зависят от того, перемещаются ли ресурсы в рамках подписки или в новую подписку.

## <a name="move-in-the-same-subscription"></a>Переместить в ту же подписку

При перемещении ресурсов из одной группы ресурсов в другую в пределах одной подписки действуют следующие ограничения.

* Нельзя перемещать виртуальные сети (классические).
* Виртуальные машины (классические) необходимо перемещать с облачной службой.
* Облачную службу можно перемещать только в тех случаях, когда перемещение включает в себя все виртуальные машины этой службы.
* Одновременно можно перемещать только одну облачную службу.
* Одновременно можно перемещать только одну учетную запись хранения (классическую).
* Нельзя перемещать учетную запись хранения (классическую) в рамках одной операции с виртуальной машиной или облачной службой.

Чтобы переместить классические ресурсы в новую группу ресурсов в той же подписке, используйте [стандартные операции перемещения](../move-resource-group-and-subscription.md) на портале, Azure PowerShell, Azure CLI или REST API. При этом используются те же операции, что и для перемещения ресурсов Resource Manager.

## <a name="move-across-subscriptions"></a>Перемещение между подписками

При перемещении ресурсов в новую подписку действуют следующие ограничения.

* Все классические ресурсы в подписке необходимо переместить в рамках одной операции.
* Целевая подписка не должна содержать никаких других классических ресурсов.
* Перемещение можно запросить только через отдельный интерфейс REST API для классических перемещений. Стандартные команды перемещения Resource Manager не работают, если перемещение классических ресурсов осуществляется в новую подписку.

Для перемещения классических ресурсов в новую подписку используйте операции REST, предназначенные для классических ресурсов. Чтобы использовать ОСТАВШУЮся, выполните следующие действия.

1. Проверьте, может ли исходная подписка участвовать в перемещении между подписками. Выполните такую операцию:

   ```HTTP
   POST https://management.azure.com/subscriptions/{sourceSubscriptionId}/providers/Microsoft.ClassicCompute/validateSubscriptionMoveAvailability?api-version=2016-04-01
   ```

     Включите в текст запроса такой код:

   ```json
   {
    "role": "source"
   }
   ```

     Ответ на операцию проверки имеет следующий формат:

   ```json
   {
    "status": "{status}",
    "reasons": [
      "reason1",
      "reason2"
    ]
   }
   ```

1. Проверьте, может ли целевая подписка участвовать в перемещении между подписками. Выполните такую операцию:

   ```HTTP
   POST https://management.azure.com/subscriptions/{destinationSubscriptionId}/providers/Microsoft.ClassicCompute/validateSubscriptionMoveAvailability?api-version=2016-04-01
   ```

     Включите в текст запроса такой код:

   ```json
   {
    "role": "target"
   }
   ```

     Ответ будет в том же формате, что и проверка исходной подписки.
1. Если обе подписки пройдут проверку, переместите все классические ресурсы из одной подписки в другую, выполнив следующее действие:

   ```HTTP
   POST https://management.azure.com/subscriptions/{subscription-id}/providers/Microsoft.ClassicCompute/moveSubscriptionResources?api-version=2016-04-01
   ```

    Включите в текст запроса такой код:

   ```json
   {
    "target": "/subscriptions/{target-subscription-id}"
   }
   ```

Операция может занять несколько минут.

## <a name="next-steps"></a>Дальнейшие действия

Если у вас возникли проблемы с перемещением классических ресурсов, обратитесь в [службу поддержки](https://portal.azure.com/#blade/Microsoft_Azure_Support/HelpAndSupportBlade/overview).

Команды для перемещения ресурсов см. в статье [Перемещение ресурсов в новую группу ресурсов или подписку](../move-resource-group-and-subscription.md).
