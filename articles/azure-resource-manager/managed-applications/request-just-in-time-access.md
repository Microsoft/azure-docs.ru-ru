---
title: Запрос JIT-доступа
description: Описывает, как издатели управляемых приложений Azure запрашивают JIT-доступ к управляемому приложению.
author: MSEvanhi
ms.topic: conceptual
ms.date: 09/25/2020
ms.author: evanhi
ms.openlocfilehash: b7c067ca82ea7fbe7eb9c0f3d50b7fe75dfb47df
ms.sourcegitcommit: d4734bc680ea221ea80fdea67859d6d32241aefc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/14/2021
ms.locfileid: "100377369"
---
# <a name="enable-and-request-just-in-time-access-for-azure-managed-applications"></a>Включение и запрос JIT-доступа для управляемых приложений Azure

Потребители управляемого приложения могут быть неохотно, чтобы предоставить вам постоянный доступ к управляемой группе ресурсов. Как издатель управляемого приложения, вы можете предпочесть пользователям точно знать, когда необходимо получить доступ к управляемым ресурсам. Чтобы предоставить пользователям больший контроль над предоставлением доступа к управляемым ресурсам, управляемые приложения Azure предоставляют функцию, которая называется JIT-доступом. Эта функция в настоящее время находится на стадии предварительной версии.

JIT-доступ позволяет запрашивать доступ с повышенными привилегиями к ресурсам управляемого приложения для устранения неполадок или обслуживания. Вы всегда имеете доступ к ресурсам только для чтения, но на определенный период времени у вас может быть доступ более высокого уровня.

Рабочий процесс предоставления доступа:

1. Вы добавляете управляемое приложение в Marketplace и указываете, что JIT-доступ доступен.

1. Во время развертывания потребитель обеспечивает JIT-доступ для этого экземпляра управляемого приложения.

1. После развертывания потребитель может изменить параметры JIT-доступа.

1. Вы отправляете запрос на доступ, когда вам требуется устранить неполадки или обновить управляемые ресурсы.

1. Потребитель утверждает ваш запрос.

В этой статье рассматриваются действия, выполняемые издателями для обеспечения JIT-доступа и отправки запросов. Дополнительные сведения об утверждении запросов JIT-доступа см. [в статье утверждение JIT-доступа в управляемых приложениях Azure](approve-just-in-time-access.md).

## <a name="add-jit-access-step-to-ui"></a>Добавление шага JIT-доступа в пользовательский интерфейс

В CreateUiDefinition.jsфайле включите шаг, позволяющий клиентам включить JIT-доступ. Чтобы обеспечить поддержку JIT-функции для вашего предложения, добавьте следующее содержимое в CreateUiDefinition.jsв файле.

В разделе "шаги":

```json
{
    "name": "jitConfiguration",
    "label": "JIT Configuration",
    "subLabel": {
        "preValidation": "Configure JIT settings for your application",
        "postValidation": "Done"
    },
    "bladeTitle": "JIT Configuration",
    "elements": [
        {
          "name": "jitConfigurationControl",
          "type": "Microsoft.Solutions.JitConfigurator",
          "label": "JIT Configuration"
        }
    ]
}
```

В выходных данных:

```json
"jitAccessPolicy": "[steps('jitConfiguration').jitConfigurationControl]"
```

> [!NOTE]
> JIT-доступ доступен в предварительной версии. Схема для JIT-конфигурации может измениться в будущих итерациях.

## <a name="enable-jit-access"></a>Включить JIT-доступ

При создании предложения в центре партнеров убедитесь, что включен JIT-доступ.

1. Войдите на портал коммерческого рынка в [центре партнеров](https://partner.microsoft.com/dashboard/commercial-marketplace/overview).

1. Инструкции по созданию нового управляемого приложения см. в разделе [Создание предложения приложения Azure](../../marketplace/create-new-azure-apps-offer.md).

1. На странице **Техническая конфигурация** установите флажок **включить JIT-доступ** .

   :::image type="content" source="./media/request-just-in-time-access/enable-just-in-time-access.png" alt-text="Включение JIT-доступа":::

Вы добавили в пользовательский интерфейс шаг JIT-конфигурации и включили JIT-доступ в предложении коммерческого рынка. Когда клиенты развертывают управляемое приложение, они могут [включить JIT-доступ для своего экземпляра](approve-just-in-time-access.md#enable-during-deployment).

## <a name="request-access"></a>Запрос доступа

При необходимости доступа к управляемым ресурсам потребителя вы отправляете запрос на определенную роль, время и длительность. Затем потребитель должен утвердить запрос.

Чтобы отправить запрос на JIT-доступ, выполните следующие действия.

1. Выберите **JIT-доступ** для управляемого приложения, к которому необходимо получить доступ.

1. Выберите **подходящие роли** и щелкните **активировать** в столбце действие для нужной роли.

   ![Активировать запрос на доступ](./media/request-just-in-time-access/send-request.png)

1. В форме **Активация роли** выберите время начала и длительность активности роли. Выберите **активировать** , чтобы отправить запрос.

   ![Активировать доступ](./media/request-just-in-time-access/activate-access.png) 

1. Просмотрите уведомления, чтобы убедиться, что новый JIT-запрос успешно отправлен потребителю.

   ![Уведомление](./media/request-just-in-time-access/in-progress.png)

   Теперь необходимо подождать, пока потребитель [утвердит ваш запрос](approve-just-in-time-access.md#approve-requests).

1. Чтобы просмотреть состояние всех JIT-запросов для управляемого приложения, выберите **JIT-доступ** и **журнал запросов**.

   ![Просмотр состояния](./media/request-just-in-time-access/view-status.png)

## <a name="known-issues"></a>Известные проблемы

ИДЕНТИФИКАТОР субъекта учетной записи, запрашивающей JIT-доступ, должен явно включаться в определение управляемого приложения. Учетная запись не может быть включена только через группу, указанную в пакете. Это ограничение будет исправлено в следующем выпуске.

## <a name="next-steps"></a>Следующие шаги

Дополнительные сведения о утверждении запросов на JIT-доступ см. в статье утверждение JIT-доступа [в управляемых приложениях Azure](approve-just-in-time-access.md).
