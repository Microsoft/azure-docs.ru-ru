---
title: Экспорт шаблона в портал Azure
description: Используйте портал Azure, чтобы экспортировать шаблон Azure Resource Manager из ресурсов в подписке.
ms.topic: conceptual
ms.date: 07/29/2020
ms.openlocfilehash: ee97953a337bbb7cc9a8d1f042a3beae7bccdcae
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96185697"
---
# <a name="single-and-multi-resource-export-to-a-template-in-azure-portal"></a>Экспорт одного и нескольких ресурсов в шаблон в портал Azure

Чтобы упростить создание шаблонов Azure Resource Manager, можно экспортировать шаблон из существующих ресурсов. Экспортированный шаблон помогает понять синтаксис и свойства JSON, которые развертывают ресурсы. Чтобы автоматизировать будущие развертывания, начните с экспортированного шаблона и измените его для вашего сценария.

Диспетчер ресурсов позволяет выбрать один или несколько ресурсов для экспорта в шаблон. Вы можете сосредоточиться на точности ресурсов, необходимых в шаблоне.

В этой статье показано, как экспортировать шаблоны с помощью портала. Можно также использовать [Azure CLI](../management/manage-resource-groups-cli.md#export-resource-groups-to-templates), [Azure PowerShell](../management/manage-resource-groups-powershell.md#export-resource-groups-to-templates)или [REST API](/rest/api/resources/resourcegroups/exporttemplate).

## <a name="choose-the-right-export-option"></a>Выбор параметра экспорта справа

Шаблон можно экспортировать двумя способами:

* **Экспорт из группы ресурсов или ресурса.** В этом варианте создается новый шаблон из существующих ресурсов. Экспортированный шаблон — это "моментальный снимок" текущего состояния группы ресурсов. Вы можете экспортировать всю группу ресурсов или определенные ресурсы в ней.

* **Экспорт до развертывания или из журнала.** В этом варианте выполняется получение точной копии шаблона, используемой для развертывания.

В зависимости от выбранного варианта экспортируемые шаблоны имеют разные качества.

| Из группы ресурсов или ресурса | Перед развертыванием или из журнала |
| --------------------- | ----------------- |
| Шаблон является моментальным снимком текущего состояния ресурсов. Он включает все изменения, внесенные вручную после развертывания. | В шаблоне отображаются только сведения о состоянии ресурсов во время развертывания. Любые изменения, внесенные вручную после развертывания, не включаются. |
| Вы можете выбрать ресурсы из группы ресурсов для экспорта. | Включены все ресурсы для определенного развертывания. Нельзя выбрать подмножество этих ресурсов или добавить ресурсы, которые были добавлены в другое время. |
| Шаблон включает все свойства ресурсов, включая некоторые свойства, которые обычно не задаются во время развертывания. Возможно, потребуется удалить или очистить эти свойства перед повторной использованием шаблона. | Шаблон включает только свойства, необходимые для развертывания. Шаблон готов к использованию. |
| Возможно, шаблон не включает все параметры, необходимые для повторного использования. Большинство значений свойств жестко закодированы в шаблоне. Чтобы повторно развернуть шаблон в других средах, необходимо добавить параметры, повышающие возможность настройки ресурсов.  Можно отменить выбор **параметра включить параметры** , чтобы можно было создавать собственные параметры. | Шаблон включает параметры, которые упрощают повторное развертывание в разных средах. |

Экспортируйте шаблон из группы ресурсов или ресурса, если:

* Необходимо записать изменения в ресурсы, которые были сделаны после исходного развертывания.
* Необходимо выбрать экспортируемые ресурсы.

Экспортируйте шаблон перед развертыванием или из журнала, если:

* Вам нужен простой в использовании шаблон.
* Не нужно включать изменения, внесенные после исходного развертывания.

## <a name="limitations"></a>Ограничения

При экспорте из группы ресурсов или ресурса экспортированный шаблон создается из [опубликованных схем](https://github.com/Azure/azure-resource-manager-schemas/tree/master/schemas) для каждого типа ресурсов. Иногда схема не имеет последней версии для типа ресурса. Проверьте экспортированный шаблон и убедитесь, что он включает необходимые свойства. При необходимости измените экспортированный шаблон, чтобы использовать необходимую версию API.

Функция экспорта шаблона не поддерживает экспорт ресурсов фабрики данных Azure. Дополнительные сведения о том, как можно экспортировать ресурсы фабрики данных, см. в статье [копирование или клонирование фабрики данных в фабрике данных Azure](../../data-factory/copy-clone-data-factory.md).

Чтобы экспортировать ресурсы, созданные с помощью классической модели развертывания, необходимо [перенести их в модель развертывания Диспетчер ресурсов](../../virtual-machines/migration-classic-resource-manager-overview.md).

При получении предупреждения при экспорте шаблона, указывающего на то, что тип ресурса не был экспортирован, можно по-прежнему обнаружить свойства этого ресурса. Дополнительные сведения о различных параметрах просмотра свойств ресурсов см. в разделе [Обнаружение свойств ресурсов](view-resources.md). Вы также можете просмотреть [REST API Azure](/rest/api/azure/) для типа ресурса.

Существует ограничение в 200 ресурсов в группе ресурсов, для которой создается экспортированный шаблон. При попытке экспорта группы ресурсов, которая содержит более 200 ресурсов, отображается сообщение об ошибке `Export template is not supported for resource groups more than 200 resources` .

## <a name="export-template-from-a-resource-group"></a>Экспорт шаблона из группы ресурсов

Чтобы экспортировать один или несколько ресурсов из группы ресурсов, выполните следующие действия.

1. Выберите группу ресурсов, содержащую ресурсы, которые необходимо экспортировать.

1. Выберите один или несколько ресурсов, установив флажки.  Чтобы выбрать все, установите флажок слева от **имени**. После выбора по крайней мере одного ресурса пункт меню **Экспорт шаблона** станет доступным.

   ![Экспорт всех ресурсов](./media/export-template-portal/select-all-resources.png)

    На снимке экрана выбрана только учетная запись хранения.
1. Выберите **Экспортировать шаблон**.

1. Экспортированный шаблон отображается и доступен для скачивания и развертывания.

   ![Отображение шаблона](./media/export-template-portal/show-template.png)

   По умолчанию выбран **параметр Включить параметры** .  Если этот флажок установлен, при создании шаблона будут включаться все параметры шаблона. Если вы хотите создать собственные параметры, установите этот флажок, чтобы не включать их.

## <a name="export-template-from-a-resource"></a>Экспорт шаблона из ресурса

Чтобы экспортировать один ресурс, выполните следующие действия.

1. Выберите группу ресурсов, содержащую ресурс, который необходимо экспортировать.

1. Выберите ресурс, который требуется экспортировать, чтобы открыть ресурс.

1. Для этого ресурса выберите **Экспорт шаблона** в левой области.

   ![Экспорт ресурса](./media/export-template-portal/export-single-resource.png)

1. Экспортированный шаблон отображается и доступен для скачивания и развертывания. Шаблон содержит только один ресурс. По умолчанию выбран **параметр Включить параметры** .  Если этот флажок установлен, при создании шаблона будут включаться все параметры шаблона. Если вы хотите создать собственные параметры, установите этот флажок, чтобы не включать их.

## <a name="export-template-before-deployment"></a>Экспорт шаблона перед развертыванием

1. Выберите службу Azure, которую требуется развернуть.

1. Введите значения для новой службы.

1. После прохождения проверки, но перед началом развертывания выберите **скачать шаблон для службы автоматизации**.

   ![Скачивание шаблона](./media/export-template-portal/download-before-deployment.png)

1. Шаблон отображается и доступен для скачивания и развертывания.


## <a name="export-template-after-deployment"></a>Экспорт шаблона после развертывания

Можно экспортировать шаблон, который использовался для развертывания существующих ресурсов. Шаблон, который вы получаете, совпадает с тем, который использовался для развертывания.

1. Выберите группу ресурсов, которую необходимо экспортировать.

1. Щелкните ссылку в разделе **Развертывания**.

   ![Выбор журнала развертывания](./media/export-template-portal/select-deployment-history.png)

1. Выберите нужное развертывание из журнала развертывания.

   ![Выбор развертывания](./media/export-template-portal/select-details.png)

1. Выберите **шаблон**. Шаблон, используемый для этого развертывания, отображается и доступен для загрузки.

   ![Выбор шаблона](./media/export-template-portal/show-template-from-history.png)

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как экспортировать шаблоны с помощью [Azure CLI](../management/manage-resource-groups-cli.md#export-resource-groups-to-templates), [Azure PowerShell](../management/manage-resource-groups-powershell.md#export-resource-groups-to-templates)или [REST API](/rest/api/resources/resourcegroups/exporttemplate).
- Сведения о синтаксисе шаблона диспетчер ресурсов см. в разделе [Общие сведения о структуре и синтаксисе шаблонов Azure Resource Manager](template-syntax.md).
- Дополнительные сведения о разработке шаблонов см. в пошаговых [руководствах](../index.yml).
- Сведения о том, как просмотреть схемы шаблонов Azure Resource Manager, см. в разделе [Справочник по шаблонам](/azure/templates/).