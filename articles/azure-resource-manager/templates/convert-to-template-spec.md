---
title: Преобразование шаблона портала в спецификацию шаблона
description: Описывает, как преобразовать существующий шаблон из коллекции портал Azure в спецификации шаблона.
ms.topic: conceptual
ms.date: 02/04/2021
ms.author: tomfitz
author: tfitzmac
ms.openlocfilehash: c59275fca1eb3037b48b7293fc9e507df46b7fcb
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "99555943"
---
# <a name="convert-template-gallery-in-portal-to-template-specs"></a>Преобразование коллекции шаблонов на портале в спецификации шаблонов

Портал Azure предоставляет способ хранения шаблонов Azure Resource Manager (шаблонов ARM) в учетной записи. Однако [спецификации шаблонов](template-specs.md) предлагают более простой способ совместного использования шаблонов пользователями в Организации и связи с другими шаблонами. В этой статье показано, как преобразовать существующие шаблоны из коллекции шаблонов в спецификации шаблонов.

Чтобы узнать, есть ли у вас шаблоны для преобразования, просмотрите [коллекцию шаблонов на портале](https://portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Gallery%2Fmyareas%2Fgalleryitems). Эти шаблоны имеют тип ресурса `Microsoft.Gallery/myareas/galleryitems` .

## <a name="convert-with-powershell-script"></a>Преобразование с помощью скрипта PowerShell

Чтобы упростить преобразование шаблонов в галерее шаблонов, используйте сценарий PowerShell из репозитория шаблонов быстрого запуска Azure. При запуске скрипта можно либо создать новую спецификацию шаблона для каждого шаблона, либо скачать шаблон, который создает спецификацию шаблона. Скрипт не удаляет шаблон из коллекции шаблонов.

1. Скопируйте [Скрипт миграции](https://github.com/Azure/azure-quickstart-templates/blob/master/201-templatespec-migrate-create/Migrate-GalleryItems.ps1). Сохраните локальную копию с именем *Migrate-GalleryItems.ps1*.
1. Чтобы создать новые спецификации шаблонов, укажите значения для `-ResourceGroupName` параметров и `-Location` . 

   Задайте для параметра значение `ItemsToExport` `MyGalleryItems` , чтобы экспортировать шаблоны. Задайте для параметра значение `AllGalleryItems` , чтобы экспортировать все шаблоны, к которым у вас есть доступ.

   В следующем примере создаются новые спецификации шаблонов для каждого шаблона в группе ресурсов с именем **мигратедрг**. Скрипт создает группу ресурсов, если она не существует.

   ```azurepowershell
   .\Migrate-GalleryItems.ps1 -ResourceGroupName migratedRG -Location westus2 -ItemsToExport MyGalleryItems
   ```

1. Чтобы загрузить шаблоны, которые можно использовать для создания спецификаций шаблонов, не выводят значения для группы ресурсов или расположения. Вместо этого укажите `-ExportToFile` . Шаблон не совпадает с шаблоном в коллекции. Вместо этого он содержит ресурс спецификации шаблона, который создает спецификацию шаблона для шаблона.

   В следующем примере шаблоны загружаются без создания спецификаций шаблонов.

   ```azurepowershell
   .\Migrate-GalleryItems.ps1 -ItemsToExport MyGalleryItems -ExportToFile
   ```

   Сведения о развертывании шаблона, который создает спецификацию шаблона, см. в разделе [Краткое руководство по созданию и развертыванию шаблона Spec (Предварительная версия)](quickstart-create-template-specs.md).

Дополнительные сведения о скрипте и его параметрах см. в разделе [Создание темплатеспекс из шаблонов коллекции шаблонов](https://github.com/Azure/azure-quickstart-templates/tree/master/201-templatespec-migrate-create).

## <a name="manually-convert-through-portal"></a>Ручное преобразование через портал

Вы можете вручную скопировать шаблоны из коллекции в новые спецификации шаблонов.

1. Откройте [шаблоны (Предварительная версия)](https://portal.azure.com/#blade/HubsExtension/BrowseResourceBlade/resourceType/Microsoft.Gallery%2Fmyareas%2Fgalleryitems) на портале.
1. Выберите шаблон для миграции.
1. Выберите **Просмотр шаблона**.
1. Скопируйте содержимое шаблона.
1. На панели поиска портала найдите **спецификации шаблонов**. Выберите этот параметр.
1. Выберите **Создание спецификации шаблона**.
1. Укажите значения для параметров имя, подписка, Группа ресурсов, расположение и версия.
1. Выберите **Далее: изменить шаблон**.
1. Для содержимого шаблона вставьте скопированный шаблон из коллекции шаблонов.
1. Выберите **Review + Create** (Просмотреть и создать).
1. После успешного завершения проверки выберите **создать**.

Если вам нужно поделиться спецификацией шаблона с другими пользователями в Организации, [установите контроль доступа на основе ролей](../../role-based-access-control/tutorial-role-assignments-group-powershell.md) для группы или пользователей, которым требуется доступ.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о спецификациях шаблонов см. в статье [Создание и развертывание спецификаций шаблонов](template-specs.md).
