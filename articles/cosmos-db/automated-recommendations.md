---
title: Автоматизированная производительность, стоимость, рекомендации по безопасности для Azure Cosmos DB
description: Узнайте, как просматривать настройки производительности, стоимости, безопасности и другие рекомендации для Azure Cosmos DB в зависимости от шаблонов рабочей нагрузки.
author: ThomasWeiss
ms.author: thweiss
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 07/28/2020
ms.reviewer: sngun
ms.openlocfilehash: d9eb55030c7ec52f9b2ac79fbab19944f0a3e190
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "93087831"
---
# <a name="automated-recommendations-for-azure-cosmos-db"></a>Автоматические рекомендации для Azure Cosmos DB
[!INCLUDE[appliesto-all-apis](includes/appliesto-all-apis.md)]

Все облачные службы, включая Azure Cosmos DB, часто обновляются новыми функциями, возможностями и улучшениями. Для вашего приложения важно иметь новейшие обновления производительности и безопасности. Портал Azure предлагает настраиваемые рекомендации, которые позволяют максимально увеличить производительность приложения. Подсистема рекомендаций Azure Cosmos DB постоянно анализирует историю использования ресурсов Azure Cosmos DB и предоставляет рекомендации на основе шаблонов рабочих нагрузок. Эти рекомендации соответствуют таким областям, как секционирование, индексирование, сеть, безопасность и т. д. Эти настраиваемые рекомендации помогут повысить производительность приложения.

## <a name="view-recommendations"></a>Просмотр рекомендаций

Рекомендации по Azure Cosmos DB можно просмотреть следующими способами.

- Один из способов просмотреть рекомендации — на вкладке уведомления. Если имеются новые рекомендации, отобразится панель сообщений. Войдите в [портал Azure](https://portal.azure.com) и перейдите к своей учетной записи Azure Cosmos. В учетной записи Azure Cosmos откройте панель **уведомления** и выберите вкладку **рекомендации** . Вы можете выбрать сообщение и просмотреть рекомендации.  

   :::image type="content" source="./media/automated-recommendations/cosmos-db-pane-recommendations.png" alt-text="Просмотр рекомендаций из панели Azure Cosmos DB":::

- Вы также можете найти рекомендации с помощью [помощника по Azure](../advisor/advisor-overview.md) в категории по различным сегментам, таким как стоимость, безопасность, надежность, производительность и эффективное эксплуатация. Можно выбрать определенные подписки и выполнить фильтрацию по типу ресурса, который **Azure Cosmos DB учетных записей**.  При выборе конкретной рекомендации отображаются действия, которые можно предпринять для получения преимуществ в рабочих нагрузках.

   :::image type="content" source="./media/automated-recommendations/advisor-pane-recommendations.png" alt-text="Просмотр рекомендаций на панели помощника Azure":::

Не все рекомендации, показанные на панели Azure Cosmos DB, доступны в помощнике по Azure и наоборот. Это обусловлено тем, что в зависимости от типа рекомендаций, которые они помещаются на панели помощника по Azure, Azure Cosmos DB области или и того, и другого.

В настоящее время Azure Cosmos DB поддерживает рекомендации в следующих областях. Каждая из этих рекомендаций содержит ссылку на соответствующий раздел документации, поэтому вы можете легко выполнить следующие действия.

## <a name="sdk-usage-recommendations"></a>Рекомендации по использованию пакета SDK

В этой категории помощник обнаруживает использование старой версии пакетов SDK и рекомендует выполнить обновление до более новой версии, чтобы использовать последние исправления ошибок и повысить производительность. В настоящее время доступны следующие рекомендации, относящиеся к пакету SDK:

|Имя  |Описание  |
|---------|---------|
| Старый соединитель Spark | Определяет использование старых версий соединителя Spark и рекомендует обновление. |
| Старый пакет SDK для .NET | Определяет использование старых версий пакета SDK для .NET и рекомендует обновление. |
| Старый пакет SDK для Java | Определяет использование старых версий соединителя Java и рекомендует обновление. |

## <a name="indexing-recommendations"></a>Рекомендации по индексированию

В этой категории помощник обнаруживает режим индексирования, политику индексирования, индексированные пути и рекомендует изменить, если текущая конфигурация влияет на производительность запросов. В настоящее время доступны следующие рекомендации по индексированию:

|Имя  |Описание  |
|---------|---------|
| Отложенное индексирование | Определяет использование режима отложенной индексации и рекомендует использовать последовательный режим индексирования. Цель режима отложенной индексации Azure Cosmos DB ограничена и может повлиять на актуальность результатов запросов в некоторых ситуациях, поэтому рекомендуется использовать последовательный режим индексирования. |
| Составное индексирование| Определяет учетные записи, в которых запросы могут использовать преимущества составных индексов и рекомендовать их использование. Составные индексы могут значительно повысить производительность и пропускную способность некоторых запросов.|
| Политика индексирования по умолчанию с множеством индексируемых путей | Определяет контейнеры, выполняющиеся при индексировании по умолчанию с большим количеством индексированных путей, и рекомендует настраивать политику индексирования.|
| УПОРЯДОЧЕНие по запросам с высоким тарифом в секунду| Обнаруживает контейнеры, выдающие запросы с высоким тарифом на ЕДИНИЦу, и рекомендует просматривать составные индексы.|
| Учетные записи MongoDB 3,6 с отсутствием индекса и высоким потреблением единиц запросов/с| Обнаруживает API Azure Cosmos DB для MongoDB с версией контейнеров 3,6, выдающими запросы с высоким тарифом на ЕДИНИЦу и рекомендует добавлять индексы.|

## <a name="cost-optimization-recommendations"></a>Рекомендации по оптимизации затрат

В этой категории помощник обнаруживает использование единиц запросов/с и определяет, что вы можете оптимизировать цену, внеся некоторые изменения в ресурсы или используя другую модель ценообразования. В настоящее время доступны следующие рекомендации по оптимизации стоимости.

|Имя  |Описание  |
|---------|---------|
| Зарезервированная емкость | Определяет использование единиц запросов в секунду и рекомендует зарезервированные экземпляры пользователям, которые могут получить от него преимущества. |
| Неактивные контейнеры | Обнаруживает контейнеры, которые не использовались более 30 дней, и рекомендует уменьшить пропускную способность для таких контейнеров или их удаления.|
| Новые подписки с высокой пропускной способностью | Обнаружение новых подписок с учетными записями занимает необычно высокое число единиц запросов в день и предоставляет им уведомление. Это уведомление предназначено для информирования новых клиентов о том, что Azure Cosmos DB работает с подготовленной моделью на основе пропускной способности и не моделью на основе потребления. |

## <a name="migration-recommendations"></a>Рекомендации по миграции

В этой категории помощник обнаруживает, что вы используете устаревшие функции, поэтому рекомендуется выполнить миграцию, чтобы можно было использовать широкие возможности масштабирования Azure Cosmos DB и другие преимущества. В настоящее время доступны следующие рекомендации, относящиеся к миграции.

|Имя  |Описание  |
|---------|---------|
| Несекционированные контейнеры | Обнаруживает контейнеры фиксированного размера, которые приближается к максимальному размеру хранилища, и рекомендует их перенос в секционированные контейнеры.|

## <a name="query-usage-recommendations"></a>Рекомендации по использованию запросов

В этой категории помощник обнаруживает выполнение запроса и определяет, что производительность запросов можно настроить с помощью некоторых изменений. В настоящее время доступны следующие рекомендации по использованию запросов:

|Имя  |Описание  |
|---------|---------|
| Запросы с фиксированным размером страницы | Обнаруживает запросы, выданные фиксированным размером страницы, и рекомендует использовать параметр-1 (без ограничений на размер страницы) вместо определения конкретного значения. Этот параметр сокращает число полных обходов сети, необходимых для получения всех результатов. |

## <a name="next-steps"></a>Дальнейшие действия

* [Настройка производительности запросов в Azure Cosmos DB](sql-api-query-metrics.md)
* [Устранение проблем с запросами](troubleshoot-query-performance.md) при использовании Azure Cosmos DB
