---
title: Бессерверное предложение, основанное на потреблении в Azure Cosmos DB
description: Дополнительные сведения о бессерверных предложениях на основе использования Azure Cosmos DB.
author: ThomasWeiss
ms.author: thweiss
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 12/23/2020
ms.openlocfilehash: c5086eee805ffbcdf0741eae4db405b1bcbe8692
ms.sourcegitcommit: 6cca6698e98e61c1eea2afea681442bd306487a4
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/24/2020
ms.locfileid: "97760366"
---
# <a name="azure-cosmos-db-serverless-preview"></a>Бессерверные Azure Cosmos DB (Предварительная версия)
[!INCLUDE[appliesto-all-apis](includes/appliesto-all-apis.md)]

> [!IMPORTANT]
> В настоящее время на сервере Azure Cosmos DB не работает Предварительная версия. Эта предварительная версия предоставляется без Соглашение об уровне обслуживания и не рекомендуется для рабочих нагрузок в рабочей среде. Дополнительные сведения см. в статье [Дополнительные условия использования Предварительных версий Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Azure Cosmos DB бессерверных операций позволяет использовать учетную запись Azure Cosmos в расчете на основе потребления, когда вы платите только за единицы запросов, потребляемые операциями базы данных, и объемом хранилища, потребляемым данными. Бессерверные контейнеры могут обслуживать тысячи запросов в секунду без минимальной оплаты и не требует планирования емкости.

> [!IMPORTANT] 
> У вас есть отзывы о бессерверных задачах? Мы хотим слышать! Вы можете удалить сообщение в группу Azure Cosmos DB без сервера: [azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com) .

При использовании Azure Cosmos DB каждая операция базы данных имеет затраты, выраженные в [единицах запроса](request-units.md). Стоимость оплаты за эти расходы зависит от типа используемой учетной записи Azure Cosmos:

- В режиме [подготовленной пропускной способности](set-throughput.md) необходимо зафиксировать определенный объем пропускной способности (выраженный в единицах запросов в секунду), который подготавливается к базам данных и контейнерам. Стоимость операций базы данных затем вычитается из числа единиц запросов, доступных каждую секунду. По окончании расчетного периода вы получаете счет за установленный объем пропускной способности.
- В режиме без сервера вам не нужно подготавливать пропускную способность при создании контейнеров в учетной записи Azure Cosmos. По окончании расчетного периода вы получаете счет за количество единиц запроса, использованных операциями базы данных.

## <a name="use-cases"></a>Варианты использования

Azure Cosmos DB, которые лучше подходят для бессерверных ситуаций:

- **Низкий, периодический и непредсказуемый трафик**: так как в таких ситуациях производительность подготовки не требуется и может быть неэкономичной
- **Умеренная производительность**: так как бессерверные контейнеры имеют [определенные характеристики производительности](#performance)

По этим причинам Azure Cosmos DB бессерверные вопросы следует рассматривать в следующих ситуациях:

- Приступая к работе с Azure Cosmos DB
- Разработка, тестирование и создание прототипов новых приложений
- Запуск небольших и средних приложений с периодическим трафиком, который трудно прогнозировать
- Интеграция с бессерверными службами вычислений, такими как [функции Azure](../azure-functions/functions-overview.md)

Дополнительные сведения о том, как выбрать предложение, наиболее подходящее для вашего варианта использования, см. в статье [Выбор между подготовленной пропускной способностью и бессерверной](throughput-serverless.md) статьей.

## <a name="using-serverless-resources"></a>Использование бессерверных ресурсов

Сервер — это новый тип учетной записи Azure Cosmos. Это означает, что при создании новой учетной записи необходимо выбрать **подготовную пропускную способность** и **бессерверную** связь. Чтобы приступить к работе с сервером, необходимо создать новую учетную запись без сервера. В предварительной версии единственным поддерживаемым способом создания новой учетной записи, не использующей сервер, является [использование портал Azure](create-cosmosdb-resources-portal.md). Миграция существующих учетных записей в бессерверный режим в настоящее время не поддерживается.

Любой контейнер, созданный в учетной записи без сервера, является бессерверным контейнером. Бессерверные контейнеры предоставляют те же возможности, что и контейнеры, созданные в режиме подготовленной пропускной способности, поэтому вы должны читать, записывать и запрашивать данные точно так же. Однако учетные записи и контейнеры сервера также имеют определенные характеристики:

> [!IMPORTANT]
> Некоторые из этих ограничений могут быть облегчило или удалены, когда бессерверная доступность становится общедоступной, и **ваши отзывы** помогут нам принять решение! Свяжитесь с нами и расскажите нам о бессерверных впечатлениях: [azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com) .

- Учетная запись бессерверного учета может выполняться только в одном регионе Azure. Невозможно добавить дополнительные регионы Azure в учетную запись без сервера после ее создания.
- Невозможно включить [функцию предварительной версии ссылки синапсе](synapse-link.md) для учетной записи без сервера.
- Пропускная способность подготовки не требуется для бессерверных контейнеров, поэтому применимы следующие инструкции:
    - Вы не можете передать пропускную способность при создании бессерверного контейнера, и это возвращает ошибку.
    - Невозможно прочесть или обновить пропускную способность в бессерверном контейнере, и это приведет к возвращению ошибки.
    - Невозможно создать базу данных с общей пропускной способностью в учетной записи, не имеющей доступа к серверу. при этом возвращается ошибка.
- Бессерверные контейнеры могут хранить не более 50 ГБ данных и индексов.

## <a name="monitoring-your-consumption"></a>Мониторинг использования

Если вы уже использовали Azure Cosmos DB в режиме подготовленной пропускной способности, вы обнаружите, что бессерверные ресурсы более экономичны, если трафик не выполнит выравнивание подготовленной емкости. Компромисс заключается в том, что стоимость станет менее прогнозируемой, так как счет выставляется в зависимости от количества запросов, обработанных базой данных. Поэтому важно следить за текущим потреблением.

При просмотре области **метрики** вашей учетной записи вы увидите диаграмму с именем **единицы запросов, потребляемую** на вкладке **Обзор** . На этой диаграмме показано количество единиц запросов, потребляемых вашей учетной записью:

:::image type="content" source="./media/serverless/request-units-consumed.png" alt-text="Диаграмма, показывающая единицы запросов на использование" border="false":::

Эту же диаграмму можно найти при использовании Azure Monitor, как описано [здесь](monitor-request-unit-usage.md). Обратите внимание, что Azure Monitor позволяет настроить [оповещения](../azure-monitor/platform/alerts-metric-overview.md), которые можно использовать для уведомления о том, что потребление единиц запросов прошло определенное пороговое значение.

## <a name="performance"></a><a id="performance"></a>Производительность

Бессерверные ресурсы дают определенные характеристики производительности, которые отличаются от подготовленных ресурсов пропускной способности.

- **Доступность**. После того как бессерверное предложение станет общедоступным, доступность бессерверных контейнеров будет покрыта соглашение об уровне обслуживания (SLA) 99,9%, если зоны доступности (избыточность зоны) не используется. Соглашение об уровне обслуживания составляет 99,99% при использовании Зоны доступности.
- **Задержка**. После того как бессерверное предложение становится общедоступным, задержка бессерверных контейнеров будет заключаться в том, что в течение 10 миллисекунд или меньше для операций чтения точки и 30 миллисекунд или меньше для записи. Операция чтения точки состоит из выборки одного элемента по его ИДЕНТИФИКАТОРу и значению ключа секции.
- Возможность **разбивки** на себя. После того как бессерверное предложение становится общедоступным, уровень нагрузки бессерверных контейнеров будет охватывать цель уровня обслуживания (цель) 95%. Это означает, что максимальная нагрузка может быть достигнута не менее 95% времени.

> [!NOTE]
> Как любая предварительная версия Azure, Azure Cosmos DB без сервера исключается из соглашений об уровне обслуживания (SLA). Указанные выше характеристики производительности предоставляются в качестве предварительной версии для предоставления предложения в общедоступном виде.

## <a name="next-steps"></a>Дальнейшие действия

Приступите к работе со следующими статьями:

- [Единицы запросов в Azure Cosmos DB](request-units.md)
- [Выбор между подготовленной пропускной способностью и бессерверным режимом](throughput-serverless.md)
- [Модели ценообразования в Azure Cosmos DB](how-pricing-works.md)
