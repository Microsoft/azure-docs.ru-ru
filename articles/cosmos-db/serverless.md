---
title: Бессерверное предложение, основанное на потреблении в Azure Cosmos DB
description: Дополнительные сведения о бессерверных предложениях на основе использования Azure Cosmos DB.
author: ThomasWeiss
ms.author: thweiss
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 01/08/2021
ms.openlocfilehash: 3ee8d5f36977a5a9f20c7e636118ffa9f6ee0b6d
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100570995"
---
# <a name="azure-cosmos-db-serverless-preview"></a>Бессерверные Azure Cosmos DB (Предварительная версия)
[!INCLUDE[appliesto-all-apis](includes/appliesto-all-apis.md)]

Azure Cosmos DB бессерверных операций позволяет использовать учетную запись Azure Cosmos в расчете на основе потребления, когда вы платите только за единицы запросов, потребляемые операциями базы данных, и объемом хранилища, потребляемым данными. Бессерверные контейнеры могут обслуживать тысячи запросов в секунду без минимальной оплаты и не требует планирования емкости.

> [!IMPORTANT] 
> У вас есть отзывы о бессерверных задачах? Мы хотим слышать! Вы можете удалить сообщение в группу Azure Cosmos DB без сервера: [azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com) .

При использовании Azure Cosmos DB каждая операция базы данных имеет затраты, выраженные в [единицах запроса](request-units.md). Стоимость оплаты за эти расходы зависит от типа используемой учетной записи Azure Cosmos:

- В режиме [подготовленной пропускной способности](set-throughput.md) необходимо зафиксировать определенный объем пропускной способности (выраженный в единицах запросов в секунду), который подготавливается к базам данных и контейнерам. Стоимость операций базы данных затем вычитается из числа единиц запросов, доступных каждую секунду. По окончании расчетного периода вы получаете счет за установленный объем пропускной способности.
- В режиме без сервера вам не нужно подготавливать пропускную способность при создании контейнеров в учетной записи Azure Cosmos. По окончании расчетного периода вы получаете счет за количество единиц запроса, использованных операциями базы данных.

## <a name="use-cases"></a>Варианты использования

Azure Cosmos DB бессерверных наиболее подходящих сценариев, когда предполагается **периодический и непредсказуемый трафик** с длительным временем простоя. Так как подготовка ресурсов в таких ситуациях не является обязательной и может быть неэкономичной, Azure Cosmos DB без сервера следует учитывать в следующих случаях использования:

- Приступая к работе с Azure Cosmos DB
- Запуск приложений с помощью
    - ускоренный, периодический трафик, который трудно прогнозировать или
    - низкая (<10%) отношение среднего к пиковому трафику
- Разработка, тестирование, создание прототипов и запуск в рабочей среде новые приложения, в которых шаблон трафика неизвестен
- Интеграция с бессерверными службами вычислений, такими как [функции Azure](../azure-functions/functions-overview.md)

Дополнительные сведения о том, как выбрать предложение, наиболее подходящее для вашего варианта использования, см. в статье [Выбор между подготовленной пропускной способностью и бессерверной](throughput-serverless.md) статьей.

## <a name="using-serverless-resources"></a>Использование бессерверных ресурсов

Сервер — это новый тип учетной записи Azure Cosmos. Это означает, что при создании новой учетной записи необходимо выбрать **подготовную пропускную способность** и **бессерверную** связь. Чтобы приступить к работе с сервером, необходимо создать новую учетную запись без сервера. В предварительной версии единственным поддерживаемым способом создания новой учетной записи, не использующей сервер, является [использование портал Azure](create-cosmosdb-resources-portal.md). Миграция существующих учетных записей в бессерверный режим в настоящее время не поддерживается.

Любой контейнер, созданный в учетной записи без сервера, является бессерверным контейнером. Бессерверные контейнеры предоставляют те же возможности, что и контейнеры, созданные в режиме подготовленной пропускной способности, поэтому вы должны читать, записывать и запрашивать данные точно так же. Однако учетные записи и контейнеры сервера также имеют определенные характеристики:

> [!IMPORTANT]
> Некоторые из этих ограничений могут быть облегчило или удалены, когда бессерверная доступность становится общедоступной, и **ваши отзывы** помогут нам принять решение! Свяжитесь с нами и расскажите нам о бессерверных впечатлениях: [azurecosmosdbserverless@service.microsoft.com](mailto:azurecosmosdbserverless@service.microsoft.com) .

- Учетная запись бессерверного учета может выполняться только в одном регионе Azure. Невозможно добавить дополнительные регионы Azure в учетную запись без сервера после ее создания.
- Невозможно включить [функцию предварительной версии ссылки синапсе](synapse-link.md) для учетной записи без сервера.
- Пропускная способность подготовки не требуется для бессерверных контейнеров, поэтому применимы следующие инструкции:
    - Вы не можете передать пропускную способность при создании бессерверного контейнера, и это возвращает ошибку.
    - Невозможно прочесть или обновить пропускную способность в бессерверном контейнере, и это приведет к возвращению ошибки.
    - Невозможно создать базу данных с общей пропускной способностью в учетной записи, не имеющей доступа к серверу. при этом возвращается ошибка.
- Бессерверные контейнеры могут хранить не более 50 ГБ данных и индексов.

## <a name="monitoring-your-consumption"></a>Мониторинг использования

Если вы уже использовали Azure Cosmos DB в режиме подготовленной пропускной способности, вы обнаружите, что бессерверные ресурсы более экономичны, если трафик не выполнит выравнивание подготовленной емкости. Компромисс заключается в том, что стоимость станет менее прогнозируемой, так как счет выставляется в зависимости от количества запросов, обработанных базой данных. Поэтому важно следить за текущим потреблением.

При просмотре области **метрики** вашей учетной записи вы увидите диаграмму с именем **единицы запросов, потребляемую** на вкладке **Обзор** . На этой диаграмме показано количество единиц запросов, потребляемых вашей учетной записью:

:::image type="content" source="./media/serverless/request-units-consumed.png" alt-text="Диаграмма, показывающая единицы запросов на использование" border="false":::

Эту же диаграмму можно найти при использовании Azure Monitor, как описано [здесь](monitor-request-unit-usage.md). Обратите внимание, что Azure Monitor позволяет настроить [оповещения](../azure-monitor/alerts/alerts-metric-overview.md), которые можно использовать для уведомления о том, что потребление единиц запросов прошло определенное пороговое значение.

## <a name="performance"></a><a id="performance"></a>Производительность

Бессерверные ресурсы дают определенные характеристики производительности, которые отличаются от подготовленных ресурсов пропускной способности. После того как бессерверное предложение станет общедоступным, задержка в бессерверных контейнерах будет заключаться в течение 10 миллисекунд или меньше для операций чтения точки и 30 миллисекунд или меньше для операций записи. Операция чтения точки состоит из выборки одного элемента по его ИДЕНТИФИКАТОРу и значению ключа секции.

## <a name="next-steps"></a>Дальнейшие шаги

Приступите к работе со следующими статьями:

- [Единицы запросов в Azure Cosmos DB](request-units.md)
- [Выбор между подготовленной пропускной способностью и бессерверным режимом](throughput-serverless.md)
- [Модели ценообразования в Azure Cosmos DB](how-pricing-works.md)
