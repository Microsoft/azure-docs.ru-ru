---
title: Перенос данных из Oracle в Azure Cosmos DB API Cassandra с помощью Блитзз
description: Узнайте, как перенести данные из базы данных Oracle в Azure Cosmos DB API Cassandra с помощью Блитзз.
author: SnehaGunda
ms.service: cosmos-db
ms.subservice: cosmosdb-cassandra
ms.topic: how-to
ms.date: 08/21/2019
ms.author: sngun
ms.reviewer: sngun
ms.openlocfilehash: 15bcd0c54fc5f6614f4d1925759704309048acae
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "93336448"
---
# <a name="migrate-data-from-oracle-to-azure-cosmos-db-cassandra-api-account-using-blitzz"></a>Перенос данных из Oracle в учетную запись Azure Cosmos DB API Cassandra с помощью Блитзз
[!INCLUDE[appliesto-cassandra-api](includes/appliesto-cassandra-api.md)]

API Cassandra в Azure Cosmos DB стали отличным выбором для корпоративных рабочих нагрузок, работающих на базе Oracle, по различным причинам:

* **Улучшенная масштабируемость и доступность:** Она устраняет единые точки отказа, улучшает масштабируемость и доступность приложений.

* **Значительные сокращения затрат:** Вы можете сэкономить затраты с Azure Cosmos DB, включая стоимость виртуальных машин, пропускной способности и применимых лицензий Oracle. Кроме того, вам не нужно управлять центрами обработки данных, серверами, хранилищем SSD, сетью и расходами электроэнергии.

* **Отсутствие дополнительных издержек при управлении и мониторинге:** В качестве полностью управляемой облачной службы Azure Cosmos DB устраняет издержки на управление множеством параметров и наблюдение за ними.

Существует несколько способов миграции рабочих нагрузок базы данных с одной платформы на другую. [Блитзз](https://www.blitzz.io) — это средство, обеспечивающее безопасный и надежный способ выполнения миграции из различных баз данных в Azure Cosmos DB. В этой статье описываются шаги, необходимые для переноса данных из базы данных Oracle в Azure Cosmos DB API Cassandra с помощью Блитзз.

## <a name="benefits-using-blitzz-for-migration"></a>Преимущества использования Блитзз для миграции

Решение для миграции блитзз следует пошаговому подходу к переносу сложных рабочих нагрузок. Ниже приведены некоторые ключевые аспекты плана миграции нулевого времени простоя Блитзз.

* Она обеспечивает автоматическую миграцию бизнес-логики (таблиц, индексов, представлений) из базы данных Oracle в Azure Cosmos DB. Создавать схемы вручную не требуется.

* Блитзз предлагает репликацию с большим объемом и параллельной базой данных. Она обеспечивает синхронизацию исходной и целевой платформ во время миграции с помощью методики, именуемой Change-Data-Capture (CDC). С помощью CDC Блитзз постоянно Извлекает поток изменений из базы данных-источника (Oracle) и применяет их к целевой базе данных (Azure Cosmos DB).

* Это отказоустойчивость и гарантирует ровно одну доставку данных даже во время сбоя оборудования или программного обеспечения в системе.

* Он обеспечивает защиту данных во время передачи с помощью различных методов обеспечения безопасности, таких как TLS/SSL, шифрование.

* Она предлагает службы для преобразования сложной бизнес-логики, написанной на языке PL/SQL, в эквивалентную бизнес-логику в Azure Cosmos DB.

## <a name="steps-to-migrate-data"></a>Шаги для переноса данных

В этом разделе описаны шаги, необходимые для настройки Блитзз и переноса данных из базы данных Oracle в Azure Cosmos DB.

1. На компьютере, где планируется установить Блитзз репликант, добавьте сертификат безопасности. Этот сертификат требуется для Блитзз репликант, чтобы установить TLS-подключение с указанной учетной записью Azure Cosmos DB. Сертификат можно добавить, выполнив следующие действия.

   ```bash
   wget https://cacert.omniroot.com/bc2025.crt
   mv bc2025.crt bc2025.cer
   keytool -keystore $JAVA_HOME/lib/security/cacerts -importcert -alias bc2025ca -file bc2025.cer
   ```

1. подразделение может получить установку Блитзз и двоичные файлы, запросив демонстрацию на [веб-сайте блитзз](https://www.blitzz.io). Кроме того, можно отправить группе [сообщение электронной почты](mailto:success@blitzz.io) .

   :::image type="content" source="./media/oracle-migrate-cosmos-db-blitzz/blitzz-replicant-download.png" alt-text="Загрузка средства блитзз Репликант":::

   :::image type="content" source="./media/oracle-migrate-cosmos-db-blitzz/replicant-files.png" alt-text="Файлы Репликант блитзз":::

1. В окне терминала CLI настройте конфигурацию базы данных источника. Откройте файл конфигурации с помощью **`vi conf/conn/oracle.yml`** команды и добавьте разделенный запятыми список IP-адресов узлов Oracle, номер порта, имя пользователя, пароль и другие необходимые сведения. В следующем примере кода показан пример файла конфигурации:

   ```bash
   type: ORACLE

   host: localhost
   port: 53546

   service-name: IO

   username: '<Username of your Oracle database>'
   password: '<Password of your Oracle database>'

   conn-cnt: 30
   use-ssl: false
   ```

   :::image type="content" source="./media/oracle-migrate-cosmos-db-blitzz/open-connection-editor-oracle.png" alt-text="Открыть редактор соединений Oracle":::

   :::image type="content" source="./media/oracle-migrate-cosmos-db-blitzz/oracle-connection-configuration.png" alt-text="Конфигурация подключения к Oracle":::

   После заполнения сведений о конфигурации сохраните и закройте файл.

1. При необходимости можно настроить файл фильтра базы данных источника. Файл фильтра указывает, какие схемы или таблицы нужно перенести. Откройте файл конфигурации с помощью **`vi filter/oracle_filter.yml`** команды и введите следующие сведения о конфигурации:

   ```bash

   allow:
   -    schema: “io_blitzz”
   Types: [TABLE]
   ```
 
   После заполнения сведений о фильтре базы данных сохраните и закройте файл.

1. Далее вы настроите конфигурацию целевой базы данных. Перед определением конфигурации [Создайте учетную запись API Cassandra Azure Cosmos DB](create-cassandra-dotnet.md#create-a-database-account). [Выберите правильный ключ секции](partitioning-overview.md#choose-partitionkey) из данных, а затем создайте пространства ключей и таблицу для хранения перенесенных данных.

1. Перед переносом данных увеличьте пропускную способность контейнера до объема, необходимого для быстрого переноса приложения. Например, можно увеличить пропускную способность до 100000 RUs. Масштабирование пропускной способности перед началом миграции поможет перенести данные за меньшее время. 

   :::image type="content" source="./media/oracle-migrate-cosmos-db-blitzz/scale-throughput.png" alt-text="Масштабирование контейнера Azure Cosmos по всему":::

   После завершения миграции необходимо уменьшить пропускную способность. В зависимости от объема хранимых данных и числа получателей, необходимых для каждой операции, можно оценить пропускную способность, необходимую после переноса данных. Дополнительные сведения о том, как оценить требуемый метод RUs, см. в статьях [предоставление пропускной способности для контейнеров и баз данных](set-throughput.md) и [Оценка единиц запросов в секунду с помощью планировщика ресурсов Azure Cosmos DB](estimate-ru-with-capacity-planner.md) .

1. Получите **контактную точку, порт, имя пользователя** и **первичный пароль** учетной записи Azure Cosmos на панели **строка подключения** . Эти значения будут использоваться в файле конфигурации.

1. В окне терминала CLI настройте конфигурацию целевой базы данных. Откройте файл конфигурации с помощью **`vi conf/conn/cosmosdb.yml`** команды и добавьте разделенный запятыми список URI узла, номер порта, имя пользователя, пароль и другие необходимые параметры. Ниже приведен пример содержимого в файле конфигурации.

   ```bash
   type: COSMOSDB

   host: `<Azure Cosmos account’s Contact point>`
   port: 10350

   username: 'blitzzdemo'
   password: `<Your Azure Cosmos account’s primary password>'

   max-connections: 30
   use-ssl: false
   ```

1. Затем перенесите данные с помощью Блитзз. Вы можете запустить Близз Репликант в режиме **полного** или **моментального снимка** :

   * **Полный режим** — в этом режиме Репликант продолжит работу после миграции и прослушивает любые изменения в исходной системе Oracle. При обнаружении изменений они реплицируются в целевой учетной записи Azure Cosmos в режиме реального времени.

   * **Режим моментальных снимков** — в этом режиме можно выполнять миграцию схемы и однократную репликацию данных. Репликация в режиме реального времени не поддерживается в этом параметре.


   С помощью двух описанных выше режимов миграция может быть выполнена с нулевым временем простоя.

1. Чтобы перенести данные из терминала Блитзз Репликант CLI, выполните следующую команду:

   ```bash
   ./bin/replicant full conf/conn/oracle.yaml conf/conn/cosmosdb.yaml --filter filter/oracle_filter.yaml --replace-existing
   ```

   В пользовательском интерфейсе Репликант отображается ход выполнения репликации. После завершения миграции схемы и создания моментального снимка ход выполнения показывает 100%. После завершения миграции можно проверить данные в целевой базе данных Azure Cosmos.

   :::image type="content" source="./media/oracle-migrate-cosmos-db-blitzz/oracle-data-migration-output.png" alt-text="Выходные данные переноса данных Oracle":::

1. Так как для миграции использовался полный режим, можно выполнять такие операции, как вставка, обновление или удаление данных в исходной базе данных Oracle. Позже вы сможете проверить, что они реплицируются в режиме реального времени в целевой базе данных Azure Cosmos. После миграции убедитесь, что пропускная способность, настроенная для контейнера Azure Cosmos, снижена.

1. Вы можете отключить Репликант любую точку и перезапустить ее с параметром **--Resume** . Репликация возобновляется с момента остановки, не нарушая согласованность данных. Следующая команда показывает, как использовать параметр Resume.

   ```bash
   ./bin/replicant full conf/conn/oracle.yaml conf/conn/cosmosdb.yaml --filter filter/oracle_filter.yaml --replace-existing --resume
   ```

Дополнительные сведения о переносе данных в назначение, перенос в режиме реального времени см. в [блитзз Репликант Demo](https://www.youtube.com/watch?v=y5ZeRK5A-MI).

## <a name="next-steps"></a>Дальнейшие действия

* [Обеспечение необходимой пропускной способности для контейнеров и баз данных](set-throughput.md) 
* [Рекомендации по использованию ключа секции](partitioning-overview.md#choose-partitionkey)
* [Оценка единиц запросов в секунду с помощью планировщика ресурсов Azure Cosmos DB](estimate-ru-with-capacity-planner.md)
