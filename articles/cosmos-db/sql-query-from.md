---
title: Предложение FROM в Azure Cosmos DB
description: Сведения о синтаксисе SQL и пример предложения FROM для Azure Cosmos DB. В этой статье также приведены примеры для определения области действия и получения подэлементов с помощью предложения FROM.
author: timsander1
ms.service: cosmos-db
ms.subservice: cosmosdb-sql
ms.topic: conceptual
ms.date: 05/08/2020
ms.author: tisande
ms.openlocfilehash: 3844a628a8e3773821736324bfdaab3f64ff9da5
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "93336288"
---
# <a name="from-clause-in-azure-cosmos-db"></a>Предложение FROM в Azure Cosmos DB
[!INCLUDE[appliesto-sql-api](includes/appliesto-sql-api.md)]

Предложение FROM ( `FROM <from_specification>` ) является необязательным, если только источник не фильтруется или не проецируется позже в запросе. Запрос, например `SELECT * FROM Families` перечисляется по всему `Families` контейнеру. Вместо имени контейнера можно также использовать специальный КОРНЕВой идентификатор для контейнера.

`FROM`Предложение применяет следующие правила для каждого запроса:

* Контейнер может иметь псевдоним, например `SELECT f.id FROM Families AS f` или просто `SELECT f.id FROM Families f`. Ниже приведен `f` псевдоним для `Families` . Ключевое слово AS является необязательным для [псевдонима](sql-query-working-with-json.md#aliasing) идентификатора.  

* После присвоения псевдониму исходное имя источника не может быть привязано. Например, `SELECT Families.id FROM Families f` синтаксически недействителен, так как идентификатор `Families` имеет псевдоним и больше не может быть разрешен.  

* Все свойства, на которые указывают ссылки, должны быть полными, чтобы избежать каких бы то ни было неоднозначных привязок в отсутствие строгого соответствия схем. Например, `SELECT id FROM Families f` синтаксически недействителен, так как свойство `id` не привязано.

## <a name="syntax"></a>Синтаксис
  
```sql  
FROM <from_specification>  
  
<from_specification> ::=
        <from_source> {[ JOIN <from_source>][,...n]}  
  
<from_source> ::=
          <container_expression> [[AS] input_alias]  
        | input_alias IN <container_expression>  
  
<container_expression> ::=
        ROOT
     | container_name  
     | input_alias  
     | <container_expression> '.' property_name  
     | <container_expression> '[' "property_name" | array_index ']'  
```  
  
## <a name="arguments"></a>Аргументы
  
- `<from_source>`  
  
  Указывает источник данных с псевдонимом или без него. Если псевдоним не указан, он выводится из аргумента `<container_expression>` на основе следующих правил:  
  
-  При использовании выражения container_name оно указывается в качестве псевдонима.  
  
-  При использовании выражения `<container_expression>` в качестве псевдонима указывается свойство property_name. При использовании выражения container_name оно указывается в качестве псевдонима.  
  
- AS `input_alias`  
  
  Указывает, что аргумент `input_alias` — это набор значений, возвращенный базовым выражением контейнера.  
 
- `input_alias` IN  
  
  Указывает, что аргумент `input_alias` должен представлять набор значений, полученных путем итерации всех элементов в каждом массиве, возвращенном базовым выражением контейнера. Значения, возвращенные базовым выражением контейнера, которые не являются массивом, игнорируются.  
  
- `<container_expression>`  
  
  Указывает выражение контейнера, используемое для получения документов.  
  
- `ROOT`  
  
  Указывает, что документ необходимо извлечь из подключенного в настоящий момент контейнера по умолчанию.  
  
- `container_name`  
  
  Указывает, что документ необходимо извлечь из предоставленного контейнера. Имя этого контейнера должно совпадать с именем подключенного в настоящий момент контейнера.  
  
- `input_alias`  
  
  Указывает, что документ необходимо извлечь из источника, определенного предоставленным псевдонимом.  
  
- `<container_expression> '.' property_name`  
  
  Указывает, что документ должен быть извлечен путем доступа к `property_name` свойству.  
  
- `<container_expression> '[' "property_name" | array_index ']'`  
  
  Указывает, что документ необходимо извлечь из свойства `property_name` или элемента массива array_index всех документов, полученных указанным выражением контейнера.  
  
## <a name="remarks"></a>Remarks
  
Все псевдонимы, предоставленные или выведенные в аргументе `<from_source>(`, должны быть уникальными. Синтаксис `<container_expression>.`property_name совпадает с синтаксисом `<container_expression>' ['"property_name"']'`. Второй синтаксис можно использовать, если имя свойства содержит знак, не являющийся идентификатором.  
  
### <a name="handling-missing-properties-missing-array-elements-and-undefined-values"></a>Обработка отсутствующих свойств, элементов массива и неопределенных значений
  
Если выражение контейнера обращается к свойствам или элементам массива и необходимое значение отсутствует, это значение игнорируется и не проходит дальнейшую обработку.  
  
### <a name="container-expression-context-scoping"></a>Определение области контекста выражения контейнера  
  
Выражение контейнера может указываться на уровне контейнера или документа:  
  
- Если в качестве базового источника выражения контейнера используется ROOT или `container_name`, выражение определено на уровне контейнера. Такое выражение представляет набор документов, полученный напрямую из контейнера. Оно не зависит от обработки других выражений контейнера.  
  
- Если в качестве базового источника выражения контейнера используется аргумент `input_alias`, сформированный ранее в запросе, выражение определено на уровне документа. Такое выражение представляет набор документов, полученный при оценке выражения контейнера в области каждого документа, который входит в набор, связанный с контейнером, содержащей псевдоним. Результирующий набор в этом случае представляет собой ряд наборов, полученных в результате вычисления выражения контейнера для всех документов в базовом наборе.

## <a name="examples"></a>Примеры

### <a name="get-subitems-by-using-the-from-clause"></a>Получение подэлементов с помощью предложения FROM

Предложение FROM может уменьшить источник до меньшего подмножества. Чтобы перечислить только поддерево в каждом элементе, подкорневой каталог может стать источником, как показано в следующем примере:

```sql
    SELECT *
    FROM Families.children
```

Результаты:

```json
    [
      [
        {
            "firstName": "Henriette Thaulow",
            "gender": "female",
            "grade": 5,
            "pets": [
              {
                  "givenName": "Fluffy"
              }
            ]
        }
      ],
      [
       {
            "familyName": "Merriam",
            "givenName": "Jesse",
            "gender": "female",
            "grade": 1
        },
        {
            "familyName": "Miller",
            "givenName": "Lisa",
            "gender": "female",
            "grade": 8
        }
      ]
    ]
```

В предыдущем запросе в качестве источника использовался массив, но в качестве источника можно также использовать объект. Запрос рассматривает любое допустимое, определенное значение JSON в источнике для включения в результат. В следующем примере исключение `Families` не будет иметь `address.state` значения.

```sql
    SELECT *
    FROM Families.address.state
```

Результаты:

```json
    [
      "WA",
      "NY"
    ]
```

## <a name="next-steps"></a>Дальнейшие действия

- [Начало работы](sql-query-getting-started.md)
- [Предложение SELECT](sql-query-select.md)
- [Предложение WHERE](sql-query-where.md)
