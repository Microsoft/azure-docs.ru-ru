---
title: Прекращение использования уровней производительности в Azure Cosmos DB
description: Сведения об уровнях производительности S1, S2 и S3, ранее доступных в Azure Cosmos DB.
author: SnehaGunda
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 06/04/2018
ms.author: sngun
ms.custom: devx-track-csharp
ms.openlocfilehash: 4cb07d9d19d85cd8dff9a52eeeb7e173b60f4d6d
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "93080776"
---
# <a name="retiring-the-s1-s2-and-s3-performance-levels"></a>Прекращение использования уровней производительности S1, S2 и S3
[!INCLUDE[appliesto-all-apis](includes/appliesto-all-apis.md)]

> [!IMPORTANT] 
> Использование уровней производительности S1, S2 и S3, которые рассматриваются в этой статье, прекращается. Они больше не будут доступны для новых учетных записей Azure Cosmos DB.

В этой статье представлен обзор уровней производительности S1, S2 и S3, а также рассматривается процедура переноса коллекций, использующих эти уровни производительности, в односекционные коллекции. Ознакомившись с данной статьей, вы сможете ответить на следующие вопросы.

- [Почему прекращается использование уровней производительности S1, S2 и S3?](#why-retired)
- [Как сравнить односекционные коллекции и секционированные коллекции с уровнями производительности S1, S2 и S3?](#compare)
- [Что мне необходимо сделать, чтобы обеспечить непрерывный доступ к данным?](#uninterrupted-access)
- [Как изменится моя коллекция после переноса?](#collection-change)
- [Как изменятся мои счета после переноса на односекционные коллекции?](#billing-change)
- [Что делать, если требуется более 20 ГБ хранилища?](#more-storage-needed)
- [Могу ли я переключаться между уровнями производительности S1, S2 и S3 до запланированного переноса?](#change-before)
- [Могу ли я сам выполнить перенос с уровней производительности S1, S2 и S3 в односекционные коллекции?](#migrate-diy)
- [Как на мне отразится перенос, если я являюсь пользователем подписки EA?](#ea-customer)

<a name="why-retired"></a>

## <a name="why-are-the-s1-s2-and-s3-performance-levels-being-retired"></a>Почему прекращается использование уровней производительности S1, S2 и S3?

Уровни производительности S1, S2 и S3 не предлагают той гибкости, которую обеспечивает обычная служба Azure Cosmos DB. Пропускная способность и емкость хранилища для уровней производительности S1, S2 и S3 предварительно заданы, не изменяются и не поддерживают эластичность. Теперь в Azure Cosmos DB доступна настройка пропускной способности и емкости хранилища, что обеспечивает гораздо большую гибкость и возможность масштабирования по мере изменения потребностей.

<a name="compare"></a>

## <a name="how-do-single-partition-collections-and-partitioned-collections-compare-to-the-s1-s2-s3-performance-levels"></a>Как сравнить односекционные коллекции и секционированные коллекции с уровнями производительности S1, S2 и S3?

В приведенной ниже таблице сравниваются пропускная способность и емкость хранилища, доступные для односекционных и секционированных коллекций, а также для уровней производительности S1, S2, S3. В этом примере данные приводятся для региона "Восточная часть США 2":

| Имя квоты  |Секционированная коллекция|Односекционная коллекция|S1|S2|S3|
|---|---|---|---|---|---|
|Максимальная пропускная способность|Неограниченно|10 000 ЕЗ/с|250 ЕЗ/с|1000 ЕЗ/с|2500 ЕЗ/с|
|Минимальная пропускная способность|2500 ЕЗ/с|400 ЕЗ/с|250 ЕЗ/с|1000 ЕЗ/с|2500 ЕЗ/с|
|Максимальный объем хранилища|Неограниченно|20 ГБ|20 ГБ|20 ГБ|20 ГБ|
|Цена (ежемесячно)|Пропускная способность: 6 долл. США за 100 ЕЗ/с<br><br>Хранилище: 0,25 долл. США за 1 ГБ|Пропускная способность: 6 долл. США за 100 ЕЗ/с<br><br>Хранилище: 0,25 долл. США за 1 ГБ|25 долл. США|50 долл. США|100 долл. США|

Вы являетесь пользователем подписки EA? Если это так, то ознакомьтесь с разделом [Как на мне отразится перенос, если я являюсь пользователем подписки EA?](#ea-customer)

<a name="uninterrupted-access"></a>

## <a name="what-do-i-need-to-do-to-ensure-uninterrupted-access-to-my-data"></a>Что мне необходимо сделать, чтобы обеспечить непрерывный доступ к данным?

При наличии коллекцию S1, S2 и S3 необходимо программно перенести в односекционную коллекцию [с помощью пакета SDK для .NET](#migrate-diy). 

<a name="collection-change"></a>

## <a name="how-will-my-collection-change-after-the-migration"></a>Как изменится моя коллекция после переноса?

Если имеется коллекция уровня S1, то ее можно перенести в односекционную коллекцию с пропускной способностью 400 ЕЗ/с. 400 ЕЗ/с — это самая низкая пропускная способность, доступная в односекционных коллекциях. При этом стоимость односекционной коллекции с пропускной способностью 400 ЕЗ/с примерно равна стоимости коллекции уровня S1 с пропускной способностью 250 ЕЗ/с. Таким образом, вы не переплачиваете за дополнительные 150 ЕЗ/с.

Если имеется коллекция уровня S2, то ее можно перенести в односекционную коллекцию с пропускной способностью 1 000 ЕЗ/с. Вы не заметите никаких изменений в уровне пропускной способности.

Если имеется коллекция уровня S3, то ее можно перенести в односекционную коллекцию с пропускной способностью 2 500 ЕЗ/с. Вы не заметите никаких изменений в уровне пропускной способности.

В каждом из этих случаев после переноса коллекции можно настроить уровень пропускной способности или выполнить масштабирование для обеспечения низкой задержки при доступе пользователей. 

<a name="billing-change"></a>

## <a name="how-will-my-billing-change-after-i-migrated-to-the-single-partition-collections"></a>Как изменятся мои счета после переноса на односекционные коллекции?

Предположим, что у вас 10 коллекций уровня S1, каждая из которых имеет емкость хранилища 1 ГБ и находится в регионе "Восточная часть США". Вы переносите эти 10 коллекций S1 в 10 односекционных коллекций с пропускной способностью 400 ЕЗ/с (минимальный уровень). Если у вас будет 10 односекционных коллекций в течение полного месяца, то счет будет иметь следующий вид:

:::image type="content" source="./media/performance-levels/s1-vs-standard-pricing.png" alt-text="Сравнение цены на 10 коллекций уровня S1 с ценой на 10 односекционных коллекций" border="false":::

<a name="more-storage-needed"></a>

## <a name="what-if-i-need-more-than-20-gb-of-storage"></a>Что делать, если требуется более 20 ГБ хранилища?

Независимо от того, имеется ли коллекция с уровнем производительности S1, S2 или S3 или коллекция с одним набором разделов, в которой доступно 20 ГБ хранилища, можно использовать средство переноса данных Azure Cosmos DB для переноса данных в секционированную коллекцию с практически неограниченным хранилищем. Сведения о преимуществах секционированной коллекции см. в статье [Секционирование, ключи секции и масштабирование в Azure Cosmos DB](partitioning-overview.md). 

<a name="change-before"></a>

## <a name="can-i-change-between-the-s1-s2-and-s3-performance-levels-before-the-planned-migration"></a>Могу ли я переключаться между уровнями производительности S1, S2 и S3 до запланированного переноса?

Только существующие учетные записи с производительностью S1, S2 и S3 могут быть изменены программным способом на альтернативные уровни производительности [с использованием пакета SDK для .NET](#migrate-diy). В случае перехода с уровня производительности S1, S2 или S3 на односекционную коллекцию вы не сможете вернуться на уровень S1, S2 или S3.

<a name="migrate-diy"></a>

## <a name="how-do-i-migrate-from-the-s1-s2-s3-performance-levels-to-single-partition-collections-on-my-own"></a>Могу ли я сам выполнить перенос с уровней производительности S1, S2 и S3 в односекционные коллекции?

Перенос с уровней производительности S1, S2 и S3 в односекционные коллекции можно выполнить программным способом [с использованием пакета SDK для .NET](#migrate-diy). Вы можете сделать это самостоятельно до запланированной миграции, чтобы воспользоваться гибкими возможностями пропускной способности, доступными с односекционными коллекциями.

### <a name="migrate-to-single-partition-collections-by-using-the-net-sdk"></a>Перенос в односекционные коллекции с помощью пакета SDK для .NET

В этом разделе мы рассмотрим процесс изменения уровня производительности коллекции с помощью [API .NET для SQL](sql-api-sdk-dotnet.md). В случае с другими пакетами SDK процедура аналогична.

Ниже приведен фрагмент кода для изменения пропускной способности коллекции до 5000 единиц запроса в секунду.
    
```csharp
    //Fetch the resource to be updated
    Offer offer = client.CreateOfferQuery()
                      .Where(r => r.ResourceLink == collection.SelfLink)    
                      .AsEnumerable()
                      .SingleOrDefault();

    // Set the throughput to 5000 request units per second
    offer = new OfferV2(offer, 5000);

    //Now persist these changes to the database by replacing the original resource
    await client.ReplaceOfferAsync(offer);
```

Посетите [MSDN](/dotnet/api/microsoft.azure.documents.client.documentclient) , чтобы просмотреть дополнительные примеры и узнать больше о методах нашего предложения:

* [**ReadOfferAsync**](/dotnet/api/microsoft.azure.documents.client.documentclient.readofferasync)
* [**ReadOffersFeedAsync**](/dotnet/api/microsoft.azure.documents.client.documentclient.readoffersfeedasync)
* [**ReplaceOfferAsync**](/dotnet/api/microsoft.azure.documents.client.documentclient.replaceofferasync)
* [**CreateOfferQuery**](/previous-versions/azure/dn975114(v=azure.100))

<a name="ea-customer"></a>

## <a name="how-am-i-impacted-if-im-an-ea-customer"></a>Как на мне отразится перенос, если я являюсь пользователем подписки EA?

Для пользователей подписки EA цена не будет изменяться до истечения действующего контракта.

## <a name="next-steps"></a>Дальнейшие действия
Дополнительные сведения о ценах и управлении данными с помощью Azure Cosmos DB см. в следующих статьях.

1.  [Секционирование, ключи секции и масштабирование в Cosmos DB](partitioning-overview.md). Узнайте, чем отличаются односекционные и секционированные контейнеры. В статье также содержатся советы по реализации стратегии секционирования для удобства масштабирования.
2.  [Страница цен Azure Cosmos DB](https://azure.microsoft.com/pricing/details/cosmos-db/). Ознакомьтесь со сведениями о ценах на подготовку пропускной способности и использование хранилища.
3.  [Единицы запроса](request-units.md). Узнайте, как потребляется пропускная способность в зависимости от типа операции, например чтение, запись или запрос.