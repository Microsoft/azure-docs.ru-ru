---
title: Расшифровка счета за использование Azure Cosmos DB
description: В этой статье на примерах объясняется, как расшифровать счет за использование Azure Cosmos DB.
author: markjbrown
ms.author: mjbrown
ms.service: cosmos-db
ms.topic: conceptual
ms.date: 11/04/2020
ms.reviewer: sngun
ms.openlocfilehash: b0d27cb2f941db374a144cbd5c026444730e24e8
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "98247511"
---
# <a name="understand-your-azure-cosmos-db-bill"></a>Расшифровка счета за использование Azure Cosmos DB
[!INCLUDE[appliesto-all-apis](includes/appliesto-all-apis.md)]

В качестве полностью управляемой облачной службы базы данных Azure Cosmos DB упрощает выставление счетов за счет оплаты только для операций с базами данных и использования хранилища. При этом нет необходимости в дополнительных лицензионных платежах, затратах на оборудование, коммунальные услуги и недвижимость, которые характерны для альтернативных локальных или размещаемых в IaaS служб. Что касается работы Azure Cosmos DB в различных регионах, служба баз данных позволяет значительно сократить затраты по сравнению с существующими локальными или размещаемыми в IaaS решениями.

- **Операции с базой данных**. способ оплаты за операции с базой данных зависит от типа используемой учетной записи Azure Cosmos.

  - **Подготовленная пропускная способность**. счет выставляется по часам для максимальной подготовленной пропускной способности в течение заданного часа с шагом в 100 единиц запросов в секунду.
  - **Бессерверные**: счета выставляются по часам за общий объем единиц запросов, потребляемых операциями базы данных.

- **Хранилище**. Вы оплачиваете по фиксированной ставке общий объем хранилища (в ГБ), потребляемый данными и индексами за указанный час.

Последние сведения о ценах см. на [странице с ценами](https://azure.microsoft.com/pricing/details/cosmos-db/) .

В этой статье приведен ряд примеров, которые помогут понять сведения, отображаемые в ежемесячном счете. Цифры в примерах могут отличаться от фактических, если для контейнеров Azure Cosmos подготовлен другой объем пропускной способности, если они охватывают несколько регионов или работают в течение другого периода (более одного месяца). Все примеры в этой статье вычисляют счет на основе сведений о ценах, показанных на [странице цен](https://azure.microsoft.com/pricing/details/cosmos-db/).

> [!NOTE]
> Счета выставляются за любую часть физического времени, а не за 60 минут. Все примеры, приведенные в этом документе, основаны на ценах на учетную запись Azure Cosmos, развернутую в регионе, не являющемся государственным в США. Цены и вычисления зависят от региона, который вы используете, а также на [странице цен Azure Cosmos DB](https://azure.microsoft.com/pricing/details/cosmos-db/) для получения последних сведений о ценах.

## <a name="billing-examples"></a>Примеры выставления счетов

### <a name="billing-example---provisioned-throughput-on-a-container-full-month"></a>Пример выставления счетов — подготовленная пропускная способность в контейнере (полный месяц)

* Предположим, настраивается пропускная способность 1000 ЕЗ/с для контейнера, существующего в течение 24 часов * 30 дней в месяц = всего 720 часов.  

* 1000 ЕЗ/с — это 10 единиц 100 ЕЗ/с в час за каждый час существования контейнеров (то есть 1000/100 = 10). 

* Умножаем 10 единиц в час на стоимость 0,008 долл. США (за 100 ЕЗ/с в час) = 0,08 долл. США в час. 

* Умножаем 0,08 долл. США в час на количество часов в месяце = 0,08 долл. США * 24 часа * 30 дней = 57,60 долл. США за месяц.  

* В общем ежемесячном счете будут показаны 7200 единиц (по 100 единиц запроса), которые стоят 57,60 долл. США.

### <a name="billing-example---provisioned-throughput-on-a-container-partial-month"></a>Пример выставления счетов — подготовленная пропускная способность в контейнере (частичный месяц)

* Предположим, что мы создаем контейнер с подготовленной пропускной способностью 2500 ЕЗ/с. Контейнер существует в течение 24 часов за месяц (например, мы удаляем его через 24 часа после создания).  

* В таком случае мы увидим в счете 600 единиц (2500 ЕЗ/с / 100 ЕЗ/с/ед. * 24 часа). Стоимость будет равна 4,80 долл. США (600 единиц * 0,008 долл. США за единицу).

* Общий счет за месяц составит 4,80 долл. США.

### <a name="billing-example---serverless-container"></a>Пример выставления счетов — бессерверный контейнер

* Предположим, что мы создаем бессерверный контейнер. 

* В течение месяца мы выпустили запросы к базе данных, которые потребляют всего 500 000 единиц запросов. Стоимость будет составлять $0,125 (500 000 * $0,25/миллионы).

* Общий счет за месяц будет $0,125.

### <a name="billing-rate-if-storage-size-changes"></a>Периодичность выставления счетов при изменении размера хранилища

Счет за использование емкости хранения выставляется ежемесячно и определяется по максимальному почасовому объему хранимых данных (в ГБ). Например, если в первой половине месяца вы используете 100 ГБ ресурсов хранения, а во второй половине месяца — 50 ГБ, вам будет выставлен счет за использование в среднем 75 ГБ ресурсов хранения.

### <a name="billing-rate-when-container-or-a-set-of-containers-are-active-for-less-than-an-hour"></a>Периодичность выставления счетов при активности контейнера или набора контейнеров менее одного часа

Плата взимается по фиксированной ставке за каждый час существования контейнера или базы данных независимо от длительности использования контейнера или базы данных и времени их активности. Например, если вы создадите контейнер или базу данных и через 5 минут удалите его, вам будет выставлен счет за 1 час использования контейнера.

### <a name="billing-rate-when-provisioned-throughput-on-a-container-or-database-scales-updown"></a>Скорость выставления счетов при подготовленной пропускной способности в контейнере или базе данных

Если в 09:30 вы увеличите подготовленную пропускную способность с 400 ЕЗ/с до 1000 ЕЗ/с, а в 10:45 снова уменьшите ее до 400 ЕЗ/с, вам будет выставлен счет за два часа использования 1000 ЕЗ/с. 

Если в 09:30 вы увеличите подготовленную пропускную способность для контейнера или набора контейнеров со 100 тыс. ЕЗ/с до 200 тыс. ЕЗ/с, а в 10:45 снова уменьшите ее до 100 тыс. ЕЗ/с, вам будет выставлен счет за два часа использования 200 тыс. ЕЗ/с.

### <a name="billing-example-multiple-containers-each-with-dedicated-provisioned-throughput-mode"></a>Пример выставления счетов: несколько контейнеров, для каждого из которых установлен режим выделенной подготовленной пропускной способности

* Если вы создадите в регионе "Восточная часть США 2" учетную запись Azure Cosmos с двумя контейнерами с подготовленной пропускной способностью 500 ЕЗ/с и 700 ЕЗ/с соответственно, общая пропускная способность будет составлять 1200 ЕЗ/с.  

* Вам будет выставлен счет на 1200/100 * 0,008 долл. США = 0,096 долл. США в час. 

* Если потребности в пропускной способности изменились и вы увеличили производительность каждого контейнера на 500 ЕЗ/с, одновременно создав новый неограниченный контейнер с пропускной способностью 20 000 ЕЗ/с, общая подготовленная производительность составит 22 200 ЕЗ/с (1000 ЕЗ/с + 1200 ЕЗ/с + 20 000 ЕЗ/с).  

* В этом случае вы заплатите 0,008 долл. США x 222 = 1,776 долл. США в час. 

* Учитывая, что в месяце 720 ч (24 часа * 30 дней), если в течение 500 ч подготовленная пропускная способность составляла 1200 ЕЗ/с, а в течение оставшихся 220 ч — 22 200 ЕЗ/с, в счете за месяц будет указано следующее: 500 x 0,096 долл. США / час + 220 x 1,776 долл. США в час = 438,72 долл. США в месяц.

:::image type="content" source="./media/understand-your-bill/bill-example1.png" alt-text="Пример счета за выделенную пропускную способность":::

### <a name="billing-example-containers-with-shared-provisioned-throughput-mode"></a>Пример выставления счетов: контейнеры с общим (подготовленным) режимом пропускной способности

* Если создать учетную запись Azure Cosmos в регионе "Восточная часть США 2" с двумя базами данных Azure Cosmos (с набором контейнеров, совместно использующих пропускную способность на уровне базы данных) с подготовленной пропускной способностью 50 тыс. ЕЗ/с и 70 тыс. ЕЗ/с соответственно, общая подготовленная пропускная способность будет составлять 120 тыс. ЕЗ/с.  

* Вам будет выставлен счет на 1200 * 0,008 долл. США = 9,60 долл. США в час. 

* Если потребность в пропускной способности изменится и вы увеличите ее для каждой базы данных на 10 тыс. ЕЗ/с, а к первой базе данных с общей пропускной способностью добавите новый контейнер в режиме выделенной пропускной способности 15 тыс. ЕЗ/с, то общая подготовленная емкость составит 155 тыс. ЕЗ/с (60 тыс. ЕЗ/с + 80 тыс. ЕЗ/с + 15 тыс. ЕЗ/с).  

* В этом случае вы заплатите: 1550 * 0,008 долл. США = 12,40 долл. США в час.  

* Если в месяце 720 ч и в течение 300 ч подготовленная пропускная способность составляла 120 тыс. ЕЗ/с, а в течение оставшихся 420 ч — 155 тыс. ЕЗ/с, в счете за месяц будет указано следующее: 300 x 9,60 долл. США в час + 420 x 12,40 долл. США в час = 2880 долл. США + 5208 долл. США = 8088 долл. США в месяц. 

:::image type="content" source="./media/understand-your-bill/bill-example2.png" alt-text="Пример счета за общую пропускную способность":::

## <a name="billing-examples-with-geo-replication"></a>Примеры выставления счетов с георепликацией  

Вы в любое время можете добавлять регионы Azure, расположенные по всему миру, в свою учетную запись базы данных Azure Cosmos и удалять их из нее. Пропускная способность, которую вы настроили для различных баз данных и контейнеров Azure Cosmos, будет зарезервирована в каждом регионе Azure, сопоставленном с вашей учетной записью базы данных Azure Cosmos. Если сумма подготовленной пропускной способности (в секунду), настроенной во всех базах данных и контейнерах в учетной записи базы данных Cosmos Azure (подготавливается в час), составляет T, а число регионов Azure, связанных с учетной записью базы данных, равно N, то общая пропускная способность для данного часа будет равна T x N единиц запросов в секунду. Подготовленная пропускная способность (одиночная область записи) — затраты $0.008/час на 100 запросов в секунду и подготовленная пропускная способность с несколькими областями с возможностью записи (Конфигурация записей в нескольких регионах) — затраты в секунду на 100 запросов в секунду (см. [страницу цен](https://azure.microsoft.com/pricing/details/cosmos-db/)). Вы можете выбрать один или несколько регионов для записи. Независимо от этого служба Azure Cosmos DB позволяет выполнять чтение данных из любого региона.

### <a name="billing-example-multi-region-azure-cosmos-account-single-region-writes"></a>Пример выставления счета: учетная запись Azure Cosmos с несколькими регионами, операции записи в одном регионе

Предположим, что у вас есть контейнер Azure Cosmos в регионе "Западная часть США". Контейнер создан с пропускной способностью 10 тыс. ЕЗ/с, и в этом месяце хранится 1 ТБ данных. Предположим, вы добавили в учетную запись Azure Cosmos еще три региона ("Восточная часть США", "Северная Европа" и "Восточная Азия"), каждый из которых имеет одинаковое хранилище и пропускную способность. Ниже описан общий ежемесячный счет (из расчета на 30 дней в месяце). Счет будет выглядеть следующим образом: 

|**Item** |**Использование (в месяц)** |**Тариф** |**Ежемесячные расходы** |
|---------|---------|---------|-------|
|Счет за пропускную способность контейнера в западной части США      | 10 тыс. ЕЗ/с * 24 * 30    |0,008 долл. США за каждые 100 ЕЗ/с в час   |576 долл. США|
|Счет за пропускную способность в трех дополнительных регионах ("Восточная часть США", "Северная Европа" и "Восточная Азия")       | 3 * 10 тыс. ЕЗ/с * 24 * 30    |0,008 долл. США за каждые 100 ЕЗ/с в час  |1728 долл. США|
|Счет за хранение контейнера в западной части США      | 250 ГБ    |0,25 долл. США за ГБ  |62,50 долл. США|
|Счет за хранение в трех дополнительных регионах ("Восточная часть США", "Северная Европа" и "Восточная Азия")      | 3 * 250 ГБ    |0,25 долл. США за ГБ  |187,50 долл. США|
|**Всего**     |     |  |**2 554 долл. США**|

*Предположим также, что каждый месяц вы отправляете 100 ГБ данных из контейнера в западной части США для репликации в регионы "Восточная часть США", "Северная Европа" и "Восточная Азия". Исходящий трафик тарифицируется на основе ставки на передачу данных.*

### <a name="billing-example-multi-region-azure-cosmos-account-multi-region-writes"></a>Пример выставления счета: учетная запись Azure Cosmos с несколькими регионами, операции записи в нескольких регионах

Предположим, что вы создаете контейнер Azure Cosmos в регионе "Западная часть США". Контейнер создан с пропускной способностью 10 тыс. ЕЗ/с, и в этом месяце хранится 1 ТБ данных. Предположим, вы добавляете три региона ("Восточная часть США", "Северная Европа" и "Восточная Азия"), в каждом из которых вы будете использовать хранилища одинакового объема и одинаковую пропускную способность. Вам необходима возможность записывать данные в контейнеры во всех регионах, связанных с вашей учетной записью Azure Cosmos. Общий ежемесячный счет (из расчета на 30 дней в месяце) будет следующим:

|**Item** |**Использование (в месяц)**|**Тариф** |**Ежемесячные расходы** |
|---------|---------|---------|-------|
|Счет за пропускную способность контейнера в регионе "Западная часть США" (запись во всех регионах)       | 10 тыс. ЕЗ/с * 24 * 30    |0,016 долл. США за каждые 100 ЕЗ/с в час    |1152 долл. США |
|Счет за пропускную способность в трех дополнительных регионах — "Восточная часть США", "Северная Европа" и "Восточная Азия" (запись во всех регионах)        | 3 * 10 тыс. ЕЗ/с * 24 * 30    |0,016 долл. США за каждые 100 ЕЗ/с в час   |$3 456 |
|Счет за хранение контейнера в западной части США      | 250 ГБ    |0,25 долл. США за ГБ  |62,50 долл. США|
|Счет за хранение в трех дополнительных регионах ("Восточная часть США", "Северная Европа" и "Восточная Азия")      | 3 * 250 ГБ    |0,25 долл. США за ГБ  |187,50 долл. США|
|**Всего**     |     |  |**6010 долл. США**|

*Предположим также, что каждый месяц вы отправляете 100 ГБ данных из контейнера в западной части США для репликации в регионы "Восточная часть США", "Северная Европа" и "Восточная Азия". Исходящий трафик тарифицируется на основе ставки на передачу данных.*

### <a name="billing-example-azure-cosmos-account-with-multi-region-writes-database-level-throughput-including-dedicated-throughput-mode-for-some-containers"></a>Пример выставления счетов: учетная запись Azure Cosmos с несколькими регионами записи, пропускная способность уровня базы данных, включая выделенный режим пропускной способности для некоторых контейнеров

Рассмотрим следующий пример, где у нас есть учетная запись Azure Cosmos с несколькими регионами, где все регионы доступны для записи (Конфигурация нескольких регионов записи). Для простоты будем считать, что размер хранилища остается неизменным и не будем учитывать его здесь, чтобы не усложнять пример. Подготовленная пропускная способность в течение месяца варьируется следующим образом (из расчета на 30 дней или 720 часов в месяце): 

[0–100 часов]:  

* создана учетная запись Azure Cosmos с тремя регионами ("Западная часть США", "Восточная часть США", "Северная Европа"), где все регионы доступны для записи; 

* создана база данных (D1) с общей пропускной способностью 10 тыс. ЕЗ/с; 

* создана база данных (D2) с общей пропускной способностью 30 тыс. ЕЗ/с;  

* создан контейнер (C1) с выделенной пропускной способностью 20 тыс. ЕЗ/с. 

[101–200 часов]:  

* масштаб базы данных (D1) увеличен до 50 тыс. ЕЗ/с; 

* масштаб базы данных (D2) увеличен до70 тыс. ЕЗ/с;  

* контейнер (C1) удален.  

[201–300 часов]:  

* снова создан контейнер (C1) с выделенной пропускной способностью 20 тыс. ЕЗ/с; 

[301–400 часов]:  

* удален один из регионов из учетной записи Azure Cosmos (количество регионов, доступных для записи, теперь равно 2); 

* масштаб базы данных (D1) уменьшен до 10 тыс. ЕЗ/с; 

* масштаб базы данных (D2) увеличен до 80 тыс. ЕЗ/с;  

* снова удален контейнер (C1). 

[401–500 часов]:  

* масштаб базы данных (D2) уменьшен до 10 тыс. ЕЗ/с;  

* снова создан контейнер (C1) с выделенной пропускной способностью 20 тыс. ЕЗ/с; 

[501–700 часов]:  

* масштаб базы данных (D1) увеличен до 20 тыс. ЕЗ/с;  

* масштаб базы данных (D2) увеличен до 100 тыс. ЕЗ/с;  

* снова удален контейнер (C1).  

[701–720 часов]:  

* масштаб базы данных (D2) уменьшен до 50 тыс. ЕЗ/с.  

Изменения в общей подготовленной пропускной способности в течение 720 часов месяца визуально представлены на рисунке ниже: 

:::image type="content" source="./media/understand-your-bill/bill-example3.png" alt-text="Пример из реальной жизни":::

Общий счет за месяц (из расчета на 30 дней или 720 часов в месяце) будет рассчитан следующим образом:

|**Часы**  |**ЕЗ/с** |**Item** |**Использование (ежечасно)** |**Стоимость** |
|---------|---------|---------|-------|-------|
|[0–100] |D1: 10 тыс. <br/>D2: 30 тыс. <br/>C1: 20 тыс. |Счет за пропускную способность контейнера в регионе "Западная часть США" (запись во всех регионах)  | `D1: 10K RU/sec/100 * $0.016 * 100 hours = $160` <br/>`D2: 30 K RU/sec/100 * $0.016 * 100 hours = $480` <br/>`C1: 20 K RU/sec/100 *$0.016 * 100 hours = $320` |960 долл. США  |
| | |Счет за пропускную способность для 2 дополнительных регионов: "Восточная часть США", "Северная Европа" (все регионы доступны для записи)  |`(2 + 1) * (60 K RU/sec /100 * $0.016) * 100 hours = $2,880`  |2880 долл. США  |
|[101–200] |D1: 50 тыс. <br/>D2: 70 тыс. <br/>C1: -- |Счет за пропускную способность контейнера в регионе "Западная часть США" (запись во всех регионах)  |`D1: 50 K RU/sec/100 * $0.016 * 100 hours = $800` <br/>`D2: 70 K RU/sec/100 * $0.016 * 100 hours = $1,120` |1920 долл. США  |
| | |Счет за пропускную способность для 2 дополнительных регионов: "Восточная часть США", "Северная Европа" (все регионы доступны для записи)  |`(2 + 1) * (120 K RU/sec /100 * $0.016) * 100 hours = $5,760`  |5760 долл. США  |
|[201–300]  |D1: 50 тыс. <br/>D2: 70 тыс. <br/>C1: 20 тыс. |Счет за пропускную способность контейнера в регионе "Западная часть США" (запись во всех регионах)  |`D1: 50 K RU/sec/100 * $0.016 * 100 hours = $800` <br/>`D2: 70 K RU/sec/100 * $0.016 * 100 hours = $1,120` <br/>`C1: 20 K RU/sec/100 *$0.016 * 100 hours = $320` |2240 долл. США  |
| | |Счет за пропускную способность для 2 дополнительных регионов: "Восточная часть США", "Северная Европа" (все регионы доступны для записи)  |`(2 + 1) * (140 K RU/sec /100 * $0.016-) * 100 hours = $6,720` |6720 долл. США |
|[301–400] |D1: 10 тыс. <br/>D2: 80 тыс. <br/>C1: -- |Счет за пропускную способность контейнера в регионе "Западная часть США" (запись во всех регионах)  |`D1: 10K RU/sec/100 * $0.016 * 100 hours = $160` <br/>`D2: 80 K RU/sec/100 * $0.016 * 100 hours = $1,280`  |1440 долл. США   |
| | |Счет за пропускную способность для 2 дополнительных регионов: "Восточная часть США", "Северная Европа" (все регионы доступны для записи)  |`(1 + 1) * (90 K RU/sec /100 * $0.016) * 100 hours = $2,880`  |2880 долл. США  |
|[401–500] |D1: 10 тыс. <br>D2: 10 тыс. <br>C1: 20 тыс. |Счет за пропускную способность контейнера в регионе "Западная часть США" (запись во всех регионах)  |`D1: 10K RU/sec/100 * $0.016 * 100 hours = $160` <br>`D2: 10K RU/sec/100 * $0.016 * 100 hours = $160` <br>`C1: 20 K RU/sec/100 *$0.016 * 100 hours = $320` |640 долл. США  |
| | |Счет за пропускную способность для 2 дополнительных регионов: "Восточная часть США", "Северная Европа" (все регионы доступны для записи)  |`(1 + 1) * (40 K RU/sec /100 * $0.016) * 100 hours = $1,280`  |1280 долл. США  |
|[501–700] |D1: 20 тыс. <br>D2: 100 тыс. <br>C1: -- |Счет за пропускную способность контейнера в регионе "Западная часть США" (запись во всех регионах)  |`D1: 20 K RU/sec/100 * $0.016 * 200 hours = $640` <br>`D2: 100 K RU/sec/100 * $0.016 * 200 hours = $3,200` |3840 долл. США  |
| | |Счет за пропускную способность для 2 дополнительных регионов: "Восточная часть США", "Северная Европа" (все регионы доступны для записи)  |`(1 + 1) * (120 K RU/sec /100 * $0.016) * 200 hours = $1,280`  |7680 долл. США  |
|[701–720] |D1: 20 тыс. <br/>D2: 50 тыс. <br/>C1: -- |Счет за пропускную способность контейнера в регионе "Западная часть США" (запись во всех регионах)  |`D1: 20 K RU/sec/100 *$0.016 * 20 hours = $64` <br/>`D2: 50 K RU/sec/100 *$0.016 * 20 hours = $160` |224 долл. США  |
| | |Счет за пропускную способность для 2 дополнительных регионов: "Восточная часть США", "Северная Европа" (все регионы доступны для записи)  |`(1 + 1) * (70 K RU/sec /100 * $0.016) * 20 hours = $448`  |224 долл. США  |
|| |**Общая ежемесячная стоимость**  | |**38 688 долл. США**   |

## <a name="billing-examples-with-azure-cosmos-db-free-tier-accounts"></a><a id="azure-free-tier"></a>Примеры выставления счетов с учетными записями бесплатных уровней Azure Cosmos DB

С уровнем "Бесплатный" Azure Cosmos DB для учетной записи бесплатно предоставляются первые 400 единиц запросов в секунду и 5 ГБ хранилища, которые будут использоваться на уровне учетной записи. Любые затраты на ЕЗ/с и хранилища сверх лимита 400 ЕЗ/с и 5 ГБ будут включаться в счет по обычным ценам в соответствии со сведениями на странице с ценами. Вы не увидите в счете сумм или строк, относящихся к первым 400 ЕЗ/с и 5 ГБ, — в счет включается только плата за превышение бесплатного лимита в рамках этого уровня. 400 единиц запросов в секунду применяется к любым типам подготовленных к пропускной способности, автомасштабированию и записи в нескольких регионах.  

> [!NOTE]
> Уровень "бесплатный" Azure Cosmos DB отличается от бесплатной учетной записи Azure. Бесплатная учетная запись Azure предоставляет кредиты и ресурсы Azure бесплатно в течение ограниченного времени. При использовании Azure Cosmos DB в качестве части этой бесплатной учетной записи вы получаете 25 ГБ хранилища и 400 единиц запросов в секунду для подготовленной пропускной способности в течение 12 месяцев.

### <a name="billing-example---container-or-database-with-provisioned-throughput"></a>Пример выставления счета — контейнер или база данных с подготовленной пропускной способностью
- Предположим, мы создаем базу данных или контейнер в учетной записи уровня "Бесплатный" с 400 Ез/с и 5 ГБ хранилища.
- В вашем счете не будет указана плата за этот ресурс. Почасовая и ежемесячная стоимость составит 0 долл. США.
- Теперь предположим, что в той же учетной записи мы добавили другую базу данных или контейнер с 1000 Ез/с и 10 ГБ хранилища.
- Теперь в вашем счете будет указана плата за 1000 Ез/с и 10 ГБ хранилища. 

### <a name="billing-example---container-with-autoscale-throughput"></a>Пример выставления счета — контейнер с автомасштабированием пропускной способности
- Предположим, что в учетной записи уровня "Бесплатный" мы создаем контейнер с включенным автомасштабированием с максимальным числом единиц запросов — 4000 Ез/с. Этот ресурс будет автоматически масштабироваться в диапазоне от 400 Ез/с до 4000 Ез/с. 
- Предположим, что с первого по десятый час ресурс равен минимальному числу 400 Ез/с. В течение 11 часа ресурс масштабируется до 1000 Ез/с, а затем в течение часа снижается до 400 Ез/с.
- За часы с 1 по 10 вам будет выставлен счет в размере 0 долл. США за пропускную способность, так как 400 Ез/с были покрыты уровнем "Бесплатный". 
- За 11 час вам будет выставлен счет за 1000 Ез/с - 400 Ез/с = 600 Ез/с, так как это самый высокий показатель Ез/с в час. Это будет 6 единиц по 100 Ез/с в час. Таким образом общая пропускная способность за час составит 6 единиц * 0,012 долл. США = 0,072 долл. США. 
- Плата за любое хранилище, превышающее изначально предоставленные 5 ГБ, будет взиматься по обычным ставкам хранилища. 

### <a name="billing-example---multi-region-single-write-region-account"></a>Пример выставления счета —учетная запись с несколькими регионами и операциями записи в одном регионе
- Предположим, в учетной записи уровня "Бесплатный" мы создаем базу данных или контейнер с 1200 Ез/с и 10 ГБ хранилища. Мы реплицируем учетную запись в 3 региона, и у нас есть одна учетная запись для записи в регион.
- В целом без уровня "Бесплатный" нам выставят счет за 3 * 1200 Ез/с = 3600 Ез/с и 3 * 10 ГБ = 30 ГБ хранилища.
- Со скидкой на основе уровня "Бесплатный" и после удаления 400 Ез/с и 5 ГБ хранилища нам будет выставлен счет за эффективную пропускную способность 3200 Ез/с (32 единицы) в пределах одного региона записи и 25 ГБ хранилища.
- Ежемесячная стоимость Ез/с будет составлять: 32 единицы * 0,008 долл. США * 24 часа * 31 день = 190,46 долл. США. Ежемесячная стоимость хранилища будет составлять: 25 ГБ * 0,25 / ГБ = 6,25 долл. США. Общая стоимость будет составлять: 190,46 долл. США + 6,25 долл. США = 196,71 долл. США.
- Примечание. Если цена за единицу для Ез/с или хранилища отличается в регионах, 400 Ез/с и 5 ГБ уровня "Бесплатный" будут отражать тарифы региона, в котором была создана учетная запись.

### <a name="billing-example---multi-region-account-with-multiple-write-regions"></a>Пример выставления счетов — несколько регионов, учетная запись с несколькими регионами записи

Этот пример отражает [цены на операции записи в несколько регионов](https://azure.microsoft.com/pricing/details/cosmos-db/) для учетных записей, созданных после 1 декабря 2019 г. 
- Предположим, в учетной записи уровня "Бесплатный" мы создаем базу данных или контейнер с 1200 Ез/с и 10 ГБ хранилища. Мы реплицируем учетную запись в 3 региона, и у нас есть учетная запись с несколькими регионами записи. 
- В целом без уровня "Бесплатный" нам выставят счет за 3 * 1200 Ез/с = 3600 Ез/с и 3 * 10 ГБ = 30 ГБ хранилища.
- Со скидкой на основе уровня "Бесплатный" и после удаления 400 Ез/с и 5 ГБ хранилища нам будет выставлен счет за эффективную пропускную способность 3200 Ез/с (32 единицы) в пределах нескольких регионов записи и 25 ГБ хранилища.
- Ежемесячная стоимость Ез/с будет составлять: 32 единицы * 0,016 долл. США * 24 часа * 31 день =380,93 долл. США. Ежемесячная стоимость хранилища будет составлять: 25 ГБ * 0,25 / ГБ = 6,25 долл. США. Общая стоимость будет составлять: 380,93 долл. США + 6,25 долл. США = 387,18 долл. США.

## <a name="proactively-estimating-your-monthly-bill"></a>Упреждающая оценка счета за месяц  

Давайте рассмотрим другой пример. Предположим, вам нужно заранее оценить сумму счета до окончания месяца. Оценить счет можно следующим образом:

**Стоимость хранилища**

* Средний размер записи (КБ) = 1 
* Число записей = 100 000 000 
* Общий объем хранилища (ГБ) = 100 
* Месячная стоимость за ГБ = $0,25 
* Ожидаемые месячные затраты на хранилище = $25,00 

**Стоимость пропускной способности**

|Operation type (Тип операции)| Число запросов в секунду| Среднее ЕЗ/запрос| Необходимо ЕЗ|
|----|----|----|----|
|запись| 100 | 5 | 500|
|Чтение| 400| 1| 400|

Всего ЕЗ/с: 500 + 400 = 900 Почасовая стоимость: 900/100 * 0,008 долл. США = 0,072 долл. США Ожидаемые ежемесячные затраты на пропускную способность (из расчета на 31 день в месяце): 0,072 долл. США * 24 * 31 = 53,57 долл. США

**Общая ежемесячная стоимость**

Общая ежемесячная стоимость = ежемесячные затраты на хранение + ежемесячные затраты на пропускную способность Общая ежемесячная стоимость = 25,00 долл. США + 53,57 долл. США = 78,57 долл. США

*Фактическая цена зависит от региона. Актуальные сведения см. на [странице с ценами](https://azure.microsoft.com/pricing/details/cosmos-db/).*

## <a name="billing-with-azure-cosmos-db-reserved-capacity"></a>Выставление счетов при использовании резервной мощности Azure Cosmos DB

Резервная мощность Azure Cosmos DB позволяет заранее приобрести подготовленную пропускную способность (т. н. резервную мощность или резервирование), которая может применяться ко всем базам данных Azure Cosmos и контейнерам (для любого API или любой модели данных) во всех регионах Azure. Так как цена на подготовленную пропускную способность зависит от региона, будет целесообразно приобрести зарезервированную емкость в качестве денежного кредита со скидкой. Этот кредит можно использовать для пропускной способности, подготовленной по соответствующей цене для каждого региона. Например, предположим, что у вас есть учетная запись Cosmos Azure с одним контейнером и подготовленной пропускной способностью 50 тыс. ЕЗ/с, а также глобально реплицируются два региона — "восточная часть США" и "Восточная Япония". Если выбран вариант оплаты по мере использования:  

* в регионе "Восточная часть США" плата будет взиматься за 50 тыс. ЕЗ/с по тарифу 0,008 долл. США за каждые 100 ЕЗ/с в этом регионе; 

* в регионе "Восточная Япония" плата будет взиматься за 50 тыс. ЕЗ/с по тарифу 0,009 долл. США за каждые 100 ЕЗ/с в этом регионе.

Общий счет (без резервной мощности) будет следующим (из расчета на 30 дней или 720 часов в месяце): 

|**Регион**| **Почасовая цена за каждые 100 ЕЗ/с**|**Единицы (ЕЗ/с)**|**Сумма начисления (ежечасно)**| **Сумма начисления (ежемесячно)**|
|----|----|----|----|----|
|Восточная часть США|0,008 долл. США |50 тыс.|4 долл. США|2880 долл. США |
|Восточная Япония|0,009 долл. США |50 тыс.| 4,50 долл. США |3240 долл. США |
|Итог|||8,50 долл. США|6120 долл. США |

Предположим, что вместо этого вы приобрели резервную мощность. Резервную мощность можно купить в объеме 100 тыс. ЕЗ/с по цене 56 064 долл. США на один год (со скидкой 20 %), или по 6,40 долл. США в час. Цены на резервную мощность см. на [странице с ценами](https://azure.microsoft.com/pricing/details/cosmos-db/).  

* Стоимость пропускной способности (с оплатой по мере использования): 100 000 ЕЗ/с/100 * 0,008 долл. США/час * 8760 часов в год = 70 080 долл. США 

* Стоимость пропускной способности (с резервной мощностью) 70 080 долл. США со скидкой в 20 % = 56 064 долл. США 

Фактически вы приобрели кредит в размере 8 долл. США в час за 100 тыс. ЕЗ/с с использованием цены по прейскуранту в регионе "Восточная часть США" по цене 6,40 долл. США в час. Затем вы можете использовать это предоплаченное резервирование пропускной способности на почасовой основе, чтобы получить подготовленную пропускную способность в любом глобальном регионе Azure по соответствующим региональным тарифам, установленным для вашей подписки. В этом примере в каждом регионе ("восточная часть США" и "Восточная Япония") подготавливается по 50 тыс. ЕЗ/с. Вы сможете получить подготовленную пропускную способность на сумму 8,00 долл. США в час, и вам будет выставлен счет за избыток по 0,50 долл. США в час (или 360 долл. США в месяц). 

|**Регион**| **Почасовая цена за каждые 100 ЕЗ/с**|**Единицы (ЕЗ/с)**| **Сумма начисления (ежечасно)**| **Сумма начисления (ежемесячно)**|
|----|----|----|----|----|
|Восточная часть США|0,008 долл. США |50 тыс.|4 долл. США|2880 долл. США |
|Восточная Япония|0,009 долл. США |50 тыс.| 4,50 долл. США |3240 долл. США |
|||Оплата по мере использования|8,50 долл. США|6120 долл. США|
|Приобретенная резервная мощность|0,0064 долл. США (скидка 20 %) |100 ЕЗ/с или 8 долл. США предварительно приобретенной мощности |-8 долл. США|-5760 долл. США |
|Чистый счет|||0,50 долл. США |360 долл. США |

## <a name="next-steps"></a>Next Steps

Теперь вы можете перейти к сведениям об оптимизации затрат в Azure Cosmos DB, которые представлены в следующих статьях.

* Дополнительные сведения о том, [как модель ценообразования Cosmos DB помогает клиентам экономить](total-cost-ownership.md).
* Дополнительные сведения об [оптимизации для разработки и тестирования](optimize-dev-test.md)
* Дополнительные сведения об [оптимизации расходов на пропускную способность](optimize-cost-throughput.md)
* Дополнительные сведения об [оптимизации расходов на хранилище](optimize-cost-storage.md)
* Дополнительные сведения об [оптимизации расходов на операции чтения и записи](optimize-cost-reads-writes.md)
* Дополнительные сведения об [оптимизации затрат на запросы](./optimize-cost-reads-writes.md).
* Дополнительные сведения об [оптимизации расходов на учетные записи Cosmos Azure с поддержкой нескольких регионов](optimize-cost-regions.md)
