---
title: Условия соответствия для обработчиков правил Azure Front Door
description: В этой статье представлен список различных условий соответствия, доступных в обработчике правил службы Azure Front Door.
services: frontdoor
documentationcenter: ''
author: duongau
editor: ''
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 03/01/2020
ms.author: duau
ms.openlocfilehash: a352624fc802e4224aa1b60768c064c0054cdfd6
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102035880"
---
# <a name="azure-front-door-rules-engine-match-conditions"></a>Условия соответствия для обработчика правил Azure Front Door

В [обработчике правил AFD](front-door-rules-engine.md) правило может быть пустым или содержать несколько условий соответствия и действие. В этой статье содержатся подробные описания условий соответствия, которые можно использовать в обработчике правил AFD.

Первая часть правила — это одно или несколько условий соответствия. Правило может содержать до 10 условий соответствия. Условие соответствия определяет конкретные типы запросов, для которых выполняются определенные действия. При использовании нескольких условий соответствия они группируются с помощью логического компонента AND. Для всех условий соответствия, которые поддерживают несколько значений (с разделителями-пробелами), предполагается оператор OR.

Например, с помощью условия соответствия вы сможете:

- Отфильтровать запросы на основе определенного IP-адреса, страны или региона.
- Отфильтровать запросы по информации из заголовка.
- Отфильтровать запросы с мобильных или классических устройств.

Следующие условия соответствия доступны для использования в обработчике правил Azure Front Door.  

## <a name="device-type"></a>Тип устройства 

Определяет запросы, выполненные с мобильного или с классического устройства.  

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|----------------
Equals, Not equals | Классические и мобильные устройства

## <a name="post-argument"></a>Аргумент POST

Определяет запросы на основе аргументов, определенных для метода запроса POST, который используется в запросе. 

#### <a name="required-fields"></a>Обязательные поля

Имя аргумента | Оператор | Значение аргумента | Преобразование регистра
--------------|----------|----------------|---------------
Строка | [Список стандартных операторов](#standard-operator-list) | String, Int | Строчные, прописные буквы, обрезка данных, удаление пробелов, кодирование URL-адреса, декодирование URL-адреса

## <a name="query-string"></a>Строка запроса

Определяет запросы, содержащие указанный параметр строки запроса. Для этого параметра задается значение, соответствующее указанному шаблону. Параметры строки запроса (например, **параметр=значение**) в URL-адресе запроса определяют, выполнено ли это условие. Это условие соответствия определяет параметр строки запроса по имени и принимает одно или несколько значений для значения параметра.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Строка запроса | Преобразование регистра
---------|--------------|---------------
[Список стандартных операторов](#standard-operator-list) | String, Int | Строчные, прописные буквы, обрезка данных, удаление пробелов, кодирование URL-адреса, декодирование URL-адреса

## <a name="remote-address"></a>Удаленный адрес

Определяет запросы на основе расположения или IP-адреса инициатора запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|-----------------
Географическое сопоставление | Код страны
Сопоставление IP-адресов | IP-адрес (с разделителями-пробелами)
Географическое соответствие отсутствует | Код страны
Соответствие IP-адреса отсутствует | IP-адрес (с разделителями-пробелами)

#### <a name="key-information"></a>Основные сведения

- Используйте нотацию CIDR.
- Чтобы указать несколько IP-адресов и блоков IP-адресов, используйте один пробел между значениями:
  - **Пример IPv4**. *1.2.3.4 10.20.30.40* соответствует любым запросам, поступающим из адреса 1.2.3.4 или 10.20.30.40.
  - **Пример IPv6**. *1:2:3:4:5:6:7:8 10:20:30:40:50:60:70:80* соответствует любым запросам, поступающим из адреса 1:2:3:4:5:6:7:8 или 10:20:30:40:50:60:70:80.
- Синтаксис блока IP-адресов — базовый IP-адрес, за которым следуют косая черта и размер префикса. Пример:
  - **Пример IPv4**. *5.5.5.64/26* соответствует любым запросам, поступающим из диапазона адресов 5.5.5.64–5.5.5.127.
  - **Пример IPv6**. *1:2:3:/48* соответствует любым запросам, поступающим из диапазона адресов 1:2:3:0:0:0:0:0–1:2:3:ffff:ffff:ffff:ffff:ffff.

## <a name="request-body"></a>Тело запроса

Определяет запросы на основе конкретного текста, отображаемого в тексте запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Тело запроса | Преобразование регистра
---------|--------------|---------------
[Список стандартных операторов](#standard-operator-list) | String, Int | Строчные, прописные буквы, обрезка данных, удаление пробелов, кодирование URL-адреса, декодирование URL-адреса

## <a name="request-header"></a>Заголовок запроса

Определяет запросы, которые используют конкретный заголовок в запросе.

#### <a name="required-fields"></a>Обязательные поля

Имя заголовка | Оператор | Значение заголовка | Преобразование регистра
------------|----------|--------------|---------------
Строка | [Список стандартных операторов](#standard-operator-list) | String, Int | Строчные, прописные буквы, обрезка данных, удаление пробелов, кодирование URL-адреса, декодирование URL-адреса

## <a name="request-method"></a>Метод запроса

Определяет запросы, использующие указанный метод запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|----------------
Equals, Not equals | GET, POST, PUT, DELETE, HEAD, OPTIONS, TRACE

#### <a name="key-information"></a>Основные сведения

- Только метод запроса GET может создавать кэшированное содержимое в Azure Front Door. Все остальные методы запроса передаются через сеть. 

## <a name="request-protocol"></a>Протокол запроса

Определяет запросы, использующие указанный протокол.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|----------------
Equals, Not equals | HTTP, HTTPS

## <a name="request-url"></a>Request URL (URL-адрес запроса)

Определяет запросы, соответствующие указанному URL-адресу.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Request URL (URL-адрес запроса) | Преобразование регистра
---------|-------------|---------------
[Список стандартных операторов](#standard-operator-list) | String, Int | Строчные, прописные буквы, обрезка данных, удаление пробелов, кодирование URL-адреса, декодирование URL-адреса

#### <a name="key-information"></a>Основные сведения

- При использовании этого условия правила не забудьте включить сведения о протоколе. Например, `https://www.<yourdomain\>.com`.

## <a name="request-file-extension"></a>Расширение файла запроса

Определяет запросы, включающие указанное расширение в имени файла в запросе URL-адреса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Расширение | Преобразование регистра
---------|-----------|---------------
[Список стандартных операторов](#standard-operator-list) | String, Int | Строчные, прописные буквы, обрезка данных, удаление пробелов, кодирование URL-адреса, декодирование URL-адреса

#### <a name="key-information"></a>Основные сведения

- Не используйте точку в начале расширений. Например, используйте *HTML* вместо *.HTML*.

## <a name="request-file-name"></a>Имя файла запроса

Определяет запросы, содержащие указанное имя файла в URL-адресе запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Имя файла | Преобразование регистра
---------|-----------|---------------
[Список стандартных операторов](#standard-operator-list) | String, Int | Строчные, прописные буквы, обрезка данных, удаление пробелов, кодирование URL-адреса, декодирование URL-адреса

#### <a name="key-information"></a>Основные сведения

- Чтобы указать несколько имен файлов, разделите каждое имя файла, нажав клавишу ВВОД. 

## <a name="request-path"></a>Путь запроса

Определяет запросы, которые включают указанный путь в URL-адресе запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Значение | Преобразование регистра
---------|-------|---------------
[Список стандартных операторов](#standard-operator-list) | String, Int | Строчные, прописные буквы, обрезка данных, удаление пробелов, кодирование URL-адреса, декодирование URL-адреса

#### <a name="key-information"></a>Основные сведения

- Используя условие этого правила помните, что поиск соответствий начинается после первого символа `/` в пути. Пример: в `https://www.<yourdomain>.com/folder/page` поиск соответствий будет выполняться для `folder/page`.

## <a name="standard-operator-list"></a>Список стандартных операторов

Для правил, которые принимают значения из списка стандартных операторов, допустимы следующие операторы:

- Любой
- Равно 
- Содержит 
- Начинается с 
- Заканчивается на 
- Меньше чем
- Меньше или равно
- Больше
- Больше или равно
- Не любое
- Не содержит
- Не начинается с 
- Не заканчивается на 
- Не меньше
- Не меньше или равно
- Не больше чем
- Не больше или равно

Для числовых операторов, таких как *меньше чем* и *больше или равно*, используется сравнение, основанное на длине. Значение в условии соответствия должно быть целым числом, равным длине, с которой требуется проводить сравнение. 


## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как настроить свой первый [обработчик правил](front-door-tutorial-rules-engine.md). 
- Дополнительные сведения о [действиях обработчика правил](front-door-rules-engine-actions.md)
- Дополнительные сведения об [обработчике правил Azure Front Door](front-door-rules-engine.md).
