---
title: Подключение корневого или вершине домена к существующей передней дверце — портал Azure
description: Узнайте, как подключить корневой или вершине-домен к существующей передней дверце с помощью портал Azure.
services: front-door
author: duongau
ms.service: frontdoor
ms.topic: how-to
ms.date: 11/13/2020
ms.author: duau
ms.openlocfilehash: 55eefe7a7490df050aa7ebc2bb41fbadcc8d8279
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "94646344"
---
# <a name="onboard-a-root-or-apex-domain-on-your-front-door"></a>Подключение корневого или вершинного домена в службе Front Door
Передняя дверца Azure использует записи CNAME для проверки владения доменом для адаптации личных доменов. Передняя дверца не предоставляет интерфейсный IP-адрес, связанный с профилем передней дверцы. Поэтому вы не можете сопоставлять домен вершине с IP-адресом, если ваша цель — подключить ее к передней дверце Azure.

Протокол DNS предотвращает назначение записей CNAME на вершине зоны. Например, если ваш домен имеет значение, `contoso.com` можно создать записи CNAME для `somelabel.contoso.com` , но нельзя создать CNAME для `contoso.com` себя. Это ограничение представляет собой проблему для владельцев приложений, имеющих приложения с балансировкой нагрузки на основе передней дверцы Azure. Поскольку для использования профиля передней дверцы требуется создать запись CNAME, невозможно указать профиль передней дверцы из зоны вершине.

Эту проблему можно устранить с помощью записей псевдонимов в Azure DNS. В отличие от записей CNAME, записи псевдонимов создаются в зоне вершине. Владельцы приложений могут использовать его для указания записи вершине зоны в профиль передней дверцы с общедоступными конечными точками. Владельцы приложений указывают на тот же профиль передней дверцы, который используется для любого другого домена в своей зоне DNS. Например, `contoso.com` и `www.contoso.com` может указывать на один и тот же профиль передней дверцы. 

Для сопоставления вашего вершине или корневого домена с профилем передней дверцы, по сути, требуется сведение CNAME или отслеживание DNS. Механизм, в котором поставщик DNS рекурсивно разрешает запись CNAME, пока не достигнет IP-адреса. Эта функция поддерживается Azure DNS для конечных точек передней дверцы. 

> [!NOTE]
> Кроме того, существуют другие поставщики DNS, поддерживающие сведение CNAME или отслеживание DNS, однако в передней дверце Azure рекомендуется использовать Azure DNS для своих клиентов для размещения своих доменов.

Вы можете использовать портал Azure для подключения домена вершине на передней дверце и включения протокола HTTPS, связав его с сертификатом для завершения TLS. Домены вершине также называются корневыми или доменными доменами с атрибутом naked.

## <a name="create-an-alias-record-for-zone-apex"></a>Создание записи псевдонима для зоны вершине

1. Откройте конфигурацию **Azure DNS** для домена, который необходимо подключить.

1. Создайте или измените запись для зоны вершине.

1. Выберите **тип** *записи в качестве записи* , а затем выберите *Да* для **набора записей псевдонима**. Для **типа псевдонима** необходимо задать значение *Azure Resource*.

1. Выберите подписку Azure, в которой будет размещаться профиль передней дверцы. Затем выберите ресурс "Передняя дверца" в раскрывающемся списке **ресурсов Azure** .

1. Нажмите кнопку **ОК** , чтобы отправить изменения.

    :::image type="content" source="./media/front-door-apex-domain/front-door-apex-alias-record.png" alt-text="Запись псевдонима для вершине зоны":::

1. На приведенном выше шаге будет создана запись зоны вершине, указывающая на ресурс передней дверцы, а также сопоставление записи CNAME "афдверифи" (example- `afdverify.contosonews.com` ), которое будет использоваться для подключения домена в профиле передней дверцы.

## <a name="onboard-the-custom-domain-on-your-front-door"></a>Подключение пользовательского домена на передней дверце

1. На вкладке "конструктор передней дверцы" выберите значок "+" в разделе "интерфейсные узлы", чтобы добавить новый личный домен.

1. Введите имя корневого или вершине домена в поле имя пользовательского узла, например `contosonews.com` .

1. После проверки сопоставления CNAME из домена с доменом к передней дверце выберите **Добавить** , чтобы добавить личный домен.

1. Нажмите кнопку **сохранить** , чтобы отправить изменения.

   :::image type="content" source="./media/front-door-apex-domain/front-door-onboard-apex-domain.png" alt-text="Меню личных доменов":::

## <a name="enable-https-on-your-custom-domain"></a>Включение протокола HTTPS в пользовательском домене

1. Выберите личный домен, который был добавлен, и в разделе " **пользовательский домен HTTPS**" измените состояние на " **включено**".

1. Выберите  **тип управления сертификатами** , чтобы *использовать мой собственный сертификат*.

   :::image type="content" source="./media/front-door-apex-domain/front-door-onboard-apex-custom-domain.png" alt-text="Параметры HTTPS для пользовательского домена":::    

   > [!WARNING]
   > Тип управления управляемыми сертификатами передней дверцы в настоящее время не поддерживается для вершине или корневых доменов. Единственный параметр, доступный для включения HTTPS в вершине или корневом домене для передней дверцы, использует собственный пользовательский сертификат TLS/SSL, размещенный на Azure Key Vault.

1. Убедитесь, что вы настроили необходимые разрешения для доступа к хранилищу ключей с помощью интерфейса "Передняя дверца", как указано в пользовательском интерфейсе, прежде чем переходить к следующему шагу.

1. Выберите **учетную запись KEY Vault** из текущей подписки, а затем выберите соответствующую **секретную** и **секретную версию** , чтобы связать его с нужным сертификатом.

1. Выберите **Обновить** , чтобы сохранить выбор, а затем нажмите кнопку **сохранить**.

1. Выберите **Обновить** через пару минут, а затем снова выберите личный домен, чтобы увидеть ход подготовки сертификата. 

> [!WARNING]
> Убедитесь, что вы создали соответствующие правила маршрутизации для домена вершине или добавили домен в существующие правила маршрутизации.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [создании Front Door](quickstart-create-front-door.md).
- Дополнительные сведения о том, [как работает Front Door](front-door-routing-architecture.md).
