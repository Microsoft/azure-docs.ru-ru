---
title: Краткое руководство. Создание профиля Azure Front Door уровня "Стандартный" или "Премиум" на портале Azure
description: В этом кратком руководстве показано, как использовать службу Azure Front Door категории "Стандартный" или "Премиум" для работы с глобальным веб-приложением с высоким уровнем доступности и производительности с помощью портала Azure.
services: frontdoor
author: duongau
manager: KumudD
ms.service: frontdoor
ms.devlang: na
ms.topic: quickstart
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 04/16/2021
ms.author: duau
ms.openlocfilehash: 8c6fe355621b4f096814268dea8fd2fc8e1166a7
ms.sourcegitcommit: b0557848d0ad9b74bf293217862525d08fe0fc1d
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/07/2021
ms.locfileid: "106552875"
---
# <a name="quickstart-create-an-azure-front-door-standardpremium-profile---azure-portal"></a>Краткое руководство. Создание профиля Azure Front Door уровня "Стандартный" или "Премиум" на портале Azure

> [!Note]
> Эта документация предназначена для Azure Front Door категории "Стандартный" или "Премиум" (предварительная версия). Сведения об Azure Front Door См. [документацию по Azure Front Door](../front-door-overview.md).

В этом руководстве объясняется, как создать профиль Azure Front Door уровня "Стандартный" или "Премиум" на портале Azure. Вы можете создать профиль Azure Front Door уровня "Стандартный" или "Премиум" с помощью *быстрого создания* с базовыми настройками или с помощью *настраиваемого создания* с расширенными настройками. С помощью *настраиваемого создания* развертываются два веб-приложения. Далее создается профиль Azure Front Door уровня "Стандартный" или "Премиум" с двумя веб-приложениями в качестве источника. Затем проверяется возможность подключения к веб-приложениям с помощью имени интерфейсного узла Azure Front Door уровня "Стандартный" или "Премиум".

> [!IMPORTANT]
> Azure Front Door уровня "Стандартный" или "Премиум" (предварительная версия) в настоящее время доступен в общедоступной предварительной версии.
> Эта предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для использования рабочей среде. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены.
> Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

## <a name="prerequisites"></a>Предварительные требования

Учетная запись Azure с активной подпиской. [Создайте учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F) бесплатно.

## <a name="create-front-door-profile---quick-create"></a>Быстрое создание профиля Front Door

1. Войдите на [портал Azure](https://portal.azure.com).

1. На домашней странице или в меню Azure выберите  **+ Создать ресурс**. Найдите  *Front Door категории "Стандартный" или "Премиум" (предварительная версия)* . Щелкните **Создать**.

1. На странице **Сравнить предложения** выберите **Быстрое создание**. Затем нажмите кнопку **Продолжить создание Front Door**.

   :::image type="content" source="../media/create-front-door-portal/front-door-quick-create.png" alt-text="Снимок экрана сравнения предложений.":::

1. На странице **Создание профиля Front Door** введите или выберите следующие параметры.

    :::image type="content" source="../media/create-front-door-portal/front-door-quick-create-2.png" alt-text="Снимок экрана со страницей быстрого создания Front Door.":::    

    | Настройки | Значение |
    | --- | --- |
    | **Подписка**  | Выберите свою подписку. |
    | **Группа ресурсов**  | Выберите команду **Создать** и в текстовом поле введите *contoso-appservice*.|
    | **Имя** | Назовите свой профиль. В этом примере используется имя **contoso-afd-quickcreate**. |
    | **Уровень** | Выберите ценовую категорию "Стандартный" или "Премиум". Ценовая категория "Стандартный" оптимизирована для доставки содержимого. Ценовая категория "Премиум" основана на категории "Стандартный" и ориентирована на безопасность. См. раздел [Сравнение уровней](tier-comparison.md).  |
    | **Имя конечной точки** | Введите глобально уникальное имя вашей конечной точки. |
    | **Тип источника** | Выберите тип ресурса для своего источника. В этом примере в качестве источника, для которого включен Приватный канал, выбрана служба приложений. |
    | **Имя узла источника** | Введите имя узла для вашего источника. |
    | **Включение Приватного канала** | Если вы хотите использовать частное подключение между Azure Front Door и источником. Дополнительные сведения см. в разделах [Руководство по приватным каналам](concept-private-link.md) и [Включение приватного канала](./how-to-enable-private-link-web-app.md).
    | **Кэширование** | Установите этот флажок, если требуется кэшировать содержимое ближе к пользователям глобально с помощью точек присутствия Azure Front Door и сети Microsoft. |
    | **Политика WAF** | Выберите команду **Создать** или выберите существующую политику WAF из раскрывающегося списка, если вы хотите включить эту функцию. |

    > [!NOTE]
    > При создании профиля Azure Front Door уровня "Стандартный" или "Премиум" необходимо выбрать источник из той же подписки, в которой создается Front Door.

1. Выберите команду **Проверить и создать**, чтобы получить работающий профиль Front Door.

   > [!NOTE]
   > Для распространения конфигураций на все граничные точки присутствия может потребоваться несколько минут.

1. Затем нажмите кнопку **Создать**, чтобы получить развернутый и работающий профиль Front Door.

1. Если вы включили Приватный канал, перейдите к своему источнику (в этом примере — Служба приложений). Выберите **Сетевые подключения** > **Настроить Приватный канал**. Затем выберите ожидающий запрос из Azure Front Door и нажмите кнопку "Утвердить". Через несколько секунд ваше приложение будет доступно через Azure Front Door безопасным способом.

## <a name="create-front-door-profile---custom-create"></a>Настраиваемое создание профиля Front Door

### <a name="create-a-web-app-with-two-instances-as-the-origin"></a>Создание веб-приложения с двумя экземплярами в качестве источника

Если у вас уже есть источник или группа источников, переходите сразу к разделу "Создание Front Door уровня "Стандартный" или "Премиум" (предварительная версия) для вашего приложения".

В этом примере мы создадим веб-приложение с двумя экземплярами, которые выполняются в разных регионах Azure. Оба экземпляра этого веб-приложения работают в режиме *активный — активный*, то есть любой из них будет принимать трафик. Эта конфигурация отличается от конфигурации *активный — резервный*, когда один из экземпляров используется только для отработки отказа.

Если у вас нет веб-приложения, создайте его, как показано ниже.

1. Войдите на портал Azure по адресу https://portal.azure.com.

1. В верхней левой части экрана выберите **Создать ресурс** > **WebApp**.

1. На странице **Создание веб-приложения** на вкладке **Основные сведения** укажите следующее.

    | Параметр                 | Значение                                              |
    | ---                     | ---                                                |
    | **Подписка**               | Выберите свою подписку. |
    | **Группа ресурсов**       | Выберите **Создать** и введите *FrontDoorQS_rg1* в текстовом поле.|
    | **Имя**                   | Введите уникальное **имя** для вашего веб-приложения. В нашем примере это *WebAppContoso-001*. |
    | **Опубликовать** | Выберите **Код**. |
    | **Стек среды выполнения**         | Выберите **.NET Core 2.1 (LTS)** . |
    | **Операционная система**          | Выберите **Windows**. |
    | **Регион**           | Выберите **Центральная часть США**. |
    | **План Windows** | Выберите **Создать** и введите *myAppServicePlanCentralUS* в текстовом поле. |
    | **Номер SKU и размер** | Выберите **Standard S1 100 total ACU, 1.75 GB memory** ("Стандартный" S1, общее число ACU — 100, 1,75 ГБ памяти). |

     :::image type="content" source="../media/create-front-door-portal/create-web-app.png" alt-text="Быстрое создание Front Door ценовой категории &quot;Премиум&quot; на портале Azure":::

1. Выберите **Просмотр и создание**, проверьте раздел "Сводка" и щелкните **Создать**. Развертывание может длиться несколько минут.

Когда развертывание завершится, создайте второе веб-приложение. Используйте те же настройки, что и выше, за исключением следующих:

| Параметр          | Значение     |
| ---              | ---  |
| **Группа ресурсов**   | Выберите **Создать** и введите *FrontDoorQS_rg2*. |
| **Имя**             | Введите для веб-приложения уникальное имя, в нашем примере это *WebAppContoso-002*.  |
| **Регион**           | В нашем примере это *Центрально-южная часть США*. |
| **План службы приложений** > **План Windows**.         | Выберите **Создать новый** и введите *myAppServicePlanSouthCentralUS*, а затем щелкните **ОК**. |

### <a name="create-a-front-door-standardpremium-preview-for-your-application"></a>Создание Front Door уровня "Стандартный" или "Премиум" (предварительная версия) для вашего приложения

Создайте в Azure Front Door уровня "Стандартный" или "Премиум" конфигурацию, которая распределяет трафик пользователей между двумя серверами веб-приложений на основе минимальных значений задержки. Также защитите Front Door с помощью Брандмауэра веб-приложений. 

1. Войдите на [портал Azure](https://portal.azure.com).
 
1. На домашней странице или в меню Azure выберите  **+ Создать ресурс**. Найдите  *Front Door категории "Стандартный" или "Премиум" (предварительная версия)* . Щелкните **Создать**.

1. На странице **Сравнить предложения** выберите **Настраиваемое создание**. Затем нажмите кнопку **Продолжить создание Front Door**.

1. На вкладке **Основное** введите или выберите следующие сведения, а затем нажмите кнопку **Далее: секрет**. 

    | Параметр | Значение |
    | --- | --- |
    | **Подписка** | Выберите свою подписку. |
    | **Группа ресурсов** | Выберите **Создать** и введите *FrontDoorQS_rg0* в текстовом поле. |
    | **Расположение группы ресурсов** | Выберите **Восточная часть США**. |
    | **Имя профиля** | Введите уникальное имя в этой подписке **Webapp-Contoso-AFD** |
    | **Уровень** | Выберите **Премиум**. |
    
    :::image type="content" source="../media/create-front-door-portal/front-door-custom-create-2.png" alt-text="Создание профиля Front Door":::

1. *Необязательно*: **секреты**. Если вы планируете использовать управляемые сертификаты, этот шаг необязателен. Если у вас уже есть Key Vault в Azure, который планируется использовать для переноса собственного сертификата для своего домена, выберите **Добавить сертификат**. Вы также можете добавить сертификат в интерфейс управления после создания.

    > [!NOTE]
    > Необходимо иметь право на добавление сертификата из Azure Key Vault в качестве пользователя. 

    :::image type="content" source="../media/create-front-door-portal/front-door-custom-create-secret.png" alt-text="Снимок экрана с добавлением сертификата при настраиваемом создании.":::

1. На вкладке **Конечная точка** выберите **Добавить конечную точку** и присвойте конечной точке глобально уникальное имя. Вы можете создать несколько конечных точек в профиле Azure Front Door уровня "Стандартный" или "Премиум" по завершении процесса создания. В нашем примере это *contoso-frontend*. В полях "Время ожидания отклика источника (в секундах)" и "Состояние" оставьте значения по умолчанию. Выберите **Добавить**, чтобы добавить конечную точку.
    
    :::image type="content" source="../media/create-front-door-portal/front-door-custom-create-add-endpoint.png" alt-text="Снимок экрана с добавлением конечной точки.":::

1. Затем добавьте группу источника, которая содержит два веб-приложения. Выберите **+ Добавить,**  чтобы открыть страницу **Добавление группы источника**. В качестве имени введите  *myOrignGroup*, а затем выберите **+ Добавить источник**.
 
     :::image type="content" source="../media/create-front-door-portal/front-door-custom-create-add-origin-group.png" alt-text="Снимок экрана с добавлением группы источника.":::

1. На странице **Добавление источника** введите или выберите приведенные ниже сведения. Нажмите кнопку **Добавить**.

    | Параметр | Значение |
    | --- | --- |
    | **Имя** | Введите **webapp1** |
    | **Тип источника** | Выберите **Службы приложений** |
    | **Имя узла** | Выберите `WebAppContoso-001.azurewebsites.net` |
    | **Заголовок узла источника** | Выберите `WebAppContoso-001.azurewebsites.net` |
    | **Другие поля** | Для других полей сохраните значения по умолчанию. |

    > [!NOTE]
    > При создании профиля Azure Front Door уровня "Стандартный" или "Премиум" необходимо выбрать источник из той же подписки, в которой создается Azure Front Door уровня "Стандартный" или "Премиум".
   
   :::image type="content" source="../media/create-front-door-portal/front-door-custom-create-add-origin-1.png" alt-text="Снимок экрана с добавлением других источников.":::

1. Повторите шаг 8, чтобы добавить второй источник webapp002. Выберите `webappcontoso-002.azurewebsite.net` в качестве **имени узла источника** и **заголовка узла источника**.

1. На странице **Добавление группы источника** вы увидите два добавленных источника; во всех остальных полях оставьте значения по умолчанию.
  
   :::image type="content" source="../media/create-front-door-portal/front-door-custom-create-add-origin-group-2.png" alt-text="Снимок экрана со страницей добавления группы источника.":::

1. Затем добавьте маршрут, чтобы подключить интерфейсную конечную точку к группе источника. Этот маршрут перенаправляет запросы от конечной точки к myOriginGroup. Выберите **+ Добавить** для маршрута, чтобы настроить маршрут.  

1. На странице **Добавление маршрута** введите или выберите приведенные ниже сведения. Нажмите кнопку **Добавить**.
  
    :::image type="content" source="../media/create-front-door-portal/front-door-custom-create-add-route-without-caching.png" alt-text="Добавить маршрут без кэширования":::

    | Параметр | Значение |
    | --- | --- |
    | **Имя** | Введите **MyRoute** |    
    | **Доменная** | Выберите `contoso-frontend.z01.azurefd.net` | 
    | **Имя узла** | Выберите `WebAppContoso-001.azurewebsites.net` |
    | **Шаблоны для сопоставления** | Оставьте для использования по умолчанию. |
    | **Допустимые протоколы** | Оставьте для использования по умолчанию. | 
    | **перенаправление** | Оставьте значение по умолчанию в поле **Redirect all traffic to use HTTPS** (Перенаправлять весь трафик для использования HTTPS). | 
    | **Группа источника** | Выберите **MyOriginGroup**. | 
    | **Путь к источнику** | Оставьте для использования по умолчанию. | 
    | **Протокол переадресации** | Выберите **Match incoming request** (Сопоставить входящий запрос). | 
    | **Кэширование** | В этом кратком руководстве не устанавливайте флажок. Если вы хотите, чтобы содержимое кэшировалось на граничных устройствах, установите флажок **Включить кэширование**. |
    | **Правила** | Оставьте для использования по умолчанию. После создания профиля Front Door можно создавать пользовательские правила и применять их к маршрутам. |  
       
    >[!WARNING]
    > **Проверьте**, чтобы к каждой граничной точке был маршрут. Отсутствие маршрута может привести к сбою конечной точки.

1. Затем выберите **Добавить** в разделе "Безопасность", чтобы добавить политику WAF. Щелкните **Добавить** и присвойте политике уникальное имя. Установите флажок **Добавить защиту от ботов**. Выберите конечную точку в области **Домены**, а затем нажмите кнопку **Добавить**.

   :::image type="content" source="../media/create-front-door-portal/front-door-custom-create-add-waf-policy-2.png" alt-text="Добавление политики WAF":::

1. Выберите **Проверить и создать**, а затем щелкните **Создать**. Для распространения конфигураций на все граничные точки присутствия потребуется несколько минут. Теперь у вас есть первые профиль и конечная точка на Front Door.

   :::image type="content" source="../media/create-front-door-portal/front-door-custom-create-review.png" alt-text="Проверка настраиваемого создания":::

## <a name="verify-azure-front-door"></a>Проверка Azure Front Door

При создании профиля Azure Front Door уровня "Стандартный" или "Премиум" глобальное развертывание конфигурации требует нескольких минут. После завершения вы сможете получить доступ к созданному интерфейсному узлу. Для этого откройте в браузере адрес `contoso-frontend.z01.azurefd.net`. Ваш запрос будет автоматически направлен на ближайший сервер из указанных ранее в группе источника.

Если вы использовали приложения, предложенные для этого быстрого руководства, вы увидите информационную страницу.

Чтобы проверить мгновенную глобальную отработку отказа, используются такие шаги:

1. Откройте браузер и перейдите по следующему адресу интерфейсной части: `contoso-frontend.azurefd.net`.

1. На портале Azure найдите и выберите *Службы приложений*. Прокрутите страницу вниз до одного из настроенных веб-приложений, в нашем примере это **WebAppContoso-001**.

1. Выберите это веб-приложение, щелкните **Остановить** и подтвердите действие, щелкнув **Да**.

1. Обновите свой браузер. Вы увидите ту же самую информационную страницу.

   >[!TIP]
   >Но эти действия могут выполняться с небольшой задержкой. Возможно, нужно будет обновить страницу еще раз.

1. Теперь найдите и остановите второе приложение.

1. Обновите свой браузер. На этот раз вы увидите сообщение об ошибке.

    :::image type="content" source="../media/create-front-door-portal/web-app-stopped-message.png" alt-text="Остановлены оба экземпляра веб-приложения":::

## <a name="clean-up-resources"></a>Очистка ресурсов

После завершения работы вы можете удалить все созданные элементы. При удалении группы ресурсов полностью удаляется ее содержимое. Если вам больше не нужна эта служба Front Door, удалите все ее ресурсы, чтобы избежать лишних расходов.

1. На портале Azure найдите и выберите элемент **Группы ресурсов** или щелкните **Группы ресурсов** в меню портала Azure.

1. Примените фильтр или прокрутите список, чтобы найти нужную группу ресурсов, в нашем примере это **FrontDoorQS_rg0**.

1. Выберите эту группу ресурсов и щелкните **Удалить группу ресурсов**.

   >[!WARNING]
   >Это действие невозможно отменить.

1. Введите имя группы ресурсов для подтверждения и щелкните **Удалить**.

Повторите эту процедуру для двух других групп.

## <a name="next-steps"></a>Дальнейшие действия

Теперь вы можете переходить к следующей статье, где описано добавление личного домена в Front Door.
> [!div class="nextstepaction"]
> [Добавить личный домен](how-to-add-custom-domain.md)