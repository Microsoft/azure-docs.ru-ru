---
title: Мониторинг проверки работоспособности предварительной версии передней дверцы Azure уровня "Стандартный" или "Премиум"
description: Эта статья поможет вам понять, как передняя дверца Azure отслеживает работоспособность серверной части.
services: frontdoor
author: duongau
ms.service: frontdoor
ms.topic: conceptual
ms.workload: infrastructure-services
ms.date: 02/18/2021
ms.author: duau
ms.openlocfilehash: 30a8208babab2991c9d9e86cc419ac50e1530d7b
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "101100086"
---
# <a name="azure-front-door-standardpremium-preview-health-probe-monitoring"></a>Мониторинг проверки работоспособности предварительной версии передней дверцы Azure уровня "Стандартный" или "Премиум"

> [!Note]
> Эта документация предназначена для Azure Front Door категории "Стандартный" или "Премиум" (предварительная версия). Сведения об Azure Front Door см. [здесь](../front-door-overview.md).

Передняя дверца Azure периодически отправляет запрос HTTP или HTTPS на каждую серверную часть. Эти запросы позволяют внешней дверце Azure определить работоспособность каждой конечной точки во внутреннем пуле. Затем передняя дверца использует эти ответы из пробы, чтобы определить наиболее подходящие серверные ресурсы для маршрутизации клиентских запросов. 

> [!WARNING]
> Так как у передней дверцы есть много пограничных сред, объем проверки работоспособности для серверной части может быть довольно высоким в диапазоне от 25 запросов в минуту до 1200 запросов в минуту в зависимости от настроенной частоты проверки работоспособности. При частоте проверки по умолчанию 30 секунд объем проверяемого тома на серверной стороне должен составлять примерно 200 запросов в минуту.

## <a name="supported-protocols"></a>Поддерживаемые протоколы

Front Door поддерживает отправку проб по протоколу HTTP или HTTPS. Эти пробы отправляются через одни и те же TCP-порты, настроенные для маршрутизации клиентских запросов, и их невозможно переопределить.

## <a name="supported-http-methods-for-health-probes"></a>Поддерживаемые методы HTTP для проб работоспособности

Передняя дверца поддерживает следующие методы HTTP для отправки проб работоспособности:

* **Получить:** Метод GET означает извлечение любой информации (в форме сущности) с помощью URI запроса.
* **Заголовок:** Метод HEAD идентичен ПОЛУЧЕНию, за исключением того, что сервер не должен возвращать текст сообщения в ответе. Для новых профилей передней дверцы по умолчанию выбран метод проверки HEAD.

> [!NOTE]
> Для более низкой нагрузки и снижения стоимости работы на серверной части первая дверца рекомендует использовать ГОЛОВные запросы для проб работоспособности.

## <a name="health-probe-responses"></a>Ответы проб работоспособности

| Ответы  | Описание | 
| ------------- | ------------- |
| Определение работоспособности  |  Код состояния "200 ОК" указывает, что серверная часть находится в работоспособном состоянии. Все остальные состояния будут считаться сбоем. Если по какой-либо причине (включая сбой сети) не получен допустимый ответ HTTP для пробы, зонд считается неудачным.|
| Измерение задержки  | Задержка — это физическое время, измеренное с момента отправки пробы до момента получения последнего байта ответа. Мы используем новое TCP-подключение для каждого запроса, чтобы это измерение не было смещено в сторону незавершенных соединений с существующими горячими подключениями.  |

## <a name="how-front-door-determines-backend-health"></a>Как Front Door определяет работоспособность серверной части

Для определения работоспособности Передняя дверца Azure использует для всех алгоритмов один и тот же процесс из трех этапов.

1. Исключение отключенных серверных частей.

1. Исключение серверных частей с ошибками пробы работоспособности.

    * Этот можно сделать, просмотрев последние _n_ ответов проб работоспособности. Если по крайней мере _x_ указывают на работоспособное состояние, серверная часть считается работоспособной.

    * _n_ настраивается путем изменения свойства SampleSize в параметрах балансировки нагрузки.

    * _x_ настраивается путем изменения свойства сукцессфулсамплесрекуиред в параметрах балансировки нагрузки.

1. Для наборов исправных серверов в внутреннем пуле Передняя дверца дополнительно измеряет и поддерживает задержку (время приема-передачи) для каждой серверной части.


## <a name="complete-health-probe-failure"></a>Полный сбой пробы работоспособности

При сбое пробы работоспособности для каждой серверной части во внутреннем пуле Front Door считает их работоспособными и направляет трафик методом циклического распределения между ними.

После того как любая Серверная часть вернется в работоспособное состояние, она возобновит нормальную работу алгоритма балансировки нагрузки.

## <a name="disabling-health-probes"></a>Отключение проверок работоспособности

Если в внутреннем пуле имеется один Серверная часть или только один серверный внутренний пул, можно отключить пробы работоспособности. Это позволит снизить нагрузку на серверную часть приложения.

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как [создать переднюю дверь уровня "Стандартный" или "Премиум](create-front-door-portal.md)".
