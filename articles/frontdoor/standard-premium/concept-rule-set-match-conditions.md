---
title: Настройка условий соответствия для набора правил "Стандартный" или "Премиум" для передней дверцы Azure
description: В этой статье приводится список различных условий соответствия, доступных в наборе правил "Стандартный" или "Премиум" для передней дверцы Azure.
services: frontdoor
author: duongau
ms.service: frontdoor
ms.topic: conceptual
ms.date: 02/18/2021
ms.author: yuajia
ms.openlocfilehash: 4c65d0e7f80fab59ca7df4849df7117d482352c1
ms.sourcegitcommit: 97c48e630ec22edc12a0f8e4e592d1676323d7b0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/18/2021
ms.locfileid: "101100043"
---
# <a name="azure-front-door-standardpremium-preview-rule-set-match-conditions"></a>Условия соответствия набора правил "Стандартный" или "Премиум" (Предварительная версия) для передней дверцы Azure

> [!Note]
> Эта документация предназначена для передней дверцы Azure уровня "Стандартный" или "Премиум" (Предварительная версия). Ищете информацию о передней дверце Azure? Просмотреть [здесь](../front-door-overview.md).

В этом учебнике показано, как создать набор правил с первым набором правил в портал Azure. В [наборе правил](concept-rule-set.md)"Стандартный" или "Премиум" передней дверцы Azure правило состоит из одного или нескольких условий соответствия и действия. В этой статье приводятся подробные описания условий соответствия, которые можно использовать в наборе правил "Стандартный" или "Премиум" передней дверцы Azure.

Первая часть правила — это одно или несколько условий соответствия. Правило может содержать до 10 условий соответствия. Условие соответствия определяет конкретные типы запросов, для которых выполняются определенные действия. При использовании нескольких условий соответствия они группируются с помощью логического компонента AND. Для всех условий соответствия, которые поддерживают несколько значений (с разделителями-пробелами), предполагается оператор OR.

Например, с помощью условия соответствия вы сможете:

* Отфильтровать запросы на основе определенного IP-адреса, страны или региона.
* Отфильтровать запросы по информации из заголовка.
* Отфильтровать запросы с мобильных или классических устройств.
* Фильтрация запросов по имени файла запроса и расширению файла.
* Фильтрация запросов из URL-адреса запроса, протокола, пути, строки запроса, аргументов POST и т. д.

> [!IMPORTANT]
> Передняя дверца Azure Standard/Premium (Предварительная версия) в настоящее время доступна в общедоступной предварительной версии.
> Эта предварительная версия предоставляется без соглашения об уровне обслуживания и не рекомендована для использования рабочей среде. Некоторые функции могут не поддерживаться или их возможности могут быть ограничены.
> Дополнительные сведения см. в статье [Дополнительные условия использования предварительных выпусков Microsoft Azure](https://azure.microsoft.com/support/legal/preview-supplemental-terms/).

Следующие условия соответствия доступны для использования в наборе правил "стандартные" или "Премиум" передней дверцы Azure:

## <a name="device-type"></a>Тип устройства

Определяет запросы, выполненные с мобильного или с классического устройства.  

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|----------------
Equals, Not equals | Классические и мобильные устройства

## <a name="post-argument"></a>Аргумент POST

Определяет запросы на основе аргументов, определенных для метода запроса POST, который используется в запросе.

#### <a name="required-fields"></a>Обязательные поля

Имя аргумента | Оператор | Значение аргумента | Преобразование регистра
--------------|----------|----------------|---------------
Строка | [Список операторов](#operator-list) | String, Int | Строчные буквы, прописные

## <a name="query-string"></a>Строка запроса

Определяет запросы, содержащие указанный параметр строки запроса. Для этого параметра задается значение, соответствующее указанному шаблону. Параметры строки запроса (например, **параметр=значение**) в URL-адресе запроса определяют, выполнено ли это условие. Это условие соответствия определяет параметр строки запроса по имени и принимает одно или несколько значений для значения параметра.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Строка запроса | Преобразование регистра
---------|--------------|---------------
[Список операторов](#operator-list) | String, Int | Строчные буквы, прописные

## <a name="remote-address"></a>Удаленный адрес

Определяет запросы на основе расположения или IP-адреса инициатора запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|-----------------
Географическое сопоставление | Код страны
Сопоставление IP-адресов | IP-адрес (с разделителями-пробелами)
Географическое соответствие отсутствует | Код страны
Соответствие IP-адреса отсутствует | IP-адрес (с разделителями-пробелами)

#### <a name="key-information"></a>Основные сведения

* Используйте нотацию CIDR.
* Для нескольких IP-адресов и блоков IP-адресов применяется логика "или".
    * **Пример IPv4**. Если добавить два IP-адреса *1.2.3.4* и *10.20.30.40*, условие будет сопоставлено, если имеются запросы, поступающие из адреса 1.2.3.4 или 10.20.30.40.
    * **Пример для IPv6**. Если добавить два IP-адреса *1:2:3:4:5:6:7:8* и *10:20:30:40:50:60:70:80*, условие будет сопоставлено, если имеются запросы, поступающие из адреса 1:2:3:4:5:6:7:8 или 10:20:30:40:50:60:70:80.
* Синтаксис блока IP-адресов — базовый IP-адрес, за которым следуют косая черта и размер префикса. Пример:
    * **Пример IPv4**. *5.5.5.64/26* соответствует любым запросам, поступающим из диапазона адресов 5.5.5.64–5.5.5.127.
    * **Пример IPv6**. *1:2:3:/48* соответствует любым запросам, поступающим из диапазона адресов 1:2:3:0:0:0:0:0–1:2:3:ffff:ffff:ffff:ffff:ffff.

## <a name="request-body"></a>Тело запроса

Определяет запросы на основе конкретного текста, отображаемого в тексте запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Тело запроса | Преобразование регистра
---------|--------------|---------------
[Список операторов](#operator-list) | String, Int | Строчные буквы, прописные

## <a name="request-header"></a>Заголовок запроса

Определяет запросы, которые используют конкретный заголовок в запросе.

#### <a name="required-fields"></a>Обязательные поля

Имя заголовка | Оператор | Значение заголовка | Преобразование регистра
------------|----------|--------------|---------------
Строка | [Список операторов](#operator-list) | String, Int | Строчные буквы, прописные

## <a name="request-method"></a>Метод запроса

Определяет запросы, использующие указанный метод запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|----------------
Equals, Not equals | GET, POST, PUT, DELETE, HEAD, OPTIONS, TRACE

#### <a name="key-information"></a>Основные сведения

Только метод запроса GET может создавать кэшированное содержимое в Azure Front Door. Все остальные методы запроса передаются через сеть.

## <a name="request-protocol"></a>Протокол запроса

Определяет запросы, использующие указанный протокол.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Поддерживаемые значения
---------|----------------
Equals, Not equals | HTTP, HTTPS

## <a name="request-url"></a>Request URL (URL-адрес запроса)

Определяет запросы, соответствующие указанному URL-адресу.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Request URL (URL-адрес запроса) | Преобразование регистра
---------|-------------|---------------
[Список операторов](#operator-list) | String, Int | Строчные буквы, прописные

#### <a name="key-information"></a>Основные сведения

При использовании этого условия правила не забудьте включить сведения о протоколе. Пример: *https://www.\<yourdomain\>.com*.

## <a name="request-file-extension"></a>Расширение файла запроса

Определяет запросы, включающие указанное расширение в имени файла в запросе URL-адреса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Расширение | Преобразование регистра
---------|-----------|---------------
[Список операторов](#operator-list)  | String, Int | Строчные буквы, прописные

#### <a name="key-information"></a>Основные сведения

Не используйте точку в начале расширений. Например, используйте *HTML* вместо *.HTML*.

## <a name="request-file-name"></a>Имя файла запроса

Определяет запросы, содержащие указанное имя файла в URL-адресе запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Имя файла | Преобразование регистра
---------|-----------|---------------
[Список операторов](#operator-list)| String, Int | Строчные буквы, прописные

## <a name="request-path"></a>Путь запроса

Определяет запросы, которые включают указанный путь в URL-адресе запроса.

#### <a name="required-fields"></a>Обязательные поля

Оператор | Значение | Преобразование регистра
---------|-------|---------------
[Список операторов](#operator-list) | String, Int | Строчные буквы, прописные

## <a name="operator-list"></a><a name = "operator-list"></a>Список операторов

Для правил, которые принимают значения из списка стандартных операторов, допустимы следующие операторы:

* Любой
* Равно
* Содержит
* Начинается с
* Заканчивается на
* Меньше чем
* Меньше или равно
* Больше
* Больше или равно
* Не любое
* Не содержит
* Не начинается с
* Не заканчивается на
* Не меньше
* Не меньше или равно
* Не больше чем
* Не больше или равно
* Регулярное выражение

Для числовых операторов, таких как *меньше чем* и *больше или равно*, используется сравнение, основанное на длине. Значение в условии соответствия должно быть целым числом, равным длине, с которой требуется проводить сравнение.

## <a name="regular-expression"></a>Регулярное выражение

Регулярное выражение не поддерживает следующие операции:

* Обратные ссылки и захват частей выражений
* Произвольные утверждения нулевой ширины
* Ссылки на подпрограммы и рекурсивные шаблоны
* Условные шаблоны
* Команды управления поиском с возвратом
* Директива \c с одним байтом
* Директива сопоставления для новой строки \r
* Директива инициализации \K Start from Match
* Выноски и встроенный код
* Атомарное группирование и более обладающие кванторы

## <a name="next-steps"></a>Следующие шаги

* Дополнительные сведения о [наборе правил](concept-rule-set.md).
* Узнайте, как [настроить первый набор правил](how-to-configure-rule-set.md).
* Дополнительные сведения о [действиях набора правил](concept-rule-set-actions.md).
