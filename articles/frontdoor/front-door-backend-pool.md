---
title: Серверы и серверные пулы в передней дверце Azure | Документация Майкрософт
description: В этой статье описывается, какие серверные и внутренние пулы находятся в конфигурации передней дверцы.
services: front-door
documentationcenter: ''
author: duongau
ms.service: frontdoor
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 09/28/2020
ms.author: duau
ms.openlocfilehash: 4beba141fec7a819df52e4c3a669312a4ad76998
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "91449300"
---
# <a name="backends-and-backend-pools-in-azure-front-door"></a>Серверы и серверные пулы в передней дверце Azure
В этой статье описываются основные понятия о том, как сопоставлять развертывание веб-приложения с передней дверцей Azure. Здесь также объясняются различные терминов, используемые в конфигурации передней дверцы для серверной части приложения.

## <a name="backends"></a>Серверные системы
Серверная часть ссылается на развертывание веб-приложения в регионе. Передняя дверца поддерживает ресурсы Azure и не Azure во внутреннем пуле. Приложение может находиться в локальном центре обработки данных или находиться в другом поставщике облачных служб.

Серверная часть передней дверцы относится к имени узла или общедоступному IP-адресу приложения, обслуживающего запросы клиента. Не следует путать с уровнем базы данных, уровнем хранилища и т. д. Серверные части должны быть просмотрены как общедоступная конечная точка для внутреннего сервера приложения. При добавлении серверной части в внутренний пул внешних дверей необходимо также добавить следующее:

- **Тип узла серверной части**. Тип ресурса, который требуется добавить. Передняя дверца поддерживает автообнаружение серверных интерфейсов приложения из службы приложений, облачной службы или хранилища. Если вам нужен другой ресурс в Azure или даже Серверная часть, не относящаяся к Azure, выберите **Пользовательский узел**.

    >[!IMPORTANT]
    >Во время настройки интерфейсы API не проверяют, недоступна ли Серверная часть в средах с передней дверцей. Убедитесь, что передняя дверца может достигать серверной части.

- **Имя узла подписки и** сервера. Если вы не выбрали **Пользовательский узел** для типа узла серверной части, выберите свою серверную часть, выбрав соответствующую подписку и соответствующее имя узла в пользовательском интерфейсе.

- **Заголовок узла внутреннего сервера**. Значение заголовка узла, отправляемое в серверную часть для каждого запроса. Дополнительные сведения см. в разделе [Серверный заголовок узла](#hostheader).

- **Приоритет**. Назначьте приоритеты различным серверным конечным серверам, если вы хотите использовать основную внутреннюю службу службы для всего трафика. Кроме того, предоставьте резервные копии, если первичная или резервная недоступна. Дополнительные сведения см. в разделе [Priority](front-door-routing-methods.md#priority).

- **Вес**. Задайте весовые коэффициенты для различных конечных элементов, чтобы распределить трафик между набором последовательностей, равномерно или пропорционально коэффициентам веса. Дополнительные сведения см. в разделе [веса](front-door-routing-methods.md#weighted).

### <a name="backend-host-header"></a><a name = "hostheader"></a>Заголовок внутреннего узла

Запросы, переадресованные передней дверце к серверной части, включают поле заголовка узла, используемое серверной частью для получения целевого ресурса. Значение для этого поля обычно берется из внутреннего URI, который содержит заголовок узла и порт.

Например, запрос, отправленный для `www.contoso.com` , будет иметь заголовок узла www.contoso.com. Если для настройки серверной части используется портал Azure, значением по умолчанию для этого поля является имя узла серверной части. Если серверная часть — contoso-westus.azurewebsites.net, в портал Azure автоматически заполняемое значение заголовка узла внутреннего сервера будет contoso-westus.azurewebsites.net. Однако если вы используете Azure Resource Manager шаблоны или другой метод без явного задания этого поля, то передняя дверца отправит входящее имя узла в качестве значения заголовка узла. Если запрос был сделан для www \. contoso.com, а Серверная часть — Contoso-westus.azurewebsites.NET с пустым полем заголовка, то передняя дверь установит заголовок узла в виде www \. contoso.com.

Для большинства серверных частей приложения (веб-приложения Azure, хранилище больших двоичных объектов и облачные службы) заголовок узла должен соответствовать домену внутреннего сервера. Однако интерфейсный узел, который маршрутизирует на серверную часть, будет использовать другое имя узла, например www.contoso.net.

Если серверной части требуется, чтобы заголовок узла совпадал с именем узла внутреннего сервера, убедитесь, что заголовок узла внутреннего сервера содержит имя узла серверной части.

#### <a name="configuring-the-backend-host-header-for-the-backend"></a>Настройка заголовка узла серверной системы

Чтобы настроить поле **заголовка внутреннего узла** для серверной части в разделе серверный пул:

1. Откройте ресурс "Передняя дверь" и выберите внутренний пул с серверной частью для настройки.

2. Добавьте серверную часть, если вы этого не сделали, или измените существующую.

3. В поле Заголовок узла серверной части задайте пользовательское значение или оставьте его пустым. Имя узла для входящего запроса будет использоваться в качестве значения заголовка узла.

## <a name="backend-pools"></a>Серверные пулы
Внутренний пул на передней дверце обозначает набор серверных компонентов, которые получают подобный трафик для своего приложения. Иными словами, это логическая группировка экземпляров приложения по всему миру, которые получают одинаковый трафик и отвечают ожидаемому поведению. Эти интерфейсы развертываются в разных регионах или в одном регионе. Все серверные элементы могут находиться в режиме активного или активного развертывания или быть определены как Активная/пассивная конфигурация.

Внутренний пул определяет, как различные серверные части должны оцениваться через зонды работоспособности. Он также определяет, как происходит балансировка нагрузки между ними.

### <a name="health-probes"></a>Пробы работоспособности
Передняя дверца отправляет периодические запросы проверки HTTP/HTTPS на каждый из настроенных серверных интерфейсов. Запросы пробы определяют сходство и работоспособность каждой серверной части для балансировки нагрузки запросов конечных пользователей. Параметры проверки работоспособности для внутреннего пула определяют, как мы будем опрашивать состояние работоспособности серверной части приложения. Для конфигурации балансировки нагрузки доступны следующие параметры.

- **Путь**: URL-адрес, используемый для пробных запросов для всех серверных частей внутреннего пула. Например, если один из серверных contoso-westus.azurewebsites.net, а путь имеет значение/пробе/тест.аспкс, то среда "Передняя дверь" при условии, что для протокола задано значение HTTP, будет отсылать запросы проверки работоспособности в HTTP \: //contoso-westus.azurewebsites.NET/Probe/Test.aspx.

- **Протокол**: определяет, следует ли отсылать запросы пробы работоспособности от передней дверцы к серверной части с помощью протокола HTTP или HTTPS.

- **Метод**: метод HTTP, используемый для отправки проб работоспособности. Параметры включают GET или HEAD (по умолчанию).
    > [!NOTE]
    > Для более низкой нагрузки и снижения стоимости работы на серверной части первая дверца рекомендует использовать ГОЛОВные запросы для проб работоспособности.

- **Интервал (в секундах)**: определяет частоту проверок работоспособности в серверной части или интервалы, в течение которых каждая из сред передней дверцы отправляет зонд.

    >[!NOTE]
    >Для ускорения отработки отказа установите для интервала меньшее значение. Чем меньше это значение, тем выше объем данных проверки работоспособности, получаемый конечными точками. Например, если для интервала задано значение 30 секунд, то есть 100 точек на передней дверце, каждая серверная часть получит около 200 запросов пробы в минуту.

Дополнительные сведения см. в разделе [зонды работоспособности](front-door-health-probes.md).

### <a name="load-balancing-settings"></a>Параметры балансировки нагрузки
Параметры балансировки нагрузки для серверного пула определяют, как оцениваются пробы работоспособности. Эти параметры определяют, является ли Серверная часть работоспособной или неработоспособной. Они также посвящены балансировке нагрузки трафика между различными серверными интерфейсами в внутреннем пуле. Для конфигурации балансировки нагрузки доступны следующие параметры.

- **Размер выборки**. Определяет, сколько примеров проверок работоспособности необходимо учитывать при оценке работоспособности серверной части.

- **Размер выборки успешно выполнен**. Определяет размер выборки, как упоминалось ранее, количество успешных выборок, необходимых для вызова работоспособности серверной части. Например, предположим, что интервал проверки работоспособности передней дверцы составляет 30 секунд, размер выборки равен 5, а успешный размер выборки — 3. Каждый раз, когда оцениваются проверки работоспособности серверной части, мы рассмотрим пять последних выборок за 150 секунд (5 x 30). Для объявления серверной части в качестве работоспособного требуется по крайней мере три успешные проверки.

- **Чувствительность задержки (дополнительная задержка)**. Определяет, должна ли Передняя дверца отправлять запрос на сервер в пределах диапазона чувствительности к измерению задержки или пересылать запрос ближайшему серверу.

Дополнительные сведения см. в разделе [метод маршрутизации на основе минимальной задержки](front-door-routing-methods.md#latency).

## <a name="next-steps"></a>Дальнейшие действия

- [Создание профиля Front Door](quickstart-create-front-door.md)
- [Принцип работы передней дверцы](front-door-routing-architecture.md)
