---
title: Диск Azure Data Box устранение проблем с копированием данных | Документация Майкрософт
description: Описывает устранение неполадок, возникающих при копировании данных в Диск Azure Data Box с помощью журналов.
services: databox
author: alkohli
ms.service: databox
ms.subservice: disk
ms.topic: troubleshooting
ms.date: 06/13/2019
ms.author: alkohli
ms.openlocfilehash: 5d977fe0b7459af35f678e77681d3b27c31431cc
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "85849189"
---
# <a name="troubleshoot-data-copy-issues-in-azure-data-box-disk"></a>Устранение неполадок, связанных с копированием данных, в Диск Azure Data Box

Эта статья относится к Microsoft Azure Диск Data Box и описывает устранение неполадок, возникающих при копировании данных на диски. В статье также рассматриваются проблемы, связанные с использованием инструмента разбиения копирования.


## <a name="data-copy-issues-when-using-a-linux-system"></a>Проблемы при копировании данных при использовании системы Linux

В этом разделе описаны некоторые основные проблемы, с которыми следует столкнуться при использовании клиента Linux для копирования данных на диски.

### <a name="issue-drive-getting-mounted-as-read-only"></a>Причина: накопитель подключен как "только для чтения"
 
**Причина** 

Это может быть вызвано некорректной работой файловой системы.

Повторное подключение диска как доступного для чтения и записи не работает с Дисками Data Box. Этот сценарий не поддерживается для дисков, расшифрованных с помощью DisLocker. Вам может удастся повторно подключить устройство с помощью следующей команды:

```
# mount -o remount, rw /mnt/DataBoxDisk/mountVol1
```

Хотя повторное подключение прошло успешно, данные не будут сохраняться.

**Решение**

Выполните следующие действия в системе Linux:

1. Установите `ntfsprogs` пакет для служебной программы нтфсфикс.
2. Отключите точки подключения, предоставленные для диска, с помощью средства Unlock. Количество точек подключения будет различным для дисков.

    ```
    unmount /mnt/DataBoxDisk/mountVol1
    ```

3. Выполните `ntfsfix` команду по соответствующему пути. Выделенное число должно совпадать с шагом 2.

    ```
    ntfsfix /mnt/DataBoxDisk/bitlockerVol1/dislocker-file
    ```

4. Выполните следующую команду, чтобы удалить метаданные спящего режима, которые могут вызвать проблемы подключения.

    ```
    ntfs-3g -o remove_hiberfile /mnt/DataBoxDisk/bitlockerVol1/dislocker-file /mnt/DataBoxDisk/mountVol1
    ```

5. Выполните чистую отсоединение.

    ```
    ./DataBoxDiskUnlock_x86_64 /unmount
    ```

6. Выполните чистую разблокировку и подключение.
7. Проверьте точку подключения, записав файл.
8. Отключите и повторно подключитесь, чтобы проверить сохраняемость файлов.
9. Продолжайте копирование данных.
 
### <a name="issue-error-with-data-not-persisting-after-copy"></a>Проблема: ошибка при сохранении данных после копирования
 
**Причина** 

Если вы видите, что на вашем диске нет данных после того, как он был отключен (хотя на него были скопированы данные), тогда, возможно, вы повторно подключили диск в качестве доступного для чтения и записи после того, как он был подключен как доступный только для чтения.

**Решение**
 
В этом случае просмотрите разрешения для [дисков, подключаемых как доступные только для чтения](#issue-drive-getting-mounted-as-read-only).

Если это не так, скопируйте журналы из папки, которая содержит средство разблокировки Диска Data Box, и [обратитесь в службу поддержки Майкрософт](data-box-disk-contact-microsoft-support.md).


## <a name="data-box-disk-split-copy-tool-errors"></a>Ошибки средства Data Box Disk Split Copy

В следующей таблице приведены проблемы, возникающие при использовании инструмента разбиения копирования для разделения данных на несколько дисков.

|Сообщение об ошибке и предупреждения |Рекомендации |
|---------|---------|
|Контактные Получение пароля BitLocker для тома: m <br>План Перехвачено исключение при получении ключа BitLocker для тома m:<br> В последовательности нет элементов.|Эта ошибка возникает в том случае, если целевой диск Data Box находятся в автономном режиме. <br> Используйте средство `diskmgmt.msc` для подключенных дисков.|
|[Ошибка] Возникло исключение: не удалось выполнить операцию WMI:<br> Method=UnlockWithNumericalPassword, ReturnValue=2150694965, <br>Win32Message=недопустимый формат восстановления пароля. <br>Пароли восстановления BitLocker состоят из 48 цифр. <br>Убедитесь, что пароль восстановления установлен в правильном формате, и повторите попытку.|Используйте средство разблокировки диска Data Box, чтобы открыть диск, затем повторите команду. Дополнительные сведения см. в следующих разделах: <li> [Разблокировка дисков на клиенте Windows](data-box-disk-deploy-set-up.md#unlock-disks-on-windows-client). </li><li> [Разблокировка дисков на клиенте Linux](data-box-disk-deploy-set-up.md#unlock-disks-on-linux-client). </li>|
|[Ошибка] Возникло исключение: файл DriveManifest.xml существует на целевом диске. <br> Это означает, что целевой диск был подготовлен с помощью другого файла журнала. <br>Чтобы добавить больше данных на тот же диск, используйте предыдущий файл журнала. Чтобы удалить существующие данные и повторно использовать целевой диск для нового задания импорта, удалите *DriveManifest.xml* на диске. Повторно выполните команду с использованием нового файла журнала.| Эта ошибка возникает, если вы пытались использовать один и тот же набор дисков для нескольких сеансов импорта. <br> Используйте один набор дисков только для одного сеанса разделения и копирования.|
|[Ошибка] Возникло исключение: данные импорта CopySessionId importdata-sept-test-1 ссылаются на предыдущий сеанс копирования, и их нельзя использовать повторно для нового сеанса копирования.|Эта ошибка возникает, если вы пытаетесь использовать то же имя задания, которое уже использовали для успешно выполненного задания.<br> Укажите уникальное имя для нового задания.|
|[Сведения] Имя конечного файла или каталога превышает ограничение по длине NTFS. |Это сообщение возникает, если конечный файл был переименован из-за длинного пути.<br> Измените расположение параметра в файле `config.json` для управления действиями такого типа.|
|[Ошибка] Возникло исключение: неверная escape-последовательность JSON. |Это сообщение возникает, если файлу config.json назначен недопустимый формат. <br> Проверьте файл `config.json`, используя [JSONlint](https://jsonlint.com/), перед его сохранением.|


## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как [устранять неполадки в средстве проверки](data-box-disk-troubleshoot.md).
