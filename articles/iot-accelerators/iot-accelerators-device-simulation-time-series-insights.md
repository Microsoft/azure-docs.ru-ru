---
title: Визуализация моделируемой телеметрической информации с помощью службы "аналитика временных рядов" — Azure | Документация Майкрософт
description: Сведения о настройке среды службы "Аналитика временных рядов Azure" для изучения и анализа данных телеметрии, созданных акселератором решений для имитации устройств.
author: dominicbetts
manager: timlt
ms.author: dobett
ms.date: 08/20/2018
ms.topic: conceptual
ms.service: iot-accelerators
services: iot-accelerators
ms.openlocfilehash: e1409b43f0ce1fc0d8c622dda79e857ac6abdd33
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96854569"
---
# <a name="use-time-series-insights-to-visualize-telemetry-sent-from-the-device-simulation-solution-accelerator"></a>Использование службы "Аналитика временных рядов Azure" для визуализации данных телеметрии, отправленных из акселератора решений для имитации устройств

Акселератор решений для имитации устройств позволяет создавать данные телеметрии с имитированных устройств для тестирования ваших решений Центра Интернета вещей. В этом руководстве показано, как визуализировать и анализировать имитированные данные телеметрии с помощью среды службы "Аналитика временных рядов".

## <a name="prerequisites"></a>Предварительные условия

Для дальнейших действий, описанных в этом руководстве, вам потребуется активная подписка Azure. Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начинать работу.

Действия в этом руководстве предполагают, что вы развернули акселератор решений для имитации устройств в подписке Azure. Если вы еще не развернули имитацию устройств, см. сведения о [развертывании имитации устройств](https://github.com/Azure/device-simulation-dotnet/blob/master/README.md) на сайте GitHub.

В этой статье предполагается, что имя акселератора решений — **contoso-simulation**. Замените **contoso-simulation** именем вашего акселератора решений, когда будете выполнять следующие шаги.

[!INCLUDE [cloud-shell-try-it.md](../../includes/cloud-shell-try-it.md)]

## <a name="create-a-consumer-group"></a>Создание группы потребителей

Вам необходимо создать выделенную группу потребителей в Центре Интернета вещей для потоковой передачи телеметрии в службу "Аналитика временных рядов". Источник событий в среде "Аналитика временных рядов Azure" должен иметь эксклюзивное использование группы потребителей Центра Интернета вещей.

На следующих шагах используется Azure CLI в Azure Cloud Shell, чтобы создать группу потребителей.

1. Центр Интернета вещей является одним из нескольких ресурсов, созданных при развертывании акселератора решений "Имитация устройств". Выполните следующую команду, чтобы найти имя своего Центра Интернета вещей. При этом не забудьте использовать имя своего акселератора решений.

    ```azurecli-interactive
    az resource list --resource-group contoso-simulation -o table
    ```

    Центр Интернета вещей является ресурсом типа **Microsoft.Devices/IotHubs**.

1. Добавьте группу потребителей с именем **devicesimulationtsi** в центр. В следующей команде используйте имя вашего центра и акселератора решений.

    ```azurecli-interactive
    az iot hub consumer-group create --hub-name contoso-simulation7d894 --name devicesimulationtsi --resource-group contoso-simulation
    ```

    Теперь Azure Cloud Shell можно закрыть.

## <a name="create-a-new-time-series-insights-environment"></a>Создание среды "Аналитика временных рядов"

Служба " [аналитика временных рядов Azure](../../articles/time-series-insights/time-series-insights-overview.md) " представляет собой полностью управляемую службу аналитики, хранения и визуализации для управления данными временных рядов Интернета вещей в облаке. Чтобы создать новую среду "Аналитики временных рядов", выполните следующие действия.

1. Войдите на [портал Azure](https://portal.azure.com/).

1. Выберите **создать ресурс**  >  **Интернет вещей**  >  "**аналитика временных рядов**":

    ![Новая среда "Аналитика временных рядов Azure"](./media/iot-accelerators-device-simulation-time-series-insights/new-time-series-insights.png)

1. Чтобы создать среду "Аналитика временных рядов" в той же группе ресурсов, что и ваш акселератор решений, используйте значения в следующей таблице.

    | Параметр | Значение |
    | ------- | ----- |
    | Имя среды | На следующем снимке экрана используется имя **Contoso-TSI**. Выберите собственное уникальное имя после завершения этого шага. |
    | Подписка | Выберите подписку Azure в раскрывающемся списке. |
    | Группа ресурсов | **contoso-simulation**. Используйте имя своего акселератора решений. |
    | Расположение | В этом примере используется **Восточная часть США**. Создайте среду в том же регионе, что и акселератор "Имитация устройств". |
    | Sku |**S1** |
    | Capacity | **1** |

    ![Создание среды Аналитики временных рядов](./media/iot-accelerators-device-simulation-time-series-insights/new-time-series-insights-create.png)

    > [!NOTE]
    > Добавление среды "Аналитика временных рядов Azure" в ту же группу ресурсов, что и акселератор решений, означает, что она будет удалена при удалении акселератора решений.

1. Нажмите кнопку **Создать**. Создание среды может занять несколько минут.

## <a name="create-event-source"></a>Создание источника событий

Создайте источник событий для подключения к Центру Интернета вещей. Используйте группу потребителей, созданную на предыдущих шагах. Для источника событий "Аналитики временных рядов" требуется, чтобы в каждой службе была выделенная группа потребителей, не используемая другой службой.

1. Перейдите к новой среде временных рядов на портале Azure.

1. В левой части экрана щелкните **Источники событий**.

    ![Просмотр источников событий](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-event-sources.png)

1. Нажмите кнопку **Добавить**.

    ![Добавление источника событий](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-event-sources-add.png)

1. Чтобы настроить Центр Интернета вещей в качестве нового источника событий, используйте значения в следующей таблице:

    | Параметр | Значение |
    | ------- | ----- |
    | Имя источника событий | На следующем снимке экрана используется имя **contoso-iot-hub**. Используйте собственное уникальное имя после завершения этого шага. |
    | Источник | **Центр Интернета вещей** |
    | Вариант импорта | **Использовать Центр Интернета вещей в доступных подписках** |
    | Идентификатор подписки | Выберите подписку Azure в раскрывающемся списке. |
    | Имя Центра Интернета вещей | **contoso-simulation7d894**. Используйте имя Центра Интернета вещей из акселератора решений "Имитация устройств". |
    | Имя политики Центра Интернета вещей | **iothubowner** |
    | Ключ политики Центра Интернета вещей | Это поле заполняется автоматически. |
    | Группа потребителей Центра Интернета вещей | **devicesimulationtsi** |
    | Формат сериализации событий | **JSON** |
    | Имя свойства для метки времени | Не указывайте |

    ![Создание источника событий](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-event-source-create.png)

1. Нажмите кнопку **Создать**.

> [!NOTE]
> Вы можете [предоставить другим пользователям доступ](../time-series-insights/concepts-access-policies.md#grant-data-access) к обозревателю среды "Аналитика временных рядов Azure".

## <a name="start-a-simulation"></a>Запуск имитации

Перед тем как использовать обозреватель службы "Аналитика временных рядов", настройте акселератор решений для имитации устройств, чтобы создать данные телеметрии. На следующем снимке экрана показана имитация с 10 холодильниками:

![Выполнение имитации устройств](./media/iot-accelerators-device-simulation-time-series-insights/running-simulation.png)

## <a name="time-series-insights-explorer"></a>Обозреватель службы "Аналитика временных рядов"

Обозреватель службы "Аналитика временных рядов" — веб-приложение, которое можно использовать, чтобы визуализировать данные телеметрии.

1. На портале Azure выберите вкладку **Обзор** для службы "Аналитика временных рядов".

1. Чтобы открыть веб-приложение обозревателя службы "Аналитика временных рядов", щелкните **Go to Environment** (Перейти к среде):

    ![Обозреватель службы "Аналитика временных рядов"](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-environment.png)

1. На панели выбора времени выберите **Последние 30 минут** в быстром меню времени и щелкните **Поиск**:

    ![Поиск в обозревателе службы "Аналитика временных рядов"](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-search-time.png)

1. На панели условий в левой части экрана выберите **температуру** в качестве **меры** и **iothub-connection-device-id** в качестве значения **Разделение по**:

    ![Снимок экрана, на котором показана панель "условия" аналитики временных рядов "с выделенными значениями" мера "и" разбиение по ".](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-query1.png)

1. Щелкните правой кнопкой мыши диаграмму и выберите пункт **Просмотр событий**.

    ![События в обозревателе службы "Аналитика временных рядов"](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-explore-events.png)

1. Данные событий отображаются в сетке:

    ![Таблица в обозревателе службы "Аналитика временных рядов"](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-table.png)

1. Нажмите кнопку представления "Перспектива".

    ![Представление "Перспектива" в обозревателе службы "Аналитика временных рядов"](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-explorer-perspective.png)

1. Щелкните **+** , чтобы добавить новый запрос в перспективу:

    ![Добавление запроса в обозревателе службы "Аналитика временных рядов"](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-new-query.png)

1. Выберите **Последние 30 минут** в качестве диапазона времени, **Влажность** в качестве **меры** и **iothub-connection-device-id** в качестве значения **Разделение по**:

    ![Запрос в обозревателе службы "Аналитика временных рядов"](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-query2.png)

1. Нажмите кнопку представления "Перспектива", чтобы просмотреть панель мониторинга данных телеметрии устройства.

    ![Панель мониторинга в обозревателе службы "Аналитика временных рядов"](./media/iot-accelerators-device-simulation-time-series-insights/time-series-insights-dashboard.png)

## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы планируете продолжить изучение, оставьте развертывание ускорителя решения.

Если средство Solution Accelerator больше не требуется, удалите его со страницы [подготовленные решения](https://www.azureiotsolutions.com/Accelerators#dashboard) , выбрав ее и нажав кнопку **удалить решение**.

Если вы добавили среду "Аналитика временных рядов" в группу ресурсов ускорителя решения, она автоматически удаляется при удалении ускорителя решения. В противном случае необходимо вручную удалить среду "Аналитика временных рядов" с портала Azure.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о том, как изучать и запрашивать данные в обозревателе службы "Аналитика временных рядов", см. в [этой статье](../time-series-insights/time-series-insights-explorer.md).