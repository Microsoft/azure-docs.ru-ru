---
title: Перенос приложений из служб BizTalk в Azure Logic Apps
description: Как переместить приложения и решения из службы BizTalk Microsoft Azure (MABS) в Azure Logic Apps
services: logic-apps
ms.suite: integration
author: jonfancey
ms.author: jonfan
ms.reviewer: estfan, logicappspm
ms.topic: article
ms.date: 05/30/2017
ms.openlocfilehash: 6c07ab4b18c017bd29723d2640129b8e67374e3c
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96023658"
---
# <a name="migrate-your-apps-and-solutions-from-biztalk-services-to-azure-logic-apps"></a>Перенос приложений и решений из служб BizTalk в Azure Logic Apps

Службы Microsoft Azure BizTalk Services (MABS) находятся на этапе прекращения использования. Чтобы переместить решения интеграции MABS в службу [Azure Logic Apps](../logic-apps/logic-apps-overview.md), выполните инструкции в этой статье. 

## <a name="introduction"></a>Введение

Службы BizTalk состоят из двух вложенных служб:

* гибридные подключения служб Microsoft BizTalk;
* интеграция на основе моста EAI и EDI.

[Гибридные подключения службы приложений Azure](../app-service/app-service-hybrid-connections.md) заменяют гибридные подключения служб BizTalk. Служба гибридных подключений Azure доступна со службой приложений Azure на портале Azure. Эта служба предоставляет Диспетчер гибридных подключений для управления имеющимися гибридными подключениями служб BizTalk и новыми гибридными подключениями, созданными на портале. 

Служба [Logic Apps](../logic-apps/logic-apps-overview.md) заменяет интеграцию на основе моста EAI и EDI и обеспечивает те же возможности, что и службы BizTalk, а также дополнительные функции. Эта служба предоставляет рабочий процесс масштабирования облака на основе потребления и возможности оркестрации, которые позволяют быстро создавать сложные решения интеграции с помощью браузера или Visual Studio.

В следующей таблице представлено сопоставление возможностей служб BizTalk и Logic Apps.

| Службы BizTalk   | Logic Apps            | Назначение                      |
| ------------------ | --------------------- | ---------------------------- |
| Соединитель          | Соединитель             | Отправка и получение данных   |
| Мост             | приложение логики;             | Обработчик конвейера           |
| Стадия проверки     | Действие проверки XML | Проверка соответствия XML-документа схеме | 
| Стадия добавления       | Маркеры данных           | Передача свойств в сообщения или в механизм принятия решений о маршрутизации |
| Стадия преобразования    | Действие преобразования      | Преобразование сообщений XML из одного формата в другой |
| Стадия декодирования       | Действие декодирования неструктурированного файла | Преобразование из неструктурированного файла в XML |
| Стадия кодирования       | Действие кодирования неструктурированного файла | Преобразование из XML в неструктурированный файл |
| Инспектор сообщений  | Функции Azure или приложения API | Запуск пользовательского кода в интеграции |
| Действия маршрутизации       | Условие или переключатель | Маршрутизация сообщений к одному из указанных соединителей |
|||| 

## <a name="biztalk-services-artifacts"></a>Артефакты служб BizTalk

В службах BizTalk имеются различные виды артефактов. 

## <a name="connectors"></a>Соединители

Соединители в службах BizTalk помогают мостам отправлять и получать данные, включая двусторонние мосты, поддерживающие взаимодействие типа "запрос — ответ" на основе HTTP. Logic Apps использует ту же терминологию и имеет сотни соединителей, которые служат одной и той же целью, подключаясь к широкому спектру технологий и служб. Например, соединители доступны для облачных служб SaaS и PaaS, таких как OneDrive, Office365, Dynamics CRM и т. д., а также локальных систем через локальный шлюз данных (вместо службы адаптера BizTalk для служб BizTalk). Источники в службах BizTalk ограничены FTP, SFTP и подпиской на очереди или разделы служебной шины.

![Схема, показывающая поток служб BizTalk.](media/logic-apps-move-from-mabs/sources.png)

По умолчанию каждому мосту назначена конечная точка HTTP, для которой настроены адрес времени выполнения и свойства относительного адреса моста. Те же возможности доступны через действие [запроса и ответа](../connectors/connectors-native-reqres.md) Logic Apps.

## <a name="xml-processing-and-bridges"></a>Обработка XML и мосты

Мост в службах BizTalk является аналогом конвейера обработки. Он может принимать данные, полученные из соединителя, и выполнять некоторые действия с ними, а затем отправлять результат в другую систему. Служба Logic Apps обеспечивает те же функции, поддерживая те же шаблоны взаимодействия на основе конвейера, что и службы BizTalk, а также предоставляя другие шаблоны интеграции. [Мост типа "запрос — ответ" XML](/previous-versions/azure/hh689781(v=azure.100)) в службах BizTalk называется конвейером VETER и состоит из стадий, выполняющих следующие задания:

* (V) — проверка,
* (E) — добавление,
* (T) — преобразование,
* (E) — добавление,
* (R) — маршрутизация.

На следующем рисунке показано, как обработка разбивается на запрос и ответ. Это позволяет контролировать пути запроса и ответа по отдельности (например, с помощью разных карт):

![Снимок экрана, показывающий, как разбивается обработка между запросом и ответом.](media/logic-apps-move-from-mabs/xml-request-reply.png)

Кроме того, односторонний мост XML добавляет стадии декодирования и кодирования в начале и конце обработки. Транзитный мост содержит одну стадию добавления.

### <a name="message-processing-decoding-and-encoding"></a>Обработка, декодирование и кодирование сообщений

В службах BizTalk вы можете получать разные типы XML-сообщений и определять соответствующие схемы. Это происходит на стадии *Типы сообщений* конвейера обработки получения. Затем на стадии декодирования обнаруженный тип сообщения используется для декодирования сообщения с помощью заданной схемы. Если схема является схемой неструктурированного файла, на этой стадии выполняется преобразование неструктурированного файла в XML. 

Служба Logic Apps обеспечивает аналогичные возможности. Служба получает неструктурированный файл через различные протоколы с помощью триггеров разных соединителей (файловая система, FTP, HTTP и т. д.) и использует действие [декодирования неструктурированного файла](../logic-apps/logic-apps-enterprise-integration-flatfile.md) для преобразования входных данных в XML. Вы можете переместить имеющиеся схемы неструктурированных файлов непосредственно в приложения логики без каких-либо изменений, а затем отправить схемы в вашу учетную запись интеграции.

### <a name="validation"></a>Проверка

После преобразования входных данных в XML (или при получении сообщения в формате XML) выполняется проверка на соответствие сообщения XSD-схеме. Для выполнения этого задания в службе Logic Apps используется действие [Проверка XML](../logic-apps/logic-apps-enterprise-integration-xml-validation.md). Вы можете использовать те же схемы служб BizTalk без изменений.

### <a name="transform-messages"></a>Преобразование сообщений

В службах BizTalk стадия преобразования преобразует один формат XML-сообщения в другой путем применения карты с помощью модуля сопоставления на основе TRFM. В Logic Apps используется аналогичный процесс. Действие преобразования выполняет карту из учетной записи интеграции. Основным различием является формат карт — в Logic Apps используется формат XSLT. Формат XSLT включает возможность повторного использования уже имеющегося XSLT-файла, включая карты, созданные для BizTalk Server, которые содержат функтоиды. 

### <a name="routing-rules"></a>Правила маршрутизации

Службы BizTalk принимают решение о маршрутизации входящих сообщений или данных в ту или иную конечную точку или соединитель. Вы можете выбрать одну из предварительно настроенных конечных точек с помощью параметра фильтра маршрутизации:

![Снимок экрана, на котором показан параметр фильтра маршрутизации.](media/logic-apps-move-from-mabs/route-filter.png)

Эффективное преобразование фильтров маршрутизации в службах BizTalk достигается с помощью *условия*, если существует только два варианта. Если существует больше двух вариантов, используется **переключатель**.

Служба Logic Apps предоставляет сложные возможности логики, а также расширенные функции управления потоком и маршрутизации благодаря [условным операторам](../logic-apps/logic-apps-control-flow-conditional-statement.md) и [операторам switch](../logic-apps/logic-apps-control-flow-switch-statement.md).

### <a name="enrich"></a>Добавление

На стадии добавления службы BizTalk в контекст сообщения, связанный с полученными данными, добавляют свойства. Например, повышая уровень свойства, используемого для маршрутизации из поиска по базе данных, или извлекая значение с помощью выражения XPath. Logic Apps предоставляет доступ ко всем выходным контекстным данным из предшествующих действий, что упрощает репликацию аналогичного поведения. Например, с помощью действия подключения SQL `Get Row` можно вернуть данные из базы данных SQL Server и использовать эти данные в действии принятия решений для маршрутизации. Аналогично, свойства входящих сообщений в очереди служебной шины, запускаемых триггером, являются адресуемыми, также как и XPath с помощью выражений языка определений рабочего процесса xpath.

### <a name="run-custom-code"></a>Выполнение пользовательского кода

Службы BizTalk позволяют [выполнять пользовательский код](/previous-versions/azure/dn232389(v=azure.100)), отправленный в собственные сборки. Эта функция реализуется с помощью интерфейса [IMessageInspector](). Каждая стадия моста содержит два свойства (On Enter Inspector и On Exit Inspector), предоставляющие созданный вами тип .NET, который реализует этот интерфейс. Пользовательский код позволяет осуществлять более сложную обработку данных, а также повторно использовать имеющийся код в сборках, которые выполняют общую бизнес-логику. 

Служба Logic Apps предоставляет два основных способа выполнения пользовательского кода: Функции Azure и приложения API. Функции Azure можно создавать и вызывать из приложений логики. См. статью [Добавление и выполнение пользовательского кода для приложений логики с помощью Функций Azure](../logic-apps/logic-apps-azure-functions.md). Приложения API, часть службы приложений Azure, можно использовать для создания собственных триггеров и действий. Дополнительные сведения см. в статье [Создание пользовательских API, которые можно вызывать из рабочих процессов приложения логики](../logic-apps/logic-apps-create-api-app.md). 

Если у вас есть пользовательский код в сборках, вызываемый из служб BizTalk, вы можете переместить этот код в Функции Azure или создать настраиваемые API с приложениями API — в зависимости от того, что необходимо реализовать. Например, если у вас есть код, служащий оболочкой для другой службы, для которой отсутствует соединитель Logic Apps, создайте приложение API и используйте действия, предоставляемые им в приложении логики. При наличии вспомогательных функций или библиотек можно рекомендовать использование Функций Azure.

### <a name="edi-processing-and-trading-partner-management"></a>Управление торговыми партнерами и обработка EDI

Службы BizTalk и Logic Apps включают обработку данных EDI и B2B с поддержкой AS2 (Applicability Statement 2), X12 и EDIFACT. В службах BizTalk вы создаете мосты EDI, торговых партнеров и соглашения или управляете ими на выделенном портале отслеживания и управления.
В Logic Apps эта функция входит в состав [пакета интеграции Enterprise](../logic-apps/logic-apps-enterprise-integration-overview.md). Он предоставляет [учетную запись интеграции](../logic-apps/logic-apps-enterprise-integration-create-integration-account.md) и действия B2B для обработки EDI и B2B. Вы можете использовать учетную запись интеграции для создания [торговых партнеров](../logic-apps/logic-apps-enterprise-integration-partners.md) и [соглашений](../logic-apps/logic-apps-enterprise-integration-agreements.md) и управления ими. Создав учетную запись интеграции, ее можно связать с одним или несколькими приложениями логики. После этого вы можете использовать действия B2B для доступа к информации о торговых партнерах в приложении логики. Поддерживаются следующие действия:

* Кодирование AS2
* Декодирование AS2
* Кодирование X12
* Декодирование X12
* Кодирование EDIFACT
* Декодирование EDIFACT

В отличие от служб BizTalk эти действия не связаны с транспортными протоколами. Поэтому при создании приложений логики вам доступно больше вариантов соединителей, которые используются для отправки и получения данных. Например, вы можете получать файлы X12 как вложения электронной почты, а затем обрабатывать эти файлы в приложении логики. 

## <a name="manage-and-monitor"></a>Управление и мониторинг

Выделенный портал служб BizTalk предоставлял возможности отслеживания для мониторинга и устранения неполадок. Logic Apps предоставляет более широкие возможности отслеживания и мониторинга для [мониторинга приложений логики в портал Azure](../logic-apps/monitor-logic-apps.md)и включает в себя мобильное приложение, позволяющее следить за тем, когда вы находитесь в процессе перемещения.

## <a name="high-availability"></a>Высокий уровень доступности

Для достижения высокой доступности (HA) в службах BizTalk вы можете использовать более одного экземпляра в конкретном регионе для распределения нагрузки обработки. Служба Logic Apps предоставляет высокий уровень доступности в регионе без отдельной оплаты. 

Для аварийного восстановления за пределами региона для обработки B2B в службах BizTalk необходимо реализовать процесс резервного копирования и восстановления. Для обеспечения непрерывности бизнес-процессов в службе Logic Apps предоставляется [возможность активного или пассивного аварийного восстановления](../logic-apps/logic-apps-enterprise-integration-b2b-business-continuity.md) в разных регионах. Это позволяет выполнять синхронизацию данных B2B в учетных записях интеграции в разных регионах.

## <a name="next-steps"></a>Дальнейшие действия

* [Что такое Logic Apps?](../logic-apps/logic-apps-overview.md)
* [Создайте свое первое приложение логики](../logic-apps/quickstart-create-first-logic-app-workflow.md) или приступите к работе, используя [готовый шаблон](../logic-apps/logic-apps-create-logic-apps-from-templates.md).  
* [Просмотрите список всех доступных соединителей](../connectors/apis-list.md), которые можно использовать в приложениях логики.