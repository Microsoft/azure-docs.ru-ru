---
title: Выполнение операций с данными
description: Преобразование, управление и работа с выводами и форматами данных в Azure Logic Apps
services: logic-apps
ms.suite: integration
ms.reviewer: klam, logicappspm
ms.topic: article
ms.date: 09/20/2019
ms.openlocfilehash: baa6e5732221d120ff71217a3a86a942794c53f4
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "84710377"
---
# <a name="perform-data-operations-in-azure-logic-apps"></a>Выполнение операций с данными в Azure Logic Apps

В этой статье описано работу с данными в приложениях логики, добавляя действия для этих задач, и многое другое.

* Создание таблиц из массивов.
* Создание массивов из других массивов на основе условия.
* Создание удобного маркера безопасности из свойств объекта нотации объектов JavaScript (JSON), чтобы можно было легко использовать эти свойства в рабочем процессе.

Если вы не нашли нужное действие, попробуйте просмотреть множество различных [функций обработки данных](../logic-apps/workflow-definition-language-functions-reference.md) , которые Azure Logic Apps предоставляет.

Эти таблицы суммируют операции с данными, которые можно использовать. Они организованы на основе исходных типов данных, над которыми работают операции, но каждое описание отображается в алфавитном порядке.

**Действия массива** 

Эти действия помогают работать с массивами данных.

| Действие | Описание |
|--------|-------------|
| [**Создать таблицу CSV**](#create-csv-table-action) | Создание таблицы значений с разделителями-запятыми (CSV) из массива. |
| [**Создать таблицу HTML**](#create-html-table-action) | Создание таблицы HTML из массива. |
| [**Фильтрация массива**](#filter-array-action) | Создание подмножества массива из массива на основе указанного фильтра или условия. |
| [**К**](#join-action) | Создание строки из всех элементов массива и разделение этих элементов указанным разделителем. |
| [**Выберите пункт**](#select-action) | Создание массива из указанных свойств для всех элементов в другом массиве. |
||| 

**Действия JSON**

Эти действия помогают работать с данными в формате нотации объектов JavaScript (JSON).

| Действие | Описание |
|--------|-------------|
| [**Docker Compose**](#compose-action) | Создание сообщения или строки из нескольких наборов входных данных, которые могут иметь разные типы данных. Затем можно использовать эту строку как единый ввод данных, а не повторно вводить одни и те же данные. Например, можно создать одно сообщение JSON с разных входных данных. |
| [**Анализ JSON**](#parse-json-action) | Создание удобных маркеров данных для свойств в содержимом JSON, чтобы можно было более легко использовать свойства в приложениях логики. |
|||

Чтобы создать более сложные преобразования JSON, см. раздел [Выполнение сложных преобразований JSON с помощью шаблона Liquid](../logic-apps/logic-apps-enterprise-integration-liquid-transform.md).

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас нет ее, вы можете [зарегистрироваться для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* Приложение логики, в котором будет проводиться операция работы с данными

  Если вы не знакомы с приложениями логики, ознакомьтесь с [Azure Logic Apps?](../logic-apps/logic-apps-overview.md) и [Краткое руководство. Создание первого приложения логики](../logic-apps/quickstart-create-first-logic-app-workflow.md).

* [Триггер](../logic-apps/logic-apps-overview.md#logic-app-concepts) в качестве первого шага приложения логики 

  Операции с данными доступны только как действия, поэтому, прежде чем использовать эти действия, запустите приложение логики с помощью триггера и включите любые другие действия, необходимые для создания желаемых результатов.

<a name="compose-action"></a>

## <a name="compose-action"></a>Действие compose

Чтобы создать один выход, например объект JSON из нескольких входов, можно использовать действие **создать** . Входные данные могут иметь различные типы, такие как целые числа, логические значения, массивы, объекты JSON и любой другой собственный тип, поддерживаемый Azure Logic Apps, например двоичный и XML. Затем можно использовать выходные данные в следующих действиях после действия **Создать**. Действие **Создать** также может спасти вас от повторного ввода одних и тех же данных при создании рабочего процесса приложения логики.

Например, можно создать сообщение JSON из нескольких переменных, таких как строковые переменные, в которых хранятся имена и фамилии людей, и целочисленной переменной, которая хранит возраст людей. Здесь действие **Создать** принимает следующие входные данные.

`{ "age": <ageVar>, "fullName": "<lastNameVar>, <firstNameVar>" }`

И создает выходные данные.

`{"age":35,"fullName":"Owens,Sophie"}`

Чтобы выполнить пример, следующие шаги делайте с помощью конструктора приложений логики. Если же вы предпочитаете работать в редакторе просмотра кода, можно скопировать пример определений **Создать** и действия **Инициализировать переменную** из этой статьи в определение рабочего процесса вашего собственного приложения логики. [Примеры кода операций данных — Действие "Создать"](../logic-apps/logic-apps-data-operations-code-samples.md#compose-action-example) 

1. На [портале Azure](https://portal.azure.com) или в Visual Studio откройте приложение логики в конструкторе приложений логики.

   В этом примере используется портал Azure и приложение логики с триггером **Повторение** и несколькими действиями **Инициализировать переменную**. Эти действия настроены для создания двух строковых и целочисленной переменных. Если протестировать приложение логики позже, можно запустить приложение вручную, не дожидаясь запуска триггера.

   ![Запуск примера приложения логики для действия "составление"](./media/logic-apps-perform-data-operations/sample-starting-logic-app-compose-action.png)

1. В приложении логики, где необходимо создать выходные данные, выполните один из следующих шагов. 

   * Чтобы добавить действие на последнем шаге, выберите **новый шаг**.

     ![Выберите "новый шаг" для действия "создание"](./media/logic-apps-perform-data-operations/add-compose-operation-action.png)

   * Чтобы добавить действие между шагами, наведите указатель мыши на стрелку соединения, чтобы появился знак «плюс» ( **+** ). Щелкните знак «плюс», а затем выберите **Добавить действие**.

1. В разделе **Выберите действие** введите фильтр `compose` в поле поиска. В списке действия выберите действие **создать** .

   ![Выбор действия "Создать"](./media/logic-apps-perform-data-operations/select-compose-action.png)

1. В поле **Входные данные** укажите входные данные, необходимые для создания вывода.

   Если щелкнуть в этом примере поле **Входные данные**, появится список динамического содержимого, поэтому можно выбрать ранее созданные переменные.

   ![Выберите входные данные, которые будут использоваться для действия "создание"](./media/logic-apps-perform-data-operations/configure-compose-action.png)

   Ниже приведен готовый пример действия **Создать**. 

   ![Завершенный пример для действия "создание"](./media/logic-apps-perform-data-operations/finished-compose-action.png)

1. Сохраните приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

Дополнительные сведения об этом действии в определении базового процесса см. в разделе [Действие "Создать"](../logic-apps/logic-apps-workflow-actions-triggers.md#compose-action).

### <a name="test-your-logic-app"></a>Тестирование приложения логики

Чтобы подтвердить, что действие **Создать** создает ожидаемые результаты, отправьте уведомление, которое включает выходные данные действия **Создать**.

1. В приложении логики добавьте действие, которое может отправить результаты из действия **Создать**.

1. В этом действии щелкните в любом месте, чтобы отобразились результаты. Когда откроется список динамического содержимого, в действии **Создать** выберите **Выходные данные**.

   В этом примере используется действие **Отправить сообщение электронной почты** с указанием полей **вывода** в тексте сообщения электронной почты и темы:

   ![Поля выходных данных для действия "создание"](./media/logic-apps-perform-data-operations/send-email-compose-action.png)

1. Теперь вручную запустите приложение логики. На панели инструментов конструктора выберите **выполнить**.

   Ниже приведены результаты, основанные на используемом соединителе электронной почты.

   ![Электронная почта с результатами действия "Создать"](./media/logic-apps-perform-data-operations/compose-email-results.png)

<a name="create-csv-table-action"></a>

## <a name="create-csv-table-action"></a>Действие "Создать таблицу CSV"

Чтобы создать таблицу значений с разделителями-запятыми (CSV) со свойствами и значениями из объектов нотация объектов JavaScript (JSON) в массиве, используйте действие **создать таблицу CSV** . Затем можно использовать итоговую таблицу в действиях, которые следуют за действием **Создать таблицу CSV**.

Если же вы предпочитаете работать в редакторе просмотра кода, можно скопировать пример определений **Создать таблицу CSV** и **инициализировать переменные** из этой статьи в определение рабочего процесса вашего собственного приложения логики. [Примеры кода операций данных — Действие "Создать таблицу CSV"](../logic-apps/logic-apps-data-operations-code-samples.md#create-csv-table-action-example)

1. На [портале Azure](https://portal.azure.com) или в Visual Studio откройте приложение логики в конструкторе приложений логики.

   В этом примере используется портал Azure и логическое приложение с триггером **Повторение** и действием **Инициализация переменной**. Действие настроено для создания переменной, начальным значением которой является массив, который имеет некоторые свойства и значения в формате JSON. Если протестировать приложение логики позже, можно запустить приложение вручную, не дожидаясь запуска триггера.

   ![Запуск примера приложения логики для действия "Создание таблицы CSV"](./media/logic-apps-perform-data-operations/sample-starting-logic-app-create-table-action.png)

1. В приложении логики, где необходимо создать таблицу CSV, выполните один из следующих шагов. 

   * Чтобы добавить действие на последнем шаге, выберите **новый шаг**.

     ![Выберите "новый шаг" для действия "создать таблицу CSV"](./media/logic-apps-perform-data-operations/add-create-table-action.png)

   * Чтобы добавить действие между шагами, наведите указатель мыши на стрелку соединения, чтобы появился знак «плюс» ( **+** ). Щелкните знак «плюс», а затем выберите **Добавить действие**.

1. В разделе **Выберите действие** введите фильтр `create csv table` в поле поиска. В списке действия выберите действие **создать таблицу CSV** .

   ![Выбор действия "Создать таблицу CSV"](./media/logic-apps-perform-data-operations/select-create-csv-table-action.png)

1. В поле **From** (От) укажите массив или выражение для создания таблицы.

   Если щелкнуть в этом примере поле **From** (От), появится список динамического содержимого, поэтому можно выбрать ранее созданную переменную.

   ![Выбор массива выходных данных для создания таблицы CSV](./media/logic-apps-perform-data-operations/configure-create-csv-table-action.png)

   > [!TIP]
   > Чтобы создать удобные токены для свойств в объектах JSON, можно выбрать эти свойства в качестве входных данных, используя [Анализ JSON](#parse-json-action) перед вызовом действия **Создать таблицу CSV**.

   Ниже приведен готовый пример действия **Создать таблицу CSV**. 

   ![Завершен пример действия "Создание таблицы CSV"](./media/logic-apps-perform-data-operations/finished-create-csv-table-action.png)

1. Сохраните приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

### <a name="customize-table-format"></a>Настройка формата таблицы

По умолчанию свойство **Columns** установлено на автоматическое создание столбцов таблицы на основе элементов массива. Чтобы указать пользовательские заголовки и значения, выполните следующие действия.

1. Откройте список **столбцы** и выберите **Пользовательский**.

1. В свойстве **заголовок** укажите текст настраиваемого заголовка для использования.

1. В свойстве **значение** укажите пользовательское значение, которое будет использоваться вместо этого.

Для возврата значений из массива можно использовать [ `item()` функцию](../logic-apps/workflow-definition-language-functions-reference.md#item) с действием **создать таблицу CSV** . В `For_each` цикле можно использовать [ `items()` функцию](../logic-apps/workflow-definition-language-functions-reference.md#items).

Например, предположим, что требуется, чтобы столбцы таблицы имели только значения свойств, а не имена свойств из массива. Чтобы получить только эти значения, выполните следующие действия для работы в режиме конструктора или в представлении кода. В этом примере возвращается результат:

```text
Apples,1
Oranges,2
```

#### <a name="work-in-designer-view"></a>Работа в представлении конструктора

В действии не оставляйте столбец **заголовков** пустым. Для каждой строки в столбце **значение** следует отменять ссылку на каждое нужное свойство массива. Каждая строка в разделе **value** возвращает все значения для указанного свойства массива и преобразуется в столбец в таблице.

1. В разделе **значение** в каждой строке щелкните поле редактирования, чтобы появился список динамического содержимого.

1. В списке динамического содержимого выберите **Выражение**.

1. В редакторе выражений введите это выражение, которое указывает нужное значение свойства массива, и нажмите кнопку **ОК**.

   `item()?['<array-property-name>']`

   Пример:

   * `item()?['Description']`
   * `item()?['Product_ID']`

   ![Разыменование "Описание" для "создания таблицы CSV"](./media/logic-apps-perform-data-operations/csv-table-expression.png)

1. Повторите предыдущие шаги для каждого нужного свойства массива. Когда все будет готово, действие будет выглядеть, как в следующем примере:

   ![Функция Item () в "Create CSV Table"](./media/logic-apps-perform-data-operations/finished-csv-expression.png)

1. Чтобы разрешить выражения в более описательных версиях, переключитесь в представление кода и обратно в представление конструктора, а затем снова откройте свернутое действие:

   Действие **создать таблицу CSV** теперь выглядит как в следующем примере:

   !["Создание таблицы CSV" — разрешенные выражения без заголовков](./media/logic-apps-perform-data-operations/resolved-csv-expression.png)

#### <a name="work-in-code-view"></a>Работа в представлении кода

В определении JSON действия в `columns` массиве присвойте `header` свойству пустую строку. Для каждого свойства отменяйте `value` ссылку на каждое нужное свойство массива.

1. На панели инструментов конструктора выберите **представление кода**.

1. В редакторе кода в `columns` массиве действия добавьте пустое `header` свойство и это `value` выражение для каждого столбца нужных значений массива:

   ```json
   {
      "header": "",
      "value": "@item()?['<array-property-name>']"
   }
   ```

   Пример:

   ```json
   "Create_CSV_table": {
      "inputs": {
         "columns": [
            { 
               "header": "",
               "value": "@item()?['Description']"
            },
            { 
               "header": "",
               "value": "@item()?['Product_ID']"
            }
         ],
         "format": "CSV",
         "from": "@variables('myJSONArray')"
      }
   }
   ```

1. Переключитесь обратно в представление конструктора и снова откройте свернутое действие.

   Действие **создать таблицу CSV** теперь отображается как этот пример, и выражения разрешаются в более описательных версиях:

   !["Создание таблицы CSV"-разрешенные выражения без заголовков](./media/logic-apps-perform-data-operations/resolved-csv-expression.png)

Дополнительную информацию об этом действии в определении базового процесса см. в разделе [Действие таблицы](../logic-apps/logic-apps-workflow-actions-triggers.md#table-action).

### <a name="test-your-logic-app"></a>Тестирование приложения логики

Чтобы подтвердить, что действие **Создать таблицу CSV** создает ожидаемые результаты, отправьте уведомление, которое включает в себя выходные данные действия **Создать таблицу CSV**.

1. В приложении логики добавьте действие, которое может отправить результаты из действия **Создать таблицу CSV**.

1. В этом действии щелкните в любом месте, чтобы отобразились результаты. Когда откроется список динамического содержимого, в действии **Создать таблицу CSV** выберите **Выходные данные**. 

   В этом примере используется действие Office 365 Outlook **Send a e-mail** и включается поле **Output** в текст сообщения электронной почты:

   ![Поля вывода для действия "Создание таблицы CSV"](./media/logic-apps-perform-data-operations/send-email-create-csv-table-action.png)

1. Теперь вручную запустите приложение логики. На панели инструментов конструктора выберите **выполнить**.

   Ниже приведены результаты, основанные на используемом соединителе электронной почты.

   ![Электронная почта с результатами действия "Создать таблицу CSV"](./media/logic-apps-perform-data-operations/create-csv-table-email-results.png)

<a name="create-html-table-action"></a>

## <a name="create-html-table-action"></a>Действие "Создать таблицу HTML"

Чтобы создать HTML-таблицу со свойствами и значениями из объектов нотация объектов JavaScript (JSON) в массиве, используйте действие **создать таблицу HTML** . Затем можно использовать итоговую таблицу в действиях, которые следуют за действием **Создать таблицу HTML**.

Если же вы предпочитаете работать в редакторе просмотра кода, можно скопировать пример определений **Создать таблицу HTML** и **инициализировать переменные** из этой статьи в определение рабочего процесса вашего собственного приложения логики. [Примеры кода операций данных — действие "Создать таблицу HTML"](../logic-apps/logic-apps-data-operations-code-samples.md#create-html-table-action-example) 

1. На [портале Azure](https://portal.azure.com) или в Visual Studio откройте приложение логики в конструкторе приложений логики.

   В этом примере используется портал Azure и логическое приложение с триггером **Повторение** и действием **Инициализация переменной**. Действие настроено для создания переменной, начальным значением которой является массив, который имеет некоторые свойства и значения в формате JSON. Если протестировать приложение логики позже, можно запустить приложение вручную, не дожидаясь запуска триггера.

   ![Запуск примера приложения логики для создания таблицы HTML](./media/logic-apps-perform-data-operations/sample-starting-logic-app-create-table-action.png)

1. В приложении логики, где необходимо создать таблицу HTML, выполните один из следующих шагов.

   * Чтобы добавить действие на последнем шаге, выберите **новый шаг**.

     ![Выберите "новый шаг" для действия "создать таблицу HTML"](./media/logic-apps-perform-data-operations/add-create-table-action.png)

   * Чтобы добавить действие между шагами, наведите указатель мыши на стрелку соединения, чтобы появился знак «плюс» ( **+** ). Щелкните знак «плюс», а затем выберите **Добавить действие**.

1. В разделе **Выберите действие** введите фильтр `create html table` в поле поиска. В списке действия выберите действие **создать таблицу HTML** .

   ![Выбор действия "Создать таблицу HTML"](./media/logic-apps-perform-data-operations/select-create-html-table-action.png)

1. В поле **From** (От) укажите массив или выражение для создания таблицы.

   Если щелкнуть в этом примере поле **From** (От), появится список динамического содержимого, поэтому можно выбрать ранее созданную переменную.

   ![Выбор массива выходных данных для создания таблицы HTML](./media/logic-apps-perform-data-operations/configure-create-html-table-action.png)

   > [!TIP]
   > Чтобы создать удобные токены для свойств в объектах JSON, можно выбрать эти свойства в качестве входных данных, используя [Анализ JSON](#parse-json-action) перед вызовом **Создать таблицу HTML**.

   Ниже приведен готовый пример действия **Создать таблицу HTML**.

   ![Завершен пример для "Create HTML table"](./media/logic-apps-perform-data-operations/finished-create-html-table-action.png)

1. Сохраните приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

### <a name="customize-table-format"></a>Настройка формата таблицы

По умолчанию свойство **Columns** установлено на автоматическое создание столбцов таблицы на основе элементов массива. Чтобы указать пользовательские заголовки и значения, выполните следующие действия.

1. Откройте список **столбцы** и выберите **Пользовательский**.

1. В свойстве **заголовок** укажите текст настраиваемого заголовка для использования.

1. В свойстве **значение** укажите пользовательское значение, которое будет использоваться вместо этого.

Для возврата значений из массива можно использовать [ `item()` функцию](../logic-apps/workflow-definition-language-functions-reference.md#item) с действием **создать таблицу HTML** . В `For_each` цикле можно использовать [ `items()` функцию](../logic-apps/workflow-definition-language-functions-reference.md#items).

Например, предположим, что требуется, чтобы столбцы таблицы имели только значения свойств, а не имена свойств из массива. Чтобы получить только эти значения, выполните следующие действия для работы в режиме конструктора или в представлении кода. В этом примере возвращается результат:

```text
Apples,1
Oranges,2
```

#### <a name="work-in-designer-view"></a>Работа в представлении конструктора

В действии не оставляйте столбец **заголовков** пустым. Для каждой строки в столбце **значение** следует отменять ссылку на каждое нужное свойство массива. Каждая строка в разделе **value** возвращает все значения для указанного свойства и преобразуется в столбец в таблице.

1. В разделе **значение** в каждой строке щелкните поле редактирования, чтобы появился список динамического содержимого.

1. В списке динамического содержимого выберите **Выражение**.

1. В редакторе выражений введите это выражение, которое указывает нужное значение свойства массива, и нажмите кнопку **ОК**.

   `item()?['<array-property-name>']`

   Пример:

   * `item()?['Description']`
   * `item()?['Product_ID']`

   ![Разыменование свойства в действии "Создание HTML-таблицы"](./media/logic-apps-perform-data-operations/html-table-expression.png)

1. Повторите предыдущие шаги для каждого нужного свойства массива. Когда все будет готово, действие будет выглядеть, как в следующем примере:

   ![Функция Item () в "Create HTML table"](./media/logic-apps-perform-data-operations/finished-html-expression.png)

1. Чтобы разрешить выражения в более описательных версиях, переключитесь в представление кода и обратно в представление конструктора, а затем снова откройте свернутое действие:

   Действие **создать таблицу HTML** теперь выглядит как в следующем примере:

   !["Создание таблицы HTML" — разрешенные выражения без заголовков](./media/logic-apps-perform-data-operations/resolved-html-expression.png)

#### <a name="work-in-code-view"></a>Работа в представлении кода

В определении JSON действия в `columns` массиве присвойте `header` свойству пустую строку. Для каждого свойства отменяйте `value` ссылку на каждое нужное свойство массива.

1. На панели инструментов конструктора выберите **представление кода**.

1. В редакторе кода в `columns` массиве действия добавьте пустое `header` свойство и это `value` выражение для каждого столбца нужных значений массива:

   ```json
   {
      "header": "",
      "value": "@item()?['<array-property-name>']"
   }
   ```

   Пример:

   ```json
   "Create_HTML_table": {
      "inputs": {
         "columns": [
            { 
               "header": "",
               "value": "@item()?['Description']"
            },
            { 
               "header": "",
               "value": "@item()?['Product_ID']"
            }
         ],
         "format": "HTML",
         "from": "@variables('myJSONArray')"
      }
   }
   ```

1. Переключитесь обратно в представление конструктора и снова откройте свернутое действие.

   Действие **создать таблицу HTML** теперь отображается как этот пример, и выражения разрешаются в более описательных версиях:

   !["Создание таблицы HTML" — разрешенные выражения без заголовков](./media/logic-apps-perform-data-operations/resolved-html-expression.png)

Дополнительную информацию об этом действии в определении базового процесса см. в разделе [Действие таблицы](../logic-apps/logic-apps-workflow-actions-triggers.md#table-action).

### <a name="test-your-logic-app"></a>Тестирование приложения логики

Чтобы подтвердить, что действие **Создать таблицу HTML** создает ожидаемые результаты, отправьте уведомление, которое включает выходные данные из действия **Создать таблицу HTML**.

1. В приложении логики добавьте действие, которое может отправить результаты из действия **Создать таблицу HTML**.

1. В этом действии щелкните в любом месте, чтобы отобразились результаты. Когда откроется список динамического содержимого, в действии **Создать таблицу HTML** выберите **Выходные данные**. 

   В этом примере используется действие Office 365 Outlook **Send a e-mail** и включается поле **Output** в текст сообщения электронной почты:

   ![Поля "выходные данные" для "Создание таблицы HTML"](./media/logic-apps-perform-data-operations/send-email-create-html-table-action.png)

   > [!NOTE]
   > При включении выходных данных таблицы HTML в действие электронной почты убедитесь, что установлено свойству **Is HTML** (Является HTML) значение **Да** в расширенных параметрах действия электронной почты. Таким образом, действие электронной почты правильно форматирует таблицу HTML.

1. Теперь вручную запустите приложение логики. На панели инструментов конструктора выберите **выполнить**.

   Ниже приведены результаты, основанные на используемом соединителе электронной почты.

   ![Сообщение электронной почты с результатами "создать таблицу HTML"](./media/logic-apps-perform-data-operations/create-html-table-email-results.png)

<a name="filter-array-action"></a>

## <a name="filter-array-action"></a>Действие "Фильтр массива"

Чтобы создать массив меньшего размера, содержащий элементы, соответствующие определенным критериям, из существующего массива используйте действие **Фильтрация массива** . Затем можно использовать отфильтрованный массив в действиях, следующих за действием **Фильтр массива**.

> [!NOTE]
> Любой текст фильтра, используемый в условии, чувствителен к регистру. Кроме того, действие не может изменить формат или компоненты элементов в массиве. 
> 
> Действия использования выходного массива, полученного из действия **Фильтр массива**, должны принимать эти массивы как входные данные, либо придется преобразовать выходной массив в другой совместимый формат.
> 
> Если вы вызываете конечную точку HTTP и получаете ответ JSON, используйте действие **Parse JSON** для обработки ответа JSON. 
> В противном случае действие **Фильтрация массива** может считывать только текст ответа, а не структуру полезных данных JSON.

Если же вы предпочитаете работать в редакторе просмотра кода, можно скопировать пример определений **Фильтр массива** и **инициализировать переменные** из этой статьи в определение рабочего процесса вашего собственного приложения логики. [Примеры кода операций данных — действие "Фильтр массива"](../logic-apps/logic-apps-data-operations-code-samples.md#filter-array-action-example)

1. На [портале Azure](https://portal.azure.com) или в Visual Studio откройте приложение логики в конструкторе приложений логики.

   В этом примере используется портал Azure и логическое приложение с триггером **Повторение** и действием **Инициализация переменной**. Действие настроено для создания переменной, начальным значением которой является массив, который имеет некоторые образцы целых чисел. Если протестировать приложение логики позже, можно запустить приложение вручную, не дожидаясь запуска триггера.

   > [!NOTE]
   > Хотя в этом примере используется простой целочисленный массив, это действие особенно полезно для массивов объектов JSON, где можно фильтровать на основе свойств и значений объектов.

   ![Запуск примера приложения логики для действия "Фильтрация массива"](./media/logic-apps-perform-data-operations/sample-starting-logic-app-filter-array-action.png)

1. В приложении логики, где необходимо создать отфильтрованный массив, выполните один из следующих шагов. 

   * Чтобы добавить действие на последнем шаге, выберите **новый шаг**.

     ![Выберите "новый шаг" для действия "фильтровать массив"](./media/logic-apps-perform-data-operations/add-filter-array-action.png)

   * Чтобы добавить действие между шагами, наведите указатель мыши на стрелку соединения, чтобы появился знак «плюс» ( **+** ). Щелкните знак «плюс», а затем выберите **Добавить действие**.

1. В поле поиска введите `filter array` в качестве фильтра. В списке действия выберите действие **Фильтрация массива** .

   ![Выбор действия "Фильтр массива"](./media/logic-apps-perform-data-operations/select-filter-array-action.png)

1. В поле **From** (От) укажите массив или выражение для фильтра.

   Если щелкнуть в этом примере поле **From** (От), появится список динамического содержимого, поэтому можно выбрать ранее созданную переменную.

   ![Выбор массива выходных данных для создания отфильтрованного массива](./media/logic-apps-perform-data-operations/configure-filter-array-action.png)

1. Для создания условия укажите элементы массива для сравнения, выберите оператор сравнения и укажите значение для сравнения.

   В этом примере используется `item()` функция для доступа к каждому элементу в массиве, в то время как действие **фильтра массив** выполняет поиск элементов массива, значение которых больше единицы:

   ![Завершен пример действия "Фильтрация массива"](./media/logic-apps-perform-data-operations/finished-filter-array-action.png)

1. Сохраните приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

Дополнительную информацию об этом действии в определении базового процесса см. в разделе [Действие запроса](../logic-apps/logic-apps-workflow-actions-triggers.md#query-action).

### <a name="test-your-logic-app"></a>Тестирование приложения логики

Чтобы подтвердить, что действие **Фильтр массива** создает ожидаемые результаты, отправьте уведомление, которое включает в себя выходные данные из действия **Фильтр массива**.

1. В приложении логики добавьте действие, которое может отправить результаты из действия **Фильтр массива**.

1. В этом действии щелкните в любом месте, чтобы отобразились результаты. Когда откроется список динамического содержимого, выберите **выражение**. Чтобы получить выходные данные массива из действия **Фильтр массива**, введите выражение, которое включает имя действия **Фильтр массива**.

   `@actionBody('Filter_array')`

   В этом примере используется действие Outlook **Отправить сообщение электронной почты** с помощью Office 365 и включает выходные данные из выражения **актионбоди (' Filter_array ')** в тексте сообщения электронной почты:

   ![Выходные данные действия из действия "Фильтрация массива"](./media/logic-apps-perform-data-operations/send-email-filter-array-action.png)

1. Теперь вручную запустите приложение логики. На панели инструментов конструктора выберите **выполнить**.

   Ниже приведены результаты, основанные на используемом соединителе электронной почты.

   ![Электронная почта с результатами действия "Фильтр массива"](./media/logic-apps-perform-data-operations/filter-array-email-results.png)

<a name="join-action"></a>

## <a name="join-action"></a>Действие "Соединить"

Чтобы создать строку, которая содержит все элементы из массива и отделять эти элементы конкретным символом-разделителем, используйте действие **Join** . Затем можно использовать выходные данные в следующих действиях после действия **Соединить**.

Если же вы предпочитаете работать в редакторе просмотра кода, можно скопировать пример определений **Соединить** и действие **Инициализация переменной** из этой статьи в определение рабочего процесса вашего собственного приложения логики. [Примеры кода операций данных — действие "Соединить"](../logic-apps/logic-apps-data-operations-code-samples.md#join-action-example)

1. На [портале Azure](https://portal.azure.com) или в Visual Studio откройте приложение логики в конструкторе приложений логики.

   В этом примере используется портал Azure и логическое приложение с триггером **Повторение** и действием **Инициализация переменной**. Это действие настроено для создания переменной, начальным значением которой является массив, который имеет некоторые образцы целых чисел. Если протестировать приложение логики позже, можно запустить приложение вручную, не дожидаясь запуска триггера.

   ![Запуск примера приложения логики для действия "присоединение"](./media/logic-apps-perform-data-operations/sample-starting-logic-app-join-action.png)

1. В приложении логики, где необходимо создать строку из массива, выполните один из следующих шагов.

   * Чтобы добавить действие на последнем шаге, выберите **новый шаг**.

     ![Сселект "новый шаг" для действия "присоединение"](./media/logic-apps-perform-data-operations/new-step-add-join-action.png)

   * Чтобы добавить действие между шагами, наведите указатель мыши на стрелку соединения, чтобы появился знак «плюс» ( **+** ). Щелкните знак «плюс», а затем выберите **Добавить действие**.

1. В поле поиска введите `join` в качестве фильтра. В списке действий выберите действие **Соединить**.

   ![Выбор действия "присоединить"](./media/logic-apps-perform-data-operations/select-join-operation-action.png)

1. В поле **From** (От) укажите массив, в котором есть элементы, которые необходимо присоединить к строке.

   Если щелкнуть в этом примере поле **From** (От), появится список динамического содержимого, поэтому можно выбрать ранее созданную переменную.  

   ![Выбор массива выходных данных для создания строки](./media/logic-apps-perform-data-operations/configure-join-action.png)

1. В поле **Присоединить к** введите символ, который необходимо использовать для разделения каждого элемента массива. 

   В этом примере как разделитель используется двоеточие (:).

   ![Указание знака разделителя](./media/logic-apps-perform-data-operations/finished-join-action.png)

1. Сохраните приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

Дополнительную информацию об этом действии в определении базового процесса см. в разделе [Действие "Соединить"](../logic-apps/logic-apps-workflow-actions-triggers.md#join-action).

### <a name="test-your-logic-app"></a>Тестирование приложения логики

Чтобы подтвердить, что действие **Соединить** создает ожидаемые результаты, отправьте уведомление, которое включает выходные данные из действия **Соединить**.

1. В приложении логики добавьте действие, которое может отправить результаты из действия **Соединить**.

1. В этом действии щелкните в любом месте, чтобы отобразились результаты. Когда откроется список динамического содержимого, в действии **Соединить** выберите **Выходные данные**. 

   В этом примере используется действие Office 365 Outlook **Send a e-mail** и включается поле **Output** в текст сообщения электронной почты:

   ![Поля выходных данных для действия "присоединение"](./media/logic-apps-perform-data-operations/send-email-join-action.png)

1. Теперь вручную запустите приложение логики. На панели инструментов конструктора выберите **выполнить**.

   Ниже приведены результаты, основанные на используемом соединителе электронной почты.

   ![Электронная почта с результатами действия "Соединить"](./media/logic-apps-perform-data-operations/join-send-email-results.png)

<a name="parse-json-action"></a>

## <a name="parse-json-action"></a>Действие "Анализ JSON"

Для ссылки на свойства или доступа к ним в нотация объектов JavaScript (JSON) можно создать понятные пользователю поля или токены для этих свойств с помощью действия " **анализ JSON** ". Таким образом, можно выбрать свойства из списка динамического содержимого при указании входных данных приложения логики. Для этого действия можно либо предоставить схему JSON, либо создать схему JSON из образца содержимого JSON или полезных данных.

Если же вы предпочитаете работать в редакторе просмотра кода, можно скопировать пример определений **Анализ JSON** и действие **Инициализация переменной** из этой статьи в определение рабочего процесса вашего собственного приложения логики. [Примеры кода операций данных — действие "Анализ JSON"](../logic-apps/logic-apps-data-operations-code-samples.md#parse-json-action-example)

1. На [портале Azure](https://portal.azure.com) или в Visual Studio откройте приложение логики в конструкторе приложений логики.

   В этом примере используется портал Azure и логическое приложение с триггером **Повторение** и действием **Инициализация переменной**. Действие настроено для создания переменной, начальным значением которой является объект JSON, который имеет свойства и значения. Если протестировать приложение логики позже, можно запустить приложение вручную, не дожидаясь запуска триггера.

   ![Запуск примера приложения логики для действия "анализ JSON"](./media/logic-apps-perform-data-operations/sample-starting-logic-app-parse-json-action.png)

1. В приложении логики, где необходимо анализировать содержимое JSON, выполните один из следующих шагов.

   * Чтобы добавить действие на последнем шаге, выберите **новый шаг**.

     ![Выберите "новый шаг" для действия "анализ JSON"](./media/logic-apps-perform-data-operations/add-parse-json-action.png)

   * Чтобы добавить действие между шагами, наведите указатель мыши на стрелку соединения, чтобы появился знак «плюс» ( **+** ). Щелкните знак «плюс», а затем выберите **Добавить действие**.

1. В поле поиска введите `parse json` в качестве фильтра. В списке действия выберите действие **анализ JSON** .

   ![Выбор действия "Анализ JSON"](./media/logic-apps-perform-data-operations/select-parse-json-action.png)

1. В поле **Содержимое** укажите содержимое JSON, которое нужно проанализировать.

   Если щелкнуть в этом примере поле **Содержимое**, появится список динамического содержимого, поэтому можно выбрать ранее созданную переменную.

   ![Выбор объекта JSON для действия "Анализ JSON"](./media/logic-apps-perform-data-operations/configure-parse-json-action.png)

1. Укажите схему JSON, которая описывает анализируемое содержимое JSON.

   Например, схема JSON.

   ![Предоставление схемы JSON для объекта JSON, который нужно проанализировать](./media/logic-apps-perform-data-operations/provide-schema-parse-json-action.png)

   Если у вас нет схемы, ее можно создать из содержимого JSON или из *полезных данных*, которые анализируются. 
   
   1. В действии **Анализ JSON** выберите **Использовать образец полезных данных для создания схемы**.

   1. В разделе **введите или вставьте пример полезных данных JSON**, укажите содержимое JSON и нажмите кнопку **Готово**.

      ![Ввод содержимого JSON для создания схемы](./media/logic-apps-perform-data-operations/generate-schema-parse-json-action.png)

1. Сохраните приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

Дополнительную информацию об этом действии в определении базового процесса см. в разделе [Действие "Анализ JSON"](../logic-apps/logic-apps-workflow-actions-triggers.md).

### <a name="test-your-logic-app"></a>Тестирование приложения логики

Чтобы подтвердить, что действие **Анализ JSON** создает ожидаемые результаты, отправьте уведомление, которое включает выходные данные из действия **Анализ JSON**.

1. В приложении логики добавьте действие, которое может отправить результаты из действия **Анализ JSON**.

1. В этом действии щелкните в любом месте, чтобы отобразились результаты. При открытии списка динамического содержимого в действии **Анализ JSON** можно выбрать свойства из проанализированного содержимого JSON.

   В этом примере используется действие Office 365 Outlook **Send a e-mail** , которое содержит поля **FirstName**, **LastName** и **Email** в тексте сообщения электронной почты:

   ![Свойства JSON в действии "Отправить электронное письмо"](./media/logic-apps-perform-data-operations/send-email-parse-json-action.png)

   Выполненное действие электронной почты.

   ![Пример для действия электронной почты завершен](./media/logic-apps-perform-data-operations/send-email-parse-json-action-2.png)

1. Теперь вручную запустите приложение логики. На панели инструментов конструктора выберите **выполнить**. 

   Ниже приведены результаты, основанные на используемом соединителе электронной почты.

   ![Сообщение электронной почты с результатами действия "анализ JSON"](./media/logic-apps-perform-data-operations/parse-json-email-results.png)

<a name="select-action"></a>

## <a name="select-action"></a>Выбор действия

Чтобы создать массив, содержащий объекты JSON, построенные на основе значений в существующем массиве, используйте действие **SELECT** . Например, можно создать объект JSON для каждого значения в целочисленном массиве, указав свойства, которые должен иметь каждый объект JSON, и сопоставить значения в исходном массиве с этими свойствами. И хотя можно изменять компоненты в объектах JSON, выходной массив всегда имеет такое же количество элементов, что и исходный массив.

> [!NOTE]
> Действия использования выходного массива, полученного из действия **Выбрать**, должны принимать эти массивы как входные данные, либо придется преобразовать выходной массив в другой совместимый формат. 

Если же вы предпочитаете работать в редакторе просмотра кода, можно скопировать пример определений **Выбрать** действия и действие **инициализации переменной** из этой статьи в определение рабочего процесса вашего собственного приложения логики. [Примеры кода операций данных — действие "Выбрать"](../logic-apps/logic-apps-data-operations-code-samples.md#select-action-example) 

1. На [портале Azure](https://portal.azure.com) или в Visual Studio откройте приложение логики в конструкторе приложений логики.

   В этом примере используется портал Azure и логическое приложение с триггером **Повторение** и действием **Инициализация переменной**. Действие настроено для создания переменной, начальным значением которой является массив, который имеет некоторые образцы целых чисел. Если протестировать приложение логики позже, можно запустить приложение вручную, не дожидаясь запуска триггера.

   ![Запуск примера приложения логики для действия "Select"](./media/logic-apps-perform-data-operations/sample-starting-logic-app-select-action.png)

1. В приложении логики, где необходимо создать массив, выполните один из следующих шагов. 

   * Чтобы добавить действие на последнем шаге, выберите **новый шаг**.

     ![Выберите действие "новый шаг" для действия "выбрать"](./media/logic-apps-perform-data-operations/add-select-operation-action.png)

   * Чтобы добавить действие между шагами, наведите указатель мыши на стрелку соединения, чтобы появился знак «плюс» ( **+** ). Щелкните знак «плюс», а затем выберите **Добавить действие**.

1. В разделе **Выберите действие** выберите **Встроенный**. В поле поиска введите `select` в качестве фильтра. В списке действия выберите действие **Выбор** .

   ![Выбор действия "Выбрать"](./media/logic-apps-perform-data-operations/select-select-action.png)

1. В поле **From** (От) укажите нужный исходный массив.

   Если щелкнуть в этом примере поле **From** (От), появится список динамического содержимого, поэтому можно выбрать ранее созданную переменную.

   ![Выбор исходного массива для действия "Выбрать"](./media/logic-apps-perform-data-operations/configure-select-action.png)

1. В левом столбце окна **Сопоставить** укажите имя свойства, которое нужно присвоить каждому значению в исходном массиве. В правом столбце укажите выражение, представляющее значение, которое нужно присвоить свойству.

   В этом примере в качестве имени свойства указывается "Product_ID", чтобы присвоить каждое значение в массиве целых чисел с помощью `item()` функции в выражении, которое обращается к каждому элементу массива. 

   ![Укажите свойство объекта JSON и значения для создания массива](./media/logic-apps-perform-data-operations/configure-select-action-2.png)

   Выполненное действие.

   ![Завершен пример действия "Select"](./media/logic-apps-perform-data-operations/finished-select-action.png)

1. Сохраните приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

Дополнительную информацию об этом действии в определении базового процесса см. в разделе [Выбор действия](../logic-apps/logic-apps-workflow-actions-triggers.md).

### <a name="test-your-logic-app"></a>Тестирование приложения логики

Чтобы подтвердить, что действие **Выбрать** создает ожидаемые результаты, отправьте уведомление, которое включает выходные данные из действия **Выбрать**.

1. В приложении логики добавьте действие, которое может отправить результаты из действия **Выбрать**.

1. В этом действии щелкните в любом месте, чтобы отобразились результаты. Когда откроется список динамического содержимого, выберите **выражение**. Чтобы получить выходные данные массива из действия **Выбрать**, введите выражение, которое включает имя действия **Выбрать**.

   `@actionBody('Select')`

   В этом примере используется действие Office 365 Outlook **Send a e-mail** и включает выходные данные из `@actionBody('Select')` выражения в тексте сообщения электронной почты:

   ![Выходные данные действия из действия "выбор"](./media/logic-apps-perform-data-operations/send-email-select-action.png)

1. Теперь вручную запустите приложение логики. На панели инструментов конструктора выберите **выполнить**.

   Ниже приведены результаты, основанные на используемом соединителе электронной почты.

   ![Электронная почта с результатами действия "Выбрать"](./media/logic-apps-perform-data-operations/select-email-results.png)

## <a name="next-steps"></a>Дальнейшие действия

* См. дополнительные сведения о [соединителях Logic Apps](../connectors/apis-list.md).
