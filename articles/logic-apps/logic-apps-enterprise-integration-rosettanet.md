---
title: Сообщения RosettaNet для интеграции B2B
description: Обмен сообщениями RosettaNet в Azure Logic Apps с Пакет интеграции Enterprise
services: logic-apps
ms.suite: integration
author: divyaswarnkar
ms.author: divswa
ms.reviewer: jonfan, estfan, logicappspm
ms.topic: article
ms.date: 06/22/2019
ms.openlocfilehash: f02cbdc7ca8822c5fcc91b106856d7f8f547536b
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "91565111"
---
# <a name="exchange-rosettanet-messages-for-b2b-enterprise-integration-in-azure-logic-apps"></a>Обмен сообщениями RosettaNet для интеграции B2B Enterprise в Azure Logic Apps

[RosettaNet](https://resources.gs1us.org) — это не коммерческий консорциум, который устанавливает стандартные процессы для совместного использования бизнес-информации. Эти стандарты обычно используются для процессов цепочки поставок и широко распространены в индустриих полупроводников, электроники и логистики. RosettaNet Consortium создает и обслуживает процессы партнерского интерфейса (пипс), которые предоставляют общие определения бизнес-процессов для всех RosettaNet обмена сообщениями. RosettaNet основан на XML и определяет рекомендации по сообщениям, интерфейсы для бизнес-процессов и инфраструктуры реализации для обмена данными между компаниями.

В [Azure Logic Apps](../logic-apps/logic-apps-overview.md)соединитель RosettaNet помогает создавать интеграционные решения, поддерживающие стандарты RosettaNet. Соединитель основан на RosettaNet реализации Framework (РНИФ) версии 2.0.01. РНИФ — это открытая инфраструктура сетевых приложений, позволяющая деловым партнерам совместно работать с RosettaNet пипс. Эта платформа определяет структуру сообщений, потребность в подтверждениях, кодировку MIME и цифровую подпись.

В частности, соединитель предоставляет следующие возможности:

* Кодирование или получение сообщений RosettaNet.
* Декодирование или отправка сообщений RosettaNet.
* Дождитесь ответа и создания уведомления об ошибке.

Для этих возможностей соединитель поддерживает все пипс, определенные в РНИФ 2.0.01. Связь с партнером может быть синхронной или асинхронной.

## <a name="rosettanet-concepts"></a>Основные понятия RosettaNet

Ниже приведены некоторые основные понятия и термины, которые являются уникальными для спецификации RosettaNet и важны при создании интеграции на основе RosettaNet.

* **ПОКАЗЫВАЕТ**

  Организация RosettaNet создает и обслуживает процессы партнерского интерфейса (пипс), которые предоставляют общие определения бизнес-процессов для всех RosettaNet обмена сообщениями. Каждая спецификация PIP содержит файл определения типа документа (DTD) и документ с рекомендациями по сообщениям. Файл DTD определяет структуру сообщений Service-Content. Документ с рекомендацией по сообщениям, который является удобочитаемым файлом HTML, задает ограничения на уровне элементов. Вместе эти файлы обеспечивают полное определение бизнес-процесса.

   Пипс классифицируются по бизнес-функции высокого уровня, кластеру, подфункции или сегменту. Например, "3A4" — это точка заказа на покупку, а "3" — функция управления заказами, а "3A" — подфункция предложения & заказа. Дополнительные сведения см. на [сайте RosettaNet](https://resources.gs1us.org).

* **Действие**

  В части PIP сообщения о действиях являются бизнес-сообщениями, которыми обмениваются партнеры.

* **Имел**

   В части PIP сообщения о сигналах являются подтверждениями, которые отправляются в ответ на сообщения о действиях.

* **Единственное действие и двойное действие**

  Для однодействийной PIP единственным ответом является сообщение с подтверждением. Для последовательности двойных действий инициатор получает ответное сообщение и ответ с подтверждением в дополнение к потоку сообщений с одним действием.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас еще нет подписки Azure, [получите бесплатную учетную запись Azure](https://azure.microsoft.com/free/).

* [Учетная запись интеграции](../logic-apps/logic-apps-enterprise-integration-create-integration-account.md) для хранения соглашения и других артефактов B2B. Эта учетная запись интеграции должна быть связана с подпиской Azure.

* По крайней мере два [партнера](../logic-apps/logic-apps-enterprise-integration-partners.md) , которые определены в учетной записи интеграции и настроены с квалификатором "Дунс" в разделе **бизнес-удостоверений** .

* Настройка процесса PIP, необходимая для отправки или получения сообщений RosettaNet в учетной записи интеграции. В конфигурации процесса хранятся все характеристики конфигурации PIP. Затем можно сослаться на эту конфигурацию при создании соглашения с партнером. Сведения о создании конфигурации процесса PIP в учетной записи интеграции см. в разделе [Добавление конфигурации процесса PIP](#add-pip).

* Необязательные [Сертификаты](../logic-apps/logic-apps-enterprise-integration-certificates.md) для шифрования, расшифровки или подписи сообщений, отправляемых в учетную запись интеграции. Сертификаты требуются, только если используется подписывание или шифрование.

<a name="add-pip"></a>

## <a name="add-pip-process-configuration"></a>Добавление конфигурации процесса PIP

Чтобы добавить конфигурацию процесса PIP в учетную запись интеграции, выполните следующие действия.

1. В [портал Azure](https://portal.azure.com)найдите и откройте учетную запись интеграции.

1. На панели " **Обзор** " выберите плитку **RosettaNet PIP** .

   ![Выбор плитки RosettaNet](media/logic-apps-enterprise-integration-rosettanet/select-rosettanet-tile.png)

1. В разделе **ROSETTANET PIP** выберите **Добавить**. Укажите сведения о PIP.

   ![Добавить сведения о RosettaNet PIP](media/logic-apps-enterprise-integration-rosettanet/add-rosettanet-pip.png)

   | Свойство | Обязательно | Описание |
   |----------|----------|-------------|
   | **имя**; | Да | Имя PIP |
   | **Код PIP** | Да | Код с тремя цифрами PIP. Дополнительные сведения см. в разделе [RosettaNet пипс](/biztalk/adapters-and-accelerators/accelerator-rosettanet/rosettanet-pips). |
   | **Версия PIP** | Да | Номер версии PIP, доступный на основе выбранного кода PIP |
   ||||

   Дополнительные сведения об этих свойствах PIP см. на [веб-сайте RosettaNet](https://resources.gs1us.org/RosettaNet-Standards/Standards-Library/PIP-Directory#1043208-pipsreg).

1. Когда все будет готово, нажмите кнопку **ОК**, чтобы создать конфигурацию PIP.

1. Чтобы просмотреть или изменить конфигурацию процесса, выберите PIP и щелкните **изменить как JSON**.

   Все параметры конфигурации процесса берутся из спецификаций PIP. Logic Apps заполняет большинство параметров значениями по умолчанию, которые являются наиболее часто используемыми значениями для этих свойств.

   ![Изменить конфигурацию RosettaNet PIP](media/logic-apps-enterprise-integration-rosettanet/edit-rosettanet-pip.png)

1. Убедитесь, что параметры соответствуют значениям в соответствующей спецификации PIP и соответствуют потребностям вашего бизнеса. При необходимости обновите значения в JSON и сохраните эти изменения.

## <a name="create-rosettanet-agreement"></a>Создание соглашения RosettaNet

1. На [портале Azure](https://portal.azure.com) найдите и выберите свою учетную запись интеграции, если она еще не открыта.

1. На панели " **Обзор** " выберите плитку **соглашения** .

   ![Плитка "Выбор соглашений"](media/logic-apps-enterprise-integration-rosettanet/select-agreement-tile.png)

1. В разделе **Соглашения** щелкните **Добавить**. Укажите сведения о соглашении.

   ![Добавление сведений о соглашении](media/logic-apps-enterprise-integration-rosettanet/add-agreement-details.png)

   | Свойство | Обязательно | Описание |
   |----------|----------|-------------|
   | **имя**; | Да | Имя соглашения |
   | **Тип соглашения** | Да | Выберите **RosettaNet**. |
   | **"Host Partner" (Главный партнер)** | Да | Для соглашения нужно указать главного партнера и гостевого партнера. Главный партнер представляет организацию, которая настраивает соглашение. |
   | **"Host Identity" (Идентификатор главного партнера)** | Да | Идентификатор главного партнера. |
   | **"Guest Partner" (Партнер-гость)** | Да | Для соглашения нужно указать главного партнера и гостевого партнера. Партнер-гость представляет организацию, которая имеет деловые отношения с главным партнером. |
   | **Guest Identity** | Да | Идентификатор гостевого партнера |
   | **"Receive Settings" (Параметры получения)** | Различается | Эти свойства применяются ко всем сообщениям, полученным от главного партнера |
   | **"Send Settings" (Параметры отправки)** | Различается | Эти свойства применяются ко всем сообщениям, отправляемым ведущим партнером. |  
   | **Ссылки на RosettaNet PIP** | Да | Точка PIP ссылается на соглашение. Все сообщения RosettaNet должны иметь настройки PIP. |
   ||||

1. Чтобы настроить соглашение для получения входящих сообщений от гостевого партнера, выберите **Параметры получения**.

   ![Параметры получения](media/logic-apps-enterprise-integration-rosettanet/add-agreement-receive-details.png)

   1. Чтобы включить подписывание или шифрование для входящих сообщений, в разделе **сообщения** выберите **сообщение должно быть подписано** , а **сообщение должно быть зашифровано** соответственно.

      | Свойство | Обязательно | Описание |
      |----------|----------|-------------|
      | **Message should be signed** | Нет | Подписывать входящие сообщения с выбранным сертификатом. |
      | **Сертификат** | Да, если подписывание разрешено | Сертификат, используемый для подписывания |
      | **"Enable message encryption" (Включить шифрование сообщений)** | Нет | Шифровать входящие сообщения с помощью выбранного сертификата. |
      | **Сертификат** | Да, если шифрование включено | Сертификат, используемый для шифрования |
      ||||

   1. При каждом выборе выберите соответствующий [сертификат](./logic-apps-enterprise-integration-certificates.md), который ранее был добавлен в учетную запись интеграции, чтобы использовать его для подписывания или шифрования.

1. Чтобы настроить соглашение для отправки сообщений гостевому партнеру, выберите **Параметры отправки**.

   ![Параметры отправки](media/logic-apps-enterprise-integration-rosettanet/add-agreement-send-details.png)

   1. Чтобы включить подписывание или шифрование исходящих сообщений, в разделе **сообщения** выберите **включить подписывание сообщений** или **включить шифрование сообщений** соответственно. При каждом выборе выберите соответствующий алгоритм и [сертификат](./logic-apps-enterprise-integration-certificates.md), добавленные ранее в учетную запись интеграции, чтобы использовать их для подписывания или шифрования.

      | Свойство | Обязательно | Описание |
      |----------|----------|-------------|
      | **"Enable message signing" (Включить подписание сообщений)** | Нет | Подписывать исходящие сообщения с выбранным алгоритмом подписи и сертификатом. |
      | **Алгоритм подписывания** | Да, если подписывание разрешено | Используемый алгоритм подписывания на основе выбранного сертификата |
      | **Сертификат** | Да, если подписывание разрешено | Сертификат, используемый для подписывания |
      | **"Enable message encryption" (Включить шифрование сообщений)** | Нет | Зашифруйте исходящие данные с помощью выбранного алгоритма шифрования и сертификата. |
      | **Алгоритм шифрования** | Да, если шифрование включено | Используемый алгоритм шифрования на основе выбранного сертификата |
      | **Сертификат** | Да, если шифрование включено | Сертификат, используемый для шифрования |
      ||||

   1. В разделе **конечные точки** укажите необходимые URL-адреса, которые будут использоваться для отправки сообщений о действиях и подтверждений.

      | Свойство | Обязательно | Описание |
      |----------|----------|-------------|
      | **URL-адрес действия** |  Да | URL-адрес, используемый для отправки сообщений о действиях. URL-адрес является обязательным полем для синхронных и асинхронных сообщений. |
      | **URL-адрес подтверждения** | Да | URL-адрес, используемый для отправки сообщений подтверждения. URL-адрес является обязательным полем для асинхронных сообщений. |
      ||||

1. Чтобы настроить соглашение с ссылками PIP RosettaNet для партнеров, выберите **ссылки ROSETTANET PIP**. В поле **имя PIP** выберите имя ранее созданной PIP.

   ![Ссылки PIP](media/logic-apps-enterprise-integration-rosettanet/add-agreement-pip-details.png)

   Выбранные параметры заполняют оставшиеся свойства, основанные на PIP, настроенном в учетной записи интеграции. При необходимости можно изменить **роль PIP**.

   ![Выбранная PIP](media/logic-apps-enterprise-integration-rosettanet/add-agreement-selected-pip.png)

После выполнения этих действий вы сможете отправлять или получать сообщения RosettaNet.

## <a name="rosettanet-templates"></a>Шаблоны RosettaNet

Чтобы ускорить разработку и рекомендовать шаблоны интеграции, можно использовать шаблоны приложений логики для декодирования и кодирования сообщений RosettaNet. При создании приложения логики его можно выбрать из коллекции шаблонов в конструкторе приложений логики. Эти шаблоны также можно найти в [репозитории GitHub для Azure Logic Apps](https://github.com/Azure/logicapps).

![Шаблоны RosettaNet](media/logic-apps-enterprise-integration-rosettanet/decode-encode-rosettanet-templates.png)

## <a name="receive-or-decode-rosettanet-messages"></a>Получение или декодирование сообщений RosettaNet

1. [Создайте пустое приложение логики](quickstart-create-first-logic-app-workflow.md).

1. [Свяжите учетную запись интеграции](logic-apps-enterprise-integration-create-integration-account.md#link-account) с приложением логики.

1. Прежде чем можно будет добавить действие для декодирования сообщения RosettaNet, необходимо добавить триггер для запуска приложения логики, например триггер запроса.

1. После добавления триггера выберите **новый шаг**.

   ![Добавление триггера запроса](media/logic-apps-enterprise-integration-rosettanet/request-trigger.png)

1. В поле поиска введите "RosettaNet" и выберите это действие: **RosettaNet декодировать** .

   ![Поиск и выбор действия "декодирование RosettaNet"](media/logic-apps-enterprise-integration-rosettanet/select-decode-rosettanet-action.png)

1. Укажите сведения для свойств действия:

   ![Снимок экрана, на котором показано, где указывается информация о свойствах действия.](media/logic-apps-enterprise-integration-rosettanet/decode-action-details.png)

   | Свойство | Обязательно | Описание |
   |----------|----------|-------------|
   | **Сообщение** | Да | Сообщение RosettaNet для декодирования  |
   | **Заголовки** | Да | Заголовки HTTP, которые предоставляют значения для версии, которая является версией РНИФ, и типом ответа, который указывает тип связи между участниками и может быть синхронным или асинхронным. |
   | **Роль** | Да | Роль главного партнера в PIP |
   ||||

   Из действия декодирования RosettaNet выходные данные вместе с другими свойствами включают **исходящий сигнал**, который можно выбрать для кодирования и возврата к партнеру, или выполнить любое другое действие с этим выходом.

## <a name="send-or-encode-rosettanet-messages"></a>Отправка или кодирование сообщений RosettaNet

1. [Создайте пустое приложение логики](quickstart-create-first-logic-app-workflow.md).

1. [Свяжите учетную запись интеграции](logic-apps-enterprise-integration-create-integration-account.md#link-account) с приложением логики.

1. Прежде чем можно будет добавить действие для кодирования сообщения RosettaNet, необходимо добавить триггер для запуска приложения логики, например триггер запроса.

1. После добавления триггера выберите **новый шаг**.

   ![Добавление триггера запроса](media/logic-apps-enterprise-integration-rosettanet/request-trigger.png)

1. В поле поиска введите "RosettaNet" и выберите это действие: **RosettaNet Encoded** .

   ![Поиск и выбор действия "RosettaNet Encoded"](media/logic-apps-enterprise-integration-rosettanet/select-encode-rosettanet-action.png)

1. Укажите сведения для свойств действия:

   ![Укажите сведения о действии](media/logic-apps-enterprise-integration-rosettanet/encode-action-details.png)

   | Свойство | Обязательно | Описание |
   |----------|----------|-------------|
   | **Сообщение** | Да | Сообщение RosettaNet для кодирования  |
   | **Главный партнер** | Да | Имя партнера узла |
   | **Гостевой партнер** | Да | Имя гостевого партнера |
   | **Код PIP** | Да | Код PIP |
   | **Версия PIP** | Да | Версия PIP |  
   | **Удостоверение экземпляра PIP** | Да | Уникальный идентификатор для этого сообщения PIP |  
   | **Тип сообщения** | Да | Тип сообщения для кодирования |  
   | **Роль** | Да | Роль главного партнера |
   ||||

   Теперь закодированное сообщение готово к отправке партнеру.

1. Чтобы отправить закодированное сообщение, в этом примере используется действие **http** , которое переименовывается в "HTTP-Send Encoded Message to Partner".

   ![Действие HTTP для отправки сообщения RosettaNet](media/logic-apps-enterprise-integration-rosettanet/send-rosettanet-message-to-partner.png)

   Согласно стандартам RosettaNet, бизнес-транзакции считаются завершенными только после завершения всех шагов, определенных в PIP.

1. После того как узел отправит закодированное сообщение партнеру, узел ждет сигнал и подтверждение. Чтобы выполнить эту задачу, добавьте действие **RosettaNet ожидания для ответа** .

   ![Добавить действие "RosettaNet ожидания для ответа"](media/logic-apps-enterprise-integration-rosettanet/rosettanet-wait-for-response-action.png)

   Продолжительность ожидания и количество повторных попыток основаны на конфигурации PIP в учетной записи интеграции. Если ответ не получен, это действие создает уведомление об ошибке. Для обработки повторных попыток всегда размещайте действия **кодирования** и **ожидания** в цикле **until** .

   ![Цикл Until с действиями RosettaNet](media/logic-apps-enterprise-integration-rosettanet/rosettanet-loop.png)

## <a name="next-steps"></a>Дальнейшие действия

* Сведения о проверке, преобразовании и других операциях с сообщениями, выполняемых с помощью [пакета интеграции Enterprise](../logic-apps/logic-apps-enterprise-integration-overview.md).
* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
