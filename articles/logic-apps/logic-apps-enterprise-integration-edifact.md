---
title: Сообщения EDIFACT для интеграции B2B
description: Обмен сообщениями EDIFACT в формате EDI для интеграции с предприятием B2B в Azure Logic Apps с помощью Пакета интеграции Enterprise.
services: logic-apps
ms.suite: integration
author: divyaswarnkar
ms.author: divswa
ms.reviewer: jonfan, estfan, logicappspm
ms.topic: article
ms.date: 04/22/2020
ms.openlocfilehash: b0df55e59bd519a816c4022f2434edfcd4460780
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96006529"
---
# <a name="exchange-edifact-messages-for-b2b-enterprise-integration-in-azure-logic-apps-with-enterprise-integration-pack"></a>Обмен сообщениями EDIFACT для интеграции с предприятием B2B в Azure Logic Apps с помощью Пакета интеграции Enterprise

Прежде чем начать обмен сообщениями EDIFACT с помощью Azure Logic Apps, необходимо создать соглашение EDIFACT и сохранить его в учетной записи интеграции. Ниже описаны действия по созданию соглашения EDIFACT.

> [!NOTE]
> В этой статье описываются функции EDIFACT в Azure Logic Apps. Дополнительные сведения см. в статье [Интеграция Enterprise с X12](logic-apps-enterprise-integration-x12.md).

## <a name="before-you-start"></a>Перед началом работы

Вам понадобится следующее:

* [учетная запись интеграции](logic-apps-enterprise-integration-create-integration-account.md), которая уже определена и связана с подпиской Azure;  
* В учетной записи интеграции должны быть определены по крайней мере два [партнера](logic-apps-enterprise-integration-partners.md).

> [!NOTE]
> При создании соглашения нужно учитывать, что содержимое сообщений, которыми вы обмениваетесь с партнером, должно соответствовать типу соглашения.

После [настройки учетной записи интеграции](../logic-apps/logic-apps-enterprise-integration-create-integration-account.md) и [добавления партнеров](logic-apps-enterprise-integration-partners.md) можно создать соглашение EDIFACT. Следуйте действиям, описанным ниже.

## <a name="create-an-edifact-agreement"></a>Создание соглашения EDIFACT 

1. Войдите на [портал Azure](https://portal.azure.com "Портал Azure"). 

2. В главном меню Azure выберите **Все службы**. Введите в поле поиска "интеграция" и выберите в результатах поиска **Учетные записи интеграции**.

   ![Поиск учетной записи интеграции](./media/logic-apps-enterprise-integration-edifact/edifact-0.png)

   > [!TIP]
   > Если раздел **Все службы** не отображается, разверните меню. В верхней области свернутого меню выберите действие **Показать текстовые подписи**.

3. В разделе **Учетные записи интеграции** выберите учетную запись интеграции, в которой нужно создать соглашение.

   ![Выбор учетной записи интеграции для создания соглашения](./media/logic-apps-enterprise-integration-edifact/edifact-1-4.png)

4. Выберите **Соглашения**. Если плитка "Соглашения" отсутствует, добавьте ее.   

   ![Выбор плитки "Соглашения"](./media/logic-apps-enterprise-integration-edifact/edifact-1-5.png)

5. На странице "Соглашения" выберите **Добавить**.

   ![Кнопка "Добавить"](./media/logic-apps-enterprise-integration-edifact/edifact-agreement-2.png)

6. В колонке **Добавить** введите **имя** соглашения. Для **типа соглашения** выберите **EDIFACT**. Заполните поля **Главный партнер**, **Главный идентификатор**, **Гостевой партнер** и **Гостевой идентификатор**.

   ![Сведения о соглашении](./media/logic-apps-enterprise-integration-edifact/edifact-1.png)

   | Свойство. | Описание |
   | --- | --- |
   | Имя |Имя соглашения |
   | Тип соглашения | Нужно указать EDIFACT |
   | "Host Partner" (Главный партнер) |Для соглашения нужно указать главного партнера и партнера-гостя. Главный партнер представляет организацию, которая настраивает соглашение. |
   | "Host Identity" (Идентификатор главного партнера) |Идентификатор главного партнера. |
   | "Guest Partner" (Партнер-гость) |Для соглашения нужно указать главного партнера и партнера-гостя. Партнер-гость представляет организацию, которая имеет деловые отношения с главным партнером. |
   | Guest Identity |Идентификатор гостевого партнера |
   | "Receive Settings" (Параметры получения) |Эти свойства применяются ко всем сообщениям, получаемым посредством соглашения. |
   | "Send Settings" (Параметры отправки) |Эти свойства применяются ко всем сообщениям, отправляемым посредством соглашения. |
   ||| 

## <a name="configure-how-your-agreement-handles-received-messages"></a>Настройка обработки полученных сообщений соглашением

После определения свойств соглашения вы можете настроить идентификацию и обработку входящих сообщений, полученных от партнера, с помощью этого соглашения.

> [!IMPORTANT]
> Соединитель EDIFACT поддерживает только символы UTF-8.
> Если в выходных данных содержатся непредвиденные символы, убедитесь, что в сообщениях EDIFACT используется кодировка UTF-8.

1. В колонке **Добавить** выберите **Настройки получения**.
Настройте эти свойства в соответствии с вашим соглашением с партнером, с которым вы будете обмениваться сообщениями. Ниже приведены таблицы с описанием свойств раздела настроек отправки.

   **Настройки получения** состоят из следующих разделов: "Идентификаторы", Acknowledgment (Подтверждение), "Схемы", "Контрольные номера", "Проверка" и "Внутренние параметры".

   ![Раздел "Настройки получения"](./media/logic-apps-enterprise-integration-edifact/edifact-2.png)  

2. После выполнения описанных выше действий нажмите кнопку **ОК**, чтобы сохранить заданные параметры.

Ваше соглашение готово к обработке входящих сообщений, соответствующих выбранным параметрам.

### <a name="identifiers"></a>Идентификаторы

| Свойство. | Описание |
| --- | --- |
| UNB6.1 (эталонный пароль получателя) |Введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |
| UNB6.2 (эталонный квалификатор получателя) |Введите буквенно-цифровое значение, содержащее от 1 до 2 знаков |

### <a name="acknowledgments"></a>Благодарности

| Свойство. | Описание |
| --- | --- |
| Получение сообщения (CONTRL) |Установите этот флажок, чтобы возвращать техническое подтверждение (CONTRL) отправителю при обмене. Это подтверждение отсылается отправителю при обмене в зависимости от параметров отправки для соглашения |
| Подтверждение (CONTRL) |Установите этот флажок, чтобы возвращать функциональное подтверждение (CONTRL) отправителю при обмене. Это подтверждение отсылается отправителю при обмене в зависимости от параметров отправки для соглашения |

### <a name="schemas"></a>Схемы

| Свойство. | Описание |
| --- | --- |
| UNH2.1 (ТИП) |Выберите тип набора транзакций |
| UNH2.2 (ВЕРСИЯ) |Введите номер версии сообщения (от 1 до 3 знаков) |
| UNH2.3 (ВЫПУСК) |Введите номер выпуска сообщения (от 1 до 3 знаков) |
| UNH2.5 (ASSOCIATED ASSIGNED CODE) (UNH2.5 (СВЯЗАННЫЙ НАЗНАЧЕННЫЙ КОД)) |Введите назначенный код (буквенно-цифровое значение, содержащее не более 6 знаков) |
| UNG2.1 (APP SENDER ID) (UNG2.1 (ИДЕНТИФИКАТОР ПРИЛОЖЕНИЯ-ОТПРАВИТЕЛЯ)) |Введите буквенно-цифровое значение, содержащее от 1 до 35 знаков |
| UNG2.2 (APP SENDER CODE QUALIFIER) (UNG2.2 (КВАЛИФИКАТОР КОДА ПРИЛОЖЕНИЯ-ОТПРАВИТЕЛЯ)) |Введите буквенно-цифровое значение, содержащее не более четырех знаков |
| SCHEMA |Выберите ранее отправленную схему, которую вы хотите использовать, из связанной учетной записи интеграции. |

### <a name="control-numbers"></a>Контрольные номера

| Свойство. | Описание |
| --- | --- |
| Disallow Interchange Control Number duplicates (Запретить повторяющиеся контрольные номера обмена) |Выберите это свойство, чтобы запретить повторяющиеся операции обмена. Если флажок установлен, то действие декодирования EDIFACT проверяет, соответствует ли контрольный номер (UNB5) полученного обмена ранее обработанному контрольному номеру обмена. Если обнаружено совпадение, обмен не обрабатывается. |
| Проверять дубликаты UNB5 через (дн.) |Если вы решили запретить повторяющиеся контрольные номера обмена, то можно указать число дней, в течение которых выполняется проверка, задав соответствующее значение для этого параметра. |
| Disallow Group control number duplicates (Запретить повторяющиеся контрольные номера групп) |Выберите это свойство, чтобы запретить операции обмена с повторяющимися контрольными номерами групп (UNG5). |
| Disallow Transaction set control number duplicates (Запретить повторяющиеся контрольные номера наборов транзакций) |Выберите это свойство, чтобы запретить операции обмена с повторяющимися контрольными номерами наборов транзакций (UNH1). |
| Контрольный номер подтверждения EDIFACT |Чтобы назначить контрольные номера набора транзакций для использования в подтверждении, введите значение префикса, диапазон контрольных номеров и суффикс. |

### <a name="validation"></a>Проверка

После завершения проверки каждой строки автоматически будет добавляться следующая. Если правила не указаны, проверка будет использовать строку "По умолчанию".

| Свойство. | Описание |
| --- | --- |
| Тип сообщений |Выберите тип сообщения EDI. |
| EDI Validation (Проверка EDI) |Выполняет проверку EDI для типов данных в соответствии со свойствами EDI схемы, ограничениями длины, пустыми элементами данных и конечными разделителями. |
| Extended Validation (Расширенная проверка) |Если тип данных не EDI, то проверка проводится согласно требованиям к элементу данных и разрешены повторы, перечисления и контроль длины элементов данных (минимальная и максимальная длина). |
| Allow Leading/Trailing Zeroes (Разрешить начальные и конечные нули) |Сохраняет все дополнительные начальные или конечные нули и пробелы. Не удаляйте эти символы. |
| Обрезать начальные и конечные нули |Удаляет начальные или конечные нули и пробелы. |
| Trailing Separator Policy (Политика конечных разделителей) |Создает конечные разделители. <p>Выберите **Не разрешено**, чтобы запретить использование конечных разделителей в получаемом обмене. Если обмен содержит конечные разделители, он будет объявлен недопустимым. <p>Выберите **Необязательно**, чтобы принимать сообщения с конечными разделителями или без них. <p>Выберите значение **Обязательно**, если получаемый обмен должен содержать конечные разделители. |

### <a name="internal-settings"></a>Внутренние параметры

| Свойство. | Описание |
| --- | --- |
| Create empty XML tags if trailing separators are allowed (Создать пустые теги XML, если конечные разделители разрешены) |Установите этот флажок, чтобы отправитель при обмене добавлял пустые теги XML для конечных разделителей. |
| Разделение документа Interchange на наборы транзакций — заблокировать наборы транзакций при ошибке|Указывает, что каждый набор транзакций в рамках операции обмена нужно анализировать в виде отдельного XML-документа, применяя к этому набору транзакций соответствующую оболочку. Приостановите только те наборы транзакций, которые не прошли проверку. |
| Разделение документа Interchange на наборы транзакций — заблокировать документ Interchange при ошибке|Указывает, что каждый набор транзакций в рамках операции обмена нужно анализировать в виде отдельного XML-документа, применяя соответствующую оболочку. Если один или несколько наборов транзакций, входящих в обмен, не проходят проверку, обработка останавливается для всего обмена. | 
| Сохранение документа Interchange — заблокировать наборы транзакций при ошибке |Сохраняет операцию обмена неделимой, создавая XML-документ для всего пакетного обмена. Обработка будет прекращаться только для тех наборов транзакций, которые не прошли проверку, и продолжится для всех остальных наборов транзакций. |
| Сохранение документа Interchange — заблокировать операцию обмена при ошибке |Сохраняет операцию обмена неделимой, создавая XML-документ для всего пакетного обмена. Если один или несколько наборов транзакций, входящих в обмен, не проходят проверку, обработка останавливается для всего обмена. |

## <a name="configure-how-your-agreement-sends-messages"></a>Настройка отправки сообщений соглашением

Вы можете настроить идентификацию и обработку исходящих сообщений, которые вы отправляете партнерам, с помощью этого соглашения.

1.  В колонке **Добавить** выберите **Настройки отправки**.
Настройте эти свойства в соответствии с вашим соглашением с партнером, с которым вы будете обмениваться сообщениями. Ниже приведены таблицы с описанием свойств раздела настроек отправки.

    **Настройки отправки** состоят из следующих разделов: "Идентификаторы", Acknowledgment (Подтверждение), "Схемы", "Конверты", "Кодировки и разделители", "Контрольные номера" и "Проверки".

    ![Раздел "Настройки отправки"](./media/logic-apps-enterprise-integration-edifact/edifact-3.png)    

2. После выполнения описанных выше действий нажмите кнопку **ОК**, чтобы сохранить заданные параметры.

Ваше соглашение готово к обработке исходящих сообщений, соответствующих выбранным параметрам.

### <a name="identifiers"></a>Идентификаторы

| Свойство. | Описание |
| --- | --- |
| UNB1.2 (версия синтаксиса) |Выберите значение от **1** до **4**. |
| UNB2.3 (обратный адрес маршрутизации для отправителя) |Введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |
| UNB3.3 (обратный адрес маршрутизации для получателя) |Введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |
| UNB6.1 (эталонный пароль получателя) |Введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |
| UNB6.2 (эталонный квалификатор получателя) |Введите буквенно-цифровое значение, содержащее от 1 до 2 знаков |
| UNB7 (эталонный ИД приложения) |Введите буквенно-цифровое значение, содержащее от 1 до 14 знаков |

### <a name="acknowledgment"></a>Acknowledgment (Подтверждение)

| Свойство. | Описание |
| --- | --- |
| Получение сообщения (CONTRL) |Установите этот флажок, если размещаемому партнеру необходимо отправлять техническое подтверждение (CONTRL). Этот параметр указывает, что размещенный партнер, отправляющий сообщение, запрашивает подтверждение от гостевого партнера |
| Подтверждение (CONTRL) |Установите этот флажок, если размещаемому партнеру необходимо отправлять функциональное подтверждение (CONTRL). Этот параметр указывает, что размещенный партнер, отправляющий сообщение, запрашивает подтверждение от гостевого партнера |
| Создать цикл SG1/SG4 для принятых наборов транзакций |Если вы хотите получать функциональное подтверждение, установите этот флажок для принудительного создания циклов SG1/SG4 в функциональных подтверждениях CONTRL для принятых наборов транзакций |

### <a name="schemas"></a>Схемы

| Свойство. | Описание |
| --- | --- |
| UNH2.1 (ТИП) |Выберите тип набора транзакций |
| UNH2.2 (ВЕРСИЯ) |Введите номер версии сообщения |
| UNH2.3 (ВЫПУСК) |Введите номер выпуска сообщения |
| SCHEMA |Выберите схему для использования. Схемы находятся в вашей учетной записи интеграции. Для получения доступа к схемам следует сначала связать учетную запись интеграции с приложением логики. |

### <a name="envelopes"></a>Envelopes (Оболочка)

| Свойство. | Описание |
| --- | --- |
| UNB8 (код приоритета обработки) |Введите буквенно-цифровое значение, содержащее один символ. |
| UNB10 (соглашение о связи) |Введите буквенно-цифровое значение, содержащее от 1 до 40 знаков |
| UNB11 (тестовый индикатор) |Установите этот флажок, чтобы указать, что содержимое обмена данными представляет собой тестовые данные |
| Применить сегмент UNA (совет для строки службы) |Установите этот флажок, чтобы создать сегмент UNA для отправляемого обмена |
| Применить сегменты UNG (заголовок группы функций) |Установите этот флажок, чтобы создавать сегменты объединения в заголовке функциональной группы сообщений, отправляемых гостевому партнеру. Для создания сегментов UNG можно использовать следующие значения: <p>Для параметра **UNG1** введите буквенно-цифровое значение, содержащее от одного до шести символов. <p>Для параметра **UNG2.1** введите буквенно-цифровое значение, содержащее от одного до 35 символов. <p>Для параметра **UNG2.2** введите буквенно-цифровое значение, содержащее до четырех символов. <p>Для параметра **UNG3.1** введите буквенно-цифровое значение, содержащее от одного до 35 символов. <p>Для параметра **UNG3.2** введите буквенно-цифровое значение, содержащее до четырех символов. <p>Для параметра **UNG6** введите буквенно-цифровое значение, содержащее от одного до трех символов. <p>Для параметра **UNG7.1** введите буквенно-цифровое значение, содержащее от одного до трех символов. <p>Для параметра **UNG7.2** введите буквенно-цифровое значение, содержащее от одного до трех символов. <p>Для параметра **UNG7.3** введите буквенно-цифровое значение, содержащее от одного до шести символов. <p>Для параметра **UNG8** введите буквенно-цифровое значение, содержащее от одного до 14 символов. |

### <a name="character-sets-and-separators"></a>Наборы символов и разделители

Отдельно от набора символов можно ввести отличающийся набор разделителей для каждого типа сообщений. Если для заданной схемы сообщений набор символов не указан, то используется набор символов по умолчанию.

| Свойство. | Описание |
| --- | --- |
| UNB1.1 (идентификатор системы) |Выберите набор знаков EDIFACT, который нужно применять к исходящему обмену |
| схема |Выберите схему из раскрывающегося списка. После завершения каждой строки автоматически будет добавляться новая строка. Для этой схемы выберите нужный набор разделителей на основе приведенных ниже описаний разделителя. |
| Тип входных данных |Выберите тип входных данных из раскрывающегося списка. |
| Разделитель компонентов |Введите один символ, который будет разделять составные элементы данных. |
| Разделитель элементов данных |Введите один символ, который будет разделять простые элементы данных в составных элементах данных. |
| Признак конца сегмента |Введите один символ, который будет обозначать конец сегмента EDI. |
| Суффикс |Выберите символ, который будет использоваться с идентификатором сегмента. Если указывается суффикс, то элемент данных признака конца сегмента может быть пустым. Если признак конца сегмента оставить пустым, то необходимо будет указать суффикс. |

### <a name="control-numbers"></a>Контрольные номера

| Свойство. | Описание |
| --- | --- |
| UNB5 (контрольный номер обмена) |Введите префикс, диапазон значений для контрольного номера обмена и суффикс. Эти значения используются для создания исходящего обмена. Префикс и суффикс указывать необязательно, однако нужно указать контрольный номер. Значение контрольного номера увеличивается для каждого нового сообщения. Префикс и суффикс не меняются |
| UNG5 (контрольный номер группы) |Введите префикс, диапазон значений для контрольного номера обмена и суффикс. Эти значения используются для создания контрольного номера группы. Префикс и суффикс указывать необязательно, однако нужно указать контрольный номер. Контрольный номер увеличивается для каждого нового сообщения до достижения максимального значения. Префикс и суффикс не меняются |
| UNH1 (эталонный номер заголовка сообщения) |Введите префикс, диапазон значений для контрольного номера обмена и суффикс. Эти значения используются для создания эталонного номера заголовка сообщения. Префикс и суффикс указывать необязательно, однако нужно указать эталонный номер. Значение эталонного номера увеличивается для каждого нового сообщения. Префикс и суффикс не меняются |

### <a name="validation"></a>Проверка

После завершения проверки каждой строки автоматически будет добавляться следующая. Если правила не указаны, проверка будет использовать строку "По умолчанию".

| Свойство. | Описание |
| --- | --- |
| Тип сообщений |Выберите тип сообщения EDI. |
| EDI Validation (Проверка EDI) |Выполняет проверку EDI для типов данных в соответствии со свойствами EDI схемы, ограничениями длины, пустыми элементами данных и конечными разделителями. |
| Extended Validation (Расширенная проверка) |Если тип данных не EDI, то проверка проводится согласно требованиям к элементу данных и разрешены повторы, перечисления и контроль длины элементов данных (минимальная и максимальная длина). |
| Allow Leading/Trailing Zeroes (Разрешить начальные и конечные нули) |Сохраняет все дополнительные начальные или конечные нули и пробелы. Не удаляйте эти символы. |
| Обрезать начальные и конечные нули |Удаляет начальные или конечные нули. |
| Trailing Separator Policy (Политика конечных разделителей) |Создает конечные разделители. <p>Выберите **Не разрешено**, чтобы запретить использование конечных разделителей в отправляемом обмене. Если обмен содержит конечные разделители, он будет объявлен недопустимым. <p>Выберите значение **Необязательно**, чтобы отправлять обмен с конечными разделителями или без них. <p>Выберите значение **Обязательно**, если отправляемый обмен должен содержать конечные разделители. |

## <a name="find-your-created-agreement"></a>Поиск созданного соглашения

1.  Настроив все свойства соглашения, нажмите кнопку **ОК** на странице **Добавить**, чтобы завершить создание соглашения и вернуться в учетную запись интеграции.

    В списке **Соглашения** появится созданное соглашение.

2.  Вы также можете просмотреть соглашения в обзоре учетной записи интеграции. В меню учетной записи интеграции выберите **Обзор**, а затем щелкните плитку **Соглашения**. 

    ![Снимок экрана, на котором показана плитка "соглашения".](./media/logic-apps-enterprise-integration-edifact/edifact-4.png)   

## <a name="connector-reference"></a>Справочник по соединителям

Дополнительные технические сведения об этом соединителе, такие как действия и ограничения, описанные в файле Swagger соединителя, см. на [странице справочника по соединителю](/connectors/edifact/).

> [!NOTE]
> Для приложений логики в [среде службы интеграции (ISE)](../logic-apps/connect-virtual-network-vnet-isolated-environment-overview.md) эта помеченная как ISE версия соединителя [использует ограничения сообщений B2B для ISE](../logic-apps/logic-apps-limits-and-config.md#b2b-protocol-limits).

## <a name="next-steps"></a>Дальнейшие действия

* См. дополнительные сведения о других [соединителях Logic Apps](../connectors/apis-list.md).
