---
title: Экспорт потоков из Power Автоматизация в Azure Logic Apps
description: Перенесите потоки из Power Автоматизация в Azure Logic Apps, экспортировав их как шаблоны Azure Resource Manager
services: logic-apps
ms.suite: integration
ms.reviewer: estfan, sneshaf, pinath, logicappspm
ms.topic: conceptual
ms.date: 02/22/2021
ms.openlocfilehash: f2b4e09ec9b50bb6993c89d90b0f33c0c905cbf0
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "101699102"
---
# <a name="export-flows-from-power-automate-and-deploy-to-azure-logic-apps"></a>Экспорт потоков из Power Automate и их развертывание в Azure Logic Apps

Чтобы расширить и расширить возможности потока, можно перенести этот поток из [Power Автоматизация](https://flow.microsoft.com) в [Azure Logic Apps](../logic-apps/logic-apps-overview.md). Вы можете экспортировать последовательность в качестве шаблона Azure Resource Manager для приложения логики, развернуть шаблон приложения логики в группе ресурсов Azure, а затем открыть это приложение логики в конструкторе приложений логики.

> [!IMPORTANT]
> Экспорт в Logic Apps недоступен для потоков Power автоматизиру, созданных после августа 2020. В октябре 2020, Power автоматизирует стандартизованное создание новых потоков по [протоколу OpenAPI 2,0](https://swagger.io/specification/v2/). Новые потоки, основанные на этом протоколе, несовместимы с рабочими процессами Logic Apps, поэтому экспорт этих потоков в Logic Apps был отключен. Вместо этого необходимо вручную [создать приложения логики](quickstart-create-first-logic-app-workflow.md) для этих потоков.

В Azure Logic Apps доступны не все соединители Power автоматизиру. Можно выполнить миграцию только тех потоков автоматизации, которые имеют эквивалентные соединители в Azure Logic Apps. Например, триггер кнопки, соединитель утверждения и соединитель уведомлений относятся только к автоматизации питания. 

* Чтобы узнать, какие соединители Power автоматизировать не имеют Logic Apps эквивалентов, см. раздел [Power автоматизиру Connectors](/connectors/connector-reference/connector-reference-powerautomate-connectors).

* Чтобы узнать, какие соединители Logic Apps не имеют эквивалентов Power автоматизировать, см. раздел [Logic Apps Connectors](/connectors/connector-reference/connector-reference-logicapps-connectors).

## <a name="prerequisites"></a>Предварительные требования

* Учетная запись и подписка Azure. Если у вас еще нет подписки Azure, [зарегистрируйтесь для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* Последовательность, которую требуется экспортировать из Power автоматизирующие

## <a name="export-your-flow"></a>Экспорт последовательности

1. Войдите в [Power Автоматизируйте](https://flow.microsoft.com)и выберите **мои потоки**. Найдите и выберите свой поток. На панели инструментов нажмите кнопку с многоточием (**...**) > **экспортировать**  >  **Logic Apps шаблон (. JSON)**.

   ![Экспорт потока из Power Автоматизация](./media/export-from-microsoft-flow-logic-app-template/export-flow.png)

1. Сохраните JSON файл шаблона в нужном расположении.

Дополнительные сведения см. [в разделе увеличение до Azure Logic Apps](https://flow.microsoft.com/blog/grow-up-to-logic-apps/).

## <a name="deploy-template-by-using-the-azure-portal"></a>Развертывание шаблона с помощью портал Azure

1. Войдите в [портал Azure](https://portal.azure.com) с помощью учетной записи Azure.

1. На домашней странице Azure в поле поиска введите `custom template` . В результатах выберите **развернуть настраиваемый шаблон**  >  **создать**.

   ![Поиск и выбор "Шаблоны развертывания"](./media/export-from-microsoft-flow-logic-app-template/select-template-deployment.png)

1. В разделе **Настраиваемое развертывание** выберите **создать собственный шаблон в редакторе**.

   ![Выберите "создать собственный шаблон в редакторе".](./media/export-from-microsoft-flow-logic-app-template/build-template-in-editor.png)

1. На панели инструментов **изменение шаблона** выберите **загрузить файл**.

   ![Выберите "загрузить файл".](./media/export-from-microsoft-flow-logic-app-template/load-file.png)

1. Перейдите в папку, в которую был сохранен файл шаблона JSON, экспортированный из Power автоматизирующие. Выберите файл шаблона > **Открыть**.

1. После того как в редакторе отобразятся JSON, параметры и ресурсы в шаблоне, выберите **сохранить**.

   ![Сохранение шаблона](./media/export-from-microsoft-flow-logic-app-template/save-template.png)

1. Теперь предоставьте дополнительные сведения о приложении логики.

   1. Выберите или укажите значения входных параметров для шаблона.

      | Свойство. | Описание |
      |----------|-------------|
      | **Подписка** | Подписка Azure, используемая для выставления счетов |
      | **Группа ресурсов** | Группа ресурсов Azure, которая будет использоваться для приложения логики. Можно использовать существующую группу или создать новую. |
      | **Расположение** | Регион Azure, который будет использоваться при создании новой группы ресурсов |
      | **Имя приложения логики** | Имя, используемое для ресурса приложения логики |
      | **Расположение приложения логики** | Регион Azure, в котором вы хотите создать ресурс приложения логики, если он отличается от группы ресурсов Azure |
      | <*имя соединения*> | Одно или несколько имен для ранее созданных подключений, которые может использовать приложение логики <p><p>**Примечание**. Если это приложение логики является первым, все подключения создаются как новые, поэтому можно принять имена по умолчанию. В противном случае можно указать имена для ранее созданных подключений, которые можно использовать в нескольких приложениях логики. |
      |||

      Пример:

      ![Укажите входные параметры для шаблона](./media/export-from-microsoft-flow-logic-app-template/template-input-parameters.png)

   1. Когда все будет готово, ознакомьтесь с **условиями** создания необходимых ресурсов Azure и выставлением счетов по подписке Azure.

   1. Когда вы будете готовы, установите флажок **я принимаю условия**  >  **покупки**.

      Azure развертывает шаблон в качестве приложения логики в указанной группе ресурсов.

1. Все приложения логики, переносимые из Power автоматизируются, развертываются в отключенном состоянии. Перед включением приложения логики Авторизуйте все новые подключения, выполнив следующие действия.

   1. В портал Azure Откройте созданное приложение логики. В меню приложения логики выберите **Конструктор приложений логики**.

      Для каждого подключения, требующего авторизации, отображается значок предупреждения:

      ![Значок предупреждения](./media/export-from-microsoft-flow-logic-app-template/authorize-connections.png)

   1. Для каждого шага, для которого требуется авторизация подключения, разверните этот шаг и выберите **Добавить новый**.

      ![Снимок экрана, на котором показана кнопка "добавить новое", выбранная в окне "подключения" Outlook.](./media/export-from-microsoft-flow-logic-app-template/add-new-connection.png)

   1. Войдите в каждую службу или предоставьте необходимые учетные данные для авторизации подключения.

   1. После обновления подключений на панели инструментов конструктора нажмите кнопку **сохранить**.

1. Когда вы будете готовы активировать приложение логики, в меню приложения логики выберите **Обзор**, а затем выберите **включить**.

   ![Включение приложения логики](./media/export-from-microsoft-flow-logic-app-template/enable-logic-app.png)

1. Чтобы избежать запуска повторяющихся рабочих процессов, убедитесь, что вы деактивируете или удаляете исходный поток.

## <a name="deploy-template-by-using-visual-studio"></a>Развертывание шаблона с помощью Visual Studio

Если вы настроили Visual Studio с [предварительными требованиями](../logic-apps/quickstart-create-logic-apps-with-visual-studio.md#prerequisites) для создания приложений логики, вы можете развернуть экспортированный шаблон для Azure Logic Apps с помощью Visual Studio.

1. В Visual Studio найдите и откройте JSON файл для шаблона приложения логики, экспортированного из Power автоматизировать.

1. В Visual Studio создайте проект **группы ресурсов Azure** , который использует шаблон **приложения логики** , выполнив действия, описанные в разделе [Краткое руководство. Создание автоматизированных задач, процессов и рабочих процессов с помощью Azure Logic Apps-Visual Studio](../logic-apps/quickstart-create-logic-apps-with-visual-studio.md).

   В этом примере создается решение Visual Studio с именем «Импортедлогикапп».

   ![Создание проекта группы ресурсов Azure](./media/export-from-microsoft-flow-logic-app-template/create-azure-resource-group-project.png)

1. После создания решения в обозреватель решений откройте **LogicApp.js** в файле, если файл еще не открыт.

1. Скопируйте содержимое из экспортированного шаблона и перезапишите его содержимое в **LogicApp.js** файла.

1. Перед развертыванием приложения логики Авторизуйте все новые подключения, выполнив следующие действия.

   1. Откройте **LogicApp.jsв** контекстном меню и выберите **Открыть в конструкторе приложений логики**.

      ![Открытие шаблона с помощью конструктора приложений логики](./media/export-from-microsoft-flow-logic-app-template/open-logic-app-designer.png)

   1. При появлении запроса выберите подписку Azure и группу ресурсов, которые вы хотите использовать для развертывания приложения логики.

      ![Выберите подписку Azure и группу ресурсов](./media/export-from-microsoft-flow-logic-app-template/select-azure-subscription-resource-group-deployment.png)

      После того как приложение логики появится в конструкторе, все подключения, требующие авторизации, отображают значки предупреждений:

      ![Подключения со значками предупреждений](./media/export-from-microsoft-flow-logic-app-template/authorize-connections-vs.png)

   1. Для каждого шага, для которого требуется авторизация подключения, разверните этот шаг и выберите **Добавить новый**.

      ![Добавить новое подключение](./media/export-from-microsoft-flow-logic-app-template/add-new-connection-vs.png)

   1. Войдите в каждую службу или предоставьте необходимые учетные данные для авторизации подключения.

   1. Сохраните решение перед развертыванием приложения логики.

1. В Обозреватель решений откройте контекстное меню проекта и выберите пункт **развернуть**  >  **Новый**. Если отобразится запрос на вход в учетную запись Azure, выполните его.

1. При появлении запроса подтвердите подписку Azure, группу ресурсов Azure и другие параметры, которые вы хотите использовать для развертывания, например [файл параметров](../azure-resource-manager/templates/parameter-files.md) , который будет использоваться для передачи значений параметров шаблона, а затем нажмите кнопку **развернуть**.

   ![Подтверждение параметров развертывания](./media/export-from-microsoft-flow-logic-app-template/confirm-azure-subscription-resource-group-deployment.png)

1. Если появится окно **изменение параметров** , укажите имя для ресурса приложения логики в Azure и нажмите кнопку **сохранить**.  

   ![Изменить параметры развертывания](./media/export-from-microsoft-flow-logic-app-template/edit-parameters-deployment.png)

   При запуске развертывания его состояние отобразится в окне **Выходные данные** Visual Studio. Если состояние не отображается, откройте список **Показать вывод из** и выберите свою группу ресурсов Azure. Пример:

   ![Окно вывода](./media/export-from-microsoft-flow-logic-app-template/output-window.png)

   Если какие-либо подключения в приложении логики нуждаются в вводе данных, окно PowerShell открывается в фоновом режиме и запрашивает все необходимые пароли или секретные ключи. После ввода этих сведений развертывание продолжится.

   ![Проверка подлинности подключений](./media/export-from-microsoft-flow-logic-app-template/logic-apps-powershell-window.png)

   После завершения развертывания приложение логики публикуется, но не активируется в портал Azure.

1. Когда вы будете готовы активировать приложение логики на портал Azure, найдите и откройте приложение логики в конструкторе приложений логики. В меню приложения логики выберите **Обзор**, а затем выберите **включить**.

1. Чтобы избежать запуска повторяющихся рабочих процессов, убедитесь, что вы деактивируете или удаляете исходный поток.

Дополнительные сведения об этих шагах развертывания см [. в разделе Краткое руководство. Создание автоматизированных задач, процессов и рабочих процессов с помощью Azure Logic Apps — Visual Studio.](../logic-apps/quickstart-create-logic-apps-with-visual-studio.md#deploy-to-Azure)

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения о [соединителях для Azure Logic Apps](../connectors/apis-list.md)
* Дополнительные сведения о [Azure Logic Apps](../logic-apps/logic-apps-overview.md)
