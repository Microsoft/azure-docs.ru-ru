---
title: Обновления схемы, Июнь – 1-2016
description: Обновленная схема от 1 июня 2016 г. для определений приложений логики в Azure Logic Apps
services: logic-apps
ms.suite: integration
author: kevinlam1
ms.author: klam
ms.reviewer: estfan, logicappspm
ms.topic: article
ms.date: 07/25/2016
ms.openlocfilehash: ccc7df5bfac327fabf05f210764dbe10658b5015
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96000323"
---
# <a name="schema-updates-for-azure-logic-apps---june-1-2016"></a>Обновления схемы для Azure Logic Apps от 1 июня 2016 г.

Эта [обновленная версия схемы](https://schema.management.azure.com/schemas/2016-06-01/Microsoft.Logic.json) и API для Azure Logic Apps включает основные улучшения, которые повышают надежность и простоту использования приложений логики.

* [Области](#scopes) позволяют группировать или вкладывать действия в виде набора действий.
* [Условия и циклы](#conditions-loops) — это действия первого класса.
* Более точный порядок выполняющихся действий со свойством `runAfter` вместо `dependsOn`.

Сведения об обновлении приложений логики с предварительной версии схемы от 1 августа 2015 г. до схемы от 1 июня 2016 г. см. в [соответствующем разделе](#upgrade-your-schema).

<a name="scopes"></a>

## <a name="scopes"></a>Области действия

Эта схема включает области, позволяющие группировать несколько действий или вложить одно действие в другое. Например, одно условие может содержать в себе другое условие. Узнайте больше о [синтаксисе областей](./logic-apps-control-flow-loops.md) или просмотрите базовый пример области, приведенный ниже.

```json
{
   "actions": {
      "Scope": {
         "type": "Scope",
         "actions": {                
            "Http": {
               "inputs": {
                   "method": "GET",
                   "uri": "https://www.bing.com"
               },
               "runAfter": {},
               "type": "Http"
            }
         }
      }
   }
}
```

<a name="conditions-loops"></a>

## <a name="conditions-and-loops-changes"></a>Изменения в условиях и циклах

В предыдущих версиях схемы условия и циклы были параметрами, связанными с каким-то одним действием. В этой схеме отсутствует такое ограничение, поэтому условия и циклы теперь доступны как типы действий. Узнайте больше о [циклах и областях](./logic-apps-control-flow-loops.md), [условиях](../logic-apps/logic-apps-control-flow-conditional-statement.md) или ознакомьтесь со следующим базовым примером условия.

```json
{
   "Condition - If trigger is some trigger": {
      "type": "If",
      "expression": "@equals(triggerBody(), '<trigger-name>')",
      "runAfter": {},
      "actions": {
         "Http_2": {
            "inputs": {
                "method": "GET",
                "uri": "https://www.bing.com"
            },
            "runAfter": {},
            "type": "Http"
         }
      },
      "else": 
      {
         "Condition - If trigger is another trigger": {}
      }  
   }
}
```

<a name="run-after"></a>

## <a name="runafter-property"></a>Свойство runAfter

Свойство заменяет свойство , обеспечивая более точный порядок выполнения действий на основе состояния предыдущих действий. Свойство `dependsOn` указывало, было ли "действие запущено и успешно выполнено", в зависимости от того, каким было завершение предыдущего действия: успешным, неудавшимся или пропущенным, а не от количества раз, когда вы хотели запустить действие. Свойство `runAfter` обеспечивает гибкость в виде объекта, который указывает все имена действий, а затем выполняется. Оно также определяет массив состояний, которые можно использовать в качестве триггеров. Например, если вы хотите, чтобы действие выполнялось после того, как действие A успешно завершено, а также после того, как действие B завершилось успешно или неудачно, настройте свойство `runAfter`.

```json
{
   // Other parts in action definition
   "runAfter": {
      "A": ["Succeeded"],
      "B": ["Succeeded", "Failed"]
    }
}
```

## <a name="upgrade-your-schema"></a>Обновление схемы

Чтобы обновить схему [до последней версии](https://schema.management.azure.com/schemas/2016-06-01/Microsoft.Logic.json), необходимо предпринять несколько шагов. Вот что входит в процесс обновления: запуск скрипта обновления, сохранение в качестве нового приложения логики и, если нужно, перезапись предыдущего приложения логики.

1. Откройте приложение логики на портале Azure.

2. Перейдите к разделу **Обзор**. На панели инструментов приложения логики выберите **Обновить схему**.
   
   ![Выбор параметра "Обновить схему"][1]
   
   Обновленное определение возвращается. При необходимости его можно скопировать и вставить в определение ресурса. 

   > [!IMPORTANT]
   > *Убедитесь,* что вы выбрали **Сохранить как**, чтобы в обновленном приложении логики все ссылки на подключение были действительными.

3. Нажмите кнопку **Сохранить как** на панели инструментов колонки обновления.

4. Введите имя и состояние логики. Чтобы развернуть обновленное приложение логики, выберите **Создать**.

5. Убедитесь, что обновленное приложение логики работает правильно.
   
   > [!NOTE]
   > Если вы используете триггер запуска вручную или триггер запроса, в новом приложении логики URL-адрес обратного вызова будет новым. Проверьте новый URL-адрес, чтобы убедиться, что приложение работает полноценно. Вы можете клонировать имеющееся приложение логики, чтобы сохранить предыдущие URL-адреса.

6. *Необязательно.* Чтобы перезаписать предыдущее приложение логики, заменив его новой версией схемы, щелкните **Клонировать** на панели инструментов возле значка **Обновить схему**. Этот шаг необходим, только если нужно сохранить код ресурса или URL-адрес триггера запроса вашего приложения логики.

## <a name="upgrade-tool-notes"></a>Примечания о средстве обновления

### <a name="mapping-conditions"></a>Условия сопоставления

В обновленном определении это средство в качестве области максимально эффективно собирает вместе действия ветвления true и false. В частности, шаблон конструктора `@equals(actions('a').status, 'Skipped')` отображается как действие `else`. Но если средство обнаруживает нераспознаваемые шаблоны, оно создает отдельные условия для ветвей true и false. При необходимости можно сопоставить действия после обновления.

#### <a name="foreach-loop-with-condition"></a>Цикл foreach с условием

В новой схеме можно использовать действие фильтра для репликации шаблона цикла, который использует цикл **For each** с одним условием для каждого элемента. Однако изменение происходит автоматически при обновлении. Условие становится действием фильтра до запуска цикла **For each**, чтобы вернулся только массив элементов, которые соответствуют условию. Этот массив передается в действие **For each**. Пример см. в статье [Циклы, области действия и индивидуальная обработка приложений логики](./logic-apps-control-flow-loops.md).

### <a name="resource-tags"></a>Теги ресурсов

После обновления теги ресурсов удаляются, поэтому их нужно сбросить для обновленного рабочего процесса.

## <a name="other-changes"></a>Другие изменения

### <a name="renamed-manual-trigger-to-request-trigger"></a>Переименование триггера запуска вручную на триггер запроса

Тип триггера `manual` устарел, поэтому он переименован на `request` с типом `http`. Это изменение лучше соответствует типу шаблона, для построения которого используется триггер.

### <a name="new-filter-action"></a>Новое действие "фильтр"

Для фильтрации большого массива в меньший набор элементов новый тип `filter` принимает массив и условие, оценивает соответствие каждого элемента условию и возвращает только те элементы, которые соответствуют условию.

### <a name="restrictions-for-foreach-and-until-actions"></a>Ограничения действий foreach и until

Циклы `foreach` и `until` ограничены одним действием.

### <a name="new-trackedproperties-for-actions"></a>Новое свойство trackedProperties для действий

Теперь у действий может быть дополнительное свойство (элемент того же уровня, что и `runAfter` и `type`) с именем `trackedProperties`. Этот объект указывает, что некоторые выходные или входные данные действия нужно включить в телеметрию службы диагностики Azure. Эта телеметрия отправляется в рамках рабочего процесса. Пример:

``` json
{
   "Http": {
      "inputs": {
         "method": "GET",
         "uri": "https://www.bing.com"
      },
      "runAfter": {},
      "type": "Http",
      "trackedProperties": {
         "responseCode": "@action().outputs.statusCode",
         "uri": "@action().inputs.uri"
      }
   }
}
```

## <a name="next-steps"></a>Дальнейшие действия

* [Создание определений приложений логики](../logic-apps/logic-apps-author-definitions.md)
* [Автоматизация развертывания приложений логики](logic-apps-azure-resource-manager-templates-overview.md)

<!-- Image references -->
[1]: ./media/logic-apps-schema-2016-04-01/upgradeButton.png
