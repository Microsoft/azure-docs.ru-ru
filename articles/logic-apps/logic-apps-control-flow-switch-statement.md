---
title: Добавление операторов switch в рабочие процессы
description: Создание операторов switch, которые управляют действиями рабочего процесса на основе определенных значений в Azure Logic Apps
services: logic-apps
ms.suite: integration
ms.reviewer: klam, logicappspm
ms.topic: article
ms.date: 10/08/2018
ms.openlocfilehash: 62f147104cf9e0e1605b02a420cb6d20190361b8
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "89657458"
---
# <a name="create-switch-statements-that-run-workflow-actions-based-on-specific-values-in-azure-logic-apps"></a>Создание операторов switch, которые запускают действия рабочего процесса на основе определенных значений в Azure Logic Apps

Оператор *switch* позволяет выполнять определенные действия на основе значений объектов, выражений или токенов. Эта структура оценивает объект, выражение или маркер, выбирает вариант, который соответствует результату, и выполняет определенные действия только для этого варианта. При выполнении оператора switch результат должен совпадать только с одним вариантом.

Например, предположим, что вы хотите, чтобы приложение логики выполняло различные действия на основе параметра, выбранного в сообщении. В этом примере приложение логики проверяет RSS-канал веб-сайта для обнаружения нового содержимого. Если в RSS-канале появляется новый элемент, приложение логики отправляет сообщение утверждающему лицу. В зависимости от того, что выбрал утверждающий ("Утвердить" или "Отклонить"), приложение логики выполняет различные действия.

> [!TIP]
> Как и в других языках программирования, операторы switch поддерживают только операторы равенства. Если вам нужны другие операторы отношения (к примеру, оператор greater than), используйте [условный оператор](../logic-apps/logic-apps-control-flow-conditional-statement.md).
> Чтобы выполнение было детерминированным, варианты должны содержать уникальные статические значения, а не динамические маркеры или выражения.

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure. Если у вас нет ее, вы можете [зарегистрироваться для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* Чтобы выполнить пример в этой статье, [Создайте пример приложения логики](../logic-apps/quickstart-create-first-logic-app-workflow.md) с учетной записью Outlook.com или рабочей или учебной учетной записью.

  1. Когда вы добавляете действие для отправки сообщения, найдите и выберите действие **Send an approval email** (Отправить сообщение с утверждением).

     ![Выбор Send an approval email (Отправить сообщение с утверждением)](./media/logic-apps-control-flow-switch-statement/send-approval-email-action.png)

  1. Заполните необходимые поля, например адрес электронной почты получателя письма с утверждением. 
  В разделе **Параметры пользователя** введите "Утвердить", "Отклонить".

     ![Ввод сведений о сообщении](./media/logic-apps-control-flow-switch-statement/send-approval-email-details.png)

## <a name="add-switch-statement"></a>Добавление оператора switch

1. В этом примере добавьте оператор switch в конце вашего рабочего процесса. После выполнения последнего шага выберите **Новый шаг**.

   Если вы хотите добавить оператор switch между шагами, наведите указатель мыши на стрелку, где его нужно добавить. Щелкните появившийся знак **плюс** ( **+** ), затем выберите **Добавить действие**.

1. В поле поиска введите слово "switch" в качестве фильтра. Выбор действия **Switch — Элемент управления**.

   ![Добавление switch](./media/logic-apps-control-flow-switch-statement/add-switch-statement.png)

   Появится оператор switch с одним вариантом и вариантом по умолчанию. 
   По умолчанию в операторе switch должен быть создан по меньшей мере один вариант, помимо варианта по умолчанию. 

   ![Оператор switch являается пустым по умолчанию](./media/logic-apps-control-flow-switch-statement/empty-switch.png)

1. Щелкните внутри поля **On**, чтобы отобразился список динамического содержимого. Выберите в списке поле **SelectedOption**, выходные данные которого определяют действие для выполнения. 

   ![Выберите "SelectedOption"](./media/logic-apps-control-flow-switch-statement/select-selected-option.png)

1. Для обработки вариантов, когда утверждающий выбирает `Approve` или `Reject`, добавьте другой вариант между **Вариант** и **По умолчанию**. 

   ![Добавление еще одного варианта](./media/logic-apps-control-flow-switch-statement/switch-plus.png)

1. Добавьте следующие действия в соответствующие варианты:

   | № варианта | **SelectedOption** | Действие |
   |--------|--------------------|--------|
   | Вариант 1 | **Утвердить** | Добавьте действие Outlook **Send an email** (Отправить сообщение), чтобы отправить сведения об элементе RSS только после того, как утверждающий выбрал **Утвердить**. |
   | Вариант 2 | **Отклонить** | Добавьте действие Outlook **Send an email** (Отправить сообщение), чтобы уведомить других утверждающих о том, что элемент RSS был отклонен. |
   | По умолчанию | None | Никаких действий не требуется. В этом примере вариант **По умолчанию** пуст, потому что для **SelectedOption** доступны только два варианта. |
   |||

   ![Оператор switch готов](./media/logic-apps-control-flow-switch-statement/finished-switch.png)

1. Сохраните приложение логики. 

   Чтобы вручную протестировать этот пример, выберите **Запуск**. Приложение логики должно найти новый элемент RSS и отправить письмо с утверждением. 
   Выберите **Утвердить**, чтобы просмотреть результаты.

## <a name="json-definition"></a>Определение JSON

Теперь, когда приложение логики создано с помощью оператора switch, можно рассмотреть определение программного высокоуровневого кода оператора switch.

``` json
"Switch": {
   "type": "Switch",
   "expression": "@body('Send_approval_email')?['SelectedOption']",
   "cases": {
      "Case": {
         "actions": {
           "Send_an_email": {}
         },
         "case" : "Approve"
      },
      "Case_2": {
         "actions": {
           "Send_an_email_2": {}
         },
         "case": "Reject"
      }
   },
   "default": {
      "actions": {}
   },
   "runAfter": {
      "Send_approval_email": [
         "Succeeded"
      ]
   }
}
```

| Метка | Описание |
|-------|-------------|
| `"Switch"`         | Имя оператора switch, которое можно изменить для большей удобочитаемости. |
| `"type": "Switch"` | Указывает на то, что конструкция является оператором switch. |
| `"expression"`     | В этом примере указывает на вариант, выбранный подтверждающим лицом, который сравнивается с указанными далее в определении вариантами значений. |
| `"cases"` | Определяет любое число вариантов. Для каждого варианта `"Case_*"` является именем по умолчанию, которое можно изменить для большей удобочитаемости. |
| `"case"` | Указывает значение варианта, которое оператор switch использует для сравнения. Это значение должно быть постоянным и уникальным. Если ни один вариант не соответствует результату выражения switch, выполняются действия в разделе `"default"`. | 
| | | 

## <a name="get-support"></a>Получение поддержки

* Если у вас есть вопросы, посетите [страницу вопросов и ответов по Azure Logic Apps на сайте Майкрософт](/answers/topics/azure-logic-apps.html).
* Отправить предложения по поводу возможности или проголосовать за нее вы можете на [сайте отзывов пользователей Azure Logic Apps](https://aka.ms/logicapps-wish).

## <a name="next-steps"></a>Дальнейшие действия

* [Conditional statements: Run steps based on a condition in logic apps](../logic-apps/logic-apps-control-flow-conditional-statement.md) (Условные операторы. Выполнение шагов на основе условия в приложениях логики)
* [Loops: Process arrays or repeat actions until a condition is met](../logic-apps/logic-apps-control-flow-loops.md) (Циклы. Обработка массивов или повторение действий до выполнения условия)
* [Create or join parallel branches in your logic app](../logic-apps/logic-apps-control-flow-branches.md) (Создание или присоединение параллельных ветвей в приложении логики)
* [Области. Выполнение шагов на основе состояния группы в приложениях логики](../logic-apps/logic-apps-control-flow-run-steps-group-scopes.md)
