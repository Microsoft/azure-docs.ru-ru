---
title: Создание выполняемых по расписанию рабочих процессов автоматизации с помощью Azure
description: Учебник по созданию выполняемого по расписанию повторяющегося рабочего процесса автоматизации, который интегрируется в облачные службы с помощью Azure Logic Apps.
services: logic-apps
ms.suite: integration
ms.reviewer: logicappspm
ms.topic: tutorial
ms.custom: mvc
ms.date: 03/24/2021
ms.openlocfilehash: 0dab2f49043f3a59dd4f06633e3f0228fc39a424
ms.sourcegitcommit: 4b0e424f5aa8a11daf0eec32456854542a2f5df0
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/20/2021
ms.locfileid: "107792099"
---
# <a name="tutorial-create-schedule-based-and-recurring-automation-workflows-with-azure-logic-apps"></a>Руководство по Создание выполняемых по расписанию повторяющихся рабочих процессов автоматизации с помощью Azure Logic Apps

В этом учебнике показано, как создать пример [приложения логики](../logic-apps/logic-apps-overview.md) и автоматизировать рабочий процесс, повторяющийся по расписанию. В частности, в этом примере приложение логики проверяет время поездки между двумя пунктами с учетом трафика и выполняется каждый будний день утром. Если время превышает определенный предел, приложение логики отправляет электронное письмо с указанием времени в пути и дополнительного времени, необходимого, чтобы прибыть в пункт назначения. Рабочий процесс включает в себя различные шаги и начинается с запуска триггера по расписанию, за которым следует действие в Картах Bing, действие по выполнению операций с данными, действие потока управления и действие уведомления по электронной почте.

В этом руководстве описано следующее:

> [!div class="checklist"]
> * Создание пустого приложения логики.
> * Добавьте триггер повторения, указывающий расписание для приложения логики.
> * Добавьте действие для Карт Bing, которое получает время поездки для маршрута.
> * Добавление действия, которое создает переменную, преобразует время в пути из секунд в минуты и сохраняет результат в переменной.
> * Добавление условия, которое сравнивает время в пути с заданным ограничением.
> * Добавление действия, которое отправляет электронное сообщение, если время в пути превышает ограничение.

По завершении приложение логики будет выглядеть как этот высокоуровневый рабочий процесс:

![Снимок экрана, на котором показана общая схема рабочего процесса примера приложения логики.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/check-travel-time-overview.png)

## <a name="prerequisites"></a>Предварительные требования

* Учетная запись и подписка Azure. Если у вас нет ее, вы можете [зарегистрироваться для получения бесплатной учетной записи Azure](https://azure.microsoft.com/free/).

* Учетная запись электронной почты поставщика услуг электронной почты, поддерживаемого Logic Apps, например Office 365 Outlook, Outlook.com или Gmail. Сведения о дополнительных поставщиках см. в [списке соединителей](/connectors/). Для работы с этим кратким руководством потребуется Office 365 Outlook и рабочая или учебная учетная запись. Если используется другая учетная запись электронной почты, общие шаги остаются неизменными, однако пользовательский интерфейс может несколько отличаться.

  > [!IMPORTANT]
  > Только учетные записи для бизнеса G-Suite могут использовать соединитель Gmail без ограничений в приложениях логики. Если у вас есть учетная запись потребителя Gmail, вы можете использовать этот соединитель только с определенными утвержденными Google службами. Кроме того, вы можете [создать клиентское приложение Google, которое будет использоваться для проверки подлинности в соединителе Gmail](/connectors/gmail/#authentication-and-bring-your-own-application). Дополнительные сведения см. в статье [Политики безопасности и конфиденциальности данных для соединителей Google в Azure Logic Apps](../connectors/connectors-google-data-security-privacy-policy.md).

* Чтобы получить время в пути для маршрута, требуется ключ доступа для API Карт Bing. Чтобы получить этот ключ, выполните шаги [для получения ключа Карт Bing](/bingmaps/getting-started/bing-maps-dev-center-help/getting-a-bing-maps-key).

* Если для приложения логики нужно реализовать обмен данными через брандмауэр, который допускает трафик только на определенные IP-адреса, этот брандмауэр должен разрешать доступ [входящим](logic-apps-limits-and-config.md#inbound) *и* [исходящим](logic-apps-limits-and-config.md#outbound) IP-адресам, используемым службой Logic Apps или средой выполнения в регионе Azure, где существует ваше приложение логики. Если приложение логики также использует [управляемые соединители](../connectors/managed.md) (например, соединитель Office 365 Outlook или соединитель SQL) либо [настраиваемые соединители](/connectors/custom-connectors/), брандмауэр также должен разрешать доступ *всем* [исходящим IP-адресам управляемого соединителя](logic-apps-limits-and-config.md#outbound) в регионе Azure приложения логики.

## <a name="create-your-logic-app"></a>Создание приложения логики

1. Войдите на [портал Azure](https://portal.azure.com) с помощью учетных данных учетной записи Azure. На домашней странице Azure выберите **Создать ресурс**.

1. В меню Azure Marketplace выберите **Интеграция** > **Приложение логики**.

   ![Снимок экрана, на котором показано меню Azure Marketplace с выбранными пунктами "Интеграция" и "Приложение логики".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/create-new-logic-app-resource.png)

1. В области **Приложение логики** укажите сведения о приложении логики, которое необходимо создать.

   ![Снимок экрана, на котором показана область создания приложения логики и сведения, которые нужно для него указать.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/create-logic-app-settings.png)

   | Свойство | Значение | Описание |
   |----------|-------|-------------|
   | **Подписка** | <*Azure-subscription-name*> | Имя подписки Azure. В этом примере используется `Pay-As-You-Go`. |
   | **Группа ресурсов** | LA-TravelTime-RG | Имя [группы ресурсов Azure](../azure-resource-manager/management/overview.md), используемой для упорядочения связанных ресурсов. В этом примере показано создание группы ресурсов с именем `LA-TravelTime-RG`. |
   | **Имя** | LA-TravelTime | Имя приложения логики, которое может содержать только буквы, цифры, дефисы (`-`), символы подчеркивания (`_`), круглые скобки (`(`, `)`) и точки (`.`). В этом примере используется `LA-TravelTime`. |
   | **Расположение** | западная часть США | Регион для хранения данных приложения логики. В этом примере используется `West US`. |
   | **Служба Log Analytics** | Выкл. | Сохраните параметр **Выкл.** для журнала ведения диагностики. |
   ||||

1. Когда все будет готово, выберите **Просмотр и создание**. После того, как Azure проверит сведения о приложении логики, выберите **Создать**.

1. После развертывания приложения в Azure выберите **Перейти к ресурсу**.

   В Azure откроется область выбора шаблона приложения логики, в которой отображается ознакомительное видео, часто используемые триггеры и схемы шаблонов приложений логики.

1. Прокрутите вниз раздел с видео и часто используемыми триггерами до раздела **Шаблоны** и выберите **Пустое приложение логики**.

   ![Снимок экрана, на котором показана область выбора шаблона Logic Apps с выбранным вариантом "Пустое приложение логики".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/select-logic-app-template.png)

Затем добавьте [триггер](../logic-apps/logic-apps-overview.md#logic-app-concepts) повторения, который будет запускать рабочий процесс по заданному расписанию. Каждое приложение логики должно запускаться по триггеру, который активируется, когда происходит определенное событие или если новые данные соответствуют заданным условиям. Дополнительные сведения см. в статье о [создании первого приложения логики](../logic-apps/quickstart-create-first-logic-app-workflow.md).

## <a name="add-the-recurrence-trigger"></a>Добавление триггера повторения

1. В поле поиска конструктора Logic Apps введите `recurrence` и выберите триггер с именем **Повторение**.

   ![Снимок экрана, на котором показано поле поиска конструктора Logic Apps, содержащее условие поиска "recurrence", и список "Триггеры", в котором отображается триггер "Повторение".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/add-schedule-recurrence-trigger.png)

1. На фигуре **Повторение** нажмите кнопку с **многоточием** ( **...** ), а затем нажмите кнопку **Переименовать**. Переименуйте триггер, используя это описание: `Check travel time every weekday morning`.

   ![Снимок экрана, на котором выделена кнопка с многоточием, открыт список "Параметры" и выбрана команда "Переименовать".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/rename-recurrence-schedule-trigger.png)

1. В триггере измените эти свойства так, как указано и показано в этой статье.

   ![Снимок экрана, демонстрирующий изменение интервала и частоты срабатывания триггера.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/change-interval-frequency.png)

   | Свойство | Обязательно | Значение | Описание |
   |----------|----------|-------|-------------|
   | **Интервал** | Да | 1 | Количество интервалов ожидания между проверками. |
   | **Частота** | Да | Неделя | Единица измерения времени, используемая для повторения. |
   |||||

1. В разделах **Интервал** и **Частота** откройте список **Добавить новый параметр** и выберите эти свойства для добавления в триггер.

   * **В эти дни**
   * **В эти часы**
   * **В эти минуты**

   ![Снимок экрана, на котором показан открытый список "Добавить новый параметр" и выбраны следующие свойства: "В эти дни", "В эти часы" и "В эти минуты".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/add-trigger-properties.png)

1. Теперь задайте значения для дополнительных свойств, как показано здесь.

   ![Снимок экрана, на котором показаны дополнительные свойства со значениями, описанными в следующей таблице.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/recurrence-trigger-property-values.png)

   | Свойство | Значение | Описание |
   |----------|-------|-------------|
   | **В эти дни** | "Понедельник", "Вторник", "Среда", "Четверг", "Пятница" | Этот параметр доступен, только если для параметра **Частота** задано значение **Неделя**. |
   | **В эти часы** | 7, 8, 9 | Этот параметр доступен, только если для параметра **Частота** задано значение **Неделя** или **День**. Для такого повторения выберите время суток. Этот пример выполняется по часовым меткам `7`, `8` и `9`. |
   | **В эти минуты** | 0, 15, 30, 45 | Этот параметр доступен, только если для параметра **Частота** задано значение **Неделя** или **День**. Для такого повторения выберите минуты в течение суток. Этот пример выполняется каждые 15 минут, начиная с отметки нулевого часа. |
   ||||

   Этот триггер срабатывает каждый день недели, каждые 15 минут с 7:00 до 9:45. В поле **Просмотр** отображается расписание повторения. Дополнительные сведения см. в статье [Планирование регулярно выполняемых задач и рабочих процессов с помощью приложений логики](../connectors/connectors-native-recurrence.md) и разделе [Триггер повторения](../logic-apps/logic-apps-workflow-actions-triggers.md#recurrence-trigger).

1. Чтобы скрыть сведения о триггере, сверните фигуру, щелкнув внутри заголовка фигуры.

   ![Снимок экрана, на котором показана свернутая фигура триггера.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/collapse-trigger-shape.png)

1. Сохраните приложение логики. На панели инструментов конструктора щелкните **Сохранить**.

Приложение логики теперь находится в портале Azure, но никакие действия, кроме триггеров, срабатывающих по указанному расписанию, не выполняются. Итак, добавим действие, отвечающее при срабатывании триггера.

## <a name="get-the-travel-time-for-a-route"></a>Получение данных о времени в пути для маршрута

Теперь, когда у вас есть триггер, добавьте [действие](../logic-apps/logic-apps-overview.md#logic-app-concepts), которое получает данные о времени в пути между двумя местами. Logic Apps предоставляет соединитель для API Карт Bing, чтобы вы могли легко получить эту информацию. Прежде чем начать эту задачу, убедитесь, что у вас есть ключ API Карт Bing, как описано в предварительных требованиях для этого руководства.

1. В конструкторе приложений логики в триггере "Повторение" выберите **Новый шаг**.

1. В разделе **Choose an operation** (Выберите операцию) выберите **Стандартная**. В поле поиска введите `bing maps` и выберите действие с именем **Get route** (Получить маршрут).

   ![Снимок экрана, на котором показан список выбора операций, отфильтрованный по действиям "Карты Bing", и выбрано действие Get route (Получить маршрут).](./media/tutorial-build-scheduled-recurring-logic-app-workflow/select-get-route-action.png)

1. Если у вас нет подключения к Картам Bing, появится запрос на его установку. Укажите сведения о подключении, как показано и описано в этой статье, а затем выберите **Создать**.

   ![Снимок экрана, на котором показано окно подключения к Картам Bing с указанным именем подключения и ключом API Карт Bing.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/create-maps-connection.png)

   | Свойство | Обязательно | Значение | Описание |
   |----------|----------|-------|-------------|
   | **Имя соединения** | Да | BingMapsConnection | Укажите имя подключения. В этом примере используется `BingMapsConnection`. |
   | **Ключ API**. | Да | <*Bing-Maps-API-key*> | Введите ключ API Карт Bing, полученный ранее. Если у вас нет ключа Карт Bing, узнайте, [как получить его](/bingmaps/getting-started/bing-maps-dev-center-help/getting-a-bing-maps-key). |
   |||||

1. Переименуйте действие с использованием этого описания: `Get route and travel time with traffic`.

1. В действии откройте **Добавить новый список параметров** и выберите эти свойства.

   * **Optimize** (Оптимизация)
   * **Distance unit** (Единица расстояния)
   * **Travel mode** (Режим движения)

   ![Снимок экрана, на котором выбраны свойства Get route (Получить маршрут), Optimize (Оптимизация), Distance unit (Единица расстояния) и Travel mode (Режим движения).](./media/tutorial-build-scheduled-recurring-logic-app-workflow/add-bing-maps-action-properties.png) 

1. Теперь введите значения для дополнительных свойств, как показано здесь.

   ![Снимок экрана, на котором показаны дополнительные значения свойств для действия Get route (Получить маршрут).](./media/tutorial-build-scheduled-recurring-logic-app-workflow/get-route-action-settings.png) 

   | Свойство | Обязательно | Значение | Описание |
   |----------|----------|-------|-------------|
   | **Пункт маршрута 1** | Да | <*исходный пункт*> | Начало маршрута. В этом примере указан пример начального адреса. |
   | **Пункт маршрута 2** | Да | <*пункт назначения*> | Место назначения маршрута. В этом примере указан пример адреса назначения. |
   | **Optimize** (Оптимизация) | Нет | timeWithTraffic | Параметр для оптимизации маршрута, например расстояние, время в пути в соответствии с текущей загрузкой дорог и т. д. Выберите значение параметра **timeWithTraffic**. |
   | **Distance unit** (Единица расстояния) | Нет | <*выбранная единица*> | Единицы измерения расстояния для маршрута. В этом примере в качестве единицы измерения используется **миля**. |
   | **Travel mode** (Режим движения) | Нет | Driving (Движение на автомобиле) | Режим движения для маршрута. Выберите режим **Автомобиль**. |
   |||||

   Дополнительные сведения об этих параметрах и значениях см. в статье [Расчет маршрута](/bingmaps/rest-services/routes/calculate-a-route).

1. На панели инструментов конструктора щелкните **Сохранить**.

Затем создайте переменную, чтобы преобразовать и сохранить текущее время в минутах, а не в секундах. Таким образом можно избежать повторного преобразования и проще использовать значение на последующих шагах. 

## <a name="create-a-variable-to-store-travel-time"></a>Создание переменной для сохранения времени в пути

В некоторых случаях можно выполнять операции с данными в своем рабочем процессе, а затем использовать результаты в последующих действиях. Чтобы повторно использовать результаты и ссылаться на них, их нужно сохранить. Для этого следует создать переменные, в которых они будут сохраняться после их обработки. Переменные можно создать только на верхнем уровне приложения логики.

По умолчанию действие **Get route** (Получить маршрут) возвращает текущее время в пути в секундах в соответствии с загрузкой дорог из свойства **Travel Duration Traffic** (Трафик длительности пути). Преобразовав и сохранив это значение в минутах, вы упрощаете его повторное использование, при котором не потребуется преобразование.

1. В конструкторе в действии **Get route** (Получить маршрут) выберите **Новый шаг**.

1. В разделе **Choose an operation** (Выберите операцию) выберите **Встроено**. В поле поиска введите `variables` и выберите действие с именем **Инициализировать переменную**.

   ![Снимок экрана, на котором показано выбранное действие "Инициализировать переменную".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/select-initialize-variable-action.png)

1. Переименуйте действие с использованием этого описания: `Create variable to store travel time`.

1. Укажите эти сведения для переменной, как показано в этой таблице и в инструкциях под ней.

   | Свойство | Обязательно | Значение | Описание |
   |----------|----------|-------|-------------|
   | **Имя** | Да | travelTime | Имя для переменной. В этом примере используется `travelTime`. |
   | **Тип** | Да | Целое число | Тип данных для переменной. |
   | **Значение** | Нет | Выражение, преобразующее текущее время в секундах в минуты (см. шаги в этой таблице). | Начальное значение для переменной |
   |||||

   1. Чтобы создать выражение для свойства **Значение**, щелкните внутри поля для отображения списка динамического содержимого. При необходимости расширяйте окно браузера, пока не появится динамический список. В списке динамическое содержимое выберите **Выражение**, чтобы открыть редактор выражений.

      ![Снимок экрана, показывающий действие "Инициализировать переменную" с курсором в свойстве "Значение", при выборе которого открывается список динамического содержимого.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/initialize-variable-action-settings.png)

      В списке динамическое содержимое отображаются выходные данные предыдущих действий, которые можно выбрать в качестве входных данных для последующих действий в рабочем процессе. Список динамического содержимого включает в себя редактор выражений, который можно использовать для выбора функций, выполняющих операции в выражении. Этот редактор выражений доступен только в списке динамического содержимого.

   1. В редакторе выражений введите следующее выражение: `div(,60)`

      ![Снимок экрана, на котором показан редактор выражений с введенным выражением "div(,60)".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/initialize-variable-action-settings-2.png)

   1. Установите курсор внутри выражения между левой скобкой ( **(** ) и запятой ( **,** ) и выберите **Динамическое содержимое**.

      ![Снимок экрана, на котором показано место размещения курсора в выражении "div(,60)" и выделена вкладка "Динамическое содержимое".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/initialize-variable-action-settings-3.png)

   1. В списке динамического содержимого выберите значение свойства **Travel Duration Traffic** (Трафик длительности пути).

      ![Снимок экрана, на котором показано выбранное значение свойства Travel Duration Traffic (Трафик длительности пути).](./media/tutorial-build-scheduled-recurring-logic-app-workflow/initialize-variable-action-settings-4.png)

   1. Как только значение свойства в выражении разрешится, нажмите кнопку **ОК**.

      ![Снимок экрана, на котором показана выбранная кнопка "ОК".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/initialize-variable-action-settings-5.png)

      Свойство **Value** теперь отображается, как показано ниже:

      ![Снимок экрана, показывающий свойство "Значение" с разрешенным выражением.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/initialize-variable-action-settings-6.png)

1. Сохраните приложение логики.

Затем добавьте условие, которое проверяет, превышает ли текущее время в пути определенное ограничение.

## <a name="compare-the-travel-time-with-limit"></a>Сравнение времени в пути с ограничением

1. Под действием **Create variable to store travel time** (Создать переменную для сохранения времени в пути) выберите **Новый шаг**.

1. В разделе **Choose an operation** (Выберите операцию) выберите **Встроено**. В поле поиска введите `condition`. В списке действия выберите действие с именем **Условие**.

   ![Снимок экрана, на котором выбрано действие "Условие"](./media/tutorial-build-scheduled-recurring-logic-app-workflow/select-condition-action.png)

1. Переименуйте условие, используя описание: `If travel time exceeds limit`.

1. Создайте условие, которое проверяет, превышает ли значение свойства **travelTime** заданное ограничение, как показано ниже:

   1. Внутри условия, в его левой части, щелкните мышью в поле **Выберите значение**.

   1. В появившемся списке динамического содержимого выберите в разделе **Переменные** свойство с именем **travelTime**.

      ![Снимок экрана, на котором в левой части условия отображается поле "Выберите значение", открыт список динамического содержимого и выбрано свойство "travelTime".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/build-condition-left-side.png)

   1. В среднем поле сравнения выберите оператор с именем **больше**.

   1. В левой части условия в поле **Выберите значение** введите это предельное значение: `15`

      После ввода значения условие должно выглядеть приблизительно так, как показано в примере ниже:

      ![Снимок экрана, на котором показано выполненное условие для сравнения времени поездки с указанным предельным значением.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/build-condition-check-travel-time.png)

1. Сохраните приложение логики.

Затем добавьте действие, выполняемое, когда время в пути превышает ограничение.

## <a name="send-email-when-limit-exceeded"></a>Отправка электронного сообщения при превышении ограничения

Теперь добавьте действие, которое отправляет сообщение электронной почты, когда время в пути превышает предельное значение. Это сообщение электронной почты содержит текущее время в пути и дополнительное время, необходимое для поездки по заданному маршруту.

1. Внутри ветви **Истинна** условия выберите **Добавить действие**.

1. В разделе **Choose an operation** (Выберите операцию) выберите **Стандартная**. В поле поиска введите `send email`. Список возвращает много результатов, поэтому сначала выберите нужный соединитель электронной почты, который поможет его отфильтровать.

   Например, если у вас есть учетная запись электронной почты Outlook, выберите соединитель для этого типа учетной записи:

   * Для рабочих или учебных учетных записей Azure выберите **Office 365 Outlook**.
   * Для личных учетных записей Майкрософт выберите **Outlook.com**.

   Для продолжения в этом примере следует выбрать Office 365 Outlook.

   ![Снимок экрана, на котором показан список Choose an operation (Выберите операцию) с выбранной категорией "Стандартная" и соединителем Office 365 Outlook.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/add-action-send-email.png)

1. Когда отобразятся действия соединителя, выберите действие отправки сообщения, например:

   ![Снимок экрана, на котором выбрано действие Send an email (Отправить электронное письмо).](./media/tutorial-build-scheduled-recurring-logic-app-workflow/select-send-email-action.png)

1. Если у вас еще нет подключения, войдите и пройдите проверку подлинности для доступа к своей учетной записи электронной почты при появлении соответствующего запроса.

   Azure Logic Apps создаст подключение к учетной записи электронной почты.

1. Переименуйте действие с использованием этого описания: `Send email with travel time`.

1. В поле свойства **Кому** введите адрес электронной почты получателя. Для тестировании можно использовать свой адрес.

1. В поле свойства **Тема** укажите тему электронного сообщения и включите переменную **travelTime**, выполнив приведенные ниже действия.

   1. Введите текст `Current travel time (minutes):` с пробелом. Оставьте курсор в поле **Тема**, чтобы список динамического содержимого оставался открытым.

   1. В списке динамическое содержимое в заголовке **Переменные** выберите **Дополнительно**, чтобы появилась переменная с именем **travelTime**.

      ![Снимок экрана, на котором показан список динамического содержимого с разделом "Переменные" и выбранным элементом "Дополнительно".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/find-travelTime-variable.png)

      > [!NOTE]
      > В списке динамического содержимого переменная **travelTime** не отображается автоматически, так как свойство **Тема** принимает строковое значение, а **travelTime** — целочисленное значение.

      ![Снимок экрана, на котором показан список динамического содержимого с выбранной переменной travelTime.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/select-travelTime-variable.png)

1. Для свойства **Текст** укажите текст сообщения электронной почты, выполнив следующие действия.

   1. Введите текст `Add extra travel time (minutes):` с пробелом. Оставьте курсор в поле **Текст**, чтобы список динамического содержимого оставался открытым.

   1. В списке динамическое содержимое выберите **Выражение**, чтобы открыть редактор выражений.

      ![Снимок экрана, на котором отображается список динамического содержимого с выбранной вкладкой "Выражение".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/send-email-body-settings.png)

   1. В редакторе выражений введите `sub(,15)`, чтобы рассчитать, на сколько минут превышено предельное значение: 

      ![Снимок экрана, на котором показан редактор выражений с введенным выражением "sub(,15)".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/send-email-body-settings-2.png)

   1. Установите курсор внутри выражения между левой скобкой ( **(** ) и запятой ( **,** ) и выберите **Динамическое содержимое**.

      ![Снимок экрана, на котором показано место размещения курсора в выражении "sub(,15)" и выделена вкладка "Динамическое содержимое".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/send-email-body-settings-3.png)

   1. В разделе **Переменные** выберите **travelTime**.

      ![Снимок экрана, на котором показан список динамического содержимого с выбранной переменной travelTime.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/send-email-body-settings-4.png)

   1. Как только свойство в выражении разрешится, нажмите кнопку **ОК**.

      ![Снимок экрана, на котором показан список динамического содержимого и выделена кнопка "ОК".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/send-email-body-settings-5.png)

      Свойство **Body** теперь отображается, как показано ниже:

      ![Снимок экрана, на котором показан список динамического содержимого с выражением, разрешенным в свойстве "Текст" действия электронной почты.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/send-email-body-settings-6.png)

1. Сохраните приложение логики.

Затем протестируйте и запустите приложение логики, которое теперь выглядит, как показано в примере:

![Снимок экрана, на котором показан готовый пример рабочего процесса приложения логики](./media/tutorial-build-scheduled-recurring-logic-app-workflow/check-travel-time-finished.png)

## <a name="run-your-logic-app"></a>Запуск приложения логики

Чтобы вручную запустить приложение логики, на панели инструментов конструктора щелкните **Запустить**.

* Если текущее время в пути не превышает ограничений, приложение логики ничего не делает и ожидает следующего интервала перед повторной проверкой. 

* Если текущее время в пути превышает ограничение, вы получаете электронное письмо с текущим временем в пути и количеством минут сверх ограничения. Ниже приведен пример сообщения, которое отправляет приложение логики:

  ![Снимок экрана, на котором показан пример электронного письма, сообщающего о текущем времени поездки и дополнительном времени в пути, превышающем заданное предельное значение.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/received-example-email-notification.png)

  > [!TIP]
  > Если электронные сообщения не приходят, проверьте папку нежелательной почты. Фильтр нежелательной почты может перенаправлять такие виды электронных сообщений. В противном случае, если вы не уверены, что приложение логики работает правильно, см. статью [Диагностика сбоев приложений логики](../logic-apps/logic-apps-diagnosing-failures.md).

Итак, повторяющееся приложение логики на основе планировщика создано и выполняется. 

Чтобы создать другие приложения логики, использующие триггер **Повторение**, ознакомьтесь со следующими шаблонами, которые станут доступны после создания приложения логики:

* Получайте ежедневные напоминания, отправленные вам.
* Удалите старые большие двоичные объекты Azure.
* Добавьте сообщение в очередь службы хранилища Azure.

## <a name="clean-up-resources"></a>Очистка ресурсов

Приложение логики продолжает работать до тех пор, пока не будет отключено или удалено. Если этот образец приложения логики больше не нужен, удалите группу ресурсов, содержащую приложение логики и связанные ресурсы.

1. В поле поиска портала Azure введите имя созданной группы ресурсов. В результатах в разделе **Группы ресурсов** выберите группу ресурсов.

   В этом примере показано создание группы ресурсов с именем `LA-TravelTime-RG`.

   ![Снимок экрана, на котором показано поле поиска Azure, содержащее текст "la-travel-time-rg" и выбрано значение **LA-TravelTime-RG**.](./media/tutorial-build-scheduled-recurring-logic-app-workflow/find-resource-group.png)

   > [!TIP]
   > Если на домашней странице Azure группа ресурсов отображается в разделе **Последние ресурсы**, ее можно выбрать там.

1. В меню группы ресурсов выберите пункт **Обзор**. На панели инструментов **области Обзор** выберите **Удалить группу ресурсов**.

   ![Снимок экрана, на котором показана область "Обзор" группы ресурсов, а на панели инструментов этой области выбран параметр "Удалить группу ресурсов".](./media/tutorial-build-scheduled-recurring-logic-app-workflow/delete-resource-group.png)

1. В отобразившейся области подтверждения введите имя группы ресурсов и выберите **Удалить**.

## <a name="next-steps"></a>Дальнейшие действия

Из этого учебника вы узнали, как создать приложение логики, которое проверяет загрузку дорог на основе заданного расписания (по будним дням) и принимает меры (отправляет сообщение электронной почты), когда время в пути превышает указанное ограничение. Теперь вы можете узнать, как создать приложение логики, которое отправляет запросы для списка рассылки на утверждение, интегрируя службы Azure, службы Майкрософт и другие приложения, предоставляемые по модели "Программное обеспечение как услуга" (SaaS).

> [!div class="nextstepaction"]
> [Управление запросами для списка рассылки с помощью приложения логики](../logic-apps/tutorial-process-mailing-list-subscriptions-workflow.md)
