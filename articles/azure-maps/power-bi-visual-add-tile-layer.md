---
title: Добавление мозаичного слоя в Azure Maps Power BI визуальный элемент | Карты Microsoft Azure
description: В этой статье вы узнаете, как использовать мозаичный слой в визуальном элементе Microsoft Azure Maps для Power BI.
author: rbrundritt
ms.author: richbrun
ms.date: 06/26/2020
ms.topic: conceptual
ms.service: azure-maps
services: azure-maps
manager: cpendle
ms.custom: ''
ms.openlocfilehash: 6ab99f32932f39d5ad140b7a16d16ceae30fff54
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "92896214"
---
# <a name="add-a-tile-layer"></a>Добавление слоя фрагментов

Функция мозаичного слоя, как и уровень ссылок, позволяет переносить дополнительные данные на карту, чтобы предоставить дополнительный контекст. Мозаичные слои позволяют переносить изображения поверх Azure Maps базовых плиток карты. Это отличный способ наложения больших или сложных наборов данных, таких как изображения, из дроны или миллионов строк.

> [!div class="mx-imgBorder"]
> ![Схема, отображающая пузырьковый слой над мозаичным слоем, в котором показаны текущие данные о неинфракрасных погодных данных из Azure Maps](media/power-bi-visual/radar-tile-layer-with-bubbles.png)

Мозаичный слой загружает плитки с сервера. Эти образы можно предварительно визуализировать или отобразить в динамическом режиме. Предварительно подготовленные изображения сохраняются как любые другие изображения на сервере с использованием соглашения об именовании, которое понимается мозаичным слоем. Динамически визуализированные изображения используют службу для загрузки изображений близко к реальному времени. Мозаичные слои — это отличный способ визуализировать большие наборы данных на карте. Можно не только создать мозаичный слой из изображения, но и векторные данные также можно визуализировать как мозаичный слой.

Ограничивающий прямоугольник и диапазон масштабирования, в которых доступна служба плитки, можно передать в качестве параметров для ограничения расположения плиток. Это как улучшение производительности, так и для визуального элемента, и для службы плиток. Ниже приведен обзор всех параметров, доступных в области **Формат** , доступные в разделе **мозаичный слой** .

| Параметр        | Описание   |
|----------------|---------------|
| Url            | Отформатированный URL-адрес, указывающий на службу плитки.  |
| Размер плитки      | Целочисленное значение, определяющее размеры мозаики и ширину и высоту плиток.   |
| С привязкой к северу    | Северная Широта ограничивающего прямоугольника, где доступны плитки. |
| Южная граница    | Южный Широта ограничивающего прямоугольника, где доступны плитки. |
| Восточная граница     | Восточная долгота ограничивающего прямоугольника, где доступны плитки.  |
| Западная граница     | Западная Долгота ограничивающего прямоугольника, где доступны плитки.   |
| Прозрачность   | Прозрачность мозаичного слоя.   |
| Является TMS         | Службы карт плиток — спецификация, которая изменяет ось координат Y мозаичного слоя на противоположную. |
| Минимальный масштаб       | Доступны плитки минимального уровня масштаба. |
| Максимальный масштаб       | Доступны плитки максимального уровня масштаба.  |
| Расположение слоя | Задает расположение слоя относительно других слоев карт. |

## <a name="tile-url-formatting"></a>Форматирование URL-адреса плитки

Визуальный элемент Azure Maps поддерживает три разных соглашения об именовании для службы плиток:

-   **X, y, Zoom Notation** -X — это столбец, Y — это расположение плитки в сетке плиток, а в записи масштаба — значение, основанное на уровне масштаба.
-   **Нотация куадкэй** . объединяет сведения о x, y и масштабе в одно строковое значение. Это строковое значение превращается в уникальный идентификатор для одной плитки.
-   **Ограничивающий прямоугольник** — укажите изображение в формате координат ограничивающего прямоугольника: `{west},{south},{east},{north}` . Этот формат обычно используется [службами веб-сопоставления (WMS)](https://www.opengeospatial.org/standards/wms).

Плитка URL URL-адрес HTTPS для шаблона URL-адреса плитки, который использует следующие параметры:

-   `{x}` — позиция X фрагмента. Также нужны `{y}` и `{z}`.
-   `{y}` — позиция Y фрагмента. Также нужны `{x}` и `{z}`.
-   `{z}` — уровень увеличения фрагмента. Также нужны `{x}` и `{y}`.
-   `{quadkey}` — `quadkey` Идентификатор плитки, основанный на соглашении об именовании системы плиток Bing Maps.
-   `{bbox-epsg-3857}` — Строка ограничивающего прямоугольника с форматом `{west},{south},{east},{north}` в системе пространственной ссылки EPSG 3857.

В качестве примера ниже представлен отформатированный URL-адрес плитки для [службы плитки "радар погоды](/rest/api/maps/renderv2/getmaptilepreview) " в Azure Maps. Обратите внимание, что `[subscription-key]` — это заполнитель для ключа подписки Azure Maps.

> `https://atlas.microsoft.com/map/tile?zoom={z}&x={x}&y={y}&tilesetId=microsoft.weather.radar.main&api-version=2.0&subscription-key=[subscription-key]`

Дополнительные сведения о Azure Maps системе мозаичного заполнения см. в разделе [уровни масштабирования и сетка плиток](zoom-levels-and-tile-grid.md).

## <a name="next-steps"></a>Дальнейшие действия

Добавьте дополнительный контекст на карту:

> [!div class="nextstepaction"]
> [Отображение трафика в режиме реального времени](power-bi-visual-show-real-time-traffic.md)