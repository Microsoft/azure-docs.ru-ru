---
title: Перемещение пространств имен партнеров службы "Сетка событий Azure" в другой регион
description: В этой статье показано, как переместить пространства имен партнера службы "Сетка событий Azure" из одного региона в другой.
ms.topic: how-to
ms.custom: subject-moving-resources
ms.date: 08/20/2020
ms.openlocfilehash: 6783db6b9bb1c7d48b308234a179925d6f30e281
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "89086209"
---
# <a name="move-azure-event-grid-partner-namespaces-to-another-region"></a>Перемещение пространств имен партнеров службы "Сетка событий Azure" в другой регион
Вам может потребоваться переместить ресурсы в другой регион по ряду причин. Например, чтобы воспользоваться преимуществами нового региона Azure, чтобы удовлетворить внутренние требования к политике и управлению, а также в ответ на требования к планированию емкости. 

Ниже приведены общие действия, описанные в этой статье. 

- **Экспортируйте ресурс пространства имен партнера** в шаблон Azure Resource Manager. Удаление определений для ресурсов канала событий в шаблоне. Канал событий может иметь ссылку на идентификатор Azure Resource Manager раздела партнера, который принадлежит клиенту. Поэтому их нельзя создать с помощью шаблона в целевом регионе.  
- **Используйте шаблон для развертывания пространства имен Partner** в целевом регионе. Затем создайте каналы событий в новом пространстве имен партнера в целевом регионе. 
- Чтобы **завершить перемещение**, удалите пространство имен участника из исходного региона. 

    > [!NOTE]
    > - Экспорт **разделов партнеров** в шаблон Azure Resource Manager не поддерживается, так как клиенты не могут напрямую создать раздел партнера. 
    > - **Регистрация партнеров** — это глобальные ресурсы (не привязанные к определенному региону), поэтому перемещение их из одного региона в другой не применимо. 

## <a name="prerequisites"></a>Предварительные требования
- Убедитесь, что служба "Сетка событий" доступна в целевом регионе. См. страницу [Доступность продуктов по регионам](https://azure.microsoft.com/global-infrastructure/services/?products=event-grid&regions=all).

## <a name="prepare"></a>Подготовка
Чтобы приступить к работе, экспортируйте шаблон диспетчер ресурсов для пространства имен Partner. 

1. Войдите на [портал Azure](https://portal.azure.com).
2. На панели поиска в верхней части окна введите **пространства имен партнера по сетке событий** и выберите в списке результатов **пространства имен партнера по сетке событий** . 
3. Выберите **пространство имен партнера** , которое необходимо экспортировать в шаблон диспетчер ресурсов. 
4. На странице **пространство имен партнера по сетке событий** выберите **Экспорт шаблона** в разделе **Параметры** в меню слева и нажмите кнопку **скачать** на панели инструментов. 

    :::image type="content" source="./media/move-partner-namespaces-across-regions/download-template.png" alt-text="Экспорт шаблона — > скачивание" lightbox="./media/move-partner-namespaces-across-regions/download-template.png":::   
5. Выберите **ZIP** -файл, скачанный с портала, и распакуйте его в выбранную папку. Этот ZIP-файл содержит шаблонные и параметры JSON-файлы. 
1. Откройте **template.js** в любом редакторе по своему усмотрению. 
8. Обновите `location` ресурс **раздела** до целевого региона или расположения. Чтобы получить коды расположения, см. раздел [расположения Azure](https://azure.microsoft.com/global-infrastructure/locations/). Код для региона — это имя региона без пробелов, например, `West US` равно `westus` .

    ```json
    {
        "type": "Microsoft.EventGrid/partnerNamespaces",
        "apiVersion": "2020-04-01-preview",
        "name": "[parameters('partnerNamespace_name')]",
        "location": "westus",
        "properties": {
            "partnerRegistrationFullyQualifiedId": "[parameters('partnerRegistrations_ContosoCorpAccount1_externalid')]"
        }
    }
    ``` 
1. **Сохраните** шаблон. 

## <a name="recreate"></a>Повторно создать 
Разверните шаблон, чтобы создать пространство имен партнера в целевом регионе. 

1. На портале Azure выберите **Создать ресурс**.
2. В **поле Поиск в Marketplace** введите **шаблон развертывание** и нажмите клавишу **Ввод**.
3. Выберите **шаблоны развертывания**.
4. Нажмите кнопку **создания**.
5. Выберите **Создать собственный шаблон в редакторе**.
6. Выберите **загрузить файл** и следуйте инструкциям по загрузке **template.jsв** файл, скачанный в предыдущем разделе.
7. Нажмите кнопку **сохранить** , чтобы сохранить шаблон. 
8. На странице **Настраиваемое развертывание** выполните следующие действия. 
    1. Выберите **подписку** Azure. 
    1. Выберите существующую **группу ресурсов** в целевом регионе или создайте ее. 
    1. В поле **Расположение** выберите целевой регион. Если выбрана существующая группа ресурсов, этот параметр доступен только для чтения. 
    1. В поле **имя пространства имен партнера** введите имя нового пространства имен партнера. 
    1. Для внешнего идентификатора регистрации партнера введите идентификатор ресурса регистрации партнера в следующем формате: `/subscriptions/<Azure subscription ID>/resourceGroups/<resource group name>/providers/Microsoft.EventGrid/partnerRegistrations/<Partner registration name>` .
    1. Установите флажок **Я принимаю указанные выше условия**.     
    1. Выберите **Проверка + создать** , чтобы начать процесс развертывания. 
    1. На странице **Проверка и создание** проверьте параметры и нажмите кнопку **создать**. 

## <a name="discard-or-clean-up"></a>Отмена или очистка
Чтобы завершить перемещение, удалите пространство имен участника в исходном регионе.  

Если вы хотите начать заново, удалите пространство имен партнера в целевом регионе и повторите действия, описанные в разделах [Подготовка](#prepare) и [Повторное создание](#recreate) этой статьи.

Чтобы удалить пространство имен партнера с помощью портал Azure, выполните следующие действия.

1. В окне поиска в верхней части портал Azure введите **пространства имен партнера по сетке событий** и выберите в результатах поиска **пространства имен партнера по сетке событий** . 
2. Выберите пространство имен партнера для удаления и щелкните **Удалить** на панели инструментов. 
3. **Подтвердите** удаление, чтобы удалить пространство имен партнера. 

## <a name="next-steps"></a>Дальнейшие действия
Вы узнали, как переместить пространство имен партнера по сетке событий из одного региона в другой. Ознакомьтесь со следующими статьями для перемещения системных разделов, пользовательских разделов и доменов в разных регионах.

- [Перемещение системных разделов по регионам](move-system-topics-across-regions.md). 
- [Перемещение пользовательских разделов по регионам](move-custom-topics-across-regions.md). 
- [Перемещение доменов между регионами](move-domains-across-regions.md).

Дополнительные сведения о перемещении ресурсов между регионами и аварийным восстановлением в Azure см. в следующей статье: [Перемещение ресурсов в новую группу ресурсов или подписку](../azure-resource-manager/management/move-resource-group-and-subscription.md).