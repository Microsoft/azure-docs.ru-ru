---
title: Сетка событий Azure — события партнеров
description: Отправляйте события от сторонних партнеров SaaS и PaaS с Сеткой событий напрямую в службы Azure с помощью Сетки событий Azure.
ms.topic: conceptual
ms.date: 11/10/2020
ms.openlocfilehash: 31a5fe611871eb4734b6a68e3818592028ebc75c
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "94506152"
---
# <a name="partner-events-in-azure-event-grid-preview"></a>События партнеров в службе "Сетка событий Azure" (Предварительная версия)
Функция **Partner Events** позволяет сторонним поставщикам SaaS публиковать события из своих служб, чтобы потребители могли подписываться на эти события. Эта функция предлагает основные возможности сторонних источников событий, предоставляя тип [раздела](concepts.md#topics) — **Партнерский раздел**. Подписчики создают подписки на этот раздел для использования событий. Кроме того, она предоставляет чистую модель публикации, разделив задачи и владение ресурсами, которые используются издателями и подписчиками событий.

> [!NOTE]
> Если вы не знакомы с использованием сетки событий, см. раздел [Обзор](overview.md), [Основные понятия](concepts.md)и [обработчики событий](event-handlers.md).

## <a name="what-is-partner-events-to-a-publisher"></a>Что такое партнерские мероприятия для издателя?
Для издателей событий функция "партнерские события" позволяет издателям выполнять следующие задачи:

- Подключение источников событий к сетке событий
- Создание пространства имен (конечной точки), в котором могут публиковаться события
- Создавайте разделы партнеров в Azure, которые применяют подписчики и используют для использования событий.

## <a name="what-is-partner-events-to-a-subscriber"></a>Что такое партнерские мероприятия для подписчика?
Для подписчика функция "партнерские события" позволяет им создавать разделы партнеров в Azure для использования событий сторонними источниками событий. Потребление событий реализовано путем создания подписок на события, которые отправляют события (Push) в обработчик событий подписчика.

## <a name="why-should-i-use-partner-events"></a>Зачем нужно использовать события партнеров?
Вы можете использовать события партнеров, если у вас есть одно или несколько из следующих требований.

### <a name="for-publishers"></a>Для издателей

- Вам нужен механизм, позволяющий сделать события доступными в Azure. Пользователи могут фильтровать и маршрутизировать эти события, используя разделы партнеров и подписки на события, которыми они владеют и которыми они управляют. Можно использовать другие подходы к интеграции, такие как [разделы](custom-topics.md) и [домены](event-domains.md). Но они не допускают четкого разделения ресурсов (темы партнеров), управления и выставления счетов между издателями и подписчиками. Кроме того, этот подход обеспечивает более интуитивный пользовательский интерфейс, позволяющий легко находить и использовать темы партнеров.
- Необходимо опубликовать события в одной конечной точке, конечной точке пространства имен. И требуется возможность фильтрации этих событий таким образом, чтобы только их подмножество было доступно. 
- Вы хотите видеть метрики, связанные с опубликованными событиями.
- Вы хотите использовать для событий схему [Cloud events 1,0](https://cloudevents.io/) .

### <a name="for-subscribers"></a>Для подписчиков

- Вы хотите подписываться на события от [сторонних издателей](#available-third-party-event-publishers) и выполнять обработку событий с помощью обработчиков событий, которые находятся в Azure или в других местах.
- Вы хотите воспользоваться широким набором функций маршрутизации и [назначений и обработчиков событий](overview.md#event-handlers) для обработки событий из сторонних источников. 
- Необходимо реализовать слабо связанную архитектуру, в которой обработчик сообщений не знает о существовании брокера сообщения. 
- Вам нужен механизм отказоустойчивой доставки push-уведомлений с поддержкой отправки повторных попыток и семантикой по крайней мере один раз.
- Вы хотите использовать для событий схему [Cloud events 1,0](https://cloudevents.io/) . 


## <a name="available-third-party-event-publishers"></a>Доступные Сторонние издатели событий
Издатель событий стороннего производителя должен пройти через [процесс адаптации](partner-onboarding-overview.md) , прежде чем подписчик сможет приступить к работе с событиями. 

Если вы являетесь подписчиком и хотите, чтобы служба стороннего производителя предоставила свои события через службу "Сетка событий", 

### <a name="auth0"></a>Auth0
**Auth0** — первый доступный издатель партнера. Вы можете создать [Auth0 Партнерский раздел](auth0-overview.md) , чтобы подключить учетные записи Auth0 и Azure. Такая интеграция позволяет реагировать на события Auth0 в режиме реального времени, вести журнал и отслеживать их. Чтобы испытать это, см. статью интеграция службы " [Сетка событий Azure с Auto0](auth0-how-to.md) ".

Если вы хотите, чтобы служба стороннего производителя предоставила свои события через службу "Сетка событий", отправьте идею на [Пользовательский портал](https://feedback.azure.com/forums/909934-azure-event-grid).
 
## <a name="resources-managed-by-event-publishers"></a>Ресурсы, управляемые издателями событий
Издатели событий создают следующие ресурсы и управляют ими:

### <a name="partner-registration"></a>Регистрация партнера
Регистрация содержит общие сведения, относящиеся к издателю. Он определяет тип партнерской темы, который отображается в портал Azure в качестве варианта, когда пользователи пытаются создать раздел партнера. Издатель может предоставлять несколько типов тематических разделов в соответствии с потребностями подписчиков. То есть издатель может создавать отдельные регистрации (типы тематических разделов) для событий из разных служб. Например, для службы отдела кадров издатель может определить Партнерский раздел для таких событий, как «присоединение сотрудника», «продвигаемый сотрудник» и «сотрудники» компании. 

Помните на следующие моменты.

- Видимы только регистрации партнеров, утвержденные в Azure. 
- Регистрации являются глобальными. То есть они не связаны с определенным регионом Azure.
- Регистрация — это необязательный ресурс. Но мы рекомендуем вам (как издатель) создать регистрацию. Он позволяет пользователям находить свои темы на странице **Создание партнера** на [портал Azure](https://portal.azure.com/#create/Microsoft.EventGridPartnerTopic). Затем пользователь может выбрать типы событий (например, "присоединенный сотрудник", "левый сотрудник" и т. д.) при создании подписок на события.

### <a name="namespace"></a>Пространство имен
Как и в случае с [пользовательскими разделами](custom-topics.md) и [доменами](event-domains.md), пространство имен партнера является региональной конечной точкой для публикации событий. Это пространство имен, в котором издатели создают каналы событий и управляют ими. Пространство имен также выступает в качестве ресурса контейнера для каналов событий.

### <a name="event-channels"></a>Каналы событий
Канал событий — это зеркальный ресурс в разделе партнера. Когда издатель создает канал событий в подписке Azure издателя, он также создает раздел партнера в подписке Azure подписчика. Операции, выполняемые с каналом событий (кроме GET), будут применены к соответствующему разделу партнера по подписчику, даже при удалении. Однако только темы партнеров — это типы ресурсов, в которых можно настроить подписки и доставку событий.

## <a name="resources-managed-by-subscribers"></a>Ресурсы, управляемые подписчиками 
Подписчики могут использовать темы партнеров, определенные издателем, и это единственный тип ресурсов, которые они видят и управляют. После создания тематического партнера пользователь подписчика может создавать подписки на события, определяющие правила фильтра для [целевых объектов и обработчиков событий](overview.md#event-handlers). К подписчикам, Партнерский раздел и связанные с ним подписки на события предоставляют те же широкие возможности, что и [пользовательские разделы](custom-topics.md) , и связанные с ней подписки. в разделе "Партнеры" поддерживаются только [схема облачных событий 1,0](cloudevents-schema.md), которая предоставляет более широкий набор возможностей по сравнению с другими поддерживаемыми схемами.

На следующем рисунке показан поток операций плоскости управления.

:::image type="content" source="./media/partner-events-overview/partner-control-plane-flow.png" alt-text="События партнеров — поток управляющей плоскости":::

1. Издатель создает **регистрацию партнера**. Регистрации партнеров являются глобальными. То есть они не связаны с определенным регионом Azure. Этот шаг является необязательным.
1. Издатель создает **пространство имен партнера** в определенном регионе.
1. Когда подписчик 1 пытается создать раздел партнера, сначала создается **канал событий** с каналом событий 1 в подписке издателя.
1. Затем **Партнерский раздел** с темой 1 создается в подписке Azure подписчика. Подписчику необходимо активировать раздел партнера. 
1. Подписчик 1 создает **Azure Logic Apps подписку** на Партнерский раздел 1.
1. Подписчик 1 создает **подписку на хранилище BLOB-объектов Azure** для партнерского раздела 1. 
1. Когда подписчик 2 пытается создать раздел партнера, сначала создается другой **канал событий**(канал событий 2) в подписке издателя. 
1. Затем в подписке Azure второго подписчика создается **Партнерский** раздел 2 Partner. Подписчику необходимо активировать раздел партнера. 
1. Подписчик 2 создает **подписку на функции Azure** для партнера 2. 

## <a name="pricing"></a>Цены
На разделы партнеров поставляются счета за количество операций, выполненных при использовании сетки событий. Дополнительные сведения обо всех типах операций, которые используются в качестве базиса для выставления счетов и подробных сведений о ценах, см. в разделе [цены на сетку событий](https://azure.microsoft.com/pricing/details/event-grid/).

## <a name="limits"></a>Ограничения
Подробные сведения об ограничениях для партнеров см. в разделе [ограничения службы сетки событий](../azure-resource-manager/management/azure-subscription-service-limits.md#event-grid-limits) .


## <a name="next-steps"></a>Дальнейшие действия

- [Auth0 Партнерский раздел](auth0-overview.md)
- [Использование Auth0 Partner](auth0-how-to.md)
- [Как стать партнером Сетки событий](partner-onboarding-overview.md)