---
title: Обработчики событий и назначения — Служба "Сетка событий Azure" IoT Edge | Документация Майкрософт
description: Обработчики событий и назначения в сетке событий на границе
ms.date: 07/08/2020
ms.topic: article
ms.openlocfilehash: 18e2b944f60ebdf8a1b0c60ba446a13df13134c5
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "86171590"
---
# <a name="event-handlers-and-destinations-in-event-grid-on-edge"></a>Обработчики событий и назначения в сетке событий на границе

Обработчик событий — это место, где событие используется для дальнейших действий или для обработки события. С помощью сетки событий в модуле ребра обработчик событий может находиться на одном пограничном устройстве, другом устройстве или в облаке. Вы можете использовать любой веб-перехватчик для обработки событий или отправки событий в один из собственных обработчиков, таких как сетка событий Azure.

В этой статье содержатся сведения о настройке каждого из них.

## <a name="webhook"></a>Веб-перехватчика

Чтобы опубликовать данные в конечной точке веб-перехватчика, задайте `endpointType` для значение `WebHook` и укажите:

* endpointUrl: URL-адрес конечной точки веб-перехватчика

    ```json
        {
          "properties": {
            "destination": {
              "endpointType": "WebHook",
              "properties": {
                "endpointUrl": "<your-webhook-endpoint>"
              }
            }
          }
        }
    ```

## <a name="azure-event-grid"></a>Сетка событий Azure

Чтобы опубликовать в облачной конечной точке службы "Сетка событий Azure", задайте `endpointType` для значение `eventGrid` и укажите:

* endpointUrl: URL-адрес раздела сетки событий в облаке
* Саскэй: ключ SAS раздела сетки событий
* Топикнаме: имя, которое отмечает все исходящие события в сетку событий. Имя раздела полезно при публикации в разделе предметной области сетки событий.

   ```json
        {
          "properties": {
            "destination": {
              "endpointType": "eventGrid",
              "properties": {
                 "endpointUrl": "<your-event-grid-cloud-topic-endpoint-url>?api-version=2018-01-01",
                 "sasKey": "<your-event-grid-topic-saskey>",
                 "topicName": null
              }
            }
          }
    }
   ```

## <a name="iot-edge-hub"></a>Центр IoT Edge

Чтобы опубликовать в модуле концентратора ребра, задайте `endpointType` для значение `edgeHub` и укажите:

* outputName: выходные данные, на которых модуль сетки событий будет маршрутизировать события, соответствующие этой подписке, в edgeHub. Например, события, соответствующие указанной ниже подписке, будут записаны в/messages/modules/eventgridmodule/outputs/sampleSub4..

    ```json
        {
          "properties": {
            "destination": {
              "endpointType": "edgeHub",
              "properties": {
                "outputName": "sampleSub4"
              }
            }
          }
        }
    ```

## <a name="event-hubs"></a>Центры событий

Чтобы опубликовать в концентраторе событий, задайте `endpointType` для значение `eventHub` и укажите:

* connectionString: строка подключения для определенного концентратора событий, созданного с помощью политики общего доступа.

    >[!NOTE]
    > Строка подключения должна быть зависящей от сущности. Использование строки подключения к пространству имен не будет работать. Вы можете создать строку подключения для конкретной сущности, перейдя к определенному концентратору событий, который вы хотите опубликовать на портале Azure, и щелкнув **политики общего доступа** , чтобы создать новую коннецектион строку, относящуюся к сущности.

    ```json
        {
          "properties": {
            "destination": {
              "endpointType": "eventHub",
              "properties": {
                "connectionString": "<your-event-hub-connection-string>"
              }
            }
          }
        }
    ```

## <a name="service-bus-queues"></a>Очереди служебной шины

Чтобы опубликовать в очереди служебной шины, задайте `endpointType` для значение `serviceBusQueue` и укажите:

* connectionString: строка подключения для конкретной очереди служебной шины, созданной с помощью политики общего доступа.

    >[!NOTE]
    > Строка подключения должна быть зависящей от сущности. Использование строки подключения к пространству имен не будет работать. Создайте строку подключения, относящуюся к конкретной сущности, перейдя к конкретной очереди служебной шины, которую вы хотите опубликовать на портале Azure, и щелкнув **политики общего доступа** , чтобы создать новую коннецектион строку, относящуюся к сущности.

    ```json
        {
          "properties": {
            "destination": {
              "endpointType": "serviceBusQueue",
              "properties": {
                "connectionString": "<your-service-bus-queue-connection-string>"
              }
            }
          }
        }
    ```

## <a name="service-bus-topics"></a>Разделы шины обслуживания

Чтобы опубликовать данные в разделе служебной шины, задайте `endpointType` для значение `serviceBusTopic` и укажите:

* connectionString: строка подключения для конкретного раздела служебной шины, созданного с помощью политики общего доступа.

    >[!NOTE]
    > Строка подключения должна быть зависящей от сущности. Использование строки подключения к пространству имен не будет работать. Создайте строку подключения, относящуюся к конкретной сущности, перейдя к определенной теме служебной шины, которую вы хотите опубликовать на портале Azure, и щелкнув **политики общего доступа** , чтобы создать новую коннецектион строку, относящуюся к сущности.

    ```json
        {
          "properties": {
            "destination": {
              "endpointType": "serviceBusTopic",
              "properties": {
                "connectionString": "<your-service-bus-topic-connection-string>"
              }
            }
          }
        }
    ```

## <a name="storage-queues"></a>Очереди службы хранилища

Чтобы опубликовать в очереди хранилища, задайте для значение  `endpointType` `storageQueue` и укажите:

* queueName: имя очереди хранилища, в которую выполняется публикация.
* connectionString: строка подключения для учетной записи хранения, в которой находится очередь хранилища.

    >[!NOTE]
    > В случае неспецифичных концентраторов событий, очередей служебной шины и разделов служебной шины строка подключения, используемая для очередей хранилища, не зависит от сущности. Вместо этого он должен иметь строку подключения для учетной записи хранения.

    ```json
        {
          "properties": {
            "destination": {
              "endpointType": "storageQueue",
              "properties": {
                "queueName": "<your-storage-queue-name>",
                "connectionString": "<your-storage-account-connection-string>"
              }
            }
          }
        }
    ```