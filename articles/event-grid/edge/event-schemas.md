---
title: 'Схемы событий: IoT Edge службы "Сетка событий Azure" | Документация Майкрософт'
description: Схемы событий в сетке событий на IoT Edge.
author: VidyaKukke
manager: rajarv
ms.author: vkukke
ms.reviewer: spelluru
ms.date: 07/08/2020
ms.topic: article
ms.openlocfilehash: ea36c40f2038d016afb0c45944a98d4d90df6240
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "86171573"
---
# <a name="event-schemas"></a>Схемы событий

Модуль "Сетка событий" принимает и доставляет события в формате JSON. В настоящее время существует три схемы, поддерживаемые службой "Сетка событий":-

* **евентгридсчема**
* **кустомсчема**
* **клаудевентсчема**

Вы можете настроить схему, которой должен соответствовать издатель во время создания раздела. Если не указано, по умолчанию используется значение **евентгридсчема**. События, которые не соответствуют ожидаемой схеме, будут отклонены.

Подписчики также могут настроить схему, в которой должны доставляться события. Если значение не указано, по умолчанию используется схема раздела.
В настоящее время схема доставки подписчиков должна соответствовать входной схеме раздела. 

## <a name="eventgrid-schema"></a>Схема EventGrid

Схема EventGrid состоит из набора обязательных свойств, которым должна соответствовать сущность публикации. Каждый издатель должен заполнить поля верхнего уровня.

```json
[
  {
    "topic": string,
    "subject": string,
    "id": string,
    "eventType": string,
    "eventTime": string,
    "data":{
      object-unique-to-each-publisher
    },
    "dataVersion": string,
    "metadataVersion": string
  }
]
```

### <a name="eventgrid-schema-properties"></a>Свойства схемы EventGrid

Все события имеют следующие данные верхнего уровня:

| Свойство. | Type | Обязательно | Описание |
| -------- | ---- | ----------- |-----------
| Раздел | строка | Нет | Должен соответствовать разделу, в котором он опубликован. Сетка событий заполняет ее именем раздела, в котором она опубликована, если не указано. |
| subject | строка | Да | Определенный издателем путь к субъекту событий. |
| eventType | строка | Да | Тип события для этого источника событий, например BlobCreated. |
| eventTime | строка | Да | Время создания события с учетом времени поставщика в формате UTC. |
| ID | Строка | Нет | Уникальный идентификатор события. |
| . | объект | Нет | Используется для сбора данных событий, относящихся к сущности публикации. |
| dataVersion | строка | Да | Версия схемы для объекта данных. Версию схемы определяет издатель. |
| metadataVersion | строка | Нет | Версия схемы для метаданных события. Служба "Сетка событий" определяет схему свойств верхнего уровня. Это значение предоставляет служба "Сетка событий". |

### <a name="example--eventgrid-schema-event"></a>Пример: событие схемы EventGrid

```json
[
  {
    "id": "1807",
    "eventType": "recordInserted",
    "subject": "myapp/vehicles/motorcycles",
    "eventTime": "2017-08-10T21:03:07+00:00",
    "data": {
      "make": "Ducati",
      "model": "Monster"
    },
    "dataVersion": "1.0"
  }
]
```

## <a name="customevent-schema"></a>Схема CustomEvent

В пользовательской схеме нет обязательных свойств, которые применяются как схема EventGrid. Публикация сущности может полностью управлять схемой событий. Он обеспечивает максимальную гибкость и включает сценарии, в которых уже есть система, основанная на событиях, которая позволяет повторно использовать существующие события и/или не должна быть привязана к определенной схеме.

### <a name="custom-schema-properties"></a>Пользовательские свойства схемы

Нет обязательных свойств. Для определения полезных данных требуется сущность публикации.

### <a name="example--custom-schema-event"></a>Пример: событие пользовательской схемы

```json
[
  {
    "eventdata": {
      "make": "Ducati",
      "model": "Monster"
    }
  }
]
```

## <a name="cloudevent-schema"></a>Схема CloudEvent

Помимо приведенных выше схем, сетка событий изначально поддерживает события в [схеме JSON клаудевентс](https://github.com/cloudevents/spec/blob/master/json-format.md). CloudEvents — открытая спецификация для описания данных о событиях. Это упрощает взаимодействие, предоставляя общую схему событий для публикации и использования событий. Она является частью [кнкф](https://www.cncf.io/) , и в настоящее время доступна версия 1,0-RC1.

### <a name="cloudevent-schema-properties"></a>Свойства схемы Клаудевент

См. [спецификацию клаудевентс](https://github.com/cloudevents/spec/blob/master/json-format.md#3-envelope) в свойствах обязательных конвертов.

### <a name="example--cloud-event"></a>Пример: облачное событие
```json
[{
       "id": "1807",
       "type": "recordInserted",
       "source": "myapp/vehicles/motorcycles",
       "time": "2017-08-10T21:03:07+00:00",
       "datacontenttype": "application/json",
       "data": {
            "make": "Ducati",
            "model": "Monster"
        },
        "dataVersion": "1.0",
        "specVersion": "1.0-rc1"
}]
```
