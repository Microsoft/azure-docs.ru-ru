---
title: Как отправлять события из Auth0 в Azure с помощью сетки событий Azure
description: Как отправлять события из Auth0 в службы Azure с помощью сетки событий Azure.
ms.topic: conceptual
ms.date: 07/07/2020
ms.openlocfilehash: a66a60cb926b933a6b0628a67506d0d52ab7a905
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "93077869"
---
# <a name="integrate-azure-event-grid-with-auth0"></a>Интеграция сетки событий Azure с Auth0

В этой статье описывается подключение учетных записей Auth0 и Azure путем создания партнерского раздела сетки событий.

См. полный список событий, поддерживаемых Auth0, в разделе [Коды типов событий Auth0](https://auth0.com/docs/logs/references/log-event-type-codes).

## <a name="send-events-from-auth0-to-azure-event-grid"></a>Отправка событий из Auth0 в сетку событий Azure
Чтобы отправить события Auth0 в Azure, выполните следующие действия.

1. Включение поставщика ресурсов службы "Сетка событий"
1. Настройка партнерского раздела Auth0 на панели мониторинга Auth0
1. Активация партнерского раздела в Azure
1. Оформление подписки на события из Auth0

Для получения дополнительных сведений об этих понятиях см. раздел [Основные понятия службы "Сетка событий Azure"](concepts.md).

### <a name="enable-event-grid-resource-provider"></a>Включение поставщика ресурсов службы "Сетка событий"
Если вы не пользовались сеткой событий раньше, потребуется зарегистрировать поставщика ресурсов сетки событий. Если вы использовали сетку событий раньше, переходите к следующему разделу.

На портале Azure выполните следующие действия.
1. Выберите раздел "Подписки" в левом меню.
1. Выберите подписку, которую вы используете для сетки событий.
1. В левом меню в разделе "Параметры" выберите пункт "Поставщики ресурсов".
1. Найдите Microsoft.EventGrid.
1. Нажмите "Зарегистрироваться".
1. Обновите страницу, чтобы статус изменился на "Зарегистрировано".

### <a name="set-up-an-auth0-partner-topic"></a>Настройка партнерского раздела Auth0
Частью процесса интеграции является настройка Auth0 для использования в качестве источника событий (этот этап выполняется на [панели мониторинга Auth0](https://manage.auth0.com/)).

1. Выполните вход на [панель мониторинга Auth0](https://manage.auth0.com/).
1. Перейдите в раздел "Журналы" > "Потоки".
1. Щелкните "+ Создать поток".
1. Выберите сетку событий Azure и введите уникальное имя нового потока.
1. Создайте источник событий, указав ИД своей подписки Azure, регион Azure и название группы ресурсов. 
1. Нажмите кнопку «Сохранить».

### <a name="activate-your-auth0-partner-topic-in-azure"></a>Активируйте свой партнерский раздел Auth0 в Azure
Активация раздела Auth0 в Azure обеспечивает возможность перемещения событий из Auth0 в Azure.

1. Войдите на портал Azure.
1. Найдите `Partner Topics` вверху и нажмите `Event Grid Partner Topics` под разделом "Услуги".
1. Нажмите на тему, которая соответствует потоку, созданному вами на своей панели мониторинга Auth0.
1. Подтвердите, что поле `Source` соответствует вашей учетной записи Auth0.
1. Нажмите "Активировать".

### <a name="subscribe-to-auth0-events"></a>Подписка на события Auth0

#### <a name="create-an-event-handler"></a>Создание обработчика событий
Для тестирования партнерского раздела потребуется обработчик событий. Перейдите в свою подписку Azure и запустите службу, которая поддерживается в качестве [обработчика событий](event-handlers.md), например [Функции Azure](custom-event-to-function.md).

#### <a name="subscribe-to-your-auth0-partner-topic"></a>Подписка на свой партнерский раздел Auth0
Подписка на свой партнерский раздел Auth0 позволяет сообщить сетке событий желаемое место размещения событий Auth0.

1. На вкладке "Партнерский раздел" своей интеграции Auth0 выберите "Добавить подписку на события" вверху.
1. На странице "Создание подписки на событие" выполните следующие действия.
    1. Укажите имя подписки на событие.
    1. Выберите службу Azure или веб-перехватчик, созданный для типа конечной точки.
    1. Выполните инструкции для определенной службы.
    1. Щелкните Создать.

## <a name="testing"></a>Тестирование
Интеграция вашего партнерского раздела Auth0 с Azure должна быть готова к использованию.

### <a name="verify-the-integration"></a>Проверка интеграции
Чтобы проверить, что интеграция работает должным образом, выполните следующие действия.

1. Выполните вход на панель мониторинга Auth0.
1. Перейдите в раздел "Журналы" > "Потоки".
1. Щелкните поток "Сетка событий".
1. В потоке перейдите на вкладку "Состояние". Поток должен быть активным. Если не отображаются никакие ошибки, поток работоспособен.

Попробуйте [вызвать любые действия Auth0, инициирующие публикацию событий](https://auth0.com/docs/logs/references/log-event-type-codes), чтобы увидеть поток событий.

## <a name="delivery-attempts-and-retries"></a>Попытки и повторные попытки доставки
События Auth0 доставляются в Azure с использованием механизма потоковой передачи. Каждое событие отправляется сразу после активации в Auth0. Если сетка событий не может получить событие, Auth0 попытается доставить событие еще несколько раз (до трех). В противном случае Auth0 зафиксирует ошибку доставки в своей системе.

## <a name="next-steps"></a>Дальнейшие действия

- [Партнерский раздел Auth0](auth0-overview.md)
- [Обзор партнерских разделов](partner-events-overview.md)
- [Как стать партнером сетки событий](partner-onboarding-overview.md)