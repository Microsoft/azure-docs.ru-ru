---
title: Расположение файлов для преобразования
description: Рекомендации о том, как лучше размещать файлы во входном контейнере.
author: MalcolmTyrrell
ms.author: matyrr
ms.date: 09/03/2020
ms.topic: how-to
ms.openlocfilehash: 13c4b841fe2d0b62472628d9382b5f6ee3d1fa6c
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "91318081"
---
# <a name="laying-out-files-for-conversion"></a>Расположение файлов для преобразования

Для правильной обработки ресурса Служба преобразования должна иметь возможность найти все входные файлы.
Они состоят из файла основного ресурса, который преобразуется, и, как правило, некоторые другие файлы, на которые ссылаются пути в файле ресурса.
Запрос на преобразование ресурса получает два параметра, которые определяют, как служба преобразования находит эти файлы: `input.folderPath` (это необязательно) и `input.inputAssetPath` .
Они полностью описаны на странице [REST API преобразования](conversion-rest-api.md) .
В целях размещения файлов важно отметить, что элемент `folderPath` определяет полный набор файлов, доступных службе преобразования при обработке ресурса.

## <a name="placing-files-so-they-can-be-found"></a>Размещение файлов, чтобы их можно было найти

Если исходный ресурс использует внешние файлы, пути к этим файлам будут храниться в ресурсе.
Служба преобразования должна интерпретировать эти пути в файловой системе, которая отличается от исходной файловой системы ресурса.
Если пути хранятся в виде относительных путей и относительное расположение исходного ресурса и файла, на который он ссылается, не изменяется, служба преобразования легко находит файл, на который указывает ссылка.

> [!Note]
> Рекомендуется размещать файлы во входном контейнере, чтобы относительные расположения файлов совпадали с моментом создания ресурса.

> [!Note]
> Предпочитать создание ресурсов, которые содержат относительные пути.
> Руководство по [настройке материалов для 3ds Max](../../tutorials/modeling/3dsmax-material-setup.md) предоставляет 3ds максимальный пример того, как обеспечить использование относительных путей в ресурсе.

## <a name="finding-textures"></a>Поиск текстур

Из-за множества способов создания ресурсов Служба преобразования должна быть гибкой.
В частности, он должен справиться с ситуациями, когда пути в ресурсе и расположении текстур не совпадают точно.
Например, при создании ресурсов, содержащих абсолютные пути, так как эти пути никогда не будут соответствовать файловой системе, используемой службой преобразования.
Чтобы справиться с этой ситуацией, мы используем наиболее трудоемкий подход к поиску текстур.

Алгоритм обнаружения текстур выглядит следующим образом: при наличии пути, хранящегося в ресурсе, найдите самый длинный суффикс вложенного пути, который при использовании в качестве относительного пути от расположения исходного ресурса указывает на существующий файл.
Если такой вложенный путь (включая весь путь) предназначен для файла, то текстура считается отсутствующей.

Рассмотрим следующую файловую систему надуманный: 
```
G:\CONVERSION
├───Assets
│   │   myAsset.fbx
│   │   myTexture.png            <- A
│   │
│   └───Textures
│       │   myTexture.png        <- B
│       │
│       └───MyAssetTextures
│               myTexture.png    <- C
│
└───Textures
    │   myTexture.png            <- D
    │
    └───MyAssetTextures
            myTexture.png        <- E
```
Если Мяссет. FBX ссылается на текстуру с относительным путем `..\Textures\MyAssetTextures\myTexture.png` , то служба преобразования будет использовать файл E. На самом деле, он может использовать любые файлы A, C и E, если они существуют, с предпочтительным файлом E, так как он найден с самым длинным суффиксом.
Файлы B и D никогда не будут использоваться, поскольку не `Textures\myTexture.png` являются частью суффикса хранимого пути.
Если ресурс вместо этого содержит пути `H:\Foo\Bar\Textures\MyAssetTextures\myTexture.png` или `..\..\..\Foo\Bar\Textures\MyAssetTextures\myTexture.png` , то служба преобразования сможет найти файлы A и C, если они существуют (предложив c на). Тем не менее, E не удается найти таким образом, и файл должен быть перемещен.
Это можно исправить, переместив папку текстуры рядом с ресурсом.

> [!Note]
> Если текстуры не найдены, можно решить, что ресурс является одноуровневым элементом некоторого поддерева, содержащего текстуры.

## <a name="next-steps"></a>Дальнейшие действия

- [Преобразование модели](model-conversion.md)
