---
title: Настройка удостоверения лаборатории в Azure DevTest Labs
description: Узнайте, как настроить лабораторное удостоверение в Azure DevTest.
ms.topic: article
ms.date: 08/20/2020
ms.openlocfilehash: a652eb5751f9b723911a1c1baaaaf9860febc5b6
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "88719682"
---
# <a name="configure-a-lab-identity"></a>Настройка удостоверения лаборатории

Распространенная проблема при создании облачных приложений — управление учетными данными в коде для проверки подлинности в облачных службах. Обеспечение безопасности учетных данных является важной задачей. В идеальном случае учетные данные никогда не передаются на рабочие станции разработчиков и не проверяются после изменения в системе управления версиями. Azure Key Vault предоставляет способ безопасного хранения учетных данных, секретов и других ключей, но код должен пройти проверку подлинности в Key Vault, чтобы получить их. 

Эта проблема решается с помощью компонента "управляемые удостоверения для ресурсов Azure" в Azure Active Directory (Azure AD). Функция предоставляет службам Azure автоматически управляемое удостоверение в Azure AD. Удостоверение можно использовать для проверки подлинности в любой службе, которая поддерживает проверку подлинности Azure AD, включая Key Vault, при этом не сохраняя каких-либо учетных данных в коде. Дополнительные сведения об [управляемых удостоверениях в Azure](../active-directory/managed-identities-azure-resources/overview.md). 

Существует два типа управляемых удостоверений. 

## <a name="system-assigned-managed-identity"></a>Управляемое удостоверение, назначаемое системой  

 **Управляемое системой удостоверение**   включается непосредственно в экземпляре службы Azure. Если удостоверение включено, Azure создает удостоверение для экземпляра службы в клиенте Azure AD, который является доверенным в подписке этого экземпляра. После создания удостоверения учетные данные подготавливаются для передачи в экземпляр. Жизненный цикл назначаемого системой удостоверения напрямую связан с экземпляром службы Azure, в которой оно включено. При удалении экземпляра Azure автоматически очищает учетные данные и удостоверение в Azure AD. 

### <a name="scenarios-for-using-labs-system-assigned-identity"></a>Сценарии использования удостоверения, назначенного системой в лаборатории  

Каждый DevTest Labs создается с системным идентификатором, который остается действительным в течение жизненного цикла лабораторной работы. Назначенное системой удостоверение используется в следующих целях:  

- Все развертывания на основе [Azure Resource Manager](devtest-lab-create-environment-from-arm.md) , используемые для запуска нескольких виртуальных машин и (или) платформы в качестве среды службы, будут выполняться с использованием удостоверения, назначенного системой в лаборатории.  
- Шифрование дисков для лабораторных дисков с помощью управляемого клиентом ключа поддерживается через назначенное системой удостоверение в лаборатории. Предоставляя явный доступ к удостоверению лаборатории для доступа к набору шифрования дисков, лаборатория может шифровать все диски виртуальных машин от вашего имени. Узнайте больше о [том, как включить шифрование дисков](encrypt-disks-customer-managed-keys.md) для лабораторных дисков с помощью управляемого клиентом ключа.  

### <a name="configure-identity"></a>Настройка удостоверения

В этом разделе показано, как настроить политику удостоверений лаборатории.

> [!NOTE]
> Для лабораторий, созданных до 8/10/2020, назначенное системой удостоверение будет установлено в OFF. Как владелец лаборатории его можно включить, если вы планируете использовать лаборатории для целей, перечисленных в предыдущем разделе.  
>
> Для новых лабораторий, созданных после 8/10/2020, по умолчанию назначенное системой удостоверение в лаборатории имеет значение ON, и владелец лаборатории не сможет отключить его для жизненного цикла лаборатории.  

1. Войдите на [портал Azure](https://portal.azure.com).
1. Выполните поиск по запросу **DevTest Labs**.
1. В списке лабораторий выберите нужную лабораторию.
1. Выберите **Конфигурация и**  ->  **удостоверение политик (Предварительная версия)**. 

> [!div class="mx-imgBorder"]
> ![Настройка удостоверения](./media/configure-lab-identity/configure-identity.png)

## <a name="user-assigned-managed-identity"></a>Управляемое удостоверение, назначаемое пользователем  

Назначаемое пользователем управляемое удостоверение создается как автономный ресурс Azure. При этом Azure создает удостоверение в доверенном клиенте Azure AD используемой подписки. После создания удостоверения оно может быть назначено одному или нескольким экземплярам служб Azure. Управление жизненным циклом управляемого удостоверения, назначаемого пользователем, осуществляется отдельно от жизненного цикла экземпляров служб Azure, для которых оно назначено. 

DevTest Labs поддерживает назначенные пользователем удостоверения как для виртуальных машин, так и для сред на основе Azure Resource Manager.  Дополнительные сведения см. в следующих разделах:

- [Добавление назначенного пользователем удостоверения для развертывания лабораторных Azure Resource Manager окружений](use-managed-identities-environments.md)
- [Добавление назначенных пользователем удостоверений для развертывания виртуальных машин лаборатории](enable-managed-identities-lab-vms.md)

## <a name="next-steps"></a>Дальнейшие действия

Обзор [настройки управления затратами](devtest-lab-configure-cost-management.md)