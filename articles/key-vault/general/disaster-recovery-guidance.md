---
title: Azure Key Vault — доступность и избыточность Azure Key Vault | Документация Майкрософт
description: Сведения о доступности и избыточности Azure Key Vault.
services: key-vault
author: ShaneBala-keyvault
manager: ravijan
ms.service: key-vault
ms.subservice: general
ms.topic: tutorial
ms.date: 08/28/2020
ms.author: sudbalas
ms.openlocfilehash: d66fe736936963e601aad7cba7bdaa94f0c3ec3f
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96518453"
---
# <a name="azure-key-vault-availability-and-redundancy"></a>Доступность и избыточность хранилища ключей Azure

Хранилище ключей Azure имеет несколько уровней избыточности, благодаря которым ключи и секреты остаются доступными для приложения даже при сбое отдельных компонентов службы.

> [!NOTE]
> Это руководство применимо к хранилищам. Для обеспечения высокого уровня доступности и аварийного восстановления управляемые пулы HSM используют другую модель. Дополнительные сведения см. в статье [Аварийное восстановление управляемого устройства HSM](../managed-hsm/disaster-recovery-guide.md).

Содержимое хранилища ключей реплицируется в пределах региона, а также в дополнительный регион, расположенный на расстоянии не менее 240 км от основного, но в той же географической области. Это обеспечивает надежность ключей и секретов. Подробные сведения об определенных парах регионов см. в статье [Пары регионов Azure](../../best-practices-availability-paired-regions.md). Исключением для модели с парами регионов является регион "Южная Бразилия", в котором разрешен только вариант с хранением данных в регионе "Южная Бразилия". Регион "Южная Бразилия" использует хранилище, избыточное между зонами (ZRS), для трехразовой репликации данных в одном расположении/регионе.   

При сбое отдельных компонентов службы хранилища ключей ваши запросы будут обслуживаться дополнительными компонентами в текущем регионе, чтобы не допустить снижения функциональности. Для запуска этого процесса вам ничего не нужно делать. Он выполняется автоматически и является прозрачным.

Иногда, когда становится недоступным весь регион Azure, ваши запросы к Azure Key Vault в этом регионе автоматически перенаправляются (*отработка отказа*) в дополнительный регион, за исключением региона "Южная Бразилия". Когда основной регион снова становится доступным, запросы отправляются обратно в основной регион (это называется *восстановлением размещения*). Опять же, так как это происходит автоматически, то никаких дополнительных действий предпринимать не нужно.

В регионе "Южная Бразилия" необходимо составить план восстановления хранилищ ключей Azure в случае сбоя региона. Чтобы создать резервную копию хранилища ключей Azure и восстановить его в выбранном регионе, выполните действия, описанные в статье [Резервное копирование в Azure Key Vault](backup.md). 

Благодаря своей архитектуре, обеспечивающей высокий уровень доступности, Azure Key Vault не прекращает работу на время обслуживания.

Существует несколько моментов, на которые следует обратить внимание.

* В случае отработки отказа для региона на отработку отказа службы может потребоваться несколько минут. Запросы, выполненные в течение этого времени до отработки отказа, могут завершиться ошибкой.
* Если для подключения к хранилищу ключей используется приватный канал, для восстановления подключения в случае отработки отказа может потребоваться до 20 минут. 
* Во время отработки отказа хранилище ключей используется только для чтения. В этом режиме поддерживаются следующие запросы:
  * Список сертификатов
  * Получение сертификатов
  * получение списка секретов;
  * получение секретов;
  * получение списка ключей;
  * получение ключей и их свойств;
  * Шифрование
  * расшифровка;
  * оборачивание;
  * разворачивание;
  * Проверка
  * вход;
  * Резервное копирование

* Во время отработки отказа вы не сможете вносить изменения в свойства хранилища ключей. Вы не сможете изменить параметры политики доступа и конфигурации брандмауэра.

* После восстановления размещения становятся доступными все типы запросов (в том числе чтение *и* запись).
