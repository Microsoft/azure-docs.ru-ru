---
title: Часто задаваемые вопросы
description: Ответы на часто задаваемые вопросы о аттестации Microsoft Azure
services: attestation
author: msmbaldwin
ms.service: attestation
ms.topic: reference
ms.date: 07/20/2020
ms.author: mbaldwin
ms.openlocfilehash: 39f628845bdc9d54b48b1c8037f4a506a9d5c00a
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "89236711"
---
# <a name="frequently-asked-questions-for-microsoft-azure-attestation"></a>Часто задаваемые вопросы о аттестации Microsoft Azure

В этой статье содержатся ответы на некоторые наиболее распространенные вопросы о [аттестации Azure](overview.md).

Если проблема с Azure не устранена в этой статье, можно также отправить запрос на поддержку Azure на [странице поддержки Azure](https://azure.microsoft.com/support/options/).

## <a name="what-is-azure-pck-caching-service-and-its-role-in-enclave-attestation"></a>Что такое служба кэширования ПРЕДПОЛАГАЮ Azure и ее роль в аттестации анклава

Служба кэширования ПРЕДПОЛАГАЮ Azure определяет базовый уровень безопасности Azure для узлов [конфиденциальных вычислений Azure](../confidential-computing/overview.md) от Intel и кэширует данные. В ходе проверки доверенных сред выполнения (TEEs) служба аттестации Azure будет использовать кэшированные данные.  

Служба кэширования ПРЕДПОЛАГАЮ Azure:
   - Обеспечивает высокий уровень доступности 
   - Сокращает зависимости от внешних размещенных служб и подключения к Интернету.
   - Получение последних версий сертификатов Intel, списков отзыва сертификатов, доверенных вычислительных систем (TCB) и заключения в кавычки анклава идентификационных данных узлов Intel. Таким образом, служба подтверждает, что базовый план безопасности Azure будет называться аттестацией Azure при проверке TEEs, что значительно сокращает количество сбоев аттестации из-за недействительности или отзыва сертификатов Intel.  

## <a name="is-sgx-attestation-supported-by-azure-attestation-in-non-azure-environments"></a>Поддерживается аттестация SGX в средах, не относящихся к Azure, аттестация Azure

Аттестация Azure зависит от базового уровня безопасности, указанного службой кэширования ПРЕДПОЛАГАЮ Azure для проверки TEEs. Служба кэширования ПРЕДПОЛАГАЮ Azure в настоящее время разработана для поддержки только конфиденциальных вычислительных узлов Azure. 

## <a name="what-validations-does-azure-attestation-perform-for-attesting-sgx-enclaves"></a>Какие проверки выполняют аттестацию Azure для аттестации SGX енклавес

Аттестация Azure — это единая платформа для удаленной аттестации различных типов TEEs. Аттестация Azure:

   - Проверяет, относится ли доверенный корень подписанной анклава цитаты к Intel.
   - Проверяет, соответствует ли квота анклава базовому плану безопасности Azure в соответствии с определением в службе Azure ПРЕДПОЛАГАЮ Caching.
   - Проверяет, совпадает ли хэш SHA256 хранимых данных анклава (ЕХД) в объекте запроса аттестации с первым 32 байтами поля Репортдата в анклава quote.
   - Позволяет клиентам создавать поставщик аттестации и настраивать настраиваемую политику. В дополнение к приведенным выше проверкам служба аттестации Azure оценивает анклава цитату по политике. Политики определяют правила авторизации для анклава, а также определяют правила выдачи для создания токена аттестации. Чтобы проверить, работает ли нужное программное обеспечение в анклава, клиенты могут добавить правила авторизации, чтобы проверить, соответствуют ли поля **мрсигнер** и **мренклаве** в анклава quote значениям двоичных файлов клиента.

## <a name="how-can-a-verifier-obtain-the-collateral-for-sgx-attestation-supported-by-azure-attestation"></a>Как средство проверки может получить материалы для аттестации SGX, поддерживаемые аттестацией Azure

Как правило, для моделей аттестации с Intel в качестве корня доверия клиент аттестации взаимодействует с API анклава, чтобы получить свидетельство анклава. Интерфейсы API анклава внутренне вызывают службу Intel ПРЕДПОЛАГАЮ Caching для выборки сертификатов узла, которые должны быть подтверждены. Сертификаты используются для подписи свидетельства анклава, тем самым создавая удаленную аттестацию материалов.  

Этот же процесс можно реализовать для аттестации Azure. Тем не менее, чтобы воспользоваться преимуществами, предлагаемыми службой кэширования ПРЕДПОЛАГАЮ Azure, после установки этой виртуальной машины рекомендуется установить [БИБЛИОТЕКУ дкап для Azure](https://www.nuget.org/packages/Microsoft.Azure.DCAP). На основе соглашения с Intel, когда установлена библиотека Azure ДКАП, запросы на создание доказательств анклава перенаправляются из службы кэширования Intel ПРЕДПОЛАГАЮ в службу кэширования Azure ПРЕДПОЛАГАЮ. Библиотека Azure ДКАП поддерживается в средах под управлением Windows и Linux.

## <a name="how-to-shift-to-azure-attestation-from-other-attestation-models"></a>Как переместиться на аттестацию Azure из других моделей аттестации

- После установки виртуальной машины для конфиденциальных вычислений Azure установите библиотеку Azure ДКАП ([Windows/](https://www.nuget.org/packages/Microsoft.Azure.DCAP/) [Linux](https://packages.microsoft.com/ubuntu/18.04/prod/pool/main/a/az-dcap-client/)), чтобы использовать преимущества, предлагаемые службой кэширования предполагаю Azure.
- Необходимо создать удаленного клиента аттестации, который может получать свидетельство анклава и отправку запросов в аттестацию Azure. См. [примеры кода](/samples/browse/?expanded=azure&terms=attestation) для справки 
- Запросы аттестации можно отправлять в конечную точку REST API поставщиков по умолчанию или поставщиков настраиваемых аттестаций. 
- API-интерфейсы аттестации Azure защищены проверкой подлинности Azure AD. Следовательно, клиент, вызывающий API-интерфейсы аттестации, должен иметь возможность получить и передать действительный маркер доступа Azure AD в запросе аттестации. 

## <a name="how-can-the-relying-party-verify-the-integrity-of-attestation-token"></a>Как проверяющая сторона может проверить целостность токена аттестации

Токен аттестации, созданный аттестацией Azure, подписывается с помощью самозаверяющего сертификата. Сертификаты предоставляются через [конечную точку метаданных OpenID Connect](/rest/api/attestation/metadataconfiguration/get). Проверяющая сторона может получить сертификаты подписи из этой конечной точки и выполнить проверку подписи токена аттестации. Срок действия токена аттестации составляет 8 часов. 

## <a name="how-to-identify-the-certificate-to-be-used-for-signature-verification-from-the-openid-metadata-endpoint"></a>Определение сертификата, который будет использоваться для проверки подписи в конечной точке метаданных OpenID Connect

Несколько сертификатов, предоставляемых в конечной точке метаданных OpenID Connect, соответствуют различным вариантам использования (например, аттестации SGX), поддерживаемым аттестацией Azure. Согласно стандартам, заданным в [RFC 7515](https://tools.ietf.org/html/rfc7515), сертификат с идентификатором ключа (ребенок), соответствующий параметру *детей* в заголовке токена аттестации, будет использоваться для проверки подписи. Если соответствующий **ребенок** не найден, ожидается попытка использовать все сертификаты, предоставляемые конечной точкой метаданных OpenID Connect.

## <a name="is-it-possible-for-the-relying-party-to-share-secrets-with-the-validated-trusted-execution-environments-tees"></a>Возможно, проверяющая сторона совместно используют секреты с проверенными доверенными средами выполнения (TEEs)

Открытый ключ, созданный в анклава, можно выразить в свойстве Анклаваd Data (ЕХД) объекта запроса аттестации, отправленного клиентом в аттестацию Azure. После подтверждения того, что хэш SHA256 ЕХД выражен в поле Репортдата квоты, аттестация Azure включает в себя ЕХД в токене аттестации. Проверяющая сторона может использовать ЕХД из проверенного ответа аттестации для шифрования секретов и совместного использования с анклава. Дополнительные сведения см. в разделе [Основные понятия аттестации Azure](basic-concepts.md) .
