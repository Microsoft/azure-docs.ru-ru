---
title: Настройка узлов транзакций службы Azure Блокчейн
description: Настройка узлов транзакций службы Azure Блокчейн
ms.date: 11/20/2019
ms.topic: how-to
ms.reviewer: janders
ms.openlocfilehash: 0b659fa9f15cd41e9e55de526747d470046cafa4
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "101091269"
---
# <a name="configure-azure-blockchain-service-transaction-nodes"></a>Настройка узлов транзакций службы Azure Блокчейн

Узлы транзакций используются для отправки транзакций блокчейн в службу Блокчейн Azure через общедоступную конечную точку. Узел транзакции по умолчанию содержит закрытый ключ учетной записи Ethereum, зарегистрированной в блокчейн, поэтому его невозможно удалить.

Просмотр сведений об узле транзакции по умолчанию:

1. Войдите на [портал Azure](https://portal.azure.com).
1. Перейдите в область участника службы "Блокчейн Azure". Выберите **узлы транзакций**.

    ![Выбор узла транзакций по умолчанию](./media/configure-transaction-nodes/nodes.png)

    Общие сведения включают адреса общедоступной конечной точки и открытый ключ.

## <a name="create-transaction-node"></a>Создание узла транзакций

К элементу блокчейн можно добавить до девяти дополнительных узлов транзакций, а всего 10 узлов транзакций. Добавляя узлы транзакций, можно повысить масштабируемость или распределение нагрузки. Например, у вас может быть конечная точка узла транзакции для разных клиентских приложений.

Чтобы добавить узел транзакции, выполните следующие действия.

1. В портал Azure перейдите к своему члену службы Azure Блокчейн и выберите **узлы транзакций > добавить**.
1. Заполните параметры для нового узла транзакции.

    ![Добавление узла транзакции](./media/configure-transaction-nodes/add-node.png)

    | Параметр | Описание |
    |---------|-------------|
    | Имя | Имя узла транзакций. Имя, используемое при создании адреса DNS для конечной точки узла транзакций. Например, `newnode-myblockchainmember.blockchain.azure.com`. Имя узла нельзя изменить после его создания. |
    | Пароль | Задайте надежный пароль. Используйте пароль для доступа к конечной точке узла транзакции с обычной проверкой подлинности.

1. Нажмите кнопку **создания**.

    Подготовка нового узла транзакций занимает около 10 минут. На дополнительные узлы транзакций взимается плата. Дополнительные сведения о затратах см. на странице [цен на Azure](https://aka.ms/ABSPricing).

## <a name="endpoints"></a>Конечные точки

Узлы транзакций имеют уникальные DNS-имена и общедоступные конечные точки.

Чтобы просмотреть сведения о конечной точке узла транзакции, выполните следующие действия.

1. В портал Azure перейдите к одному из узлов транзакций члена службы Azure Блокчейн и выберите **Обзор**.

    ![Снимок экрана показывает общие сведения об узлах транзакций для элемента блокчейн.](./media/configure-transaction-nodes/endpoints.png)

Конечные точки узла транзакции являются безопасными и нуждаются в проверке подлинности. Вы можете подключиться к конечной точке транзакции с помощью аутентификации Azure AD, обычной проверки подлинности HTTPS и использовать ключ доступа по протоколу HTTPS или WebSocket через TLS.

### <a name="azure-active-directory-access-control"></a>Azure Active Directory контроля доступа

Конечные точки узла транзакций службы Azure Блокчейн поддерживают проверку подлинности Azure Active Directory (Azure AD). Вы можете предоставить доступ к конечной точке пользователю Azure AD, группе и субъекту-службе.

Чтобы предоставить Azure AD контроль доступа к конечной точке:

1. В портал Azure перейдите к своему члену службы Azure Блокчейн и выберите **узлы транзакций > управления доступом (IAM) > добавить > добавить назначение ролей**.
1. Создайте новое назначение ролей для пользователя, группы или субъекта-службы (роли приложения).

    ![Добавить роль IAM](./media/configure-transaction-nodes/add-role.png)

    | Параметр | Действие |
    |---------|-------------|
    | Роль | Выберите **владелец**, **участник** или **читатель**.
    | Назначение доступа для | Выберите **пользователя Azure AD, группу или субъект-службу**.
    | Выберите пункт | Найдите пользователя, группу или субъект-службу, которые нужно добавить.

1. Нажмите кнопку **сохранить** , чтобы добавить назначение ролей.

Дополнительные сведения об управлении доступом Azure AD см. [в статье назначение ролей Azure с помощью портал Azure](../../role-based-access-control/role-assignments-portal.md)

Дополнительные сведения о подключении с использованием проверки подлинности Azure AD см. в статье [Подключение к узлу с помощью проверки подлинности AAD](configure-aad.md).

### <a name="basic-authentication"></a>Обычная проверка подлинности

Для обычной проверки подлинности HTTPS учетные данные имени пользователя и пароля передаются в заголовке HTTPS запроса в конечную точку.

Вы можете просмотреть сведения о базовой конечной точке проверки подлинности узла транзакций в портал Azure. Перейдите к одному из узлов транзакций члена службы Azure Блокчейн и выберите **Обычная проверка подлинности** в параметрах.

![Обычная проверка подлинности](./media/configure-transaction-nodes/basic.png)

Имя пользователя является именем узла и не может быть изменено.

Чтобы использовать URL-адрес, замените \<password\> паролем, установленным при инициализации узла. Вы можете обновить пароль, нажав кнопку **Сброс пароля**.

### <a name="access-keys"></a>Ключи доступа

Для проверки подлинности с помощью ключа доступа ключ доступа включается в URL-адрес конечной точки. При подготовке узла транзакции создаются два ключа доступа. Для проверки подлинности можно использовать любой ключ доступа. Два ключа позволяют изменять и поворачивать ключи.

Вы можете просмотреть сведения о ключе доступа к узлу транзакции и скопировать адреса конечных точек, которые содержат ключи доступа. Перейдите к одному из узлов транзакций с членами службы Блокчейн Azure и выберите **ключи доступа** в параметрах.

### <a name="firewall-rules"></a>Правила брандмауэра

Правила брандмауэра позволяют ограничить IP-адреса, которые могут попытаться пройти проверку подлинности в узле транзакции.  Если для узла транзакции не настроены правила брандмауэра, доступ к нему не может получить ни одна сторона.  

Чтобы просмотреть правила брандмауэра узла транзакций, перейдите к одному из узлов транзакций члена службы Azure Блокчейн и выберите **правила брандмауэра** в окне Параметры.

Правила брандмауэра можно добавить, введя имя правила, начальный IP-адрес и конечный IP-адрес в сетке **правила брандмауэра** .

![Правила брандмауэра](./media/configure-transaction-nodes/firewall-rules.png)

Чтобы включить:

* **Один IP-адрес:** Настройте один и тот же IP-адрес для начального и конечного IP-адресов.
* **Диапазон IP-адресов:** Настройте начальный и конечный диапазоны IP-адресов. Например, диапазон, начинающийся с 10.221.34.0 и заканчивая на 10.221.34.255, включит всю подсеть 10.221.34.xxx.
* **Разрешить все IP-адреса:** Задайте для начального IP-адреса значение 0.0.0.0, а для конечного IP-адреса — 255.255.255.255.

## <a name="connection-strings"></a>Строки подключения

Синтаксис строки подключения для узла транзакции предоставляется для обычной проверки подлинности или использования ключей доступа. Предоставляются строки подключения, включая ключи доступа по протоколам HTTPS и WebSocket.

Можно просмотреть строки подключения узла транзакции и скопировать адреса конечных точек. Перейдите к одному из узлов транзакций с членами службы Блокчейн Azure и выберите **строки подключения** в параметрах.

![Строки подключения](./media/configure-transaction-nodes/connection-strings.png)

## <a name="sample-code"></a>Пример кода

Пример кода предоставляется для быстрого включения подключения к узлу транзакции через Web3, Несереум, Web3js и Труффле.

Вы можете просмотреть пример кода подключения для узла транзакции и скопировать его для использования с популярными инструментами разработчика. Перейдите к одному из узлов транзакций с членами службы Блокчейн Azure и выберите **пример кода** в параметрах.

Перейдите на вкладку Web3, Несереум, Труффле или Web3j, чтобы просмотреть пример кода, который вы хотите использовать.

![Образец кода](./media/configure-transaction-nodes/sample-code.png)

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Настройка узлов транзакций с помощью Azure CLI](manage-cli.md)
