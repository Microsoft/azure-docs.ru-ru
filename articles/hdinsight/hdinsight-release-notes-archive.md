---
title: Архивные заметки о выпуске Azure HDInsight
description: Заархивированные заметки о выпуске для Azure HDInsight. Ознакомьтесь с советами по разработке и подробными сведениями о Hadoop, Spark, R Server, Hive и т. д.
ms.service: hdinsight
ms.topic: conceptual
ms.custom: hdinsightactive
ms.date: 10/07/2020
ms.openlocfilehash: 8e6f27c378a6cea8fffbdcda58c4fc3bb865e51e
ms.sourcegitcommit: 2f9f306fa5224595fa5f8ec6af498a0df4de08a8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/28/2021
ms.locfileid: "98932173"
---
# <a name="archived-release-notes"></a>Архивные заметки о выпуске

## <a name="summary"></a>Итоги

Azure HDInsight является одной из самых популярных служб среди корпоративных клиентов для аналитики с открытым кодом Apache Hadoop и Apache Spark в Azure.

## <a name="release-date-11092020"></a>Дата выпуска: 11/09/2020

Этот выпуск относится как к HDInsight 3,6, так и к HDInsight 4,0. Выпуск HDInsight предоставляется для разных регионов на протяжении нескольких дней. Указанная здесь дата выпуска обозначает дату выпуска для первого из регионов. Если вы не видите приведенных ниже изменений, дождитесь выхода выпуска в вашем регионе в течение нескольких дней.

### <a name="new-features"></a>новые функции;
#### <a name="hdinsight-identity-broker-hib-is-now-ga"></a>Брокер удостоверений HDInsight (ХИБ) теперь является общедоступным
Брокер удостоверений HDInsight (ХИБ), включающий проверку подлинности OAuth для кластеров ESP, теперь общедоступен в этом выпуске. Кластеры ХИБ, созданные после этого выпуска, будут иметь новейшие функции ХИБ:
- Высокий уровень доступности (HA)
- Поддержка многофакторной проверки подлинности (MFA)
- Федеративные пользователи входят в систему без синхронизации хэшей паролей в AAD-DS. Дополнительные сведения см. в [документации по ХИБ](./domain-joined/identity-broker.md).

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>Переход на масштабируемые наборы виртуальных машин Azure
Сейчас HDInsight использует для подготовки кластера виртуальные машины Azure. Начиная с этого выпуска, служба постепенно переносится в [масштабируемые наборы виртуальных машин Azure](../virtual-machine-scale-sets/overview.md). Весь процесс может занять несколько месяцев. После переноса регионов и подписок вновь созданные кластеры HDInsight будут работать в масштабируемых наборах виртуальных машин без действий клиента. Критические изменения не требуются.

### <a name="deprecation"></a>Устаревшее
#### <a name="deprecation-of-hdinsight-36-ml-services-cluster"></a>Прекращение использования кластера служб ML в HDInsight 3,6
Тип кластера служб ML HDInsight 3,6 будет иметь окончание поддержки до декабря 31 2020. Клиенты не будут создавать новые кластеры служб ML 3,6 после декабря 31 2020. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Проверьте срок действия поддержки для версий HDInsight и типов кластеров [здесь](./hdinsight-component-versioning.md#available-versions).

#### <a name="disabled-vm-sizes"></a>Размеры отключенных виртуальных машин
Начиная с ноября 16 2020, HDInsight будет блокировать новые клиенты, создавая кластеры с помощью standand_A8, standand_A9, standand_A10 и standand_A11 размеров виртуальных машин. Существующие клиенты, которые использовали эти размеры виртуальных машин за последние три месяца, не будут затронуты. Начиная с 9 2021 января HDInsight все клиенты будут блокировать создание кластеров с помощью standand_A8, standand_A9, standand_A10 и standand_A11 размеров виртуальных машин. Существующие кластеры будут работать, как есть. Рассмотрите возможность перехода на HDInsight 4,0, чтобы избежать потенциальных прерываний системы и поддержки.

### <a name="behavior-changes"></a>Изменения в поведении
Для этого выпуска изменение поведения не выполняется.

### <a name="upcoming-changes"></a>Предстоящие изменения
В предстоящих выпусках будут внесены описанные ниже изменения.

#### <a name="ability-to-select-different-zookeeper-virtual-machine-sizes-for-spark-hadoop-and-ml-services"></a>Возможность выбора различных размеров виртуальных машин Zookeeper для служб Spark, Hadoop и ML
Сейчас HDInsight не поддерживает настройку размера узла Zookeeper для типов кластера Spark, Hadoop и ML. По умолчанию используется A2_v2 размеров виртуальных машин/a2, которые предоставляются бесплатно. В следующем выпуске можно выбрать размер виртуальной машины Zookeeper, наиболее подходящий для вашего сценария. Zookeeper узлам с размером виртуальной машины, отличным от A2_v2/a2, будет начисляться счет. Виртуальные машины A2_v2 и a2 по-прежнему предоставляются бесплатно.

#### <a name="default-cluster-version-will-be-changed-to-40"></a>Версия кластера по умолчанию будет изменена на 4,0
Начиная с 2021 февраля, версия кластера HDInsight по умолчанию будет изменена с 3,6 на 4,0. Дополнительные сведения о доступных версиях см. в разделе [Доступные версии](./hdinsight-component-versioning.md#available-versions). Дополнительные сведения о новых возможностях в [HDInsight 4,0](./hdinsight-version-release.md)

#### <a name="hdinsight-36-end-of-support-on-june-30-2021"></a>Окончание поддержки HDInsight 3,6 в июне 30 2021
HDInsight 3,6 будет иметь окончание поддержки. Начиная с 30 2021 июня клиенты не могут создавать кластеры HDInsight 3,6. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Рассмотрите возможность перехода на HDInsight 4,0, чтобы избежать потенциальных прерываний системы и поддержки.

### <a name="bug-fixes"></a>Исправления ошибок
HDInsight постоянно повышает надежность и производительность кластеров. 
#### <a name="fix-issue-for-restarting-vms-in-cluster"></a>Устранение проблемы при перезапуске виртуальных машин в кластере
Исправлена проблема перезапуска виртуальных машин в кластере. можно использовать [PowerShell или REST API для повторной перезагрузки узлов в кластере](./cluster-reboot-vm.md) .

### <a name="component-version-change"></a>Изменение версий компонентов
В этом выпуска не вносилось изменений в версии компонентов. Текущие версии компонентов для HDInsight 4,0 и HDInsight 3,6 можно найти в [этом документе](./hdinsight-component-versioning.md).

## <a name="release-date-10082020"></a>Дата выпуска: 10/08/2020

Этот выпуск относится как к HDInsight 3,6, так и к HDInsight 4,0. Выпуск HDInsight предоставляется для разных регионов на протяжении нескольких дней. Указанная здесь дата выпуска обозначает дату выпуска для первого из регионов. Если вы не видите приведенных ниже изменений, дождитесь выхода выпуска в вашем регионе в течение нескольких дней.

### <a name="new-features"></a>новые функции;
#### <a name="hdinsight-private-clusters-with-no-public-ip-and-private-link-preview"></a>Частные кластеры HDInsight без общедоступных IP-адресов и частной связи (Предварительная версия)
HDInsight теперь поддерживает создание кластеров без общедоступных IP-адресов и закрытых ссылок на кластеры в предварительной версии. Клиенты могут использовать новые дополнительные сетевые параметры, чтобы создать полностью изолированный кластер без общедоступного IP-адреса и использовать собственные закрытые конечные точки для доступа к кластеру. 

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>Переход на масштабируемые наборы виртуальных машин Azure
Сейчас HDInsight использует для подготовки кластера виртуальные машины Azure. Начиная с этого выпуска, служба постепенно переносится в [масштабируемые наборы виртуальных машин Azure](../virtual-machine-scale-sets/overview.md). Весь процесс может занять несколько месяцев. После переноса регионов и подписок вновь созданные кластеры HDInsight будут работать в масштабируемых наборах виртуальных машин без действий клиента. Критические изменения не требуются.

### <a name="deprecation"></a>Устаревшее
#### <a name="deprecation-of-hdinsight-36-ml-services-cluster"></a>Прекращение использования кластера служб ML в HDInsight 3,6
Тип кластера служб ML HDInsight 3,6 будет иметь окончание поддержки через Dec 31 2020. После этого клиенты не будут создавать новые кластеры служб ML 3,6. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Проверьте срок действия поддержки для версий HDInsight и типов кластеров [здесь](./hdinsight-component-versioning.md#available-versions).

### <a name="behavior-changes"></a>Изменения в поведении
Для этого выпуска изменение поведения не выполняется.

### <a name="upcoming-changes"></a>Предстоящие изменения
В предстоящих выпусках будут внесены описанные ниже изменения.

#### <a name="ability-to-select-different-zookeeper-virtual-machine-sizes-for-spark-hadoop-and-ml-services"></a>Возможность выбора различных размеров виртуальных машин Zookeeper для служб Spark, Hadoop и ML
Сейчас HDInsight не поддерживает настройку размера узла Zookeeper для типов кластера Spark, Hadoop и ML. По умолчанию используется A2_v2 размеров виртуальных машин/a2, которые предоставляются бесплатно. В следующем выпуске можно выбрать размер виртуальной машины Zookeeper, наиболее подходящий для вашего сценария. Zookeeper узлам с размером виртуальной машины, отличным от A2_v2/a2, будет начисляться счет. Виртуальные машины A2_v2 и a2 по-прежнему предоставляются бесплатно.

### <a name="bug-fixes"></a>Исправления ошибок
HDInsight постоянно повышает надежность и производительность кластеров. 

### <a name="component-version-change"></a>Изменение версий компонентов
В этом выпуска не вносилось изменений в версии компонентов. Текущие версии компонентов для HDInsight 4,0 и HDInsight 3,6 можно найти в [этом документе](./hdinsight-component-versioning.md).

## <a name="release-date-09282020"></a>Дата выпуска: 09/28/2020

Этот выпуск относится как к HDInsight 3,6, так и к HDInsight 4,0. Выпуск HDInsight предоставляется для разных регионов на протяжении нескольких дней. Указанная здесь дата выпуска обозначает дату выпуска для первого из регионов. Если вы не видите приведенных ниже изменений, дождитесь выхода выпуска в вашем регионе в течение нескольких дней.

### <a name="new-features"></a>новые функции;
#### <a name="autoscale-for-interactive-query-with-hdinsight-40-is-now-generally-available"></a>Автомасштабирование для интерактивного запроса с помощью HDInsight 4,0 теперь общедоступно
Тип кластера для интерактивного запроса "автоматическое масштабирование" теперь является общим доступным (общедоступным) для HDInsight 4,0. Все кластеры интерактивных запросов 4,0, созданные после 27 августа 2020, будут иметь общедоступную поддержку автоматического масштабирования.

#### <a name="hbase-cluster-supports-premium-adls-gen2"></a>Кластер HBase поддерживает ADLS 2-го поколения Premium
HDInsight теперь поддерживает ADLS 2-го поколения "Премиум" в качестве первичной учетной записи хранения для кластеров HDInsight HBase 3,6 и 4,0. Вместе с [ускоренными](./hbase/apache-hbase-accelerated-writes.md)операциями записи можно повысить производительность кластеров HBase.

#### <a name="kafka-partition-distribution-on-azure-fault-domains"></a>Распределение секций Kafka в доменах сбоя Azure
Домен сбоя — это логическое объединение базового оборудования в центре обработки данных Azure. Все домены сбоя используют общий источник питания и сетевой коммутатор. Перед тем как HDInsight Kafka может хранить все реплики секций в одном домене сбоя. Начиная с этого выпуска HDInsight теперь поддерживает автоматическое распространение секций Kafka на основе доменов сбоя Azure. 

#### <a name="encryption-in-transit"></a>Шифрование при передаче
Клиенты могут включить шифрование при передаче между узлами кластера, используя шифрование IPSec с ключами, управляемыми платформой. Этот параметр можно включить во время создания кластера. См. Дополнительные сведения о [включении шифрования при передаче](./domain-joined/encryption-in-transit.md).

#### <a name="encryption-at-host"></a>Шифрование на узле
При включении шифрования на узле данные, хранящиеся на узле виртуальной машины, шифруются в неактивных потоках и передаются в зашифрованном виде в службу хранилища. В этом выпуске можно **включить шифрование на диске с временными данными** при создании кластера. Шифрование на узле поддерживается только для [определенных номеров SKU виртуальных машин в ограниченных регионах](../virtual-machines/disks-enable-host-based-encryption-portal.md). HDInsight поддерживает [следующие конфигурации узла и номера SKU](./hdinsight-supported-node-configuration.md). См. Дополнительные сведения о [том, как включить шифрование на узле](./disk-encryption.md#encryption-at-host-using-platform-managed-keys).

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>Переход на масштабируемые наборы виртуальных машин Azure
Сейчас HDInsight использует для подготовки кластера виртуальные машины Azure. Начиная с этого выпуска, служба постепенно переносится в [масштабируемые наборы виртуальных машин Azure](../virtual-machine-scale-sets/overview.md). Весь процесс может занять несколько месяцев. После переноса регионов и подписок вновь созданные кластеры HDInsight будут работать в масштабируемых наборах виртуальных машин без действий клиента. Критические изменения не требуются.

### <a name="deprecation"></a>Устаревшее
В этом выпуске нет устаревших версий.

### <a name="behavior-changes"></a>Изменения в поведении
Для этого выпуска изменение поведения не выполняется.

### <a name="upcoming-changes"></a>Предстоящие изменения
В предстоящих выпусках будут внесены описанные ниже изменения.

#### <a name="ability-to-select-different-zookeeper-sku-for-spark-hadoop-and-ml-services"></a>Возможность выбора различных номеров SKU Zookeeper для служб Spark, Hadoop и ML
Сейчас HDInsight не поддерживает изменение номера SKU Zookeeper для типов кластера служб Spark, Hadoop и ML. Он использует A2_v2 номер SKU/a2 для узлов Zookeeper, и клиенты не наплатите за них. В следующем выпуске клиенты могут изменить SKU Zookeeper для служб Spark, Hadoop и ML по мере необходимости. Zookeeper узлам с номером SKU, отличным от A2_v2/a2, будет начисляться счет. Номер SKU по умолчанию по-прежнему будет A2_V2/a2 и без оплаты.

### <a name="bug-fixes"></a>Исправления ошибок
HDInsight постоянно повышает надежность и производительность кластеров. 

### <a name="component-version-change"></a>Изменение версий компонентов
В этом выпуска не вносилось изменений в версии компонентов. Текущие версии компонентов для HDInsight 4,0 и HDInsight 3,6 можно найти в [этом документе](./hdinsight-component-versioning.md).

## <a name="release-date-08092020"></a>Дата выпуска: 08/09/2020

Этот выпуск относится только к HDInsight 4,0. Выпуск HDInsight предоставляется для разных регионов на протяжении нескольких дней. Указанная здесь дата выпуска обозначает дату выпуска для первого из регионов. Если вы не видите приведенных ниже изменений, дождитесь выхода выпуска в вашем регионе в течение нескольких дней.

### <a name="new-features"></a>новые функции;
#### <a name="support-for-sparkcruise"></a>Поддержка Спарккруисе
Спарккруисе — это система автоматического вычисления повторного использования для Spark. Он выбирает общие части выражения для материализации на основе рабочей нагрузки прошлых запросов. Спарккруисе обрабатывает эти части выражения в процессе обработки запросов, и повторное использование вычислений применяется автоматически в фоновом режиме. Вы можете воспользоваться преимуществами Спарккруисе, не внося никаких изменений в код Spark.
 
#### <a name="support-hive-view-for-hdinsight-40"></a>Поддержка представления Hive для HDInsight 4,0
Представление Hive Apache Ambari предназначено для помощи в создании, оптимизации и выполнении запросов Hive из веб-браузера. Изначально представление Hive поддерживается для кластеров HDInsight 4,0, начиная с этого выпуска. Он не применяется к существующим кластерам. Чтобы получить встроенное представление Hive, необходимо удалить и повторно создать кластер.
 
#### <a name="support-tez-view-for-hdinsight-40"></a>Поддержка представления Tez для HDInsight 4,0
Представление Apache Tez используется для трассировки и отладки выполнения задания Hive Tez. Изначально представление Tez поддерживается для HDInsight 4,0, начиная с этого выпуска. Он не применяется к существующим кластерам. Чтобы получить встроенное представление Tez, необходимо удалить и повторно создать кластер.

### <a name="deprecation"></a>Устаревшее
#### <a name="deprecation-of-spark-21-and-22-in-hdinsight-36-spark-cluster"></a>Прекращение поддержки Spark 2.1 и 2.2 для кластера Spark в HDInsight 3.6
Начиная с июля 1 2020 клиенты не могут создавать новые кластеры Spark с Spark 2,1 и 2,2 в HDInsight 3,6. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти к версии Spark 2.3 в HDInsight 3.6 не позднее 30 июня 2020 г., чтобы избежать потенциальных проблем или перерывов в работе.
 
#### <a name="deprecation-of-spark-23-in-hdinsight-40-spark-cluster"></a>Устаревание Spark 2.3 для кластера Spark в HDInsight 4.0
Начиная с июля 1 2020 клиенты не могут создавать новые кластеры Spark с помощью Spark 2,3 в HDInsight 4,0. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти к версии Spark 2.4 в HDInsight 4.0 не позднее 30 июня 2020 г., чтобы избежать потенциальных проблем или перерывов в работе.
 
#### <a name="deprecation-of-kafka-11-in-hdinsight-40-kafka-cluster"></a>Прекращение поддержки Kafka 1.1 для кластера Kafka в HDInsight 4.0
Начиная с 1 июля 2020 г. клиенты не смогут создавать в HDInsight 4.0 новые кластеры Kafka с поддержкой Kafka 1.1. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти к версии Kafka 2.1 в HDInsight 4.0 не позднее 30 июня 2020 г., чтобы избежать потенциальных проблем или перерывов в работе.

### <a name="behavior-changes"></a>Изменения в поведении
#### <a name="ambari-stack-version-change"></a>Изменение версии стека Ambari
В этом выпуске версия Ambari изменяется с 2. x. x. x до 4,1. Версию стека (HDInsight 4,1) можно проверить в Ambari: Ambari > версии > пользователя.

### <a name="upcoming-changes"></a>Предстоящие изменения
Нет предстоящих критических изменений, на которые нужно обратить внимание.

### <a name="bug-fixes"></a>Исправления ошибок
HDInsight постоянно повышает надежность и производительность кластеров. 

Ниже Жирас для Hive переносится в резервный порт:
* [HIVE — 23619](https://issues.apache.org/jira/browse/HIVE-23619)
* [HIVE — 21223](https://issues.apache.org/jira/browse/HIVE-21223)
* [HIVE — 22599](https://issues.apache.org/jira/browse/HIVE-22599)
* [HIVE — 22121](https://issues.apache.org/jira/browse/HIVE-22121)
* [HIVE — 22136](https://issues.apache.org/jira/browse/HIVE-22136)
* [HIVE — 18786](https://issues.apache.org/jira/browse/HIVE-18786)

Ниже Жирас перенесены для HBase:
* [HBASE – 21458](https://issues.apache.org/jira/browse/HBASE-21458)
* [HBASE – 24208](https://issues.apache.org/jira/browse/HBASE-24208)
* [HBASE – 24205](https://issues.apache.org/jira/browse/HBASE-24205)

### <a name="component-version-change"></a>Изменение версий компонентов
В этом выпуска не вносилось изменений в версии компонентов. Текущие версии компонентов для HDInsight 4,0 и HDInsight 3,6 можно найти в [этом документе](./hdinsight-component-versioning.md).

### <a name="known-issues"></a>Известные проблемы

В портал Azure возникла проблема, из-за которой пользователи столкнулись с ошибкой при создании кластера Azure HDInsight с помощью открытого ключа проверки подлинности SSH. Когда пользователь выбирал параметр **Просмотр и создание**, отображалась ошибка "Не должен содержать комбинации любых трех последовательных символов из имени пользователя SSH". Эта проблема исправлена, но может потребоваться обновить кэш браузера. Для этого нажмите клавиши CTRL+F5, чтобы загрузить правильное представление. Чтобы решить эту проблему, необходимо создать кластер с шаблоном Resource Manager. 

## <a name="release-date-07132020"></a>Дата выпуска: 07/13/2020

Этот выпуск применим к HDInsight версий 3.6 и 4.0. Выпуск HDInsight предоставляется для разных регионов на протяжении нескольких дней. Указанная здесь дата выпуска обозначает дату выпуска для первого из регионов. Если вы не видите приведенных ниже изменений, дождитесь выхода выпуска в вашем регионе в течение нескольких дней.

### <a name="new-features"></a>новые функции;
#### <a name="support-for-customer-lockbox-for-microsoft-azure"></a>Поддержка защищенное хранилище для Microsoft Azure
Azure HDInsight теперь поддерживает защищенное хранилище Azure. Он предоставляет клиентам интерфейс для просмотра и утверждения или отклонения запросов на доступ к данным клиентов. Он используется, когда инженеру Майкрософт требуется получить доступ к данным клиента во время запроса на поддержку. Дополнительные сведения см. в разделе [защищенное хранилище for Microsoft Azure](../security/fundamentals/customer-lockbox-overview.md#supported-services-and-scenarios-in-preview).

#### <a name="service-endpoint-policies-for-storage"></a>Политики конечной точки службы для хранилища
Теперь клиенты могут использовать политики конечных точек службы (SEP) в подсети кластера HDInsight. Дополнительные сведения о [политике конечных точек службы Azure](../virtual-network/virtual-network-service-endpoint-policies-overview.md).

### <a name="deprecation"></a>Устаревшее
#### <a name="deprecation-of-spark-21-and-22-in-hdinsight-36-spark-cluster"></a>Прекращение поддержки Spark 2.1 и 2.2 для кластера Spark в HDInsight 3.6
Начиная с июля 1 2020 клиенты не могут создавать новые кластеры Spark с Spark 2,1 и 2,2 в HDInsight 3,6. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти к версии Spark 2.3 в HDInsight 3.6 не позднее 30 июня 2020 г., чтобы избежать потенциальных проблем или перерывов в работе.
 
#### <a name="deprecation-of-spark-23-in-hdinsight-40-spark-cluster"></a>Устаревание Spark 2.3 для кластера Spark в HDInsight 4.0
Начиная с июля 1 2020 клиенты не могут создавать новые кластеры Spark с помощью Spark 2,3 в HDInsight 4,0. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти к версии Spark 2.4 в HDInsight 4.0 не позднее 30 июня 2020 г., чтобы избежать потенциальных проблем или перерывов в работе.
 
#### <a name="deprecation-of-kafka-11-in-hdinsight-40-kafka-cluster"></a>Прекращение поддержки Kafka 1.1 для кластера Kafka в HDInsight 4.0
Начиная с 1 июля 2020 г. клиенты не смогут создавать в HDInsight 4.0 новые кластеры Kafka с поддержкой Kafka 1.1. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти к версии Kafka 2.1 в HDInsight 4.0 не позднее 30 июня 2020 г., чтобы избежать потенциальных проблем или перерывов в работе.

### <a name="behavior-changes"></a>Изменения в поведении
Нет изменений в поведении, к которым нужно обратить внимание.

### <a name="upcoming-changes"></a>Предстоящие изменения
В предстоящих выпусках будут внесены описанные ниже изменения. 

#### <a name="ability-to-select-different-zookeeper-sku-for-spark-hadoop-and-ml-services"></a>Возможность выбора различных номеров SKU Zookeeper для служб Spark, Hadoop и ML
Сейчас HDInsight не поддерживает изменение номера SKU Zookeeper для типов кластера служб Spark, Hadoop и ML. Он использует A2_v2 номер SKU/a2 для узлов Zookeeper, и клиенты не наплатите за них. В предстоящем выпуске клиенты смогут изменять SKU Zookeeper для служб Spark, Hadoop и ML по мере необходимости. Zookeeper узлам с номером SKU, отличным от A2_v2/a2, будет начисляться счет. Номер SKU по умолчанию по-прежнему будет A2_V2/a2 и без оплаты.

### <a name="bug-fixes"></a>Исправления ошибок
HDInsight постоянно повышает надежность и производительность кластеров. 
#### <a name="fixed-hive-warehouse-connector-issue"></a>Исправлена проблема с соединителем хранилища Hive
В предыдущем выпуске возникла ошибка использования соединителя хранилища Hive. Проблема исправлена. 

#### <a name="fixed-zeppelin-notebook-truncates-leading-zeros-issue"></a>Исправленная Записная книжка Zeppelin усекает начальные нули.
Zeppelin неправильно усекает начальные нули в выходных данных таблицы для формата строки. Мы устранили эту ошибку в этом выпуске.

### <a name="component-version-change"></a>Изменение версий компонентов
В этом выпуска не вносилось изменений в версии компонентов. Текущие версии компонентов для HDInsight 4,0 и HDInsight 3,6 можно найти в [этом документе](./hdinsight-component-versioning.md).

## <a name="release-date-06112020"></a>Дата выпуска: 06/11/2020

Этот выпуск применим к HDInsight версий 3.6 и 4.0. Выпуск HDInsight предоставляется для разных регионов на протяжении нескольких дней. Указанная здесь дата выпуска обозначает дату выпуска для первого из регионов. Если вы не видите приведенных ниже изменений, дождитесь выхода выпуска в вашем регионе в течение нескольких дней.

### <a name="new-features"></a>новые функции;
#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>Переход на масштабируемые наборы виртуальных машин Azure
HDInsight использует виртуальные машины Azure для подготовки кластера. В этом выпуске новые кластеры HDInsight начинают использовать масштабируемый набор виртуальных машин Azure. Изменение выполняется постепенно. Критические изменения не требуются. См. Дополнительные сведения о [масштабируемых наборах виртуальных машин Azure](../virtual-machine-scale-sets/overview.md).
 
#### <a name="reboot-vms-in-hdinsight-cluster"></a>Перезагрузка виртуальных машин в кластере HDInsight
В этом выпуске мы поддерживаем перезагрузки виртуальных машин в кластере HDInsight для перезагрузки нереагирующих узлов. В настоящее время это можно сделать только через API, поддержку PowerShell и CLI. Дополнительные сведения об API см. в [этом документе](https://github.com/Azure/azure-rest-api-specs/codeowners/master/specification/hdinsight/resource-manager/Microsoft.HDInsight/stable/2018-06-01-preview/virtualMachines.json).
 
### <a name="deprecation"></a>Устаревшее
#### <a name="deprecation-of-spark-21-and-22-in-hdinsight-36-spark-cluster"></a>Прекращение поддержки Spark 2.1 и 2.2 для кластера Spark в HDInsight 3.6
Начиная с июля 1 2020 клиенты не могут создавать новые кластеры Spark с Spark 2,1 и 2,2 в HDInsight 3,6. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти к версии Spark 2.3 в HDInsight 3.6 не позднее 30 июня 2020 г., чтобы избежать потенциальных проблем или перерывов в работе.
 
#### <a name="deprecation-of-spark-23-in-hdinsight-40-spark-cluster"></a>Устаревание Spark 2.3 для кластера Spark в HDInsight 4.0
Начиная с июля 1 2020 клиенты не могут создавать новые кластеры Spark с помощью Spark 2,3 в HDInsight 4,0. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти к версии Spark 2.4 в HDInsight 4.0 не позднее 30 июня 2020 г., чтобы избежать потенциальных проблем или перерывов в работе.
 
#### <a name="deprecation-of-kafka-11-in-hdinsight-40-kafka-cluster"></a>Прекращение поддержки Kafka 1.1 для кластера Kafka в HDInsight 4.0
Начиная с 1 июля 2020 г. клиенты не смогут создавать в HDInsight 4.0 новые кластеры Kafka с поддержкой Kafka 1.1. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти к версии Kafka 2.1 в HDInsight 4.0 не позднее 30 июня 2020 г., чтобы избежать потенциальных проблем или перерывов в работе.
 
### <a name="behavior-changes"></a>Изменения в поведении
#### <a name="esp-spark-cluster-head-node-size-change"></a>Изменение размера головного узла кластера ESP Spark 
Минимальный разрешенный размер головного узла для кластера ESP Spark изменится на Standard_D13_V2. Виртуальные машины с низкими ядрами и памятью в качестве головного узла могут вызвать проблемы с кластером ESP из-за относительно нехватки ресурсов ЦП и памяти. Начиная с выпуска, используйте номера SKU выше Standard_D13_V2 и Standard_E16_V3 в качестве головного узла для кластеров ESP Spark.
 
#### <a name="a-minimum-4-core-vm-is-required-for-head-node"></a>Для головного узла требуется виртуальная машина с не менее чем 4-мя ядрами 
Для головного узла требуется виртуальная машина с не менее чем 4-мя ядрами, чтобы обеспечивать высокий уровень доступности и надежности для кластеров HDInsight. Начиная с 6 апреля 2020 г. клиенты смогут выбрать в качестве головного узла для новых кластеров HDInsight только виртуальные машины с 4-мя и более ядрами. Существующие кластеры будут продолжать работу без изменений. 
 
#### <a name="cluster-worker-node-provisioning-change"></a>Изменение подготовки узла рабочей роли кластера
Когда 80% рабочих узлов будет готова, кластер переходит в **Рабочий** этап. На этом этапе клиенты могут выполнять все операции плоскости данных, такие как выполнение скриптов и заданий. Но клиенты не могут выполнять операции плоскости управления, такие как масштабирование вверх и вниз. Поддерживается только удаление.
 
После **рабочего** этапа кластер ожидает еще 60 минут для оставшихся 20% рабочих узлов. В конце этого 60 минут кластер переходит на **выполняющийся** этап, даже если все рабочие узлы по-прежнему недоступны. После того как кластер переходит в **запущенный** этап, его можно использовать как нормальную работу. Операции с планами управления, такие как масштабирование вверх/вниз, и операции с планом данных, такие как выполнение скриптов и заданий, принимаются. Если некоторые из запрошенных рабочих узлов недоступны, кластер будет помечен как частичный успешно. Вы платите за узлы, которые были успешно развернуты. 
 
#### <a name="create-new-service-principal-through-hdinsight"></a>Создание нового субъекта-службы с помощью HDInsight
Ранее при создании кластера клиенты могут создать новый субъект-службу для доступа к подключенной учетной записи ADLS Gen 1 в портал Azure. Начиная с 15 2020 июня клиенты не могут создать новый субъект-службу в рабочем процессе создания HDInsight, поддерживается только имеющийся субъект-служба. См. раздел [Создание субъекта-службы и сертификатов с помощью Azure Active Directory](../active-directory/develop/howto-create-service-principal-portal.md).

#### <a name="time-out-for-script-actions-with-cluster-creation"></a>Время ожидания для действий сценария с созданием кластера
HDInsight поддерживает выполнение действий скриптов при создании кластера. В этом выпуске все действия сценария с созданием кластера должны заканчиваться в течение **60 минут** или истекает время ожидания. Действия скриптов, отправленные в выполняемые кластеры, не затрагиваются. Дополнительные сведения см. [здесь](./hdinsight-hadoop-customize-cluster-linux.md#script-action-in-the-cluster-creation-process).
 
### <a name="upcoming-changes"></a>Предстоящие изменения
Нет предстоящих критических изменений, на которые нужно обратить внимание.
 
### <a name="bug-fixes"></a>Исправления ошибок
HDInsight постоянно повышает надежность и производительность кластеров. 
 
### <a name="component-version-change"></a>Изменение версий компонентов
#### <a name="hbase-20-to-216"></a>Обновление HBase 2.0 до 2.1.6
Версия HBase обновлена с версии 2,0 до 2.1.6.
 
#### <a name="spark-240-to-244"></a>Обновление Spark 2.4.0 до 2.4.4
Версия Spark обновлена с версии 2.4.0 до 2.4.4.
 
#### <a name="kafka-210-to-211"></a>Обновление Kafka 2.1.0 до 2.1.1
Версия Kafka обновлена с версии 2.1.0 до версий.
 
Текущие версии компонентов для HDInsight 4,0 AD HDInsight 3,6 можно найти в [этом документе](./hdinsight-component-versioning.md) .

### <a name="known-issues"></a>Известные проблемы

#### <a name="hive-warehouse-connector-issue"></a>Проблемы с соединителем хранилища Hive
В этом выпуске есть проблема с соединителем хранилища Hive. Исправление будет содержаться в следующем выпуске. Существующие кластеры, созданные до этого выпуска, не затрагиваются. По возможности Избегайте удаления и повторного создания кластера. Если вам нужна дополнительная помощь, откройте запрос в службу поддержки.

## <a name="release-date-01092020"></a>Дата выпуска: 09.01.2020

Этот выпуск применим к HDInsight версий 3.6 и 4.0. Выпуск HDInsight предоставляется для разных регионов на протяжении нескольких дней. Указанная здесь дата выпуска обозначает дату выпуска для первого из регионов. Если вы не видите приведенных ниже изменений, дождитесь выхода выпуска в вашем регионе в течение нескольких дней.

### <a name="new-features"></a>новые функции;
#### <a name="tls-12-enforcement"></a>Обязательное использование TLS 1.2
TLS и SSL являются протоколами шифрования, которые обеспечивает безопасность передачи данных по сети. Дополнительные сведения о [TLS](https://en.wikipedia.org/wiki/Transport_Layer_Security#SSL_1.0.2C_2.0_and_3.0). В HDInsight используется TLS 1.2 на общедоступных конечных точках HTTPS, но TLS 1.1 пока поддерживается для обеспечения обратной совместимости. 

Начиная с этого выпуска клиенты могут потребовать использовать только TLS 1.2 для всех подключений через конечную точку общедоступного кластера. Для этого введено новое свойство **minSupportedTlsVersion**, которое можно указать во время создания кластера. Если значение для этого свойства не задано, кластер сохраняет поддержку TLS 1.0, 1.1 и 1.2, что соответствует текущему поведению. Клиенты могут задать для этого свойства значение "1.2", и тогда кластер будет поддерживать только TLS 1.2 и более поздних версий. Дополнительные сведения см. в статье [о протоколе TLS](./transport-layer-security.md).

#### <a name="bring-your-own-key-for-disk-encryption"></a>Использование собственных ключей для шифрования дисков
Все управляемые диски в HDInsight защищены с помощью шифрования службы хранилища Azure (SSE). Данные на этих дисках по умолчанию шифруются с помощью ключей, управляемых корпорацией Майкрософт. Начиная с этого выпуска вы можете создавать собственные ключи (технология BYOK) для шифрования дисков и управлять ими в Azure Key Vault. Шифрование с поддержкой BYOK настраивается для кластера одним действием во время его создания и не предполагает дополнительных затрат. Просто зарегистрируйте HDInsight в качестве управляемого удостоверения в Azure Key Vault и добавьте ключ шифрования при создании кластера. Подробнее см. статью о [шифровании диска с управляемыми клиентом ключами](./disk-encryption.md).

### <a name="deprecation"></a>Устаревшее
Список устаревших компонентов в этом выпуске не расширяется. Чтобы подготовиться к планам по прекращению поддержки, изучите список [Предстоящие изменения](#upcoming-changes).

### <a name="behavior-changes"></a>Изменения в работе
В этом выпуске не вносятся изменения в поведении. Чтобы подготовиться к планам по изменениям, изучите список [Предстоящие изменения](#upcoming-changes).

### <a name="upcoming-changes"></a>Предстоящие изменения
В предстоящих выпусках будут внесены описанные ниже изменения. 

#### <a name="deprecation-of-spark-21-and-22-in-hdinsight-36-spark-cluster"></a>Прекращение поддержки Spark 2.1 и 2.2 для кластера Spark в HDInsight 3.6
Начиная с 1 июля 2020 г. клиенты не смогут создавать в HDInsight 3.6 новые кластеры Spark с поддержкой Spark 2.1 или 2.2. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти на версию Spark 2.3 в HDInsight 3.6 не позднее 30 июня 2020 г., чтобы избежать возможных проблем или перерывов в работе. Дополнительные сведения см. [в статье миграция рабочих нагрузок Apache Spark 2,1 и 2,2 в 2,3 и 2,4](./spark/migrate-versions.md).

#### <a name="deprecation-of-spark-23-in-hdinsight-40-spark-cluster"></a>Устаревание Spark 2.3 для кластера Spark в HDInsight 4.0
Начиная с 1 июля 2020 г. клиенты не смогут создавать в HDInsight 4.0 новые кластеры Spark с поддержкой Spark 2.3. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти на версию Spark 2.4 в HDInsight 4.0 не позднее 30 июня 2020 г., чтобы избежать возможных проблем или перерывов в работе. Дополнительные сведения см. [в статье миграция рабочих нагрузок Apache Spark 2,1 и 2,2 в 2,3 и 2,4](./spark/migrate-versions.md).

#### <a name="deprecation-of-kafka-11-in-hdinsight-40-kafka-cluster"></a>Прекращение поддержки Kafka 1.1 для кластера Kafka в HDInsight 4.0
С 1 2020 июля клиенты не смогут создавать новые кластеры Kafka с Kafka 1,1 в HDInsight 4,0. Существующие кластеры будут продолжать работу без изменений, но без поддержки со стороны корпорации Майкрософт. Постарайтесь перейти на версию Kafka 2.1 в HDInsight 4.0 не позднее 30 июня 2020 г., чтобы избежать возможных проблем или перерывов в работе. Дополнительные сведения см. [в статье Перенос рабочих нагрузок Apache Kafka в Azure HDInsight 4,0](./kafka/migrate-versions.md).

#### <a name="hbase-20-to-216"></a>Обновление HBase 2.0 до 2.1.6
В предстоящем выпуске HDInsight 4.0 версия HBase будет обновлена с 2.0 до 2.1.6

#### <a name="spark-240-to-244"></a>Обновление Spark 2.4.0 до 2.4.4
В предстоящем выпуске HDInsight 4.0 версия Spark будет обновлена с 2.4.0 до 2.4.4

#### <a name="kafka-210-to-211"></a>Обновление Kafka 2.1.0 до 2.1.1
В предстоящем выпуске HDInsight 4.0 версия Kafka будет обновлена с 2.1.0 до 2.1.1

#### <a name="a-minimum-4-core-vm-is-required-for-head-node"></a>Для головного узла требуется виртуальная машина с не менее чем 4-мя ядрами 
Для головного узла требуется виртуальная машина с не менее чем 4-мя ядрами, чтобы обеспечивать высокий уровень доступности и надежности для кластеров HDInsight. Начиная с 6 апреля 2020 г. клиенты смогут выбрать в качестве головного узла для новых кластеров HDInsight только виртуальные машины с 4-мя и более ядрами. Существующие кластеры будут продолжать работу без изменений. 

#### <a name="esp-spark-cluster-node-size-change"></a>Изменение размера узла для кластера ESP Spark 
В предстоящем выпуске минимальный разрешенный размер узла для кластера ESP Spark изменится на Standard_D13_V2. Виртуальные машины серии A могут приводить к проблемам с кластером ESP из-за сравнительно малого объема ресурсов ЦП и памяти. Виртуальные машины серии A не рекомендуются для создания новых кластеров ESP.

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>Переход на масштабируемые наборы виртуальных машин Azure
Сейчас HDInsight использует для подготовки кластера виртуальные машины Azure. В предстоящем выпуске HDInsight переключится на использование масштабируемых наборов виртуальных машин Azure. Изучите информацию о масштабируемых наборах виртуальных машин Azure.

### <a name="bug-fixes"></a>Исправления ошибок
HDInsight постоянно повышает надежность и производительность кластеров. 

### <a name="component-version-change"></a>Изменение версий компонентов
В этом выпуска не вносилось изменений в версии компонентов. Текущие версии компонентов для HDInsight 4.0 и HDInsight 3.6 вы можете найти здесь.

## <a name="release-date-12172019"></a>Дата выпуска: 12/17/2019

Этот выпуск применим к HDInsight версий 3.6 и 4.0.

### <a name="new-features"></a>новые функции;

#### <a name="service-tags"></a>Теги служб
Теги службы упрощают безопасность виртуальных машин Azure и виртуальных сетей Azure, позволяя легко ограничить сетевой доступ к службам Azure. Вы можете использовать теги службы в правилах группы безопасности сети (NSG), чтобы разрешать или запрещать трафик к определенной службе Azure глобально или по всему региону Azure. Azure обеспечивает обслуживание IP-адресов, лежащих в основе каждого тега. Теги службы HDInsight для групп безопасности сети (группы безопасности сети) представляют собой группы IP-адресов для служб работоспособности и управления. Эти группы помогают сократить сложность создания правил безопасности. Клиенты HDInsight могут включить тег службы с помощью портал Azure, PowerShell и REST API. Дополнительные сведения см. в статье [Теги службы Azure HDInsight для групп безопасности сети](./hdinsight-service-tags.md).

#### <a name="custom-ambari-db"></a>Пользовательская база данных Ambari DB
HDInsight теперь позволяет использовать собственную базу данных SQL для Apache Ambari. Эту пользовательскую базу данных Ambari можно настроить из портал Azure или с помощью шаблона диспетчер ресурсов.  Эта функция позволяет выбрать подходящую базу данных SQL для потребностей в обработке и емкости. Также можно легко выполнить обновление, чтобы соответствовать требованиям к росту бизнеса. Дополнительные сведения см. [в статье Настройка кластеров HDInsight с помощью пользовательской базы данных Ambari DB](hdinsight-custom-ambari-db.md).

![Пользовательская база данных Ambari DB](./media/hdinsight-release-notes/custom-ambari-db.png)

### <a name="deprecation"></a>Устаревшее
Список устаревших компонентов в этом выпуске не расширяется. Чтобы подготовиться к планам по прекращению поддержки, изучите список [Предстоящие изменения](#upcoming-changes).

### <a name="behavior-changes"></a>Изменения в работе
В этом выпуске не вносятся изменения в поведении. Чтобы подготовиться к предстоящему изменению поведения, см. статью [предстоящие изменения](#upcoming-changes).

### <a name="upcoming-changes"></a>Предстоящие изменения
В предстоящих выпусках будут внесены описанные ниже изменения. 

#### <a name="transport-layer-security-tls-12-enforcement"></a>Обеспечение безопасности транспортного уровня (TLS) 1,2
TLS и SSL являются протоколами шифрования, которые обеспечивает безопасность передачи данных по сети. Дополнительные сведения см. в статье [о протоколе TLS](https://en.wikipedia.org/wiki/Transport_Layer_Security#SSL_1.0.2C_2.0_and_3.0). Хотя кластеры Azure HDInsight принимают подключения TLS 1,2 в общедоступных конечных точках HTTPS, TLS 1,1 по-прежнему поддерживается для обеспечения обратной совместимости со старыми клиентами.

Начиная со следующего выпуска, вы сможете включить и настроить новые кластеры HDInsight, чтобы они принимали только подключения TLS 1,2. 

Позднее в году, начиная с 6/30/2020, Azure HDInsight будет применять TLS 1,2 или более поздние версии для всех подключений HTTPS. Рекомендуется убедиться, что все клиенты готовы к обработке TLS 1,2 или более поздних версий.

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>Переход на масштабируемые наборы виртуальных машин Azure
Сейчас HDInsight использует для подготовки кластера виртуальные машины Azure. Начиная с февраля 2020 (Точная дата будет передана позже), HDInsight будет использовать масштабируемые наборы виртуальных машин Azure. См. Дополнительные сведения о [масштабируемых наборах виртуальных машин Azure](../virtual-machine-scale-sets/overview.md).

#### <a name="esp-spark-cluster-node-size-change"></a>Изменение размера узла для кластера ESP Spark 
В следующем выпуске:
- Минимальный разрешенный размер узла для кластера ESP Spark изменится на Standard_D13_V2. 
- Виртуальные машины серии a не рекомендуются для создания новых кластеров ESP, так как виртуальные машины серии A могут вызвать проблемы с кластером ESP из-за относительно нехватки ресурсов ЦП и памяти.

#### <a name="hbase-20-to-21"></a>HBase 2,0 – 2,1
В предстоящем выпуске HDInsight 4,0 версия HBase будет обновлена с версии 2,0 до 2,1.

### <a name="bug-fixes"></a>Исправления ошибок
HDInsight постоянно повышает надежность и производительность кластеров. 

### <a name="component-version-change"></a>Изменение версий компонентов
Поддержка HDInsight 3,6 была продлена 31 декабря 2020. Дополнительные сведения см. в [поддерживаемых версиях HDInsight](hdinsight-component-versioning.md#supported-hdinsight-versions).

Нет изменений версии компонента для HDInsight 4,0.

Apache Zeppelin в HDInsight 3,6:0.7.0-->0.7.3. 

Последние версии компонентов можно найти в [этом документе](./hdinsight-component-versioning.md).

### <a name="new-regions"></a>Новые регионы

#### <a name="uae-north"></a>Северная часть ОАЭ;
В качестве IP-адресов управления для северной части: `65.52.252.96` и `65.52.252.97` .


## <a name="release-date-11072019"></a>Дата выпуска: 11/07/2019

Этот выпуск применим к HDInsight версий 3.6 и 4.0.

### <a name="new-features"></a>новые функции;

#### <a name="hdinsight-identity-broker-hib-preview"></a>Брокер удостоверений HDInsight (ХИБ) (Предварительная версия)

Брокер удостоверений HDInsight (ХИБ) позволяет пользователям входить в Apache Ambari с помощью многофакторной проверки подлинности (MFA) и получать необходимые билеты Kerberos, не требуя хэширования паролей в доменных службах Azure Active Directory (AAD-DS). Сейчас ХИБ доступен только для кластеров, развернутых с помощью шаблона управления ресурсами Azure (ARM).

#### <a name="kafka-rest-api-proxy-preview"></a>Прокси-сервер Kafka для интерфейса API RESTful (Предварительная версия)

Прокси-сервер Kafka для интерфейса API RESTful обеспечивает одноэлементное развертывание высокодоступного прокси-сервера RESTFUL с помощью кластера Kafka с защищенной авторизацией Azure AD и протоколом OAuth. 

#### <a name="auto-scale"></a>Автомасштабирование

Автоматическое масштабирование Azure HDInsight теперь доступно во всех регионах для Apache Spark и типов кластеров Hadoop. Эта функция позволяет управлять рабочими нагрузками аналитики больших данных более экономичным и эффективным способом. Теперь вы можете оптимизировать использование кластеров HDInsight и заплатить только за то, что вам нужно.

В зависимости от требований можно выбрать автоматическое масштабирование на основе нагрузки и на основе расписания. Автомасштабирование на основе загрузки позволяет масштабировать размер кластера в соответствии с текущими потребностями ресурсов, а автомасштабирование на основе расписания может изменить размер кластера на основе предопределенного расписания. 

Поддержка автомасштабирования для рабочей нагрузки HBase и LLAP также является общедоступной предварительной версией. Дополнительные сведения см. в статье [Автоматическое масштабирование кластеров Azure HDInsight](./hdinsight-autoscale-clusters.md).

#### <a name="hdinsight-accelerated-writes-for-apache-hbase"></a>Ускорение операций записи HDInsight для Apache HBase 

Для ускоренной записи используются управляемые диски Azure SSD ценовой категории "Премиум", которые позволяют повысить производительность журнала упреждающего протоколирования Apache HBase (WAL). Дополнительные сведения см. в статье [Azure HDInsight Accelerated Writes for Apache HBase](./hbase/apache-hbase-accelerated-writes.md) (Ускоренные операции записи Azure HDInsight для Apache HBase).

#### <a name="custom-ambari-db"></a>Пользовательская база данных Ambari DB

Теперь HDInsight предлагает новую емкость, которая позволит клиентам использовать собственную базу данных SQL для Ambari. Теперь клиенты могут выбрать подходящую базу данных SQL для Ambari и легко обновлять ее в соответствии с требованиями к росту бизнеса. Развертывание выполняется с помощью шаблона Azure Resource Manager. Дополнительные сведения см. [в статье Настройка кластеров HDInsight с помощью пользовательской базы данных Ambari DB](./hdinsight-custom-ambari-db.md).

#### <a name="f-series-virtual-machines-are-now-available-with-hdinsight"></a>Виртуальные машины серии F теперь доступны в HDInsight.

Виртуальные машины серии F являются хорошим выбором, чтобы приступить к работе с HDInsight с требованиями к облегченной обработке. Предлагая более низкую ориентировочную стоимость часа, серия F обеспечивает наилучшее соотношение цены и производительности в портфеле Azure в единицах вычисления Azure (ACU) на виртуальный ЦП. Дополнительные сведения см. [в статье Выбор правильного размера виртуальной машины для кластера Azure HDInsight](./hdinsight-selecting-vm-size.md).

### <a name="deprecation"></a>Устаревшее

#### <a name="g-series-virtual-machine-deprecation"></a>Устаревшие виртуальные машины серии G
В этом выпуске виртуальные машины серии G больше не предлагаются в HDInsight.

#### <a name="dv1-virtual-machine-deprecation"></a>Прекращение использования виртуальной машины Dv1
В этом выпуске использование виртуальных машин Dv1 с HDInsight является устаревшим. Любой запрос клиента для Dv1 будет обслуживаться автоматически с помощью Dv2. Разница в ценах между виртуальными машинами Dv1 и Dv2 отсутствует.

### <a name="behavior-changes"></a>Изменения в поведении

#### <a name="cluster-managed-disk-size-change"></a>Изменение размера управляемого диска кластера
HDInsight предоставляет управляемое дисковое пространство с кластером. В этом выпуске размер управляемого диска каждого узла в новом созданном кластере изменится на 128 ГБ.

### <a name="upcoming-changes"></a>Предстоящие изменения
В будущих выпусках будут выполнены следующие изменения. 

#### <a name="moving-to-azure-virtual-machine-scale-sets"></a>Переход на масштабируемые наборы виртуальных машин Azure
Сейчас HDInsight использует для подготовки кластера виртуальные машины Azure. Начиная с декабря HDInsight будет использовать масштабируемые наборы виртуальных машин Azure. См. Дополнительные сведения о [масштабируемых наборах виртуальных машин Azure](../virtual-machine-scale-sets/overview.md).

#### <a name="hbase-20-to-21"></a>HBase 2,0 – 2,1
В предстоящем выпуске HDInsight 4,0 версия HBase будет обновлена с версии 2,0 до 2,1.

#### <a name="a-series-virtual-machine-deprecation-for-esp-cluster"></a>Устаревший виртуальный компьютер серии A для кластера ESP
Виртуальные машины серии A могут вызвать проблемы с кластером ESP из-за относительно нехватки ресурсов ЦП и памяти. В предстоящем выпуске виртуальные машины серии A не рекомендуются для создания новых кластеров ESP.

### <a name="bug-fixes"></a>Исправления ошибок
HDInsight постоянно повышает надежность и производительность кластеров. 

### <a name="component-version-change"></a>Изменение версий компонентов
Для этого выпуска изменение версии компонента отсутствует. Текущие версии компонентов для HDInsight 4,0 и HDInsight 3,6 можно найти [здесь](./hdinsight-component-versioning.md).


## <a name="release-date-08072019"></a>Дата выпуска: 08/07/2019

### <a name="component-versions"></a>Версии компонентов

Официальные версии Apache всех компонентов HDInsight 4,0 приведены ниже. Перечисленные компоненты являются выпусками самых последних стабильных версий.

- 2.7.1 Apache Ambari
- Apache Hadoop 3.1.1
- Apache HBase 2.0.0
- Apache Hive 3.1.0
- Apache Kafka 1.1.1, 2.1.0
- Apache Mahout 0.9.0+
- Apache Oozie 4.2.0
- Apache Phoenix 4.7.0
- Apache Pig 0.16.0
- Apache Ranger 0.7.0
- Apache Slider 0.92.0
- Apache Spark 2.3.1, 2.4.0
- 1.4.7 Apache Sqoop
- 0.9.1 Apache TEZ
- 0.8.0 Apache Zeppelin
- Apache ZooKeeper 3.4.6

Более поздние версии компонентов Apache иногда объединяются в дистрибутив HDP в дополнение к приведенным выше версиям. В этом случае эти более поздние версии перечислены в таблице Technical Preview и не должны заменять версии компонентов Apache, приведенные в списке выше, в рабочей среде.

### <a name="apache-patch-information"></a>Сведения об исправлениях Apache

Дополнительные сведения об исправлениях, доступных в HDInsight 4,0, см. в списке исправлений для каждого продукта в таблице ниже.

| Название продукта | Сведения об исправлении |
|---|---|
| Ambari | [Сведения об исправлении Ambari](https://docs.hortonworks.com/HDPDocuments/Ambari-2.7.1.0/bk_ambari-release-notes/content/ambari_relnotes-2.7.1.0-patch-information.html) |
| Hadoop | [Сведения об исправлении Hadoop](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_hadoop.html) |
| HBase | [Сведения об исправлении HBase](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_hbase.html) |
| Hive  | Этот выпуск предоставляет Hive 3.1.0 без дополнительных исправлений Apache.  |
| Kafka | Этот выпуск предоставляет Kafka 1.1.1 без дополнительных исправлений Apache. |
| Oozie, | [Сведения об исправлении Oozie](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_oozie.html) |
| Phoenix | [Сведения об исправлении Phoenix](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_phoenix.html) |
| Pig, | [Сведения об исправлении Pig](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_pig.html) |
| Ranger | [Сведения об исправлении Ranger](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_ranger.html) |
| Spark | [Сведения об исправлении Spark](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_spark.html) |
| Sqoop | Этот выпуск предоставляет Sqoop 1.4.7 без дополнительных исправлений Apache. |
| Tez | Этот выпуск предоставляет Tez 0.9.1 без дополнительных исправлений Apache. |
| Zeppelin | Этот выпуск предоставляет Zeppelin 0.8.0 без дополнительных исправлений Apache. |
| Zookeeper | [Сведения об исправлении Zookeeper](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/patch_zookeeper.html) |

### <a name="fixed-common-vulnerabilities-and-exposures"></a>Исправлены проблемы, связанные с распространенными уязвимостями и рисками

Дополнительные сведения о проблемах безопасности, устраняемых в этом выпуске, см. в разделе Hortonworks " [Устранение распространенных уязвимостей и раскрытия для HDP 3.0.1](https://docs.hortonworks.com/HDPDocuments/HDP3/HDP-3.0.1/release-notes/content/cve.html).

### <a name="known-issues"></a>Известные проблемы

#### <a name="replication-is-broken-for-secure-hbase-with-default-installation"></a>Репликация не работает для защиты HBase с установкой по умолчанию

Для HDInsight 4,0 выполните следующие действия.

1. Включить обмен данными между кластерами.
1. Войдите в Active головного узла.
1. Скачайте скрипт для включения репликации с помощью следующей команды:

    ```
    sudo wget https://raw.githubusercontent.com/Azure/hbase-utils/master/replication/hdi_enable_replication.sh
    ```
1. Введите команду `sudo kinit <domainuser>`.
1. Введите следующую команду, чтобы выполнить скрипт:

    ```
    sudo bash hdi_enable_replication.sh -m <hn0> -s <srclusterdns> -d <dstclusterdns> -sp <srcclusterpasswd> -dp <dstclusterpasswd> -copydata
    ```
Для HDInsight 3,6 выполните следующие действия.

1. Войдите в Active HMaster ZK.
1. Скачайте скрипт для включения репликации с помощью следующей команды:
    ```
    sudo wget https://raw.githubusercontent.com/Azure/hbase-utils/master/replication/hdi_enable_replication.sh
    ```
1. Введите команду `sudo kinit -k -t /etc/security/keytabs/hbase.service.keytab hbase/<FQDN>@<DOMAIN>`.
1. Введите следующую команду:

    ```bash
    sudo bash hdi_enable_replication.sh -s <srclusterdns> -d <dstclusterdns> -sp <srcclusterpasswd> -dp <dstclusterpasswd> -copydata
    ```

#### <a name="phoenix-sqlline-stops-working-after-migrating-hbase-cluster-to-hdinsight-40"></a>Sqlline Phoenix перестает работать после переноса кластера HBase в HDInsight 4,0

Выполните следующие шаги:

1. Удалите следующие таблицы Phoenix:
    1. `SYSTEM.FUNCTION`
    1. `SYSTEM.SEQUENCE`
    1. `SYSTEM.STATS`
    1. `SYSTEM.MUTEX`
    1. `SYSTEM.CATALOG`
1. Если не удается удалить ни одну из таблиц, перезапустите HBase, чтобы очистить все соединения с таблицами.
1. Еще раз запустите `sqlline.py`. Phoenix повторно создаст все таблицы, которые были удалены на шаге 1.
1. Повторное создание таблиц и представлений Phoenix для данных HBase.

#### <a name="phoenix-sqlline-stops-working-after-replicating-hbase-phoenix-metadata-from-hdinsight-36-to-40"></a>Sqlline Phoenix прекращает работу после репликации метаданных HBase Phoenix из HDInsight 3,6 в 4,0

Выполните следующие шаги:

1. Перед выполнением репликации перейдите в целевой кластер 4,0 и выполните `sqlline.py` . Эта команда создаст таблицы Phoenix, такие как `SYSTEM.MUTEX` и `SYSTEM.LOG` , которые существуют только в 4,0.
1. Удалите следующие таблицы:
    1. `SYSTEM.FUNCTION`
    1. `SYSTEM.SEQUENCE`
    1. `SYSTEM.STATS`
    1. `SYSTEM.CATALOG`
1. Запуск репликации HBase

### <a name="deprecation"></a>Устаревшее

Службы Apache Storm и ML недоступны в HDInsight 4,0.

## <a name="release-date-04142019"></a>Дата выпуска: 04/14/2019

### <a name="new-features"></a>новые функции;

Новые обновления и возможности относятся к следующим категориям.

*  ***Обновление Hadoop и других проектов с открытым исходным кодом** _ — в дополнение к исправлениям 1000 + ошибок в 20 проектах с открытым кодом это обновление содержит новую версию _ *Spark (2,3)** и **Kafka (1,0)**.

    а.  [**Новые функции в Apache Spark 2.3**](https://spark.apache.org/releases/spark-release-2-3-0.html)

    b.  [**Новые функции в Apache Kafka 1.0**](https://kafka.apache.org/downloads#1.0.0)

*  ***Обновление R Server 9,1 до Службы машинного обучения 9,3** _ — в этом выпуске мы предоставляем специалистов по обработке и анализу данных с наилучшим набором улучшений с открытым кодом с помощью алгоритмов и простоты в эксплуатации, которые доступны на предпочтительном языке с скоростью Apache Spark. Этот выпуск расширяет возможности, предлагаемые R Server, реализуя поддержку Python. Из-за этого имя кластера изменено с R Server на Службы машинного обучения. 

_ ***Поддержка Azure Data Lake Storage 2-го поколения** _ — HDInsight будет поддерживать предварительный выпуск Azure Data Lake Storage 2-го поколения. Во всех регионах доступности клиентам будет предоставлена возможность выбрать учетную запись ADSL поколения 2, как основное или дополнительное хранилище для кластеров HDInsight.

_ ***HDInsight корпоративный пакет безопасности обновления (Предварительная версия)** _ – (Предварительная версия) [конечные точки службы виртуальной сети](../virtual-network/virtual-network-service-endpoints-overview.md) поддерживают хранилище BLOB-объектов Azure, ADLS 1-го поколения, Cosmos DB и Azure DB.

### <a name="component-versions"></a>Версии компонентов

Официальные версии Apache всех компонентов HDInsight 3.6 перечислены ниже. Все компоненты, перечисленные здесь, являются официальными выпусками Apache самых последних из доступных стабильных версий.

-   Apache Hadoop 2.7.3

-   Apache HBase 1.1.2

-   Apache Hive 1.2.1

-   Apache Hive 2.1.0

-   Apache Kafka 1.0.0

-   Apache Mahout 0.9.0+

-   Apache Oozie 4.2.0

-   Apache Phoenix 4.7.0

-   Apache Pig 0.16.0

-   Apache Ranger 0.7.0

-   Apache Slider 0.92.0

-   Apache Spark 2.2.0/2.3.0

-   Apache Sqoop 1.4.6

-   Apache Storm 1.1.0

-   Apache TEZ 0.7.0

-   Apache Zeppelin 0.7.3

-   Apache ZooKeeper 3.4.6

В дополнение к версиям, перечисленным выше, более поздние версии нескольких компонентов Apache иногда включаются в пакет в платформе HDP. В этом случае эти более поздние версии перечислены в таблице Technical Preview и не должны заменять версии компонентов Apache, приведенные в списке выше, в рабочей среде.

### <a name="apache-patch-information"></a>Сведения об исправлениях Apache

#### <a name="hadoop"></a>Hadoop

В этом выпуске содержится Hadoop Common 2.7.3 и следующие исправления Apache.

-   [HADOOP-13190](https://issues.apache.org/jira/browse/HADOOP-13190): укажите поставщик LoadBalancingKMSClientProvider в документации высокой доступности сервера управления ключами.

-   [HADOOP-13227](https://issues.apache.org/jira/browse/HADOOP-13227): обработчик AsyncCallHandler должен использовать архитектуру, управляемую событиями, для обработки асинхронных вызовов.

-   [HADOOP-14104](https://issues.apache.org/jira/browse/HADOOP-14104): клиент должен всегда запрашивать узел с именем для пути поставщика сервера управления ключами.

-   [HADOOP-14799](https://issues.apache.org/jira/browse/HADOOP-14799): обновите nimbus-jose-jwt до версии 4.41.1.

-   [HADOOP-14814](https://issues.apache.org/jira/browse/HADOOP-14814): исправьте изменение в несовместимом API в FsServerDefaults на HADOOP-14104.

-   [HADOOP-14903](https://issues.apache.org/jira/browse/HADOOP-14903): добавьте явным образом json-smart в файл pom.xml.

-   [HADOOP-15042](https://issues.apache.org/jira/browse/HADOOP-15042): Azure PageBlobInputStream.skip() может возвращать отрицательное значение, когда значение numberOfPagesRemaining равно 0.

-   [HADOOP-15255](https://issues.apache.org/jira/browse/HADOOP-15255): поддержка преобразования верхнего и нижнего регистров для имен групп в LdapGroupsMapping.

-   [HADOOP-15265](https://issues.apache.org/jira/browse/HADOOP-15265): исключите явным образом json-smart из файла pom.xml hadoop-auth.

-   [HDFS-7922](https://issues.apache.org/jira/browse/HDFS-7922): шортЦиркуиткаче \# Close не освобождает счедуледсреадпулексекуторс.

-   [HDFS-8496](https://issues.apache.org/jira/browse/HDFS-8496): вызов функции stopWriter() с удерживаемой блокировкой FSDatasetImpl может блокировать другие потоки (cmccabe).

-   [HDFS-10267](https://issues.apache.org/jira/browse/HDFS-10267): дополнительно синхронизированный в FsDatasetImpl\#recoverAppend и FsDatasetImpl\#recoverClose.

-   [HDFS-10489](https://issues.apache.org/jira/browse/HDFS-10489): объявите устаревшим URI dfs.encryption.key.provider.uri для зон шифрования HDFS.

-   [HDFS-11384](https://issues.apache.org/jira/browse/HDFS-11384): добавьте параметр для балансировщика для разгона вызовов getBlocks, чтобы избежать всплеска rpc.CallQueueLength узла NameNode.

-   [HDFS-11689](https://issues.apache.org/jira/browse/HDFS-11689): новое исключение, созданное шифрованием DFSClient%isHDFSEncryptionEnabled, прервало небезопасный код Hive.

-   [HDFS-11711](https://issues.apache.org/jira/browse/HDFS-11711): имя DN не должно удалять блокировку в исключении "Слишком много открытых файлов".

-   [HDFS-12347](https://issues.apache.org/jira/browse/HDFS-12347): задержка TestBalancerRPCDelay\#testBalancerRPCDelay очень часто завершается сбоем.

-   [HDFS-12781](https://issues.apache.org/jira/browse/HDFS-12781): после отключения узла данных на вкладке узла данных пользовательского интерфейса узла имени появится предупреждающее сообщение.

-   [HDFS-13054](https://issues.apache.org/jira/browse/HDFS-13054): обработка исключения PathIsNotEmptyDirectoryException в вызове удаления DFSClient.

-   [HDFS-13120](https://issues.apache.org/jira/browse/HDFS-13120): инструмент сравнения моментального снимка мог быть поврежден после объединения.

-   [YARN-3742](https://issues.apache.org/jira/browse/YARN-3742): работа YARN RM будет завершена при истечении времени создания клиента ZKClient.

-   [YARN-6061](https://issues.apache.org/jira/browse/YARN-6061): добавьте обработчик UncaughtExceptionHandler для критических потоков в RM.

-   [YARN-7558](https://issues.apache.org/jira/browse/YARN-7558): не удалось выполнить команду журналов Yarn, чтобы получить журналы для запуска контейнеров при включенной проверке подлинности пользовательского интерфейса.

-   [YARN-7697](https://issues.apache.org/jira/browse/YARN-7697): извлечение журналов для готового приложения завершается сбоем, даже если выполнена агрегация журнала.

В HDP версии 2.6.4 содержится Hadoop Common 2.7.3 и следующие исправления Apache.

-   [HADOOP-13700](https://issues.apache.org/jira/browse/HADOOP-13700): удалите неиспользуемое исключение IOException из подписей TrashPolicy\#initialize и \#getInstance.

-   [HADOOP-13709](https://issues.apache.org/jira/browse/HADOOP-13709): возможность очистить подпроцессы, порожденные Shell, при наличии процесса.

-   [HADOOP-14059](https://issues.apache.org/jira/browse/HADOOP-14059): опечатка в сообщении об ошибке s3a rename(self, subdir).

-   [HADOOP-14542](https://issues.apache.org/jira/browse/HADOOP-14542): добавьте средство ведения журнала IOUtils.cleanupWithLogger, которое принимает API средства ведения журнала slf4j.

-   [HDFS-9887](https://issues.apache.org/jira/browse/HDFS-9887): время ожидания сокета WebHDFS должно быть настраиваемое.

-   [HDFS-9914](https://issues.apache.org/jira/browse/HDFS-9914): исправьте настраиваемое время ожидания на чтение и подключение WebHDFS.

-   [MAPREDUCE-6698](https://issues.apache.org/jira/browse/MAPREDUCE-6698): увеличьте время ожидания в TestUnnecessaryBlockingOnHist oryFileInfo.testTwoThreadsQueryingDifferentJobOfSameUser.

-   [YARN-4550](https://issues.apache.org/jira/browse/YARN-4550): некоторые проверки в TestContainerLanch не удается выполнить в среде языкового стандарта, отличного от английского.

-   [YARN-4717](https://issues.apache.org/jira/browse/YARN-4717): работа каталога TestResourceLocalizationService.testPublicResourceInitializesLocalDir периодически прерывается из-за исключения IllegalArgumentException в процессе очистки.

-   [YARN-5042](https://issues.apache.org/jira/browse/YARN-5042): подключите группу /sys/fs/cgroup к контейнерам Docker, выбрав подключение только для чтения.

-   [YARN-5318](https://issues.apache.org/jira/browse/YARN-5318): исправьте проблему с прерывающейся проверкой поставщика TestRMAdminService\#te stRefreshNodesResourceWithFileSystemBasedConfigurationProvider.

-   [YARN-5641](https://issues.apache.org/jira/browse/YARN-5641): средство локализации остается за пределами архивов в формате TAR после завершения создания контейнера.

-   [YARN-6004](https://issues.apache.org/jira/browse/YARN-6004): выполните рефакторинг контейнера TestResourceLocalizationService\#testDownloadingResourcesOnContainer, чтобы он составлял менее 150 строк.

-   [YARN-6078](https://issues.apache.org/jira/browse/YARN-6078): контейнеры зависли в состоянии локализации.

-   [YARN-6805](https://issues.apache.org/jira/browse/YARN-6805): NPE в исполнителе LinuxContainerExecutor из-за кода завершения исключения PrivilegedOperationException со значением NULL.

#### <a name="hbase"></a>HBase

В этом выпуске содержится HBase 1.1.2 и следующие исправления Apache.

-   [HBASE-13376](https://issues.apache.org/jira/browse/HBASE-13376): улучшения стохастической подсистемы балансировки нагрузки.

-   [HBASE-13716](https://issues.apache.org/jira/browse/HBASE-13716): прекратите использовать константы FSConstants Hadoop.

-   [HBASE-13848](https://issues.apache.org/jira/browse/HBASE-13848): получите доступ к паролям SSL InfoServer с помощью API поставщика учетных данных.

-   [HBASE-13947](https://issues.apache.org/jira/browse/HBASE-13947): используйте службы MasterServices вместо сервера в AssignmentManager.

-   [HBASE-14135](https://issues.apache.org/jira/browse/HBASE-14135): этап 3 резервного копирования и восстановления HBase — объедините образы резервных копий.

-   [HBASE-14473](https://issues.apache.org/jira/browse/HBASE-14473): вычислите местоположение региона в параллельном режиме.

-   [HBASE-14517](https://issues.apache.org/jira/browse/HBASE-14517): покажите версию сервера региона на главной странице состояния.

-   [HBASE-14606](https://issues.apache.org/jira/browse/HBASE-14606): в Apache истекло время ожидания проверок TestSecureLoadIncrementalHFiles в сборке магистралей.

-   [HBASE-15210](https://issues.apache.org/jira/browse/HBASE-15210): отмените интенсивное ведение журналов для десятков строк за миллисекунду в подсистеме балансировки нагрузки.

-   [HBASE-15515](https://issues.apache.org/jira/browse/HBASE-15515): оптимизируйте в балансировщике LocalityBasedCandidateGenerator.

-   [HBASE-15615](https://issues.apache.org/jira/browse/HBASE-15615): неправильное время перехода в спящий режим при необходимости повторной попытки RegionServerCallable.

-   [HBASE-16135](https://issues.apache.org/jira/browse/HBASE-16135): узел PeerClusterZnode в RS удаленного кэширующего узла никогда не удаляется.

-   [HBASE-16570](https://issues.apache.org/jira/browse/HBASE-16570): при запуске вычислите местоположение региона в параллельном режиме.

-   [HBASE-16810](https://issues.apache.org/jira/browse/HBASE-16810): балансировщик HBase вызывает исключение ArrayIndexOutOfBoundsException, когда серверы региона находятся на узле /hbase/draining и выгружаются.

-   [HBASE-16852](https://issues.apache.org/jira/browse/HBASE-16852): сбой TestDefaultCompactSelection в ветви branch-1.3.

-   [HBASE-17387](https://issues.apache.org/jira/browse/HBASE-17387): уменьшите нагрузку, указанную в отчете об исключении в RegionActionResult для multi().

-   [HBASE-17850](https://issues.apache.org/jira/browse/HBASE-17850): служебная программа восстановления резервной копии.

-   [HBASE-17931](https://issues.apache.org/jira/browse/HBASE-17931): назначьте системные таблицы серверам с самой последней версией.

-   [HBASE-18083](https://issues.apache.org/jira/browse/HBASE-18083): обеспечьте возможность настройки числа потоков очистки файлов небольших и больших размеров в HFileCleaner.

-   [HBASE-18084](https://issues.apache.org/jira/browse/HBASE-18084): оптимизируйте CleanerChore для очистки каталога, который потребляет больше дискового пространства.

-   [HBASE-18164](https://issues.apache.org/jira/browse/HBASE-18164): более быстрая функция стоимости местоположения и генератор-кандидат.

-   [HBASE-18212](https://issues.apache.org/jira/browse/HBASE-18212): предупреждающее сообщение в автономном режиме с журналами HBase в локальной файловой системе: "Failed to invoke 'unbuffer' method in class class org.apache.hadoop.fs.FSDataInputStream" (Не удалось вызвать метод очистки буфера в классе org.apache.hadoop.fs.FSDataInputStream).

-   [HBASE-18808](https://issues.apache.org/jira/browse/HBASE-18808): неэффективная проверка конфигурации в BackupLogCleaner\#getDeletableFiles().

-   [HBASE-19052](https://issues.apache.org/jira/browse/HBASE-19052): FixedFileTrailer должен распознавать класс CellComparatorImpl в ветви branch-1.x.

-   [HBASE-19065](https://issues.apache.org/jira/browse/HBASE-19065): метод HRegion\#bulkLoadHFiles() должен ожидать завершения параллельного метода Region\#flush().

-   [HBASE-19285](https://issues.apache.org/jira/browse/HBASE-19285): добавьте гистограммы задержки для каждой таблицы.

-   [HBASE-19393](https://issues.apache.org/jira/browse/HBASE-19393): ошибка HTTP 413 FULL head (переполнение заголовка) во время доступа к пользовательскому интерфейсу HBase с помощью SSL.

-   [HBASE-19395](https://issues.apache.org/jira/browse/HBASE-19395): \[ branch-1 \] тестендтоендсплиттрансактион. ТЕСТМАСТЕРОПСВХИЛЕСПЛИТТИНГ завершает работу с нпе.

-   [HBASE-19421](https://issues.apache.org/jira/browse/HBASE-19421): ветвь branch-1 не компилируется с Hadoop версии 3.0.0.

-   [HBASE-19934](https://issues.apache.org/jira/browse/HBASE-19934): исключение HBaseSnapshotException, если включены реплики чтения и при выполнении интерактивного моментального снимка после разделения региона.

-   [HBASE-20008](https://issues.apache.org/jira/browse/HBASE-20008): \[ нуллпоинтерексцептион порта \] при восстановлении моментального снимка после разделения региона.

#### <a name="hive"></a>Hive

В этом выпуске содержатся Hive 1.2.1 и Hive 2.1.0, а также следующие исправления.

_ *Пакеты исправлений для Hive 1.2.1:**

-   [*HIVE-10697*](https://issues.apache.org/jira/browse/HIVE-10697): ObjectInspectorConvertors\#UnionConvertor выполняет ошибочное преобразование.

-   [*HIVE-11266*](https://issues.apache.org/jira/browse/HIVE-11266): неправильный результат count(\*), основанный на статистике таблицы для внешних таблиц.

-   [*HIVE-12245*](https://issues.apache.org/jira/browse/HIVE-12245): включите поддержку комментариев в столбце для архивной таблицы HBase.

-   [*HIVE-12315*](https://issues.apache.org/jira/browse/HIVE-12315): исправьте деление на ноль двойного значения в векторной форме.

-   [*HIVE-12360*](https://issues.apache.org/jira/browse/HIVE-12360): некорректный поиск в ORC без сжатия с включением предиката.

-   [*HIVE-12378*](https://issues.apache.org/jira/browse/HIVE-12378): исключение в бинарном поле HBaseSerDe.serialize.

-   [*HIVE-12785*](https://issues.apache.org/jira/browse/HIVE-12785): просмотр структуры с помощью типа объединения и определяемой пользователем функции не работает.

-   [*HIVE-14013*](https://issues.apache.org/jira/browse/HIVE-14013): в таблице с описанием неправильно отображается Юникод.

-   [*HIVE-14205*](https://issues.apache.org/jira/browse/HIVE-14205): Hive не поддерживает тип объединения с файлом формата AVRO.

-   [*HIVE-14421*](https://issues.apache.org/jira/browse/HIVE-14421): FS.deleteOnExit содержит ссылки на файлы \_tmp\_space.db.

-   [*HIVE-15563*](https://issues.apache.org/jira/browse/HIVE-15563): проигнорируйте исключение перехода состояния недопустимой операции в запросе SQLOperation.runQuery, чтобы предоставить реальное исключение.

-   [*HIVE-15680*](https://issues.apache.org/jira/browse/HIVE-15680): неправильные результаты в режиме MR, когда hive.optimize.index.filter=true и в запросе дважды содержится ссылка на одну таблицу ORC.

-   [*HIVE-15883*](https://issues.apache.org/jira/browse/HIVE-15883): сопоставленная таблица HBase в Hive INSERT не подходит для десятичного числа.

-   [*HIVE-16232*](https://issues.apache.org/jira/browse/HIVE-16232): включите поддержку вычисления статистики для столбцов в идентификаторе QuotedIdentifier.

-   [*HIVE-16828*](https://issues.apache.org/jira/browse/HIVE-16828): с включенной оптимизацией с учетом затрат запрос в секционированных представлениях вызывает исключение IndexOutOfBoundException.

-   [*HIVE-17013*](https://issues.apache.org/jira/browse/HIVE-17013): удалите запрос с вложенным запросом на основе выбора над представлением.

-   [*Hive-17063*](https://issues.apache.org/jira/browse/HIVE-17063): Вставка секции перезазаписи во внешнюю таблицу завершается ошибкой, если сначала удалить секцию.

-   [*HIVE-17259*](https://issues.apache.org/jira/browse/HIVE-17259): Hive JDBC не распознает столбцы UNIONTYPE.

-   [*HIVE-17419*](https://issues.apache.org/jira/browse/HIVE-17419): при выполнении команды ANALYZE TABLE...COMPUTE STATISTICS FOR COLUMNS отображается вычисленная статистика для маскированных таблиц.

-   [*HIVE-17530*](https://issues.apache.org/jira/browse/HIVE-17530): исключение ClassCastException при преобразовании типа объединения.

-   [*HIVE-17621*](https://issues.apache.org/jira/browse/HIVE-17621): параметры Hive-site игнорируются во время вычисления разделения HCatInputFormat.

-   [*HIVE-17636*](https://issues.apache.org/jira/browse/HIVE-17636): добавьте проверку multiple\_agg.q для хранилищ BLOB-объектов.

-   [*HIVE-17729*](https://issues.apache.org/jira/browse/HIVE-17729): добавьте базу данных и объясните связанные проверки в хранилище BLOB-объектов.

-   [*HIVE-17731*](https://issues.apache.org/jira/browse/HIVE-17731): добавьте параметр обратной совместимости для внешних пользователей в HIVE-11985.

-   [*HIVE-17803*](https://issues.apache.org/jira/browse/HIVE-17803): при использовании множественного запроса Pig записи 2-х HCatStorers в одну таблицу будут удалять выходные данные друг друга.

-   [*HIVE-17829*](https://issues.apache.org/jira/browse/HIVE-17829): исключение ArrayIndexOutOfBoundsException — архивные таблицы HBASE со схемой Avro в Hive2.

-   [*HIVE-17845*](https://issues.apache.org/jira/browse/HIVE-17845): вставка завершается сбоем, если для столбцов целевой таблицы используется верхний регистр.

-   [*Hive-17900*](https://issues.apache.org/jira/browse/HIVE-17900): анализ статистики по столбцам, активируемым средством сжатия, приводит к созданию неправильно сформированного SQL с &gt; 1 столбцом секционирования.

-   [*HIVE-18026*](https://issues.apache.org/jira/browse/HIVE-18026): оптимизация основной конфигурации Hive WebHCat.

-   [*HIVE-18031*](https://issues.apache.org/jira/browse/HIVE-18031): включите поддержку репликации для операции изменения базы данных.

-   [*HIVE-18090*](https://issues.apache.org/jira/browse/HIVE-18090): сбой пульса ACID при подключении хранилища метаданных через учетные данные Hadoop.

-   [*HIVE-18189*](https://issues.apache.org/jira/browse/HIVE-18189): запрос Hive возвращает неправильные результаты, если для псевдонима hive.groupby.orderby.position.alias установлено значение true.

-   [*HIVE-18258*](https://issues.apache.org/jira/browse/HIVE-18258): векторизация — Reduce-Side GROUP BY MERGEPARTIAL с двойными столбцами неработоспособна.

-   [*HIVE-18293*](https://issues.apache.org/jira/browse/HIVE-18293): Hive не может сжимать таблицы, содержащиеся в папке, которая не принадлежит идентификатору, обеспечивающему работу хранилища HiveMetaStore.

-   [*HIVE-18327*](https://issues.apache.org/jira/browse/HIVE-18327): удалите ненужную зависимость HiveConf для MiniHiveKdc.

-   [*HIVE-18341*](https://issues.apache.org/jira/browse/HIVE-18341): добавьте поддержку загрузки REPL для добавления необработанного пространства имени для TDE с одинаковыми ключами шифрования.

-   [*HIVE-18352*](https://issues.apache.org/jira/browse/HIVE-18352): введите параметр METADATAONLY при выполнении REPL DUMP, чтобы разрешить процессы интеграции других инструментов.

-   [*HIVE-18353*](https://issues.apache.org/jira/browse/HIVE-18353): CompactorMR должен вызвать метод jobclient.close() для активации очистки (Джозеф Прабху (Prabhu Joseph) через Зеджас Наир (Thejas Nair)).

-   [*HIVE-18390*](https://issues.apache.org/jira/browse/HIVE-18390): исключение IndexOutOfBoundsException при запросе секционированного представления в ColumnPruner.

-   [*HIVE-18429*](https://issues.apache.org/jira/browse/HIVE-18429): сжатие должно обработать случай при отсутствии выходных данных.

-   [*HIVE-18447*](https://issues.apache.org/jira/browse/HIVE-18447): JDBC — предоставьте пользователям JDBC возможность передавать сведения о файлах cookie через строку подключения.

-   [*HIVE-18460*](https://issues.apache.org/jira/browse/HIVE-18460): уплотнитель не передает свойства таблицы средству записи ORC.

-   [*HIVE-18467*](https://issues.apache.org/jira/browse/HIVE-18467): поддержка целого дампа хранилища и загрузки, а также создание и удаление событий в базе данных (Анишек Агарвал (Anishek Agarwal), редакция Санкар Харипапан (Sankar Hariappan)).

-   [*HIVE-18551*](https://issues.apache.org/jira/browse/HIVE-18551): векторизация — VectorMapOperator пытается написать слишком много векторных столбцов для Hybrid Grace.

-   [*HIVE-18587*](https://issues.apache.org/jira/browse/HIVE-18587): вставка события DML может привести к попытке вычислить контрольную сумму в каталогах.

-   [*HIVE-18613*](https://issues.apache.org/jira/browse/HIVE-18613): продлите JsonSerDe для поддержки типа BINARY.

-   [*HIVE-18626*](https://issues.apache.org/jira/browse/HIVE-18626): предложение with загрузки REPL не передает конфигурацию задачам.

-   [*HIVE-18660*](https://issues.apache.org/jira/browse/HIVE-18660): реестр конфигурации платформы не различает разделы и виртуальные столбцы.

-   [*HIVE-18754*](https://issues.apache.org/jira/browse/HIVE-18754): состояние REPL должно поддерживать предложение with.

-   [*HIVE-18754*](https://issues.apache.org/jira/browse/HIVE-18754): состояние REPL должно поддерживать предложение with.

-   [*HIVE-18788*](https://issues.apache.org/jira/browse/HIVE-18788): очистите входные данные в инструкции PreparedStatement в JDBC.

-   [*HIVE-18794*](https://issues.apache.org/jira/browse/HIVE-18794): предложение with загрузки REPL не передает конфигурацию задачам для таблиц вне раздела.

-   [*HIVE-18808*](https://issues.apache.org/jira/browse/HIVE-18808): обеспечьте более надежное сжатие при сбое обновления статистических данных.

-   [*HIVE-18817*](https://issues.apache.org/jira/browse/HIVE-18817): исключение ArrayIndexOutOfBounds во время чтения таблицы ACID.

-   [*HIVE-18833*](https://issues.apache.org/jira/browse/HIVE-18833): сбой автоматического объединения при выполнении вставки в каталог, как вставки ORC-файла.

-   [*HIVE-18879*](https://issues.apache.org/jira/browse/HIVE-18879): запретите работу внедренного элемента в UDFXPathUtil при наличии в пути класса файла xercesImpl.jar.

-   [*HIVE-18907*](https://issues.apache.org/jira/browse/HIVE-18907): создайте утилиту, чтобы исправить проблему индекса ключа ACID в HIVE-18817.

**Исправления Apache Hive 2.1.0:**

-   [*HIVE-14013*](https://issues.apache.org/jira/browse/HIVE-14013): в таблице с описанием неправильно отображается Юникод.

-   [*HIVE-14205*](https://issues.apache.org/jira/browse/HIVE-14205): Hive не поддерживает тип объединения с файлом формата AVRO.

-   [*HIVE-15563*](https://issues.apache.org/jira/browse/HIVE-15563): проигнорируйте исключение перехода состояния недопустимой операции в запросе SQLOperation.runQuery, чтобы предоставить реальное исключение.

-   [*HIVE-15680*](https://issues.apache.org/jira/browse/HIVE-15680): неправильные результаты в режиме MR, когда hive.optimize.index.filter=true и в запросе дважды содержится ссылка на одну таблицу ORC.

-   [*HIVE-15883*](https://issues.apache.org/jira/browse/HIVE-15883): сопоставленная таблица HBase в Hive INSERT не подходит для десятичного числа.

-   [*HIVE-16757*](https://issues.apache.org/jira/browse/HIVE-16757): удалите вызовы нерекомендуемых строк AbstractRelNode.getRows.

-   [*HIVE-16828*](https://issues.apache.org/jira/browse/HIVE-16828): с включенной оптимизацией с учетом затрат запрос в секционированных представлениях вызывает исключение IndexOutOfBoundException.

-   [*Hive-17063*](https://issues.apache.org/jira/browse/HIVE-17063): Вставка секции перезазаписи во внешнюю таблицу завершается ошибкой, если сначала удалить секцию.

-   [*HIVE-17259*](https://issues.apache.org/jira/browse/HIVE-17259): Hive JDBC не распознает столбцы UNIONTYPE.

-   [*HIVE-17530*](https://issues.apache.org/jira/browse/HIVE-17530): исключение ClassCastException при преобразовании типа объединения.

-   [*HIVE-17600*](https://issues.apache.org/jira/browse/HIVE-17600): обеспечьте пользователям возможность настроить размер enforceBufferSize ORC-файла.

-   [*HIVE-17601*](https://issues.apache.org/jira/browse/HIVE-17601): оптимизируйте обработку ошибок в LlapServiceDriver.

-   [*HIVE-17613*](https://issues.apache.org/jira/browse/HIVE-17613): удалите пулы объекта для коротких распределений с одним потоком.

-   [*HIVE-17617*](https://issues.apache.org/jira/browse/HIVE-17617): свертывание пустого экземпляра ResultSet должно включать группирование пустого набора.

-   [*HIVE-17621*](https://issues.apache.org/jira/browse/HIVE-17621): параметры Hive-site игнорируются во время вычисления разделения HCatInputFormat.

-   [*Hive-17629*](https://issues.apache.org/jira/browse/HIVE-17629): Качедсторе: иметь утвержденную или неутвержденную конфигурацию, чтобы разрешить выборочное Кэширование таблиц и секций и разрешить чтение во время предварительной подготовки.

-   [*HIVE-17636*](https://issues.apache.org/jira/browse/HIVE-17636): добавьте проверку multiple\_agg.q для хранилищ BLOB-объектов.

-   [*HIVE-17702*](https://issues.apache.org/jira/browse/HIVE-17702): неправильная обработка isRepeating в средстве чтения десятичных чисел в ORC.

-   [*HIVE-17729*](https://issues.apache.org/jira/browse/HIVE-17729): добавьте базу данных и объясните связанные проверки в хранилище BLOB-объектов.

-   [*HIVE-17731*](https://issues.apache.org/jira/browse/HIVE-17731): добавьте параметр обратной совместимости для внешних пользователей в HIVE-11985.

-   [*HIVE-17803*](https://issues.apache.org/jira/browse/HIVE-17803): при использовании множественного запроса Pig записи 2-х HCatStorers в одну таблицу будут удалять выходные данные друг друга.

-   [*HIVE-17845*](https://issues.apache.org/jira/browse/HIVE-17845): вставка завершается сбоем, если для столбцов целевой таблицы используется верхний регистр.

-   [*Hive-17900*](https://issues.apache.org/jira/browse/HIVE-17900): анализ статистики по столбцам, активируемым средством сжатия, приводит к созданию неправильно сформированного SQL с &gt; 1 столбцом секционирования.

-   [*HIVE-18006*](https://issues.apache.org/jira/browse/HIVE-18006): оптимизируйте объем памяти HLLDenseRegister.

-   [*HIVE-18026*](https://issues.apache.org/jira/browse/HIVE-18026): оптимизация основной конфигурации Hive WebHCat.

-   [*HIVE-18031*](https://issues.apache.org/jira/browse/HIVE-18031): включите поддержку репликации для операции изменения базы данных.

-   [*HIVE-18090*](https://issues.apache.org/jira/browse/HIVE-18090): сбой пульса ACID при подключении хранилища метаданных через учетные данные Hadoop.

-   [*HIVE-18189*](https://issues.apache.org/jira/browse/HIVE-18189): упорядочение по позиции не выполняется при отключенной оптимизации с учетом затрат.

-   [*HIVE-18258*](https://issues.apache.org/jira/browse/HIVE-18258): векторизация — Reduce-Side GROUP BY MERGEPARTIAL с двойными столбцами неработоспособна.

-   [*HIVE-18269*](https://issues.apache.org/jira/browse/HIVE-18269): LLAP — быстрые операции ввода-вывода LLAP с медленным конвейером обработки могут привести к нехватке памяти (OOM).

-   [*HIVE-18293*](https://issues.apache.org/jira/browse/HIVE-18293): Hive не может сжимать таблицы, содержащиеся в папке, которая не принадлежит идентификатору, обеспечивающему работу хранилища HiveMetaStore.

-   [*HIVE-18318*](https://issues.apache.org/jira/browse/HIVE-18318): устройство чтения записей LLAP должно проверять события прерывания, даже если оно не блокируется.

-   [*HIVE-18326*](https://issues.apache.org/jira/browse/HIVE-18326): планировщик LLAP Tez только для преждевременного использования заданий при наличии между ними зависимости.

-   [*HIVE-18327*](https://issues.apache.org/jira/browse/HIVE-18327): удалите ненужную зависимость HiveConf для MiniHiveKdc.

-   [*HIVE-18331*](https://issues.apache.org/jira/browse/HIVE-18331): добавьте повторное имя для входа при истечении срока действия билета TGT и ведение журналов и лямбду.

-   [*HIVE-18341*](https://issues.apache.org/jira/browse/HIVE-18341): добавьте поддержку загрузки REPL для добавления необработанного пространства имени для TDE с одинаковыми ключами шифрования.

-   [*HIVE-18352*](https://issues.apache.org/jira/browse/HIVE-18352): введите параметр METADATAONLY при выполнении REPL DUMP, чтобы разрешить процессы интеграции других инструментов.

-   [*HIVE-18353*](https://issues.apache.org/jira/browse/HIVE-18353): CompactorMR должен вызвать метод jobclient.close() для активации очистки.

-   [*HIVE-18384*](https://issues.apache.org/jira/browse/HIVE-18384): исключение ConcurrentModificationException в библиотеке log4j2.x.

-   [*HIVE-18390*](https://issues.apache.org/jira/browse/HIVE-18390): исключение IndexOutOfBoundsException при запросе секционированного представления в ColumnPruner.

-   [*HIVE-18447*](https://issues.apache.org/jira/browse/HIVE-18447): JDBC — предоставьте пользователям JDBC возможность передавать сведения о файлах cookie через строку подключения.

-   [*HIVE-18460*](https://issues.apache.org/jira/browse/HIVE-18460): уплотнитель не передает свойства таблицы средству записи ORC.

-   [*HIVE-18462*](https://issues.apache.org/jira/browse/HIVE-18462): (объяснение форматирования для запросов с соединением сопоставления с columnExprMap, которое включает неформатированное имя столбца).

-   [*HIVE-18467*](https://issues.apache.org/jira/browse/HIVE-18467): поддержка целого дампа хранилища и загрузки, а также создание и удаление событий в базе данных.

-   [*HIVE-18488*](https://issues.apache.org/jira/browse/HIVE-18488): у средств чтения LLAP ORC отсутствуют некоторые проверки значений NULL.

-   [*HIVE-18490*](https://issues.apache.org/jira/browse/HIVE-18490): запрос с инструкциями EXISTS и NOT EXISTS с неэквивалентным предикатом может привести к неправильному результату.

-   [*HIVE-18506*](https://issues.apache.org/jira/browse/HIVE-18506): формат LlapBaseInputFormat — отрицательный индекс массива.

-   [*HIVE-18517*](https://issues.apache.org/jira/browse/HIVE-18517): векторизация — исправьте VectorMapOperator для приема VRB и проверьте правильное расположение векторизованного флага для поддержки кэширования LLAP.

-   [*HIVE-18523*](https://issues.apache.org/jira/browse/HIVE-18523): исправьте строку сводки в случае отсутствия входных данных.

-   [*HIVE-18528*](https://issues.apache.org/jira/browse/HIVE-18528): объединенные статистические данные в ObjectStore получили неправильный результат.

-   [*HIVE-18530*](https://issues.apache.org/jira/browse/HIVE-18530): репликация должна пропустить таблицу MM (на этом этапе).

-   [*HIVE-18548*](https://issues.apache.org/jira/browse/HIVE-18548): исправьте импорт log4j.

-   [*HIVE-18551*](https://issues.apache.org/jira/browse/HIVE-18551): векторизация — VectorMapOperator пытается написать слишком много векторных столбцов для Hybrid Grace.

-   [*HIVE-18577*](https://issues.apache.org/jira/browse/HIVE-18577): у SemanticAnalyzer.validate есть некоторые нецелесообразные вызовы хранилища метаданных.

-   [*HIVE-18587*](https://issues.apache.org/jira/browse/HIVE-18587): вставка события DML может привести к попытке вычислить контрольную сумму в каталогах.

-   [*HIVE-18597*](https://issues.apache.org/jira/browse/HIVE-18597): LLAP — всегда включайте в пакет JAR-файл API log4j2 для org.apache.log4j.

-   [*HIVE-18613*](https://issues.apache.org/jira/browse/HIVE-18613): продлите JsonSerDe для поддержки типа BINARY.

-   [*HIVE-18626*](https://issues.apache.org/jira/browse/HIVE-18626): предложение with загрузки REPL не передает конфигурацию задачам.

-   [*HIVE-18643*](https://issues.apache.org/jira/browse/HIVE-18643): не выполняйте проверку архивных разделов для операций ACID.

-   [*HIVE-18660*](https://issues.apache.org/jira/browse/HIVE-18660): реестр конфигурации платформы не различает разделы и виртуальные столбцы.

-   [*HIVE-18754*](https://issues.apache.org/jira/browse/HIVE-18754): состояние REPL должно поддерживать предложение with.

-   [*HIVE-18788*](https://issues.apache.org/jira/browse/HIVE-18788): очистите входные данные в инструкции PreparedStatement в JDBC.

-   [*HIVE-18794*](https://issues.apache.org/jira/browse/HIVE-18794): предложение with загрузки REPL не передает конфигурацию задачам для таблиц вне раздела.

-   [*HIVE-18808*](https://issues.apache.org/jira/browse/HIVE-18808): обеспечьте более надежное сжатие при сбое обновления статистических данных.

-   [*HIVE-18815*](https://issues.apache.org/jira/browse/HIVE-18815): удалите неиспользуемую функцию в HPL и SQL.

-   [*HIVE-18817*](https://issues.apache.org/jira/browse/HIVE-18817): исключение ArrayIndexOutOfBounds во время чтения таблицы ACID.

-   [*HIVE-18833*](https://issues.apache.org/jira/browse/HIVE-18833): сбой автоматического объединения при выполнении вставки в каталог, как вставки ORC-файла.

-   [*HIVE-18879*](https://issues.apache.org/jira/browse/HIVE-18879): запретите работу внедренного элемента в UDFXPathUtil при наличии в пути класса файла xercesImpl.jar.

-   [*Hive-18944*](https://issues.apache.org/jira/browse/HIVE-18944): в DPP задано неправильное расположение наборов группирования.

#### <a name="kafka"></a>Kafka

В этом выпуске содержится Kafka 1.0.0 и следующие исправления Apache.

-   [KAFKA-4827](https://issues.apache.org/jira/browse/KAFKA-4827): подключение Kafka — ошибка со специальными знаками в имени соединителя.

-   [KAFKA-6118](https://issues.apache.org/jira/browse/KAFKA-6118): самоустраняющийся отказ в учетных данных kafka.api.SaslScramSslEndToEndAuthorizationTest.testTwoConsumersWithDifferentSaslCredentials.

-   [KAFKA-6156](https://issues.apache.org/jira/browse/KAFKA-6156): JmxReporter не может обрабатывать пути каталога в стиле Windows.

-   [KAFKA-6164](https://issues.apache.org/jira/browse/KAFKA-6164): потоки ClientQuotaManager предотвращают выключение при возникновении журналов загрузки ошибок.

-   [KAFKA-6167](https://issues.apache.org/jira/browse/KAFKA-6167): метка времени в каталоге потоков содержит двоеточие, которое является недопустимым символом.

-   [KAFKA-6179](https://issues.apache.org/jira/browse/KAFKA-6179): метод RecordQueue.clear() не очищает поддерживаемый список MinTimestampTracker.

-   [KAFKA-6185](https://issues.apache.org/jira/browse/KAFKA-6185): утечка памяти селектора с высокой вероятностью OOM в случае понижающего преобразования.

-   [KAFKA-6190](https://issues.apache.org/jira/browse/KAFKA-6190): GlobalKTable никогда не завершает восстановление при потреблении транзактных сообщений.

-   [KAFKA-6210](https://issues.apache.org/jira/browse/KAFKA-6210): исключение IllegalArgumentException, если версия 1.0.0 используется для inter.broker.protocol.version или log.message.format.version.

-   [KAFKA-6214](https://issues.apache.org/jira/browse/KAFKA-6214): использование резервных реплик в хранилище состояний памяти приводит к сбою потоков.

-   [KAFKA-6215](https://issues.apache.org/jira/browse/KAFKA-6215): сбой KafkaStreamsTest в магистрали.

-   [KAFKA-6238](https://issues.apache.org/jira/browse/KAFKA-6238): проблемы с версией протокола при применении последовательного обновления до версии 1.0.0.

-   [KAFKA-6260](https://issues.apache.org/jira/browse/KAFKA-6260): AbstractCoordinator нечетко обрабатывает исключение NULL.

-   [KAFKA-6261](https://issues.apache.org/jira/browse/KAFKA-6261): ведение журнала запроса вызывает исключение, если acks=0.

-   [KAFKA-6274](https://issues.apache.org/jira/browse/KAFKA-6274): оптимизируйте автоматически созданные имена в хранилище состояния источника KTable.

#### <a name="mahout"></a>Mahout

В HDP версий 2.3.x и 2.4.x вместо доставки определенного выпуска Apache Mahout была выполнена синхронизация с конкретной точкой редакции в магистрали Apache Mahout. Эта точка редакции следует после выпуска 0.9.0, но не превышает выпуск 0.10.0. Это обеспечивает большое количество исправлений ошибок и функциональных улучшений по сравнению с версией 0.9.0, но включает стабильную версию функций Mahout и уступает полному преобразованию в новом Mahout на основе Spark в версии 0.10.0.

В GitHub точка редакции, выбранная для Mahout в HDP версий 2.3.x и 2.4.x, относится к ветви "mahout-0.10.x" Apache Mahout по состоянию на 19 декабря 2014 года, редакция 0f037cb03e77c096.

В HDP версий 2.5.x и 2.6.x мы удалили библиотеку "commons-httpclient" из Mahout, потому что рассматриваем ее как устаревшую с возможными проблемами безопасности. Мы обновили клиент Hadoop-Client в Mahout до версии 2.7.3, той же версии, используемой в HDP версии 2.5. В результате имеем следующее:

-   Ранее скомпилированные задания Mahout необходимо повторно компилировать в среде HDP-2.5 или 2.6.

-   Есть небольшая вероятность того, что для некоторых заданий Mahout могут возникнуть ошибки "ClassNotFoundException" или "не удалось загрузить класс", которые относятся к "org.apache.commons.httpclient", "net.java.dev.jets3t" или связанным префиксам имени класса. При возникновении этих ошибок можно вручную установить необходимые JAR-файлы в пути к классу для задания, если риск проблем с безопасностью в устаревшей библиотеке является приемлемым в вашей среде.

-   Есть еще меньшая вероятность аварийного завершения некоторых заданий Mahout в вызовах клиентского кода HBase Mahout общедоступных библиотек Hadoop из-за проблем с двоичной совместимостью. К сожалению, нет способа решить эту проблему, кроме как вернуться к версии HDP-2.4.2 Mahout, для которой наблюдаются проблемы с безопасностью. Опять же, это случается крайне редко и вряд ли произойдет в любом доступном наборе заданий Mahout.

#### <a name="oozie"></a>Oozie,

В этом выпуске содержится Oozie 4.2.0 и следующие исправления Apache.

-   [OOZIE-2571](https://issues.apache.org/jira/browse/OOZIE-2571): добавьте свойство Maven spark.scala.binary.version, чтобы можно было использовать Scala 2.11.

-   [OOZIE-2606](https://issues.apache.org/jira/browse/OOZIE-2606): установите spark.yarn.jars, чтобы исправить Spark 2.0 с помощью Oozie.

-   [OOZIE-2658](https://issues.apache.org/jira/browse/OOZIE-2658): driver-class-path может перезаписать путь класса в SparkMain.

-   [OOZIE-2787](https://issues.apache.org/jira/browse/OOZIE-2787): Oozie распространяет JAR-файл приложения дважды, что приводит к сбою задания Spark.

-   [OOZIE-2792](https://issues.apache.org/jira/browse/OOZIE-2792): действие Hive2 не выполняет соответствующий синтаксический анализ идентификатора приложения Spark из файла журнала при наличии Hive в Spark.

-   [OOZIE-2799](https://issues.apache.org/jira/browse/OOZIE-2799): настройка местоположения журнала для Spark SQL в Hive.

-   [OOZIE-2802](https://issues.apache.org/jira/browse/OOZIE-2802): сбой действия Spark в Spark 2.1.0 из-за повторяющихся общедоступных библиотек.

-   [OOZIE-2923](https://issues.apache.org/jira/browse/OOZIE-2923): оптимизируйте синтаксический анализ параметров Spark.

-   [OOZIE-3109](https://issues.apache.org/jira/browse/OOZIE-3109): SCA — отражены межсайтовые скрипты.

-   [OOZIE-3139](https://issues.apache.org/jira/browse/OOZIE-3139): Oozie неправильно проверяет рабочий процесс.

-   [OOZIE-3167](https://issues.apache.org/jira/browse/OOZIE-3167): обновите версию Tomcat в ветви Oozie 4.3.

#### <a name="phoenix"></a>Phoenix

В этом выпуске содержится Phoenix 4.7.0 и следующие исправления Apache.

-   [PHOENIX-1751](https://issues.apache.org/jira/browse/PHOENIX-1751): выполняйте агрегацию, сортировку и т. д. в preScannerNext, а не postScannerOpen.

-   [PHOENIX-2714](https://issues.apache.org/jira/browse/PHOENIX-2714): исправьте оценку байтов в BaseResultIterators и предоставьте как интерфейс.

-   [PHOENIX-2724](https://issues.apache.org/jira/browse/PHOENIX-2724): запрос с большим количеством направляющих выполняется медленнее по сравнению с отсутствием статистики.

-   [PHOENIX-2855](https://issues.apache.org/jira/browse/PHOENIX-2855): Workaround Increment TimeRange не сериализуется для HBase 1.2.

-   [PHOENIX-3023](https://issues.apache.org/jira/browse/PHOENIX-3023): низкая производительность при параллельном выполнении запросов ограничения по умолчанию.

-   [PHOENIX-3040](https://issues.apache.org/jira/browse/PHOENIX-3040): не используйте направляющие для выполнения запросов поочередно.

-   [PHOENIX-3112](https://issues.apache.org/jira/browse/PHOENIX-3112): сканирование частично выполненной строки обрабатывается неправильно.

-   [PHOENIX 3240](https://issues.apache.org/jira/browse/PHOENIX-3240): исключение ClassCastException из загрузчика Pig.

-   [PHOENIX-3452](https://issues.apache.org/jira/browse/PHOENIX-3452): NULLS FIRST и NULL LAST не должны влиять на то, является ли GROUP BY сохранением порядка.

-   [PHOENIX-3469](https://issues.apache.org/jira/browse/PHOENIX-3469): неверный порядок сортировки для первичного ключа DESC для NULLS LAST и NULLS FIRST.

-   [PHOENIX-3789](https://issues.apache.org/jira/browse/PHOENIX-3789): выполните вызовы обслуживания межрегионального индекса в postBatchMutateIndispensably.

-   [PHOENIX-3865](https://issues.apache.org/jira/browse/PHOENIX-3865): IS NULL не возвращает правильные результаты, если первое семейство столбцов не фильтруется.

-   [PHOENIX-4290](https://issues.apache.org/jira/browse/PHOENIX-4290): полное сканирование таблицы, выполненное для DELETE с таблицей, содержащей неизменяемые индексы.

-   [PHOENIX-4373](https://issues.apache.org/jira/browse/PHOENIX-4373): ключ длины переменной локального индекса может включать завершающие нули при восстановлении.

-   [PHOENIX-4466](https://issues.apache.org/jira/browse/PHOENIX-4466): исключение java.lang.RuntimeException — код отклика 500 — выполнение задания Spark для подключения к серверу запросов Phoenix и загрузки данных.

-   [PHOENIX-4489](https://issues.apache.org/jira/browse/PHOENIX-4489): утечка HBase Connection в заданиях MR Phoenix.

-   [PHOENIX-4525](https://issues.apache.org/jira/browse/PHOENIX-4525): переполнение целого числа в выполнении GroupBy.

-   [PHOENIX-4560](https://issues.apache.org/jira/browse/PHOENIX-4560): ORDER BY с GROUP BY не работает, если в столбце PK есть WHERE.

-   [PHOENIX-4586](https://issues.apache.org/jira/browse/PHOENIX-4586): UPSERT SELECT не принимает операторы сравнения учетных записей для подзапросов.

-   [PHOENIX-4588](https://issues.apache.org/jira/browse/PHOENIX-4588): также выражение клона, если дочерние элементы включают вызов Determinism.PER\_INVOCATION.

#### <a name="pig"></a>Pig,

В этом выпуске содержится Pig 0.16.0 и следующие исправления Apache.

-   [PIG-5159](https://issues.apache.org/jira/browse/PIG-5159): исправление Pig не сохраняет историю grunt.

-   [PIG-5175](https://issues.apache.org/jira/browse/PIG-5175): обновите JRuby до версии 1.7.26.

#### <a name="ranger"></a>Ranger

В этом выпуске содержится Ranger 0.7.0 и следующие исправления Apache.

-   [RANGER-1805](https://issues.apache.org/jira/browse/RANGER-1805): улучшение кода для отслеживания лучших методик в JS.

-   [RANGER-1960](https://issues.apache.org/jira/browse/RANGER-1960): для операции удаления учитывайте имя таблицы моментального снимка.

-   [RANGER-1982](https://issues.apache.org/jira/browse/RANGER-1982): исправление ошибок для метрики аналитики администратора и сервера управления ключами Ranger.

-   [Ranger-1984](https://issues.apache.org/jira/browse/RANGER-1984): записи журнала аудита HBase могут не отображать все теги, связанные со столбцом, к которому осуществляется доступ.

-   [RANGER-1988](https://issues.apache.org/jira/browse/RANGER-1988): исправьте небезопасную случайность.

-   [RANGER-1990](https://issues.apache.org/jira/browse/RANGER-1990): добавьте одностороннюю поддержку MySQL SSL для администратора Ranger.

-   [RANGER-2006](https://issues.apache.org/jira/browse/RANGER-2006): устраните проблемы, обнаруженные при анализе статического кода в синхронизации пользователей Ranger для источника синхронизации ldap.

-   [RANGER-2008](https://issues.apache.org/jira/browse/RANGER-2008): оценка политики не соответствует ее многолинейным условиям.

#### <a name="slider"></a>Slider

В этом выпуске содержится Slider 0.92.0 без дополнительных исправлений Apache.

#### <a name="spark"></a>Spark

В этом выпуске содержится Spark 2.3.0 и следующие исправления Apache.

-   [SPARK-13587](https://issues.apache.org/jira/browse/SPARK-13587): включите поддержку virtualenv в PySpark.

-   [SPARK-19964](https://issues.apache.org/jira/browse/SPARK-19964): избегайте чтения из удаленного репозитория в SparkSubmitSuite.

-   [SPARK-22882](https://issues.apache.org/jira/browse/SPARK-22882): тест машинного обучения для структурированной потоковой передачи: ml.classification.

-   [SPARK-22915](https://issues.apache.org/jira/browse/SPARK-22915): тесты потоковой передачи для функции spark.ml.feature от N to Z.

-   [SPARK-23020](https://issues.apache.org/jira/browse/SPARK-23020): исправьте другую ошибку состояния гонки во внутрипроцессной проверке средства запуска.

-   [SPARK-23040](https://issues.apache.org/jira/browse/SPARK-23040): возвращает прерываемый итератор для средства чтения в случайном порядке.

-   [SPARK-23173](https://issues.apache.org/jira/browse/SPARK-23173): не создавайте поврежденные файлы Parquet при загрузке данных из JSON.

-   [SPARK-23264](https://issues.apache.org/jira/browse/SPARK-23264): исправьте Scala. MatchError в literals.sql.out.

-   [SPARK-23288](https://issues.apache.org/jira/browse/SPARK-23288): исправьте выходные показатели с помощью приемника Parquet.

-   [SPARK-23329](https://issues.apache.org/jira/browse/SPARK-23329): исправьте документацию о тригонометрических функциях.

-   [SPARK-23406](https://issues.apache.org/jira/browse/SPARK-23406): включите самосоединение потоков для ветви branch-2.3.

-   [SPARK-23434](https://issues.apache.org/jira/browse/SPARK-23434): Spark не должен предупреждать \`каталог метаданных\` для пути к файлу HDFS.

-   [Spark-23436](https://issues.apache.org/jira/browse/SPARK-23436): выводит секцию как дату, только если ее можно привести к типу Date.

-   [SPARK-23457](https://issues.apache.org/jira/browse/SPARK-23457): сначала зарегистрируйте слушателей завершения задачи в ParquetFileFormat.

-   [SPARK-23462](https://issues.apache.org/jira/browse/SPARK-23462): оптимизируйте сообщение об ошибке в отсутствующем поле \`StructType\`.

-   [SPARK-23490](https://issues.apache.org/jira/browse/SPARK-23490): проверьте storage.locationUri с помощью имеющейся таблицы в CreateTable.

-   [SPARK-23524](https://issues.apache.org/jira/browse/SPARK-23524): большие локальные блоки в случайном порядке не должны проверяться на предмет ошибок.

-   [SPARK-23525](https://issues.apache.org/jira/browse/SPARK-23525): включите поддержку ALTER TABLE CHANGE COLUMN COMMENT для внешней таблицы Hive.

-   [SPARK-23553](https://issues.apache.org/jira/browse/SPARK-23553): тесты не должны принимать значение по умолчанию \`spark.sql.sources.default\`.

-   [SPARK-23569](https://issues.apache.org/jira/browse/SPARK-23569): разрешите pandas\_udf работать с функциями аннотированного типа стиля python3.

-   [SPARK-23570](https://issues.apache.org/jira/browse/SPARK-23570): добавьте Spark 2.3.0 в HiveExternalCatalogVersionsSuite.

-   [SPARK-23598](https://issues.apache.org/jira/browse/SPARK-23598): сделайте методы в BufferedRowIterator общедоступными, чтобы избежать ошибки времени выполнения для большого запроса.

-   [SPARK-23599](https://issues.apache.org/jira/browse/SPARK-23599): добавьте генератор UUID из псевдослучайных чисел.

-   [SPARK-23599](https://issues.apache.org/jira/browse/SPARK-23599): используйте RandomUUIDGenerator в выражении Uuid.

-   [SPARK-23601](https://issues.apache.org/jira/browse/SPARK-23601): удалите файлы .md5 из выпуска.

-   [SPARK-23608](https://issues.apache.org/jira/browse/SPARK-23608): добавьте синхронизацию в SHS между функциями attachSparkUI и detachSparkUI, чтобы избежать проблемы параллельной модификации в обработчиках Jetty.

-   [SPARK-23614](https://issues.apache.org/jira/browse/SPARK-23614): исправьте неправильный обмен повторного использования при использовании кэширования.

-   [SPARK-23623](https://issues.apache.org/jira/browse/SPARK-23623): избегайте параллельного использования кэшированных потребителей в CachedKafkaConsumer (ветвь branch-2.3).

-   [SPARK-23624](https://issues.apache.org/jira/browse/SPARK-23624): пересмотрите документ pushFilters метода в Datasource V2.

-   [SPARK-23628](https://issues.apache.org/jira/browse/SPARK-23628): метод calculateParamLength не должен возвращать 1 + число выражений.

-   [SPARK-23630](https://issues.apache.org/jira/browse/SPARK-23630): разрешите активацию настроек конфигурации Hadoop пользователя.

-   [SPARK-23635](https://issues.apache.org/jira/browse/SPARK-23635): переменная среды исполнителя Spark перезаписывается переменной среды антивредоносной программы с тем же именем.

-   [SPARK-23637](https://issues.apache.org/jira/browse/SPARK-23637): Yarn может выделять больше ресурсов, если один и тот же исполнитель выходит из строя несколько раз.

-   [SPARK-23639](https://issues.apache.org/jira/browse/SPARK-23639): получите маркер перед клиентом хранилища метаданных инициализации в CLI SparkSQL.

-   [SPARK-23642](https://issues.apache.org/jira/browse/SPARK-23642): подкласс AccumulatorV2 — исправление isZero.

-   [SPARK-23644](https://issues.apache.org/jira/browse/SPARK-23644): используйте абсолютный путь для вызова REST в SHS.

-   [SPARK-23645](https://issues.apache.org/jira/browse/SPARK-23645): добавьте документацию RE \`pandas\_udf\` с аргументами ключевого слова.

-   [SPARK-23649](https://issues.apache.org/jira/browse/SPARK-23649): пропуск символов, запрещенных в UTF-8.

-   [SPARK-23658](https://issues.apache.org/jira/browse/SPARK-23658): InProcessAppHandle использует неправильный класс в getLogger.

-   [SPARK-23660](https://issues.apache.org/jira/browse/SPARK-23660): исправьте исключение в режиме кластера YARN, если приложение быстро завершает работу.

-   [SPARK-23670](https://issues.apache.org/jira/browse/SPARK-23670): исправьте проблему утечки памяти в SparkPlanGraphWrapper.

-   [SPARK-23671](https://issues.apache.org/jira/browse/SPARK-23671): исправьте условие, чтобы включить пул потоков SHS.

-   [SPARK-23691](https://issues.apache.org/jira/browse/SPARK-23691): используйте утилиту sql\_conf в тестах PySpark, где это возможно.

-   [SPARK-23695](https://issues.apache.org/jira/browse/SPARK-23695): исправьте сообщение об ошибке для тестов потоковой передачи Kinesis.

-   [SPARK-23706](https://issues.apache.org/jira/browse/SPARK-23706): spark.conf.get(value, default=None) должно формировать значение None в PySpark.

-   [SPARK-23728](https://issues.apache.org/jira/browse/SPARK-23728): исправьте тесты машинного обучения с ожидаемыми исключениями, которые запускают потоковые тесты.

-   [SPARK-23729](https://issues.apache.org/jira/browse/SPARK-23729): учитывайте фрагмент универсального кода ресурса (URI) при разрешении проблем пакетов glob.

-   [SPARK-23759](https://issues.apache.org/jira/browse/SPARK-23759): не удалось связать пользовательский интерфейс Spark с конкретным именем узла или IP-адреса.

-   [SPARK-23760](https://issues.apache.org/jira/browse/SPARK-23760): CodegenContext.withSubExprEliminationExprs должен правильно сохранять и восстанавливать состояние CSE.

-   [SPARK-23769](https://issues.apache.org/jira/browse/SPARK-23769): удалите комментарии, которые без необходимости отключают проверку Scalastyle.

-   [SPARK-23788](https://issues.apache.org/jira/browse/SPARK-23788): исправьте ошибку состояния гонки в StreamingQuerySuite.

-   [SPARK-23802](https://issues.apache.org/jira/browse/SPARK-23802): PropagateEmptyRelation может оставить план запроса в неразрешенном состоянии.

-   [SPARK-23806](https://issues.apache.org/jira/browse/SPARK-23806): Broadcast.unpersist может вызвать фатальное исключение при использовании с динамическим распределением.

-   [SPARK-23808](https://issues.apache.org/jira/browse/SPARK-23808): установите сеанс Spark по умолчанию в сеансах Spark только для тестирования.

-   [SPARK-23809](https://issues.apache.org/jira/browse/SPARK-23809): активный сеанс SparkSession должен устанавливаться getOrCreate.

-   [SPARK-23816](https://issues.apache.org/jira/browse/SPARK-23816): завешенные задачи должны игнорировать FetchFailures.

-   [SPARK-23822](https://issues.apache.org/jira/browse/SPARK-23822): оптимизируйте сообщение об ошибке для несоответствий схемы Parquet.

-   [SPARK-23823](https://issues.apache.org/jira/browse/SPARK-23823): придерживайтесь исходной формы в transformExpression.

-   [SPARK-23827](https://issues.apache.org/jira/browse/SPARK-23827): выполнение StreamingJoinExec должно обеспечивать разделение входных данных на определенное количество разделов.

-   [SPARK-23838](https://issues.apache.org/jira/browse/SPARK-23838): на вкладке SQL запуск SQL-запроса отображается как "завершен".

-   [SPARK-23881](https://issues.apache.org/jira/browse/SPARK-23881): исправьте нестабильное тестирование JobCancellationSuite — прерываемый итератор для средства чтения в случайном порядке.

#### <a name="sqoop"></a>Sqoop

В этом выпуске содержатся сведения о Sqoop 1.4.6 без дополнительных исправлений Apache.

#### <a name="storm"></a>Storm

В этом выпуске содержатся сведения о Storm 1.1.1 и следующие исправления Apache.

-   [STORM-2652](https://issues.apache.org/jira/browse/STORM-2652): исключение, вызванное в открытом методе JmsSpout.

-   [STORM-2841](https://issues.apache.org/jira/browse/STORM-2841): сбой UT testNoAcksIfFlushFails с исключением NullPointerException.

-   [STORM-2854](https://issues.apache.org/jira/browse/STORM-2854): предоставьте IEventLogger возможность включать регистрацию событий.

-   [STORM-2870](https://issues.apache.org/jira/browse/STORM-2870): средство ведения журнала FileBasedEventLogger организовывает утечку ExecutorService, не связанной с управляющей программой, которая предотвращает завершение процесса.

-   [STORM-2960](https://issues.apache.org/jira/browse/STORM-2960): лучше подчеркнуть важность задания надлежащей учетной записи ОС для процессов Storm.

#### <a name="tez"></a>Tez

В этом выпуске содержатся сведения о Tez 0.7.0 и следующие исправления Apache.

-   [TEZ-1526](https://issues.apache.org/jira/browse/TEZ-1526): LoadingCache для TezTaskID замедляется для больших заданий.

#### <a name="zeppelin"></a>Zeppelin

В этом выпуске содержатся сведения о Zeppelin 0.7.3 без дополнительных исправлений Apache.

-   [ZEPPELIN-3072](https://issues.apache.org/jira/browse/ZEPPELIN-3072): пользовательский интерфейс Zeppelin медленно работает или не отвечает при большом количестве записных книжек.

-   [ZEPPELIN-3129](https://issues.apache.org/jira/browse/ZEPPELIN-3129): пользовательский интерфейс Zeppelin не выходит в IE.

-   [ZEPPELIN-903](https://issues.apache.org/jira/browse/ZEPPELIN-903): замените CXF на Jersey2.

#### <a name="zookeeper"></a>ZooKeeper

В этом выпуске содержатся сведения о ZooKeeper 3.4.6 и следующие исправления Apache.

-   [ZOOKEEPER-1256](https://issues.apache.org/jira/browse/ZOOKEEPER-1256): сбой Клиентпортбиндтест для macOS X.

-   [ZOOKEEPER-1901](https://issues.apache.org/jira/browse/ZOOKEEPER-1901): \[ JDK8 \] Сортировать дочерние элементы для сравнения в тестах асинкопс.

-   [ZOOKEEPER-2423](https://issues.apache.org/jira/browse/ZOOKEEPER-2423): обновите версию Netty из-за уязвимости безопасности (CVE-2014-3488).

-   [ZOOKEEPER-2693](https://issues.apache.org/jira/browse/ZOOKEEPER-2693): атака типа "отказ в обслуживании" для слов, состоящих из четырех знаков (4lw).

-   [ZOOKEEPER-2726](https://issues.apache.org/jira/browse/ZOOKEEPER-2726): исправление для определения потенциального состояния гонки.

### <a name="fixed-common-vulnerabilities-and-exposures"></a>Исправлены проблемы, связанные с распространенными уязвимостями и рисками

В этом разделе описываются все общие уязвимости и риски (CVE), которые рассматриваются в этом выпуске.

#### <a name="cve-2017-7676"></a>**CVE-2017-7676**

| **Сводка:** оценка политики Apache Ranger игнорирует знаки после подстановочного знака "\*" |
|----------------------------------------------------------------------------------------------------------------------------------------------------------------|
| **Уровень серьезности:** Критическое                                                                           |
| **Поставщик:** Hortonworks                                                                          |
| **Затронутые версии:** версии HDInsight 3.6, включая Apache Ranger версий 0.5.x/0.6.x/0.7.0.     |
| **Затронутые пользователи:** среды, использующие политики Ranger со знаками после подстановочного знака "\*" — например my\*test, test\*.txt. |
| **Влияние:** сопоставитель ресурса политики игнорирует знаки после подстановочного знака "\*", что может привести к непреднамеренному поведению.      |
| **Сведения об исправлении:** сопоставитель ресурса политики Ranger был обновлен для правильной обработки совпадений подстановочных знаков.           |
| **Рекомендуемое действие:** обновите HDI до версии 3.6 (с Apache Ranger 0.7.1+).                                |

### <a name="cve-2017-7677"></a>**CVE-2017-7677**

| **Сводка:** Инициатор авторизации Apache Ranger Hive должен проверить разрешение RWX, когда указано внешнее местоположение |
|--------------------------------------------------------------------------------------------------|
| **Уровень серьезности:** Критическое                                                                           |
| **Поставщик:** Hortonworks                                                                          |
| **Затронутые версии:** версии HDInsight 3.6, включая Apache Ranger версий 0.5.x/0.6.x/0.7.0. |
| **Затронутые пользователи:** среды, которые используют внешнее местоположение для таблиц Hive. |
| **Влияние:** в средах, которые используют внешнее местоположение для таблиц Hive, инициатор авторизации Apache Ranger Hive должен проверить разрешение RWX для внешнего местоположения, указанного для таблицы create. |
| **Сведения об исправлении:** инициатор авторизации Ranger Hive был обновлен для правильной обработки проверки разрешения для внешнего местоположения. |
| **Рекомендуемое действие:** пользователи должны обновить HDI до версии 3.6 (с Apache Ranger 0.7.1+). |

#### <a name="cve-2017-9799"></a>**CVE-2017-9799**

| **Сводка:** потенциальное выполнение кода как неправильного пользователя в Apache Storm |
|--------------------------------------------------------------------------------------------------|
|**Уровень серьезности:** важно |
| **Поставщик:** Hortonworks |
| **Затронутые версии:** HDP 2.4.0, HDP-2.5.0, HDP-2.6.0 |
| **Затронутые пользователи:** пользователи, которые используют Storm в безопасном режиме и хранилище BLOB-объектов для распространения артефактов на основе топологии, или используют хранилище BLOB-объектов для распространения любых ресурсов топологии. |
| **Влияние:** в некоторых ситуациях и конфигурациях Storm для владельца топологии теоретически возможно обойти супервизора, чтобы запустить рабочую роль от имени другого, отличного от привилегированного пользователя. В худшем случае это может привести к тому, что учетные данные другого пользователя будут скомпрометированы. Эта уязвимость касается только установок Apache Storm с включенной защитой. |
| **Устранение рисков:** обновите HDP до версии 2.6.2.1, так как в настоящее время обходных путей нет.  |

#### <a name="cve-2016-4970"></a>**CVE-2016-4970**

| **Сводка:** handler/ssl/OpenSslEngine.java в Netty 4.0.x перед 4.0.37.Final и 4.1.x перед 4.1.1.Final позволяет злоумышленникам, использующим удаленный доступ, вызвать отказ в обслуживании (бесконечный цикл) |
|--------------------------------------------------------------------------------------------------|
| **Уровень серьезности:** средний  |
| **Поставщик:** Hortonworks  |
| **Затронутые версии:** HDP 2.x.x с версии 2.3.x  |
| **Затронутые пользователи:** все пользователи, использующие HDFS. |
| **Влияние:** влияние недостаточное, поскольку Hortonworks не использует OpenSslEngine.java непосредственно в базе кодов Hadoop.     |
| **Рекомендуемое действие:** обновите HDP до версии 2.6.3.   |

#### <a name="cve-2016-8746"></a>**CVE-2016-8746**

| **Сводка:** проблема соответствия пути Apache Ranger в оценке политики                                                                    |
|----------------------------------------------------------------------------------------------------------------------------------------|
| **Уровень серьезности:** обычный                                                                                                                   |
| **Поставщик:** Hortonworks                                                                                                                |
| **Затронутые версии:** все версии HDP 2.5, включая версии Apache Ranger 0.6.0/0.6.1/0.6.2                                         |
| **Затронутые пользователи:** все пользователи средства администрирования политики Ranger.                                                                         |
| **Влияние:** механизм политики Ranger неправильно сопоставляет пути в определенных условиях, когда политика содержит подстановочные знаки и рекурсивные флаги. |
| **Сведения об исправлении:** исправленная логика оценки политики                                                                                          |
| **Рекомендуемое действие:** пользователи должны обновить HDI до версии 2.5.4+ (с Apache Ranger 0.6.3+) или 2.6+ (с Apache Ranger 0.7.0+)         |

#### <a name="cve-2016-8751"></a>**CVE-2016-8751**

| **Сводка:** у Apache Ranger есть проблема межсайтового написания скриптов  |
|--------------------------------------------------------------------------------------------------|
| **Уровень серьезности:** обычный |
| **Поставщик:** Hortonworks |
| **Затронутые версии:** все версии HDP 2.3/2.4/2.5, включая Apache Ranger версий 0.5.x/0.6.0/0.6.1/0.6.2.  |
| **Затронутые пользователи:** все пользователи средства администрирования политики Ranger. |
| **Влияние:** Apache Ranger уязвим для хранимых межсайтовых скриптов при вводе пользовательских условий политики. Пользователи с правами администратора могут хранить произвольный код JavaScript, когда обычные пользователи входят в систему и политики доступа. |
| **Сведения об исправлении:** добавлена логика для очистки входных данных пользователя.  |
| **Рекомендуемое действие:** пользователи должны обновить HDI до версии 2.5.4+ (с Apache Ranger 0.6.3+) или 2.6+ (с Apache Ranger 0.7.0+)  |

### <a name="fixed-issues-for-support"></a>Исправленные проблемы для поддержки

Исправленные ошибки представляют собой выбранные проблемы, которые ранее были зарегистрированы в Hortonworks Support, но теперь рассматриваются в текущем выпуске. Об этих проблемах, возможно, сообщалось в предыдущих версиях в разделе "Известные проблемы", что говорит о том, что об этих проблемах сообщили клиенты или они были определены командой Hortonworks Quality Engineering.

**Неверные результаты**

| **Идентификатор ошибки Hortonworks** | **Apache JIRA**                                                                                                                                                                                                                                                                | **Сводка**                                                                                                            |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------|
| BUG-100019             | [YARN-8145](https://issues.apache.org/jira/browse/YARN-8145)                                                                                                                                                                                                                   | yarn rmadmin -getGroups не возвращает обновленные группы для пользователя                                                         |
| BUG-100058             | [PHOENIX-2645](https://issues.apache.org/jira/browse/PHOENIX-2645)                                                                                                                                                                                                             | Подстановочные знаки не соответствуют знакам новой строки                                                                    |
| BUG-100266             | [PHOENIX-3521](https://issues.apache.org/jira/browse/PHOENIX-3521), [PHOENIX-4190](https://issues.apache.org/jira/browse/PHOENIX-4190)                                                                                                                                         | Результаты не соответствуют локальным индексам                                                                                       |
| BUG-88774              | [HIVE-17617](https://issues.apache.org/jira/browse/HIVE-17617), [HIVE-18413](https://issues.apache.org/jira/browse/HIVE-18413), [HIVE-18523](https://issues.apache.org/jira/browse/HIVE-18523)                                                                                 | Сбой query36, несоответствие числа строк                                                                                    |
| BUG-89765              | [HIVE-17702](https://issues.apache.org/jira/browse/HIVE-17702)                                                                                                                                                                                                                 | Неправильная обработка isRepeating в средстве чтения десятичных чисел в ORC                                                                |
| BUG-92293              | [HADOOP-15042](https://issues.apache.org/jira/browse/HADOOP-15042)                                                                                                                                                                                                             | Azure PageBlobInputStream.skip() может возвращать отрицательное значение, когда число numberOfPagesRemaining равно 0.                            |
| BUG-92345              | [ATLAS-2285](https://issues.apache.org/jira/browse/ATLAS-2285)                                                                                                                                                                                                                 | Пользовательский интерфейс: переименован сохраненный поиск с атрибутом даты.                                                                         |
| BUG-92563              | [HIVE-17495](https://issues.apache.org/jira/browse/HIVE-17495), [HIVE-18528](https://issues.apache.org/jira/browse/HIVE-18528)                                                                                                                                                 | Объединенные статистические данные в ObjectStore получили неправильный результат                                                                        |
| BUG-92957              | [HIVE-11266](https://issues.apache.org/jira/browse/HIVE-11266)                                                                                                                                                                                                                 | Неправильный результат count(\*), основанный на статистике таблицы для внешних таблиц                                                   |
| BUG-93097              | [RANGER-1944](https://issues.apache.org/jira/browse/RANGER-1944)                                                                                                                                                                                                               | Не работает фильтр действий для аудита администратора                                                                           |
| BUG-93335              | [HIVE — 12315](https://issues.apache.org/jira/browse/HIVE-12315)                                                                                                                                                                                                                 | vectorization\_short\_regress.q содержит неправильный результат для двойного вычисления                                      |
| BUG-93415              | [HIVE-18258](https://issues.apache.org/jira/browse/HIVE-18258), [HIVE-18310](https://issues.apache.org/jira/browse/HIVE-18310)                                                                                                                                                 | Векторизация — Reduce-Side GROUP BY MERGEPARTIAL с двойными столбцами неработоспособна                                      |
| BUG-93939              | [ATLAS-2294](https://issues.apache.org/jira/browse/ATLAS-2294)                                                                                                                                                                                                                 | При создании типа добавлен дополнительный параметр "описание"                                                               |
| BUG-94007              | [PHOENIX-1751](https://issues.apache.org/jira/browse/PHOENIX-1751), [PHOENIX-3112](https://issues.apache.org/jira/browse/PHOENIX-3112)                                                                                                                                         | Запросы Phoenix возвращают значения NULL из-за частично выполненных строк HBase                                                          |
| BUG-94266              | [HIVE-12505](https://issues.apache.org/jira/browse/HIVE-12505)                                                                                                                                                                                                                 | Вставка перезаписи в одной зашифрованной зоне по умолчанию завершается сбоем, чтобы удалить некоторые имеющиеся файлы                                   |
| BUG-94414              | [HIVE — 15680](https://issues.apache.org/jira/browse/HIVE-15680)                                                                                                                                                                                                                 | Неправильные результаты, когда hive.optimize.index.filter=true и в запросе дважды содержится ссылка на одну таблицу ORC                 |
| BUG-95048              | [HIVE — 18490](https://issues.apache.org/jira/browse/HIVE-18490)                                                                                                                                                                                                                 | Запрос с инструкциями EXISTS и NOT EXISTS с неэквивалентным предикатом может привести к неправильному результату                                      |
| BUG-95053              | [PHOENIX-3865](https://issues.apache.org/jira/browse/PHOENIX-3865)                                                                                                                                                                                                             | IS NULL не возвращает правильные результаты, если первое семейство столбцов не фильтруется                                  |
| BUG-95476              | [RANGER-1966](https://issues.apache.org/jira/browse/RANGER-1966)                                                                                                                                                                                                               | В некоторых случаях инициализация механизма политики не создает контекстных обогатителей                                           |
| BUG-95566              | [SPARK-23281](https://issues.apache.org/jira/browse/SPARK-23281)                                                                                                                                                                                                               | Запрос генерирует результаты в неправильном порядке, когда составной порядок по предложению ссылается на исходные столбцы и псевдонимы |
| BUG-95907              | [PHOENIX-3451](https://issues.apache.org/jira/browse/PHOENIX-3451), [PHOENIX-3452](https://issues.apache.org/jira/browse/PHOENIX-3452), [PHOENIX-3469](https://issues.apache.org/jira/browse/PHOENIX-3469), [PHOENIX-4560](https://issues.apache.org/jira/browse/PHOENIX-4560) | Исправление проблем с ORDER BY ASC, если запрос включает агрегирование                                                             |
| BUG-96389              | [PHOENIX-4586](https://issues.apache.org/jira/browse/PHOENIX-4586)                                                                                                                                                                                                             | UPSERT SELECT не принимает операторы сравнения учетных записей для подзапросов                                             |
| BUG-96602              | [HIVE — 18660](https://issues.apache.org/jira/browse/HIVE-18660)                                                                                                                                                                                                                 | Реестр конфигурации платформы не различает разделы и виртуальные столбцы                                                          |
| BUG-97686              | [ATLAS-2468](https://issues.apache.org/jira/browse/ATLAS-2468)                                                                                                                                                                                                                 | Проблема \[базового поиска\] с примерами OR, когда NEQ используется с числовыми типами                                               |
| BUG-97708              | [HIVE — 18817](https://issues.apache.org/jira/browse/HIVE-18817)                                                                                                                                                                                                                 | Исключение ArrayIndexOutOfBounds во время чтения таблицы ACID                                                             |
| BUG-97864              | [HIVE-18833](https://issues.apache.org/jira/browse/HIVE-18833)                                                                                                                                                                                                                 | Сбой автоматического объединения при выполнении вставки в каталог как вставки ORC-файла                                                               |
| BUG-97889              | [RANGER-2008](https://issues.apache.org/jira/browse/RANGER-2008)                                                                                                                                                                                                               | Оценка политики не соответствует ее многолинейным условиям                                                          |
| BUG-98655              | [RANGER-2066](https://issues.apache.org/jira/browse/RANGER-2066)                                                                                                                                                                                                               | Доступ к семейству столбцов HBase разрешен с помощью столбца с тегами в семействе столбцов                                       |
| BUG-99883              | [HIVE-19073](https://issues.apache.org/jira/browse/HIVE-19073), [HIVE-19145](https://issues.apache.org/jira/browse/HIVE-19145)                                                                                                                                                 | StatsOptimizer может изменять столбцы констант                                                                             |

**Другое**

| **Идентификатор ошибки Hortonworks** | **Apache JIRA**                                                                                                                        | **Сводка**                                                                                                                                |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------|
| BUG-100267             | [HBASE-17170](https://issues.apache.org/jira/browse/HBASE-17170)                                                                       | HBase также повторяет исключение DoNotRetryIOException из-за различий в загрузчиках классов.                                                          |
| BUG-92367              | [YARN-7558](https://issues.apache.org/jira/browse/YARN-7558)                                                                           | Нельзя выполнить команду журналов Yarn, чтобы получить журналы для запуска контейнеров при включенной проверке подлинности пользовательского интерфейса                                              |
| BUG-93159              | [OOZIE-3139](https://issues.apache.org/jira/browse/OOZIE-3139)                                                                         | Oozie неправильно проверяет рабочий процесс                                                                                                       |
| BUG-93936              | [ATLAS-2289](https://issues.apache.org/jira/browse/ATLAS-2289)                                                                         | Нужно удалить из реализации KafkaNotification встроенный код start/stop сервера kafka/zookeeper                                        |
| BUG-93942              | [ATLAS-2312](https://issues.apache.org/jira/browse/ATLAS-2312)                                                                         | Используйте объекты DateFormat ThreadLocal, чтобы избежать одновременного использования из нескольких потоков                                                         |
| BUG-93946              | [ATLAS-2319](https://issues.apache.org/jira/browse/ATLAS-2319)                                                                         | Пользовательский интерфейс: выполните обновление, чтобы удалить тег, который находится в позиции 25+ в списке тегов в структуре Flat и Tree. |
| BUG-94618              | [YARN-5037](https://issues.apache.org/jira/browse/YARN-5037), [YARN-7274](https://issues.apache.org/jira/browse/YARN-7274)             | Возможность отключить эластичность на уровне очереди конечного объекта                                                                                          |
| BUG-94901              | [HBASE-19285](https://issues.apache.org/jira/browse/HBASE-19285)                                                                       | Добавьте гистограммы задержки для каждой таблицы                                                                                                           |
| BUG-95259              | [HADOOP-15185](https://issues.apache.org/jira/browse/HADOOP-15185), [HADOOP-15186](https://issues.apache.org/jira/browse/HADOOP-15186) | Обновите соединитель ADLS, чтобы использовать текущую версию пакета SDK ADLS                                                                               |
| BUG-95619              | [HIVE-18551](https://issues.apache.org/jira/browse/HIVE-18551)                                                                         | Векторизация — VectorMapOperator пытается написать слишком много векторных столбцов для Hybrid Grace                                                   |
| BUG-97223              | [SPARK-23434](https://issues.apache.org/jira/browse/SPARK-23434)                                                                       | Spark не должен предупреждать \`каталог метаданных\` для пути к файлу HDFS                                                                          |

**Производительность**

| **Идентификатор ошибки Hortonworks** | **Apache JIRA**                                                                                                                                                                                                                                                                                                                                                                                                                                                              | **Сводка**                                                                                                                         |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------|
| BUG-83282              | [HBASE-13376](https://issues.apache.org/jira/browse/HBASE-13376), [HBASE-14473](https://issues.apache.org/jira/browse/HBASE-14473), [HBASE-15210](https://issues.apache.org/jira/browse/HBASE-15210), [HBASE-15515](https://issues.apache.org/jira/browse/HBASE-15515), [HBASE-16570](https://issues.apache.org/jira/browse/HBASE-16570), [HBASE-16810](https://issues.apache.org/jira/browse/HBASE-16810), [HBASE-18164](https://issues.apache.org/jira/browse/HBASE-18164) | Быстрое вычисление местоположения в балансировщике                                                                                               |
| BUG-91300              | [HBASE-17387](https://issues.apache.org/jira/browse/HBASE-17387)                                                                                                                                                                                                                                                                                                                                                                                                             | Уменьшите накладные расходы отчета об исключении в RegionActionResult для multi()                                                           |
| BUG-91804              | [TEZ-1526](https://issues.apache.org/jira/browse/TEZ-1526)                                                                                                                                                                                                                                                                                                                                                                                                                   | LoadingCache для TezTaskID замедляется для больших заданий                                                                                      |
| BUG-92760              | [ACCUMULO-4578](https://issues.apache.org/jira/browse/ACCUMULO-4578)                                                                                                                                                                                                                                                                                                                                                                                                         | Отмена операции FATE для сжатия не приводит к снятию блокировки пространства имен                                                                    |
| BUG-93577              | [RANGER-1938](https://issues.apache.org/jira/browse/RANGER-1938)                                                                                                                                                                                                                                                                                                                                                                                                             | Solr для настройки аудита неэффективно использует значения DocValues                                                                              |
| BUG-93910              | [HIVE — 18293](https://issues.apache.org/jira/browse/HIVE-18293)                                                                                                                                                                                                                                                                                                                                                                                                               | Hive не может сжимать таблицы, содержащиеся в папке, которая не принадлежит идентификатору, обеспечивающему работу хранилища HiveMetaStore                     |
| BUG-94345              | [HIVE — 18429](https://issues.apache.org/jira/browse/HIVE-18429)                                                                                                                                                                                                                                                                                                                                                                                                               | Сжатие должно обработать пример при отсутствии выходных данных                                                                          |
| BUG-94381              | [HADOOP-13227](https://issues.apache.org/jira/browse/HADOOP-13227), [HDFS-13054](https://issues.apache.org/jira/browse/HDFS-13054)                                                                                                                                                                                                                                                                                                                                           | Обработка порядка RetryAction RequestHedgingProxyProvider: FAIL &lt; RETRY &lt; FAILOVER\_AND\_RETRY.                                  |
| BUG-94432              | [HIVE — 18353](https://issues.apache.org/jira/browse/HIVE-18353)                                                                                                                                                                                                                                                                                                                                                                                                               | CompactorMR должен вызвать метод jobclient.close() для активации очистки                                                                        |
| BUG-94869              | [PHOENIX-4290](https://issues.apache.org/jira/browse/PHOENIX-4290), [PHOENIX-4373](https://issues.apache.org/jira/browse/PHOENIX-4373)                                                                                                                                                                                                                                                                                                                                       | Запрошенная строка за пределами диапазона для Get в HRegion для локальной индексированной таблицы Phoenix со случайными данными                                               |
| BUG-94928              | [HDFS-11078](https://issues.apache.org/jira/browse/HDFS-11078)                                                                                                                                                                                                                                                                                                                                                                                                               | Исправьте NPE в LazyPersistFileScrubber                                                                                                  |
| BUG-94964              | [HIVE-18269](https://issues.apache.org/jira/browse/HIVE-18269), [HIVE-18318](https://issues.apache.org/jira/browse/HIVE-18318), [HIVE-18326](https://issues.apache.org/jira/browse/HIVE-18326)                                                                                                                                                                                                                                                                               | Несколько исправлений LLAP                                                                                                                 |
| BUG-95669              | [HIVE-18577](https://issues.apache.org/jira/browse/HIVE-18577), [HIVE-18643](https://issues.apache.org/jira/browse/HIVE-18643)                                                                                                                                                                                                                                                                                                                                               | При запуске запроса на обновление или удаление в секционированной таблице ACID HS2 считывает все разделы                                               |
| BUG-96390              | [HDFS-10453](https://issues.apache.org/jira/browse/HDFS-10453)                                                                                                                                                                                                                                                                                                                                                                                                               | Поток ReplicationMonitor мог зависнуть на длительное время из-за гонки между репликацией и удалением одного и того же файла в большом кластере. |
| BUG-96625              | [HIVE-16110](https://issues.apache.org/jira/browse/HIVE-16110)                                                                                                                                                                                                                                                                                                                                                                                                               | Отмена изменения "Векторизация: включение поддержки CASE WHEN с двумя значениями вместо возврата к VectorUDFAdaptor"                                       |
| BUG-97109              | [HIVE — 16757](https://issues.apache.org/jira/browse/HIVE-16757)                                                                                                                                                                                                                                                                                                                                                                                                               | Использование устаревшего метода getRows() вместо нового estimateRowCount(RelMetadataQuery...) оказывает серьезное влияние на производительность                      |
| BUG-97110              | [PHOENIX-3789](https://issues.apache.org/jira/browse/PHOENIX-3789)                                                                                                                                                                                                                                                                                                                                                                                                           | Выполните вызовы обслуживания межрегионального индекса в postBatchMutateIndispensably                                                        |
| BUG-98833              | [YARN-6797](https://issues.apache.org/jira/browse/YARN-6797)                                                                                                                                                                                                                                                                                                                                                                                                                 | TimelineWriter не полностью использует ответ POST                                                                             |
| BUG-98931              | [ATLAS-2491](https://issues.apache.org/jira/browse/ATLAS-2491)                                                                                                                                                                                                                                                                                                                                                                                                               | Обновите обработчик Hive для использования уведомлений Atlas v2                                                                                      |

**Потенциальная потеря данных**

| **Идентификатор ошибки Hortonworks** | **Apache JIRA**                                                  | **Сводка**                                                       |
|------------------------|------------------------------------------------------------------|-------------------------------------------------------------------|
| BUG-95613              | [HBASE – 18808](https://issues.apache.org/jira/browse/HBASE-18808) | Неэффективная проверка конфигурации в BackupLogCleaner\#getDeletableFiles() |
| BUG-97051              | [HIVE-17403](https://issues.apache.org/jira/browse/HIVE-17403)   | Сбой объединения для неуправляемых и транзакционных таблиц         |
| BUG-97787              | [HIVE-18460](https://issues.apache.org/jira/browse/HIVE-18460)   | Уплотнитель не передает свойства таблицы средству записи ORC         |
| BUG-97788              | [HIVE-18613](https://issues.apache.org/jira/browse/HIVE-18613)   | Продлите JsonSerDe для поддержки типа BINARY                           |

**Сбой запроса**

| **Идентификатор ошибки Hortonworks** | **Apache JIRA**                                                                                                                        | **Сводка**                                                                                            |
|------------------------|----------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------|
| BUG-100180             | [CALCITE-2232](https://issues.apache.org/jira/browse/CALCITE-2232)                                                                     | Ошибка утверждения в AggregatePullUpConstantsRule при настройке агрегированных индексов                      |
| BUG-100422             | [HIVE-19085](https://issues.apache.org/jira/browse/HIVE-19085)                                                                         | FastHiveDecimal abs(0) задает знак +ve                                                                |
| BUG-100834             | [PHOENIX-4658](https://issues.apache.org/jira/browse/PHOENIX-4658)                                                                     | Исключение IllegalStateException: requestSeek нельзя вызвать в ReversedKeyValueHeap                            |
| BUG-102078             | [HIVE-17978](https://issues.apache.org/jira/browse/HIVE-17978)                                                                         | Запросы TPCDS 58 и 83 создают исключения в векторизации                                          |
| BUG-92483              | [HIVE-17900](https://issues.apache.org/jira/browse/HIVE-17900)                                                                         | Проанализируйте статистические данные в столбцах. Если они активированы с помощью уплотнителя, будет создан SQL неправильного формата с более чем 1 столбцом раздела   |
| BUG-93135              | [HIVE-15874](https://issues.apache.org/jira/browse/HIVE-15874), [HIVE-18189](https://issues.apache.org/jira/browse/HIVE-18189)         | Запрос Hive возвращает неправильные результаты, если для псевдонима hive.groupby.orderby.position.alias установлено значение true                |
| BUG-93136              | [HIVE-18189](https://issues.apache.org/jira/browse/HIVE-18189)                                                                         | Упорядочение по позиции не выполняется при отключенной оптимизации с учетом затрат                                                   |
| BUG-93595              | [HIVE-12378](https://issues.apache.org/jira/browse/HIVE-12378), [HIVE-15883](https://issues.apache.org/jira/browse/HIVE-15883)         | Сопоставленная таблица HBase в Hive INSERT не подходит для десятичных и двоичных столбцов                                  |
| BUG-94007              | [PHOENIX-1751](https://issues.apache.org/jira/browse/PHOENIX-1751), [PHOENIX-3112](https://issues.apache.org/jira/browse/PHOENIX-3112) | Запросы Phoenix возвращают значения NULL из-за частично выполненных строк HBase                                          |
| BUG-94144              | [HIVE-17063](https://issues.apache.org/jira/browse/HIVE-17063)                                                                         | не удается вставить секцию перезаписи во внешнюю таблицу, если сначала удалить секцию                        |
| BUG-94280              | [HIVE-12785](https://issues.apache.org/jira/browse/HIVE-12785)                                                                         | С помощью типа объединения и определяемой пользователем функции \`просмотрите\` неработоспособность структуры                                          |
| BUG-94505              | [PHOENIX-4525](https://issues.apache.org/jira/browse/PHOENIX-4525)                                                                     | Переполнение целого числа в выполнении GroupBy                                                                  |
| BUG-95618              | [HIVE — 18506](https://issues.apache.org/jira/browse/HIVE-18506)                                                                         | Формат LlapBaseInputFormat — отрицательный индекс массива                                                             |
| BUG-95644              | [HIVE-9152](https://issues.apache.org/jira/browse/HIVE-9152)                                                                           | Формат CombineHiveInputFormat: сбой запроса Hive в Tez с исключением java.lang.IllegalArgumentException |
| BUG-96762              | [PHOENIX-4588](https://issues.apache.org/jira/browse/PHOENIX-4588)                                                                     | Также выражение клона, если дочерние элементы включают вызов Determinism.PER\_INVOCATION                                |
| BUG-97145              | [HIVE-12245](https://issues.apache.org/jira/browse/HIVE-12245), [HIVE-17829](https://issues.apache.org/jira/browse/HIVE-17829)         | Включите поддержку комментариев в столбце для архивной таблицы HBase                                                      |
| BUG-97741              | [HIVE — 18944](https://issues.apache.org/jira/browse/HIVE-18944)                                                                         | Во время DPP было неправильно задано позицию наборов группирования                                                  |
| BUG-98082              | [HIVE-18597](https://issues.apache.org/jira/browse/HIVE-18597)                                                                         | LLAP — всегда включайте в пакет JAR-файл API log4j2 для org.apache.log4j                                           |
| BUG-99849              | Недоступно                                                                                                                                    | При создании таблицы из файла мастер попытается использовать базу данных по умолчанию                                    |

**Безопасность**

| **Идентификатор ошибки Hortonworks** | **Apache JIRA**                                                                                                                                                                                            | **Сводка**                                                                                                           |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------------------------------------------------|
| BUG-100436             | [RANGER-2060](https://issues.apache.org/jira/browse/RANGER-2060)                                                                                                                                           | Прокси-сервер Knox с единым входом Knox для Ranger не работает                                                                    |
| BUG-101038             | [SPARK-24062](https://issues.apache.org/jira/browse/SPARK-24062)                                                                                                                                           | Ошибка интерпретатора %Spark Zeppelin "В подключении отказано". Ошибка в HiveThriftServer "Необходимо указать секретный ключ..." |
| BUG-101359             | [ACCUMULO-4056](https://issues.apache.org/jira/browse/ACCUMULO-4056)                                                                                                                                       | Обновите общедоступную коллекцию до версии 3.2.2 при выпуске                                                           |
| BUG-54240              | [HIVE — 18879](https://issues.apache.org/jira/browse/HIVE-18879)                                                                                                                                             | Запретите работу внедренного элемента в UDFXPathUtil при наличии в пути класса файла xercesImpl.jar                                |
| BUG-79059              | [OOZIE-3109](https://issues.apache.org/jira/browse/OOZIE-3109)                                                                                                                                             | Не используйте специальные знаки HTML потоковой передачи журнала                                                                       |
| BUG-90041              | [OOZIE-2723](https://issues.apache.org/jira/browse/OOZIE-2723)                                                                                                                                             | Лицензией JSON.org теперь является CatX                                                                                          |
| BUG-93754              | [RANGER-1943](https://issues.apache.org/jira/browse/RANGER-1943)                                                                                                                                           | Авторизация Ranger Solr пропускается, если коллекция пуста или содержит значение NULL                                                 |
| BUG-93804              | [HIVE-17419](https://issues.apache.org/jira/browse/HIVE-17419)                                                                                                                                             | При выполнении команды ANALYZE TABLE...COMPUTE STATISTICS FOR COLUMNS отображается вычисленная статистика для маскированных таблиц                         |
| BUG-94276              | [ZEPPELIN-3129](https://issues.apache.org/jira/browse/ZEPPELIN-3129)                                                                                                                                       | Пользовательский интерфейс Zeppelin не выходит из системы в IE                                                                                    |
| BUG-95349              | [ZOOKEEPER-1256](https://issues.apache.org/jira/browse/ZOOKEEPER-1256), [ZOOKEEPER-1901](https://issues.apache.org/jira/browse/ZOOKEEPER-1901)                                                             | Обновите netty                                                                                                         |
| BUG-95483              | Недоступно                                                                                                                                                                                                        | Исправление для CVE-2017-15713                                                                                                |
| BUG-95646              | [OOZIE-3167](https://issues.apache.org/jira/browse/OOZIE-3167)                                                                                                                                             | Обновите версию Tomcat в ветви Oozie 4.3                                                                            |
| BUG-95823              | Недоступно                                                                                                                                                                                                        | Knox: обновите утилиты компонента                                                                                               |
| BUG-95908              | [RANGER-1960](https://issues.apache.org/jira/browse/RANGER-1960)                                                                                                                                           | Авторизация HBase не учитывает пространство имен таблицы для удаления моментального снимка                                     |
| BUG-96191              | [FALCON-2322](https://issues.apache.org/jira/browse/FALCON-2322), [FALCON-2323](https://issues.apache.org/jira/browse/FALCON-2323)                                                                         | Обновите версии Jackson и Spring во избежание возникновения уязвимостей системы безопасности                                                 |
| BUG-96502              | [RANGER-1990](https://issues.apache.org/jira/browse/RANGER-1990)                                                                                                                                           | Добавьте одностороннюю поддержку MySQL SSL для администратора Ranger                                                                         |
| BUG-96712              | [FLUME-3194](https://issues.apache.org/jira/browse/FLUME-3194)                                                                                                                                             | Обновите Derby до последней версии (1.14.1.0)                                                                        |
| BUG-96713              | [FLUME-2678](https://issues.apache.org/jira/browse/FLUME-2678)                                                                                                                                             | Обновите Xalan до версии 2.7.2 во избежание возникновения уязвимостей CVE-2014-0107                                                    |
| BUG-96714              | [FLUME-2050](https://issues.apache.org/jira/browse/FLUME-2050)                                                                                                                                             | Обновите до log4j2 (при общедоступной версии)                                                                                           |
| BUG-96737              | Недоступно                                                                                                                                                                                                        | Используйте методы файловой системы ввода-вывода Java для доступа к локальным файлам                                                                  |
| BUG-96925              | Недоступно                                                                                                                                                                                                        | Обновите в Hadoop Tomcat с версии 6.0.48 до 6.0.53                                                                        |
| BUG-96977              | [FLUME-3132](https://issues.apache.org/jira/browse/FLUME-3132)                                                                                                                                             | Обновите зависимости библиотеки Jasper Tomcat                                                                            |
| BUG-97022              | [HADOOP-14799](https://issues.apache.org/jira/browse/HADOOP-14799), [HADOOP-14903](https://issues.apache.org/jira/browse/HADOOP-14903), [HADOOP-15265](https://issues.apache.org/jira/browse/HADOOP-15265) | Обновление библиотеки Nimbus-JOSE-JWT с версией выше 4.39                                                             |
| BUG-97101              | [RANGER-1988](https://issues.apache.org/jira/browse/RANGER-1988)                                                                                                                                           | Исправьте небезопасную случайность                                                                                               |
| BUG-97178              | [ATLAS-2467](https://issues.apache.org/jira/browse/ATLAS-2467)                                                                                                                                             | Обновление зависимости для Spring и Nimbus-JOSE-JWT                                                                     |
| BUG-97180              | Недоступно                                                                                                                                                                                                        | Обновите Nimbus-JOSE-JWT                                                                                               |
| BUG-98038              | [HIVE — 18788](https://issues.apache.org/jira/browse/HIVE-18788)                                                                                                                                             | Очистите входные данные в инструкции PreparedStatement в JDBC                                                                             |
| BUG-98353              | [HADOOP-13707](https://issues.apache.org/jira/browse/HADOOP-13707)                                                                                                                                         | Отмените изменение "Если включен Kerberos, а механизм HTTP SPNEGO не настроен, некоторые ссылки будут недоступны"                 |
| BUG-98372              | [HBASE – 13848](https://issues.apache.org/jira/browse/HBASE-13848)                                                                                                                                           | Получите доступ к паролям SSL InfoServer с помощью API поставщика учетных данных                                                        |
| BUG-98385              | [ATLAS-2500](https://issues.apache.org/jira/browse/ATLAS-2500)                                                                                                                                             | Добавьте дополнительные заголовки в ответ Atlas                                                                             |
| BUG-98564              | [HADOOP-14651](https://issues.apache.org/jira/browse/HADOOP-14651)                                                                                                                                         | Обновите OkHttp до версии 2.7.5                                                                                        |
| BUG-99440              | [RANGER-2045](https://issues.apache.org/jira/browse/RANGER-2045)                                                                                                                                           | При выполнении команды desc table будут перечислены столбцы таблицы Hive без явной политики разрешения                                 |
| BUG-99803              | Недоступно                                                                                                                                                                                                        | Oozie должен отключить загрузку динамического класса HBase                                                                      |

**Стабильность**

| **Идентификатор ошибки Hortonworks** | **Apache JIRA**                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            | **Сводка**                                                                                                                                    |
|------------------------|------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------------------------------------------------------------------------------------------------------------------------------------|
| BUG-100040             | [ATLAS-2536](https://issues.apache.org/jira/browse/ATLAS-2536)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | NPE в обработчике Atlas Hive                                                                                                                         |
| BUG-100057             | [HIVE-19251](https://issues.apache.org/jira/browse/HIVE-19251)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Уведомление ObjectStore.getNextNotification с LIMIT должно использовать меньше памяти                                                                              |
| BUG-100072             | [HIVE-19130](https://issues.apache.org/jira/browse/HIVE-19130)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | NPE вызывается при применении события удаления раздела REPL LOAD.                                                                                     |
| BUG-100073             | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Слишком много подключений close\_wait connections с сервера Hive на узел данных                                                                                   |
| BUG-100319             | [HIVE-19248](https://issues.apache.org/jira/browse/HIVE-19248)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | REPL LOAD не вызывает ошибку при сбое копирования файла                                                                                              |
| BUG-100352             | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | CLONE — логика удаления RM слишком часто сканирует Znode реестра                                                                                  |
| BUG-100427             | [HIVE-19249](https://issues.apache.org/jira/browse/HIVE-19249)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Репликация: во всех случаях предложение WITH неправильно передает конфигурацию                                                       |
| BUG-100430             | [HIVE-14483](https://issues.apache.org/jira/browse/HIVE-14483)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | java.lang.ArrayIndexOutOfBoundsException org.apache.orc.impl.TreeReaderFactory\$BytesColumnVectorUtil.commonReadByteArrays                     |
| BUG-100432             | [HIVE-19219](https://issues.apache.org/jira/browse/HIVE-19219)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Инкрементный REPL DUMP должен вызывать ошибку, если запрашиваемые события очищаются.                                                                   |
| BUG-100448             | [SPARK-23637](https://issues.apache.org/jira/browse/SPARK-23637), [SPARK-23802](https://issues.apache.org/jira/browse/SPARK-23802), [SPARK-23809](https://issues.apache.org/jira/browse/SPARK-23809), [SPARK-23816](https://issues.apache.org/jira/browse/SPARK-23816), [SPARK-23822](https://issues.apache.org/jira/browse/SPARK-23822), [SPARK-23823](https://issues.apache.org/jira/browse/SPARK-23823), [SPARK-23838](https://issues.apache.org/jira/browse/SPARK-23838), [SPARK-23881](https://issues.apache.org/jira/browse/SPARK-23881)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Обновите Spark2 до версии 2.3.0+ (4/11)                                                                                                                 |
| BUG-100740             | [HIVE-16107](https://issues.apache.org/jira/browse/HIVE-16107)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | JDBC: клиент HttpClient должен выполнить повторную попытку в исключении NoHttpResponseException                                                                         |
| BUG-100810             | [HIVE-19054](https://issues.apache.org/jira/browse/HIVE-19054)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Сбой репликации функций Hive                                                                                                               |
| BUG-100937             | [MAPREDUCE-6889](https://issues.apache.org/jira/browse/MAPREDUCE-6889)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                     | Добавьте API Job\#close, чтобы завершить работу клиентских служб MR                                                                                             |
| BUG-101065             | [ATLAS-2587](https://issues.apache.org/jira/browse/ATLAS-2587)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Установите список управления доступом с правом на чтение для ZNode /apache\_atlas/active\_server\_info в общедоступном регионе для прокси-сервера Knox                                                       |
| BUG-101093             | [STORM-2993](https://issues.apache.org/jira/browse/STORM-2993)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Объект Bolt Storm HDFS вызывает исключение ClosedChannelException при использовании политики ротации времени                                                                |
| BUG-101181             | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Обработчик PhoenixStorageHandler неправильно обрабатывает оператор AND в предикате                                                                                |
| BUG-101266             | [PHOENIX-4635](https://issues.apache.org/jira/browse/PHOENIX-4635)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Утечка подключения HBase в формате org.apache.phoenix.hive.mapreduce.PhoenixInputFormat                                                                  |
| BUG-101458             | [HIVE-11464](https://issues.apache.org/jira/browse/HIVE-11464)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Сведения о журнале преобразований отсутствуют при наличии нескольких выходных данных                                                                                             |
| BUG-101485             | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Thrift API хранилища метаданных Hive работает медленно и вызывает истечение времени ожидания клиента                                                                                   |
| BUG-101628             | [HIVE-19331](https://issues.apache.org/jira/browse/HIVE-19331)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Не удалось выполнить добавочную репликацию Hive в облако                                                                                                  |
| BUG-102048             | [HIVE-19381](https://issues.apache.org/jira/browse/HIVE-19381)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | FunctionTask: сбой репликации функции Hive в облако                                                                                     |
| BUG-102064             | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Сбой проверок репликации Hive \[из локальной среды в локальную\] в задаче ReplCopyTask                                                                           |
| BUG-102137             | [HIVE-19423](https://issues.apache.org/jira/browse/HIVE-19423)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Сбой проверок репликации Hive \[из локальной среды в облачную\] в задаче ReplCopyTask                                                                            |
| BUG-102305             | [HIVE-19430](https://issues.apache.org/jira/browse/HIVE-19430)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Дампы нехватки памяти хранилища метаданных Hive и HS2                                                                                                               |
| BUG-102361             | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Множественные результаты вставки в одной вставке, реплицированной в целевой кластер Hive (локально, S3)                                                     |
| BUG-87624              | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Включение ведения журнала событий Storm постоянно выводит из строя рабочие роли                                                                                |
| BUG-88929              | [HBASE – 15615](https://issues.apache.org/jira/browse/HBASE-15615)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Неправильное время перехода в спящий режим при необходимости повторной попытки RegionServerCallable                                                                                          |
| BUG-89628              | [HIVE-17613](https://issues.apache.org/jira/browse/HIVE-17613)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Удалите пулы объекта для коротких распределений с одним потоком                                                                                         |
| BUG-89813              | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | SCA. Правильность кода: несинхронизированный метод переопределяет синхронизированный                                                                  |
| BUG-90437              | [ZEPPELIN-3072](https://issues.apache.org/jira/browse/ZEPPELIN-3072)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Пользовательский интерфейс Zeppelin медленно работает или не отвечает при большом количестве записных книжек                                                                          |
| BUG-90640              | [HBASE – 19065](https://issues.apache.org/jira/browse/HBASE-19065)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Метод HRegion\#bulkLoadHFiles() должен ожидать завершения параллельного метода Region\#flush()                                                                 |
| BUG-91202              | [HIVE — 17013](https://issues.apache.org/jira/browse/HIVE-17013)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Удалите запрос с вложенным запросом на основе выбора над представлением                                                                                     |
| BUG-91350              | [KNOX-1108](https://issues.apache.org/jira/browse/KNOX-1108)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Сбой отработки отказа NiFiHaDispatch                                                                                                                |
| BUG-92054              | [HIVE-13120](https://issues.apache.org/jira/browse/HIVE-13120)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | При генерации разделов ORC распространите Doas                                                                                                      |
| BUG-92373              | [FALCON-2314](https://issues.apache.org/jira/browse/FALCON-2314)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Активируйте TestNG версии 6.13.1 во избежание зависимости BeanShell                                                                                    |
| BUG-92381              | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | сбой UT testContainerLogsWithNewAPI и testContainerLogsWithOldAPI                                                                           |
| BUG-92389              | [STORM-2841](https://issues.apache.org/jira/browse/STORM-2841)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Сбой UT testNoAcksIfFlushFails с исключением NullPointerException                                                                                      |
| BUG-92586              | [SPARK 17920](https://issues.apache.org/jira/browse/SPARK-17920), [SPARK 20694](https://issues.apache.org/jira/browse/SPARK-20694), [SPARK 21642](https://issues.apache.org/jira/browse/SPARK-21642), [SPARK 22162](https://issues.apache.org/jira/browse/SPARK-22162), [SPARK 22289](https://issues.apache.org/jira/browse/SPARK-22289), [SPARK 22373](https://issues.apache.org/jira/browse/SPARK-22373), [SPARK 22495](https://issues.apache.org/jira/browse/SPARK-22495), [SPARK 22574](https://issues.apache.org/jira/browse/SPARK-22574), [SPARK 22591](https://issues.apache.org/jira/browse/SPARK-22591), [SPARK 22595](https://issues.apache.org/jira/browse/SPARK-22595), [SPARK 22601](https://issues.apache.org/jira/browse/SPARK-22601), [SPARK 22603](https://issues.apache.org/jira/browse/SPARK-22603), [SPARK 22607](https://issues.apache.org/jira/browse/SPARK-22607), [SPARK 22635](https://issues.apache.org/jira/browse/SPARK-22635), [SPARK 22637](https://issues.apache.org/jira/browse/SPARK-22637), [SPARK 22653](https://issues.apache.org/jira/browse/SPARK-22653), [SPARK 22654](https://issues.apache.org/jira/browse/SPARK-22654), [SPARK 22686](https://issues.apache.org/jira/browse/SPARK-22686), [SPARK 22688](https://issues.apache.org/jira/browse/SPARK-22688), [SPARK 22817](https://issues.apache.org/jira/browse/SPARK-22817), [SPARK 22862](https://issues.apache.org/jira/browse/SPARK-22862), [SPARK 22889](https://issues.apache.org/jira/browse/SPARK-22889), [SPARK 22972](https://issues.apache.org/jira/browse/SPARK-22972), [SPARK 22975](https://issues.apache.org/jira/browse/SPARK-22975), [SPARK 22982](https://issues.apache.org/jira/browse/SPARK-22982), [SPARK 22983](https://issues.apache.org/jira/browse/SPARK-22983), [SPARK 22984](https://issues.apache.org/jira/browse/SPARK-22984), [SPARK 23001](https://issues.apache.org/jira/browse/SPARK-23001), [SPARK 23038](https://issues.apache.org/jira/browse/SPARK-23038), [SPARK 23095](https://issues.apache.org/jira/browse/SPARK-23095) | Обновите Spark2 до последней версии 2.2.1 (январь, 16)                                                                                                    |
| BUG-92680              | [ATLAS-2288](https://issues.apache.org/jira/browse/ATLAS-2288)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Исключение NoClassDefFoundError при выполнении скрипта Hive импорта при создании таблицы HBase через Hive                                           |
| BUG-92760              | [ACCUMULO-4578](https://issues.apache.org/jira/browse/ACCUMULO-4578)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Отмена операции FATE для сжатия не приводит к снятию блокировки пространства имен                                                                               |
| BUG-92797              | [HDFS-10267](https://issues.apache.org/jira/browse/HDFS-10267), [HDFS-8496](https://issues.apache.org/jira/browse/HDFS-8496)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Снижение конфликтов блокировки узла данных в определенных случаях                                                                                    |
| BUG-92813              | [FLUME-2973](https://issues.apache.org/jira/browse/FLUME-2973)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Взаимоблокировка в приемнике HDFS                                                                                                                          |
| BUG-92957              | [HIVE-11266](https://issues.apache.org/jira/browse/HIVE-11266)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Неправильный результат count(\*), основанный на статистике таблицы для внешних таблиц                                                                           |
| BUG-93018              | [ATLAS-2310](https://issues.apache.org/jira/browse/ATLAS-2310)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | В режиме высокой доступности пассивный узел перенаправляет запрос с неправильной кодировкой URL-адреса                                                                          |
| BUG-93116              | [RANGER-1957](https://issues.apache.org/jira/browse/RANGER-1957)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Синхронизация пользователей Ranger не выполняет периодическую синхронизацию пользователей или групп при включенной добавочной синхронизации                                                  |
| BUG-93361              | [HIVE-12360](https://issues.apache.org/jira/browse/HIVE-12360)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Некорректный поиск в ORC без сжатия с включением предиката                                                                                           |
| BUG-93426              | [CALCITE-2086](https://issues.apache.org/jira/browse/CALCITE-2086)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | HTTP/413 в некоторых случаях из-за больших заголовков авторизации                                                                           |
| BUG-93429              | [PHOENIX-3240](https://issues.apache.org/jira/browse/PHOENIX-3240)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Исключение ClassCastException из загрузчика Pig                                                                                                             |
| BUG-93485              | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Не удается получить исключение таблицы mytestorg.apache.hadoop.hive.ql.metadata.InvalidTableException: не удалось найти таблицу при запуске таблицы анализа в столбцах в LLAP |
| BUG-93512              | [PHOENIX-4466](https://issues.apache.org/jira/browse/PHOENIX-4466)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Исключение java.lang.RuntimeException — код отклика 500 — выполнение задания Spark для подключения к серверу запросов Phoenix и загрузки данных                         |
| BUG-93550              | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Zeppelin %spark.r не работает со spark1 из-за несоответствия версии Scala                                                                      |
| BUG-93910              | [HIVE — 18293](https://issues.apache.org/jira/browse/HIVE-18293)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Hive не может сжимать таблицы, содержащиеся в папке, которая не принадлежит идентификатору, обеспечивающему работу хранилища HiveMetaStore                                |
| BUG-93926              | [ZEPPELIN-3114](https://issues.apache.org/jira/browse/ZEPPELIN-3114)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Записные книжки и интерпретаторы не сохраняются в Zeppelin после &gt; одномерного нагрузочного тестирования                                                       |
| BUG-93932              | [ATLAS-2320](https://issues.apache.org/jira/browse/ATLAS-2320)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Классификация "\*" с запросом вызывает исключение внутреннего сервера 500                                                                           |
| BUG-93948              | [YARN-7697](https://issues.apache.org/jira/browse/YARN-7697)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | NM выходит из строя с OOM из-за утечки в объединении журналов (часть\#1)                                                                                 |
| BUG-93965              | [ATLAS-2229](https://issues.apache.org/jira/browse/ATLAS-2229)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Поиск DSL: атрибут нестроковой последовательности orderby вызывает исключение                                                                                     |
| BUG-93986              | [YARN-7697](https://issues.apache.org/jira/browse/YARN-7697)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | NM выходит из строя с OOM из-за утечки в объединении журналов (часть\#2)                                                                                 |
| BUG-94030              | [ATLAS-2332](https://issues.apache.org/jira/browse/ATLAS-2332)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Сбой создания типа с атрибутами с вложенным типом данных коллекции                                                                       |
| BUG-94080              | [YARN-3742](https://issues.apache.org/jira/browse/YARN-3742), [YARN-6061](https://issues.apache.org/jira/browse/YARN-6061)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Оба RM находятся в режиме ожидания в защищенном кластере                                                                                                       |
| BUG-94081              | [HIVE — 18384](https://issues.apache.org/jira/browse/HIVE-18384)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Исключение ConcurrentModificationException в библиотеке log4j2.x                                                                                            |
| BUG-94168              | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Yarn RM, вышедший из строя с реестром службы, содержит ошибку неправильного состояния                                                                                |
| BUG-94330              | [HADOOP-13190](https://issues.apache.org/jira/browse/HADOOP-13190), [HADOOP-14104](https://issues.apache.org/jira/browse/HADOOP-14104), [HADOOP-14814](https://issues.apache.org/jira/browse/HADOOP-14814), [HDFS-10489](https://issues.apache.org/jira/browse/HDFS-10489), [HDFS-11689](https://issues.apache.org/jira/browse/HDFS-11689)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | HDFS должен поддерживать несколько URI сервера управления ключами                                                                                                      |
| BUG-94345              | [HIVE — 18429](https://issues.apache.org/jira/browse/HIVE-18429)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Сжатие должно обработать пример при отсутствии выходных данных                                                                                     |
| BUG-94372              | [ATLAS-2229](https://issues.apache.org/jira/browse/ATLAS-2229)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Запрос DSL: hive\_table name = \["t1","t2"\] вызывает исключение недействительного запроса DSL                                                                |
| BUG-94381              | [HADOOP-13227](https://issues.apache.org/jira/browse/HADOOP-13227), [HDFS-13054](https://issues.apache.org/jira/browse/HDFS-13054)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Обработка порядка RetryAction RequestHedgingProxyProvider: FAIL &lt; RETRY &lt; FAILOVER\_AND\_RETRY.                                             |
| BUG-94432              | [HIVE — 18353](https://issues.apache.org/jira/browse/HIVE-18353)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | CompactorMR должен вызвать метод jobclient.close() для активации очистки                                                                                   |
| BUG-94575              | [SPARK-22587](https://issues.apache.org/jira/browse/SPARK-22587)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Задание Spark завершается сбоем, если URL-адреса fs.defaultFS и JAR-файла приложения не совпадают.                                                                          |
| BUG-94791              | [SPARK-22793](https://issues.apache.org/jira/browse/SPARK-22793)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Утечка памяти на сервере Thrift Spark                                                                                                             |
| BUG-94928              | [HDFS-11078](https://issues.apache.org/jira/browse/HDFS-11078)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Исправьте NPE в LazyPersistFileScrubber                                                                                                             |
| BUG-95013              | [HIVE-18488](https://issues.apache.org/jira/browse/HIVE-18488)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | У средств чтения LLAP ORC отсутствуют некоторые проверки значений NULL                                                                                                  |
| BUG-95077              | [HIVE-14205](https://issues.apache.org/jira/browse/HIVE-14205)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Hive не поддерживает тип объединения с файлом формата AVRO                                                                                          |
| BUG-95200              | [HDFS-13061](https://issues.apache.org/jira/browse/HDFS-13061)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | SaslDataTransferClient\#checkTrustAndSend не должен доверять частично доверенному каналу                                                         |
| BUG-95201              | [HDFS-13060](https://issues.apache.org/jira/browse/HDFS-13060)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Добавление BlacklistBasedTrustedChannelResolver для TrustedChannelResolver                                                                       |
| BUG-95284              | [HBASE-19395](https://issues.apache.org/jira/browse/HBASE-19395)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | \[branch-1\] ошибка разделения TestEndToEndSplitTransaction.testMasterOpsWhileSplitting с NPE                                                           |
| BUG-95301              | [HIVE — 18517](https://issues.apache.org/jira/browse/HIVE-18517)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Векторизация — исправьте VectorMapOperator для приема VRB и проверьте правильное расположение векторизованного флага для поддержки кэширования LLAP                                |
| BUG-95542              | [HBASE – 16135](https://issues.apache.org/jira/browse/HBASE-16135)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Узел PeerClusterZnode в RS удаленного кэширующего узла никогда не удаляется                                                                                 |
| BUG-95595              | [HIVE-15563](https://issues.apache.org/jira/browse/HIVE-15563)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Проигнорируйте исключение перехода состояния недопустимой операции в запросе SQLOperation.runQuery, чтобы предоставить реальное исключение                                         |
| BUG-95596              | [YARN-4126](https://issues.apache.org/jira/browse/YARN-4126), [YARN-5750](https://issues.apache.org/jira/browse/YARN-5750)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Сбой TestClientRMService                                                                                                                      |
| BUG-96019              | [HIVE — 18548](https://issues.apache.org/jira/browse/HIVE-18548)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Исправьте импорт log4j                                                                                                                               |
| BUG-96196              | [HDFS-13120](https://issues.apache.org/jira/browse/HDFS-13120)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Инструмент сравнения моментального снимка мог быть поврежден после объединения                                                                                                  |
| BUG-96289              | [HDFS-11701](https://issues.apache.org/jira/browse/HDFS-11701)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | NPE с неразрешенного узла вызывает постоянные сбои DFSInputStream                                                                              |
| BUG-96291              | [STORM-2652](https://issues.apache.org/jira/browse/STORM-2652)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Исключение, вызванное в открытом методе JmsSpout                                                                                                       |
| BUG-96363              | [HIVE-18959](https://issues.apache.org/jira/browse/HIVE-18959)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Не следует создавать дополнительный пул потоков в LLAP                                                                                               |
| BUG-96390              | [HDFS-10453](https://issues.apache.org/jira/browse/HDFS-10453)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Поток ReplicationMonitor мог зависнуть на длительное время из-за гонки между репликацией и удалением одного и того же файла в большом кластере            |
| BUG-96454              | [YARN-4593](https://issues.apache.org/jira/browse/YARN-4593)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Взаимоблокировка в методе AbstractService.getConfig()                                                                                                        |
| BUG-96704              | [FALCON-2322](https://issues.apache.org/jira/browse/FALCON-2322)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Исключение ClassCastException при отправке канала submitAndSchedule                                                                                                |
| BUG-96720              | [SLIDER-1262](https://issues.apache.org/jira/browse/SLIDER-1262)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Сбой тестов функций Slider в среде Kerberos                                                                                         |
| BUG-96931              | [SPARK 23053](https://issues.apache.org/jira/browse/SPARK-23053), [SPARK 23186](https://issues.apache.org/jira/browse/SPARK-23186), [SPARK 23230](https://issues.apache.org/jira/browse/SPARK-23230), [SPARK 23358](https://issues.apache.org/jira/browse/SPARK-23358), [SPARK 23376](https://issues.apache.org/jira/browse/SPARK-23376), [SPARK 23391](https://issues.apache.org/jira/browse/SPARK-23391)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                 | Обновите Spark2 до последней версии (февраль, 19)                                                                                                             |
| BUG-97067              | [HIVE-10697](https://issues.apache.org/jira/browse/HIVE-10697)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | ObjectInspectorConvertors\#UnionConvertor выполняет ошибочное преобразование                                                                             |
| BUG-97244              | [KNOX-1083](https://issues.apache.org/jira/browse/KNOX-1083)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Время ожидания по умолчанию HttpClient должно представлять собой допустимое значение                                                                                          |
| BUG-97459              | [ZEPPELIN-3271](https://issues.apache.org/jira/browse/ZEPPELIN-3271)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                       | Параметр отключения планировщика                                                                                                                 |
| BUG-97511              | [KNOX-1197](https://issues.apache.org/jira/browse/KNOX-1197)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Анонимаусаусфилтер не добавляется, если проверка подлинности анонимна в службе                                                                      |
| BUG-97601              | [HIVE-17479](https://issues.apache.org/jira/browse/HIVE-17479)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Промежуточные каталоги не очищаются для запросов обновления и удаления                                                                            |
| BUG-97605              | [HIVE-18858](https://issues.apache.org/jira/browse/HIVE-18858)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Свойства системы в конфигурации задания не разрешены при отправке задания MR                                                                     |
| BUG-97674              | [OOZIE-3186](https://issues.apache.org/jira/browse/OOZIE-3186)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Oozie не может использовать конфигурацию, связанную с помощью jceks://file/...                                                                             |
| BUG-97743              | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Исключение java.lang.NoClassDefFoundError при развертывании топологии Storm                                                                        |
| BUG-97756              | [PHOENIX-4576](https://issues.apache.org/jira/browse/PHOENIX-4576)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Исправление ошибок тестов Локалиндекссплитмержеит |
| BUG-97771              | [HDFS-11711](https://issues.apache.org/jira/browse/HDFS-11711)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Имя DN не должно удалять блокировку в исключении "Слишком много открытых файлов"                                                                              |
| BUG-97869              | [KNOX-1190](https://issues.apache.org/jira/browse/KNOX-1190)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Сбой поддержки единого входа Knox для Google OIDC                                                                                                    |
| BUG-97879              | [PHOENIX-4489](https://issues.apache.org/jira/browse/PHOENIX-4489)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Утечка HBase Connection в заданиях MR Phoenix                                                                                                       |
| BUG-98392              | [RANGER-2007](https://issues.apache.org/jira/browse/RANGER-2007)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Сбой обновления билета Kerberos Ranger                                                                                                |
| BUG-98484              | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | Не работает добавочная репликация Hive в облако                                                                                              |
| BUG-98533              | [HBASE-19934](https://issues.apache.org/jira/browse/HBASE-19934), [HBASE-20008](https://issues.apache.org/jira/browse/HBASE-20008)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Сбой восстановления моментального снимка HBase из-за исключения пустого указателя                                                                                |
| BUG-98555              | [PHOENIX-4662](https://issues.apache.org/jira/browse/PHOENIX-4662)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Исключение NullPointerException в TableResultIterator.java при повторной отправке кэша                                                                               |
| BUG-98579              | [HBASE – 13716](https://issues.apache.org/jira/browse/HBASE-13716)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Прекратите использовать константы FSConstants Hadoop                                                                                                                |
| BUG-98705              | [KNOX-1230](https://issues.apache.org/jira/browse/KNOX-1230)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Большое количество параллельных запросов Knox вызывает изменение URL-адреса                                                                                           |
| BUG-98983              | [KNOX-1108](https://issues.apache.org/jira/browse/KNOX-1108)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                               | Сбой отработки отказа NiFiHaDispatch                                                                                                                |
| BUG-99107              | [HIVE-19054](https://issues.apache.org/jira/browse/HIVE-19054)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Репликация функции будет использовать hive.repl.replica.functions.root.dir как корень                                                                  |
| BUG-99145              | [RANGER-2035](https://issues.apache.org/jira/browse/RANGER-2035)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Ошибки доступа к servicedefs с пустым классом implClass с серверной частью Oracle                                                                          |
| BUG-99160              | [SLIDER-1259](https://issues.apache.org/jira/browse/SLIDER-1259)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Ползунок не работает в средах с несколькими сетевыми интерфейсами                                                                                               |
| BUG-99239              | [ATLAS-2462](https://issues.apache.org/jira/browse/ATLAS-2462)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Импорт Sqoop для всех таблиц вызывает NPE без таблицы, указанной в команде                                                                        |
| BUG-99301              | [ATLAS-2530](https://issues.apache.org/jira/browse/ATLAS-2530)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Новая строка в начале атрибута имени hive\_process and hive\_column\_lineage                                                    |
| BUG-99453              | [HIVE-19065](https://issues.apache.org/jira/browse/HIVE-19065)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Проверка совместимости клиента хранилища метаданных должна включать syncMetaStoreClient                                                                        |
| BUG-99521              | Недоступно                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        | ServerCache для HashJoin не создается повторно, если повторно создаются итераторы                                                                  |
| BUG-99590              | [PHOENIX-3518](https://issues.apache.org/jira/browse/PHOENIX-3518)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Утечка памяти в RenewLeaseTask                                                                                                                  |
| BUG-99618              | [SPARK-23599](https://issues.apache.org/jira/browse/SPARK-23599), [SPARK-23806](https://issues.apache.org/jira/browse/SPARK-23806)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                         | Обновите Spark2 до версии 2.3.0+ (3/28)                                                                                                                 |
| BUG-99672              | [ATLAS-2524](https://issues.apache.org/jira/browse/ATLAS-2524)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                             | Обработчик Hive с уведомлениями V2 — неправильная обработка операции "изменить представление как"                                                              |
| BUG-99809              | [HBASE-20375](https://issues.apache.org/jira/browse/HBASE-20375)                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                           | Не используйте getCurrentUserCredentials в модуле hbase-spark                                                                                  |

**Возможности поддержки**

| **Идентификатор ошибки Hortonworks** | **Apache JIRA**                                                  | **Сводка**                                                                                   |
|------------------------|------------------------------------------------------------------|-----------------------------------------------------------------------------------------------|
| BUG-87343              | [HIVE-18031](https://issues.apache.org/jira/browse/HIVE-18031)   | Включите поддержку репликации для операции изменения базы данных                                             |
| BUG-91293              | [RANGER-2060](https://issues.apache.org/jira/browse/RANGER-2060) | Прокси-сервер Knox с единым входом Knox для Ranger не работает                                            |
| BUG-93116              | [RANGER-1957](https://issues.apache.org/jira/browse/RANGER-1957) | Синхронизация пользователей Ranger не выполняет периодическую синхронизацию пользователей или групп при включенной добавочной синхронизации |
| BUG-93577              | [RANGER-1938](https://issues.apache.org/jira/browse/RANGER-1938) | Solr для настройки аудита неэффективно использует значения DocValues                                        |
| BUG-96082              | [RANGER-1982](https://issues.apache.org/jira/browse/RANGER-1982) | Исправление ошибок для метрики аналитики администратора и сервера управления ключами Ranger                         |
| BUG-96479              | [HDFS-12781](https://issues.apache.org/jira/browse/HDFS-12781)   | После отключения узла данных на вкладке узла данных пользовательского интерфейса узла имени появится предупреждающее сообщение                 |
| BUG-97864              | [HIVE-18833](https://issues.apache.org/jira/browse/HIVE-18833)   | Сбой автоматического объединения при выполнении вставки в каталог как вставки ORC-файла                                      |
| BUG-98814              | [HDFS-13314](https://issues.apache.org/jira/browse/HDFS-13314)   | При обнаружении узлом NameNode повреждения FsImage нужно обязательно завершить его работу                              |

**Обновление**

| **Идентификатор ошибки Hortonworks** | **Apache JIRA**                                                                                                                | **Сводка**                                                                 |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------|-----------------------------------------------------------------------------|
| BUG-100134             | [SPARK-22919](https://issues.apache.org/jira/browse/SPARK-22919)                                                               | Отмените изменение "Активировать версии клиента HTTPClient Apache"                                 |
| BUG-95823              | Недоступно                                                                                                                            | Knox: обновите утилиты компонента                                                     |
| BUG-96751              | [KNOX-1076](https://issues.apache.org/jira/browse/KNOX-1076)                                                                   | Обновите nimbus-jose-jwt до версии 4.41.2                                            |
| BUG-97864              | [HIVE-18833](https://issues.apache.org/jira/browse/HIVE-18833)                                                                 | Сбой автоматического объединения при выполнении вставки в каталог как вставки ORC-файла                    |
| BUG-99056              | [HADOOP-13556](https://issues.apache.org/jira/browse/HADOOP-13556)                                                             | Измените префикс Configuration.getPropsWithPrefix, чтобы вместо итератора использовать getProps |
| BUG-99378              | [ATLAS-2461](https://issues.apache.org/jira/browse/ATLAS-2461), [ATLAS-2554](https://issues.apache.org/jira/browse/ATLAS-2554) | Служебная программа переноса для экспорта данных Atlas в базе данных графа Titan                    |

**Удобство использования**

| **Идентификатор ошибки Hortonworks** | **Apache JIRA**                                                                                                                                                                                                                                                                | **Сводка**                                                                                                                                                  |
|------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------------------------------------------|
| BUG-100045             | [HIVE-19056](https://issues.apache.org/jira/browse/HIVE-19056)                                                                                                                                                                                                                 | Исключение IllegalArgumentException в индексе FixAcidKeyIndex при отсутствии строк в ORC-файле                                                                                         |
| BUG-100139             | [KNOX-1243](https://issues.apache.org/jira/browse/KNOX-1243)                                                                                                                                                                                                                   | Нормализуйте нужные различающиеся имена, настроенные в службе KnoxToken                                                                                          |
| BUG-100570             | [ATLAS-2557](https://issues.apache.org/jira/browse/ATLAS-2557)                                                                                                                                                                                                                 | Исправить, чтобы разрешить поиск групп Hadoop LDAP, если группы из УГИ настроены неправильно или не являются пустыми.                                                          |
| BUG-100646             | [ATLAS-2102](https://issues.apache.org/jira/browse/ATLAS-2102)                                                                                                                                                                                                                 | Оптимизация пользовательского интерфейса Atlas: страница результатов поиска                                                                                                                   |
| BUG-100737             | [HIVE-19049](https://issues.apache.org/jira/browse/HIVE-19049)                                                                                                                                                                                                                 | Добавьте поддержку для таблицы ALTER TABLE, чтобы добавить столбцы для Druid                                                                                                            |
| BUG-100750             | [KNOX-1246](https://issues.apache.org/jira/browse/KNOX-1246)                                                                                                                                                                                                                   | Обновите конфигурацию службы в Knox для поддержки последних конфигураций Ranger                                                                                   |
| BUG-100965             | [ATLAS-2581](https://issues.apache.org/jira/browse/ATLAS-2581)                                                                                                                                                                                                                 | Регрессия с уведомлениями обработчика Hive V2: перемещение таблицы в другую базу данных                                                                            |
| BUG-84413              | [ATLAS-1964](https://issues.apache.org/jira/browse/ATLAS-1964)                                                                                                                                                                                                                 | Пользовательский интерфейс: поддержка столбцов упорядочения в таблице поиска                                                                                                                |
| BUG-90570              | [HDFS-11384](https://issues.apache.org/jira/browse/HDFS-11384), [HDFS-12347](https://issues.apache.org/jira/browse/HDFS-12347)                                                                                                                                                 | Добавьте параметр для балансировщика для разгона вызовов getBlocks, чтобы избежать всплеска rpc.CallQueueLength узла NameNode                                                            |
| BUG-90584              | [HBASE-19052](https://issues.apache.org/jira/browse/HBASE-19052)                                                                                                                                                                                                               | FixedFileTrailer должен распознавать класс CellComparatorImpl в ветви branch-1.x                                                                                     |
| BUG-90979              | [KNOX-1224](https://issues.apache.org/jira/browse/KNOX-1224)                                                                                                                                                                                                                   | HADispatcher прокси-сервера Knox для поддержки Atlas в режиме высокой доступности                                                                                                              |
| BUG-91293              | [RANGER-2060](https://issues.apache.org/jira/browse/RANGER-2060)                                                                                                                                                                                                               | Прокси-сервер Knox с единым входом Knox для Ranger не работает                                                                                                           |
| BUG-92236              | [ATLAS-2281](https://issues.apache.org/jira/browse/ATLAS-2281)                                                                                                                                                                                                                 | Сохранение запросов фильтра атрибутов тегов и типов с фильтрами NULL и без поддержки NULL                                                                                         |
| BUG-92238              | [ATLAS-2282](https://issues.apache.org/jira/browse/ATLAS-2282)                                                                                                                                                                                                                 | Сохраненный избранный поиск появляется только при обновлении после создания, когда есть более 25 избранных поисков                                                          |
| BUG-92333              | [ATLAS-2286](https://issues.apache.org/jira/browse/ATLAS-2286)                                                                                                                                                                                                                 | Предварительно созданный тип kafka\_topic не должен объявлять атрибут "тема" как уникальный                                                                                 |
| BUG-92678              | [ATLAS-2276](https://issues.apache.org/jira/browse/ATLAS-2276)                                                                                                                                                                                                                 | Значение пути для сущности типа hdfs\_path задано в нижнем регистре в hive-bridge                                                                                 |
| BUG-93097              | [RANGER-1944](https://issues.apache.org/jira/browse/RANGER-1944)                                                                                                                                                                                                               | Не работает фильтр действий для аудита администратора                                                                                                                 |
| BUG-93135              | [HIVE-15874](https://issues.apache.org/jira/browse/HIVE-15874), [HIVE-18189](https://issues.apache.org/jira/browse/HIVE-18189)                                                                                                                                                 | Запрос Hive возвращает неправильные результаты, если для псевдонима hive.groupby.orderby.position.alias установлено значение true                                                                      |
| BUG-93136              | [HIVE-18189](https://issues.apache.org/jira/browse/HIVE-18189)                                                                                                                                                                                                                 | Упорядочение по положению не работает, если статистические отключен                                                                                                         |
| BUG-93387              | [HIVE-17600](https://issues.apache.org/jira/browse/HIVE-17600)                                                                                                                                                                                                                 | Обеспечьте пользователям возможность настроить размер enforceBufferSize ORC-файла                                                                                                            |
| BUG-93495              | [RANGER-1937](https://issues.apache.org/jira/browse/RANGER-1937)                                                                                                                                                                                                               | Синхронизация тегов Ranger должна обрабатывать уведомление ENTITY\_CREATE для поддержки функции импорта Atlas                                                                   |
| BUG-93512              | [PHOENIX-4466](https://issues.apache.org/jira/browse/PHOENIX-4466)                                                                                                                                                                                                             | Исключение java.lang.RuntimeException — код отклика 500 — выполнение задания Spark для подключения к серверу запросов Phoenix и загрузки данных                                       |
| BUG-93801              | [HBASE-19393](https://issues.apache.org/jira/browse/HBASE-19393)                                                                                                                                                                                                               | Головной узел HTTP 413 во время доступа к пользовательскому интерфейсу HBase с помощью SSL                                                                                                       |
| BUG-93804              | [HIVE-17419](https://issues.apache.org/jira/browse/HIVE-17419)                                                                                                                                                                                                                 | При выполнении команды ANALYZE TABLE...COMPUTE STATISTICS FOR COLUMNS отображается вычисленная статистика для маскированных таблиц                                                                |
| BUG-93932              | [ATLAS-2320](https://issues.apache.org/jira/browse/ATLAS-2320)                                                                                                                                                                                                                 | Классификация "\*" с запросом вызывает исключение внутреннего сервера 500                                                                                         |
| BUG-93933              | [ATLAS-2286](https://issues.apache.org/jira/browse/ATLAS-2286)                                                                                                                                                                                                                 | Предварительно созданный тип kafka\_topic не должен объявлять атрибут "тема" как уникальный                                                                                 |
| BUG-93938              | [ATLAS-2283](https://issues.apache.org/jira/browse/ATLAS-2283), [ATLAS-2295](https://issues.apache.org/jira/browse/ATLAS-2295)                                                                                                                                                 | Обновления пользовательского интерфейса для классификаций                                                                                                                               |
| BUG-93941              | [ATLAS-2296](https://issues.apache.org/jira/browse/ATLAS-2296), [ATLAS-2307](https://issues.apache.org/jira/browse/ATLAS-2307)                                                                                                                                                 | Оптимизация базового поиска, чтобы при необходимости исключить сущности sub-type и типы sub-classification-types                                                                |
| BUG-93944              | [ATLAS-2318](https://issues.apache.org/jira/browse/ATLAS-2318)                                                                                                                                                                                                                 | Пользовательский интерфейс: при двойном щелчке дочернего тега выбирается родительский тег                                                                                                    |
| BUG-93946              | [ATLAS-2319](https://issues.apache.org/jira/browse/ATLAS-2319)                                                                                                                                                                                                                 | Пользовательский интерфейс: выполните обновление, чтобы удалить тег, который находится в позиции 25+ в списке тегов в структуре Flat и Tree.                   |
| BUG-93977              | [HIVE-16232](https://issues.apache.org/jira/browse/HIVE-16232)                                                                                                                                                                                                                 | Включите поддержку вычисления статистики для столбцов в идентификаторе QuotedIdentifier                                                                                                     |
| BUG-94030              | [ATLAS-2332](https://issues.apache.org/jira/browse/ATLAS-2332)                                                                                                                                                                                                                 | Сбой создания типа с атрибутами с вложенным типом данных коллекции                                                                                     |
| BUG-94099              | [ATLAS-2352](https://issues.apache.org/jira/browse/ATLAS-2352)                                                                                                                                                                                                                 | Сервер Atlas должен предоставить конфигурацию для указания действительного срока действия для маркера DelegationToken Kerberos                                                                   |
| BUG-94280              | [HIVE-12785](https://issues.apache.org/jira/browse/HIVE-12785)                                                                                                                                                                                                                 | С помощью типа объединения и определяемой пользователем функции \`просмотрите\` неработоспособность структуры                                                                                                |
| BUG-94332              | [SQOOP-2930](https://issues.apache.org/jira/browse/SQOOP-2930)                                                                                                                                                                                                                 | Выполнение задания Sqoop не переопределяет сохраненные общие свойства задания                                                                                               |
| BUG-94428              | Недоступно                                                                                                                                                                                                                                                                            | Поддержка Knox REST API агента Profiler уровня данных                                                                                                               |
| BUG-94514              | [ATLAS-2339](https://issues.apache.org/jira/browse/ATLAS-2339)                                                                                                                                                                                                                 | Пользовательский интерфейс: изменения в столбцах в представлении результатов базового поиска также влияют на DSL.                                                                                |
| BUG-94515              | [ATLAS-2169](https://issues.apache.org/jira/browse/ATLAS-2169)                                                                                                                                                                                                                 | Ошибка запроса на удаление при настройке необратимого удаления                                                                                                          |
| BUG-94518              | [ATLAS-2329](https://issues.apache.org/jira/browse/ATLAS-2329)                                                                                                                                                                                                                 | Несколько курсоров в пользовательском интерфейсе Atlas появляется, если пользователь щелкает другой неправильный тег                                                                             |
| BUG-94519              | [ATLAS-2272](https://issues.apache.org/jira/browse/ATLAS-2272)                                                                                                                                                                                                                 | Сохраните состояние перетаскиваемых столбцов с помощью API поиска сохранения                                                                                                     |
| BUG-94627              | [HIVE-17731](https://issues.apache.org/jira/browse/HIVE-17731)                                                                                                                                                                                                                 | Добавьте параметр обратной совместимости для внешних пользователей в HIVE-11985                                                                                                |
| BUG-94786              | [HIVE-6091](https://issues.apache.org/jira/browse/HIVE-6091)                                                                                                                                                                                                                   | Пустые файлы за пределами конвейера создаются для прерывания и создания подключения                                                                                                  |
| BUG-94793              | [HIVE — 14013](https://issues.apache.org/jira/browse/HIVE-14013)                                                                                                                                                                                                                 | В таблице с описанием неправильно отображается Юникод                                                                                                                 |
| BUG-94900              | [OOZIE-2606](https://issues.apache.org/jira/browse/OOZIE-2606), [OOZIE-2658](https://issues.apache.org/jira/browse/OOZIE-2658), [OOZIE-2787](https://issues.apache.org/jira/browse/OOZIE-2787), [OOZIE-2802](https://issues.apache.org/jira/browse/OOZIE-2802)                 | Установите spark.yarn.jars, чтобы исправить Spark 2.0 с помощью Oozie                                                                                                              |
| BUG-94901              | [HBASE-19285](https://issues.apache.org/jira/browse/HBASE-19285)                                                                                                                                                                                                               | Добавьте гистограммы задержки для каждой таблицы                                                                                                                             |
| BUG-94908              | [ATLAS-1921](https://issues.apache.org/jira/browse/ATLAS-1921)                                                                                                                                                                                                                 | Пользовательский интерфейс. Поиск с помощью атрибутов признака и сущности: пользовательский интерфейс не выполняет проверку диапазона и позволяет предоставлять значения вне границ для целочисленных и плавающих типов данных.  |
| BUG-95086              | [RANGER-1953](https://issues.apache.org/jira/browse/RANGER-1953)                                                                                                                                                                                                               | Оптимизация на странице списка групп пользователей                                                                                                                       |
| BUG-95193              | [SLIDER-1252](https://issues.apache.org/jira/browse/SLIDER-1252)                                                                                                                                                                                                               | Сбой агента Slider — ошибки проверки SSL с помощью Python версии 2.7.5-58                                                                                           |
| BUG-95314              | [YARN-7699](https://issues.apache.org/jira/browse/YARN-7699)                                                                                                                                                                                                                   | queueUsagePercentage используется как INF-файл для вызова REST API getApp                                                                                               |
| BUG-95315              | [HBASE-13947](https://issues.apache.org/jira/browse/HBASE-13947), [HBASE-14517](https://issues.apache.org/jira/browse/HBASE-14517), [HBASE-17931](https://issues.apache.org/jira/browse/HBASE-17931)                                                                           | Назначьте системные таблицы серверам с самой последней версией                                                                                                         |
| BUG-95392              | [ATLAS-2421](https://issues.apache.org/jira/browse/ATLAS-2421)                                                                                                                                                                                                                 | Обновления уведомления для поддержки структуры данных V2                                                                                                           |
| BUG-95476              | [RANGER-1966](https://issues.apache.org/jira/browse/RANGER-1966)                                                                                                                                                                                                               | В некоторых случаях инициализация механизма политики не создает контекстных обогатителей                                                                                 |
| BUG-95512              | [HIVE-18467](https://issues.apache.org/jira/browse/HIVE-18467)                                                                                                                                                                                                                 | Поддержка целого дампа хранилища и загрузки, а также создание и удаление событий в базе данных                                                                                            |
| BUG-95593              | Недоступно                                                                                                                                                                                                                                                                            | Продлите служебные программы базы данных Oozie для поддержки создания общей библиотеки Spark2                                                                                                    |
| BUG-95595              | [HIVE-15563](https://issues.apache.org/jira/browse/HIVE-15563)                                                                                                                                                                                                                 | Проигнорируйте исключение перехода состояния недопустимой операции в запросе SQLOperation.runQuery, чтобы предоставить реальное исключение                                                       |
| BUG-95685              | [ATLAS-2422](https://issues.apache.org/jira/browse/ATLAS-2422)                                                                                                                                                                                                                 | Экспорт: включите поддержку экспорта на основе типа                                                                                                                            |
| BUG-95798              | [PHOENIX-2714](https://issues.apache.org/jira/browse/PHOENIX-2714), [PHOENIX-2724](https://issues.apache.org/jira/browse/PHOENIX-2724), [PHOENIX-3023](https://issues.apache.org/jira/browse/PHOENIX-3023), [PHOENIX-3040](https://issues.apache.org/jira/browse/PHOENIX-3040) | Не используйте направляющие для выполнения запросов поочередно                                                                                                          |
| BUG-95969              | [HIVE-16828](https://issues.apache.org/jira/browse/HIVE-16828), [HIVE-17063](https://issues.apache.org/jira/browse/HIVE-17063), [HIVE-18390](https://issues.apache.org/jira/browse/HIVE-18390)                                                                                 | Сбой секционированного представления с ошибкой: индекс: 1, размер: 1 исключения IndexOutOfBoundsException                                                                              |
| BUG-96019              | [HIVE — 18548](https://issues.apache.org/jira/browse/HIVE-18548)                                                                                                                                                                                                                 | Исправьте импорт log4j                                                                                                                                             |
| BUG-96288              | [HBASE-14123](https://issues.apache.org/jira/browse/HBASE-14123), [HBASE-14135](https://issues.apache.org/jira/browse/HBASE-14135), [HBASE-17850](https://issues.apache.org/jira/browse/HBASE-17850)                                                                           | Резервное копирование и восстановление порта HBase 2,0                                                                                                                            |
| BUG-96313              | [KNOX-1119](https://issues.apache.org/jira/browse/KNOX-1119)                                                                                                                                                                                                                   | Необходимо настроить субъект Pac4J OAuth/OpenID                                                                                                        |
| BUG-96365              | [ATLAS-2442](https://issues.apache.org/jira/browse/ATLAS-2442)                                                                                                                                                                                                                 | Для пользователя с правом только на чтение в ресурсе сущности недоступен базовый поиск                                                                              |
| BUG-96479              | [HDFS-12781](https://issues.apache.org/jira/browse/HDFS-12781)                                                                                                                                                                                                                 | После отключения узла данных на вкладке узла данных пользовательского интерфейса узла имени появится предупреждающее сообщение                                                                                |
| BUG-96502              | [RANGER-1990](https://issues.apache.org/jira/browse/RANGER-1990)                                                                                                                                                                                                               | Добавьте одностороннюю поддержку MySQL SSL для администратора Ranger                                                                                                                |
| BUG-96718              | [ATLAS-2439](https://issues.apache.org/jira/browse/ATLAS-2439)                                                                                                                                                                                                                 | Обновите обработчик Sqoop, чтобы использовать уведомления V2                                                                                                                    |
| BUG-96748              | [HIVE-18587](https://issues.apache.org/jira/browse/HIVE-18587)                                                                                                                                                                                                                 | Вставка события DML может привести к попытке вычислить контрольную сумму в каталогах                                                                                          |
| BUG-96821              | [HBASE – 18212](https://issues.apache.org/jira/browse/HBASE-18212)                                                                                                                                                                                                               | Предупреждающее сообщение в автономном режиме с журналами HBase в локальной файловой системе: "Failed to invoke 'unbuffer' method in class class org.apache.hadoop.fs.FSDataInputStream" (Не удалось вызвать метод очистки буфера в классе org.apache.hadoop.fs.FSDataInputStream) |
| BUG-96847              | [HIVE — 18754](https://issues.apache.org/jira/browse/HIVE-18754)                                                                                                                                                                                                                 | Состояние REPL должно поддерживать предложение with                                                                                                                     |
| BUG-96873              | [ATLAS-2443](https://issues.apache.org/jira/browse/ATLAS-2443)                                                                                                                                                                                                                 | Запишите требуемые атрибуты сущности в исходящих сообщениях DELETE                                                                                               |
| BUG-96880              | [SPARK-23230](https://issues.apache.org/jira/browse/SPARK-23230)                                                                                                                                                                                                               | Когда формат hive.default.fileformat представляет собой другие типы файлов, создание таблицы текстового файла вызывает ошибку сериализации-десериализации                                                         |
| BUG-96911              | [OOZIE-2571](https://issues.apache.org/jira/browse/OOZIE-2571), [OOZIE-2792](https://issues.apache.org/jira/browse/OOZIE-2792), [OOZIE-2799](https://issues.apache.org/jira/browse/OOZIE-2799), [OOZIE-2923](https://issues.apache.org/jira/browse/OOZIE-2923)                 | Оптимизируйте синтаксический анализ параметров Spark                                                                                                                                |
| BUG-97100              | [RANGER-1984](https://issues.apache.org/jira/browse/RANGER-1984)                                                                                                                                                                                                               | Записи журнала аудита HBase не могут показывать все теги, связанные с доступным столбцом                                                                                |
| BUG-97110              | [PHOENIX-3789](https://issues.apache.org/jira/browse/PHOENIX-3789)                                                                                                                                                                                                             | Выполните вызовы обслуживания межрегионального индекса в postBatchMutateIndispensably                                                                                 |
| BUG-97145              | [HIVE-12245](https://issues.apache.org/jira/browse/HIVE-12245), [HIVE-17829](https://issues.apache.org/jira/browse/HIVE-17829)                                                                                                                                                 | Включите поддержку комментариев в столбце для архивной таблицы HBase                                                                                                            |
| BUG-97409              | [HADOOP-15255](https://issues.apache.org/jira/browse/HADOOP-15255)                                                                                                                                                                                                             | Поддержка преобразования верхнего и нижнего регистров для имен групп в LdapGroupsMapping                                                                                     |
| BUG-97535              | [HIVE-18710](https://issues.apache.org/jira/browse/HIVE-18710)                                                                                                                                                                                                                 | Продлите разрешения inheritPerms в ACID в Hive 2.X                                                                                                                      |
| BUG-97742              | [OOZIE-1624](https://issues.apache.org/jira/browse/OOZIE-1624)                                                                                                                                                                                                                 | Шаблон исключения для JAR-файлов общей библиотеки                                                                                                                          |
| BUG-97744              | [PHOENIX-3994](https://issues.apache.org/jira/browse/PHOENIX-3994)                                                                                                                                                                                                             | Приоритет RPC индекса по-прежнему зависит от свойства фабрики контроллера в файле hbase-site.xml                                                                        |
| BUG-97787              | [HIVE-18460](https://issues.apache.org/jira/browse/HIVE-18460)                                                                                                                                                                                                                 | Уплотнитель не передает свойства таблицы средству записи ORC                                                                                                    |
| BUG-97788              | [HIVE-18613](https://issues.apache.org/jira/browse/HIVE-18613)                                                                                                                                                                                                                 | Продлите JsonSerDe для поддержки типа BINARY                                                                                                                      |
| BUG-97899              | [HIVE-18808](https://issues.apache.org/jira/browse/HIVE-18808)                                                                                                                                                                                                                 | Обеспечьте более надежное сжатие при сбое обновления статистических данных                                                                                                          |
| BUG-98038              | [HIVE — 18788](https://issues.apache.org/jira/browse/HIVE-18788)                                                                                                                                                                                                                 | Очистите входные данные в инструкции PreparedStatement в JDBC                                                                                                                    |
| BUG-98383              | [HIVE-18907](https://issues.apache.org/jira/browse/HIVE-18907)                                                                                                                                                                                                                 | Создайте служебную программу, чтобы исправить проблему индекса ключа ACID в HIVE-18817                                                                                                   |
| BUG-98388              | [RANGER-1828](https://issues.apache.org/jira/browse/RANGER-1828)                                                                                                                                                                                                               | Оптимальной процедурой кодирования является добавление дополнительных заголовков в Ranger                                                                                                        |
| BUG-98392              | [RANGER-2007](https://issues.apache.org/jira/browse/RANGER-2007)                                                                                                                                                                                                               | Сбой обновления билета Kerberos Ranger                                                                                                              |
| BUG-98533              | [HBASE-19934](https://issues.apache.org/jira/browse/HBASE-19934), [HBASE-20008](https://issues.apache.org/jira/browse/HBASE-20008)                                                                                                                                             | Сбой восстановления моментального снимка HBase из-за исключения пустого указателя                                                                                              |
| BUG-98552              | [HBASE-18083](https://issues.apache.org/jira/browse/HBASE-18083), [HBASE-18084](https://issues.apache.org/jira/browse/HBASE-18084)                                                                                                                                             | Обеспечьте возможность настройки номера потока очистки файлов небольших и больших размеров в HFileCleaner                                                                                       |
| BUG-98705              | [KNOX-1230](https://issues.apache.org/jira/browse/KNOX-1230)                                                                                                                                                                                                                   | Большое количество параллельных запросов Knox вызывает изменение URL-адреса                                                                                                         |
| BUG-98711              | Недоступно                                                                                                                                                                                                                                                                            | Диспетчеризация NiFi не может использовать двухсторонний SSL без модификаций файла service.xml                                                                                        |
| BUG-98880              | [OOZIE-3199](https://issues.apache.org/jira/browse/OOZIE-3199)                                                                                                                                                                                                                 | Предоставьте возможность настраивать ограничение системного свойства                                                                                                                 |
| BUG-98931              | [ATLAS-2491](https://issues.apache.org/jira/browse/ATLAS-2491)                                                                                                                                                                                                                 | Обновите обработчик Hive для использования уведомлений Atlas v2                                                                                                               |
| BUG-98983              | [KNOX-1108](https://issues.apache.org/jira/browse/KNOX-1108)                                                                                                                                                                                                                   | Сбой отработки отказа NiFiHaDispatch                                                                                                                              |
| BUG-99088              | [ATLAS-2511](https://issues.apache.org/jira/browse/ATLAS-2511)                                                                                                                                                                                                                 | Предоставьте возможность выборочно импортировать базы данных и таблицы из Hive в Atlas                                                                                 |
| BUG-99154              | [OOZIE-2844](https://issues.apache.org/jira/browse/OOZIE-2844), [OOZIE-2845](https://issues.apache.org/jira/browse/OOZIE-2845), [OOZIE-2858](https://issues.apache.org/jira/browse/OOZIE-2858), [OOZIE-2885](https://issues.apache.org/jira/browse/OOZIE-2885)                 | Ошибка запроса Spark с исключением "java.io.FileNotFoundException: hive-site.xml (Permission denied)"                                                         |
| BUG-99239              | [ATLAS-2462](https://issues.apache.org/jira/browse/ATLAS-2462)                                                                                                                                                                                                                 | Импорт Sqoop для всех таблиц вызывает NPE без таблицы, указанной в команде                                                                                      |
| BUG-99636              | [KNOX-1238](https://issues.apache.org/jira/browse/KNOX-1238)                                                                                                                                                                                                                   | Исправьте настройки пользовательского хранилища Truststore для шлюза                                                                                                                   |
| BUG-99650              | [KNOX-1223](https://issues.apache.org/jira/browse/KNOX-1223)                                                                                                                                                                                                                   | Прокси-сервер Knox в Zeppelin не перенаправляет нужным образом /api/ticket                                                                                               |
| BUG-99804              | [OOZIE-2858](https://issues.apache.org/jira/browse/OOZIE-2858)                                                                                                                                                                                                                 | HiveMain, ShellMain и SparkMain не должны локально перезаписывать свойства и файлы конфигурации                                                                   |
| BUG-99805              | [OOZIE-2885](https://issues.apache.org/jira/browse/OOZIE-2885)                                                                                                                                                                                                                 | Запуск действий Spark должен происходить без участия Hive в пути к классам                                                                                                  |
| BUG-99806              | [OOZIE-2845](https://issues.apache.org/jira/browse/OOZIE-2845)                                                                                                                                                                                                                 | Замените код на основе отражения, который задает переменную в HiveConf                                                                                                |
| BUG-99807              | [OOZIE-2844](https://issues.apache.org/jira/browse/OOZIE-2844)                                                                                                                                                                                                                 | Повысьте стабильность действий Oozie при отсутствии свойств log4j. или невозможности их считать                                                                         |
| RMP-9995               | [AMBARI-22222](https://issues.apache.org/jira/browse/AMBARI-22222)                                                                                                                                                                                                             | Переключите Druid, чтобы использовать каталог /var/druid вместо каталога /apps/druid на локальном диске                                                                                |

### <a name="behavioral-changes"></a>Изменения поведения

|**Компонент Apache**|**Apache JIRA**|**Сводка**|**Сведения**|
|--|--|--|--|
|**Spark 2.3** |**Н/Д** |**Изменения, описанные в заметках о выпуске Apache Spark** |— Документ "устаревшее" и "изменение поведения", https://spark.apache.org/releases/spark-release-2-3-0.html#deprecations<br /><br />-Для части SQL есть еще одно подробное пошаговое описание «миграция» (от 2,2 до 2,3). https://spark.apache.org/docs/latest/sql-programming-guide.html#upgrading-from-spark-sql-22-to-23|
|Spark |[**HIVE-12505**](https://issues.apache.org/jira/browse/HIVE-12505) |Задание Spark завершается успешно, но есть ошибка квоты диска HDFS |**Сценарий:** выполнение команды **insert overwrite**, когда в папке "Корзина" пользователя, запустившего команду, задана квота.<br /><br />**Прежнее поведение:** задание выполняется успешно, даже если не удается переместить данные в корзину. Результат может ошибочно содержать некоторые данные, ранее представленные в таблице.<br /><br />**Новое поведение:** при сбое перемещения в папку "Корзина" файлы навсегда удаляются.|
|**Kafka 1.0**|**Н/Д**|**Изменения, описанные в заметках о выпуске Apache Spark** |https://kafka.apache.org/10/documentation.html#upgrade_100_notable|
|**Hive/Ranger** | |Дополнительные политики Ranger Hive, необходимые для выполнения команды INSERT OVERWRITE |**Сценарий:** дополнительные политики Ranger Hive, необходимые для выполнения команды **INSERT OVERWRITE**<br /><br />**Прежнее поведение:** запросы **INSERT OVERWRITE** Hive выполнялись в обычном режиме.<br /><br />**Новое поведение:** запросы **INSERT OVERWRITE** Hive неожиданно завершаются сбоем после обновления до HDP-2.6.x. Появляется следующая ошибка:<br /><br />Произошла ошибка при компиляции инструкции: сбой: отклонено разрешение исключения HiveAccessControlException: у пользователя jdoe нет привилегии WRITE в каталоге /tmp/\*(state=42000,code=40000).<br /><br />Начиная с HDP версии 2.6.0, запросам **INSERT OVERWRITE** Hive требуется, чтобы политика URI Ranger позволяла выполнять операции записи, даже если у пользователя есть привилегия на запись, предоставленная с помощью политики HDFS.<br /><br />**Возможное решение или ожидаемое действие пользователя:**<br /><br />1. Создайте новую политику в репозитории Hive.<br />2. в раскрывающемся списке, где отображается база данных, выберите URI.<br />3. Измените путь (например,/tmp/*).<br />4. Добавьте пользователей и группу и сохраните.<br />5. Повторите запрос INSERT.|
|**HDFS**|**Н/Д** |HDFS должен поддерживать несколько URI сервера управления ключами |**Прежнее поведение:** свойство dfs.encryption.key.provider.uri использовалось для настройки пути поставщика сервера управления ключами.<br /><br />**Новое поведение:** dfs.encryption.key.provider.uri теперь устарел. Для настройки пути поставщика сервера управления ключами сейчас используется hadoop.security.key.provider.path.|
|**Zeppelin**|[**ZEPPELIN-3271**](https://issues.apache.org/jira/browse/ZEPPELIN-3271)|Параметр отключения планировщика |**Затронутый компонент:** Zeppelin-Server<br /><br />**Прежнее поведение:** в предыдущих выпусках Zeppelin не было возможности отключить планировщик.<br /><br />**Новое поведение:** пользователи больше не будут видеть планировщик, поскольку по умолчанию он отключен.<br /><br />**Возможное решение или ожидаемое действие пользователя:** если вы хотите включить планировщик, вам нужно будет добавить azeppelin.notebook.cron.enable со значением true в параметрах Zeppelin на сайте пользователя Zeppelin из Ambari.|

### <a name="known-issues"></a>Известные проблемы

- **Интеграция HDInsight с ADLS 2-го поколения**. Существует две проблемы в кластерах ESP HDInsight, использующих Azure Data Lake Storage 2-го поколения с каталогами и разрешениями пользователей:
   
  1. Не удается создать домашние каталоги для пользователей на головном узле 1. Попробуйте вручную создать каталоги и сменить владельца на UPN соответствующего пользователя.
   
  2. Сейчас в качестве разрешений для каталога /hdp не задано 751. Необходимо задать 
     ```bash
     chmod 751 /hdp 
     chmod –R 755 /hdp/apps
     ```

- **Spark 2.3**

  -   \[[*Spark-23523*](https://issues.apache.org/jira/browse/SPARK-23523) \] \[ \]Неверный результат SQL, вызванный правилом оптимиземетадатаонликуери

  -   \[[*Spark-23406*](https://issues.apache.org/jira/browse/SPARK-23406) \] Ошибки в потоковой потоке самосоединения

  -   Образцы записных книжек Spark недоступны, если Azure Data Lake Storage (Gen2) является хранилищем кластера по умолчанию.

- **Пакет безопасности корпоративного уровня**

  - Сервер Spark Thrift не принимает подключения от клиентов ODBC.
    Инструкции по устранению проблемы:
    1. Когда кластер будет создан, подождите около 15 минут.
    2. Проверьте, есть ли в пользовательском интерфейсе Ranger политика hivesampletable_policy.
    3. Перезапустите службу Spark.
       Теперь подключение службы токенов безопасности должно быть работоспособным.

- **Возможное решение для устранения ошибки проверки службы Ranger**

  -   [RANGER-1607](https://issues.apache.org/jira/browse/RANGER-1607): возможное решение для устранения ошибки проверки службы Ranger при обновлении предыдущих версий HDP до версии 2.6.2.

      > [!NOTE]  
      > Только если для Ranger включен SSL. 
     
  Эта проблема возникает при попытке обновить через Ambari предыдущие версии HDP до версии 2.6.1. Ambari использует вызов Curl для проверки службы в службе Ranger в Ambari. Если Ambari использует JDK версии 1.7, вызов Curl завершится ошибкой ниже:
    
  `curl: (35) error:14077410:SSL routines:SSL23_GET_SERVER_HELLO:sslv3 alert handshake failure`
    
  Причиной этой ошибки является версия Tomcat, используемая в Ranger, — Tomcat-7.0.7\*. JDK-1.7 конфликтует с шифрами по умолчанию, которые содержатся в Tomcat-7.0.7\*.
    
  Вы можете устранить эту проблему двумя способами:
    
  -   Обновите версию JDK в Ambari с 1.7 до 1.8 (ознакомьтесь с разделом об [изменении версии JDK](https://docs.hortonworks.com/HDPDocuments/Ambari-2.2.0.0/bk_ambari_reference_guide/content/ch_changing_the_jdk_version_on_an_existing_cluster.html) в справочном руководстве Ambari).
    
  -   Если вы хотите продолжить работу с JDK версии 1.7:
    
      1.  Добавьте свойство ranger.tomcat.ciphers в разделе ranger-admin-site в конфигурации Ambari Ranger со значением ниже:
            
          SSL\_RSA\_WITH\_RC4\_128\_MD5, SSL\_RSA\_WITH\_RC4\_128\_SHA, TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA, SSL\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA
        
      2.  Если среда настроена для сервера управления ключами Ranger, добавьте свойство ranger.tomcat.ciphers в разделе ranger-kms-site в конфигурации Ambari Ranger со значением ниже:
            
          SSL\_RSA\_WITH\_RC4\_128\_MD5, SSL\_RSA\_WITH\_RC4\_128\_SHA, TLS\_RSA\_WITH\_AES\_128\_CBC\_SHA, SSL\_RSA\_WITH\_3DES\_EDE\_CBC\_SHA
    
  >[!NOTE]  
  >Указанные значения являются рабочими примерами и могут не подходить для вашей среды. Проверьте, чтобы способ задания этих свойств соответствовал настройке вашей среды.   

- **Пользовательский интерфейс Ranger: исключение текста условия политики, введенного в форму политики**
    
  **Затронутый компонент:** Ranger
    
  **Описание проблемы**
    
  Если пользователь хочет создать политику с условиями настраиваемой политики, а выражение или текст содержит специальные символы, применение политики не будет работать. Перед сохранением политики в базу данных специальные знаки преобразуются в ASCII.
    
  **Специальные символы:**  &  &lt; &gt; " \` '
    
  Например, после сохранения политики условие tags.attributes\['type'\]='abc' будет преобразовано в следующее.
    
  tags.attds\[&\#x27;dsds&\#x27;\]=&\#x27;cssdfs&\#x27;
    
  Чтобы увидеть условие политики с этими знаками, откройте политику в режиме редактирования.
    
  **Обходное решение**
    
  - **Параметр \#1: создание и обновление политики через Rest API Ranger**
        
      URL-адрес REST: http://&lt;host&gt;:6080/service/plugins/policies
        
      **Создание политики с условием:**
        
      В примере ниже будет создана политика с тегами как \`tag-test\`. Она будет назначена группе \`public\` с условием политики astags.attr\['type'\]=='abc' путем выбора всех разрешений компонента Hive, например select, update, create, drop, alter, index, lock, all.
        
      **Пример.**
        
      ```bash
        curl -H "Content-Type: application/json" -X POST http://localhost:6080/service/plugins/policies -u admin:admin -d '{"policyType":"0","name":"P100","isEnabled":true,"isAuditEnabled":true,"description":"","resources":{"tag":{"values":["tags-test"],"isRecursive":"","isExcludes":false}},"policyItems":[{"groups":["public"],"conditions":[{"type":"accessed-after-expiry","values":[]},{"type":"tag-expression","values":["tags.attr['type']=='abc'"]}],"accesses":[{"type":"hive:select","isAllowed":true},{"type":"hive:update","isAllowed":true},{"type":"hive:create","isAllowed":true},{"type":"hive:drop","isAllowed":true},{"type":"hive:alter","isAllowed":true},{"type":"hive:index","isAllowed":true},{"type":"hive:lock","isAllowed":true},{"type":"hive:all","isAllowed":true}]}],"denyPolicyItems":[],"allowExceptions":[],"denyExceptions":[],"service":"tagdev"}'
      ```
        
      **Обновите имеющуюся политику с условием:**
        
      В примере ниже политика с тегами как \`tag-test\` будет обновлена. Она будет назначена группе \`public\` с условием политики astags.attr\['type'\]=='abc' путем выбора всех разрешений компонента Hive, например select, update, create, drop, alter, index, lock, all.
        
      URL-адрес REST: http://&lt;host-name&gt;:6080/service/plugins/policies/&lt;policy-id&gt;
        
      **Пример.**
        
      ```bash
        curl -H "Content-Type: application/json" -X PUT http://localhost:6080/service/plugins/policies/18 -u admin:admin -d '{"id":18,"guid":"ea78a5ed-07a5-447a-978d-e636b0490a54","isEnabled":true,"createdBy":"Admin","updatedBy":"Admin","createTime":1490802077000,"updateTime":1490802077000,"version":1,"service":"tagdev","name":"P0101","policyType":0,"description":"","resourceSignature":"e5fdb911a25aa7f77af5a9546938d9ed","isAuditEnabled":true,"resources":{"tag":{"values":["tags"],"isExcludes":false,"isRecursive":false}},"policyItems":[{"accesses":[{"type":"hive:select","isAllowed":true},{"type":"hive:update","isAllowed":true},{"type":"hive:create","isAllowed":true},{"type":"hive:drop","isAllowed":true},{"type":"hive:alter","isAllowed":true},{"type":"hive:index","isAllowed":true},{"type":"hive:lock","isAllowed":true},{"type":"hive:all","isAllowed":true}],"users":[],"groups":["public"],"conditions":[{"type":"ip-range","values":["tags.attributes['type']=abc"]}],"delegateAdmin":false}],"denyPolicyItems":[],"allowExceptions":[],"denyExceptions":[],"dataMaskPolicyItems":[],"rowFilterPolicyItems":[]}'
      ```
        
  - **Вариант \# 2. применение изменений JavaScript**
        
      Чтобы обновить JS-файл, сделайте следующее:
        
      1.  В /usr/hdp/current/ranger-admin найдите файл PermissionList.js.
        
      2.  Найдите определение функции renderPolicyCondtion (номер строки: 404).
        
      3.  Удалите следующую строку из этой функции, например в функции отображения (номер строки: 434).
            
          val = \_.escape(val);//Line No:460
            
          После удаления строки выше пользовательский интерфейс Ranger позволит вам создавать политики с условием, которое может содержать специальные знаки, и оценка той же политики будет успешной.

**Интеграция HDInsight с ADLS Gen 2: проблемы с каталогами и разрешениями пользователей в кластерах ESP**
    1.  Не удается создать домашние каталоги для пользователей на головном узле 1. Попробуйте вручную создать каталоги и сменить владельца на UPN соответствующего пользователя.
    2.  Сейчас в качестве разрешений для каталога /hdp не задано 751. Необходимо задать: а)  chmod 751 /hdp; б)  chmod –R 755 /hdp/apps

### <a name="deprecation"></a>Устаревшее

-   **Портал OMS:** мы удалили ссылку со страницы ресурсов HDInsight, которая указывала на портал OMS. Azure Monitor журналы изначально использовали собственный портал, именуемый порталом OMS для управления его конфигурацией и анализа собранных данных. Теперь все функциональные возможности этого портала перемещены на портал Azure, где и будут совершенствоваться далее. HDInsight больше не поддерживает портал OMS. Клиенты будут использовать интеграцию журналов HDInsight Azure Monitor в портал Azure.

-   **Spark 2.3**

    -   <https://spark.apache.org/releases/spark-release-2-3-0.html#deprecations>

### <a name="upgrading"></a>Обновление

Все эти функции доступны в HDInsight версии 3.6. Чтобы получить последнюю версию Spark, Kafka и R Server (Службы машинного обучения), выберите версию Spark, Kafka, Службы машинного обучения при [создании кластера HDInsight 3.6](./hdinsight-hadoop-provision-linux-clusters.md). Чтобы получить поддержку ADLS, как вариант можно выбрать тип хранилища ADLS. Существующие кластеры не будут автоматически обновлены до этих версий.

Все новые кластеры, созданные после июня 2018 года, автоматически получат 1000+ исправлений ошибок для всех проектов с открытым кодом. Ознакомьтесь с [этим](./hdinsight-upgrade-cluster.md) руководством, чтобы узнать о передовых методах обновления до более новой версии HDInsight.