---
title: Мониторинг и администрирование кластеров Azure HDInsight с помощью веб-интерфейса Ambari
description: Узнайте, как использовать пользовательский интерфейс Apache Ambari для мониторинга кластеров HDInsight и управления ими.
ms.service: hdinsight
ms.topic: how-to
ms.custom: hdinsightactive,seoapr2020
ms.date: 01/12/2021
ms.openlocfilehash: 087f284bed7ab0c9eb551c1629ab4f9196c80d76
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "98945691"
---
# <a name="manage-hdinsight-clusters-by-using-the-apache-ambari-web-ui"></a>Управление кластерами HDInsight с помощью веб-интерфейса Apache Ambari

[!INCLUDE [ambari-selector](../../includes/hdinsight-ambari-selector.md)]

Apache Ambari упрощает управление и мониторинг кластера Apache Hadoop. Это упрощение, предоставляя простой в использовании пользовательский веб-интерфейс и REST API. Ambari предоставляется с кластерами HDInsight и используется для мониторинга кластера и внесения изменений в его конфигурацию.

В этом документе рассказывается об использовании веб-интерфейса Ambari с кластером HDInsight.

## <a name="what-is-apache-ambari"></a><a id="whatis"></a>Что такое Apache Ambari?

[Apache Ambari](https://ambari.apache.org) упрощает управление Hadoop, предоставляя простой в использовании веб-интерфейс. Ambari можно использовать для отслеживания кластеров Hadoop, а также для управления ими. Разработчики могут интегрировать эти возможности в своих приложениях с помощью [интерфейсов REST API Ambari](https://github.com/apache/ambari/blob/trunk/ambari-server/docs/api/v1/index.md).

## <a name="connectivity"></a>Возможность подключения

Веб-интерфейс Ambari доступен в кластере HDInsight по адресу `https://CLUSTERNAME.azurehdinsight.net` , где `CLUSTERNAME` — это имя кластера.

> [!IMPORTANT]  
> Подключение к Ambari в HDInsight выполняется по протоколу HTTPS. При появлении запроса на прохождение проверки подлинности используйте имя и пароль учетной записи администратора, указанные при создании кластера. Если вы не запрашиваете учетные данные, проверьте параметры сети, чтобы убедиться в отсутствии проблем с подключением между клиентом и кластерами Azure HDInsight.

## <a name="ssh-tunnel-proxy"></a>Туннель SSH (прокси-сервер)

Хотя Ambari для вашего кластера доступен напрямую через Интернет, некоторые ссылки из веб-интерфейса Ambari (например, в JobTracker) не предоставляются в Интернете. Для доступа к этим службам необходимо создать туннель SSH. Дополнительные сведения см. в статье [Использование туннелирования SSH с для доступа к веб-интерфейсу Ambari, JobHistory, NameNode, Oozie и другим веб-интерфейсам](hdinsight-linux-ambari-ssh-tunnel.md).

## <a name="ambari-web-ui"></a>Веб-интерфейс Ambari

> [!WARNING]  
> HDInsight поддерживает не все функции веб-интерфейса Ambari. Дополнительные сведения см. в этой статье в разделе [Неподдерживаемые операции](#unsupported-operations).

При подключении к веб-ИНТЕРФЕЙСу Ambari вам будет предложено пройти проверку подлинности на странице. Укажите имя администратора кластера (по умолчанию это Admin) и пароль, которые были указаны при создании кластера.

При открытии страницы обратите внимание на панель вверху. Она содержит следующую информацию и элементы управления:

![Обзор панели мониторинга Apache Ambari](./media/hdinsight-hadoop-manage-ambari/apache-ambari-dashboard.png)

|Элемент |Описание |
|---|---|
|Логотип Ambari|Открывает панель мониторинга, которую можно использовать для наблюдения за кластером.|
|Имя кластера # Ops|Отображает количество текущих операций Ambari. Если выбрать имя кластера или **# ops** (К-во операций), отобразится список фоновых операций.|
|число оповещений|Отображает предупреждения или критические предупреждения, если таковые имеются, для кластера.|
|Панель мониторинга|Отображает панель мониторинга.|
|Службы|Сведения и параметры конфигурации для служб в кластере.|
|Узлы|Сведения и параметры конфигурации для узлов в кластере.|
|видны узлы|Журнал сведений, предупреждений и критических оповещений.|
|Административный|Программный стек и службы, установленные в кластере, сведения об учетной записи службы и безопасность Kerberos.|
|Кнопка "Администратор"|Ambari управление, параметры пользователя и выход.|

## <a name="monitoring"></a>Мониторинг

### <a name="alerts"></a>видны узлы

В следующем списке содержатся общие состояния оповещений, используемые Ambari.

* **OK**
* **Предупреждение**
* **КРИТИЧЕСКОЕ**
* **UNKNOWN**

При любых оповещениях, кроме **ОК**, в поле **# alerts** (К-во оповещений) в верхней части страницы будет отображаться их общее количество. Выберите эту запись, чтобы отобразить предупреждения и их состояние.

Оповещения разбиты на несколько групп по умолчанию, которые можно просмотреть на странице **Оповещения** .

![Сводка страницы оповещений Apache Ambari](./media/hdinsight-hadoop-manage-ambari/hdinsight-alerts-page.png)

Группами можно управлять с помощью меню **Действия**, а также выбрав **Manage Alert Groups** (Управление группами оповещений).

![Управление группами оповещений Apache Ambari](./media/hdinsight-hadoop-manage-ambari/ambari-manage-alerts.png)

Вы управляете методами предупреждений и создаете уведомления о предупреждениях из меню **действия** , выбрав __Управление уведомлениями__. Отображаются все текущие уведомления. Создайте уведомления отсюда. Уведомления можно отправлять по **электронной почте** или **протоколу SNMP** при возникновении определенного сочетания оповещения и уровня серьезности. Например, можно отправить сообщение, если для какого-либо оповещения в группе **YARN Default** (YARN по умолчанию) установлено значение **Критическое**.

![Создание уведомления о предупреждении Apache Ambari](./media/hdinsight-hadoop-manage-ambari/create-alert-notification.png)

Наконец, выбрав __Manage Alert Settings__ (Управление параметрами оповещения) в меню __Действия__, вы сможете настроить количество появлений оповещения перед отправкой уведомления. Этот параметр можно использовать для предотвращения уведомлений по временным ошибкам.

Руководство по уведомлению об использовании бесплатной [учетной записи SendGrid](../sendgrid-dotnet-how-to-send-email.md)см. [в статье Настройка уведомлений по электронной почте Apache Ambari в Azure HDInsight](./apache-ambari-email.md).

### <a name="cluster"></a>Кластер

На вкладке **Метрики** панели мониторинга содержится ряд мини-приложений, которые позволяют легко определить состояние кластера с первого взгляда. Если щелкнуть некоторые мини-приложения, например **Загрузка ЦП**, отобразится дополнительная информация.

![Панель мониторинга Apache Ambari с метриками](./media/hdinsight-hadoop-manage-ambari/hdi-metrics-dashboard.png)

На вкладке **Тепловые карты** метрики отображаются в виде цветных тепловых карт с переходом от зеленого к красному.

![Панель мониторинга Apache Ambari с тепловые карты](./media/hdinsight-hadoop-manage-ambari/hdi-heatmap-dashboard.png)

Для получения дополнительных сведений об узлах кластера выберите **Узлы**. Затем выберите конкретный интересующий вас узел.

![Сводные данные узла Apache Ambari](./media/hdinsight-hadoop-manage-ambari/ambari-host-details1.png)

### <a name="services"></a>Службы

Боковая панель **Службы** на панели мониторинга позволяет получить общее представление о состоянии служб, работающих в кластере. Различные значки обозначают состояния или действия, которые следует предпринять. Например, желтый символ перезапуска отображается, если служба должна быть перезапущена.


![Боковая панель служб Apache Ambari](./media/hdinsight-hadoop-manage-ambari/apache-ambari-service-bar.png)

> [!NOTE]  
> Для разных типов и версий кластера HDInsight отображаются разные службы. Службы, отображаемые здесь, могут отличаться от служб, отображаемых для вашего кластера.

При выборе службы для нее отобразятся более подробные сведения.

![Сводные сведения о службе Apache Ambari](./media/hdinsight-hadoop-manage-ambari/ambari-service-details.png)

#### <a name="quick-links"></a>Быстрые ссылки

Для некоторых служб в верхней части страницы отображается ссылка **Быстрые ссылки** . Эту ссылку можно использовать для доступа к веб-интерфейсам, зависящим от службы, например:

* **Журнал заданий** — журнал заданий MapReduce;
* **Диспетчер ресурсов** -YARN диспетчер ресурсов UI.
* **NameNode** — пользовательский интерфейс NameNode распределенной файловой системы Hadoop (HDFS).
* **Веб-интерфейс Oozie** — пользовательский интерфейс Oozie.

При выборе любой из этих ссылок в браузере откроется новая вкладка с выбранной страницей.

> [!NOTE]  
> При выборе элемента **Быстрые ссылки** для службы может возвращаться ошибка о том, что сервер не найден. При возникновении этой ошибки необходимо использовать туннель SSH, если для этой службы выбирается элемент **Быстрые ссылки**. Дополнительные сведения см. в статье [Использование туннелирования SSH для доступа к веб-интерфейсу Ambari, JobHistory, NameNode, Oozie и другим веб-интерфейсам](hdinsight-linux-ambari-ssh-tunnel.md).

## <a name="management"></a>Управление

### <a name="ambari-users-groups-and-permissions"></a>Пользователи, группы и разрешения Ambari

Поддерживается работа с пользователями, группами и разрешениями. Сведения о локальном администрировании см. в разделе [авторизация пользователей для Ambari представлений Apache](./hdinsight-authorize-users-to-ambari.md). Для кластеров, присоединенных к домену, см. раздел [Управление присоединенными к домену кластерами HDInsight](./domain-joined/hdinsight-security-overview.md).

> [!WARNING]  
> Не удаляйте и не изменяйте пароль устройства наблюдения Ambari (hdinsightwatchdog) в кластере HDInsight под управлением Linux. Это не позволит выполнять действия сценария или операции масштабирования в кластере.

### <a name="hosts"></a>Узлы

На странице **Узлы** перечислены все узлы в кластере. Для управления узлами, сделайте следующее.

![Обзор страницы узлов Apache Ambari](./media/hdinsight-hadoop-manage-ambari/hdinsight-hosts-page.png)

> [!NOTE]  
> В кластерах HDInsight не следует использовать добавление, списание и восстановление списанного узла.

1. Выберите узел, которым вы хотите управлять.

2. Используйте меню **действия** для выбора действия, которое требуется выполнить.

    |Элемент |Описание |
    |---|---|
    |Запустить все компоненты|Запустите все компоненты на узле.|
    |Завершение всех компонентов|Завершите работу всех компонентов на узле.|
    |Перезапустить все компоненты|Останавливает и запускает все компоненты на узле.|
    |Включить режим обслуживания|Подавляет предупреждения для узла. Этот режим должен быть включен, если выполняются действия, создающие предупреждения. Например, остановка и запуск службы.|
    |Отключение режима обслуживания|Возвращает узел для обычного оповещения.|
    |Остановить|Останавливает узел или NodeManagers на узле.|
    |Начать|Запускает node или NodeManagers на узле.|
    |Перезагрузить|Останавливает и запускает узел или NodeManagers на узле.|
    |Вывести из эксплуатации|Удаляет узел из кластера. **Не используйте это действие в кластерах HDInsight.**|
    |Перекомиссия|Добавляет ранее списанный узел в кластер. **Не используйте это действие в кластерах HDInsight.**|

### <a name="services"></a><a id="service"></a>Службы

На странице **Панель мониторинга** или **Службы** нажмите кнопку **Действия** в нижней части списка служб, чтобы остановить и снова запустить все службы.

:::image type="content" source="./media/hdinsight-hadoop-manage-ambari/ambari-service-actions.png" alt-text="Список действий службы Apache Ambari." border="true":::

> [!WARNING]  
> Для добавления новых служб следует использовать действие сценария во время подготовки кластера. Дополнительные сведения об использовании действий скрипта см. в статье [Настройка кластеров HDInsight под управлением Linux с помощью действия сценария](hdinsight-hadoop-customize-cluster-linux.md).

Хотя с помощью кнопки **Действия** можно перезапустить все службы, зачастую требуется запустить, остановить или перезапустить только одну из них. Выполните следующие действия, чтобы выполнить действия с отдельной службой.

1. На странице **Панель мониторинга** или **Службы** выберите службу.

2. В верхней части вкладки **Сводка** нажмите кнопку **Service Actions** (Действия со службой) и выберите действие, которое необходимо выполнить. Это действие перезапускает службу на всех узлах.

    ![Действия для отдельных служб Apache Ambari](./media/hdinsight-hadoop-manage-ambari/individual-service-actions.png)

   > [!NOTE]  
   > Перезапуск некоторых служб во время работы кластера может привести к формированию предупреждений. Во избежание этого можно использовать кнопку **Service Actions** (Действия со службой), чтобы включить **режим обслуживания** для службы перед выполнением перезагрузки.

3. После выбора действия значение в поле **# op** (К-во операций) в верхней части страницы увеличится, что будет свидетельствовать о выполнении фоновой операции. Если настроено отображение списка фоновых операций, этот список появится на экране.

   > [!NOTE]  
   > Если для службы включен **режим обслуживания**, не забудьте отключить его. Для этого нажмите кнопку **Service Actions** (Действия со службой) после завершения операции.

Чтобы настроить службу, сделайте следующее:

1. На странице **Панель мониторинга** или **Службы** выберите службу.

2. Перейдите на вкладку **configs (конфигурации** ). Отобразится текущая конфигурация. Отобразится также список предыдущих конфигураций.

    ![Настройка службы Apache Ambari](./media/hdinsight-hadoop-manage-ambari/ambari-service-configs.png)

3. Используйте отображаемые поля для изменения конфигурации, а затем выберите **Сохранить**. Можно также выбрать предыдущую конфигурацию, а затем выбрать **Сделать текущей** , чтобы выполнить откат к предыдущим настройкам.

## <a name="ambari-views"></a>Представления Ambari

Представления Ambari позволяют разработчикам подключать элементы пользовательского интерфейса к веб-интерфейсу Ambari, используя Apache Ambari Views Framework. HDInsight предлагает следующие представления с типами кластеров Hadoop:

* Представление Hive. Представление Hive позволяет выполнять запросы Hive прямо из браузера. Можно сохранять запросы, просматривать результаты, сохранять их в хранилище кластера или загружать результаты в локальную систему. Дополнительные сведения об использовании представлений Hive см. в статье [Use Apache Ambari Hive View with Apache Hadoop in HDInsight](hadoop/apache-hadoop-use-hive-ambari-view.md) (Использование представления Hive Apache Ambari с Apache Hadoop в HDInsight).

* Представление Tez: представление Tez позволяет лучше понять и оптимизировать задания. Можно просмотреть сведения о том, как выполняются задания Tez и какие ресурсы используются.

## <a name="unsupported-operations"></a>Неподдерживаемые операции

Следующие операции Ambari не поддерживаются в HDInsight:

* __Перемещение службы сборщика метрик__. При просмотре сведений в службе сборщика метрик одно из действий, доступных в меню действий службы, — это __Move Metrics collector__ (Переместить сборщик метрик). Это действие не поддерживается в HDInsight.

## <a name="next-steps"></a>Дальнейшие действия

* [REST API Apache Ambari](hdinsight-hadoop-manage-ambari-rest-api.md) с HDInsight.
* [Использование Apache Ambari для оптимизации конфигураций кластеров HDInsight](./hdinsight-changing-configs-via-ambari.md)
* [Масштабирование кластеров Azure HDInsight](./hdinsight-scaling-best-practices.md)
