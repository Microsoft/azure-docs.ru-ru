---
title: Как выбрать подходящий размер виртуальной машины для кластера Azure HDInsight
description: Узнайте, как выбрать подходящий размер виртуальной машины для кластера HDInsight.
keywords: размеры виртуальных машин, размеры кластеров, конфигурация кластера
ms.service: hdinsight
ms.custom: hdinsightactive
ms.topic: conceptual
ms.date: 10/09/2019
ms.openlocfilehash: 51043f0a1009994528783a1b56ec5ccec68e99b3
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "98931787"
---
# <a name="selecting-the-right-vm-size-for-your-azure-hdinsight-cluster"></a>Выбор правильного размера виртуальной машины для кластера Azure HDInsight

В этой статье описывается, как выбрать подходящий размер виртуальной машины для различных узлов в кластере HDInsight. 

Начните с понимания того, как свойства виртуальной машины, такие как обработка ЦП, размер ОЗУ и задержка сети, повлияют на обработку рабочих нагрузок. Теперь подумайте о приложении и его соответствии с различными семействами виртуальных машин, для которых они оптимизированы. Убедитесь, что семейство виртуальных машин, которое вы хотите использовать, совместимо с типом кластера, который планируется развернуть. Список всех поддерживаемых и рекомендуемых размеров виртуальных машин для каждого типа кластера см. в статье [конфигурации узлов, поддерживаемые Azure HDInsight](hdinsight-supported-node-configuration.md). Наконец, можно использовать процесс тестирования производительности для тестирования некоторых примеров рабочих нагрузок и проверки того, какой номер SKU подходит для вас.

Дополнительные сведения о планировании других аспектов кластера, таких как выбор типа хранилища или размера кластера, см. в разделе [планирование ресурсов для кластеров HDInsight](hdinsight-capacity-planning.md).

## <a name="vm-properties-and-big-data-workloads"></a>Свойства виртуальной машины и рабочие нагрузки больших данных

Размер и тип виртуальной машины определяется вычислительной мощностью ЦП, объемом оперативной памяти и задержкой сети.

- ЦП: размер виртуальной машины определяет число ядер. Чем больше ядер, тем более высокой степени распараллеливания вычислений может достичь каждый узел. Кроме того, в некоторых типах виртуальных машин используются более быстрые ядра.

- ОЗУ: размер виртуальной машины также определяет ее объем ОЗУ. В случае рабочих нагрузок, требующих хранения данных в памяти для обработки, а не их чтения с диска, следует убедиться, что на рабочих узлах достаточно памяти для размещения данных.

- Сеть. для большинства типов кластеров данные, обрабатываемые кластером, не находятся на локальном диске, а во внешней службе хранения, такой как Data Lake Storage или служба хранилища Azure. Оцените пропускную способность сети и пропускную способность между виртуальной машиной узла и службой хранилища. Как правило, пропускная способность сети виртуальной машины большего размера также выше. Дополнительные сведения см. в разделе [Размеры виртуальных машин Linux в Azure](../virtual-machines/sizes.md).

## <a name="understanding-vm-optimization"></a>Основные сведения об оптимизации виртуальных машин

Семейства виртуальных машин в Azure оптимизированы в соответствии с различными вариантами использования. В таблице ниже можно найти некоторые из наиболее популярных вариантов использования и семейств виртуальных машин, соответствующих им.

| Тип                     | Размеры           |    Описание       |
|--------------------------|-------------------|------------------------------------------------------------------------------------------------------------------------------------|
| [Начального уровня](../virtual-machines/sizes-general.md)          | A, Av2  | Производительность ЦП и конфигурации памяти лучше всего подходят для рабочих нагрузок начального уровня, таких как разработка и тестирование. Они являются экономичными и предоставляют недорогой вариант, чтобы начать работу с Azure. |
| [Общего назначения](../virtual-machines/sizes-general.md)          | D, DSv2, Dv2  | Сбалансированное соотношение ресурсов ЦП и памяти. Идеальное решение для тестирования и разработки, небольших и средних баз данных, а также веб-серверов с небольшим или средним объемом трафика. |
| [Оптимизированные для вычислений](../virtual-machines/sizes-compute.md)        | F           | Высокое соотношение ресурсов ЦП и памяти. Подходят для веб-серверов со средним объемом трафика, сетевых устройств, пакетных процессов и серверов приложений.        |
| [Оптимизированные для памяти](../virtual-machines/sizes-memory.md)         | Esv3, Ev3  | Высокое соотношение ресурсов памяти и ядра. Отлично подходят для серверов реляционной базы данных, кэша среднего и большого объема, а также выполняющейся в памяти аналитики.                 |

- Сведения о ценах на доступные экземпляры виртуальных машин в регионах, поддерживаемых HDInsight, см. на странице [цен на hdinsight](https://azure.microsoft.com/pricing/details/hdinsight/).

## <a name="cost-saving-vm-types-for-light-workloads"></a>Затраты на сохранение типов виртуальных машин для облегченных рабочих нагрузок

Если у вас есть требования к обработке освещения, то [серия F](https://azure.microsoft.com/blog/f-series-vm-size/) может быть хорошим выбором для начала работы с HDInsight. Предлагая более низкую ориентировочную стоимость часа, серия F обеспечивает наилучшее соотношение цены и производительности в портфеле Azure в единицах вычисления Azure (ACU) на виртуальный ЦП.

В следующей таблице описаны типы и типы узлов кластера, которые можно создать с помощью виртуальных машин серии серия fsv2.

| Тип кластера | Версия | Рабочий узел | Головной узел | Узел Zookeeper |
|---|---|---|---|---|
| Spark | Все | F4 и выше | Нет | Нет |
| Hadoop | Все | F4 и выше | Нет | Нет |
| Kafka | Все | F4 и выше | Нет | Нет |
| HBase | Все | F4 и выше | Нет | Нет |
| LLAP | disabled | Нет | Нет | Нет |
| Буря | disabled | Нет | Нет | Нет |
| Служба "Машинное обучение" | ТОЛЬКО HDI 3,6 | F4 и выше | Нет | Нет |

Спецификации каждого номера SKU серии F см. в статье [размеры виртуальных машин серии](https://azure.microsoft.com/blog/f-series-vm-size/)f.

## <a name="benchmarking"></a>Тестирование производительности

Тестирование производительности — это процесс запуска смоделированных рабочих нагрузок на разных виртуальных машинах для измерения того, насколько хорошо они будут выполняться в рабочих нагрузках. 

Дополнительные сведения о тестировании производительности для номеров SKU и кластеров виртуальных машин см. [в статье Планирование емкости кластера в Azure HDInsight ](hdinsight-capacity-planning.md#choose-the-vm-size-and-type).

## <a name="next-steps"></a>Дальнейшие действия

- [Поддерживаемые конфигурации узлов Azure HDInsight](hdinsight-supported-node-configuration.md)
- [Размеры виртуальных машин Linux в Azure](../virtual-machines/sizes.md)