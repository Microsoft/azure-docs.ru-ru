---
title: Метод преобразования переводчика
titleSuffix: Azure Cognitive Services
description: Сведения о параметрах, заголовках и тексте сообщений для метода преобразования в Azure Cognitive Services Translator для перевода текста.
services: cognitive-services
author: laujan
manager: nitinme
ms.service: cognitive-services
ms.subservice: translator-text
ms.topic: reference
ms.date: 08/06/2020
ms.author: lajanuar
ms.openlocfilehash: d46fef0159b983f2685be40e2a0ab5471b96883b
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "98895447"
---
# <a name="translator-30-translate"></a>Переводчик 3,0: преобразование

Этот интерфейс позволяет переводить текст.

## <a name="request-url"></a>URL-адрес запроса

Отправьте запрос `POST` на следующий адрес.

```HTTP
https://api.cognitive.microsofttranslator.com/translate?api-version=3.0
```

## <a name="request-parameters"></a>Параметры запроса

В таблице ниже приведены параметры, которые передаются в строке запроса.

### <a name="required-parameters"></a>Необходимые параметры

<table width="100%">
  <th width="20%">Параметр запроса</th>
  <th>Описание</th>
  <tr>
    <td>api-version</td>
    <td><em>Обязательный параметр</em>.<br/>Версия API, запрошенная клиентом. Необходимое значение: <code>3.0</code>.</td>
  </tr>
  <tr>
    <td>значение</td>
    <td><em>Обязательный параметр</em>.<br/>Определяет язык выходного текста. Целевой язык должен быть одним из <a href="./v3-0-languages.md">поддерживаемых языков</a>, включенных в область <code>translation</code>. Например, используйте параметр <code>to=de</code>, чтобы перевести на немецкий.<br/>Вы можете одновременно переводить на различные языки, использовав этот параметр в строке запроса несколько раз. Например, используйте параметр <code>to=de&to=it</code>, чтобы перевести на немецкий и итальянский.</td>
  </tr>
</table>

### <a name="optional-parameters"></a>Необязательные параметры

<table width="100%">
  <th width="20%">Параметр запроса</th>
  <th>Описание</th>
  <tr>
    <td>из</td>
    <td><em>Необязательный параметр</em>.<br/>Определяет язык оригинального текста. Чтобы просмотреть, какие языки доступны для перевода, выполните поиск <a href="./v3-0-languages.md">поддерживаемых языков</a>, используя область <code>translation</code>. Если параметр <code>from</code> не указан, исходный язык определяется автоматически. <br/><br/><code>from</code>При использовании функции <a href="/azure/cognitive-services/translator/dynamic-dictionary">динамического словаря</a> необходимо использовать параметр, а не автообнаружение.</td>
  </tr>  
  <tr>
    <td>textType</td>
    <td><em>Необязательный параметр</em>.<br/>Определяет, является ли текст перевода обычным или HTML-текстом. Любой код HTML должен быть полным элементом с правильным форматом. Возможные значения: <code>plain</code> (по умолчанию) или <code>html</code>.</td>
  </tr>
  <tr>
    <td>категория</td>
    <td><em>Необязательный параметр</em>.<br/>Строка, где указано категорию (домен) перевода. Этот параметр позволяет получить переводы из пользовательской системы, созданной с помощью <a href="../customization.md">Custom Translator</a>. Добавьте идентификатор категории из <a href="/azure/cognitive-services/translator/custom-translator/how-to-create-project#view-project-details">сведений о проекте</a> пользовательского переводчика в этот параметр, чтобы использовать развернутую настроенную систему. Значение по умолчанию: <code>general</code>.</td>
  </tr>
  <tr>
    <td>profanityAction</td>
    <td><em>Необязательный параметр</em>.<br/>Указывает способ обработки нецензурной лексики в переводе. Возможные значения: <code>NoAction</code> (по умолчанию), <code>Marked</code> или <code>Deleted</code>. Способы работы с нецензурной лексикой см. в <a href="#handle-profanity">этом разделе</a>.</td>
  </tr>
  <tr>
    <td>profanityMarker</td>
    <td><em>Необязательный параметр</em>.<br/>Указывает, каким образом нецензурная лексика должна помечаться в переводе. Возможные значения: <code>Asterisk</code> (по умолчанию) или <code>Tag</code>. Способы работы с нецензурной лексикой см. в <a href="#handle-profanity">этом разделе</a>.</td>
  </tr>
  <tr>
    <td>includeAlignment</td>
    <td><em>Необязательный параметр</em>.<br/>Указывает, следует ли применять выравнивание из оригинального текста в переводе. Возможные значения: <code>true</code> или <code>false</code> (по умолчанию). </td>
  </tr>
  <tr>
    <td>includeSentenceLength</td>
    <td><em>Необязательный параметр</em>.<br/>Указывает, следует ли включать границы предложения оригинального и переведенного текста. Возможные значения: <code>true</code> или <code>false</code> (по умолчанию).</td>
  </tr>
  <tr>
    <td>suggestedFrom</td>
    <td><em>Необязательный параметр</em>.<br/>Указывает автоматический язык, если не удается определить язык оригинального текста. Если параметр не указан <code>from</code>, язык определяется автоматически. Если обнаружение завершается сбоем, используется язык <code>suggestedFrom</code>.</td>
  </tr>
  <tr>
    <td>fromScript</td>
    <td><em>Необязательный параметр</em>.<br/>Указывает сценарий оригинального текста.</td>
  </tr>
  <tr>
    <td>toScript</td>
    <td><em>Необязательный параметр</em>.<br/>Указывает скрипт переведенного текста.</td>
  </tr>
  <tr>
    <td>allowFallback</td>
    <td><em>Необязательный параметр</em>.<br/>Указывает, что службе разрешено выполнять возврат к общей системе, если пользовательская система не существует. Возможные значения: <code>true</code> (по умолчанию) или <code>false</code>.<br/><br/><code>allowFallback=false</code> указывает, что для перевода должны использоваться только те обученные для <code>category</code> системы, которые указаны в запросе. Если для перевода с языка X на язык Y требуется связывание с помощью переходного языка E, все системы в цепочке (X->E и E->Y) должны быть пользовательскими и в одной и той же категории. Если система с определенной категорией не найдена, запрос вернет код состояния 400. <code>allowFallback=true</code> указывает, что службе разрешено выполнять возврат к общей системе, если пользовательская система не существует.
</td>
  </tr>
</table> 

Заголовки запроса:

<table width="100%">
  <th width="20%">Заголовки</th>
  <th>Описание</th>
  <tr>
    <td>Заголовки для проверки подлинности</td>
    <td><em>Обязательный заголовок запроса</em>.<br/>См. <a href="/azure/cognitive-services/translator/reference/v3-0-reference#authentication">описание доступных способов аутентификации</a>.</td>
  </tr>
  <tr>
    <td>Content-Type</td>
    <td><em>Обязательный заголовок запроса</em>.<br/>Указывает тип содержимого для полезных данных.<br/> Допустимое значение: <code>application/json; charset=UTF-8</code>.</td>
  </tr>
  <tr>
    <td>Content-Length</td>
    <td><em>Обязательный заголовок запроса</em>.<br/>Длина текста запроса.</td>
  </tr>
  <tr>
    <td>X-ClientTraceId</td>
    <td><em>Необязательно</em>.<br/>Созданный клиентом идентификатор GUID, позволяющий уникально идентифицировать запрос. Этот заголовок можно опустить, если в строке запроса указан идентификатор трассировки в параметре с именем <code>ClientTraceId</code>.</td>
  </tr>
</table> 

## <a name="request-body"></a>Текст запроса

Текст запроса является массивом в формате JSON. Каждый элемент этого массива представляет собой объект JSON со строковым свойством `Text`, который являет собой строку для перевода.

```json
[
    {"Text":"I would really like to drive your car around the block a few times."}
]
```

Действительны следующие ограничения.

* Массив может содержать не более 100 элементов.
* Весь текст, включенный в запрос, не может содержать более 10 000 символов, включая пробелы.

## <a name="response-body"></a>Текст ответа

Успешный ответ возвращается в формате массива JSON с одним результатом для каждой строки входного массива. Объект результата содержит следующие свойства.

  * `detectedLanguage` — объект, описывающий распознанный язык с помощью следующих свойств:

      * `language` — строку, которая представляет код обнаруженного языка.

      * `score` — значение с плавающей запятой, обозначающее достоверность результата. Может принимать ноль или единицу, где низкая оценка обозначает низкую достоверность.

    Свойство `detectedLanguage` присутствует в объекте результатов только при запросе автоматического распознавания языка.

  * `translations` — массив результатов перевода. Размер массива совпадает с количеством языков, указанных с помощью параметра запроса `to`. Каждый элемент массива содержит:

    * `to` — строка, которая содержит код целевого языка.

    * `text` — строка с текстом перевода.

    * `transliteration` — объект, который возвращает переведенный текст в сценарии, указанном в параметре `toScript`.

      * `script` — строка, которая указывает целевой сценарий.   

      * `text` — строка, которая возвращает целевой текст в целевом сценарии.

    Если не выполняется транслитерация, объект `transliteration` не включается.

    * `alignment` — объект с одним свойством строки `proj`, который преобразовывает оригинальный текст в переведенный. Сведения о выравнивании предоставляются, только когда параметр запроса `includeAlignment` имеет значение `true`. Сведения о выравнивании возвращаются в виде строкового значения в следующем формате: `[[SourceTextStartIndex]:[SourceTextEndIndex]–[TgtTextStartIndex]:[TgtTextEndIndex]]`.  Двоеточие разделяет начальный и конечный индексы, дефис — языки, а пробел — слова. Одно слово может соответствовать нулю, одному или нескольким словам другого языка. При этом сопоставленные слова могут не располагаться рядом. Если сведения о выравнивании недоступны, элемент Alignment будет пустым. Примеры и ограничения см. в разделе [Получение сведений о выравнивании](#obtain-alignment-information).

    * `sentLen` — объект, возвращающий границы предложения в оригинальном и переведенном текстах.

      * `srcSentLen` — массив целых чисел, представляющих значения длины предложений в оригинальном тексте. Длина массива соответствует количеству предложений, а значения — длине каждого предложения.

      * `transSentLen` — массив целых чисел, представляющих значения длины предложений в переведенном тексте. Длина массива соответствует количеству предложений, а значения — длине каждого предложения.

    Границы предложения включены только тогда, когда параметр запроса `includeSentenceLength` имеет значение `true`.

  * `sourceText` — объект с одним свойством строки `text`, который возвращает оригинальный текст в сценарии по умолчанию исходного языка. `sourceText` свойство присутствует только в том случае, если входные данные выражаются в сценарии, который не является обычным для этого языка. Например, если входные данные были на арабском языке, но написаны латинским алфавитом, тогда параметр `sourceText.text` вернет текст на арабском языке, преобразованным в арабский сценарий.

Примеры ответов JSON приведены в [этом разделе](#examples).

## <a name="response-headers"></a>Заголовки ответов

<table width="100%">
  <th width="20%">Заголовки</th>
  <th>Описание</th>
    <tr>
    <td>X-RequestId</td>
    <td>Сформированное службой значение для идентификации запроса. Оно используется для устранения неполадок.</td>
  </tr>
  <tr>
    <td>X-MT-System</td>
    <td>Указывает тип системы, который использовался для перевода каждого целевого языка, запрошенного для перевода. Это значение представляет собой список строк, разделенных запятыми. Каждая строка обозначает тип:<br/><ul><li>Пользовательский — запрос включает в себя пользовательскую систему и по крайней мере одна пользовательская система использовалась во время перевода.</li><li>Команда — все остальные запросы.</li></td>
  </tr>
</table> 

## <a name="response-status-codes"></a>Коды состояния ответа

Ниже приведены возможные коды состояния HTTP, которые возвращает запрос. 

<table width="100%">
  <th width="20%">Код состояния</th>
  <th>Описание</th>
  <tr>
    <td>200</td>
    <td>Успешно.</td>
  </tr>
  <tr>
    <td>400</td>
    <td>Один из параметров запроса отсутствует или является недопустимым. Исправьте параметры запроса и повторите попытку.</td>
  </tr>
  <tr>
    <td>401</td>
    <td>Не удалось выполнить аутентификацию запроса. Убедитесь, что указаны допустимые учетные данные.</td>
  </tr>
  <tr>
    <td>403</td>
    <td>Запрос не авторизован. Подробные сведения можно найти в сообщении об ошибке. Чаще всего это означает, что достигнут лимит бесплатных операций перевода, включенных в пробную подписку.</td>
  </tr>
  <tr>
    <td>408</td>
    <td>Не удалось выполнить запрос, так как отсутствует ресурс. Подробные сведения можно найти в сообщении об ошибке. При применении пользовательской <code>category</code> это означает, что пользовательская система перевода еще недоступна для обслуживания запросов. Запрос необходимо повторить после периода ожидания (например, 1 минута).</td>
  </tr>
  <tr>
    <td>429</td>
    <td>Сервер отклонил запрос, так как клиент превысил лимиты запросов.</td>
  </tr>
  <tr>
    <td>500</td>
    <td>Произошла непредвиденная ошибка. Если ошибка сохраняется, передайте отчет о ней, включив следующие данные: дата и время сбоя, идентификатор запроса из заголовка ответа <code>X-RequestId</code> и идентификатор клиента из заголовка запроса <code>X-ClientTraceId</code>.</td>
  </tr>
  <tr>
    <td>503</td>
    <td>Сервер временно недоступен. Повторите запрос. Если ошибка сохраняется, передайте отчет о ней, включив следующие данные: дата и время сбоя, идентификатор запроса из заголовка ответа <code>X-RequestId</code> и идентификатор клиента из заголовка запроса <code>X-ClientTraceId</code>.</td>
  </tr>
</table> 

Если возникнет ошибка, запрос также вернет ответ JSON с ошибкой. Код ошибки представляет собой число из 6 знаков, первые 3 из которых являются кодом состояния HTTP, а оставшиеся 3 цифры определяют категорию ошибки. Общие коды ошибок можно найти на [странице справочника по транслятору v3](./v3-0-reference.md#errors). 

## <a name="examples"></a>Примеры

### <a name="translate-a-single-input"></a>Перевод отдельного элемента

В этом примере показано, как перевести одно предложение с английского языка на упрощенный китайский.

```curl
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&from=en&to=zh-Hans" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'Hello, what is your name?'}]"
```

Текст ответа:

```
[
    {
        "translations":[
            {"text":"你好, 你叫什么名字？","to":"zh-Hans"}
        ]
    }
]
```

Массив `translations` содержит один элемент, который обеспечивает перевод одного элемента текста в оригинальных данных.

### <a name="translate-a-single-input-with-language-auto-detection"></a>Перевод отдельного элемента с использованием автоматического определения языка

В этом примере показано, как перевести одно предложение с английского языка на упрощенный китайский. В запросе не указан язык ввода. Вместо этого используется автоматическое определение исходного языка.

```curl
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=zh-Hans" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'Hello, what is your name?'}]"
```

Текст ответа:

```
[
    {
        "detectedLanguage": {"language": "en", "score": 1.0},
        "translations":[
            {"text": "你好, 你叫什么名字？", "to": "zh-Hans"}
        ]
    }
]
```
Ответ похож на ответ из предыдущего примера. Так как было запрошено автоматическое определение языка, ответ также включает сведения о языке оригинального текста. Автоматическое определение языка работает с более длинным входным текстом.

### <a name="translate-with-transliteration"></a>Перевод методом транслитерации

Давайте расширим предыдущий пример, добавив метод транслитерации. В следующем запросе используется китайский текст, написанный латинским алфавитом.

```curl
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&to=zh-Hans&toScript=Latn" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'Hello, what is your name?'}]"
```

Текст ответа:

```
[
    {
        "detectedLanguage":{"language":"en","score":1.0},
        "translations":[
            {
                "text":"你好, 你叫什么名字？",
                "transliteration":{"script":"Latn", "text":"nǐ hǎo , nǐ jiào shén me míng zì ？"},
                "to":"zh-Hans"
            }
        ]
    }
]
```

Результат перевода теперь включает свойство `transliteration`, которое возвращает переведенный текст, написанный символами латиницы.

### <a name="translate-multiple-pieces-of-text"></a>Перевод нескольких фрагментов текста

Одновременный перевод нескольких строк — это просто вопрос задания массива строк в тексте запроса.

```curl
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&from=en&to=zh-Hans" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'Hello, what is your name?'}, {'Text':'I am fine, thank you.'}]"
```

Ответ содержит перевод всех фрагментов текста в том же порядке, что и в запросе.
Текст ответа:

```
[
    {
        "translations":[
            {"text":"你好, 你叫什么名字？","to":"zh-Hans"}
        ]
    },            
    {
        "translations":[
            {"text":"我很好，谢谢你。","to":"zh-Hans"}
        ]
    }
]
```

### <a name="translate-to-multiple-languages"></a>Перевод на несколько языков

В этом примере показано, как перевести одинаковый оригинальный текст на несколько языков в одном запросе.

```curl
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&from=en&to=zh-Hans&to=de" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'Hello, what is your name?'}]"
```

Текст ответа:

```
[
    {
        "translations":[
            {"text":"你好, 你叫什么名字？","to":"zh-Hans"},
            {"text":"Hallo, was ist dein Name?","to":"de"}
        ]
    }
]
```

### <a name="handle-profanity"></a>Работа с нецензурной лексикой

Обычно служба переводов сохраняет в переводе ненормативную лексику, которая присутствует в источнике. Степень нецензурности и оскорбительность контекста отличаются в разных культурах и в результате этого степень нецензурности в переводе может вырасти или уменьшится.

Если необходимо избежать появления ненормативной лексики при переводе (независимо от наличия ненормативной лексики в источнике), можно использовать параметр фильтрации ненормативной лексики. Этот параметр позволяет выбрать, что нужно делать с нецензурной лексикой: удалить, пометить ее соответствующими тегами (что дает возможность добавить собственный метод постобработки) или ничего не предпринимать. Допустимые значения `ProfanityAction`: `Deleted` , `Marked` и `NoAction`(по умолчанию).

<table width="100%">
  <th width="20%">ProfanityAction</th>
  <th>Действие</th>
  <tr>
    <td><code>NoAction</code></td>
    <td>Это поведение установлено по умолчанию. Ненормативная лексика оригинального текста сохранится в переводе.<br/><br/>
    <strong>Пример исходного текста (японский).</strong> 彼はジャッカスです。<br/>
    <strong>Пример перевода (на русский).</strong> Он — придурок.
    </td>
  </tr>
  <tr>
    <td><code>Deleted</code></td>
    <td>Оскорбительные слова будут удалены из выходных данных без замены.<br/><br/>
    <strong>Пример исходного текста (японский).</strong> 彼はジャッカスです。<br/>
    <strong>Пример перевода (на русский)</strong>: Он —.
    </td>
  </tr>
  <tr>
    <td><code>Marked</code></td>
    <td>Нецензурную лексику в выходных данных заменяют маркеры. Маркер зависит от параметра <code>ProfanityMarker</code>.<br/><br/>
Если установлен параметр <code>ProfanityMarker=Asterisk</code>, нецензурную лексику заменяют символы <code>***</code>:<br/>
    <strong>Пример исходного текста (японский).</strong> 彼はジャッカスです。<br/>
    <strong>Пример перевода (английский)</strong> \* \* \* .<br/><br/>
Если установлен параметр <code>ProfanityMarker=Tag</code>, нецензурная лексика выделяется XML-тегами &lt;profanity&gt; и &lt;/profanity/&gt;:<br/>
    <strong>Пример исходного текста (японский).</strong> 彼はジャッカスです。<br/>
    <strong>Пример перевода (на русский).</strong>Он – &lt;profanity&gt;придурок&lt;/profanity&gt;.
  </tr>
</table> 

Пример:

```curl
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&from=en&to=de&profanityAction=Marked" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'This is a freaking good idea.'}]"
```
Возвращаемые данные:

```
[
    {
        "translations":[
            {"text":"Das ist eine *** gute Idee.","to":"de"}
        ]
    }
]
```

Сравнение:

```curl
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&from=en&to=de&profanityAction=Marked&profanityMarker=Tag" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'This is a freaking good idea.'}]"
```

Последний запрос возвращает:

```
[
    {
        "translations":[
            {"text":"Das ist eine <profanity>verdammt</profanity> gute Idee.","to":"de"}
        ]
    }
]
```

### <a name="translate-content-with-markup-and-decide-whats-translated"></a>Перевод содержимого с исправлениями и определение переведенного текста

Чаще всего переводится содержимое, которое включает исправления, например содержимое HTML-страниц или XML-документа. Включите параметр запроса `textType=html` при переводе содержимого с тегами. Кроме того, иногда бывает полезно исключить из перевода конкретное содержимое. С помощью атрибута `class=notranslate` можно указать содержимое, которое должно остаться не переведенным. В следующем примере содержимое внутри первого элемента `div` не будет переведено, в то время как содержимое во втором элементе `div` будет переведено.

```
<div class="notranslate">This will not be translated.</div>
<div>This will be translated. </div>
```

Пример запроса приведен ниже.

```curl
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&from=en&to=zh-Hans&textType=html" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'<div class=\"notranslate\">This will not be translated.</div><div>This will be translated.</div>'}]"
```

Ответ:

```
[
    {
        "translations":[
            {"text":"<div class=\"notranslate\">This will not be translated.</div><div>这将被翻译。</div>","to":"zh-Hans"}
        ]
    }
]
```

### <a name="obtain-alignment-information"></a>Получить сведения о выравнивании

Сведения о сопоставлении возвращаются в виде строкового значения в следующем формате для каждого слова источника. Сведения о каждом слове разделяются пробелом, в том числе в языках (системах письменности) без разделения пробелами, таких как китайский:

[[SourceTextStartIndex]:[SourceTextEndIndex]–[TgtTextStartIndex]:[TgtTextEndIndex]] *

Пример строки со сведениями о сопоставлении: 0:0-7:10 1:2-11:20 3:4-0:3 3:4-4:6 5:5-21:21.

Иными словами, двоеточие разделяет начальный и конечный индексы, дефис — языки, а пробел — слова. Одно слово может соответствовать нулю, одному или нескольким словам другого языка. При этом сопоставленные слова могут не располагаться рядом. Если сведения о сопоставлении недоступны, элемент Alignment будет пустым. В этом случае метод не возвращает ошибку.

Чтобы получить сведения о выравнивании, укажите параметр `includeAlignment=true` в строке запроса.

```curl
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&from=en&to=fr&includeAlignment=true" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'The answer lies in machine translation.'}]"
```

Ответ:

```
[
    {
        "translations":[
            {
                "text":"La réponse se trouve dans la traduction automatique.",
                "to":"fr",
                "alignment":{"proj":"0:2-0:1 4:9-3:9 11:14-11:19 16:17-21:24 19:25-40:50 27:37-29:38 38:38-51:51"}
            }
        ]
    }
]
```

Сведения о выравнивании начинаются со строки `0:2-0:1`. Это значит, что первые три символа в исходном тексте (`The`) сопоставляются с двумя первыми символами в переведенном тексте (`La`).

#### <a name="limitations"></a>Ограничения
Получение сведений о выравнивании — это экспериментальная функция, которую мы включили для исследования и взаимодействия с потенциальными сопоставлениями фраз. В будущем мы можем больше не поддерживать это. Ниже приведены некоторые важные ограничения, в которых не поддерживаются варианты выравнивания.

* Выравнивание недоступно для текста в формате HTML, т. е. Тексттипе = HTML
* Сведения о выравнивании возвращаются только для группы языковых пар:
  - Английский или с любого другого языка, кроме китайского традиционного, кантонский (традиционное письмо) или сербского (кириллица).
  - с японского на корейский или с корейского на японский.
  - от японского до китайского упрощенного и китайского языка, упрощенного до японского. 
  - с китайского языка, упрощенного и китайского традиционного и китайского упрощенного. 
* Вы не получите сведения о выравнивании, если предложение является законченным переводом. Примеры таких переводов — "Это тест", "Я люблю тебя" и другие предложения, встречающиеся с высокой частотой.
* Выравнивание недоступно при применении любого из подходов для предотвращения перевода, как описано [здесь](../prevent-translation.md) .

### <a name="obtain-sentence-boundaries"></a>Установка границ предложения

Чтобы получать сведения о длине предложения в исходном тексте и переводе, укажите параметр `includeSentenceLength=true` в строке запроса.

```curl
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&from=en&to=fr&includeSentenceLength=true" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'The answer lies in machine translation. The best machine translation technology cannot always provide translations tailored to a site or users like a human. Simply copy and paste a code snippet anywhere.'}]"
```

Ответ:

```
[
    {
        "translations":[
            {
                "text":"La réponse se trouve dans la traduction automatique. La meilleure technologie de traduction automatique ne peut pas toujours fournir des traductions adaptées à un site ou des utilisateurs comme un être humain. Il suffit de copier et coller un extrait de code n’importe où.",
                "to":"fr",
                "sentLen":{"srcSentLen":[40,117,46],"transSentLen":[53,157,62]}
            }
        ]
    }
]
```

### <a name="translate-with-dynamic-dictionary"></a>Перевод с помощью динамического словаря

Если вы уже знаете перевод, который хотите применить к слову или фразе, вы можете указать его в запросе как исправление. Динамический словарь является надежным только для собственных существительных, таких как личные имена и имена продуктов.

В разметке используется следующий синтаксис:

``` 
<mstrans:dictionary translation="translation of phrase">phrase</mstrans:dictionary>
```

Например, рассмотрим следующее русское предложение: "Слово "словоматик" — это словарная запись". Чтобы сохранить при переводе слово _словоматик_, необходимо отправить запрос:

```
curl -X POST "https://api.cognitive.microsofttranslator.com/translate?api-version=3.0&from=en&to=de" -H "Ocp-Apim-Subscription-Key: <client-secret>" -H "Content-Type: application/json; charset=UTF-8" -d "[{'Text':'The word <mstrans:dictionary translation=\"wordomatic\">word or phrase</mstrans:dictionary> is a dictionary entry.'}]"
```

Результат:

```
[
    {
        "translations":[
            {"text":"Das Wort \"wordomatic\" ist ein Wörterbucheintrag.","to":"de"}
        ]
    }
]
```

Эта возможность работает одинаково как с `textType=text`, так и с `textType=html`. Компонент должен использоваться только в случае необходимости. Соответствующий и гораздо лучший способ настройки перевода — это использование концентратора Custom Translator. Custom Translator обеспечивает полное использование контекста и статистические значения вероятности. Если вы имеете или можете позволить себе создавать учебные данные, которые показывают вашу работу или фразу в контексте, вы получите гораздо лучшие результаты. Дополнительные [сведения о пользовательском трансляторе](../customization.md).