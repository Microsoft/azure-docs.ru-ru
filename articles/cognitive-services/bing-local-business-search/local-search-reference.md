---
title: Справочник по API локального поиска для бизнеса Bing версии 7
titleSuffix: Azure Cognitive Services
description: В этой статье содержатся технические сведения об объектах ответов, а также о параметрах и заголовках запросов, влияющих на результаты поиска.
services: cognitive-services
author: aahill
manager: nitinme
ms.service: cognitive-services
ms.subservice: bing-local-business
ms.topic: conceptual
ms.date: 11/01/2018
ms.author: rosh
ms.openlocfilehash: 9791d99598fe3d043c42a37e2f4993edd6c5b3ba
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96487139"
---
# <a name="bing-local-business-search-api-v7-reference"></a>Справочник по API Bing Local Business Search версии 7

> [!WARNING]
> API Поиска Bing будут перенесены из Cognitive Services в службы Поиска Bing. С **30 октября 2020 г.** подготовку всех новых экземпляров Поиска Bing необходимо будет выполнять в соответствии с процедурой, описанной [здесь](/bing/search-apis/bing-web-search/create-bing-search-service-resource).
> API-интерфейсы Поиска Bing, подготовленные с помощью Cognitive Services, будут поддерживаться в течение следующих трех лет или до завершения срока действия вашего Соглашения Enterprise (в зависимости от того, какой период окончится раньше).
> Инструкции по миграции см. в статье о [службах Поиска Bing](/bing/search-apis/bing-web-search/create-bing-search-service-resource).

API Bing Local Business Search отправляет поисковый запрос Bing, чтобы получить результаты, которые включают рестораны, отели или других местные бизнесы. При поиске мест запрос может указывать имя местного бизнеса или категории (например, ближайших ресторанов). В результатах поиска сущностей содержатся субъекты, места или вещи. Место в этом контексте — это бизнес-сущности, Штаты, страны и регионы и т. д.  

В следующих разделах приведены технические сведения об объектах ответа, параметрах и заголовках запроса, которые влияют на результаты поиска. См. в статьях [Quickstart: Send a query to the Bing Local Business Search API in C#](quickstarts/local-quickstart.md) (Краткое руководство. Отправить запрос API Bing Local Business Search на языке C#) или [Quickstart: Send a query to the Bing Local Business Search API using Java](quickstarts/local-search-java-quickstart.md)(Краткое руководство. Отправить запрос API Bing Local Business Search на языке Java) примеры того, как выполнять запросы. 
  
Сведения о заголовках, которые должны включать запросы, см. в разделе [Заголовки](#headers).  
  
См. дополнительные сведения [параметрах запросов](#query-parameters).  
  
См. дополнительные сведения об [объектах JSON, которые содержит ответ](#response-objects).

Сведения о разрешенном использовании и отображении результатов см. в статье [Project Answer Search use and display requirements](../bing-web-search/use-display-requirements.md) (Использование и отображение требований к службе поиска ответов в проектах).


  
## <a name="endpoint"></a>Конечная точка  
Чтобы запросить результаты местного бизнеса, отправьте запрос GET. 

``` 
https://api.cognitive.microsoft.com/bing/v7.0/localbusinesses/search

```
  
Для отправки запроса следует использовать протокол HTTPS.  
  
> [!NOTE]
> Максимальный размер URL-адреса составляет 2,048 символов. Чтобы длина вашего URL-адреса не превышала ограничение, максимальная длина ваших параметров запроса должна быть менее 1500 символов. Если длина URL-адреса превышает 2048 символов, сервер возвращает ошибку 404 (страница не найдена).  
  
  
## <a name="headers"></a>Заголовки  
Ниже приведены заголовки, которые могут включать запрос и ответ.  
  
|Header|Описание|  
|------------|-----------------|  
|Принять|Дополнительный заголовок запроса.<br /><br /> Тип мультимедиа по умолчанию — это приложение или JSON. Чтобы указать, что в ответе используется [JSON-LD](https://json-ld.org/), задайте для заголовка Accept приложение или JSON+LD в качестве значения.|  
|<a name="acceptlanguage"></a>Accept-Language|Дополнительный заголовок запроса.<br /><br /> Список разделенных запятыми языков, используемых для строк пользовательского интерфейса. В этом списке языки указаны в порядке убывания по приоритету. Дополнительные сведения, включая ожидаемый формат, см. в [этой статье](https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).<br /><br /> Этот заголовок и параметр запроса [setLang](#setlang) являются взаимоисключающими &mdash;, не указывайте оба.<br /><br /> Если задать этот заголовок, также необходимо указать параметр запроса cc. Чтобы определить рынок для возврата результатов, Bing использует первый поддерживаемый язык, который он находит в списке, и объединяет его со значением параметра `cc`. Если в список не включен поддерживаемый язык, Bing находит ближайший язык и рынок, который поддерживает запрос, или использует вычисление или рынок по умолчанию для результатов. Чтобы определить рынок, используемый Bing, см. заголовок BingAPIs-Market.<br /><br /> Используйте этот заголовок и параметр запроса `cc`, только если указывается несколько языков. В противном случае используйте параметры запроса [mkt](#mkt) и [setLang](#setlang).<br /><br /> Строка пользовательского интерфейса — это строка, которая используется как метка в пользовательском интерфейсе. Есть несколько строк пользовательского интерфейса в объектах ответа JSON. Все ссылки на свойства Bing.com в объектах ответа применяют указанный язык.|  
|<a name="market"></a>BingAPIs-Market|Заголовок ответа.<br /><br /> Рынок, используемый для запроса. Форма имеет вид \<languageCode\> - \<countryCode\> . Например, en-US.|  
|<a name="traceid"></a>BingAPIs-TraceId|Заголовок ответа.<br /><br /> Идентификатор записи журнала, содержащей сведения о запросе. В случае ошибки запишите этот код. Если вы не можете определить и устранить проблему, укажите этот идентификатор вместе с другой информацией в запросе к группе поддержки.|  
|<a name="subscriptionkey"></a>Ocp-Apim-Subscription-Key|Обязательный заголовок запроса.<br /><br /> Ключ подписки, полученный при регистрации для использования этой службы в [Cognitive Services](https://www.microsoft.com/cognitive-services/).|  
|<a name="pragma"></a>Pragma|Дополнительный заголовок запроса.<br /><br /> По умолчанию Bing возвращает кэшированное содержимое, если оно доступно. Чтобы Bing не возвращал кэшированное содержимое, установите для заголовка Pragma значение no-cache (например, Pragma:no-cache).
|<a name="useragent"></a>User-Agent|Дополнительный заголовок запроса.<br /><br /> Агент пользователя, отправивший запрос. Bing использует агент пользователя, чтобы обеспечить оптимизированное взаимодействие для мобильных пользователей. Приведенный ниже заголовок является необязательным, но его также рекомендуется указать.<br /><br /> Заголовок User-Agent должен содержать ту же строку, которую отправляет любой широко используемый браузер. Дополнительные сведения об агентах пользователя см. в [этой статье](https://www.w3.org/Protocols/rfc2616/rfc2616-sec14.html).<br /><br /> Ниже приведены примеры использования строк user-agent.<br /><ul><li>Windows Phone &mdash; Mozilla/5.0 (совместим; MSIE 10.0; Windows Phone 8.0; Trident/6.0; IEMobile/10.0; ARM; Touch; NOKIA; Lumia 822)<br /><br /></li><li>Android &mdash; Mozilla/5.0 (Linux; U; Android 2.3.5; en-us; Sch-I500 сборки/GINGERBREAD) AppleWebKit/533.1 (KHTML; как Gecko) версии/4.0 Mobile Safari/533.1<br /><br /></li><li>iPhone &mdash; Mozilla/5.0 (iPhone; ЦП 6_1 iPhone ОС, как Mac OS X) AppleWebKit/536.26 (KHTML; как Gecko) iPhone4 Mobile/10B142; 1 BingWeb/3.03.1428.20120423<br /><br /></li><li>Компьютер &mdash; Mozilla/5.0 (Windows NT 6.3; WOW64; Trident/7.0; Touch; rv:11.0), как Gecko<br /><br /></li><li>iPad &mdash; Mozilla/5.0 (iPad; ОС ЦП 7_0, как Mac OS X) AppleWebKit/537.51.1 (KHTML, как Gecko) версия/7.0 Mobile/11A465 Safari/9537.53</li></ul>|
|<a name="clientid"></a>X-MSEdge-ClientID|Дополнительный заголовок запроса и ответа.<br /><br /> Bing использует этот заголовок для обеспечения согласованного поведения при выполнении разных вызовов Bing API. Bing часто проверяет новые функции и улучшения и использует идентификатор клиента в качестве ключа для назначения тестируемых возможностей. Если вы не используете один и тот же идентификатор клиента для нескольких запросов, Bing может назначить одному пользователю несколько конфликтующих функций. Назначение таких проверяемых возможностей может привести к несогласованному взаимодействию с пользователем. Например, если для второго запроса будет назначена другая проверяемая возможность, результат будет неожиданным для пользователя. Кроме того, Bing может использовать идентификатор клиента, чтобы адаптировать результаты веб-поиска к истории поиска этого идентификатора, обеспечивая более широкие возможности взаимодействия с пользователем.<br /><br /> Bing также использует этот заголовок, чтобы повысить рейтинг результатов путем анализа активности, создаваемой идентификатором клиента. Повышение релевантности помогает улучшить качество результатов, предоставляемых API Bing, что, в свою очередь, обеспечивает более быстрые переходы по ссылкам для потребителей API.<br /><br /> **ВАЖНО!** Считайте этот заголовок обязательным, хоть это и не так. Сохранение идентификатора клиента по нескольким запросам для одной и той же комбинации пользователя и устройства позволяет 1) потребителю API получать согласованный пользовательский интерфейс и 2) больше переходов по ссылкам благодаря лучшему качеству результатов от Bing API.<br /><br /> Ниже приведены базовые правила использования, применяемые к этому заголовку.<br /><ul><li>Каждый пользователь, использующий приложение на устройстве, должен иметь уникальный идентификатор клиента Bing.<br /><br/>Если этот заголовок не включается в запрос, Bing создает идентификатор и возвращает его в заголовке ответа X-MSEdge-ClientID. Этот заголовок не следует включать в запрос, только когда пользователь в первый раз использует приложение на этом устройстве.<br /><br/></li><li>Используйте идентификатор клиента при каждом запросе к API Bing от приложения для определенного пользователя на определенном устройстве.<br /><br/></li><li>**ВНИМАНИЕ!** Нужно убедиться, что этот идентификатор клиента никак не связан с информацией учетной записи пользователя, используемой для аутентификации.</li><br/><li>Сохраните идентификатор клиента. Чтобы сохранить идентификатор в приложении браузера, нужен постоянный файл cookie HTTP, что гарантирует использование идентификатора во всех сеансах. Не используйте файл cookie сеанса. В других приложениях, таких как мобильные приложения, для хранения идентификатора можно использовать постоянное хранилище устройства.<br /><br/>В следующий раз, когда пользователь будет использовать приложение на этом устройстве, извлеките сохраненный идентификатор клиента.</li></ul><br /> **Примечание.** Ответы Bing могут как включать, так и не включать этот заголовок. Если ответ включает этот заголовок, сохраните идентификатор клиента и используйте его для всех последующих запросов Bing для пользователя на этом устройстве.<br /><br /> **Примечание.** Если в запрос включен заголовок X-MSEdge-ClientID, этот запрос не должен содержать файлы cookie.|  
|<a name="clientip"></a>X-MSEdge-ClientIP|Дополнительный заголовок запроса.<br /><br /> IPv4-адрес или IPv6-адрес клиентского устройства. IP-адрес используется для обнаружения расположения пользователя. Bing использует сведения о расположении для выбора безопасного поведения поиска.<br /><br /> **ПРИМЕЧАНИЕ.** Приведенный ниже заголовок является необязательным, однако всегда рекомендуется указывать его и заголовок X-Search-Location.<br /><br /> Не маскируйте адрес (например, изменив последний октет на 0). Маскировка адреса приводит к тому, что определяется расположение, отдаленное от фактического расположения устройства. В результате Bing может выводить ошибочные результаты.|  
|<a name="location"></a>X-Search-Location|Дополнительный заголовок запроса.<br /><br /> Список пар "ключ — значение", разделенных точкой с запятой, которые описывают географическое расположение клиента. Bing использует сведения о расположении для определения поведения при безопасном поиске и возвращения релевантного локального содержимого. Укажите пару "ключ-значение" \<key\> : \<value\> . Ниже приведены ключи, которые можно использовать для определения расположения пользователя.<br /><br /><ul><li>lat &mdash; широта расположения клиента, в градусах. Широта должна быть не меньше −90,0 и не больше +90,0. Отрицательные значения указывают южную широту, а положительные значения — северную.<br /><br /></li><li>long &mdash; долгота расположения клиента, в градусах. Долгота должна быть не меньше –180.0 и не больше +180.0. Отрицательные значения указывают на западную долготу, а положительные — на восточную.<br /><br /></li><li>re &mdash; радиус, в метрах, который определяет горизонтальную точность координат. Передайте значение, возвращенное службой расположения устройства. Типичные значения: 22 м для GPS или Wi-Fi, 380 м для триангуляции базовой станции и 18 000 м для обратного просмотра IP-адресов.<br /><br /></li><li>ts &mdash; метка времени UTC UNIX, когда клиент находился в этом расположении. (Метка времени UNIX — количество секунд, прошедших с 1 января 1970 года.)<br /><br /></li><li>head &mdash; необязательный ключ. Относительное направление движения клиента. Укажите направление движения в градусах от 0 до 360, отсчитывая по часовой стрелке относительно севера. Укажите этот ключ, только если ключ `sp` имеет ненулевое значение.<br /><br /></li><li>sp &mdash; горизонтальная скорость (скорость), в метрах в секунду, с которой клиентское устройство перемещается.<br /><br /></li><li>alt &mdash; высота клиентского устройства, в метрах.<br /><br /></li><li>are &mdash; необязательный ключ. Радиус, в метрах, который определяет вертикальную точность координат. Радиус по умолчанию — 50 километров. Укажите этот ключ, только если указан ключ `alt`.<br /><br /></li></ul> **ПРИМЕЧАНИЕ.** Хотя эти ключи не являются обязательными, чем больше информации вы предоставляете, тем точнее результаты поиска.<br /><br /> **ПРИМЕЧАНИЕ.** Рекомендуется всегда указывать географическое расположение пользователя. Это особенно важно, если IP-адрес клиента не точно отражает физическое расположение пользователя (например, если клиент использует VPN). Для получения оптимальных результатов следует включать этот заголовок и заголовок X-MSEdge-ClientIP. Как минимум, следует включать этот заголовок.|

> [!NOTE] 
> Помните, что условия использования требуют соблюдения всех применимых законов, в том числе в отношении использования этих заголовков. Например, в некоторых юрисдикциях, например европейской, есть требования на получение согласия пользователя перед размещением определенных устройств отслеживания на пользовательских устройствах.
  

## <a name="query-parameters"></a>Параметры запроса  
Запрос может включать следующие параметры запроса. В столбце "Обязательно" отмечены обязательные параметры. К параметрам запроса нужно применить кодировку URL.  
  
  
|Имя|Значение|Type|Обязательно|  
|----------|-----------|----------|--------------|
|<a name="count"></a>count|Число возвращаемых результатов, начиная с индекса, заданного `offset` параметром.|Строка|Нет|   
|<a name="localCategories"></a>localCategories|Список параметров, которые определяют поиск по категории бизнеса.  См. [Search categories for the Bing Local Business Search API](local-categories.md) (Поиск категорий для API Bing Local Business Search)|Строка|Нет|  
|<a name="mkt"></a>mkt|Рынок, по которому возвращаются результаты. <br /><br />Список возможных значений рынка приведен в разделе "Коды рынка".<br /><br /> **ПРИМЕЧАНИЕ.** API Local Business Search в настоящее время поддерживает только рынок и язык en-us.<br /><br />|Строка|Да|
|<a name="offset"></a>offset|Индекс для запуска результатов, заданных параметром `count`.|Целое число|Нет|  
|<a name="query"></a>q|Термин поиска пользователя.|Строка|Нет|  
|<a name="responseformat"></a>responseFormat|Тип мультимедиа, используемый для ответа. Ниже приведены возможные значения, в которых не учитывается регистр.<br /><ul><li>JSON</li><li>JSONLD</li></ul><br /> По умолчанию используется JSON. Сведения об объектах JSON, которые содержат ответ, см. в разделе [Объекты ответа](#response-objects).<br /><br />  При указании JsonLd текст ответа включает объекты JSON-LD, содержащие результаты поиска. Сведения о JSON-LD см. на [этом сайте](https://json-ld.org/).|Строка|Нет|  
|<a name="safesearch"></a>safeSearch|Фильтр, используемый для фильтрации содержимого для взрослых. Ниже приведены возможные значения фильтра, в которых не учитывается регистр.<br /><ul><li>Off &mdash; возвращаются веб-страницы с текстом, изображениями или видео для взрослых.<br /><br/></li><li>Moderate &mdash; возвращаются веб-страницы с текстом для взрослых, но не изображениями или видео.<br /><br/></li><li>Strict &mdash; веб-страницы с текстом, изображениями или видео для взрослых не возвращаются.</li></ul><br /> По умолчанию используется значение Moderate.<br /><br /> **ПРИМЕЧАНИЕ.** Если запрос поступает с рынка, для которого политика для взрослых Bing требует параметра `safeSearch` со значением Strict, Bing игнорирует значение `safeSearch` и использует Strict.<br/><br/>**ПРИМЕЧАНИЕ.** Если вы используете оператор запроса `site:`, в зависимости от запроса есть вероятность, что ответ включает содержимое для взрослых независимо от значения параметра запроса `safeSearch`. Используйте `site:`, только если вам известно о содержимом на сайте и ваш сценарий поддерживает возможность использования содержимого для взрослых. |Строка|Нет|  
|<a name="setlang"></a>setLang|Язык, используемый для строк пользовательского интерфейса. Укажите язык, используя двухбуквенный код ISO 639-1. Например, код для английского языка — EN. Он также является кодом по умолчанию.<br /><br /> Хотя это необязательно, всегда следует указывать язык. Обычно для `setLang` задается язык, указанный в параметре `mkt`, если только пользователь не хочет, чтобы строки пользовательского интерфейса отображались на другом языке.<br /><br /> Этот параметр и заголовок [](#acceptlanguage)Accept-Language&mdash; являются взаимоисключающими. Не указывайте оба.<br /><br /> Строка пользовательского интерфейса — это строка, которая используется как метка в пользовательском интерфейсе. Есть несколько строк пользовательского интерфейса в объектах ответа JSON. Кроме того, все ссылки на свойства Bing.com в объектах ответа применяют указанный язык.|Строка|Нет| 


## <a name="response-objects"></a>Объекты ответа  
Ниже приведены объекты ответа JSON, которые ответ может включать. Если запрос выполняется успешно, объектом верхнего уровня в ответе будет [SearchResponse](#searchresponse). Если запрос завершается с ошибкой, то объектом верхнего уровня будет являться [ErrorResponse](#errorresponse).


|Объект|Описание|  
|------------|-----------------|  
|[Place](#place)|Определяет сведения о местных бизнесах, например, ресторан или гостиница.|  

  
### <a name="error"></a>Ошибка  
Определяет возникшую ошибку.  
  
|Элемент|Описание|Type|  
|-------------|-----------------|----------|  
|<a name="error-code"></a>code|Код ошибки, определяющий ее категорию. Список возможных кодов см. в разделе [Коды ошибок](#error-codes).|Строка|  
|<a name="error-message"></a>message|Текстовое описание ошибки.|Строка|  
|<a name="error-moredetails"></a>moreDetails|Подробное описание, которое предоставляет дополнительную информацию об ошибке.|Строка|  
|<a name="error-parameter"></a>parameter|Параметр запроса, который вызвал эту ошибку.|Строка|  
|<a name="error-subcode"></a>subCode|Код ошибки, по которому определяется ошибка. Например, если `code` имеет значение InvalidRequest, то `subCode` может иметь значение ParameterInvalid или ParameterInvalidValue. |Строка|  
|<a name="error-value"></a>value|Недопустимое значение параметра запроса.|Строка|  
  

### <a name="errorresponse"></a>ErrorResponse  
Объект верхнего уровня, который включается ответ при сбое обработки запроса.  
  
|Имя|Значение|Type|  
|----------|-----------|----------|  
|_type|Указание типа.|Строка|  
|<a name="errors"></a>errors|Список ошибок, описывающих причины сбоя запроса.|[Ошибка](#error)[]|  

  
  
### <a name="license"></a>Лицензия  
Определяет лицензию, в рамках которой можно использовать текст или фотографию.  
  
|Имя|Значение|Type|  
|----------|-----------|----------|  
|name|Имя лицензии.|Строка|  
|url|URL-адрес веб-сайта, где пользователь может получить дополнительные сведения о лицензии.<br /><br /> Используйте имя и URL-адрес для создания гиперссылки.|Строка|  


### <a name="link"></a>Ссылка  
Определяет компоненты гиперссылки.  
  
|Имя|Значение|Type|  
|----------|-----------|----------|  
|_type|Указание типа.|Строка|  
|текст|Отображаемый текст.|Строка|  
|url|URL-адрес. Используйте URL-адрес и отображаемый текст для создания гиперссылки.|Строка|  
  


  
### <a name="organization"></a>Организация  
Определяет издателя.  
  
Обратите внимание, что издатель может предоставить свое имя или веб-сайт, или и то, и другое.  
  
|Имя|Значение|Type|  
|----------|-----------|----------|  
|name|Имя издателя.|Строка|  
|url|URL-адрес для веб-сайта издателя.<br /><br /> Обратите внимание, что издатель может не предоставить веб-сайт.|Строка|  
  
  

### <a name="place"></a>Место  
Определяет сведения о местных бизнесах, например, ресторан или гостиница.  
  
|Имя|Значение|Type|  
|----------|-----------|----------|  
|_type|Тип указания, которому может быть присвоено одно из следующих имен:<br /><br /><ul><li>Hotel</li><li>LocalBusiness<br /></li><li>Ресторан</ul><li>|Строка|  
|address|Почтовый адрес расположения сущности.|PostalAddress|  
|entityPresentationInfo|Дополнительные сведения о сущности, например указание, которое используется для определения типа сущности. Например, ресторан или гостиница. Полю `entityScenario` присваивается ListItem.|EntityPresentationInfo|  
|name|Имя сущности.|Строка|  
|telephone|Номер телефона сущности.|Строка|  
|url|URL-адрес для веб-сайта сущности.<br /><br /> Используйте этот URL-адрес вместе с именем сущности, чтобы создать гиперссылку, которая при щелчке направляет пользователя на веб-сайт сущности.|Строка|  
|webSearchUrl|URL-адрес для результатов поиска Bing этого места.|Строка| 
  
  
### <a name="querycontext"></a>QueryContext  
Определяет содержимое запроса, который Bing использует для запроса.  
  
|Элемент|Описание|Type|  
|-------------|-----------------|----------|  
|adultIntent|Логическое значение, указывающее, есть ли в указанном запросе содержимое для взрослых. Значение равно **true**, если запрос имеет запрос на содержимое для взрослых, в противном случае — **false**.|Логическое|  
|alterationOverrideQuery|Строка запроса для принудительного использования исходной строки в Bing. Например, если строка запроса *saling downwind*, строка запроса переопределения будет *+saling downwind*. Помните, что необходимо закодировать строку запроса, в результате чего будет получена строка *%2Bsaling+downwind*.<br /><br /> Это поле включается, только если исходная строка запроса содержит орфографическую ошибку.|Строка|  
|alteredQuery|Строка запроса, используемая для выполнения запроса Bing. Bing использует измененную строку запроса, если исходная строка запроса содержит орфографические ошибки. Например, если строка запроса — `saling downwind`, измененная строка запроса будет `sailing downwind`.<br /><br /> Это поле включается, только если исходная строка запроса содержит орфографическую ошибку.|Строка|  
|askUserForLocation|Логическое значение, указывающее, требуется ли Bing расположение пользователя для получения точных результатов. При указании расположения пользователя с помощью заголовков [X-MSEdge-ClientIP](#clientip) и [X-Search-Location](#location) это поле можно игнорировать.<br /><br /> Для запросов с учетом расположения, таких как "сегодняшняя погода" или "рестораны рядом со мной", которым требуется расположение пользователя для получения точных результатов, это поле имеет значение **true**.<br /><br /> Для запросов с учетом расположения, которые включают расположение (например, "погода в Сиэтле"), это поле имеет значение **false**. Для этого поля также установлено значение **false** для запросов, которые не относятся к расположению, например "бестселлеры".|Логическое|  
|originalQuery|Строка запроса, как указано в запросе.|Строка|  

### <a name="identifiable"></a>Identifiable

|Имя|Значение|Type|  
|-------------|-----------------|----------|
|идентификатор|Идентификатор ресурса|Строка|
 
### <a name="rankinggroup"></a>RankingGroup
Определяет группу результатов поиска, такие как основное поле.

|Имя|Значение|Type|  
|-------------|-----------------|----------|
|items|Список результатов поиска для отображения в группе.|RankingItem|

### <a name="rankingitem"></a>RankingItem
Определяет элемент в результатах поиска для отображения.

|Имя|Значение|Type|  
|-------------|-----------------|----------|
|resultIndex|Отсчитываемый от нуля индекс элемента в ответе для отображения. Если в элементе нет этого поля, в ответе могут отобразиться все элементы. Например, можно отобразить все статьи в ответе "Новости".|Целое число|
|answerType|Ответ, содержащий элемент, который необходимо отобразить. Например, "Новости".<br /><br />Используйте этот тип, чтобы найти ответ в объекте SearchResponse. Тип — это имя поля SearchResponse.<br /><br /> Тем не менее используйте тип ответа, только если этот объект включает поле значения; в противном случае игнорируйте его.|Строка|
|textualIndex|Индекс ответов в textualAnswers для отображения.| Целое число без знака|
|value|Идентификатор, который определяет либо ответ для отображения, либо элемент ответа для отображения. Если идентификатор определяет ответ, покажите все элементы ответов.|Identifiable|

### <a name="rankingresponse"></a>RankingResponse  
Определяет, где должно быть размещено содержимое на странице результатов поиска и в каком порядке.  
  
|Имя|Значение|  
|----------|-----------|  
|<a name="ranking-mainline"></a>mainline|Результаты поиска для отображения в основном поле.|  
|<a name="ranking-pole"></a>pole|Результаты поиска, которые должны отображаться в самом заметном месте (например, над основным полем и боковой панелью).|  
|<a name="ranking-sidebar"></a>sidebar|Результаты поиска для отображения на боковой панели.| 

### <a name="searchresponse"></a>SearchResponse  
Определяет объект верхнего уровня, который включает ответ при удачном запросе.  
  
Обратите внимание, что если служба подозревает, что совершается атака типа "отказ в обслуживании", запрос будет успешно завершен (код состояния HTTP: 200 OК). Однако текст ответа будет пустым.  
  
|Имя|Значение|Type|  
|----------|-----------|----------|  
|_type|Указание типа, которому задано значение SearchResponse.|Строка|  
|Места|Список сущностей, которые относятся к поисковому запросу.|Объект JSON|  
|queryContext|Объект, содержащий строку запроса, которую использует Bing.<br /><br /> Этот объект содержит строку запроса, введенную пользователем. Он также может содержать измененную строку запроса, которую использует Bing в том случае, если строка запроса содержит орфографические ошибки.|[QueryContext](#querycontext)|  


## <a name="error-codes"></a>Коды ошибок

Ниже приведены возможные коды состояния HTTP, которые возвращает запрос.  
  
|Код состояния|Описание|  
|-----------------|-----------------|  
|200|Успешно.|  
|400|Один из параметров запроса отсутствует или является недопустимым.|  
|401|Ключ подписки отсутствует или является недопустимым.|  
|403|Пользователь прошел проверку подлинности (например, с допустимым ключом подписки), но не имеет разрешений для обращения к запрошенному ресурсу.<br /><br /> Bing также может вернуть это состояние, если для вызывающего объекта превышены месячные квоты.|  
|410|В запросе использовался протокол HTTP вместо HTTPS. HTTPS является единственным поддерживаемым протоколом.|  
|429|Вызывающий превысил свою квоту на число запросов в секунду.|  
|500|Непредвиденная ошибка сервера.|

Если запрос завершается с ошибкой, ответ будет содержать объект [ErrorResponse](#errorresponse), который содержит список объектов [Error](#error), описывающих причину ошибки. Если ошибка связана с параметром, поле `parameter` идентифицирует параметр, который является причиной проблемы. Если ошибка связана со значением параметра, поле `value` идентифицирует недопустимое значение.

```json
{
  "_type": "ErrorResponse", 
  "errors": [
    {
      "code": "InvalidRequest", 
      "subCode": "ParameterMissing", 
      "message": "Required parameter is missing.", 
      "parameter": "q" 
    }
  ]
}

{
  "_type": "ErrorResponse", 
  "errors": [
    {
      "code": "InvalidAuthorization", 
      "subCode": "AuthorizationMissing", 
      "message": "Authorization is required.", 
      "moreDetails": "Subscription key is not recognized."
    }
  ]
}
```

Ниже приведены возможные коды ошибок и кодовые значения вложенных ошибок.

|Код|SubCode (дополнительный код)|Описание
|-|-|-
|ServerError|UnexpectedError<br/>ResourceError<br/>NotImplemented|Код состояния HTTP — 500.
|InvalidRequest|ParameterMissing<br/>ParameterInvalidValue<br/>HttpNotAllowed<br/>Блокировано|Bing возвращает ошибку InvalidRequest (недопустимый запрос) всякий раз, когда любая часть запроса недопустима. Например, отсутствует обязательный параметр или значение параметра недопустимо.<br/><br/>В случае ошибки ParameterMissing или ParameterInvalidValue возвращается код состояния HTTP 400.<br/><br/>Если вместо HTTPS используется протокол HTTP, Bing возвращает HttpNotAllowed и код состояния HTTP 410.
|RateLimitExceeded|Дополнительные коды не используются|Bing возвращает ошибку RateLimitExceeded всякий раз при превышении квоты запросов в секунду (QPS) или запросов в месяц (QPM).<br/><br/>При превышении QPS Bing возвращает код состояния HTTP 429, а если превысить QPM, Bing вернет код 403.
|InvalidAuthorization|AuthorizationMissing<br/>AuthorizationRedundancy|Bing возвращает InvalidAuthorization, когда Bing не может проверить подлинность вызывающего объекта. Например, когда заголовок `Ocp-Apim-Subscription-Key` отсутствует или при недопустимом ключе подписки.<br/><br/>Избыточность возникает, если указать более одного способа проверки подлинности.<br/><br/>При ошибке InvalidAuthorization кодом состояния HTTP будет 401.
|InsufficientAuthorization|AuthorizationDisabled<br/>AuthorizationExpired|Bing возвращает InsufficientAuthorization, когда вызывающая сторона не имеет разрешений на доступ к ресурсу. Это может произойти, если ключ подписки отключен или срок его действия истек. <br/><br/>При ошибке InsufficientAuthorization возвращается код состояния HTTP 403.

## <a name="next-steps"></a>Дальнейшие действия
- [Quickstart: Send a query to the Bing Local Business Search API in C#](quickstarts/local-quickstart.md) (Краткое руководство. Отправка запроса в API Bing Local Business Search с помощью C#)
- [Краткое руководство. Отправка запроса в API Bing для поиска местных компаний с помощью Java](quickstarts/local-search-java-quickstart.md)
- [Краткое руководство. Использование Local Business Search с помощью Node](quickstarts/local-search-node-quickstart.md)
- [Краткое руководство. Отправка запроса в API Bing Local Business Search с помощью Python](quickstarts/local-search-python-quickstart.md)