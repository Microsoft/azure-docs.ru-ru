---
title: Как указать модель распознавания — лицо
titleSuffix: Azure Cognitive Services
description: В этой статье показано, как выбрать модель распознавания для приложения Azure для вашего лица.
services: cognitive-services
author: longli0
manager: nitinme
ms.service: cognitive-services
ms.subservice: face-api
ms.topic: conceptual
ms.date: 02/22/2021
ms.author: longl
ms.custom: devx-track-csharp
ms.openlocfilehash: ea6b567d7b48e504d9b79dad568da7170ada5326
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101706832"
---
# <a name="specify-a-face-recognition-model"></a>Указание модели распознавания лиц

В этом руководство показано, как указать модель распознавания лиц для поиска лиц, идентификации и поиск подобия с помощью службы "служба лиц Azure".

Служба распознавания лиц использует модели машинного обучения для выполнения операций с человеческими лицами в образах. Мы продолжаем улучшать точность наших моделей, основываясь на отзывах клиентов и возможностях исследования, а также доставлять эти улучшения как обновления модели. Разработчики имеют возможность указать, какую версию модели распознавания лиц следует использовать. они могут выбрать модель, которая наилучшим образом соответствует их варианту использования.

В службе "служба лиц Azure" доступны три модели распознавания. Модели, _recognition_01_ (опубликованные 2017) и _recognition_02_ (опубликованные 2019), постоянно поддерживаются для обеспечения обратной совместимости для клиентов, использующих фацелистс или **персонграуп**, созданных с помощью этих моделей. **Фацелист** или **персонграуп** всегда будет использовать модель распознавания, с которой он был создан, и новые лица будут связаны с этой моделью при их добавлении. Его нельзя изменить после создания, и клиенты должны будут использовать соответствующую модель распознавания с соответствующим **фацелист** или **персонграуп**.

Вы можете перейти к более поздним моделям распознавания. Тем не менее вам потребуется создать новые Фацелистс и Персонграупс с выбранной моделью распознавания.

Модель _recognition_03_ (опубликованная 2020) является самой точной моделью, доступной в настоящее время. Если вы являетесь новым клиентом, мы рекомендуем использовать эту модель. _Recognition_03_ обеспечит улучшенную точность сравнения сходства и сравнения пользователей. Обратите внимание, что каждая модель работает независимо от других, а порог достоверности, заданный для одной модели, не должен сравниваться в других моделях распознавания.

Ознакомьтесь со сведениями о том, как указать выбранную модель в различных операциях с разными лицами и избежать конфликтов модели. Если вы являетесь опытным пользователем и хотите определить, следует ли переключиться на последнюю модель, перейдите к разделу [Вычисление различных моделей](#evaluate-different-models) , чтобы оценить новую модель и сравнить результаты с помощью текущего набора данных.


## <a name="prerequisites"></a>Предварительные требования

Вы должны быть знакомы с концепциями обнаружения и идентификации AI-лиц. Если вас нет, сначала ознакомьтесь с этими руководствами:

* [Основные понятия обнаружения лиц](../concepts/face-detection.md)
* [Концепции распознавания лиц](../concepts/face-recognition.md)
* [Обнаружение лиц в изображении](HowtoDetectFacesinImage.md)

## <a name="detect-faces-with-specified-model"></a>Обнаружить лица с указанной моделью

Обнаружение лиц определяет наглядные ориентиры людей и находит их границы. Он также извлекает функции и сохраняет их для использования в идентификации. Все эти сведения образуют представление одной грани.

Модель распознавания используется при извлечении характеристик лиц, поэтому при выполнении операции обнаружения можно указать версию модели.

При использовании API [распознавания лиц] назначьте версию модели с помощью `recognitionModel` параметра. Возможные значения:
* recognition_01
* recognition_02
* recognition_03


При необходимости можно указать параметр _ретурнрекогнитионмодел_ (по умолчанию **false**), чтобы указать, следует ли возвращать _рекогнитионмодел_ в ответе. Таким образом, URL-адрес запроса для REST API [распознавания лиц] будет выглядеть следующим образом:

`https://westus.api.cognitive.microsoft.com/face/v1.0/detect[?returnFaceId][&returnFaceLandmarks][&returnFaceAttributes][&recognitionModel][&returnRecognitionModel]&subscription-key=<Subscription key>`

При использовании клиентской библиотеки можно присвоить значение `recognitionModel` , передав строку, представляющую версию. Если оставить его неназначенным, будет использоваться версия модели по умолчанию `recognition_01` . См. Следующий пример кода для клиентской библиотеки .NET.

```csharp
string imageUrl = "https://news.microsoft.com/ceo/assets/photos/06_web.jpg";
var faces = await faceClient.Face.DetectWithUrlAsync(imageUrl, true, true, recognitionModel: "recognition_01", returnRecognitionModel: true);
```

## <a name="identify-faces-with-specified-model"></a>Выявление лиц с указанной моделью

Служба распознавания лиц может извлекать данные о лицах из изображения и связывать их с объектом **Person** (например, через вызов API [добавления лиц](https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523b) ), и несколько объектов **Person** можно хранить вместе в **персонграуп**. Затем можно сравнить новую грань с **персонграуп** (с помощью вызова распознавания [лиц] ), и вы можете идентифицировать соответствующего пользователя в этой группе.

**Персонграуп** должен иметь одну уникальную модель распознавания для всех **пользователей**, и ее можно указать с помощью `recognitionModel` параметра при создании группы ([Персонграуп-Create] или [ларжеперсонграуп-Create]). Если этот параметр не указан, используется исходная `recognition_01` модель. Группа всегда будет использовать модель распознавания, в которой она была создана, и новые лица будут связаны с этой моделью при их добавлении. его нельзя изменить после создания группы. Чтобы узнать, с какой моделью настроена **персонграуп** , используйте API [персонграуп-Get] с параметром _ретурнрекогнитионмодел_ со значением **true**.

См. Следующий пример кода для клиентской библиотеки .NET.

```csharp
// Create an empty PersonGroup with "recognition_02" model
string personGroupId = "mypersongroupid";
await faceClient.PersonGroup.CreateAsync(personGroupId, "My Person Group Name", recognitionModel: "recognition_02");
```

В этом коде создается **персонграуп** с идентификатором `mypersongroupid` , который настраивается на использование модели _recognition_02_ для извлечения характеристик лиц.

Соответственно, необходимо указать, какую модель следует использовать при обнаружении сторон для сравнения с этим **персонграуп** (с помощью API распознавания [лиц] ). Используемая модель всегда должна соответствовать конфигурации **персонграуп**. в противном случае операция завершится ошибкой из-за несовместимых моделей.

В API-интерфейсе распознавания [лиц] нет изменений; необходимо указать только версию модели в обнаружении.

## <a name="find-similar-faces-with-specified-model"></a>Поиск похожих лиц с указанной моделью

Можно также указать модель распознавания для поиска подобия. Вы можете назначить версию модели `recognitionModel` при создании списка лиц с помощью [Фацелист-Create] API или [LargeFaceList-Create]. Если этот параметр не указан, `recognition_01` модель используется по умолчанию. В списке лиц всегда будет использоваться модель распознавания, с которой он был создан, и при добавлении в список новые лица будут связаны с этой моделью. Вы не можете изменить это после создания. Чтобы узнать, с какой моделью настроен список лиц, используйте API [фацелист-Get] с параметром _ретурнрекогнитионмодел_ со значением **true**.

См. Следующий пример кода для клиентской библиотеки .NET.

```csharp
await faceClient.FaceList.CreateAsync(faceListId, "My face collection", recognitionModel: "recognition_03");
```

Этот код создает список лиц с именем `My face collection` , используя модель _recognition_03_ для извлечения компонентов. При поиске похожих лиц на новом обнаруженном человеке в этом списке должно быть обнаружено, что этот человек должен [распознаться]с помощью _recognition_03ной_ модели. Как и в предыдущем разделе, модель должна быть постоянной.

Нет изменений в [похожих] API. Вы указываете только версию модели в обнаружении.

## <a name="verify-faces-with-specified-model"></a>Проверка лиц с указанной моделью

API [-интерфейс проверки лиц] проверяет, принадлежат ли два лица одному человеку. В API проверки в отношении моделей распознавания нет изменений, но можно сравнивать только те лица, которые были обнаружены в той же модели.

## <a name="evaluate-different-models"></a>Оценка различных моделей

Если вы хотите сравнить производительность различных моделей распознавания с собственными данными, вам потребуется:
1. Создайте три Персонграупс с помощью _recognition_01_, _recognition_02_ и _recognition_03_ соответственно.
1. Используйте данные изображения для обнаружения лиц и их регистрации для **людей** s в этих трех **персонграупх**. 
1. Обучить Персонграупс с помощью API Персонграуп-Train.
1. Протестируйте на всех трех **персонграупх** и сравните результаты.


Если обычно указывается пороговое значение достоверности (от нуля до одного, которое определяет, насколько увереннее, что модель должна определять лицо), может потребоваться использовать различные пороговые значения для разных моделей. Пороговое значение для одной модели не предназначено для совместного использования с другими и не обязательно приведет к таким же результатам.

## <a name="next-steps"></a>Дальнейшие действия

В этой статье вы узнали, как указать модель распознавания для использования с разными API-интерфейсами обслуживания лиц. Затем следуйте инструкциям краткого руководства, чтобы приступить к работе с обнаружением лиц.

* [Пакет SDK для .NET для лиц](../quickstarts/client-libraries.md?pivots=programming-language-csharp%253fpivots%253dprogramming-language-csharp)
* [Пакет SDK для Python для лиц](../quickstarts/client-libraries.md?pivots=programming-language-python%253fpivots%253dprogramming-language-python)
* [Пакет SDK для лиц Go](../quickstarts/client-libraries.md?pivots=programming-language-go%253fpivots%253dprogramming-language-go)

[Лицо — обнаружить;]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d
[Похожее лицо — Поиск похожих]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395237
[Лицо — идентифицировать;]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395239
[Лицо — проверка]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523a
[PersonGroup — Create]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395244
[Персонграуп — получение]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395246
[PersonGroup Person - Add Face]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039523b
[PersonGroup - Train]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f30395249
[LargePersonGroup — Create]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/599acdee6ac60f11b48b5a9d
[Фацелист — создание]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039524b
[Фацелист — получение]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/563879b61984550f3039524c
[LargeFaceList — создание]: https://westus.dev.cognitive.microsoft.com/docs/services/563879b61984550e40cbbe8d/operations/5a157b68d2de3616c086f2cc