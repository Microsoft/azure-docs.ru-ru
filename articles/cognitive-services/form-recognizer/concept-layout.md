---
title: Макеты — распознаватель форм
titleSuffix: Azure Cognitive Services
description: Изучите основные понятия, связанные с анализом макета, с помощью API-интерфейса распознавателя форм и ограничений.
services: cognitive-services
author: laujan
manager: nitinme
ms.service: cognitive-services
ms.subservice: forms-recognizer
ms.topic: conceptual
ms.date: 03/15/2021
ms.author: lajanuar
ms.openlocfilehash: 73bef21f430bde1c6c2c95d7c3f685cccbbd9179
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "103467023"
---
# <a name="form-recognizer-layout-service"></a>Служба макета распознавателя форм

Средство распознавания форм Azure может извлекать текст, таблицы, метки выделения и сведения о структуре из документов с помощью службы макета. API макета позволяет клиентам принимать документы в различных форматах и возвращать структурированные представления данных документов. Он сочетает в себе мощные возможности оптического [распознавания символов (OCR)](../computer-vision/concept-recognizing-text.md) с моделями глубокого обучения для извлечения текста, таблиц, меток выделения и структуры документа. 

## <a name="what-does-the-layout-service-do"></a>Что делает служба макета?

API макета извлекает текст, таблицы, метки выделения и сведения о структуре из документов с высокой точностью и возвращает упорядоченный структурированный ответ JSON. Документы могут иметь различные форматы и качество, включая образы, полученные от телефона, отсканированные документы и Цифровые PDF-файлы. API макета будет точно извлекать структурированные выходные данные из всех этих документов.

![Пример макета](./media/layout-tool-example.JPG)

## <a name="try-it-out"></a>Попробуйте сейчас

Чтобы испытать службу макета распознавателя форм, перейдите к средству "пример пользовательского интерфейса" в Интернете:

> [!div class="nextstepaction"]
> [Средство проверки распознавания текста формы (ФОТТ)](https://fott-preview.azurewebsites.net)

Вам потребуется подписка Azure ([создайте ее бесплатно](https://azure.microsoft.com/free/cognitive-services)) и конечную точку [ресурса распознавателя](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesFormRecognizer) форм и ключ, чтобы испытать API макета распознавателя форм. 

![Снимок экрана примера пользовательского интерфейса; текст, таблицы и метки выделения документа анализируются](./media/analyze-layout.png)

### <a name="input-requirements"></a>Требования к входным данным 

[!INCLUDE [input requirements](./includes/input-requirements-receipts.md)]

## <a name="the-analyze-layout-operation"></a>Операция анализа макета

Сначала вызовите операцию [анализа макета](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-3/operations/AnalyzeLayoutAsync) . Макет «анализ» принимает документ (изображение, TIFF или PDF-файл) в качестве входных данных и извлекает текст, таблицы, метки выделения и структуру документа. Вызов возвращает поле заголовка ответа с именем `Operation-Location` . `Operation-Location`Значение — это URL-адрес, СОДЕРЖАЩИЙ идентификатор результата, который будет использоваться на следующем шаге.

|Заголовок ответа| URL-адрес результата |
|:-----|:----|
|Operation-Location | `https://cognitiveservice/formrecognizer/v2.1-preview.3/prebuilt/layout/analyzeResults/44a436324-fc4b-4387-aa06-090cfbf0064f` |

### <a name="natural-reading-order-output-latin-only"></a>Выходные данные естественного порядка чтения (только для латиницы)

Можно указать порядок, в котором текстовые строки выводятся с помощью `readingOrder` параметра запроса. Используйте `natural` для более удобного для человека вывода в порядке чтения, как показано в следующем примере. Эта функция поддерживается только для латинских языков.

:::image type="content" source="../Computer-vision/Images/ocr-reading-order-example.png" alt-text="Пример порядка чтения макета" lightbox="../Computer-vision/Images/ocr-reading-order-example.png":::

### <a name="select-page-numbers-or-ranges-for-text-extraction"></a>Выбор номеров страниц или диапазонов для извлечения текста

Для больших многостраничных документов используйте `pages` параметр запроса, чтобы указать конкретные номера страниц или диапазоны страниц для извлечения текста. В следующем примере показан документ с 10 страницами с текстом, извлеченным для обоих вариантов — все страницы (1-10) и выбранные страницы (3-6).

:::image type="content" source="../Computer-vision/Images/ocr-select-pages.png" alt-text="Выходные данные макета выбранных страниц":::

## <a name="the-get-analyze-layout-result-operation"></a>Операция получения результата макета анализа

Второй шаг — вызов операции [получения результата формирования макета](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-3/operations/GetAnalyzeLayoutResult) . Эта операция принимает в качестве входных данных идентификатор результата, созданный операцией анализа макета. Он возвращает ответ JSON, содержащий поле **состояния** со следующими возможными значениями. 

|Поле| Тип | Возможные значения |
|:-----|:----:|:----|
|status | строка | `notStarted`: Операция анализа не началась.<br /><br />`running`: Выполняется операция анализа.<br /><br />`failed`: Произошел сбой операции анализа.<br /><br />`succeeded`: Операция анализа успешно выполнена.|

Вызывайте эту операцию итеративно до возвращения `succeeded` значения. Используйте интервал от 3 до 5 секунд, чтобы избежать превышения скорости запросов в секунду (RPS).

Если поле **Status** имеет `succeeded` значение, ответ JSON будет включать извлеченный макет, текст, таблицы и метки выделения. Извлеченные данные включают в себя извлеченные текстовые строки и слова, ограничивающие прямоугольники, внешний вид текста с указанием рукописного ввода, таблицы и метки выделения с выбранными/невыбранными. 

### <a name="handwritten-classification-for-text-lines-latin-only"></a>Рукописная классификация для текстовых линий (только латиница)

Ответ включает в себя классификацию того, имеет ли каждая строка текста стиль рукописного ввода или нет, а также показатель достоверности. Эта функция поддерживается только для латинских языков. В следующем примере показана рукописная классификация для текста в изображении.

:::image type="content" source="../Computer-vision/Images/ocr-handwriting-classification.png" alt-text="Пример классификации рукописного текста":::

### <a name="sample-json-output"></a>Пример выходных данных JSON

Ответ на операцию *получения результата макета анализа* — это структурированное представление документа со всеми извлеченными сведениями. См. [Пример файла документа](https://github.com/Azure-Samples/cognitive-services-REST-api-samples/tree/master/curl/form-recognizer/sample-layout.pdf) и [выходные данные макета образца](https://github.com/Azure-Samples/cognitive-services-REST-api-samples/tree/master/curl/form-recognizer/sample-layout-output.json)вывода с структурированным выводом.

Выходные данные JSON имеют две части:

* `readResults` узел содержит все распознанный текст и метки выделения. Текст упорядочивается по страницам, затем по строкам, а затем по отдельным словам. 
* `pageResults` узел содержит таблицы и ячейки, извлеченные вместе с их ограничивающими полями, достоверность и ссылка на строки и слова в "Реадресултс".

## <a name="example-output"></a>Пример выходных данных

### <a name="text"></a>Текст

API макета извлекает текст из документов (PDF, TIFF) и изображений (JPG, PNG, BMP) с несколькими углами и цветами текста. Он принимает фотографии документов, факсов, печати и (или) рукописного текста (только на английском языке) и смешанные режимы. Текст извлекается с информацией, представленной в строках, словах, ограничивающих прямоугольниках, показателях достоверности и стиле (написанном или другом). Вся текстовая информация включена в `readResults` раздел выходных данных JSON. 

### <a name="tables"></a>Tables

API макета извлекает таблицы из документов (PDF, TIFF) и изображений (JPG, PNG, BMP). Документы можно сканировать, использовать в фотографике или расставлять цифры. Таблицы могут быть сложными с объединенными ячейками или столбцами, с границами или без них, а также с нечетными углами. Извлеченные сведения о таблице включают число столбцов и строк, диапазон строк и диапазон столбцов. Каждая ячейка извлекается вместе с ограничивающим прямоугольником и ссылкой на текст, извлеченный в `readResults` разделе. Сведения о таблице находятся в `pageResults` разделе выходных данных JSON. 

![Пример таблиц](./media/tables-example.jpg)

### <a name="selection-marks"></a>Метки выделения

API макета также извлекает метки выделения из документов. Извлеченные метки выделения включают ограничивающий прямоугольник, достоверность и состояние (выбрано/не выбрано). Сведения о метке выделения извлекаются в `readResults` разделе выходных данных JSON. 

## <a name="next-steps"></a>Следующие шаги

* Попробуйте свой собственный выбор макета с помощью [примера средства для выбора пользовательского интерфейса распознавателя форм](https://fott-preview.azurewebsites.net/)
* Заполните [Краткое руководство по распознаванию форм](quickstarts/client-library.md) , чтобы приступить к извлечению макетов на любом языке разработки.

## <a name="see-also"></a>См. также

* [Что такое Распознаватель документов?](./overview.md)
* [Справочная документация по REST API](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-3/operations/AnalyzeLayoutAsync)
