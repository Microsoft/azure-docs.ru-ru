---
title: Счета-распознаватель форм
titleSuffix: Azure Cognitive Services
description: Ознакомьтесь с концепциями, связанными с анализом счетов, с помощью API-интерфейса распознавателя форм и ограничений.
services: cognitive-services
author: laujan
manager: nitinme
ms.service: cognitive-services
ms.subservice: forms-recognizer
ms.topic: conceptual
ms.date: 03/15/2021
ms.author: lajanuar
ms.openlocfilehash: 46cf34bd40832488985008a645f1da25eb87b9d9
ms.sourcegitcommit: 3ea12ce4f6c142c5a1a2f04d6e329e3456d2bda5
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/15/2021
ms.locfileid: "103467397"
---
# <a name="form-recognizer-prebuilt-invoice-model"></a>Встроенная модель накладных форм распознавателя

Средство распознавания форм Azure может анализировать и извлекать информацию из счетов продаж с помощью готовых моделей счетов. API-интерфейс счета позволяет клиентам принимать счета в различных форматах и возвращать структурированные данные для автоматизации обработки счета. Он сочетает в себе мощные возможности оптического [распознавания символов (OCR)](../computer-vision/concept-recognizing-text.md) с накладной, посвященной моделям глубокого обучения, для извлечения ключевых данных из счетов на английском языке. Он извлекает текст, таблицы и сведения, такие как клиент, поставщик, идентификатор счета, срок оплаты счета, итог, сумма по счету, сумма налогов, Доставка в, счета и т. д. Предварительно подготовленный API накладных является общедоступным в формате предварительного просмотра распознавателя версии 2.1.

## <a name="what-does-the-invoice-service-do"></a>Что делает служба счетов?

API-интерфейс накладных извлекает ключевые поля и элементы строк из счетов и возвращает их в организованном структурированном ответе JSON. Счета могут относиться к различным форматам и качеству, включая образы, полученные от телефона, отсканированные документы и Цифровые PDF-файлы. API-интерфейс накладных будет извлекать структурированные выходные данные из всех этих счетов. 

![Пример счета contoso](./media/invoice-example-new.jpg)

## <a name="try-it-out"></a>Попробуйте сейчас

Чтобы испытать службу выставления счетов распознавателя форм, перейдите к средству "пример пользовательского интерфейса" в Интернете:

> [!div class="nextstepaction"]
> [Ознакомление с предварительно созданными моделями](https://fott-preview.azurewebsites.net/)

Вам потребуется подписка Azure ([создайте ее бесплатно](https://azure.microsoft.com/free/cognitive-services)) и конечную точку [ресурса распознавателя](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesFormRecognizer) форм и ключ, чтобы испытать службу выставления счетов распознавания форм. 

:::image type="content" source="media/analyze-invoice-new.png" alt-text="Пример проанализированного счета" lightbox="media/analyze-invoice-new.png":::

### <a name="input-requirements"></a>Требования к входным данным

[!INCLUDE [input requirements](./includes/input-requirements-receipts.md)]

## <a name="the-analyze-invoice-operation"></a>Операция анализа счета

Операция [Анализ счета](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-3/operations/5ed8c9843c2794cbb1a96291) принимает изображение или PDF-файл счета в качестве входных данных и извлекает интересующие значения. Вызов возвращает поле заголовка ответа с именем `Operation-Location` . `Operation-Location`Значение — это URL-адрес, СОДЕРЖАЩИЙ идентификатор результата, который будет использоваться на следующем шаге.

|Заголовок ответа| URL-адрес результата |
|:-----|:----|
|Operation-Location | `https://cognitiveservice/formrecognizer/v2.1-preview.3/prebuilt/invoice/analyzeResults/49a36324-fc4b-4387-aa06-090cfbf0064f` |

## <a name="the-get-analyze-invoice-result-operation"></a>Операция получения результата анализа счета

Второй шаг заключается в вызове операции [получения результата анализа счета](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-3/operations/5ed8c9acb78c40a2533aee83) . Эта операция принимает в качестве входных данных идентификатор результата, созданный операцией анализ счета. Он возвращает ответ JSON, содержащий поле **состояния** со следующими возможными значениями. Эта операция вызывается итеративно, пока она не вернется со значением, которое было **выполнено** . Используйте интервал от 3 до 5 секунд, чтобы избежать превышения скорости запросов в секунду (RPS).

|Поле| Тип | Возможные значения |
|:-----|:----:|:----|
|status | строка | notStarted: операция анализа не началась.<br /><br />выполняется: выполняется операция анализа.<br /><br />Сбой: не удалось выполнить операцию анализа.<br /><br />успешно: операция анализа успешно выполнена.|

Если в поле **состояние** указано значение **успешно** , в ответе JSON будут содержаться сведения о результатах, извлеченные таблицы и необязательные результаты распознавания текста, если они запрошены. Результат с учетом счета организован в виде словаря значений именованных полей, где каждое значение содержит извлеченный текст, нормализованное значение, ограничивающий прямоугольник, достоверность и соответствующие элементы слова. Он также включает элементы строки, извлеченные, где каждый элемент строки содержит сумму, описание, unitPrice, количество и т. д. Результат распознавания текста организован в виде иерархии строк и слов с текстом, ограничивающим прямоугольником и сведениями о достоверности.

### <a name="sample-json-output"></a>Пример выходных данных JSON

Ответ на операцию получить результат анализа счета будет структурированным представлением счета со всеми извлеченными данными. См. [Пример файла счета-фактуры](media/sample-invoice.jpg) и образец выходных данных [выводимого счета](media/invoice-example-new.jpg).

Выходные данные JSON имеют 3 части: 
* `"readResults"` узел содержит все распознанный текст и метки выделения. Текст упорядочивается по страницам, затем по строкам, а затем по отдельным словам. 
* `"pageResults"` узел содержит таблицы и ячейки, извлеченные с помощью их ограничивающих прямоугольников, достоверность и ссылка на строки и слова в "Реадресултс".
* `"documentResults"` узел содержит специфичные для счета значения и элементы строк, обнаруженные моделью. Здесь вы найдете все поля из счета, такие как идентификатор счета, Доставка, счет на счете, клиент, итог, строки и многое другое.

## <a name="example-output"></a>Пример выходных данных

Служба накладных будет извлекать текст, таблицы и 26 полей счета. Ниже приведены поля, извлеченные из счета в ответе выходных данных JSON (в приведенных ниже выходных данных используется этот [пример счета](media/sample-invoice.jpg)).

|Название| Тип | Описание | Текстовый | Value (стандартизованные выходные данные) |
|:-----|:----|:----|:----| :----|
| CustomerName | строка | Клиент, которому выставляется счет | Корпорация Майкрософт |  |
| CustomerId | строка | Идентификатор ссылки для клиента | CID-12345 |  |
| PurchaseOrder | строка | Номер ссылки заказа на покупку | PO-3333 | | 
| InvoiceId | строка | Идентификатор для этой конкретной накладной (часто "номер счета") | ИНВ-100 | | 
| ДатаСчета | Дата | Дата выдачи счета | 15.11.2019 | 2019-11-15 | 
| DueDate | Дата | Дата оплаты за этот счет | 12/15/2019 | 2019-12-15 |
| ИмяПоставщика | строка | Поставщик, создавший этот счет | CONTOSO LTD. | |
| VendorAddress | строка | Почтовый адрес для поставщика | 123 456th Нью-Йорк, Москва, 10001 | |
| вендораддрессреЦипиент | строка | Имя, связанное с VendorAddress | Головной офис contoso | |
| CustomerAddress | строка | Почтовый адрес клиента | 123 другие Сент-, Redmond, 98052 | |
| кустомераддрессреЦипиент | строка | Имя, связанное с CustomerAddress | Корпорация Майкрософт | |
| биллингаддресс | строка | Адрес прямой выставления счета для клиента | 123. Сент-выставляется, Редмонд Вашингтон, 98052 | |
| биллингаддрессреЦипиент | строка | Имя, связанное с Биллингаддресс | Службы Майкрософт | |
| шиппингаддресс | строка | Явный адрес доставки для клиента | 123 поставляются Сент-, Редмонд Вашингтон, 98052 | |
| шиппингаддрессреЦипиент | строка | Имя, связанное с Шиппингаддресс | Доставка Майкрософт | |
| SubTotal | number | Поле промежуточного итога, определенное в этом счете | $100,00 | 100 | 
| тоталтакс | number | Итоговое поле налога, указанное в этом счете | $10,00 | 10 |
| инвоицетотал | number | Всего новых расходов, связанных с этим счетом | $110,00 | 110 |
| амаунтдуе |  number | Общая сумма оплаты поставщика | $610,00 | 610 |
| сервицеаддресс | строка | Явный адрес службы или адрес свойства для клиента | 123 служба St, Редмонд Вашингтон, 98052 | |
| сервицеаддрессреЦипиент | строка | Имя, связанное с Сервицеаддресс | Службы Майкрософт | |
| ремиттанцеаддресс | строка | Явный перевод или адрес платежа для клиента | 123. Нью-Йорке, Нью-Йорк, 10001 |  |
| ремиттанцеаддрессреЦипиент | строка | Имя, связанное с Ремиттанцеаддресс | Выставление счетов contoso |  |
| сервицестартдате | Дата | Первая дата для периода обслуживания (например, сервисный период счета за служебную программу) | 14.10.2019 | 2019-10-14 |
| сервицеенддате | Дата | Дата окончания периода обслуживания (например, сервисный период счета за служебную программу) | 11/14/2019 | 2019-11-14 |
| превиаусунпаидбаланце | number | Явный ранее неоплаченный баланс | 500,00 долл. США | 500 |

Ниже приведены элементы строки, извлеченные из счета в ответе выходных данных JSON (в приведенных ниже выходных данных используется этот [пример счета](./media/sample-invoice.jpg)).  

|Название| Тип | Описание | Текст (#1 элементов строки) | Value (стандартизованные выходные данные) |
|:-----|:----|:----|:----| :----|
| Элементы | строка | Строка полного текста строки для элемента строки | 3/4/2021 A123 консультационные услуги 2 часа $30,00 10% $60,00 | |
| Сумма | number | Сумма элемента строки | $60,00 | 100 |
| Описание | строка | Текстовое описание для элемента строки счета | Консультационная услуга | Консультационная услуга |
| Количество | number | Количество для этого элемента строки счета | 2 | 2 |
| UnitPrice | number | Чистая или валовая цена (в зависимости от общей настройки счета) одной единицы этого элемента | $30,00 | 30 |
| ProductCode | строка| Код продукта, номер продукта или номер SKU, связанный с конкретным элементом строки | A123 | |
| Unit | строка| Единица номенклатуры строки, например кг, фунтов и т. д. | часы | |
| Дата | дата| Дата, соответствующая каждому элементу строки. Часто это Дата отправки элемента строки. | 3/4/2021| 2021-03-04 |
| Налог | number | Налог, связанный с каждым элементом строки. Возможные значения: сумма налогов, налоговый% и налог Y/N | 10 % | |


## <a name="next-steps"></a>Дальнейшие действия

- Попробуйте свои счета и примеры в [пользовательском интерфейсе примера распознавателя форм](https://fott-preview.azurewebsites.net/).
- Заполните [Краткое руководство по распознаванию форм](quickstarts/client-library.md) , чтобы приступить к написанию приложения обработки накладных с помощью распознавателя форм на любом языке разработки.

## <a name="see-also"></a>См. также

* [Что такое Распознаватель документов?](./overview.md)
* [Справочная документация по REST API](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-3/operations/5ed8c9843c2794cbb1a96291)
