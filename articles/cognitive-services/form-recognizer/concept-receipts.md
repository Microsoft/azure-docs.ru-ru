---
title: Поступления — распознаватель форм
titleSuffix: Azure Cognitive Services
description: Изучите основные понятия, связанные с анализом прихода, с помощью API-интерфейса распознавателя форм и ограничений.
services: cognitive-services
author: laujan
manager: nitinme
ms.service: cognitive-services
ms.subservice: forms-recognizer
ms.topic: conceptual
ms.date: 03/15/2021
ms.author: lajanuar
ms.openlocfilehash: 81e8cd5cf4af8da76ae4eb09bed5a4ee0368da4b
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "103467363"
---
# <a name="form-recognizer-prebuilt-receipt-model"></a>Готовая модель получения распознавателя форм

Средство распознавания форм Azure может анализировать и извлекать информацию из квитанций о продажах с помощью готовой модели поступления. Он сочетает в себе мощные возможности оптического [распознавания символов (OCR)](../computer-vision/concept-recognizing-text.md) с моделями глубокого обучения для извлечения ключевых данных из чеков, написанных на английском языке.

## <a name="understanding-receipts"></a>Основные сведения о приемках

Многие компании и лица по-прежнему полагаются на извлеченные вручную данные из квитанций о продажах. Автоматическое извлечение данных из этих поступлений может быть сложным. Квитанции могут быть крумпледы, трудно читать, иметь рукописные фрагменты и содержать высококачественные изображения смартфонов. Кроме того, шаблоны и поля получения могут сильно различаться на рынке, регионе и в оптовом торговце. Эти проблемы при извлечении данных и обнаружении полей делают обработку получения уникальной проблемы.  

API уведомления использует оптическое распознавание символов (OCR) и готовую модель для реализации больших сценариев обработки чеков. С помощью API получения нет необходимости обучать модель. Отправка изображения уведомления в API анализа чека и извлечение данных.

![Пример квитанции](./media/receipts-example.jpg)


## <a name="what-does-the-receipt-service-do"></a>Что делает служба чеков? 

Предварительно созданная служба получения извлекает содержимое квитанций о продажах, &mdash; которое вы обычно получаете в ресторане, в розничной торговле или в магазине по магазину продуктов.

### <a name="fields-extracted"></a>Извлеченные поля

|Имя| Тип | Описание | Текст | Value (стандартизованные выходные данные) |
|:-----|:----|:----|:----| :----|
| рецеипттипе | строка | Тип уведомления о продажах | Детализированных |  |
| мерчантнаме | строка | Имя продавца, выдавшего чек | Contoso |  |
| мерчантфоненумбер | phoneNumber | Указанный номер телефона получателя платежа | 987-654-3210 | + 19876543210 |
| мерчантаддресс | строка | Указанный адрес получателя платежа | 123 Main, штат Вашингтон, WA 98052 |  |
| TransactionDate | Дата | Дата выдачи чека | 06 июня, 2019 | 2019-06-26  |
| TransactionTime | time | Время выдачи поступления | 4:49 РМ | 16:49:00  |
| Итог | number | Полная сумма транзакций за получение | $14,34 | 14,34 |
| Промежуточный итог | number | Подытог получения, часто перед применением налогов | $12,34 | 12.34 |
| Налог | number | Налог на получение, частое налогообложение или эквивалентные налоги | 2,00 долл. США | 2,00 |
| Совет | number | Совет, прилагаемый покупателем | $1,00 | 1.00 |
| Элементы | массив объектов | Извлеченные элементы строк с именем, количеством, ценой за единицу и общей ценой | |
| Название | строка | Имя элемента | Surface Pro 6 | |
| Количество | number | Количество каждого элемента | 1 | |
| Цена | number | Индивидуальная цена за единицу каждого элемента | $999,00 | 999,00 |
| Общая цена | number | Общая цена за элемент строки | $999,00 | 999,00 |

### <a name="additional-features"></a>Дополнительные функции

API получения также возвращает следующие сведения:

* Уровень достоверности полей (каждое поле возвращает соответствующее значение достоверности)
* Необработанный текст OCR (текст, извлеченный OCR для получения всей квитанции)
* Ограничивающий прямоугольник для каждого значения, строки и слова

## <a name="try-it-out"></a>Попробуйте сейчас

Чтобы испытать службу получения распознавателя форм, перейдите к средству "пример пользовательского интерфейса" в Интернете:

> [!div class="nextstepaction"]
> [Ознакомление с предварительно созданными моделями](https://fott-preview.azurewebsites.net/)

## <a name="input-requirements"></a>Требования к входным данным

[!INCLUDE [input requirements](./includes/input-requirements-receipts.md)]

## <a name="supported-locales"></a>Поддерживаемые языковые стандарты 

* **Предварительно созданная квитанция версии 2.0** (общедоступная версия) поддерживает поступления по продажам в национальной настройке en-US
* **Предварительно созданная квитанция версии 2.1 – Preview. 3** (общедоступная Предварительная версия) добавляет дополнительную поддержку для следующих языков EN-чека: 
  * EN-AU 
  * EN-CA 
  * EN-GB 
  * EN-IN 

  > [!NOTE]
  > Языковой ввод 
  >
  > Предварительно созданная квитанция версии 2.1-Preview. 3 имеет необязательный параметр Request, который позволяет указать языковой стандарт для получения дополнительных английских рынков. Для получения уведомлений о продажах на английском языке из Австралии (EN-AU), Канады (EN-CA), Великобритании (EN-GB) и Индии (EN-IN) можно указать языковой стандарт, чтобы получить улучшенные результаты. Если языковой стандарт не указан в версии 2.1-Preview. 3, модель будет по умолчанию использовать модель EN-US.


## <a name="the-analyze-receipt-operation"></a>Операция анализа получения

При [проверке поступлений](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-3/operations/AnalyzeReceiptAsync) в качестве входных данных принимается изображение или PDF-документ, а также извлекаются интересующие значения и текст. Вызов возвращает поле заголовка ответа с именем `Operation-Location` . `Operation-Location`Значение — это URL-адрес, СОДЕРЖАЩИЙ идентификатор результата, который будет использоваться на следующем шаге.

|Заголовок ответа| URL-адрес результата |
|:-----|:----|
|Operation-Location | `https://cognitiveservice/formrecognizer/v2.0/prebuilt/receipt/analyzeResults/56a36454-fc4d-4354-aa07-880cfbf0064f` |

## <a name="the-get-analyze-receipt-result-operation"></a>Операция получения результатов анализа

Второй шаг — вызов операции [получения результата анализа](https://westcentralus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-3/operations/GetAnalyzeReceiptResult) . Эта операция принимает в качестве входных данных идентификатор результата, созданный операцией Analyze оприходования. Он возвращает ответ JSON, содержащий поле **состояния** со следующими возможными значениями. Эта операция вызывается итеративно, пока она не вернется со значением, которое было **выполнено** . Используйте интервал от 3 до 5 секунд, чтобы избежать превышения скорости запросов в секунду (RPS).

|Поле| Тип | Возможные значения |
|:-----|:----:|:----|
|status | строка | notStarted: операция не запущена. |
| |  | выполняется: выполняется операция анализа. |
| |  | Сбой: не удалось выполнить операцию анализа. |
| |  | успешно: операция анализа успешно выполнена. |

Если поле **Status** имеет значение **успех** , ответ JSON будет включать результаты получения и распознавания текста. Результат получения сведений об уведомлении организован в виде словаря значений именованных полей. Каждое значение содержит извлеченный текст, нормализованное значение, ограничивающий прямоугольник, достоверность и соответствующие элементы слова. Результат распознавания текста организован в виде иерархии строк и слов с текстом, ограничивающим прямоугольником и сведениями о достоверности.

![Пример результатов получения](./media/contoso-receipt-2-information.png)

### <a name="sample-json-output"></a>Пример выходных данных JSON


Ответ на операцию получения результатов анализа возвращает структурированное представление чека со всеми извлеченными данными.  См. здесь [Пример файла получения](https://github.com/Azure-Samples/cognitive-services-REST-api-samples/blob/master/curl/form-recognizer/contoso-allinone.jpg) , а также [выходные данные получения полученного примера](https://github.com/Azure-Samples/cognitive-services-REST-api-samples/blob/master/curl/form-recognizer/receipt-result.json)вывода.

См. Следующий пример успешного ответа JSON:
* Узел `"readResults"` содержит весь распознанный текст. Текст упорядочивается по страницам, затем по строкам, а затем по отдельным словам. 
* Узел `"documentResults"` содержит обнаруженные моделью значения для конкретной визитной карточки. Здесь вы найдете полезные пары "ключ-значение", такие как имя, фамилия, название компании и многое другое.

```json
{ 
  "status":"succeeded",
  "createdDateTime":"2019-12-17T04:11:24Z",
  "lastUpdatedDateTime":"2019-12-17T04:11:32Z",
  "analyzeResult":{ 
    "version":"2.0.0",
    "readResults":[ 
      { 
        "page":1,
        "angle":0.6893,
        "width":1688,
        "height":3000,
        "unit":"pixel",
        "language":"en",
        "lines":[ 
          { 
            "text":"Contoso",
            "boundingBox":[ 
              635,
              510,
              1086,
              461,
              1098,
              558,
              643,
              604
            ],
            "words":[ 
              { 
                "text":"Contoso",
                "boundingBox":[ 
                  639,
                  510,
                  1087,
                  461,
                  1098,
                  551,
                  646,
                  604
                ],
                "confidence":0.955
              }
            ]
          },
          ...
        ]
      }
    ],
    "documentResults":[ 
      { 
        "docType":"prebuilt:receipt",
        "pageRange":[ 
          1,
          1
        ],
        "fields":{ 
          "ReceiptType":{ 
            "type":"string",
            "valueString":"Itemized",
            "confidence":0.692
          },
          "MerchantName":{ 
            "type":"string",
            "valueString":"Contoso Contoso",
            "text":"Contoso Contoso",
            "boundingBox":[ 
              378.2,
              292.4,
              1117.7,
              468.3,
              1035.7,
              812.7,
              296.3,
              636.8
            ],
            "page":1,
            "confidence":0.613,
            "elements":[ 
              "#/readResults/0/lines/0/words/0",
              "#/readResults/0/lines/1/words/0"
            ]
          },
          "MerchantAddress":{ 
            "type":"string",
            "valueString":"123 Main Street Redmond, WA 98052",
            "text":"123 Main Street Redmond, WA 98052",
            "boundingBox":[ 
              302,
              675.8,
              848.1,
              793.7,
              809.9,
              970.4,
              263.9,
              852.5
            ],
            "page":1,
            "confidence":0.99,
            "elements":[ 
              "#/readResults/0/lines/2/words/0",
              "#/readResults/0/lines/2/words/1",
              "#/readResults/0/lines/2/words/2",
              "#/readResults/0/lines/3/words/0",
              "#/readResults/0/lines/3/words/1",
              "#/readResults/0/lines/3/words/2"
            ]
          },
          "MerchantPhoneNumber":{ 
            "type":"phoneNumber",
            "valuePhoneNumber":"+19876543210",
            "text":"987-654-3210",
            "boundingBox":[ 
              278,
              1004,
              656.3,
              1054.7,
              646.8,
              1125.3,
              268.5,
              1074.7
            ],
            "page":1,
            "confidence":0.99,
            "elements":[ 
              "#/readResults/0/lines/4/words/0"
            ]
          },
          "TransactionDate":{ 
            "type":"date",
            "valueDate":"2019-06-10",
            "text":"6/10/2019",
            "boundingBox":[ 
              265.1,
              1228.4,
              525,
              1247,
              518.9,
              1332.1,
              259,
              1313.5
            ],
            "page":1,
            "confidence":0.99,
            "elements":[ 
              "#/readResults/0/lines/5/words/0"
            ]
          },
          "TransactionTime":{ 
            "type":"time",
            "valueTime":"13:59:00",
            "text":"13:59",
            "boundingBox":[ 
              541,
              1248,
              677.3,
              1261.5,
              668.9,
              1346.5,
              532.6,
              1333
            ],
            "page":1,
            "confidence":0.977,
            "elements":[ 
              "#/readResults/0/lines/5/words/1"
            ]
          },
          "Items":{ 
            "type":"array",
            "valueArray":[ 
              { 
                "type":"object",
                "valueObject":{ 
                  "Quantity":{ 
                    "type":"number",
                    "text":"1",
                    "boundingBox":[ 
                      245.1,
                      1581.5,
                      300.9,
                      1585.1,
                      295,
                      1676,
                      239.2,
                      1672.4
                    ],
                    "page":1,
                    "confidence":0.92,
                    "elements":[ 
                      "#/readResults/0/lines/7/words/0"
                    ]
                  },
                  "Name":{ 
                    "type":"string",
                    "valueString":"Cappuccino",
                    "text":"Cappuccino",
                    "boundingBox":[ 
                      322,
                      1586,
                      654.2,
                      1601.1,
                      650,
                      1693,
                      317.8,
                      1678
                    ],
                    "page":1,
                    "confidence":0.923,
                    "elements":[ 
                      "#/readResults/0/lines/7/words/1"
                    ]
                  },
                  "TotalPrice":{ 
                    "type":"number",
                    "valueNumber":2.2,
                    "text":"$2.20",
                    "boundingBox":[ 
                      1107.7,
                      1584,
                      1263,
                      1574,
                      1268.3,
                      1656,
                      1113,
                      1666
                    ],
                    "page":1,
                    "confidence":0.918,
                    "elements":[ 
                      "#/readResults/0/lines/8/words/0"
                    ]
                  }
                }
              },
              ...
            ]
          },
          "Subtotal":{ 
            "type":"number",
            "valueNumber":11.7,
            "text":"11.70",
            "boundingBox":[ 
              1146,
              2221,
              1297.3,
              2223,
              1296,
              2319,
              1144.7,
              2317
            ],
            "page":1,
            "confidence":0.955,
            "elements":[ 
              "#/readResults/0/lines/13/words/1"
            ]
          },
          "Tax":{ 
            "type":"number",
            "valueNumber":1.17,
            "text":"1.17",
            "boundingBox":[ 
              1190,
              2359,
              1304,
              2359,
              1304,
              2456,
              1190,
              2456
            ],
            "page":1,
            "confidence":0.979,
            "elements":[ 
              "#/readResults/0/lines/15/words/1"
            ]
          },
          "Tip":{ 
            "type":"number",
            "valueNumber":1.63,
            "text":"1.63",
            "boundingBox":[ 
              1094,
              2479,
              1267.7,
              2485,
              1264,
              2591,
              1090.3,
              2585
            ],
            "page":1,
            "confidence":0.941,
            "elements":[ 
              "#/readResults/0/lines/17/words/1"
            ]
          },
          "Total":{ 
            "type":"number",
            "valueNumber":14.5,
            "text":"$14.50",
            "boundingBox":[ 
              1034.2,
              2617,
              1387.5,
              2638.2,
              1380,
              2763,
              1026.7,
              2741.8
            ],
            "page":1,
            "confidence":0.985,
            "elements":[ 
              "#/readResults/0/lines/19/words/0"
            ]
          }
        }
      }
    ]
  }
}
```

## <a name="customer-scenarios"></a>Сценарии для клиентов  

Данные, извлеченные с помощью API уведомления, можно использовать для выполнения различных задач. Ниже приведено несколько примеров того, что клиенты выполнили с помощью API получения уведомлений.

### <a name="business-expense-reporting"></a>Отчеты по бизнес-расходам  

Часто для хранения бизнес-расходов требуется тратить время на ручное ввод данных из изображений чеков. С помощью API получения можно использовать извлеченные поля, чтобы частично автоматизировать этот процесс и быстро анализировать квитанции.  

API уведомления — это простой выход JSON, позволяющий использовать извлеченные значения полей несколькими способами. Интеграция с внутренними приложениями расходов для предварительного заполнения отчетов о расходах. Дополнительные сведения об этом сценарии см. в статье о том, как Acumatica использует API получения, чтобы [сделать отчет о расходах менее непростым](https://customers.microsoft.com/story/762684-acumatica-partner-professional-services-azure).  

### <a name="auditing-and-accounting"></a>Аудит и учет

Выходные данные API прихода также можно использовать для анализа большого количества расходов в различных точках в отчете о расходах и возмещении. Вы можете обрабатывать уведомления, чтобы рассмотреть их для ручного аудита или быстрого утверждения.  

Выходные данные уведомления также полезны для общей книги, предназначенной для бизнеса или личных целей. Используйте API-интерфейс уведомления, чтобы преобразовать любые данные изображения или PDF необработанного поступления в цифровой выход, который является обрабатываемым.

### <a name="consumer-behavior"></a>Поведение потребителей 

Уведомления содержат полезные данные, которые можно использовать для анализа поведения потребителей и тенденций покупок.

API прихода также включает [функцию обработки поступления в построителе искусственного интеллекта](/ai-builder/prebuilt-receipt-processing).

## <a name="next-steps"></a>Следующие шаги

 . Начните писать приложение обработки чеков с распознавателем форм на любом языке разработки.

> [!div class="nextstepaction"]
> [Краткое руководство по завершению распознавания форм](quickstarts/client-library.md)

## <a name="see-also"></a>См. также

* [Что такое Распознаватель документов?](overview.md)
* [Справочник по API распознавателя форм](https://westus.dev.cognitive.microsoft.com/docs/services/form-recognizer-api-v2-1-preview-3/operations/AnalyzeReceiptAsync)
>
