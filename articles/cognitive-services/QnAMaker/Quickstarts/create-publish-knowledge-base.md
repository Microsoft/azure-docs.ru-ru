---
title: Краткое руководство. Создание, обучение и публикация базы знаний QnA Maker
description: Базу знаний QnA Maker можно создать из собственного содержимого, например часто задаваемых вопросов или руководств по продукции. В этой статье описано, как создать базу знаний QnA Maker на основе простой веб-страницы с часто задаваемыми вопросами, чтобы ответить на вопросы QnA Maker.
ms.service: cognitive-services
ms.subservice: qna-maker
ms.topic: quickstart
ms.date: 11/09/2020
ms.openlocfilehash: c59529db0981a1071b76714c48aacaf675e4b17a
ms.sourcegitcommit: 7e117cfec95a7e61f4720db3c36c4fa35021846b
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/09/2021
ms.locfileid: "99987898"
---
# <a name="quickstart-create-train-and-publish-your-qna-maker-knowledge-base"></a>Краткое руководство. Создание, подготовка и публикация базы знаний QnA Maker

Базу знаний QnA Maker можно создать из собственного содержимого, например часто задаваемых вопросов или руководств по продукции. В этой статье описано, как создать базу знаний QnA Maker на основе простой веб-страницы с часто задаваемыми вопросами, чтобы ответить на вопросы QnA Maker.

## <a name="prerequisites"></a>Предварительные требования

> [!div class="checklist"]
> * Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/cognitive-services/), прежде чем начинать работу.
> * [Ресурс](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesQnAMaker) QnA Maker, созданный на портале Azure. Запишите идентификатор Azure Active Directory, подписку и имя ресурса QnA, выбранное при создании ресурса.

## <a name="create-your-first-qna-maker-knowledge-base"></a>Создание первой базы знаний QnA Maker

# <a name="qna-maker-ga-stable-release"></a>[Общедоступная версия QnA Maker (стабильный выпуск)](#tab/v1)

1. Войдите на портал [QnAMaker.ai](https://QnAMaker.ai), используя учетные данные Azure.

2. На портале QnA Maker выберите **Create a knowledge base** (Создать базу знаний).

3. Пропустите **шаг 1** на странице **создания**, если у вас уже есть ресурс QnA Maker.

    Если вы еще не создали ресурс, выберите **Create a QnA service** (Создать службу QnA). Откроется [портал Azure](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesQnAMaker) для настройки службы QnA Maker в вашей подписке. Запишите идентификатор Azure Active Directory, подписку и имя ресурса QnA, выбранное при создании ресурса.

    Завершив создание ресурса на портале Azure, вернитесь на портал QnA Maker, обновите страницу браузера и продолжайте с **шага 2**.

4. На **шаге 2** выберите Active Directory, подписку, службу (ресурс) и язык для всех баз знаний, создаваемых в этой службе.

    :::image type="content" source="../media/qnamaker-create-publish-knowledge-base/qnaservice-selection.png" alt-text="Снимок экрана с выбранной базой данных и службой QnA Maker":::

5. На **шаге 3** назовите свою базу знаний **Мой пример базы знаний QnA**.

6. На **шаге 4** настройте параметры, используя значения из приведенной ниже таблицы.

    |Параметр|Значение|
    |--|--|
    |**Enable multi-turn extraction from URLs, .pdf or .docx files** (Включить многоэтапное извлечение из URL-адресов, файлов .pdf или .docx)|Флажок установлен|
    |**Многоэтапное извлечение текста по умолчанию**| Выбор и вариант|
    |**Добавление URL-адреса**|`https://www.microsoft.com/en-us/software-download/faq`|
    |**Chit-chat** (Беседа)|Выберите значение **Professional** (Профессиональная)|

7. На **шаге 5** выберите **Create your KB** (Создать базу знаний).

    Процесс извлечения, во время которого прочитывается документ и определяются вопросы и ответы, занимает несколько минут.

    Когда QnA Maker успешно создаст базы знаний, откроется страница **Knowledge base** (База знаний). На этой странице можно изменить содержимое базы знаний.

# <a name="qna-maker-managed-preview-release"></a>[Управляемая служба QnA Maker (предварительный выпуск)](#tab/v2)

1. Войдите на портал [QnAMaker.ai](https://QnAMaker.ai), используя учетные данные Azure.

2. На портале QnA Maker выберите **Create a knowledge base** (Создать базу знаний).

3. Пропустите **шаг 1** на странице **создания**, если у вас уже есть ресурс QnA Maker.

    Если вы еще не создали ресурс, выберите **Create a QnA service** (Создать службу QnA). Откроется [портал Azure](https://ms.portal.azure.com/#create/Microsoft.CognitiveServicesQnAMaker) для настройки службы QnA Maker в вашей подписке. Запишите идентификатор Azure Active Directory, подписку и имя ресурса QnA, выбранное при создании ресурса.

    Завершив создание ресурса на портале Azure, вернитесь на портал QnA Maker, обновите страницу браузера и продолжайте с **шага 2**.

4. На **шаге 2** выберите Active Directory, подписку, службу (ресурс) и язык для всех баз знаний, создаваемых в этой службе.

    :::image type="content" source="../media/qnamaker-create-publish-knowledge-base/connect-your-knowledge-base.png" alt-text="Снимок экрана: выбор базы знаний в управляемой службе QnA Maker":::

5. На **шаге 2** вы сможете настроить отдельный язык для каждой базы знаний, если вы впервые создаете базу знаний для этой службы. После указания параметров языка для первой базы знаний вы не сможете изменить их позднее.

6. На  **шаге 3** присвойте базе знаний имя  **Мой пример базы знаний QnA**. 

7. На **шаге 4** настройте параметры, используя значения из приведенной ниже таблицы.

    |Параметр|Значение|
    |--|--|
    |**Enable multi-turn extraction from URLs, .pdf or .docx files** (Включить многоэтапное извлечение из URL-адресов, файлов .pdf или .docx)|Флажок установлен|
    |**Многоэтапное извлечение текста по умолчанию**| Выбор и вариант|
    |**+ Добавить файл**| Скачайте руководство по ноутбуку Surface по адресу https://download.microsoft.com/download/7/B/1/7B10C82E-F520-4080-8516-5CF0D803EEE0/surface-book-user-guide-EN.pdf. 
    |**Chit-chat** (Беседа)|Выберите значение **Professional** (Профессиональная)|

8. На **шаге 5** выберите **Create your KB** (Создать базу знаний).

    Процесс извлечения, во время которого прочитывается документ и определяются вопросы и ответы, занимает несколько минут.

    Когда QnA Maker успешно создаст базы знаний, откроется страница **Knowledge base** (База знаний). На этой странице можно изменить содержимое базы знаний.

---

## <a name="add-a-new-question-and-answer-set"></a>Добавление нового набора вопросов и ответов

1. На портале QnA Maker на странице **Edit** (Изменение) выберите **+ Add QnA pair** (+ Добавить пару "вопрос — ответ") на контекстной панели инструментов.
1. Добавьте следующий вопрос:

    `How many Azure services are used by a knowledge base?`

1. Добавьте ответ, отформатированный с помощью _markdown_:

    ` * Azure QnA Maker service\n* Azure Cognitive Search\n* Azure web app\n* Azure app plan`

    :::image type="content" source="../media/qnamaker-create-publish-knowledge-base/add-question-and-answer.png" alt-text="Добавьте вопрос в виде текста и ответа, отформатированного с помощью markdown.":::

    Символ markdown (`*`) используется для пунктов маркированного списка. Символ `\n` используется для новой строки.

    На странице **Edit** (Изменение) отображается markdown. При использовании панели **Test** (Проверка) в дальнейшем вы увидите, что markdown отображается правильно.

## <a name="save-and-train"></a>Сохранение и обучение

В правом верхнем углу выберите **Сохранить и обучить**, чтобы сохранить изменения и обучить QnA Maker. Изменения не вступят в силу, если они не сохранены.

## <a name="test-the-knowledge-base"></a>Проверка базы знаний

# <a name="qna-maker-ga-stable-release"></a>[Общедоступная версия QnA Maker (стабильный выпуск)](#tab/v1)

1. На портале QnA Maker в правом верхнем углу выберите **Test** (Тестировать), чтобы проверить, вступили ли в силу внесенные изменения.
2. В текстовом поле введите пример пользовательского запроса.

    `I want to know the difference between 32 bit and 64 bit Windows`

    :::image type="content" source="../media/qnamaker-create-publish-knowledge-base/query-dialogue.png" alt-text="В текстовом поле введите пример пользовательского запроса.":::

3. Выберите **Inspect** (Проверить), чтобы более подробно изучить ответ. Окно тестирования используется для проверки изменений, внесенных в базу знаний, перед публикацией своей базы знаний.

4. Выберите панель **Test** (Проверка) еще раз, чтобы закрыть панель **Test** (Проверка).

# <a name="qna-maker-managed-preview-release"></a>[Управляемая служба QnA Maker (предварительный выпуск)](#tab/v2)

1. На портале QnA Maker в правом верхнем углу выберите **Test** (Тестировать), чтобы проверить, вступили ли в силу внесенные изменения.
2. В текстовом поле введите пример пользовательского запроса.

    `whats the size of the touchscreen`

3. Если для базы знаний включена функция MRC (вариант **Display short answer** (Отображать короткий ответ)), то в области тестирования вместе с основным ответом вы увидите еще и точный ответ, если он доступен. 

    ![Область тестирования с поддержкой управления](../media/conversational-context/test-pane-with-managed.png)
    

4. Выберите Inspect (Проверить), чтобы более подробно изучить ответ. Окно тестирования используется для проверки изменений, внесенных в базу знаний, перед публикацией своей базы знаний. 
5. Выберите панель **Test** (Проверка) еще раз, чтобы закрыть панель **Test** (Проверка).
---

## <a name="publish-the-knowledge-base"></a>Публикация базы знаний

При публикации базы знаний содержимое этой базы знаний переносится из указателя `test` в указатель `prod` в службе "Поиск Azure".

![Снимок экрана с перемещением содержимого базы знаний](../media/qnamaker-how-to-publish-kb/publish-prod-test.png)

1. На портале QnA Maker выберите **Publish** (Опубликовать). Затем, чтобы подтвердить, выберите **Опубликовать** на странице.

    Служба QnA Maker успешно опубликована. Конечную точку можно использовать в коде приложения или бота.

    ![Снимок экрана с успешной публикацией](../media/qnamaker-create-publish-knowledge-base/publish-knowledge-base-to-endpoint.png)

## <a name="create-a-bot"></a>Создание бота

После публикации можно создать бота на странице **Publish** (Публикация):

* Можно создать несколько ботов, которые будут работать с одной базой знаний, для разных регионов или тарифных планов.
* Если нужен только один бот для базы знаний, перейдите по ссылке **View all your bots on the Azure portal** (Просмотреть всех ботов на портале Azure), чтобы просмотреть список текущих ботов.

При внесении изменений в базу знаний и ее повторной публикации не требуется предпринимать какие-либо действия с ботом. Он уже настроен для работы с базой знаний и будет учитывать все ее последующие изменения. При каждой публикации базы знаний все боты, подключенные к ней, обновляются автоматически.

1. На портале QnA Maker, на странице **Publish** (Публикация) выберите **Create bot** (Создать бота). Эта кнопка отображается только после публикации базы знаний.

    ![Снимок экрана с созданием бота](../media/qnamaker-create-publish-knowledge-base/create-bot-from-published-knowledge-base-page.png)

1. В новой вкладке браузера откроется страница создания службы Azure Bot на портале Azure. Настройте службу Azure Bot. Бот и QnA Maker могут иметь общий план службы веб-приложений, но не могут совместно использовать одно веб-приложение. Это означает, что **имя приложения** для бота должно отличаться от имени приложения для службы QnA Maker.

    * **Рекомендуется**
        * Измените дескриптор бота, если он не уникален.
        * Выберите язык пакета SDK. После создания программы-робота можно загрузить код в локальную среду разработки и продолжить разработку.
    * **Не рекомендуется**
        * Создавая бот, не изменяйте приведенные ниже параметры на портале Azure. Их значения автоматически заполняются для базы знаний:
           * ключ проверки подлинности QnA;
           * расположение и план службы приложений;


1. После создания бота откройте ресурс **Bot service** (Служба бота).
1. В разделе **управление ботом** выберите **Test in Web Chat** (Тестировать в веб-чате).
1. В приглашении чата **Type your message** (Тип сообщения), введите:

    `Azure services?`

    Чат-бот ответит, используя ответ из базы знаний.

    :::image type="content" source="../media/qnamaker-create-publish-knowledge-base/test-web-chat.png" alt-text="Введите запрос пользователя в тестовый веб-чат.":::

## <a name="what-did-you-accomplish"></a>Что вы сделали

Вы создали базу знаний, добавили в нее общедоступный URL-адрес и собственный набор QnA, а также обучили, проверили и опубликовали ее.

После публикации базы знаний вы создали бот и проверили его.

Это сделано всего за несколько минут без написания кода или очистки содержимого.

## <a name="clean-up-resources"></a>Очистка ресурсов

Если вы не переходите к следующему краткому руководству, удалите ресурсы платформы QnA Maker и Bot на портале Azure.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Добавление вопросов с использованием метаданных](add-question-metadata-portal.md)

Дополнительные сведения

* [Формат markdown в ответах](../reference-markdown-format.md)
* [Источники данных](../Concepts/data-sources-and-content.md) QnA Maker.
