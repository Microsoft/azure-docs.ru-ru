---
title: Запись пользовательских голосовых примеров — служба речи
titleSuffix: Azure Cognitive Services
description: Создайте пользовательские голосовые модели рабочего уровня, подготовив надежный сценарий, работая с актерами озвучивания и используя профессиональную студию звукозаписи.
services: cognitive-services
author: erhopf
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 04/13/2020
ms.author: erhopf
ms.openlocfilehash: 966b11e2c9a0f7ffc5e6ec9238080b9076d37af6
ms.sourcegitcommit: 65cef6e5d7c2827cf1194451c8f26a3458bc310a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/19/2021
ms.locfileid: "98572431"
---
# <a name="record-voice-samples-to-create-a-custom-voice"></a>Запись образцов голоса для создания пользовательских голосовых моделей

Создание высококачественных рабочих пользовательских голосовых моделей с нуля нельзя назвать стандартной операцией. Центральным компонентом пользовательской голосовой модели является большая коллекция звуковых образцов человеческой речи. Очень важно, чтобы эти аудиозаписи были высокого качества. Выберите актера озвучивания, у которого есть опыт создания таких записей, и пусть компетентный студийный звукоинженер запишет их с помощью профессионального оборудования.

Перед созданием записей потребуется сценарий: слова, которые произнесет актер озвучивания для создания звуковых образцов. Для достижения наилучших результатов у сценария должен быть соответствующий фонетический охват и достаточное разнообразие для обучения пользовательской голосовой модели.

Создание профессиональной записи речи включает в себя много важных деталей. В этом руководстве детально описывается процесс, с помощью которого вы получите соответствующие и согласованные результаты.

> [!NOTE]
> Если вы хотите обучить нейронный голос, необходимо указать профиль с учетом голоса, содержащийся в файле согласия пользователя, которому предоставлено уведомление о распознавании речи, чтобы обучить пользовательскую голосовую модель. При подготовке сценария записи убедитесь, что вы включили следующее предложение. 

> «I [штат, имя и фамилия] Помните, что записи о моем голоса будут использоваться [региону название компании] для создания и использования искусственной версии моего голоса».
Это предложение будет использоваться для проверки того, выполняются ли обучающие данные тем же лицом, которое делает согласие. Дополнительные сведения об этой [проверке](https://aka.ms/CNV-data-privacy) см. здесь.

> Настраиваемая нейронная речь доступна с ограниченным доступом. Убедитесь, что вы понимаете [требования к ответственному AI](https://aka.ms/gating-overview) и [применяете доступ к нему](https://aka.ms/customneural). 

> [!TIP]
> Для получения наилучшего качества можно привлечь к разработке своей пользовательской голосовой модели корпорацию Майкрософт. У нас большой опыт создания высококачественных голосовых моделей для собственных продуктов, включая Cortana и Office.

## <a name="voice-recording-roles"></a>Роли записи речи

В проекте записи пользовательского голоса есть четыре основные роли.

Роль|Назначение
-|-
Актер озвучивания        |Голос этого человека станет основой пользовательской голосовой модели.
Студийный звукоинженер  |Контролирует технические аспекты записи и управляет оборудованием звукозаписи.
Директор            |Подготавливает сценарий и проводит коучинг актера озвучивания для получения эффективного результата.
Редактор              |Обрабатывает звуковые файлы на последнем этапе и готовит их для отправки на портал Custom Voice.

Один человек может выполнять несколько ролей. В этом руководстве предполагается, что вы будете в первую очередь выполнять роль директора и нанимать актера озвучивания и звукоинженера. Если вы хотите создавать записи самостоятельно, в этой статье вы также найдете некоторые сведения о роли звукоинженера. Роль редактора не требуется до окончания сеанса, поэтому его может заменить директор или звукоинженер.

## <a name="choose-your-voice-talent"></a>Выбор актера озвучивания

Актеры, имеющие опыт в начитке текста или голосовых пародиях, считаются хорошими актерами озвучивания. Вы также можете найти подходящего актера среди дикторов и телекомментаторов.

Выберите актера, естественный голос которого вам нравится. Можно создавать уникальные голоса "персонажей", но большинству актеров сложно работать с ними на постоянной основе и такие усилия могут вызвать напряжение голосовых связок.

> [!TIP]
> В целом для создания пользовательской голосовой модели не стоит использовать голоса знаменитостей, если только нет такой цели — создать узнаваемый голос. Малоизвестные голоса обычно менее отвлекают пользователей.

Единственным наиболее важным фактором для выбора актера озвучивания является согласованность. Ваши записи речи должны звучать так, будто они сделаны в один день в одном помещении. Этого можно достичь благодаря применению специальных методов записи речи и навыков звукообработки.

Другой частью уравнения является вклад актера озвучивания. Они должны иметь возможность проговаривать с постоянной скоростью, уровнем громкости, тоном и тоном. Четкая дикция является обязательной. Кроме того, он должен иметь возможность строго контролировать свой тон, эмоциональном влиять и маннерисмс речи.

Запись образцов пользовательских голосовых моделей может быть более утомительной, чем другие виды работ с голосом. Большинство актеров озвучивания могут работать два-три часа в день. Ограничьте сеансы до трех или четырех раз в неделю. Желательно, чтобы между ними был выходной.

Работайте с актером озвучивания над развитием "персонажа", который будет определять общее звучание и эмоциональный тон пользовательской голосовой модели. В процессе работы вы определите, какое именно нейтральное звучание подходит этому "персонажу". С помощью настраиваемой функции нейронной речи можно обучить модель, которая говорит с эмоции. Определите «стили речи» и попросите своего голоса прочесть сценарий так, чтобы он ресонате нужные стили.  

Например, может прослеживаться оптимистичное настроение. Таким образом, оптимистичные настрои будут очевидны даже при сохранении эмоциональной нейтральности в речи. Однако этот признак должен быть едва заметным и уместным. Прослушайте записи речи современных актеров озвучивания, чтобы определиться с тем, что именно вам нужно.

> [!TIP]
> Обычно директор хочет, чтобы ему принадлежали сделанные им звукозаписи. Актер озвучивания должен согласиться на контракт с выполнением работы по найму.

## <a name="create-a-script"></a>Создание сценария

Отправной точкой любого сеанса записи пользовательской голосовой модели является сценарий, который содержит высказывания, произносимые голосом актера. (Термин "высказывания" охватывает полные предложения и короткие фразы.)

Высказывания в сценарии могут быть разнообразными: взятыми из фантастики, научной литературы, быть расшифровками, новостными сообщениями и прочим, что доступно в печатной форме. Если вы хотите, чтобы голос звучал уверенно при употреблении определенных слов (например, медицинской терминологии или компьютерного жаргона), можно включить предложения из научной или технической документации. Ознакомьтесь с требованиями закона об авторском праве в разделе [Юридическая правомерность](#legalities). Можно также написать собственный текст.

Фразы не обязательно должны происходить из одного источника или одного типа источника. Они даже могут быть не взаимосвязанными. Тем не менее, если в приложении речи вы будете использовать стандартные фразы (например: "Вход выполнен успешно"), включите их в сценарий. Так будет большая вероятность качественного воспроизведения этих фраз с помощью пользовательской голосовой модели. И если вы решите использовать запись вместо синтезированной речи, она уже будет создана с помощью того же голоса.

В то время как согласованность является ключевым аспектом в выборе актера озвучивания, разнообразие — отличительная черта хорошего сценария. Сценарий должен включать в себя много разных слов и предложений с разной длиной, множеством структур и эмоциональных оттенков. Каждый звук на языке должен быть представлен несколько раз и в многочисленных контекстах (называемом *фонетическим покрытием*).

Кроме того, текст должен включать все способы, с помощью которых в письменной форме можно представить отдельный звук. Каждый звук должен содержаться в разных местах в предложениях. Должны использоваться и быть прочитанными с соответствующей интонацией повествовательные предложения и вопросы.

Трудно написать сценарий, который бы обеспечивал *достаточно* данных, чтобы с помощью портала Custom Speech создать качественный голос. На практике самый простой способ создать сценарий, который обеспечивает надежный фонетический охват, — это включить большое количество примеров. Стандартные голоса Майкрософт были созданы на основе десятков тысяч высказываний. Чтобы создать пользовательскую голосовую модель рабочего уровня, необходимо записать как минимум от пары до нескольких тысяч высказываний.

Внимательно проверьте сценарий на наличие ошибок. Если возможно, попросите кого-нибудь еще проверить его. Когда вы запустите сценарий с определенным голосом, вы, вероятно, найдете еще несколько ошибок.

### <a name="script-format"></a>Формат сценария

Можно написать сценарий в Microsoft Word. Этот сценарий предназначается для использования во время сеанса записи, поэтому вы можете настроить его так, как вам удобно. Отдельно создайте текстовый файл, необходимый для портала Custom Voice.

Основной формат сценария включает в себя три столбца.

* Номер высказывания, начиная с 1. Нумерация облегчит быстрый поиск конкретного высказывания для всех присутствующих в студии ("Давайте попробуем номер 356 снова"). Можно использовать функцию нумерации абзацев текстового процессора Word для автоматической нумерации строк таблицы.
* Пустой столбец, куда будут записываться номер фрагмента или временной код каждого высказывания и который облегчит поиск в готовой записи речи.
* Текст самого высказывания.

![Пример скрипта](media/custom-voice/script.png)

> [!NOTE]
> Большинство записей Studios в коротких сегментах, известных как, *принимает*. Каждый фрагмент обычно содержит от 10 до 24 высказываний. Указания номера фрагмента будет достаточно, чтобы позже найти высказывание. При записывании речи в студии, где предпочитают создавать более длинные записи, можно указать временной код. В студии будет на явном месте отображаться соответствующее время.

Оставьте достаточно места после каждой строки, чтобы писать заметки. Между страницами не должно быть разделенных высказываний. Пронумеруйте страницы и распечатайте сценарий на одной стороне листа.

Распечатайте три копии сценария: один для актера, один для инженера и один для директора (для себя). Вместо скрепок для степлера используйте зажим для бумаги: опытный актер сможет бесшумно отделять страницы.

### <a name="legalities"></a>Юридическая правомерность

Согласно закону об авторском праве, чтение актером текста, защищенного авторским правом, может являться действием, за которое автор текста должен получить компенсацию. При воспроизведении этого текста в готовом продукте (с помощью пользовательской голосовой модели) источник обнаружен не будет, тем не менее правомерность использования работы, защищенной авторским правом, не установлена для этой цели явным образом. Корпорация Майкрософт не может предоставить юридическую консультацию по этому вопросу — вы можете получить консультацию у своего юриста.

К счастью, с этими проблемами можно и не столкнуться. Есть много источников текстов, которые можно использовать без разрешения или лицензии.

|Источник текста|Описание|
|-|-|
|[Документация CMU Arctic](http://festvox.org/cmu_arctic/)|В проектах синтеза речи можно использовать около 1100 предложений, выбранных из работ, не защищенных авторским правом. Хороший старт.|
|Работы, больше не<br>защищенные авторским правом|Сюда входят работы, опубликованные до 1923 года. Для английского языка [Project Gutenberg](https://www.gutenberg.org/) предлагает десятки тысяч таких работ. Рекомендуется сосредоточиться на новых работах, так как язык будет ближе к современному английскому.|
|Работы&nbsp;правительственных учреждений|Работа, созданная США правительственными органами, в США не соблюдается, хотя правительственные учреждения могут запрашивать авторские права в других странах и регионах.|
|Работы, ставшие всеобщим достоянием|Работы, запрос авторского права на которые был явно отклонен или которые стали достоянием общественности. В некоторых юрисдикциях, возможно, не удастся получить полный отказ от авторских прав.|
|Лицензированные работы по разрешению|Работы, распространенные по лицензии, например Creative Commons или лицензии свободной документации GNU. Википедия использует лицензию GNU. Однако некоторые лицензии могут налагать ограничения на воспроизведение лицензионного содержимого, которые могут повлиять на создание пользовательской голосовой модели, поэтому внимательно ознакомьтесь с лицензией.|

## <a name="recording-your-script"></a>Запись сценария

Запишите свой сценарий в профессиональной вокальной студии звукозаписи. Там используется речевая студия, нужное оборудование и есть квалифицированный персонал. Не стоит экономить на записи.

Обсудите свой проект с инженером по записи в студии и прослушайте свои советы. Запись должна иметь небольшое сжатие динамического диапазона или же оно должно отсутствовать (максимум 4:1). Очень важно, чтобы у записи была согласованная громкость и высокое отношение сигнала к шуму, при этом должны отсутствовать лишние звуки.

### <a name="do-it-yourself"></a>Попробуйте сами

Если вы хотите создать запись самостоятельно, а не идти в студию звукозаписи, вот краткое руководство. Благодаря росту популярности любительских записей и аудиороликов можно быстро найти в Интернете полезные рекомендации по записи и нужные ресурсы.

В качестве речевой студии можно использовать небольшую комнату без заметного эха или звукового фона. Она должна быть максимально тихой и звуконепроницаемой. Ткани на стенах можно использовать для уменьшения эха и нейтрализации или "заглушения" звукового фона комнаты.

Используйте высококачественный студийный конденсаторный микрофон, предназначенный для записи голоса. Качественными считаются микрофоны Sennheiser, AKG и даже последняя версия Zoom. Вы можете купить микрофон или арендовать его у местной аудиовизуальной фирмы. Поищите микрофон с USB-интерфейсом. Этот тип микрофона удобно сочетает в себе микрофонный элемент, предусилитель и аналого-цифровой преобразователь, что упрощает подключение.

Вы также можете использовать аналоговый микрофон. Многие арендные дома предлагают винтажные микрофоны, известные своим звучанием. Обратите внимание, что в профессиональном аналоговом оборудовании используются симметричные разъемы XLR, а не разъем 1/4 дюйма, используемый в бытовой аппаратуре. Если вы выбрали аналоговое оборудование, вам также понадобятся предусилитель и компьютерный аудиоинтерфейс с этими разъемами.

Установите микрофон на подставку или микрофонный журавль, установите поп-фильтр перед микрофоном, чтобы избежать шума от "взрывных" звуков, таких как "п" и "б". Некоторые микрофоны поставляются с подвесным креплением, которое изолирует их от вибраций на подставке.

Актер должен находиться на соответствующем расстоянии от микрофона. Используйте ленту для пола, чтобы отметить место, где нужно стать. Если актер предпочитает сидеть, внимательно следите за расстоянием между ним и микрофоном. Не стоит двигать стул, чтобы избежать лишних звуков.

Используйте подставку для сценария. Не двигайте подставку, так как она может отражать звук по направлению к микрофону.

Человек, который работает с оборудованием звукозаписи, — звукоинженер, должен находиться в отдельной комнате, отдельно от актера, а также иметь возможность общаться с актером в речевой студии *по микрофону служебной связи*.

Запись должна содержать как можно меньше шума, в идеале коэффициент сигнала и шума должен составлять 80 дБ или выше.

Прислушайтесь к записи тишины в своей речевой студии, выясните, откуда исходит какой-либо шум, и устраните причину. Распространенными источниками шума являются вентиляционные отверстия, флуоресцентная световая аппаратура, движение на близлежащих дорогах и вентиляторы оборудования (даже у ноутбуков могут быть вентиляторы). Микрофоны и кабели могут производить электрический шум из соседней проводки переменного тока, как правило это гул или дребезжание. Дребезжание может быть вызвано *циклом заземления*, возникающим из-за того, что оборудование подключено к нескольким электрическим цепям.

> [!TIP]
> В некоторых случаях вы можете использовать эквалайзер или программный модуль для снижения шума, чтобы удалить шум из записей, хотя всегда лучше убрать его в источнике.

Установите уровни таким образом, чтобы большая часть доступного динамического диапазона цифровой записи использовалась без перенапряжения. Это означает, что уровень громкости не должен искажать звук. Ниже приведен пример формы колебаний хорошей записи.

![Форма колебаний хорошей записи](media/custom-voice/good-recording.png)

Здесь используется большая часть диапазона (высота), но самые высокие пики сигнала не достигают верхней или нижней части окна. Вы также можете видеть, что тишина в записи приближается к тонкой горизонтальной линии, что указывает на низкий уровень шума. Эта запись имеет приемлемые динамический диапазон и отношение сигнала и шума.

Создавайте запись непосредственно на компьютере, используя высококачественный аудиоинтерфейс или USB-порт, в зависимости от используемого микрофона. Для аналоговой записи цепочка простая: микрофон, предусилитель, аудиоинтерфейс, компьютер. [Avid Pro Tools](https://www.avid.com/en/pro-tools) и [Adobe Audition](https://www.adobe.com/products/audition.html) можно лицензировать ежемесячно по разумной цене. Если ваш бюджет очень ограничен, попробуйте бесплатное ПО [Audacity](https://www.audacityteam.org/).

Создавайте записи монофонического формата 44,1 кГц 16 бит (качество CD) или выше. Используйте новейший формат 48 кГц 24 бит, если он поддерживается оборудованием. Нужно снизить разрешение аудиосигнала до 16 кГц 16 бит, прежде чем отправлять его на портал Custom Voice. Тем не менее требуется высококачественная исходная запись в случае необходимости редактирования.

В идеале, роли директора, инженера и актера должны выполнять разные люди. Не пытайтесь делать все сами! В крайнем случае один человек может быть директором и инженером.

### <a name="before-the-session"></a>Прежде началом сеанса

Чтобы не тратить время в студии, вместе с актером озвучивания быстро просмотрите сценарий перед записью. Несмотря на то, что автор речи знаком с текстом, он может прояснить произношение любых незнакомых слов.

> [!NOTE]
> Большинство студий звукозаписи предлагают электронное отображение сценариев в речевой студии. В этом случае введите примечания, которые нужно просмотреть, непосредственно в документ сценария. Однако помните, что вам все равно понадобится бумажная копия, в которую вы будете вносить заметки во время сеанса. Большинству звукоинженеров также понадобится печатная копия. На случай сбоя компьютера не лишним будет распечатать третью копию для актера.

Актер озвучивания может спросить, на каком слове в высказывании стоит сделать логическое ударение ("ключевое слово"). Расскажите им, что вы хотите выполнить естественное чтение без какого-либо особого внимания. Логические ударения можно добавить при синтезе речи, но они не должны быть частью исходной записи.

Следите за тем, чтобы актеры отчетливо произносили слова. Каждое слово сценария должно быть произнесено в точности так, как оно написано. Не нужно опускать или "глотать" звуки, как это принято в повседневной речи, *если только они не написаны таким образом в сценарии.*

|Письменный текст|Нежелательное повседневное произношение|
|-|-|
|Здравствуйте, Наталья Ивановна|Здрасте, Наталья Ивановна|
|Конечно, я понимаю|Конешно, я понимаю|
|Когда же он вернется|Када же он вернется|
|Она говорит, что все знает|Она грит, что все знает|

Актер *не* должен делать явные паузы между словами. Предложение все равно должно звучать естественным образом, даже если оно звучит немного формально. Для этого может потребоваться практика.

### <a name="the-recording-session"></a>Сеанс записи

В начале сеанса создайте справочную запись или *файл соответствия* стандартного высказывания. Попросите актера повторять эту строку на каждой странице. Каждый раз сравнивайте новую запись со справочной. Эта практика поможет актеру придерживаться согласованности в громкости, темпе, подаче тона и интонации. В то же время инженер может использовать файл соответствия как справку по уровням и для общей согласованности звука.

Файл соответствия особенно важен при возобновлении записи после перерыва или в другой день. Для актера нужно будет воспроизвести ее несколько раз и попросить его повторять запись, пока не будет достигнуто соответствие.

Попросите актера перед произнесением каждого высказывания на мгновение сделать глубокий вдох и паузу. Запишите паузу в несколько секунд между высказываниями. Слова должны произноситься одинаково каждый раз, когда они появляются, учитывая контекст. Например, "берег" как глагол произносится не так как "берег" как существительное.

Запишите качественную паузу в пять секунд, а затем приступите к созданию первой записи, чтобы записать звуковой фон комнаты. Это поможет порталу Custom Voice компенсировать в записях любой оставшийся шум.

> [!TIP]
> Все, что действительно нужно, — это голос актера, поэтому можно сделать монофоническую (одноканальную) запись только нужных строк. Тем не менее, если вы записываете на стереопроигрыватель, вы можете использовать второй канал для записи обсуждения в диспетчерской, чтобы фиксировать обсуждение конкретных строк или фрагментов. Удалите эту запись из версии, загруженной на портал Custom Voice.

Используя наушники, внимательно слушайте, как звучит голос актера. Вам нужна хорошая естественная дикция, правильное произношение и отсутствие нежелательных звуков. При необходимости попросите актера перезаписать высказывание, которое не соответствует этим стандартам.

> [!TIP]
> Если используется большое количество высказываний, одно высказывание может не оказывать заметного влияния на результирующую пользовательскую голосовую модель. Может быть более укороченного, что просто обратите внимание на все фразы продолжительностью с проблемами, исключите их из набора данных и посмотрим, как выводится пользовательская речь. Вы всегда можете вернуться в студию и записать пропущенные примеры позже.

Обратите внимание на номер фрагмента или временной код в сценарии для каждого высказывания. Спросите звукоинженера, может ли он отметить каждое высказывание в метаданных записи или в файле разметки.

Примите участие в обычных перерывах и укажите напитки, чтобы помочь Вашему голосовому обеспечению голоса в хорошем виде.

### <a name="after-the-session"></a>После сеанса

В современных студиях звукозаписи используются компьютеры. В конце сеанса вы получаете один или несколько аудиофайлов, а не кассету. Эти файлы, вероятно, будут иметь формат WAV или AIFF в качестве CD (44,1 кГц 16 бит) или лучшем. Наиболее распространенный и предпочтительный формат — 48 кГц 24 бит. Более высокие частоты выборки, например 96 кГц, обычно не нужны.

На портале Custom Voice каждое высказывание должно предоставляться в собственном файле. В каждом звуковом файле, поставляемом студией, содержатся несколько высказываний. Поэтому основная задача после создания записей — разделить их и подготовить к отправке. Звукоинженер может разместить метки в файле (или предоставить отдельный файл разметки), чтобы указать начало каждого высказывания.

Используйте свои заметки, чтобы найти нужные фрагменты, затем используйте программу редактирования звука, например [Avid Pro Tools](https://www.avid.com/en/pro-tools), [Adobe Audition](https://www.adobe.com/products/audition.html) или бесплатное ПО [Audacity](https://www.audacityteam.org/), чтобы скопировать каждое высказывание в новый файл.

В начале и конце каждого клипа за исключением первого должна быть пауза приблизительно 0,2 секунды. Этот файл должен начинаться с паузы в пять секунд. Не используйте аудиоредактор для "обнуления" частей с паузами в файле. Включение звукового фона комнаты поможет алгоритмам Custom Voice компенсировать любые остаточные фоновые шумы.

Внимательно слушайте каждый файл. На этом этапе вы можете удалить небольшие нежелательные звуки, которые вы пропустили во время записи, например звук смыкания губ перед чтением строки, но будьте осторожны, чтобы не удалить какие-либо слова в речи. Если вы не можете исправить файл, удалите его из своего набора данных, сделав заметку об этом.

Конвертируйте каждый файл в 16 бит и скорость выборки 16 кГц перед сохранением и, если вы записали студийное обсуждение, удалите второй канал. Сохраните каждый файл в формате WAV, присвоив файлам имена с номером высказывания из сценария.

Наконец, создайте *расшифровку*, которая связывает каждый WAV-файл с текстовой версией соответствующего высказывания. [Создание пользовательских голосов](./how-to-custom-voice-create-voice.md) включает сведения о требуемом формате. Вы можете скопировать текст непосредственно из своего сценария. Затем создайте ZIP-файл WAV-файлов и текстовую расшифровку.

Архивируйте оригинальные записи в безопасном месте, в случае если они вам понадобятся позже. Сохраните свой сценарий и заметки.

## <a name="next-steps"></a>Следующие шаги

Вы готовы загрузить свои записи и создать пользовательскую голосовую модель.

> [!div class="nextstepaction"]
> [Создание настраиваемого голоса](./how-to-custom-voice-create-voice.md)
