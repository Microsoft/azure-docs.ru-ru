---
title: Квоты и ограничения службы "Речь"
titleSuffix: Azure Cognitive Services
description: Краткий справочник, подробное описание и рекомендации по квотам и ограничениям служб распознавания речи в Azure
services: cognitive-services
author: alexeyo26
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 12/07/2020
ms.author: alexeyo
ms.openlocfilehash: f5566276f4555e2480434e385bf2129f5b8cdd24
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101699986"
---
# <a name="speech-services-quotas-and-limits"></a>Квоты и ограничения службы "Речь"

Эта статья содержит краткий справочник и **подробное описание** квот и ограничений служб распознавания речи Azure [для всех ценовых категорий.](https://azure.microsoft.com/pricing/details/cognitive-services/speech-services/) Он также содержит некоторые рекомендации по предотвращению регулирования запросов. 

## <a name="quotas-and-limits-quick-reference"></a>Краткий справочник по квотам и ограничениям
Переход к [квотам и ограничениям преобразования текста в речь](#text-to-speech-quotas-and-limits-per-speech-resource)
### <a name="speech-to-text-quotas-and-limits-per-speech-resource"></a>Квоты и ограничения преобразования речи в текст для каждого ресурса службы "Речь"
В таблицах ниже параметры без "регулируемых" строк **не** поддаются регулируемым для всех ценовых уровней.

#### <a name="online-transcription"></a>Сетевая транскрипция

| Quota | Бесплатный (F0)<sup>1</sup> | Standard (S0) |
|--|--|--|
| **Ограничение параллельных запросов (базовые и пользовательские модели)** | 1 | 20 (значение по умолчанию) |
| Регулировк | Нет<sup>2</sup> | Да<sup>2</sup> |

#### <a name="batch-transcription"></a>Пакетное транскрибирование
| Quota | Бесплатный (F0)<sup>1</sup> | Standard (S0) |
|--|--|--|
| Ограничение REST API | Запись пакетов недоступна для F0 | 300 запросов в минуту |
| Максимальный размер входного звукового файла | Н/Д | 1 ГБ |
| Максимальный размер входного большого двоичного объекта (может содержать более одного файла, например, в ZIP-архиве; убедитесь, что указан предельный размер файла). | Н/Д | 2,5 ГБ |
| Максимальный размер контейнера больших двоичных объектов | Н/Д | 5 ГБ |
| Максимальное количество больших двоичных объектов на контейнер | Н/Д | 10000 |
| Максимальное число файлов на запрос на транскрипцию (при использовании нескольких URL-адресов содержимого в качестве входных данных) | Н/Д | 1000  |
| Максимальное число одновременно выполняющихся заданий | Н/Д | 2000  |

#### <a name="model-customization"></a>Настройка модели
| Quota | Бесплатный (F0)<sup>1</sup> | Standard (S0) |
|--|--|--|
| Ограничение REST API | 300 запросов в минуту | 300 запросов в минуту |
| Максимальное число наборов данных речи | 2 | 500 |
| Максимальный размер файла набора акустических данных для импорта данных | 2 ГБ | 2 ГБ |
| Максимальный размер файла языкового набора данных для импорта данных | 200 МБ | 1,5 ГБ |
| Максимальный размер файла набора данных для произношения для импорта данных | 1 КБ | 1 МБ |
| Максимальный размер текста при использовании `text` параметра в запросе на [Создание API модели](https://westcentralus.dev.cognitive.microsoft.com/docs/services/speech-to-text-api-v3-0/operations/CreateModel/) | 200 КБ | 500 КБ |

<sup>1</sup> для **бесплатной ценовой категории (F0)** см. также ежемесячные скидки на [странице цен](https://azure.microsoft.com/pricing/details/cognitive-services/speech-services/).<br/>
<sup>2</sup> см. [дополнительные объяснения](#detailed-description-quota-adjustment-and-best-practices) [, рекомендации и](#general-best-practices-to-mitigate-throttling-during-autoscaling) [инструкции по настройке](#speech-to-text-increasing-online-transcription-concurrent-request-limit).<br/> 

### <a name="text-to-speech-quotas-and-limits-per-speech-resource"></a>Квоты и ограничения преобразования текста в речь для каждого ресурса речи
В таблице ниже параметры без "регулируемой" строки **не** поддаются регулировке для всех ценовых уровней.

| Quota | Бесплатный (F0)<sup>3</sup> | Standard (S0) |
|--|--|--|
| **Максимальное число транзакций в секунду (TPS) для стандартов Standard и нейронных голосов** | 200<sup>4</sup> | 200<sup>4</sup> |  |
| **Ограничение одновременных запросов для пользовательского голоса** |  |  |
| Значение по умолчанию | 10 | 10 |
| Регулировк | Нет<sup>5</sup> | Да<sup>5</sup> |
| **Квоты, зависящие от HTTP** |  |
| Максимальная длина аудио, созданная на запрос | 10 мин | 10 мин |
| Максимальное число различных `<voice>` тегов в SSML | 50 | 50 |
| **Квоты, относящиеся к WebSocket** |  |  |
|Максимальная длина звукового сигнала для поочередности | 10 мин | 10 мин |
|Максимальный размер сообщения SSML на очередь |64 КБ |64 КБ |
| **Ограничение REST API** | 20 запросов в минуту | 25 запросов в течение 5 секунд |


<sup>3</sup> для **бесплатной (F0)** ценовой категории см. также ежемесячные скидки на [странице цен](https://azure.microsoft.com/pricing/details/cognitive-services/speech-services/).<br/>
<sup>4</sup> см. [дополнительные объяснения](#detailed-description-quota-adjustment-and-best-practices) [и рекомендации.](#general-best-practices-to-mitigate-throttling-during-autoscaling)<br/>
<sup>5</sup> см. [дополнительные объяснения](#detailed-description-quota-adjustment-and-best-practices) [, рекомендации и](#general-best-practices-to-mitigate-throttling-during-autoscaling) [инструкции по настройке](#text-to-speech-increasing-transcription-concurrent-request-limit-for-custom-voice).<br/> 

## <a name="detailed-description-quota-adjustment-and-best-practices"></a>Подробное описание, корректировка квоты и рекомендации
Прежде чем запрашивать увеличение квоты (там, где это применимо), убедитесь, что это необходимо. Служба распознавания речи использует технологии автоматического масштабирования для переноса требуемых вычислительных ресурсов в режим "по запросу" и одновременно, чтобы снизить затраты на клиентов за счет отсутствия чрезмерного объема аппаратной мощности. Каждый раз, когда приложение получает код ответа 429 ("слишком много запросов"), в то время как Рабочая нагрузка находится в пределах определенных ограничений (см. раздел [краткий справочник по квотам и ограничениям](#quotas-and-limits-quick-reference)), наиболее вероятная причина заключается в том, что служба масштабируется до вашего спроса и еще не достигла требуемого масштаба, поэтому недостаточно ресурсов для обслуживания запроса. Это состояние обычно является временным и не должно быть последним.

### <a name="general-best-practices-to-mitigate-throttling-during-autoscaling"></a>Общие рекомендации по снижению регулирования во время автоматического масштабирования
Чтобы снизить количество проблем, связанных с регулированием (код ответа 429), рекомендуется использовать следующие методы:
- Реализуйте в приложении логику повторных попыток
- Избегайте внесения резкого изменения в рабочую нагрузку. Постепенное увеличение рабочей нагрузки <br/>
*Пример.* Приложение использует преобразование текста в речь, а текущая рабочая нагрузка — 5 СПЕЦИФИКАЦИй (транзакций в секунду). В следующей секунде вы увеличиваете нагрузку на 20 СПЕЦИФИКАЦИй (которая в четыре раза больше). Служба немедленно начинает масштабирование для удовлетворения новой нагрузки, но, скорее всего, она не сможет сделать это в течение секунды, поэтому некоторые запросы получат код ответа 429.   
- Тестирование различных шаблонов увеличения нагрузки
  - См. [Пример преобразования речи в текст](#speech-to-text-example-of-a-workload-pattern-best-practice)
- Создавайте дополнительные речевые ресурсы в одном или разных регионах и распределите между ними рабочую нагрузку с помощью метода циклического перебора. Это особенно важно для **технической спецификации преобразования текста в речь (количество транзакций в секунду)** , которая устанавливается как 200 на каждый ресурс речи и не может быть скорректирована.  

В следующих разделах описываются конкретные случаи настройки квот.<br/>
Переход к [тексту в речь. Увеличение одновременных запросов на перезапись для пользовательского голоса](#text-to-speech-increasing-transcription-concurrent-request-limit-for-custom-voice)

### <a name="speech-to-text-increasing-online-transcription-concurrent-request-limit"></a>Преобразование речи в текст: увеличение числа параллельных запросов на обтекание в сети
По умолчанию количество одновременных запросов ограничено 20 на каждый ресурс речи (базовая модель) или на пользовательскую конечную точку (настраиваемая модель). Для ценовой категории "Стандартный" это значение можно увеличить. Перед отправкой запроса убедитесь, что вы знакомы с материалом в [этом разделе](#detailed-description-quota-adjustment-and-best-practices) , и помните [об этих](#general-best-practices-to-mitigate-throttling-during-autoscaling)рекомендациях.

Увеличение ограничения одновременных запросов **не** влияет непосредственно на затраты. Службы речи используют модель "платите только за то, что используется". Ограничение определяет, насколько высока возможность масштабирования службы перед началом регулирования запросов.

Ограничения параллельных запросов для **базовых** и **пользовательских** моделей должны быть скорректированы **отдельно**.

Существующее значение параметра ограничения параллельных запросов **не** отображается с помощью портал Azure, Command-Line средств или запросов API. Чтобы проверить существующее значение, создайте запрос в службу поддержки Azure.

>[!NOTE]
>[Контейнеры распознавания речи](speech-container-howto.md) не нуждаются в увеличении максимального количества одновременных запросов, так как контейнеры ограничены только процессорами оборудования, на котором они размещены. Однако контейнеры речи имеют собственные ограничения емкости, которые следует учитывать. Обратитесь к вопросу *"вы могли бы помочь при планировании емкости и оценке затрат на локальные контейнеры преобразования речи в текст?"* из [контейнеров речи вопросы и ответы](./speech-container-howto.md).

#### <a name="have-the-required-information-ready"></a>Необходимые сведения готовы:
- Для **базовой модели**:
  - Идентификатор ресурса речи
  - Регион
- Для **настраиваемой модели**: 
  - Регион
  - ИДЕНТИФИКАТОР пользовательской конечной точки

- **Как получить сведения (базовая модель)**:  
  - Переход к [портал Azure](https://portal.azure.com/)
  - Выберите ресурс речи, для которого требуется увеличить ограничение на число запросов на параллелизм
  - Выберите *Свойства* (группа *управления ресурсами* ). 
  - Скопируйте и сохраните значения следующих полей:
    - **Идентификатор ресурса**
    - **Расположение** (регион конечной точки)

- **Как получить сведения (настраиваемую модель)**:
  - Переход на портал [Speech Studio](https://speech.microsoft.com/)
  - При необходимости войдите в систему
  - Переход к Пользовательское распознавание речи
  - Выберите проект
  - Переход к *развертыванию*
  - Выберите необходимую конечную точку
  - Скопируйте и сохраните значения следующих полей:
    - **Регион службы** (регион конечной точки)
    - **Идентификатор конечной точки**
  
#### <a name="create-and-submit-support-request"></a>Создание и отправка запроса на поддержку
Инициируйте увеличение предельного числа одновременных запросов для ресурса или, если необходимо, проверьте ограничение на сегодняшний день, отправив запрос на поддержку:

- Убедитесь, что у вас есть [необходимые сведения](#have-the-required-information-ready)
- Переход к [портал Azure](https://portal.azure.com/)
- Выберите ресурс речи, для которого требуется увеличить или установить ограничение на количество запросов на выполнение
- Выберите *новый запрос в службу поддержки* (*Поддержка и группа устранения неполадок* ). 
- Появится новое окно с автоматически заполняемыми сведениями о подписке Azure и ресурсе Azure.
- Введите *сводку* (например, "увеличить ограничение на число запросов параллелизма самонастраивающихся пороговых значений").
- В списке *тип проблемы* выберите "проблемы с квотой или подпиской".
- В появившийся *подтипе проблемы* выберите:
  - "Увеличение квоты или параллельных запросов" — для запроса на увеличение
  - "Проверка квоты или использования" для проверки существующего ограничения
- Нажмите кнопку *Далее: решения.*
- Продолжить создание запроса
- На вкладке *Details (сведения* ) введите в поле *Description (описание* ):
  - Обратите внимание, что запрос относится к квоте **речи на текст** .
  - **Базовая** или **Настраиваемая** модель
  - Сведения о ресурсах Azure, [собранные ранее](#have-the-required-information-ready) 
  - Введите необходимые сведения и нажмите кнопку " *создать* " на вкладке " *Обзор и создание* ".
  - Обратите внимание на номер запроса в службу поддержки в портал Azure уведомлениях. Вы будете в ближайшее время связаться с дальнейшей обработкой

### <a name="speech-to-text-example-of-a-workload-pattern-best-practice"></a>Преобразование речи в текст: пример шаблона рабочей нагрузки (рекомендуется)
В этом примере представлен подход, который мы рекомендуем использовать для уменьшения возможного регулирования запросов из-за того [, что выполняется Автомасштабирование](#detailed-description-quota-adjustment-and-best-practices). Он не является «точным рецептом», но просто шаблоном, который мы приглашаем к подстановке и корректировке по мере необходимости.

Предположим, что для речевого ресурса установлено ограничение на число одновременных запросов, равное 300. Запустите рабочую нагрузку с 20 одновременных подключений и увеличьте нагрузку на 20 одновременных подключений каждые 1,5 – 2 минуты. Контролируйте ответы службы и Реализуйте логику, которая будет возвращаться назад (сокращает нагрузку), если вы получаете слишком много кодов откликов 429. Затем повторите попытку через 1-2-4-4 минут. (Это повторяет увеличение нагрузки в 1 минуту, если по-прежнему не работает, затем в 2 минуты и т. д.)

Как правило, перед переходом в рабочую среду настоятельно рекомендуется протестировать рабочую нагрузку и шаблоны рабочей нагрузки.

### <a name="text-to-speech-increasing-transcription-concurrent-request-limit-for-custom-voice"></a>Преобразование текста в речь: увеличение количества одновременных запросов на транскрипции для пользовательского голоса
По умолчанию число одновременных запросов для пользовательской конечной точки голоса ограничено 10. Для ценовой категории "Стандартный" это значение можно увеличить. Перед отправкой запроса убедитесь, что вы знакомы с материалом в [этом разделе](#detailed-description-quota-adjustment-and-best-practices) , и помните [об этих](#general-best-practices-to-mitigate-throttling-during-autoscaling)рекомендациях.

Увеличение ограничения одновременных запросов **не** влияет непосредственно на затраты. Службы речи используют модель "платите только за то, что используется". Ограничение определяет, насколько высока возможность масштабирования службы перед началом регулирования запросов.

Существующее значение параметра ограничения параллельных запросов **не** отображается с помощью портал Azure, Command-Line средств или запросов API. Чтобы проверить существующее значение, создайте запрос в службу поддержки Azure.

>[!NOTE]
>[Контейнеры распознавания речи](speech-container-howto.md) не нуждаются в увеличении максимального количества одновременных запросов, так как контейнеры ограничены только процессорами оборудования, на котором они размещены.

#### <a name="prepare-the-required-information"></a>Подготовьте необходимые сведения:
Чтобы создать запрос на увеличение, необходимо указать регион развертывания и идентификатор настраиваемой конечной точки. Чтобы получить его, выполните следующие действия. 

- Переход на портал [Speech Studio](https://speech.microsoft.com/)
- При необходимости войдите в систему
- Переход к *настраиваемому голосовому*
- Выберите проект
- Переход к *развертыванию*
- Выберите необходимую конечную точку
- Скопируйте и сохраните значения следующих полей:
    - **Регион службы** (регион конечной точки)
    - **Идентификатор конечной точки**
  
#### <a name="create-and-submit-support-request"></a>Создание и отправка запроса на поддержку
Инициируйте увеличение предельного числа одновременных запросов для ресурса или, если необходимо, проверьте ограничение на сегодняшний день, отправив запрос на поддержку:

- Убедитесь, что у вас есть [необходимые сведения](#prepare-the-required-information)
- Переход к [портал Azure](https://portal.azure.com/)
- Выберите ресурс речи, для которого требуется увеличить или установить ограничение на количество запросов на выполнение
- Выберите *новый запрос в службу поддержки* (*Поддержка и группа устранения неполадок* ). 
- Появится новое окно с автоматически заполняемыми сведениями о подписке Azure и ресурсе Azure.
- Введите *сводку* (например, "увеличить предельный размер запросов параллелизма пользовательской конечной точки)")
- В списке *тип проблемы* выберите "проблемы с квотой или подпиской".
- В появившийся *подтипе проблемы* выберите:
  - "Увеличение квоты или параллельных запросов" — для запроса на увеличение
  - "Проверка квоты или использования" для проверки существующего ограничения
- Нажмите кнопку *Далее: решения.*
- Продолжить создание запроса
- На вкладке *Details (сведения* ) введите в поле *Description (описание* ):
  - Обратите внимание, что запрос относится к квоте **текста на речь** .
  - Сведения о ресурсах Azure, [собранные ранее](#prepare-the-required-information) 
  - Введите необходимые сведения и нажмите кнопку " *создать* " на вкладке " *Обзор и создание* ".
  - Обратите внимание на номер запроса в службу поддержки в портал Azure уведомлениях. Вы будете в ближайшее время связаться с дальнейшей обработкой