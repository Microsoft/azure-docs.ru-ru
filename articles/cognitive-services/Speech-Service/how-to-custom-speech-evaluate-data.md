---
title: Оценка и улучшение Пользовательское распознавание речи точность — служба речи
titleSuffix: Azure Cognitive Services
description: В этом документе вы узнаете, как количественно измерять и улучшать качество модели преобразования речи в текст или настраиваемой модели. Для проверки точности требуются звуковые данные для записи звука и пользователя с метками, а 30 минут — 5 часов репрезентативного звука.
services: cognitive-services
author: trevorbye
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 02/12/2021
ms.author: trbye
ms.openlocfilehash: 3f0d191157fbabeab2b6f08a9d0a9b3bf1a35250
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100591893"
---
# <a name="evaluate-and-improve-custom-speech-accuracy"></a>Оценка и повышение точности результатов службы "Пользовательское распознавание речи"

В этой статье вы узнаете, как количественно измерять и улучшать точность моделей преобразования речи в текст Майкрософт или пользовательских моделей. Для проверки точности требуются звуковые данные для записи звука и пользователя с метками, а 30 минут — 5 часов репрезентативного звука.

## <a name="evaluate-custom-speech-accuracy"></a>Оценка точности службы пользовательского распознавание речи

Отраслевый стандарт для измерения точности модели — это [Частота ошибок Word](https://en.wikipedia.org/wiki/Word_error_rate) (WER). WER подсчитывает количество недопустимых слов, выявленных во время распознавания, а затем делит их на общее число слов, введенных в транскрипции (показанные ниже как N). Наконец, это число умножается на 100% для вычисления WER.

![Формула WER](./media/custom-speech/custom-speech-wer-formula.png)

Неверно распознанные слова делятся на три категории:

* Вставка (I): слова, неправильно добавленные в запись гипотезы
* Удаление (D): слова, которые не обнаруживаются в записи гипотезы
* Подстановки: слова, которые были заменены на ссылку и гипотезу

Ниже приведен пример:

![Пример неверно идентифицируемых слов](./media/custom-speech/custom-speech-dis-words.png)

Если вы хотите локально реплицировать измерения WER, можно использовать склите из [сктк](https://github.com/usnistgov/SCTK).

## <a name="resolve-errors-and-improve-wer"></a>Устранение ошибок и улучшение WER

Вы можете использовать WER из результатов распознавания машин, чтобы оценить качество модели, используемой в приложении, средстве или продукте. Объект WER с 5%-10% считается хорошим качеством и готов к использованию. Объект WER, соблюдающий 20%, приемлем, но вам может потребоваться дополнительное обучение. WER на 30% или более сигналов имеет низкое качество и требует настройки и обучения.

Степень распространения ошибок важна. При возникновении большого количества ошибок удаления обычно это обусловлено низкой интенсивностью звукового сигнала. Чтобы устранить эту проблему, необходимо будет сохранять звуковые данные ближе к источнику. Ошибки вставки означают, что звук был записан в бесшумной среде и кроссталк, что вызывает проблемы распознавания. Ошибки подстановки часто встречаются, когда недостаточный выбор терминов для конкретных доменов предоставляется как транскрипция или связанный текст.

Анализируя отдельные файлы, можно определить, какой тип ошибок существует и какие ошибки являются уникальными для конкретного файла. Основные сведения о проблемах на уровне файлов помогут вам ориентироваться на улучшения.

## <a name="create-a-test"></a>Создание теста

Если вы хотите проверить качество базовой модели перевода речи в текст Майкрософт или настраиваемой модели, вы можете сравнить две модели рядом, чтобы оценить точность. Сравнение включает в себя WER и результаты распознавания. Как правило, пользовательская модель сравнивается с базовой моделью Майкрософт.

Для параллельного вычисления моделей:

1. Войдите на [портал пользовательское распознавание речи](https://speech.microsoft.com/customspeech).
2. Перейдите в раздел **> преобразования речи в текст Пользовательское распознавание речи > [имя проекта] > тестирования**.
3. Нажмите кнопку **добавить тест**.
4. Выберите **оценить точность**. Присвойте тесту имя, описание и выберите набор данных для транскрипции и звука.
5. Выберите до двух моделей, которые вы хотите протестировать.
6. Нажмите кнопку **Создать**.

После успешного создания теста можно сравнить результаты рядом.

### <a name="side-by-side-comparison"></a>Параллельное сравнение

После завершения теста, обозначенного состоянием "изменено" на " *выполнено*", вы найдете номер WER для обеих моделей, включенных в тест. Щелкните имя теста, чтобы просмотреть страницу сведений о тестировании. На этой странице подробностей перечислены все фразы продолжительностью в наборе данных, указывающие результаты распознавания двух моделей вместе с прознаком из отправленного набора данных. Чтобы проверить параллельное сравнение, можно переключить различные типы ошибок, включая вставку, удаление и подстановку. Прослушивая звук и сравнивая результаты распознавания в каждом столбце, в котором показана транскрипция с отметкой и результаты для двух моделей преобразования речи в текст, можно решить, какая модель соответствует вашим потребностям и где требуется дополнительное обучение и улучшения.

## <a name="improve-custom-speech-accuracy"></a>Повышение точности результатов службы "Пользовательское распознавание речи"

Сценарии распознавания речи различаются по качеству и языку звука (словарю и стилю речи). В следующей таблице рассматриваются четыре распространенных сценария.

| Сценарий | Качество звука | Словарь | Стиль речи |
|----------|---------------|------------|----------------|
| Центр обработки вызовов | Низкая, 8 кГц, может быть 2 человеком на один канал звука, может быть сжато | Узкие, уникальные для домена и продуктов | Слабо структурированный |
| Голосовое помощник (например, Кортана или окно с диском) | Высокий, 16 кГц | Большая сущность (названия песен, продукты, расположения) | Четко зачисленные слова и фразы |
| Диктовка (мгновенное сообщение, заметки, поиск) | Высокий, 16 кГц | Изменяем | Примечание. принятие |
| Субтитры видео | Различные, включая различные использование микрофона, добавленную музыку | Различные, с собраний, измененные речевые функции, музыкальные песни | Чтение, подготовка или слабо структурированный |

Различные сценарии дают разные результаты качества. В следующей таблице рассматривается, как из этих четырех сценариев оценивается [Частота ошибок слов (WER)](how-to-custom-speech-evaluate-data.md). В таблице показано, какие типы ошибок наиболее часто встречаются в каждом сценарии.

| Сценарий | Качество распознавания речи | Ошибки вставки | Ошибки удаления | Ошибки подстановки |
|----------|----------------------------|------------------|-----------------|---------------------|
| Центр обработки вызовов | Средний (< 30% WER) | Низкая, за исключением случаев, когда другие люди говорят в фоновом режиме | Может быть высокой. Центры обработки вызовов могут быть шумами, а перекрывающиеся колонки могут запутать модель | Средняя. Продукты и имена людей могут вызывать эти ошибки |
| Голосовой помощник | Высокая (может быть < 10% WER) | Низкий | Низкий | Средние, из-за названий песен, названий продуктов или расположений |
| Диктовка | Высокая (может быть < 10% WER) | Низкий | Низкий | Высокий |
| Субтитры видео | Зависит от типа видео (может быть < 50% WER) | Низкий | Может быть высокой из-за музыки, шума, качества микрофона | Жаргоне может вызвать эти ошибки |

Определение компонентов WER (число вставок, удалений и ошибок подстановки) помогает определить, какой тип данных следует добавить для улучшения модели. Используйте [портал пользовательское распознавание речи](https://speech.microsoft.com/customspeech) для просмотра качества базовой модели. На портале отображаются ставки ошибок вставки, замены и удаления, которые объединяются в ставке качества WER.

## <a name="improve-model-recognition"></a>Улучшение распознавания модели

Можно уменьшить количество ошибок распознавания, добавив обучающие данные на [портале пользовательское распознавание речи](https://speech.microsoft.com/customspeech). 

Запланируйте поддержание пользовательской модели, периодически добавляя исходные материалы. Для вашей пользовательской модели требуется дополнительное обучение, чтобы обеспечить осведомленность об изменениях в сущностях. Например, могут потребоваться обновления названий продуктов, названий песен или новых расположений служб.

В следующих разделах описывается, как каждый вид дополнительных обучающих данных может сократить количество ошибок.

### <a name="add-related-text-sentences"></a>Добавление связанных текстовых предложений

При обучении новой настраиваемой модели Начните с добавления связанного текста, чтобы улучшить распознавание слов и фраз, относящихся к домену. Связанные текстовые предложения в первую очередь уменьшают количество ошибок подстановки, связанных с неверной назначением слов и слов, зависящих от домена, отображая их в контексте. Слова, зависящие от домена, могут быть нераспространенными или состоять из слов, но их произношение должно быть простым для распознавания.

> [!NOTE]
> Избегайте связанных текстовых предложений, содержащих такие помехи, как нераспознаваемые символы или слова.

### <a name="add-audio-with-human-labeled-transcripts"></a>Добавление звука с помощью речевых транскрипций

Звук с речевыми транскрипциями обеспечивает наибольшую точность, если звук поступает из целевого варианта использования. Примеры должны охватывать всю область речи. Например, центр обработки звонков для розничного магазина будет получать больше вызовов о Свимвеар и своему солнцезащитных очков в течение летнего месяца. Убедитесь, что ваш пример включает всю область речи, которую нужно обнаружить.

Рассмотрим следующие сведения:

* Обучение с помощью аудио позволит получить наиболее выгодные преимущества, если звук также трудно понять для людей. В большинстве случаев необходимо начать обучение, просто используя связанный текст.
* Если вы используете один из самых широко используемых языков, таких как US-English, существует хороший шанс, что обучение с аудио-данными не требуется. Для таких языков в большинстве случаев базовые модели предлагают уже хорошие результаты распознавания. возможно, это достаточно для обучения со связанным текстом.
* Пользовательское распознавание речи может записывать только контекст Word для сокращения ошибок подстановки, отсутствия вставки или ошибок удаления.
* Избегайте выборок, которые содержат ошибки записи, но включают разнообразие качества звука.
* Избегайте предложений, которые не связаны с проблемным доменом. Несвязанные предложения могут повредить вашу модель.
* Когда качество записи изменяется, можно дублировать весьма хорошие предложения (например, отличных от ключевых фраз), чтобы увеличить их вес.
* Служба распознавания речи автоматически использует записи для улучшения распознавания слов и фраз, относящихся к домену, как если бы они были добавлены в качестве связанного текста.
* Для выполнения операции обучения может потребоваться несколько дней. Чтобы повысить скорость обучения, обязательно создайте подписку на службу речи в [регионе с выделенным оборудованием](custom-speech-overview.md#set-up-your-azure-account) для обучения.

> [!NOTE]
> Не все базовые модели поддерживают обучение с помощью аудио. Если базовая модель не поддерживает ее, служба распознавания речи будет использовать только текст из записей и игнорировать звук. Список базовых моделей, поддерживающих обучение с аудио-данными, см. в разделе [Поддержка языков](language-support.md#speech-to-text) .

> [!NOTE]
> В случае изменения базовой модели, используемой для обучения, и наличия звука в наборе данных для обучения, *всегда* проверяйте, поддерживает ли новая выбранная базовая модель [обучение с помощью звуковых данных](language-support.md#speech-to-text). Если ранее использованная базовая модель не поддерживала обучение с использованием звуковых данных, а набор данных для обучения содержит звук, то время обучения с новой базовой моделью **значительно** увеличится, и его можно легко переключиться с нескольких часов на несколько дней и многое другое. Это особенно верно, если ваша подписка на службу речи **не** находится в [регионе с выделенным оборудованием](custom-speech-overview.md#set-up-your-azure-account) для обучения.
>
> Если вы сталкиваетесь с проблемой, описанной выше в приведенном выше абзаце, можно быстро уменьшить время обучения, уменьшив количество звука в наборе данных или полностью удалив его, и покинуть только текст. Второй вариант настоятельно рекомендуется, если подписка службы речи **не** находится в [регионе с выделенным оборудованием](custom-speech-overview.md#set-up-your-azure-account) для обучения.

### <a name="add-new-words-with-pronunciation"></a>Добавить новые слова с произношением

Слова, внесенные или очень специализированные, могут иметь уникальные произношение. Эти слова можно распознать, если слово можно разбить на слова меньшего размера. Например, чтобы распознать **Xbox**, произносится как **поле X**. Такой подход не позволит повысить общую точность, но может увеличить распознавание этих ключевых слов.

> [!NOTE]
> В настоящее время этот метод доступен только для некоторых языков. Дополнительные сведения см. в разделе Настройка произношения в [таблице преобразования речи в текст](language-support.md) .

## <a name="sources-by-scenario"></a>Источники по сценарию

В следующей таблице приведены сценарии распознавания речи и приведены исходные материалы, которые следует учитывать в трех категориях обучающих материалов, перечисленных выше.

| Сценарий | Связанные текстовые предложения | Звуковые и пользовательские записи с метками | Новые слова с произношением |
|----------|------------------------|------------------------------|------------------------------|
| Центр обработки вызовов             | маркетинговые документы, веб-сайты, обзоры продуктов, связанные с деятельностью центра обработки вызовов | центр обработки вызовов вызывает расшифрованной по людям | термины с неоднозначными произношениями (см. раздел Xbox выше) |
| Голосовой помощник         | Вывод списка предложений с использованием всех сочетаний команд и сущностей | запись голосовых команд в устройство и транскрипция в текст | имена (фильмы, песни, продукты) с уникальными произношением |
| Диктовка               | записанные входные данные, например мгновенные сообщения или сообщения электронной почты | Аналогично предыдущему | Аналогично предыдущему |
| Субтитры видео | Сценарии ТЕЛЕПЕРЕДАЧ, фильмы, маркетинговые материалы, сводки видео | точные записи видео | Аналогично предыдущему |

## <a name="next-steps"></a>Дальнейшие шаги

* [Обучение и развертывание модели](how-to-custom-speech-train-model.md)

## <a name="additional-resources"></a>Дополнительные ресурсы

* [Подготовка и тестирование данных](./how-to-custom-speech-test-and-train.md)
* [Проверка данных](how-to-custom-speech-inspect-data.md)