---
title: Рекомендации по использованию микрофона пакета SDK для речевых устройств
titleSuffix: Azure Cognitive Services
description: Рекомендации по использованию микрофона пакета SDK для речевых устройств. Эти геометрические массивы рекомендуется использовать с Microsoft Audio Stack.
services: cognitive-services
author: erhopf
manager: nitinme
ms.service: cognitive-services
ms.subservice: speech-service
ms.topic: conceptual
ms.date: 07/16/2019
ms.author: erhopf
ms.openlocfilehash: 698a1d52af6c2472d6c025851ead1a0b6a6dff82
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "95015347"
---
# <a name="speech-devices-sdk-microphone-array-recommendations"></a>Рекомендации по использованию микрофона пакета SDK для речевых устройств

В этой статье вы узнаете, как спроектировать массив микрофонов для пакета SDK для речевых устройств.

Пакет SDK для речевых устройств лучше подходит для массива микрофонов, который был разработан согласно следующим рекомендациям, включая геометрию микрофона и выбор компонентов. Кроме того, руководство предоставляется по вопросам интеграции и электропитания.

## <a name="microphone-geometry"></a>Геометрия микрофона

Следующие геометрические массивы рекомендуется использовать с Microsoft Audio Stack. Улучшено расположение звуковых источников и отклонение окружающих шума с большим числом микрофонов с зависимостями от конкретных приложений, пользовательских сценариев и конструктивных форм устройств.

| Микс & Geometry | Круглый массив | Круглый массив | Линейный массив | Линейный массив |
| --- | -------------- | --- | ------------ | --- |
|     | <img src="media/speech-devices-sdk/7-mic-c.png" alt="7 mic circular array" width="150"/> | <img src="media/speech-devices-sdk/4-mic-c.png" alt="4 mic circular array" width="150"/> | <img src="media/speech-devices-sdk/4-mic-l.png" alt="4 mic linear array" width="150"/> | <img src="media/speech-devices-sdk/2-mic-l.png" alt="2 mic linear array" width="150"/> |
| \# микс | 7 | 4 | 4 | 2 |
| Геометрия | 6 внешних, 1 центр, радиус = 42,5 мм, с равными промежутками | 3 внешний, 1 центр, радиус = 42,5 мм, с равными промежутками | Длина = 120 мм, интервал = 40 мм | Шаг = 40 мм |

Каналы микрофонов должны быть упорядочены в соответствии с порядком номеров, показанным для каждого приведенного выше массива, увеличивая его значение с 0. Для отмены эха в стеке звука (Майкрософт) потребуется дополнительный ссылочный поток воспроизведения звука.

## <a name="component-selection"></a>Выбор компонентов

Необходимо выбрать компоненты микрофона, чтобы точно воспроизводить сигнал без помех и искажений.

Рекомендуемые свойства при выборе микротелефона:

| Параметр | Рекомендуемая |
| --------- | ----------- |
| снр | \>= 65 dB (1 кГц сигнал 94 Дбспл, взвешенный шум) |
| Сопоставление амплитуды | ± 1 dB @ 1 кГц |
| Сопоставление этапа | ± 2 ° @ 1 кГц |
| Точка акустической перегрузки (AOP) | \>= 120 Дбспл (СД = 10%) |
| Скорость | Минимальный 24-разрядный |
| Частота дискретизации | Минимум 16 кГц\* |
| Частота ответа | ± 3 БД, с плавающей маской 200-8000 Гц\* |
| надежность; | Диапазон температуры хранилища — от 40 °C до 70 °C<br />Диапазон рабочих температур — от 20 °C до 55 °C |

\*_Для приложений высококачественного обмена данными (VoIP) может потребоваться более высокая частота дискретизации или более широкие диапазоны частот._

Хороший выбор компонентов должен составлять пару с хорошей интеграцией електроакаустик, чтобы избежать нарушения производительности используемых компонентов. Для уникальных вариантов использования также могут потребоваться дополнительные требования (например, диапазоны рабочих температур).

## <a name="microphone-array-integration"></a>Интеграция с массивом микрофона

Производительность массива микрофона при интеграции в устройство будет отличаться от спецификации компонента. Важно убедиться, что микрофоны хорошо соответствуют после интеграции. Поэтому производительность устройства, измеряемая после любых фиксированных выигрышей или EQ, должна соответствовать следующим рекомендациям:

| Параметр          | Рекомендуемая                                        |
| ------------------ | -------------------------------------------------- |
| снр                | \> 63 dB (1 кГц сигнал 94 Дбспл, взвешенный шум) |
| Чувствительность к выходу | -26 dBFS/PA @ 1 кГц (рекомендуется)                  |
| Сопоставление амплитуды | ± 2 БД, 200-8000 Гц                                |
| СД%\*             | ≤ 1%, 200-8000 Гц, 94 Дбспл, 5 заказов             |
| Частота ответа | ± 6 dB, с плавающей маской 200-8000 Гц\*\*              |

\*\*_Для измерения СД требуется докладчик с низким искажением (например, Неймана KH120)._

\*\*_Для приложений высококачественного обмена данными (VoIP) могут потребоваться "более широкие" диапазоны частот._

## <a name="speaker-integration-recommendations"></a>Рекомендации по интеграции с докладчиком

Так как для устройств распознавания речи, содержащих динамики, требуется отмена эха, для выбора и интеграции докладчика предоставляются дополнительные рекомендации.

| Параметр | Рекомендуемая |
| --------- | ----------- |
| Рекомендации по линейной шкале | Нелинейная обработка после ссылки на динамик; в противном случае требуется потоковая ссылка замыкания на себя на аппаратном уровне |
| Петлевой динамик | Предоставляется через ВАСАПИ, частные API, пользовательский подключаемый модуль АЛСА (Linux) или предоставляются через канал встроенного по. |
| СД% | 3 Октава диапазонов минимальный 5-й порядок, 70 дБА при воспроизведении @ 0,8 m ≤ 6,3%, 315-500 Гц ≤ 5%, 630-5000 Гц |
| Эхо-связь с микрофоном | \> -10 dB Тклв using ITU-T G. 122 приложение B. 4 метод, нормализованный до уровня MIC<br />Тклв = Тклвмеасуред \+ (измеряемый уровень — чувствительность целевого вывода)<br />Тклв = Тклвмеасуред \+ (измеряемый уровень — (-26)) |

## <a name="integration-design-architecture"></a>Архитектура разработки интеграции

При интеграции микрофонов в устройство необходимы следующие рекомендации по архитектуре:

| Параметр | Рекомендация |
| --------- | -------------- |
| Сходство портов MIC | Все порты микрофона имеют одинаковую длину в массиве |
| Размеры MIC Port | Размер порта ш 0,8 – 1,0 мм. Длина порта/диаметр порта \< 2 |
| Запечатывание MIC         | Запечатывание проложения по единообразно реализовано в стеке. Рекомендуемый \> Коэффициент сжатия 70% для пенопластовой прокладки |
| Надежность микрофона     | Необходимо использовать сетку для предотвращения пыли и передачи данных (между ПКБ для нижних микрофонов и запечатывания/верхняя обложка). |
| Изоляция MIC       | С резиновой прокруткой и вибрации в структуре, особенно для изоляции путей вибрации из-за встроенных динамиков |
| Часы выборки      | Звук устройства должен быть бесплатным, а удаление с низким смещением |
| Возможность записи   | Устройство должно иметь возможность одновременно записывать необработанные потоки каналов |
| USB                 | Все USB-устройства ввода должны устанавливать дескрипторы в соответствии со [спецификацией REV3 USB Audio Devices](https://www.usb.org/document-library/usb-audio-devices-rev-30-and-adopters-agreement) . |
| Геометрия микрофона | Драйверы должны правильно реализовывать [дескрипторы геометрии массива микрофонов](/windows-hardware/drivers/audio/ksproperty-audio-mic-array-geometry) |
| Возможность обнаружения     | Устройства не должны иметь необнаруженные или неконтролируемых оборудование, встроенное по или программное обеспечение сторонних производителей для обработки нелинейного звука на устройстве. |
| Формат записи      | Форматы записи должны использовать минимальную частоту выборки, равную 16 кГц, и рекомендуемую 24-разрядную глубину. |

## <a name="electrical-architecture-considerations"></a>Рекомендации по электрической архитектуре

Там, где это применимо, массивы могут быть подключены к USB-узлу (например, SoC, на котором выполняется Microsoft Audio Stack), и интерфейсам для речевых служб или других приложений.

Компоненты оборудования, такие как преобразование PDM в TDM, должны обеспечить сохранение динамического диапазона и СНР микротелефонов в рамках перестройки.

Высокоскоростной USB-класс Audio 2,0 должен поддерживаться в любой звуковой MCU, чтобы обеспечить необходимую пропускную способность для до семи каналов с более высоким тарифом и глубиной цвета.

## <a name="next-steps"></a>Дальнейшие действия

> [!div class="nextstepaction"]
> [Дополнительные сведения о пакете SDK для речевых устройств](speech-devices-sdk.md)