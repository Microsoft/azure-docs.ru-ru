---
title: Переход на контейнеры с доступом на чтение версии 3.x
titleSuffix: Azure Cognitive Services
description: Узнайте, как перейти к контейнерам распознавания текста с доступом на чтение версии 3.0
services: cognitive-services
author: aahill
manager: nitinme
ms.service: cognitive-services
ms.subservice: computer-vision
ms.topic: overview
ms.date: 01/29/2021
ms.author: aahi
ms.openlocfilehash: 1cc17306265e6e8ba2e7fb3f570d0017b006b84f
ms.sourcegitcommit: b8995b7dafe6ee4b8c3c2b0c759b874dff74d96f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/03/2021
ms.locfileid: "106284691"
---
# <a name="migrate-to-the-read-v3x-ocr-containers"></a>Переход на контейнеры распознавания текста с доступом на чтение версии 3.x

Если вы используете версию 2 контейнера распознавания текста с доступом на чтение службы "Компьютерное зрение", ознакомьтесь с этой статьей, чтобы узнать, как обновить приложение и использовать контейнер версии 3.x. 


## <a name="configuration-changes"></a>Изменения конфигурации

* `ReadEngineConfig:ResultExpirationPeriod` более не поддерживаются. Контейнер с распознаванием текста с доступом на чтение содержит встроенное задание cron, которое удаляет связанные с запросом результаты и метаданные через 48 часов.
* `Cache:Redis:Configuration` более не поддерживаются. Кэш в контейнерах версии 3.x не используется, поэтому его не нужно устанавливать.

## <a name="api-changes"></a>Изменения API

Контейнер для операций чтения версии 3.2 использует API "Компьютерное зрение" версии 3 и имеет следующие конечные точки:

* `/vision/v3.2-preview.1/read/analyzeResults/{operationId}`
* `/vision/v3.2-preview.1/read/analyze`
* `/vision/v3.2-preview.1/read/syncAnalyze`

Подробные сведения об обновлении приложений для использования API чтения на основе облака версии 3 см. в статье [Обновление API чтения для Компьютерного зрения с версии 2.0 или 2.1 до версии 3.0](./upgrade-api-versions.md). Эти сведения также применимы к контейнеру. Обратите внимание, что операции синхронизации поддерживаются только в контейнерах.

## <a name="memory-requirements"></a>Требования к памяти

Требования и рекомендации основаны на тестах производительности с одним запросом в секунду. Для тестов использовалось отсканированное изображение делового письма размером 8 МБ, которое содержит 29 строк и 803 символа. В следующей таблице описано минимальное и рекомендуемое выделение ресурсов для каждого OCR-контейнера с доступом на чтение.

|Контейнер  |Минимальные | Рекомендуется  |
|---------|---------|------|
|Чтение 3.2 (предварительная версия) | 8 ядер, 16 ГБ памяти         | 8 ядер, 24 ГБ памяти |

Частота каждого ядра должна быть минимум 2,6 ГГц.

Ядра и память соответствуют параметрам `--cpus` и `--memory`, которые используются как часть команды docker run.

## <a name="storage-implementations"></a>Реализации службы хранилища

>[!NOTE]
> MongoDB больше не поддерживается в контейнерах версии 3.x. Вместо этого контейнеры поддерживают службу хранилища Azure и автономные файловые системы.

| Реализация |    Обязательные аргументы среды выполнения |
|---------|---------|
|Уровень файла (по умолчанию)    | Аргументы среды выполнения не требуются. Будет использоваться каталог `/share`. |
|Большой двоичный объект Azure    | `Storage:ObjectStore:AzureBlob:ConnectionString={AzureStorageConnectionString}` |

## <a name="queue-implementations"></a>Реализации очередей

RabbitMQ в настоящее время не поддерживается в версии контейнера 3.x. Поддерживаются следующие резервные реализации:

| Реализация | Аргументы среды выполнения | предполагаемое использование; |
|---------|---------|-------|
| В памяти (по умолчанию) | Аргументы среды выполнения не требуются. | Разработка и тестирование |
| Очереди Azure | `Queue:Azure:ConnectionString={AzureStorageConnectionString}` | Рабочая среда |
| RabbitMQ    | Недоступно | Рабочая среда |

Для повышения избыточности контейнер с доступом на чтение версии 3.x использует таймер видимости. Это также обеспечивает успешную обработку запросов в случае сбоя при многоконтейнерной установке. 

Установите таймер с помощью `Queue:Azure:QueueVisibilityTimeoutInMilliseconds`. В результате будет задано время, в течение которого сообщение будет невидимым при обработке другой рабочей ролью. Чтобы избежать избыточной обработки страниц, рекомендуется установить период ожидания в 120 секунд. Значение по умолчанию - 30 секунды.

| Значение по умолчанию | Рекомендуемое значение |
|---------|---------|
| 30 000 |    120000 |


## <a name="next-steps"></a>Дальнейшие действия

* Ознакомьтесь со статьей о [конфигурации контейнеров](computer-vision-resource-container-config.md).
* Дополнительные сведения о распознавании печатного и рукописного текста см. в статье [Обзор OCR](overview-ocr.md).
* Дополнительные сведения о методах, поддерживаемых контейнером, см. в статье [об API чтения](//westus.dev.cognitive.microsoft.com/docs/services/5adf991815e1060e6355ad44/operations/56f91f2e778daf14a499e1fa).
* Чтобы разрешать проблемы, связанные с функциональностью Компьютерного зрения, ознакомьтесь с [часто задаваемыми вопросами](FAQ.md).
* Воспользуйтесь [дополнительными контейнерами Cognitive Services](../cognitive-services-container-support.md)