---
title: Краткое руководство. Веб-портал Помощника по метрикам
titleSuffix: Azure Cognitive Services
description: Узнайте, как начать работу с веб-порталом Помощника по метрикам.
services: cognitive-services
author: mrbullwinkle
ms.author: mbullwin
manager: nitinme
ms.date: 09/30/2020
ms.topic: quickstart
ms.service: cognitive-services
ms.subservice: metrics-advisor
ms.custom:
- mode-portal
ms.openlocfilehash: aaeaf92df140019db32c326199c9614fd8f5ae37
ms.sourcegitcommit: 49b2069d9bcee4ee7dd77b9f1791588fe2a23937
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 04/16/2021
ms.locfileid: "107531817"
---
# <a name="quickstart-monitor-your-first-metric-using-the-web-portal"></a>Краткое руководство. Мониторинг метрик на веб-портале

Подготовив экземпляр Помощника по метрикам, вы сможете использовать для работы с этой службой API и рабочую область на основе веб-интерфейсов. Рабочая область на основе веб-интерфейсов поможет вам быстро приступить к работе со службой. Это визуальное средство для настройки параметров и модели, а также для анализа основных причин. 

* Подключение данных метрик
* Просмотр метрик и визуализаций
* Тонкая настройка конфигураций обнаружения
* Анализ диагностических сведений
* Создание оповещений об аномалиях и подписка на них

## <a name="prerequisites"></a>Предварительные требования

* Подписка Azure — [создайте бесплатную учетную запись](https://azure.microsoft.com/free/cognitive-services).
* Получив подписку Azure, <a href="https://go.microsoft.com/fwlink/?linkid=2142156"  title="Создание ресурса Помощника по метрикам"  target="_blank">создайте ресурс Помощника по метрикам</a> на портале Azure, чтобы развернуть экземпляр Помощника по метрикам.  

    
> [!TIP]
> * Развертывание ресурса Помощника по метрикам занимает от 10 до 30 минут. Когда развертывание завершится, щелкните **Перейти к ресурсу**.
> * Если вы хотите для взаимодействия со службой использовать REST API, вам потребуются ключ и конечная точка из создаваемого ресурса. Их можно найти на вкладке **Ключи и конечные точки** в свойствах созданного ресурса.

В этом документе в качестве примера для первого монитора используется База данных SQL.

## <a name="sign-in-to-your-workspace"></a>Вход в рабочую область

Создав ресурс, войдите на [портал Помощника по метрикам](https://go.microsoft.com/fwlink/?linkid=2143774). Выберите рабочую область, чтобы начать мониторинг метрик. 
 
В настоящее время можно создать один ресурс Помощника по метрикам на доступный регион. На портале Помощника по метрикам вы можете в любой момент переключить рабочую область.


## <a name="onboard-time-series-data"></a>Подключение данных временных рядов

Помощник по метрикам предоставляет соединители для разных источников данных, в том числе для Базы данных SQL, Azure Data Explorer и Хранилища таблиц Azure. Действия по подключению данных для разных соединителей будут похожими, но некоторые параметры конфигурации могут отличаться. Сведения о необходимых параметрах для конкретных источников данных вы найдете в статье о [подключении данных из разных источников](../data-feeds-from-different-sources.md).

В этом кратком руководстве в качестве примера используется База данных SQL. Вы также можете подключить собственные данные, выполнив аналогичные действия.

Чтобы начать работу, войдите в рабочую область Помощника по метрикам, используя учетную запись Active Directory. На целевой странице выберите **каталог**, **подписку** и **рабочую область**, которую вы только что создали, а затем щелкните **Get started** (Начало работы). Когда завершится загрузка главной страницы для рабочей нагрузки, выберите **Add data feed** (Добавить веб-канал данных) в меню слева.

### <a name="data-schema-requirements-and-configuration"></a>Требования и конфигурация для схемы данных

[!INCLUDE [data schema requirements](../includes/data-schema-requirements.md)]

### <a name="configure-connection-settings"></a>Настройки параметров подключения

> [!TIP]
> Дополнительные сведения о доступных параметрах см. в статье о [добавлении веб-каналов данных](../how-tos/onboard-your-data.md).

Добавьте веб-канал данных, подключившись к источнику данных временных рядов. Для начала выберите следующие параметры:

* **Source Type** (Тип источника). Это тип источника данных, в котором хранятся данные временных рядов.
* **Granularity** (Степень детализации). Это интервал между последовательными точками данных в этих данных временных рядов (ежегодно, ежемесячно, ежедневно). Минимальный поддерживаемый интервал — 60 секунд.
* **Ingest data since (UTC)** (Прием данных с (UTC)). Время начала первой метки времени для приема. 


Затем укажите **строку подключения** с учетными данными для этого источника данных, а также пользовательский **запрос**. Этот запрос используется для выбора данных, которые будут приниматься и преобразовываться в требуемую схему.

[!INCLUDE [query requirements](../includes/query-requirements.md)]

:::image type="content" source="../media/connection-settings.png" alt-text="Параметры подключения" lightbox="../media/connection-settings.png":::


### <a name="verify-the-connection-and-load-the-data-schema"></a>Проверка подключения и загрузка схемы данных

После создания строки подключения и строки запроса щелкните **Verify and get schema** (Проверить и получить схему), чтобы проверить подключение и выполнить запрос для получения схемы данных из источника данных. Обычно этот процесс занимает несколько секунд в зависимости от подключения к источнику данных. Если на этом этапе возникает ошибка, проверьте следующее:

1. строка подключения и запрос указаны правильно;
2. экземпляр Помощника по метрикам может подключиться к источнику данных, если настроены соответствующие параметры брандмауэра.

### <a name="schema-configuration"></a>Конфигурация схемы

Когда схема данных будет загружена и отображена, как показано ниже, выберите соответствующие поля.


|Выбор  |Описание  |Примечания  |
|---------|---------|---------|
|**Timestamp**     | Метка времени точки данных. Если этот параметр не указан, Помощник по метрикам будет использовать метку времени, которая соответствует времени приема точки данных. Для каждого веб-канала данных можно указать в качестве метки времени не более одного столбца.        | Необязательный элемент. Здесь можно указать не более одного столбца.       |
|**Measure**     |  Числовые значения в веб-канале данных. Для каждого веб-канала данных можно указать несколько мер, но не менее одного столбца.        | Должен быть указан по меньшей мере один столбец.        |
|**Измерение**     | Категориальные значения. Сочетание разных значений определяет конкретный временной ряд с одним измерением (страна, язык, арендатор). В качестве измерений можно выбрать произвольное число столбцов, в том числе ни одного. Примечание. Если в качестве измерения выбран столбец, формат которого отличается от строкового, следует соблюдать осторожность при развертывании этого измерения. | Необязательный элемент.        |
|**Пропуск**     | Игнорировать выбранный столбец.        |         |


:::image type="content" source="../media/schema-configuration.png" alt-text="Schema configuration" lightbox="../media/schema-configuration.png"::: (Конфигурация схемы)

### <a name="automatic-roll-up-settings"></a>Параметры автоматического сведения

> [!IMPORTANT]
> Если вы хотите включить **анализ основных причин** и другие возможности диагностики, необходимо настроить параметр автоматического сведения. После его включения вы не сможете изменить соответствующие параметры.

Помощник по метрикам может автоматически во время приема выполнять агрегирование (сумма, максимум, минимум и т. д.) по каждому измерению, а затем создавать иерархию для анализа основных причин и других возможностей диагностики. Дополнительные сведения см. в разделе [Параметры автоматического сведения](../how-tos/onboard-your-data.md#automatic-roll-up-settings).

Укажите для веб-канала данных пользовательское имя, которое будет отображаться в рабочей области. Нажмите кнопку **Submit** (Отправить). 

## <a name="tune-detection-configuration"></a>Настройка конфигурации обнаружения

После добавления веб-канала данных Помощник по метрикам попробует принять данные метрик, начиная с указанной даты начала. Для полного приема данных потребуется некоторое время, а состояние приема можно узнать, щелкнув ссылку **Ingestion progress** (Выполнение приема) в верхней части страницы соответствующего веб-канала данных. Если данные принимаются успешно, Помощник по метрикам применяет обнаружение и продолжает отслеживать источник новых данных.

После применения обнаружения щелкните любую из метрик в веб-канале данных, чтобы перейти к **странице сведений о метрике**, где можно выполнить следующие действия: 
- просмотр визуализаций для всех срезов временных рядов в этой метрике;
- изменение конфигурации обнаружения в соответствии с ожидаемыми результатами;
- настройка уведомлений об обнаруженных аномалиях.

:::image type="content" source="../media/metric-details.png" alt-text="Metric details" lightbox="../media/metric-details.png"::: (Сведения о метрике)

## <a name="view-the-diagnostic-insights"></a>Просмотр диагностических сведений

После настройки конфигурации обнаружения все аномалии, обнаруженные в данных, должны соответствовать фактическим аномалиям в данных. Помощник по метрикам выполняет анализ многомерных метрик, например кластеризацию аномалий, корреляцию инцидентов и анализ основных причин. Используйте эти функции для анализа и диагностики инцидентов в данных.

Чтобы просмотреть диагностические сведения, щелкните красные точки на визуализациях временных рядов, которые представляют обнаруженные аномалии. Откроется окно со ссылкой на страницу анализа инцидента. 

:::image type="content" source="../media/incident-link.png" alt-text="Incident link" lightbox="../media/incident-link.png"::: (Ссылка на инцидент)

Щелкнув эту ссылку, вы перейдете на страницу анализа инцидентов с информацией об аномалии, включая разные диагностические сведения. В верхней части вы увидите статистические данные об инциденте, например: **Severity** (Серьезность), **Anomalies involved** (Связанные аномалии), **Start time** (Время начала) и **End time** (Время окончания). 

Далее вы увидите родительскую аномалию для этого инцидента и автоматический совет по анализу основных причин. Этот совет создается по результатам анализа дерева инцидентов для всех связанных аномалий, в котором учитываются отклонение, распространение и вклад в родительские аномалии. 

:::image type="content" source="../media/incident-diagnostic.png" alt-text="Incident diagnostics" lightbox="../media/incident-diagnostic.png"::: (Диагностика инцидентов)

На основе этих данных вы можете сразу получить обобщенное представление о том, что происходит, о последствиях инцидента и наиболее вероятной его причине. Это позволит вам как можно скорее выполнить некоторые действия для разрешения инцидента. 

Также вы можете выполнить сведение по дополнительным диагностическим сведениям и применить дополнительные функции для детализации аномалий по измерениям, просмотра аналогичных аномалий и сравнения по нескольким метрикам. Дополнительные сведения см. в статье о [диагностировании инцидентов](../how-tos/diagnose-incident.md). 

## <a name="get-notified-when-new-anomalies-are-found"></a>Получение уведомлений при обнаружении новых аномалий

Если вы хотите получать оповещения при обнаружении аномалий в данных, вы можете создать подписку на одну или несколько метрик. Для отправки предупреждений Помощник по метрикам использует перехватчики. Поддерживаются три типа перехватчиков: электронная почта, веб-перехватчик и Azure DevOps. В качестве примера мы будем использовать веб-перехватчик. 

### <a name="create-a-web-hook"></a>Создание веб-перехватчика

Веб-перехватчиком называется точка входа, которая позволяет программным способом обнаруживать аномалии из службы Помощника по метрикам и которая обращается на предоставленный пользователем API при срабатывании оповещения. Дополнительные сведения о создании перехватчика см. в разделе **Создание перехватчика** руководства [ Настройка оповещений и получение уведомлений с использованием перехватчика](../how-tos/alerts.md#create-a-hook). 

### <a name="configure-alert-settings"></a>Настроить параметры оповещений.

После создания перехватчика применяются параметры оповещений, чтобы определить, как и какие уведомления должны отправляться. Для каждой метрики можно задать несколько параметров оповещений. Два важных параметра здесь — это **Alert for** (Оповещения по), где указываются учитываемые аномалии, и **Filter anomaly options** (Фильтрация параметров аномалии), где указаны включаемые в оповещение аномалии. Дополнительные сведения см. в разделе **Добавление или изменение параметров оповещений** руководства [ Настройка оповещений и получение уведомлений с использованием перехватчика](../how-tos/alerts.md#add-or-edit-alert-settings).


## <a name="next-steps"></a>Следующие шаги

- [Подключение веб-каналов данных](../how-tos/onboard-your-data.md)
    - [Управление веб-каналами данных](../how-tos/manage-data-feeds.md)
    - [Конфигурации для разных источников данных](../data-feeds-from-different-sources.md)
- [Использование REST API или клиентских библиотек](./rest-api-and-client-library.md)
- [Настройка метрик и детальная настройка конфигурации обнаружения](../how-tos/configure-metrics.md)
