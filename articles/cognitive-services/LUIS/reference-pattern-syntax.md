---
title: Справочник по синтаксису шаблона — LUIS
description: Создание сущностей для извлечения данных ключей из фразы продолжительностью пользователей в приложениях Распознавание речи (LUIS). Извлеченные данные используются клиентским приложением.
ms.service: cognitive-services
ms.subservice: language-understanding
ms.topic: reference
ms.date: 04/14/2020
ms.openlocfilehash: 3caccd6766226ce68b371856b081b052c1033f71
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "91542195"
---
# <a name="pattern-syntax"></a>Синтаксис шаблона

Синтаксис шаблона — это шаблон фразы. Шаблон должен содержать слова и сущности, которые необходимо сопоставить, а также слова и [знаки препинания](luis-reference-application-settings.md#punctuation-normalization) , которые нужно игнорировать. **Это не регулярное выражение.**

> [!CAUTION]
> Шаблоны включают только родительские объекты машинного обучения, а не подсущности.

Сущности в шаблонах заключены в фигурные скобки (`{}`). Шаблоны могут включать сущности и сущности с ролями. [Pattern. Any](luis-concept-entity-types.md#patternany-entity) — это сущность, используемая только в шаблонах.

Синтаксис шаблона поддерживает следующий синтаксис:

|Компонент|Синтаксис|Уровень вложенности|Пример|
|--|--|--|--|
|сущность| {} -фигурные скобки|2|Где имеет форму {Entity-Name}?|
|необязательно|[] — квадратные скобки<BR><BR>Существует ограничение в 3 уровня вложенности любого сочетания необязательных и группирований. |2|Вопросительный знак является необязательным [?]|
|группирование|() — круглые скобки|2|имеет значение (a \| b)|
|или диспетчер конфигурации служб| \| — Вертикальная черта (вертикальная черта)<br><br>На вертикальных панелях (или) в одной группе имеется ограничение 2 |-|Где имеет форму ({Form-Name-Short} &#x7c; {форма-Name-Long} &#x7c; {форма-номер})|
|Начало и (или) конец utterance|^-курсор|-|^ Начало utterance<br>utterance выполняется ^<br>^ полное литеральное соответствие целого utterance с {Number} сущность ^|

## <a name="nesting-syntax-in-patterns"></a>Синтаксис вложенности в шаблонах

**Необязательный** синтаксис с квадратными скобками может быть вложен на два уровня. Например, `[[this]is] a new form`. Этот пример позволяет выполнять следующие фразы продолжительностью:

|Вложенный необязательный пример utterance|Пояснение|
|--|--|
|Это новая форма|соответствует всем словам в шаблоне|
|является новой формой|соответствует внешнему необязательному слову и необязательным словам в шаблоне|
|Новая форма|соответствует только обязательным словам|

Синтаксис **группирования** с круглыми скобками может быть вложен двумя уровнями. Например, `(({Entity1.RoleName1} | {Entity1.RoleName2} ) | {Entity2} )`. Эта функция позволяет сопоставлять любую из трех сущностей.

Если объект Entity1 является расположением с такими ролями, как источник (Сиэтл) и назначение (Каиро), а сущность 2 является известным именем сборки из сущности списка (Редвест-C), следующий фразы продолжительностью будет сопоставлен с этим шаблоном:

|Пример вложенного группирования utterance|Пояснение|
|--|--|
|Редвест-C|совпадает с сущностью внешнего группирования|
|Сиэтл|соответствует одной из внутренних сущностей группирования|
|Cairo|соответствует одной из внутренних сущностей группирования|

## <a name="nesting-limits-for-groups-with-optional-syntax"></a>Ограничения вложенности для групп с необязательным синтаксисом

Сочетание **группирования** с **необязательным** синтаксисом имеет ограничение в 3 уровня вложенности.

|Допускается|Пример|
|--|--|
|Да|([(test1 &#x7c; test2)] &#x7c; test3)|
|Нет|([([test1] &#x7c; test2)] &#x7c; test3)|

## <a name="nesting-limits-for-groups-with-or-ing-syntax"></a>Ограничения вложенности для групп с помощью синтаксиса или

Сочетание **группирования** с синтаксисом **или** путем признака имеет ограничение в 2 вертикальных полосы.

|Допускается|Пример|
|--|--|
|Да|(test1 &#x7c; &#x7c; test2 (test3 &#x7c; test4))|
|Нет|(test1 &#x7c; test2 &#x7c; test3 &#x7c; (test4 &#x7c; test5)) |

## <a name="syntax-to-add-an-entity-to-a-pattern-template"></a>Синтаксис, предназначенный для добавления сущности в шаблон
Чтобы добавить сущность в шаблон, заключите имя сущности в фигурные скобки, например `Who does {Employee} manage?`.

|Шаблон с сущностью|
|--|
|`Who does {Employee} manage?`|

## <a name="syntax-to-add-an-entity-and-role-to-a-pattern-template"></a>Синтаксис, предназначенный для добавления сущности и роли в шаблон
Роль сущности обозначается как `{entity:role}`: имя сущности, за которым следует двоеточие, а затем имя роли. Чтобы добавить сущность с ролью в шаблон, заключите имя сущности и имя роли в фигурные скобки, например `Book a ticket from {Location:Origin} to {Location:Destination}`.

|Шаблон с ролями сущности|
|--|
|`Book a ticket from {Location:Origin} to {Location:Destination}`|

## <a name="syntax-to-add-a-patternany-to-pattern-template"></a>Синтаксис, предназначенный для добавления сущности Pattern.any в шаблон
Сущность Pattern.any позволяет добавлять сущность переменной длины в шаблон. Если формат шаблона соблюдается, Pattern.any может быть любой длины.

Чтобы добавить сущность **Pattern.any** в шаблон, заключите сущность Pattern.any в фигурные скобки, например `How much does {Booktitle} cost and what format is it available in?`.

|Шаблон с сущностью Pattern.any|
|--|
|`How much does {Booktitle} cost and what format is it available in?`|

|Наименования книг в шаблоне|
|--|
|Сколько **стоит эта книга** и в каком формате она доступна?|
|Сколько стоит **запрос** и в каком формате она доступна?|
|Сколько стоит **Загадочное ночное убийство собаки** и в каком формате она доступна?|

Слова в названии книги не имеют путаницы в LUIS, так как LUIS знает, где заканчивается название книги, на основе шаблона. любая сущность.

## <a name="explicit-lists"></a>Явные списки

Создайте [явный список](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5ade550bd5b81c209ce2e5a8) через API-интерфейс разработки, чтобы разрешить исключение в следующих случаях:

* Шаблон содержит [шаблон. любой](luis-concept-entity-types.md#patternany-entity)
* И этот синтаксис шаблона обеспечивает возможность неправильного извлечения сущностей на основе utterance.

Предположим, имеется шаблон, содержащий и дополнительный синтаксис `[]` и синтаксис сущности `{}`, которые объединены так, что данные будут извлекаться некорректно.

Рассмотрим шаблон "[найти] сообщение о {тема} [от {человек}]".

В следующей фразе сущности **тема** и **человек** извлекаются правильно и неправильно:

|Речевой фрагмент|Сущность|Правильное извлечение|
|--|--|:--:|
|сообщение о собаках от Глеба|тема=собаки<br>человек=Глеб|✔|
|сообщение о мужчине из Ла-Манча|тема=мужчина<br>человек=Ла-Манч|X|

В приведенной выше таблице тема должна быть `the man from La Mancha` (название книги), но так как тема содержит необязательное слово `from` , заголовок неверно прогнозируется.

Чтобы исправить это исключение в шаблоне, добавьте`the man from la mancha` как сопоставление явного списка для сущности {тема}, используя [API авторизации для явного списка](https://westus.dev.cognitive.microsoft.com/docs/services/5890b47c39e2bb17b84a55ff/operations/5ade550bd5b81c209ce2e5a8).

## <a name="syntax-to-mark-optional-text-in-a-template-utterance"></a>Синтаксис, предназначенный для отметки дополнительного текста в шаблоне фразы
Отметьте необязательный текст во фразе, используя синтаксис регулярного выражения с квадратными скобками `[]`. В необязательном тексте может быть не более двух экземпляров открывающих и закрывающих квадратных скобок.

|Шаблон с необязательным текстом|Значение|
|--|--|
|`[find] email about {subject} [from {person}]`|`find` и `from {person}` являются необязательными|
|' Может помочь мне [?]|Знак препинания является необязательным|

Знаки пунктуации ( `?` , `!` , `.` ) следует игнорировать, и их нужно пропускать с помощью синтаксиса квадратной скобки в шаблонах.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о шаблонах:

* [Добавление шаблонов](luis-how-to-model-intent-pattern.md)
* [Как добавить шаблон. любая сущность](luis-how-to-add-entities.md#add-a-patternany-entity)
* [Основные понятия шаблонов](luis-concept-patterns.md)

Узнайте, как [тональности](luis-reference-prebuilt-sentiment.md) возвращается в ответе JSON.