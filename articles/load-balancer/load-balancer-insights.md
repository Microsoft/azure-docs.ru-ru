---
title: Аналитика для Azure Load Balancer
description: Использование балансировщика нагрузки для обеспечения быстрой локализации и информирования решений по проектированию
services: load-balancer
documentationcenter: na
author: erichrt
ms.service: load-balancer
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: infrastructure-services
ms.date: 10/27/2020
ms.author: errobin
ms.openlocfilehash: 88c287c4aa87b4df41bfe6bbc1992262b21d07aa
ms.sourcegitcommit: c7153bb48ce003a158e83a1174e1ee7e4b1a5461
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/15/2021
ms.locfileid: "98232766"
---
# <a name="using-insights-to-monitor-and-configure-your-azure-load-balancer"></a>Использование аналитики для мониторинга и настройки Azure Load Balancer

С помощью Azure Monitor для сетей вы предоставляете визуализации функциональной зависимости и предварительно настроенную панель мониторинга метрик для подсистем балансировки нагрузки. Эти визуальные элементы помогают принимать информированные решения по проектированию и быстро локализовать, диагностировать и устранять ошибки.

>[!NOTE] 
>Обратите внимание, что эта функция доступна в режиме предварительной версии, и представление функциональной зависимости и предварительно настроенная панель мониторинга могут измениться для улучшения этого процесса.

>[!IMPORTANT]
>Load Balancer (цен. категория "Стандартный") требуется для просмотра метрик из пространства имен Load Balancer на предварительно настроенной панели мониторинга метрик. Вы по-прежнему сможете просматривать метрики из виртуальной машины, масштабируемого набора виртуальных машин и пространств имен монитора подключений, однако мы рекомендуем [Обновить до](./upgrade-basic-standard.md) уровня "Стандартный" для любых рабочих нагрузок, чтобы воспользоваться преимуществами надежного набора метрик Load Balancer.

## <a name="functional-dependency-view"></a>Представление функциональной зависимости

Представление функциональной зависимости позволит вам просматривать даже самые сложные настройки балансировщика нагрузки. Благодаря визуальной обратной связи с вашей последней конфигурацией Load Balancer можно вносить обновления, сохраняя при этом конфигурацию.

Доступ к этому представлению можно получить, перейдя в колонку Insights Load Balancer ресурса в Azure.

:::image type="content" source="./media/load-balancer-insights/load-balancer-functional-dependency-visual.png" alt-text="ДепеЦитион представления функциональной зависимости. Внешний интерфейс подсистемы балансировки нагрузки можно увидеть при подключении к членам серверного пула с помощью настроенных правил. Для Load Balancer (цен. категория &quot;Стандартный&quot;) строки из правил балансировки нагрузки в экземпляры внутреннего пула задаются цветом на основе состояния зонда работоспособности." border="true":::

Для стандартных подсистем балансировки нагрузки ресурсы серверного пула имеют цветовую маркировку с состоянием зонда работоспособности, указывающим на текущую доступность серверного пула для обслуживания трафика. Наряду с указанной выше топологией вы видите график состояния работоспособности на основе времени, предоставляя моментальный снимок состояния работоспособности приложения.

## <a name="metrics-dashboard"></a>Панель мониторинга метрики

В колонке аналитика Load Balancer можно выбрать более подробные метрики для просмотра предварительно настроенной [Azure Monitor книги](../azure-monitor/platform/workbooks-overview.md) , содержащей визуальные элементы метрик, относящиеся к конкретным аспектам Load Balancer. На этой панели мониторинга отображается состояние Load Balancer и ссылки на соответствующую документацию в верхней части страницы.

Сначала отобразится вкладка Обзор. Можно перемещаться по доступным вкладкам, которые содержат визуальные элементы, относящиеся к конкретному аспекту Load Balancer. Явное руководство для каждого из них доступно на панели мониторинга в нижней части каждой вкладки.

Доступные на данный момент вкладки панели мониторинга:
* Обзор
* Доступность интерфейсного сервера и внутреннего пула
* Пропускная способность данных
* Распределение потоков
* Мониторы подключения
* Определения метрик 

### <a name="overview-tab"></a>Вкладка "Обзор"
Вкладка Обзор содержит сетку с возможностью поиска, в которой содержатся общие сведения о доступности пути к данным и состоянии зонда работоспособности для каждого из интерфейсных IP-адресов, прикрепленных к Load Balancer. Эти метрики указывают, отвечает ли интерфейсный IP-адрес, и что экземпляры вычислений в серверном пуле по отдельности реагируют на входящие подключения.

Вы также можете просмотреть общую пропускную способность данных для каждого внешнего IP-адреса на этой странице, чтобы понять, какие уровни трафика вы создаете и получаете. В руководстве, расположенном в нижней части страницы, будет направляться на соответствующую вкладку, где отображаются неправильные значения.

### <a name="frontend-and-backend-availability-tab"></a>Вкладка "доступность внешнего и внутреннего сервера"
Вкладки доступность на стороне сервера и серверной части показывают метрики пропускной способности пути к данным и состояния проверки работоспособности, представленные в нескольких полезных представлениях. На первом графе показано статистическое значение, позволяющее определить наличие проблемы. На остальных диаграммах эти метрики делятся по различным измерениям, что позволяет устранять неполадки и обнаруживать источники любых входящих проблем доступности.

Рабочий процесс для просмотра этих графиков приведен в нижней части страницы с общими причинами для различных симптомов. 

### <a name="data-throughput-tab"></a>Вкладка "пропускная способность данных"
Вкладка пропускная способность данных позволяет проверить входящую и исходящую пропускную способность, чтобы выяснить, правильно ли используются шаблоны трафика. В нем отображаются пропускная способность входящих и исходящих данных, разделенных внешним IP-интерфейсом и интерфейсным портом, чтобы можно было выяснить, как службы выполняются по отдельности.

### <a name="flow-distribution"></a>Распределение потоков
Вкладка распределение потоков позволяет визуализировать и контролировать количество потоков, получаемых и создаваемых серверными экземплярами. Он показывает скорость создания потока и число потоков для входящего и исходящего трафика, а также сетевой трафик, получаемый каждой виртуальной машиной и экземпляром масштабируемого набора виртуальных машин. 

В этих представлениях можно отправить отзыв о том, что ваша конфигурация Load Balancer или шаблон трафика не сбалансированный трафик. Например, если настроено сходство сеансов и один клиент делает непропорциональное количество запросов. Кроме того, это позволит вам понять, приближается ли [ограничение на количество потоков виртуальной машины](../virtual-network/virtual-machine-network-throughput.md#flow-limits-and-active-connections-recommendations) к размеру компьютера.

### <a name="connection-monitors"></a>Мониторы подключения
На вкладке Мониторы подключения отображается задержка приема-передачи на глобальном сопоставлении для всех настроенных [мониторов подключения](../network-watcher/connection-monitor.md)  . Эти визуальные элементы предоставляют полезную информацию для служб с требованиями к длительной задержке. В соответствии с вашими требованиями может потребоваться добавить дополнительные региональные развертывания или перейти к модели [балансировки нагрузки в разных регионах](./cross-region-overview.md) .

### <a name="metric-definitions"></a>Определения метрик
На вкладке определения метрик содержатся все сведения, показанные в [статье многомерные метрики](./load-balancer-standard-diagnostics.md#multi-dimensional-metrics).

## <a name="next-steps"></a>Дальнейшие действия
* Проверьте панель мониторинга и оставьте отзыв, воспользовавшись приведенной ниже ссылкой, если есть все, что можно улучшить.
* [Ознакомьтесь с документацией по метрикам, чтобы понять, как вычисляется Каждая метрика.](./load-balancer-standard-diagnostics.md#multi-dimensional-metrics)
* [Создание мониторов подключения для Load Balancer](../network-watcher/connection-monitor.md)
* [Создайте собственные книги](../azure-monitor/platform/workbooks-overview.md), нажав кнопку изменить на панели мониторинга подробной метрики.
