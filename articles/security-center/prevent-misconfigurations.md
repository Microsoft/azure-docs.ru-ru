---
title: Как предотвратить невозможность настройки с помощью центра безопасности Azure
description: Узнайте, как использовать параметры "принудительно" и "deny" центра безопасности на страницах со сведениями о рекомендациях
services: security-center
author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: how-to
ms.date: 02/04/2021
ms.author: memildin
ms.openlocfilehash: a3da9cdea543894aa7aec66112e28658beac84b5
ms.sourcegitcommit: f82e290076298b25a85e979a101753f9f16b720c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/04/2021
ms.locfileid: "99558179"
---
# <a name="prevent-misconfigurations-with-enforcedeny-recommendations"></a>Предотвращение ошибок конфигурации с помощью рекомендаций о применении и отклонении

Ошибки в конфигурации безопасности являются частой причиной инцидентов безопасности. Центр безопасности теперь помогает *предотвращать* такие ошибки для новых ресурсов в соответствии с определенными рекомендациями. 

Эта возможность помогает поддерживать безопасность рабочих нагрузок и стабилизировать оценку безопасности.

Применять конфигурацию безопасности в соответствии с определенной рекомендацией можно в двух режимах:

- параметр **Отклонить** Политики Azure предотвращает создание неработоспособных ресурсов;
- параметр **Применить** использует действие **DeployIfNotExist** Политики Azure для автоматического исправления несоответствующих ресурсов после создания.

Его можно найти в верхней части страницы сведений о ресурсах для выбранных рекомендаций по безопасности (см. раздел [рекомендации с параметрами Deny/принудительно](#recommendations-with-denyenforce-options)).

## <a name="prevent-resource-creation"></a>Запретить создание ресурсов

1. Откройте рекомендацию, которой должны соответствовать новые ресурсы, и нажмите кнопку **Deny (запретить** ) в верхней части страницы.

    :::image type="content" source="./media/security-center-remediate-recommendations/recommendation-deny-button.png" alt-text="Страница рекомендаций с выделенной кнопкой &quot;запретить&quot;":::

    Откроется панель конфигурация с перечнем параметров области. 

1. Задайте область, выбрав соответствующую подписку или группу управления.

    > [!TIP]
    > Можно использовать три точки в конце строки, чтобы изменить одну подписку, или воспользоваться флажками, чтобы выбрать несколько подписок или групп, а затем выбрать команду **изменить на запретить**.

    :::image type="content" source="./media/security-center-remediate-recommendations/recommendation-prevent-resource-creation.png" alt-text="Настройка области действия Deny для политики Azure":::


## <a name="enforce-a-secure-configuration"></a>Принудительная настройка безопасности

1. Откройте рекомендацию по развертыванию шаблона, если новые ресурсы не соответствуют требованиям, и нажмите кнопку **Применить** в верхней части страницы.

    :::image type="content" source="./media/security-center-remediate-recommendations/recommendation-enforce-button.png" alt-text="Страница рекомендаций с выделенной кнопкой &quot;Применить&quot;":::

    Откроется панель конфигурация со всеми параметрами конфигурации политики. 

    :::image type="content" source="./media/security-center-remediate-recommendations/recommendation-enforce-config.png" alt-text="Принудительное применение параметров конфигурации":::

1. Задайте область, имя назначения и другие соответствующие параметры.

1. Выберите **Review + create** (Просмотреть и создать).

## <a name="recommendations-with-denyenforce-options"></a>Рекомендации с параметрами Deny/принудительного применения

Эти рекомендации можно использовать с параметром **Deny** :

- Необходимо ограничить доступ к учетным записям хранения в конфигурациях брандмауэра и виртуальной сети
- Кэш Azure для Redis должен находиться в виртуальной сети
- Учетные записи Azure Cosmos DB должны использовать управляемые клиентом ключи для шифрования неактивных данных
- Рабочие области Машинного обучения Azure должны быть зашифрованы с использованием ключа, управляемого клиентом (CMK)
- Служба Azure Spring Cloud должна использовать внедрение сети
- Учетные записи Cognitive Services должны поддерживать шифрование данных с использованием ключа, управляемого клиентом (CMK)
- Для контейнеров должны соблюдаться ограничения по числу ЦП и объему оперативной памяти.
- Образы контейнеров должны развертываться только из доверенных реестров
- В реестрах контейнеров должно использоваться шифрование с помощью ключа, управляемого клиентом (CMK)
- Контейнеры с повышением привилегий должны по возможности исключаться
- Контейнеры с общим доступом к важным пространствам имен узлов должны по возможности исключаться
- Контейнеры должны ожидать передачи данных только на разрешенных портах
- Для контейнеров должна применяться неизменяемая (доступная только для чтения) корневая файловая система
- Для ключей Key Vault должна быть задана дата окончания срока действия
- Для секретов Key Vault должна быть задана дата окончания срока действия
- В хранилищах ключей должна быть включена защита от очистки
- В хранилищах ключей должно быть включено обратимое удаление
- Для контейнеров должны применяться возможности Linux с минимальными правами
- К кэшу Redis должны выполняться только безопасные подключения.
- Возможности переопределения или отключения профиля AppArmor для контейнеров должны быть ограничены
- Требуется избегать привилегированных контейнеров
- Работа контейнеров от имени привилегированного пользователя должна по возможности исключаться
- Должно выполняться безопасное перемещение в учетные записи хранения.
- Свойство ClusterProtectionLevel в кластерах Service Fabric должно иметь значение EncryptAndSign.
- Кластеры Service Fabric должны использовать для проверки подлинности клиента только Azure Active Directory.
- Службы должны ожидать передачи данных только на разрешенных портах
- Необходимо перенести учетные записи хранения в новые ресурсы Azure Resource Manager.
- Учетные записи хранения должны ограничивать доступ к сети с помощью правил виртуальной сети
- Использование сети и портов узлов должно быть ограничено
- Использование подключений томов HostPath для групп pod должно быть ограничено списком известных узлов для предотвращения доступа из скомпрометированных контейнеров.
- Срок действия сертификатов, хранящихся в Azure Key Vault, не должен превышать 12 месяцев.
- Необходимо перенести виртуальные машины в новые ресурсы Azure Resource Manager.
- Для Шлюза приложений должен быть включен брандмауэр веб-приложения (WAF)
- Для службы Azure Front Door Service должен быть включен Брандмауэр веб-приложений (WAF)

Эти рекомендации можно использовать с параметром **принудительно** :

- Необходимо включить аудит на сервере SQL.
- Необходимо включить Azure Backup для виртуальных машин.
- Средство Azure Defender для SQL должно быть включено на серверах SQL
- Должны быть включены журналы диагностики в Azure Stream Analytics.
- Необходимо включить журналы диагностики в учетных записях пакетной службы
- В Data Lake Analytics должны быть включены журналы диагностики.
- Необходимо включить журналы диагностики в концентраторе событий
- Журналы диагностики в Key Vault должны быть включены
- Необходимо включить журналы диагностики в Logic Apps
- Необходимо включить журналы диагностики в службах поиска
- В Служебной шине должны быть включены журналы диагностики.