---
title: Автоматизация рабочих процессов в центре безопасности Azure | Документация Майкрософт
description: Узнайте, как создавать и автоматизировать рабочие процессы в центре безопасности Azure.
services: security-center
author: memildin
manager: rkarlin
ms.service: security-center
ms.topic: how-to
ms.date: 10/27/2020
ms.author: memildin
ms.openlocfilehash: 674ba1cf03f48eb1c746b115d981740b5b938aab
ms.sourcegitcommit: 436518116963bd7e81e0217e246c80a9808dc88c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/27/2021
ms.locfileid: "98919533"
---
# <a name="automate-responses-to-security-center-triggers"></a>Автоматизация ответов на триггеры центра безопасности

Каждая программа безопасности включает в себя несколько рабочих процессов для реагирования на инциденты. Это могут быть, например, уведомление релевантных участников, запуск процесса управления изменениями и выполнение конкретных шагов для исправления. Специалисты по безопасности рекомендуют автоматизировать как можно больше этапов таких процедур. Автоматизация сокращает затраты. Она также может повысить безопасность, обеспечивая быстрое и согласованное завершение процессов и в соответствии с предопределенными требованиями.

В этой статье описывается функция автоматизации рабочих процессов в центре безопасности Azure. Эта функция может активировать Logic Apps на оповещениях и рекомендациях системы безопасности. Например, может потребоваться, чтобы центр безопасности мог отправлять по электронной почте определенного пользователя при возникновении предупреждения. Вы также узнаете, как создавать Logic Apps с помощью [Azure Logic Apps](../logic-apps/logic-apps-overview.md).


## <a name="availability"></a>Доступность

|Аспект|Сведения|
|----|:----|
|Состояние выпуска:|Общедоступная версия|
|Цены|Free|
|Требуемые роли и разрешения|**Роль администратора безопасности** или **владелец** группы ресурсов<br>Также должны иметь разрешения на запись для целевого ресурса.<br><br>Для работы с рабочими процессами Azure Logic Apps также необходимо иметь следующие Logic Apps роли и разрешения:<br> - Требуются разрешения [оператора приложения логики](../role-based-access-control/built-in-roles.md#logic-app-operator) или доступ для чтения и активации приложения логики (эта роль не может создавать или изменять приложения логики, *запускать* только существующие)<br> - Разрешения [участника приложения логики](../role-based-access-control/built-in-roles.md#logic-app-contributor) требуются для создания и изменения приложения логики<br>Если вы хотите использовать соединители приложений логики, вам могут потребоваться дополнительные учетные данные для входа в соответствующие службы (например, Outlook, команды или экземпляры временного резерва).|
|Облако.|![Да](./media/icons/yes-icon.png) Коммерческие облака<br>![Да](./media/icons/yes-icon.png) Национальные и независимые (US Gov, China Gov, другие правительственные облака)|
|||



## <a name="create-a-logic-app-and-define-when-it-should-automatically-run"></a>Создание приложения логики и определение его автоматического запуска 

1. На боковой панели центра безопасности выберите **Автоматизация рабочего процесса**.

    :::image type="content" source="./media/workflow-automation/list-of-workflow-automations.png" alt-text="Список автоматизации рабочих процессов":::

    На этой странице можно создавать новые правила автоматизации, а также включать, отключать или удалять существующие.

1. Чтобы определить новый рабочий процесс, щелкните **Добавить автоматизацию рабочего процесса**. 

    Появится панель с параметрами для новой автоматизации. Здесь можно ввести:
    1. Имя и описание для автоматизации.
    1. Триггеры, которые будут инициировать этот автоматический рабочий процесс. Например, может потребоваться, чтобы приложение логики выполнялось при создании оповещения системы безопасности, содержащего "SQL".

        > [!NOTE]
        > Если в качестве триггера указана рекомендация, которая содержит "подразделы", например, **результаты оценки уязвимостей в базах данных SQL должны быть исправлены**, приложение логики не будет инициироваться для всех новых средств обеспечения безопасности. только при изменении состояния родительской рекомендации.

    1. Приложение логики, которое будет выполняться при выполнении условий триггера. 

        :::image type="content" source="./media/workflow-automation/add-workflow.png" alt-text="Добавить панель автоматизации рабочих процессов":::

1. В разделе действия щелкните **создать новый** , чтобы начать процесс создания приложения логики.

    Вы будете Azure Logic Apps.

    [![Создание нового приложения логики](media/workflow-automation/logic-apps-create-new.png)](media/workflow-automation/logic-apps-create-new.png#lightbox)

1. Введите имя, группу ресурсов и расположение, а затем нажмите кнопку **создать**.

1. В новом приложении логики можно выбрать встроенные стандартные шаблоны из категории безопасность. Или можно определить пользовательский поток событий, который будет происходить при активации этого процесса.

    > [!TIP]
    > Иногда в приложении логики параметры включаются в соединитель как часть строки, а не в собственное поле. Пример извлечения параметров см. в разделе Шаг #14 [работы с параметрами приложения логики при создании автоматизации рабочих процессов центра безопасности Azure](https://techcommunity.microsoft.com/t5/azure-security-center/working-with-logic-app-parameters-while-building-azure-security/ba-p/1342121).

    Конструктор приложений логики поддерживает следующие триггеры центра безопасности:

    * **При создании или активации рекомендации центра безопасности Azure** . Если приложение логики использует рекомендацию, которая является устаревшей или замененной, то ваша Автоматизация перестанет работать, и вам потребуется обновить триггер. Сведения об отслеживании изменений в рекомендациях см. в разделе [заметки о выпуске центра безопасности Azure](release-notes.md).

    * **При создании или активации оповещения центра безопасности Azure** можно настроить триггер таким образом, чтобы он сопоставлен только с оповещениями с интересующими уровнями серьезности.
    
    > [!NOTE]
    > Если вы используете триггер прежних версий "при активации оповещения центра безопасности Azure", приложения логики не будут запускаться функцией автоматизации рабочих процессов. Вместо этого используйте один из триггеров, упомянутых выше. 

    [![Пример приложения логики](media/workflow-automation/sample-logic-app.png)](media/workflow-automation/sample-logic-app.png#lightbox)

1. Определив приложение логики, вернитесь на панель определение автоматизации рабочего процесса ("Добавление автоматизации рабочего процесса"). Нажмите кнопку **Обновить** , чтобы убедиться, что новое приложение логики доступно для выбора.

    ![Обновить](media/workflow-automation/refresh-the-list-of-logic-apps.png)

1. Выберите приложение логики и сохраните автоматизацию. Обратите внимание, что в раскрывающемся списке приложение логики отображается только Logic Apps с поддержкой соединителей центра безопасности, упомянутых выше.


## <a name="manually-trigger-a-logic-app"></a>Запуск приложения логики вручную

Можно также запустить Logic Apps вручную при просмотре любого оповещения или рекомендации по безопасности.

Чтобы вручную запустить приложение логики, откройте оповещение или рекомендацию и щелкните **активировать приложение логики**:

[![Запуск приложения логики вручную](media/workflow-automation/manually-trigger-logic-app.png)](media/workflow-automation/manually-trigger-logic-app.png#lightbox)


## <a name="configure-workflow-automation-at-scale-using-the-supplied-policies"></a>Настройка автоматизации рабочих процессов в масштабе с помощью предоставляемых политик

Автоматизация корпоративных процессов мониторинга и реагирования на инциденты может значительно ускорить процессы изучения и устранения инцидентов безопасности.

Чтобы развернуть конфигурации автоматизации в Организации, используйте указанные ниже политики Azure "Деплойифнотексист", описанные далее, чтобы создать и настроить процедуры автоматизации рабочего процесса.

Начало работы с [шаблонами автоматизации рабочих процессов](https://github.com/Azure/Azure-Security-Center/tree/master/Workflow%20automation).

Для реализации этих политик:

1. В таблице ниже выберите политику, которую необходимо применить.

    |Цель  |Политика  |Идентификатор политики  |
    |---------|---------|---------|
    |Автоматизация рабочих процессов для оповещений системы безопасности|[Развертывание средств автоматизации рабочих процессов для оповещений Центра безопасности Azure](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2ff1525828-9a90-4fcf-be48-268cdd02361e)|f1525828-9a90-4fcf-be48-268cdd02361e|
    |Автоматизация рабочих процессов для рекомендаций системы безопасности|[Развертывание средств автоматизации рабочих процессов для рекомендаций Центра безопасности Azure](https://portal.azure.com/#blade/Microsoft_Azure_Policy/PolicyDetailBlade/definitionId/%2fproviders%2fMicrosoft.Authorization%2fpolicyDefinitions%2f73d6ab6c-2475-4850-afd6-43795f3492ef)|73d6ab6c-2475-4850-afd6-43795f3492ef|
    ||||

    > [!TIP]
    > Их также можно найти, выполнив поиск по политике Azure:
    > 1. Откройте политику Azure.
    > :::image type="content" source="./media/continuous-export/opening-azure-policy.png" alt-text="Доступ к политике Azure":::
    > 2. В меню политика Azure выберите **определения** и найдите их по имени. 

1. На странице соответствующей политики Azure выберите **назначить**.
    :::image type="content" source="./media/workflow-automation/export-policy-assign.png" alt-text="Назначение политики Azure":::

1. Откройте каждую вкладку и задайте необходимые параметры.
    1. На вкладке **Основные сведения** задайте область для политики. Чтобы использовать централизованное управление, назначьте политику группе управления, содержащей подписки, которые будут использовать конфигурацию автоматизации рабочих процессов. 
    1. На вкладке **Параметры** задайте сведения о группе ресурсов и типе данных. 
        > [!TIP]
        > Каждый параметр имеет подсказку, объясняющую доступные параметры.
        >
        > Вкладка "Параметры" политики Azure (1) предоставляет доступ к аналогичным параметрам конфигурации на странице автоматизации рабочего процесса центра безопасности (2).
        > :::image type="content" source="./media/workflow-automation/azure-policy-next-to-workflow-automation.png" alt-text="Сравнение параметров в автоматизации рабочих процессов с помощью политики Azure" lightbox="./media/workflow-automation/azure-policy-next-to-workflow-automation.png":::

    1. Кроме того, чтобы применить это назначение к существующим подпискам, откройте вкладку **исправление** и выберите параметр Создать задачу исправления.

1. Проверьте страницу Сводка и нажмите кнопку **создать**.


## <a name="data-types-schemas"></a>Схемы типов данных

Чтобы просмотреть схемы необработанных событий предупреждений системы безопасности или событий рекомендаций, переданных в экземпляр приложения логики, посетите страницу [схемы типов данных автоматизации рабочих процессов](https://aka.ms/ASCAutomationSchemas). Это может быть полезно в тех случаях, когда не используются встроенные соединители приложений логики центра безопасности, упомянутые выше, но вместо них используется универсальный соединитель HTTP приложения логики. Вы можете использовать схему JSON события, чтобы вручную проанализировать его по своему усмотрению.


## <a name="faq-for-workflow-automation"></a>Вопросы и ответы по автоматизации рабочих процессов

### <a name="does-workflow-automation-support-any-business-continuity-or-disaster-recovery-bcdr-scenarios"></a>Поддерживает ли Автоматизация рабочего процесса любые сценарии обеспечения непрерывности бизнес-процессов или аварийного восстановления (BCDR)?

При подготовке среды к BCDR сценариям, когда целевой ресурс испытывает сбой или другой аварии, ответственность Организации за предотвращение потери данных путем создания резервных копий в соответствии с рекомендациями из концентраторов событий Azure, Log Analytics рабочей области и приложения логики.

Для каждой активной автоматизации рекомендуется создать идентичную (отключенную) автоматизацию и сохранить ее в другом расположении. При возникновении сбоя можно включить эти средства автоматизации резервного копирования и поддерживать нормальные операции.

Дополнительные сведения о [непрерывности бизнес-процессов и аварийном восстановлении для Azure Logic Apps](../logic-apps/business-continuity-disaster-recovery-guidance.md).

## <a name="next-steps"></a>Дальнейшие действия

В этой статье вы узнали, как создавать Logic Apps, автоматизировать их выполнение в центре безопасности и запускать их вручную. 

Дополнительные материалы: 

- [Модуль Microsoft Learn об использовании автоматизации рабочих процессов для автоматизации реагирования на безопасность](/learn/modules/resolve-threats-with-azure-security-center/)
- [Рекомендации по безопасности в Центре безопасности Azure](security-center-recommendations.md)
- [Оповещения безопасности в Центре безопасности Azure](security-center-alerts-overview.md)
- [Общие сведения об Azure Logic Apps](../logic-apps/logic-apps-overview.md)
- [Список соединителей](../connectors/apis-list.md)
- [Схемы типов данных автоматизации рабочих процессов](https://aka.ms/ASCAutomationSchemas)