---
title: Защита контейнеров в Центре безопасности Azure | Документация Майкрософт
description: Сведения о функциях защиты контейнеров в Центре безопасности Azure.
services: security-center
documentationcenter: na
author: memildin
manager: rkarlin
ms.service: security-center
ms.devlang: na
ms.topic: overview
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 02/07/2021
ms.author: memildin
ms.openlocfilehash: 3b5204f1d390388c2dc9a10ac2ca0234f6b0499b
ms.sourcegitcommit: 4b7a53cca4197db8166874831b9f93f716e38e30
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "102101347"
---
# <a name="container-security-in-security-center"></a>Защита контейнеров в Центре безопасности

Центр безопасности Azure создавался специально для защиты контейнеров на платформе Azure.

Центр безопасности может защищать следующие типы ресурсов контейнеров.

| Тип ресурса | Защита, предлагаемая Центром безопасности |
|:--------------------:|-----------|
| ![Служба Kubernetes](./media/security-center-virtual-machine-recommendations/icon-kubernetes-service-rec.png)<br>**Кластеры Службы Azure Kubernetes** | — Непрерывная оценка конфигураций кластеров AKS для контроля ошибок в конфигурации, а также рекомендации по устранению обнаруженных проблем.<br>[Ознакомьтесь с дополнительными сведениями о защите среды на основе рекомендаций по безопасности](#environment-hardening).<br><br>— Защита от угроз для кластеров AKS и узлов Linux. Оповещения о подозрительных действиях предоставляет дополнительный компонент [Azure Defender для Kubernetes](defender-for-kubernetes-introduction.md).<br>[Ознакомьтесь с дополнительными сведениями о защите узлов и кластеров AKS во время выполнения](#run-time-protection-for-aks-nodes-and-clusters).|
| ![Узел контейнеров](./media/security-center-virtual-machine-recommendations/icon-container-host-rec.png)<br>**Узлы контейнеров**<br>(Виртуальные машины с Docker) | — Непрерывная оценка конфигураций кластеров Docker для контроля ошибок в конфигурации, а также рекомендации по устранению обнаруженных проблем, плюс дополнительный компонент [Azure Defender для серверов](defender-for-servers-introduction.md).<br>[Ознакомьтесь с дополнительными сведениями о защите среды на основе рекомендаций по безопасности](#environment-hardening).|
| ![Реестр контейнеров](./media/security-center-virtual-machine-recommendations/icon-container-registry-rec.png)<br>**Реестры ACR (Реестра контейнеров Azure)** | — Средства оценки уязвимостей и управления для образов в реестрах ACR на основе Azure Resource Manager, плюс дополнительный [Azure Defender для реестров контейнеров](defender-for-container-registries-introduction.md).<br>[Ознакомьтесь с дополнительными сведениями о поиске уязвимостей в образах контейнеров](#vulnerability-management---scanning-container-images). |
|||

В этой статье описывается, как применить Центр безопасности в сочетании с дополнительными планами Azure Defender для реестров контейнеров, серверов и Kubernetes, чтобы улучшить, отслеживать и поддерживать безопасность контейнеров и приложений в них.

Вы узнаете, как Центр безопасности помогает соблюдать основные аспекты безопасности контейнеров:

- [управление уязвимостями (сканирование образов контейнеров)](#vulnerability-management---scanning-container-images);
- [усиление защиты среды](#environment-hardening);
- [защита узлов и кластеров AKS во время выполнения](#run-time-protection-for-aks-nodes-and-clusters).

На следующем снимке экрана показана страница инвентаризации активов и несколько типов ресурсов контейнера, которые защищаются Центром безопасности.

:::image type="content" source="./media/container-security/inventory-container-resources.png" alt-text="Ресурсы, связанные с контейнерами, на странице инвентаризации активов Центра безопасности" lightbox="./media/container-security/inventory-container-resources.png":::

## <a name="vulnerability-management---scanning-container-images"></a>Управление уязвимостями (сканирование образов контейнеров)

Чтобы отслеживать образы в реестрах контейнеров Azure на основе Azure Resource Manager, включите [Azure Defender для реестров контейнеров](defender-for-container-registries-introduction.md). Центр безопасности сканирует все образы в реестре, полученные за последние 30 дней, отправленные или импортированные. Предоставляется встроенный сканер Qualys, ведущего поставщика сканирования уязвимостей.

При обнаружении проблем службами Qualys или самого Центра безопасности вы получите уведомления на [панели мониторинга Azure Defender](azure-defender-dashboard.md). Для каждой обнаруженной уязвимости Центр безопасности предоставляет практические рекомендации, а также классификацию серьезности и инструкции по исправлению проблемы. Подробные сведения о рекомендациях Центра безопасности для контейнеров см. в [справочном списке рекомендаций](recommendations-reference.md#recs-compute).

Центр безопасности фильтрует и классифицирует результаты работы сканера. Если образ считается работоспособным, Центр безопасности присваивает ему соответствующий статус. Центр безопасности создает рекомендации по безопасности только для тех образов, в которых есть требующие решения проблемы. Благодаря тому, что Центр безопасности извещает только о наличии проблем, снижается вероятность нежелательных информационных оповещений.

## <a name="environment-hardening"></a>Усиление защиты среды

### <a name="continuous-monitoring-of-your-docker-configuration"></a>Непрерывный мониторинг конфигурации Docker

Центр безопасности Azure выявляет неуправляемые контейнеры, размещенные на виртуальных машинах IaaS Linux или других компьютерах Linux с контейнерами Docker. Центр безопасности постоянно оценивает конфигурации этих контейнеров. Затем он сравнивает их с [эталонным контейнером Docker для Центра Интернет-безопасности (CIS)](https://www.cisecurity.org/benchmark/docker/).

Центр безопасности применяет весь набор правил эталонного Docker для CIS и выдает предупреждения, если контейнеры не соответствуют любому из этих элементов управления. При обнаружении ошибок в конфигурации Центр безопасности создает рекомендации по безопасности. На **странице рекомендаций** Центра безопасности вы можете просмотреть эти рекомендации и устранить проблемы. Тесты производительности CIS не выполняются на экземплярах виртуальных машин под управлением AKS или Databricks.

Дополнительные сведения о соответствующих рекомендациях Центра безопасности, которые могут предоставляться для этой функции, см. в [разделе о вычислениях](recommendations-reference.md#recs-compute) справочной таблицы рекомендаций.

При изучении проблем с безопасностью на виртуальной машине Центр безопасности предоставляет дополнительные сведения о контейнерах на этом компьютере. Сюда входят сведения о версии Docker и количестве образов, выполняемых в узле. 

Чтобы отслеживать неуправляемые контейнеры, размещенные на виртуальных машинах IaaS Linux, включите дополнительный компонент [Azure Defender для серверов](defender-for-servers-introduction.md).


### <a name="continuous-monitoring-of-your-kubernetes-clusters"></a>Непрерывный мониторинг кластеров Kubernetes
Центр безопасности работает в сочетании со службой Azure Kubernetes Service (AKS), которая представляет собой службу оркестрации контейнеров под управлением Майкрософт, предназначенную для разработки и развертывания контейнерных приложений, а также управления ими.

AKS предоставляет средства управления безопасностью и информацию о состоянии безопасности для кластеров. В Центре безопасности эти функции используются для постоянного мониторинга конфигурации кластеров AKS и создания рекомендаций по безопасности, соответствующих отраслевым стандартам.

Вот подробная схема взаимодействия между Центром безопасности Azure, Службой Azure Kubernetes и Политикой Azure.

:::image type="content" source="./media/defender-for-kubernetes-intro/kubernetes-service-security-center-integration-detailed.png" alt-text="Подробная схема взаимодействия между Центром безопасности Azure, Службой Azure Kubernetes и Политикой Azure" lightbox="./media/defender-for-kubernetes-intro/kubernetes-service-security-center-integration-detailed.png":::

Как видите, Центр безопасности собирает и анализирует следующие элементы:

- журналы аудита с сервера API;
- необработанные события безопасности от агента Log Analytics;

    > [!NOTE]
    > Сейчас установка агента Log Analytics в кластерах Службы Azure Kubernetes, работающих в масштабируемых наборах виртуальных машин, не поддерживается.

- сведения о конфигурации кластера из кластера AKS;
- конфигурации рабочих нагрузок из Политики Azure (через **надстройку Политики Azure для Kubernetes**).

Дополнительные сведения о соответствующих рекомендациях Центра безопасности, которые могут предоставляться для этой функции, см. в [разделе о вычислениях](recommendations-reference.md#recs-compute) справочной таблицы рекомендаций.


###  <a name="workload-protection-best-practices-using-kubernetes-admission-control"></a>Рекомендации по защите рабочих нагрузок с использованием средств контроля доступа в Kubernetes

Чтобы получить пакет рекомендаций по защите рабочих нагрузок в контейнерах Kubernetes, установите **надстройку Политики Azure для Kubernetes**. Вы также можете выполнить автоматическое развертывание этой надстройки, как описано в разделе [Включение автоматической подготовки агента и расширений Log Analytics](security-center-enable-data-collection.md#auto-provision-mma). Если для автоматической подготовки для надстройки установлено значение "Вкл.", расширение по умолчанию включено во всех существующих и будущих кластерах (что соответствует требованиям к установке надстройки).

Как указано на [этой странице о Политике Azure для Kubernetes](../governance/policy/concepts/policy-for-kubernetes.md), надстройка расширяет веб-перехватчик [Gatekeeper версии 3](https://github.com/open-policy-agent/gatekeeper) для контроллера доступа  [Open Policy Agent](https://www.openpolicyagent.org/) Контроллеры доступа Kubernetes — это подключаемые модули для расширения возможностей применения кластеров. Подключаемый модуль регистрируется в службе контроля доступа Kubernetes как веб-перехватчик и позволяет централизованно и последовательно применять в большом масштабе усиления и улучшения защиты для кластеров. 

При использовании надстройки для кластера AKS каждый запрос к серверу API Kubernetes будет отслеживаться и сопоставляться с заранее установленным набором рекомендаций, прежде чем попадет в кластер. Вы сможете настроить **принудительное применение** таких рекомендаций и управлять ими для всех будущих рабочих нагрузок. 

Например, можно запретить создание привилегированных контейнеров, и тогда любой запрос такого типа будет блокироваться.

Дополнительные с ведения см. в статье [Защита рабочих нагрузок Kubernetes](kubernetes-workload-protections.md).


## <a name="run-time-protection-for-aks-nodes-and-clusters"></a>Защита узлов и кластеров AKS во время выполнения

[!INCLUDE [AKS in ASC threat protection](../../includes/security-center-azure-kubernetes-threat-protection.md)]



## <a name="next-steps"></a>Дальнейшие действия

В этой обзорной статье вы получили сведения об основных элементах безопасности контейнеров, которые предоставляются Центром безопасности Azure. Дополнительные материалы:

- [Общие сведения об Azure Defender для Kubernetes](defender-for-kubernetes-introduction.md)
- [Общие сведения об Azure Defender для реестров контейнеров](defender-for-container-registries-introduction.md)