---
title: Мониторинг глоссария виртуальных рабочих столов Windows в Azure
description: Глоссарий терминов и концепций, связанных с Azure Monitor для виртуальных рабочих столов Windows.
services: virtual-desktop
author: Heidilohr
ms.service: virtual-desktop
ms.topic: conceptual
ms.date: 03/29/2021
ms.author: helohr
manager: lizross
ms.openlocfilehash: 38f34324a0cda518645f8b9231e08bafbd75cca0
ms.sourcegitcommit: dae6b628a8d57540263a1f2f1cdb10721ed1470d
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/29/2021
ms.locfileid: "105709537"
---
# <a name="azure-monitor-for-windows-virtual-desktop-glossary"></a>Azure Monitor для глоссария виртуальных рабочих столов Windows

В этой статье приводится краткое описание основных терминов и концепций, связанных с Azure Monitor для виртуальных рабочих столов Windows (Предварительная версия).

## <a name="alerts"></a>видны узлы

Все активные Azure Monitor оповещения, настроенные в подписке и классифицированные как [серьезность 0](#severity-0-alerts) , будут отображаться на странице Обзор. Сведения о настройке оповещений см. в статье [реагирование на события с помощью оповещений Azure Monitor](../azure-monitor/alerts/tutorial-response.md).

## <a name="available-sessions"></a>Доступные сеансы

Доступные сеансы показывает количество доступных сеансов в пуле узлов. Служба вычисляет это число, умножая число виртуальных машин (ВМ) на максимальное количество сеансов на виртуальную машину, а затем вычитая общее число сеансов.

## <a name="connection-success"></a>Подключение выполнено

Этот элемент показывает работоспособность подключения. "Успешное подключение" означает, что подключение может подключиться к узлу, как подтверждено стеком на этой виртуальной машине. Сбой соединения означает, что не удалось подключиться к узлу.

## <a name="daily-active-users-dau"></a>Ежедневные активные пользователи (DAU)

Общее число пользователей, которые начали сеанс за последние 24 часа.

## <a name="daily-alerts"></a>Оповещение (день)

Общее число оповещений, активированных каждый день.

## <a name="daily-connections-and-reconnections"></a>Ежедневные подключения и повторные подключения

Общее число запущенных или завершенных подключений и повторное подключение за последние 24 часа.

## <a name="daily-connected-hours"></a>Часы подключения (день)

Общее число часов, затраченных на подключение к сеансу по пользователям за последние 24 часа.

## <a name="diagnostics-and-errors"></a>Диагностика и ошибки

Если в Azure Monitor для виртуального рабочего стола Windows отображается сообщение об ошибке или предупреждение, оно распределяется по трем задачам:

- Тип действия. Эта категория описывает, каким образом эта ошибка относится к диагностике виртуальных рабочих столов Windows. Категории — это действия управления, каналы, подключения, регистрации узлов, ошибки и контрольные точки. Дополнительные сведения об этих категориях см. в статье [использование log Analytics для функции диагностики](diagnostics-log-analytics.md).

- Тип: в этой категории отображается расположение ошибки. 

     - Ошибки, отмеченные как "Service" или "Сервицееррор = TRUE", произошли в службе виртуальных рабочих столов Windows.
     - Ошибки, помеченные как "развертывание" или "Сервицееррор = FALSE", произошли за пределами службы виртуальных рабочих столов Windows.
     - Дополнительные сведения о теге Сервицееррор см. в разделе [распространенные сценарии ошибок](diagnostics-role-service.md#common-error-scenarios).

- Источник. Эта категория предоставляет более конкретное описание того, где произошла ошибка.

     - Диагностика. роль службы, ответственную за действия службы мониторинга и отчетности, позволяющие пользователям наблюдать и диагностировать проблемы развертывания.

     - Рдброкер: роль службы, которая отвечает за управление действиями развертывания, поддержание состояния объектов, проверку подлинности и многое другое.

     - Рдгатевай. роль службы, которая отвечает за обработку сетевого подключения между конечными пользователями и виртуальными машинами.

     - Рдстакк: программный компонент, установленный на виртуальных машинах, чтобы разрешить им взаимодействовать со службой виртуальных рабочих столов Windows.

     - Клиент: программное обеспечение, выполняемое на компьютере конечного пользователя, предоставляющее интерфейс для службы виртуальных рабочих столов Windows. Он отображает список опубликованных ресурсов и размещает удаленный рабочий стол подключение, когда вы сделали выбор.

Каждая проблема диагностики или ошибка включает в себя сообщение с объяснением того, что пошло не так. Дополнительные сведения об устранении ошибок см. в статье [Определение и диагностика проблем с виртуальными рабочими столами Windows](diagnostics-role-service.md).

## <a name="input-delay"></a>Задержка ввода

"Задержка ввода" в Azure Monitor для виртуальных рабочих столов Windows означает, что для каждого сеанса показан счетчик производительности "задержка ввода для каждого процесса". На странице "производительность узла" по адресу [AKA.MS/azmonwvdi](https://portal.azure.com/#blade/Microsoft_Azure_WVD/WvdManagerMenuBlade/workbooks)этот счетчик производительности настроен для отправки отчета службе каждые 30 секунд. Эти интервалы с 30 секундами называются "Samples", а отчет — наихудшим вариантом в этом окне. Значения медианы и P95 соответствуют медианы и 95 процентиль процентиль во всех примерах.

В разделе **задержка ввода по узлу** можно выбрать строку узла сеанса, чтобы отфильтровать все остальные визуальные элементы на странице с этим узлом. Можно также выбрать имя процесса для фильтрации временной задержки ввода с диаграммы времени.

Мы помещаем задержки в следующие категории:

- Хорошее: ниже 150 миллисекунд.
- Приемлемо: 150-500 мс.
- Плохое: 500 – 2000 миллисекунд (менее 2 секунд).
- Плохое: более 2 000 миллисекунд (2 секунды и выше).

Дополнительные сведения о работе счетчика задержки ввода см. в разделе [счетчики производительности задержки ввода данных пользователем](/windows-server/remote/remote-desktop-services/rds-rdsh-performance-counters/).

##  <a name="monthly-active-users-mau"></a>Ежемесячно активные пользователи (MAU)

Общее число пользователей, которые начали сеанс за последние 28 дней. Если данные хранятся в течение 30 дней или меньше, то в периоды, когда доступны данные объемом менее 28 дней, могут отображаться менее ожидаемые значения MAU и подключения.

## <a name="performance-counters"></a>Счетчики производительности

Счетчики производительности показывают производительность компонентов оборудования, операционных систем и приложений.

В следующей таблице перечислены рекомендуемые счетчики производительности и интервалы времени, которые Azure Monitor используются для виртуальных рабочих столов Windows.

|Имя счетчика производительности|"Интервал времени	";|
|---|---|
|Логический диск (C:) \\ Средняя длина очереди диска|30 секунд|
|Логический диск (C:) \\ Среднее время обращения к диску (сек.)|60 секунд|
|Логический диск (C:) \\ Текущая длина очереди диска|30 секунд|
|Объем доступной памяти, \* \\ МБ|30 секунд|
|Память ( \* ) \\ ошибок страниц/с|30 секунд|
|Память ( \* ) \\ страниц/с|30 секунд|
|Память ( \* ) \\ % используем фиксированных байтов|30 секунд|
|Физический диск ( \* ) \\ СР. Длина очереди диска|30 секунд|
|Физический \* диск () \\ Среднее время чтения с диска (с)|30 секунд|
|Физический \* диск () \\ — СР. время обмена (с)|30 секунд|
|Физический \* диск () \\ СР. время записи с диска (сек.)|30 секунд|
|Сведения о процессоре (_Total) \\ % загруженности процессора|30 секунд|
|\*Активные сеансы служб терминалов () \\|60 секунд|
|\* \\ Неактивные сеансы служб терминалов|60 секунд|
|Всего сеансов служб терминалов ( \* ) \\|60 секунд|
|\*Максимальная задержка ввода данных пользователем на процесс ( \* ) \\|30 секунд|
|\*Максимальная задержка входных данных пользователя на сеанс ( \* ) \\|30 секунд|
|\* \\ Текущий RTT-трафик сети RemoteFX ()|30 секунд|
|\* \\ Текущая пропускная способность сети RemoteFX ()|30 секунд|

Дополнительные сведения о чтении счетчиков производительности см. в разделе [Настройка счетчиков производительности](../azure-monitor/agents/data-sources-performance-counters.md).

Дополнительные сведения о счетчиках производительности задержки ввода см. в разделе [счетчики производительности задержки ввода данных пользователем](/windows-server/remote/remote-desktop-services/rds-rdsh-performance-counters/).

## <a name="potential-connectivity-issues"></a>Потенциальные проблемы с подключением

Потенциальные проблемы с подключением показывают узлы, пользователей, опубликованные ресурсы и клиенты с высокой частотой сбоев подключения. После выбора фильтра "отчет по" можно оценить серьезность проблемы, проверив значения в этих столбцах:

- Количество попыток (число попыток соединения)
- Ресурсы (количество опубликованных приложений или настольных компьютеров)
- Узлы (количество виртуальных машин)
- Клиенты

Например, если выбрать фильтр **по пользователю** , можно проверить, попытаются ли попытки подключения каждого пользователя просматриваться в столбце **попытки** .

Если вы заметили, что проблема с подключением охватывает несколько узлов, пользователей, ресурсов или клиентов, скорее всего, проблема затрагивает всю систему. В противном случае это небольшая проблема с более низким приоритетом.

Можно также выбрать записи для просмотра дополнительных сведений. Вы можете просмотреть, какие узлы, ресурсы и клиентские версии были вовлечены в эту задачу. На экране также будут отображаться ошибки, переданные во время попыток подключения.

## <a name="round-trip-time-rtt"></a>Время кругового пути (RTT)

Время приема-передачи (RTT) — это оценка времени приема-передачи соединения между расположением конечного пользователя и регионом Azure узла сеанса. Чтобы узнать, какие расположения имеют наибольшую задержку, найдите нужное расположение в [средстве оценки возможностей виртуальных рабочих столов Windows](https://azure.microsoft.com/services/virtual-desktop/assessment/).

## <a name="session-history"></a>Журнал сеансов

В элементе **сеансы** отображается состояние всех сеансов, подключенных и отключенных. В **бездействующих сеансах** отображаются только отключенные сеансы.

## <a name="severity-0-alerts"></a>Предупреждения серьезности 0

Самые срочные элементы, которые необходимо принять сразу. Если вы не устраните эти проблемы, это может привести к прекращению работы развертывания виртуальных рабочих столов Windows.

## <a name="time-to-connect"></a>Время подключения

Время соединения — это время между началом сеанса пользователем и моментом, когда они считаются входом в службу. Установка новых соединений обычно занимает больше времени, чем восстановление существующих подключений.

## <a name="user-report"></a>Отчет о пользователе

Страница отчет пользователя позволяет просматривать историю подключения конкретного пользователя и диагностические сведения. Каждый отчет пользователя показывает закономерности использования, Отзывы пользователей и ошибки, обнаруженные пользователями во время сеансов. Наиболее мелкие проблемы можно устранить с помощью отзывов пользователей. Если необходимо более подробно изучить, можно также отфильтровать сведения об определенном ИДЕНТИФИКАТОРе подключения или периоде времени.

## <a name="users-per-core"></a>Пользователей на ядро

Число пользователей в каждом ядре виртуальной машины. Отслеживание максимального количества пользователей на ядро с течением времени может помочь определить, выполняется ли согласованность среды на высоком, низком или непостоянном количестве пользователей на ядро. Знание количества активных пользователей поможет эффективно выполнять ресурсы и масштабировать среду.

## <a name="windows-event-logs"></a>Журналы событий Windows

Журналы событий Windows — это источники данных, собираемые агентами Log Analytics на виртуальных машинах Windows. Вы можете получать события из стандартных журналов, таких как система и приложение, а также пользовательские журналы, созданные приложениями, которые необходимо отслеживать.

В следующей таблице перечислены необходимые журналы событий Windows для Azure Monitor для виртуальных рабочих столов Windows.

|Имя события|Тип события|
|---|---|
|Приложение|Ошибка и предупреждение|
|Microsoft-Windows-Терминалсервицес-Ремотеконнектионманажер/администратор|Ошибка, предупреждение и сведения|
|Microsoft-Windows-Терминалсервицес-Локалсессионманажер/эксплуатация|Ошибка, предупреждение и сведения|
|Система|Ошибка и предупреждение|
| Microsoft-Фслогикс-Apps/эксплуатация|Ошибка, предупреждение и сведения|
|Microsoft-Фслогикс-Apps/администратор|Ошибка, предупреждение и сведения|

Дополнительные сведения о журналах событий Windows см. в разделе [свойства записей событий Windows](../azure-monitor/agents/data-sources-windows-events.md#configuring-windows-event-logs).

## <a name="next-steps"></a>Дальнейшие шаги

Чтобы приступить к работе с Azure Monitor для виртуальных рабочих столов Windows, ознакомьтесь со следующими статьями:

- [Использование Azure Monitor для виртуальных рабочих столов Windows для мониторинга развертывания](azure-monitor.md)
- [Azure Monitor для устранения неполадок виртуальных рабочих столов Windows](troubleshoot-azure-monitor.md)

Вы также можете настроить помощник по Azure, чтобы узнать, как разрешить или предотвратить распространенные проблемы. Дополнительные сведения см. в статье [Использование помощника по Azure с виртуальным рабочим столом Windows](azure-advisor.md).

Если вам нужна помощь или у вас возникнут вопросы, ознакомьтесь с нашими материалами сообщества:

- Задавайте вопросы или принимайте предложения в сообщество на [виртуальной рабочем столе Windows течкоммунити](https://techcommunity.microsoft.com/t5/Windows-Virtual-Desktop/bd-p/WindowsVirtualDesktop).
   
- Сведения о том, как оставить отзыв, см. в статьях [Обзор устранения неполадок, обратная связь и поддержка виртуальных рабочих столов Windows](troubleshoot-set-up-overview.md#report-issues).

- Вы также можете оставить отзыв о виртуальном рабочем столе Windows в [центре обратной связи виртуальных рабочих столов Windows](https://support.microsoft.com/help/4021566/windows-10-send-feedback-to-microsoft-with-feedback-hub-app) .
