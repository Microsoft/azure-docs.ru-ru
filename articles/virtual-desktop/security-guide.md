---
title: Рекомендации по обеспечению безопасности виртуальных рабочих столов Windows — Azure
description: Рекомендации по обеспечению безопасности среды виртуальных рабочих столов Windows.
author: heidilohr
ms.topic: conceptual
ms.date: 12/15/2020
ms.author: helohr
manager: lizross
ms.openlocfilehash: cfc980fdabdb9c6e7085088db12754243f133d89
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100581391"
---
# <a name="security-best-practices"></a>Лучшие методики обеспечения безопасности

Виртуальный рабочий стол Windows — это управляемая служба виртуальных рабочих столов, которая включает множество возможностей обеспечения безопасности, позволяющих обеспечить безопасность вашей организации. В развертывании виртуальных рабочих столов Windows корпорация Майкрософт управляет частями служб от имени клиента. Служба имеет множество встроенных дополнительных функций безопасности, таких как обратная связь, что снижает риск, связанный с доступом к удаленным рабочим столам из любого места.

В этой статье описываются дополнительные действия, которые можно предпринять в качестве администратора, чтобы обеспечить безопасность развертываний виртуальных рабочих столов Windows клиентами.

## <a name="security-responsibilities"></a>Обязанности в безопасности

Что делает облачные службы отличными от традиционных локальных инфраструктур виртуальных рабочих столов (Вдис), как они обрабатывали обязанности в безопасности. Например, в традиционном локальном VDI клиент будет отвечать за все аспекты безопасности. Однако в большинстве облачных служб эти обязанности являются общими для клиента и компании.

При использовании виртуального рабочего стола Windows важно понимать, что хотя некоторые компоненты уже защищены для вашей среды, необходимо настроить другие области в соответствии с потребностями безопасности вашей организации.

Ниже приведены требования к безопасности, за которые несет ответственность в развертывании виртуальных рабочих столов Windows.

| Необходимость в безопасности | Является ли клиент ответственным за это? |
|---------------|:-------------------------:|
|Идентификация|Да|
|Устройства пользователей (мобильные и ПК)|Да|
|Безопасность приложений|Да|
|ОС узла сеансов|Да|
|Конфигурация развертывания|Да|
|Элементы управления сетью|Да|
|Плоскость управления виртуализацией|Нет|
|Физические узлы|Нет|
|Физическая сеть|Нет|
|Физический центр обработки данных|Нет|

Требования безопасности, которым не отвечает клиент, обрабатываются корпорацией Майкрософт.

## <a name="azure-security-best-practices"></a>Рекомендации по обеспечению безопасности в Azure

Виртуальный рабочий стол Windows — это служба в Azure. Чтобы обеспечить максимальную безопасность развертывания виртуальных рабочих столов Windows, необходимо также обеспечить безопасность окружающей инфраструктуры и области управления Azure. Чтобы защитить инфраструктуру, подумайте, как виртуальный рабочий стол Windows соответствует вашей крупной экосистеме Azure. Дополнительные сведения о экосистеме Azure см. в статье рекомендации [и шаблоны по обеспечению безопасности в Azure](../security/fundamentals/best-practices-and-patterns.md).

В этом разделе описываются рекомендации по обеспечению безопасности экосистемы Azure.

### <a name="enable-azure-security-center"></a>включение центра безопасности Azure;

Мы рекомендуем включить стандарт центра безопасности Azure для подписок, виртуальных машин, хранилищ ключей и учетных записей хранения.

С помощью центра безопасности Azure Standard вы можете:

* Управление уязвимостями.
* Оцените соответствие общим платформам, например PCI.
* Усилить общую безопасность вашей среды.

Дополнительные сведения см. в статье подключение [подписки Azure к центру безопасности Standard](../security-center/security-center-get-started.md).

### <a name="improve-your-secure-score"></a>Улучшение результатов оценки безопасности

Оценка безопасности предоставляет рекомендации и практические рекомендации по повышению общей безопасности. Эти рекомендации определяются приоритетом, чтобы помочь вам выбрать наиболее важные из них, а параметры быстрого исправления помогают быстро устранить потенциальные уязвимости. Эти рекомендации также обновляются с течением времени, позволяя вам своевременно получать актуальные данные о том, как обеспечить безопасность вашей среды. Дополнительные сведения см. в разделе [улучшение оценки безопасности в центре безопасности Azure](../security-center/secure-score-security-controls.md).

## <a name="windows-virtual-desktop-security-best-practices"></a>Рекомендации по обеспечению безопасности виртуальных рабочих столов Windows

Виртуальный рабочий стол Windows имеет множество встроенных средств управления безопасностью. В этом разделе вы узнаете об элементах управления безопасностью, которые можно использовать для обеспечения безопасности пользователей и данных.

### <a name="require-multi-factor-authentication"></a>Требование многофакторной идентификации

Требовать многофакторную проверку подлинности для всех пользователей и администраторов в виртуальных рабочих столах Windows повышает безопасность всего развертывания. Дополнительные сведения см. в статье [Включение многофакторной идентификации Azure AD для виртуального рабочего стола Windows](set-up-mfa.md).

### <a name="enable-conditional-access"></a>Включить условный доступ

Включение [условного доступа](../active-directory/conditional-access/overview.md) позволяет управлять рисками перед предоставлением пользователям доступа к среде виртуальных рабочих столов Windows. При принятии решения о том, какие пользователи должны предоставлять доступ к, рекомендуется также определить, кто является пользователем, как они входят в систему и какое устройство они используют.

### <a name="collect-audit-logs"></a>Сбор журналов аудита

Включение сбора журналов аудита позволяет просматривать действия пользователя и администратора, связанные с виртуальным рабочим столом Windows. Ниже приведены некоторые примеры основных журналов аудита.

-   [Журнал действий Azure](../azure-monitor/essentials/activity-log.md)
-   [Журнал действий Azure Active Directory](../active-directory/reports-monitoring/concept-activity-logs-azure-monitor.md)
-   [Azure Active Directory](../active-directory/fundamentals/active-directory-whatis.md)
-   [Узлы сеансов](../azure-monitor/agents/agent-windows.md)
-   [Журнал диагностики виртуальных рабочих столов Windows](../virtual-desktop/diagnostics-log-analytics.md)
-   [Журналы Key Vault](../key-vault/general/logging.md)

### <a name="use-remoteapps"></a>Использование RemoteApps

При выборе модели развертывания можно предоставить удаленным пользователям доступ ко всем виртуальным рабочим столам или только к выбранным приложениям. Удаленные приложения (RemoteApp) предоставляют простой опыт работы пользователя с приложениями на их виртуальных рабочих столах. RemoteApp уменьшает риск, позволяя пользователю работать с подмножеством удаленного компьютера, предоставленного приложением.

### <a name="monitor-usage-with-azure-monitor"></a>Мониторинг использования с помощью Azure Monitor

Отслеживайте использование и доступность службы виртуальных рабочих столов Windows с помощью [Azure Monitor](https://azure.microsoft.com/services/monitor/). Рассмотрите возможность создания [оповещений о работоспособности службы](../service-health/alerts-activity-log-service-notifications-portal.md) для службы виртуальных рабочих столов Windows, чтобы получать уведомления при возникновении события, влияющего на работу службы.

## <a name="session-host-security-best-practices"></a>Рекомендации по обеспечению безопасности узла сеансов

Узлы сеансов — это виртуальные машины, которые работают в подписке Azure и виртуальной сети. Общая безопасность развертывания виртуальных рабочих столов Windows зависит от средств управления безопасностью, которые вы размещаете на узлах сеансов. В этом разделе описываются рекомендации по обеспечению безопасности узлов сеансов.

### <a name="enable-screen-capture-protection-preview"></a>Включить защиту экрана (Предварительная версия)

Функция защиты экрана позволяет запретить запись конфиденциальной информации в конечные точки клиента. При включении этой функции удаленное содержимое будет автоматически заблокировано или скрыто на снимках экрана и общих папках на экране. Она также будет скрыта от вредоносных программ, которые могут постоянно записывать содержимое экрана. Мы рекомендуем отключить перенаправление буфера обмена, чтобы предотвратить копирование удаленного содержимого в конечные точки при использовании этой функции.

Эта политика применяется на уровне узла путем настройки раздела реестра. Чтобы включить эту политику, откройте PowerShell и задайте раздел реестра **фенаблескринкаптурепротектион** , выполнив следующий командлет:

```powershell
reg add "HKLM\SOFTWARE\Policies\Microsoft\Windows NT\Terminal Services" /v fEnableScreenCaptureProtection /t REG_DWORD /d 1
```

Чтобы протестировать эту новую функцию, выполните следующие действия.

- Убедитесь, что пулы узлов подготовлены в среде проверки.
- Убедитесь, что вы скачали и установили Настольный клиент Windows версии 1.2.1526 или более поздней.

>[!NOTE]
>На этапе предварительной версии эту функцию поддерживают только полные подключения к рабочему столу из конечных точек Windows 10.


### <a name="enable-endpoint-protection"></a>Включение Endpoint Protection

Для защиты развертывания от известных вредоносных программ рекомендуется включить Endpoint Protection на всех узлах сеансов. Можно использовать антивирусную программу из защитника Windows или сторонние программы. Дополнительные сведения см. [в разделе руководств по развертыванию антивирусной программы "Защитник Windows" в среде VDI](/windows/security/threat-protection/windows-defender-antivirus/deployment-vdi-windows-defender-antivirus).

Для таких решений профилирования, как Фслогикс или другие решения, которые подключаются к VHD-файлам, рекомендуется исключить расширения VHD-файлов.

### <a name="install-an-endpoint-detection-and-response-product"></a>Установка продукта для обнаружения и ответа конечной точки

Мы рекомендуем установить продукт обнаружения конечных точек и ответа (ЕДР), чтобы обеспечить расширенные возможности обнаружения и реагирования. Для серверных операционных систем с включенным [центром безопасности Azure](../security-center/security-center-services.md) установка продукта ЕДР будет разворачивать ATP в защитнике. Для клиентских операционных систем можно развернуть [ATP](/windows/security/threat-protection/microsoft-defender-atp/onboarding) или сторонний продукт для этих конечных точек.

### <a name="enable-threat-and-vulnerability-management-assessments"></a>Включение оценки угроз и управления уязвимостью

Определение уязвимостей программного обеспечения, существующих в операционных системах и приложениях, крайне важно для обеспечения безопасности среды. Центр безопасности Azure помогает выявление проблемных точек с помощью оценки уязвимостей для серверных операционных систем. Вы также можете использовать пакет ATP для защитника, который обеспечивает управление угрозами и уязвимостью для операционных систем настольных компьютеров. Вы также можете использовать сторонние продукты, если это так, но мы рекомендуем использовать центр безопасности Azure и ATP в защитнике.

### <a name="patch-software-vulnerabilities-in-your-environment"></a>Исправление уязвимостей программного обеспечения в вашей среде

Определив уязвимость, необходимо исправить ее. Это относится также к виртуальным средам, в том числе к работающим операционным системам, приложениям, развернутым внутри них, и изображениям, из которых создаются новые компьютеры. Выполните обмен сообщениями с уведомлениями поставщика и своевременно примените исправления. Мы рекомендуем ежемесячное обновление базовых образов, чтобы обеспечить максимально надежную защиту новых компьютеров.

### <a name="establish-maximum-inactive-time-and-disconnection-policies"></a>Установка максимального неактивного времени и политик отключения

Подписывание пользователей, когда они неактивны, сохраняет ресурсы и предотвращает доступ неавторизованных пользователей. Мы рекомендуем использовать время ожидания для балансировки производительности пользователей и использования ресурсов. Для пользователей, взаимодействующих с приложениями без отслеживания состояния, рассмотрите более агрессивные политики, которые отключают компьютеры и сохраняют ресурсы. Отключение долго выполняющихся приложений, которые продолжают выполняться, если пользователь бездействует (например, имитация или визуализация САПР), может прервать работу пользователя и даже потребует перезагрузки компьютера.

### <a name="set-up-screen-locks-for-idle-sessions"></a>Настройка блокировки экрана для бездействующих сеансов

Можно предотвратить нежелательный доступ к системе, настроив виртуальный рабочий стол Windows для блокировки экрана компьютера во время простоя и требования проверки подлинности для разблокировки.

### <a name="establish-tiered-admin-access"></a>Установите многоуровневый административный доступ

Мы рекомендуем не предоставлять пользователям доступ к виртуальным рабочим столам через администратора. Если вам нужны пакеты программного обеспечения, рекомендуется сделать их доступными через такие служебные программы управления конфигурацией, как Microsoft Endpoint Manager. В среде с несколькими сеансами рекомендуется не разрешать пользователям устанавливать программное обеспечение напрямую.

### <a name="consider-which-users-should-access-which-resources"></a>Определите, какие пользователи должны иметь доступ к каким ресурсам

Рассмотрите узлы сеансов как расширение существующего развертывания настольных систем. Мы рекомендуем управлять доступом к сетевым ресурсам так же, как и для других настольных систем в вашей среде, например, используя сегментацию и фильтрацию сети. По умолчанию узлы сеансов могут подключаться к любому ресурсу в Интернете. Существует несколько способов ограничения трафика, включая использование брандмауэра Azure, виртуальных сетевых устройств или прокси-серверов. Если требуется ограничить трафик, убедитесь, что вы добавили соответствующие правила, чтобы виртуальный рабочий стол Windows мог работать правильно.

### <a name="manage-office-pro-plus-security"></a>Управление безопасностью Office Pro Plus

Помимо защиты узлов сеансов, важно также защищать приложения, работающие внутри них. Office Pro Plus — одно из наиболее распространенных приложений, развернутых на узлах сеансов. Для повышения безопасности развертывания Office рекомендуется использовать [Помощник по политике безопасности](/DeployOffice/overview-of-security-policy-advisor) для Microsoft 365 приложений для предприятия. Это средство определяет политики, которые можно применить к развертыванию для обеспечения большей безопасности. Помощник по политике безопасности также рекомендует политики в зависимости от влияния на безопасность и производительность.

### <a name="other-security-tips-for-session-hosts"></a>Другие советы по безопасности для узлов сеансов

Ограничиваются возможностями операционной системы, можно усилить безопасность узлов сеансов. Вот несколько вещей, которые можно выполнить.

- Управление перенаправлением устройств путем перенаправления дисков, принтеров и USB-устройств на локальное устройство пользователя в сеансе удаленного рабочего стола. Рекомендуется оценить требования к безопасности и проверить, должны ли эти функции быть отключенными.

- Ограничьте доступ проводника Windows, скрывая сопоставления локальных и удаленных дисков. Это не позволяет пользователям обнаруживать нежелательные сведения о конфигурации и пользователях системы.

- Избегайте прямого доступа по протоколу RDP к узлам сеансов в вашей среде. Если требуется прямой доступ по протоколу RDP для администрирования или устранения неполадок, включите [JIT-](../security-center/security-center-just-in-time.md) доступ, чтобы ограничить потенциальную поверхность атаки на узле сеансов.

- Предоставьте пользователям ограниченные разрешения при доступе к локальным и удаленным файловым системам. Разрешения можно ограничить, убедившись, что локальные и удаленные файловые системы используют списки управления доступом с минимальными привилегиями. Таким образом пользователи могут получить доступ только к тем ресурсам, которые им нужны, и не могут изменять или удалять критически важные ресурсы.

- Предотвращение выполнения нежелательных программ на узлах сеансов. Вы можете включить блокировку приложений для дополнительной защиты на узлах сеансов, гарантируя, что только разрешенные приложения могут выполняться на узле.

## <a name="next-steps"></a>Дальнейшие шаги

Сведения о том, как включить многофакторную проверку подлинности, см. в разделе [Настройка многофакторной](set-up-mfa.md)проверки подлинности.