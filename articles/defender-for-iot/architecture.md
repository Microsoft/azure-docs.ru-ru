---
title: Архитектура защитника Azure для Интернета вещей
description: Узнайте о службе "защитник Azure" для архитектуры IoT и информационном потоке.
services: defender-for-iot
ms.service: defender-for-iot
documentationcenter: na
author: shhazam-ms
manager: rkarlin
editor: ''
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 1/13/2021
ms.author: shhazam
ms.openlocfilehash: f3239434a7ba737bc9323bc4f383afd794800db1
ms.sourcegitcommit: 2bd0a039be8126c969a795cea3b60ce8e4ce64fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/14/2021
ms.locfileid: "98201487"
---
# <a name="azure-defender-for-iot-architecture"></a>Архитектура защитника Azure для Интернета вещей

В этой статье описывается архитектура функциональной системы для решения "защитник для Интернета вещей". Защитник Azure для Интернета вещей предлагает два набора возможностей в соответствии с потребностями вашей среды, бесагентным решением для организаций и решением на основе агентов для построителей устройств.

## <a name="agentless-solution-for-organizations"></a>Бесагентное решение для организаций
### <a name="defender-for-iot-components"></a>Защитник для компонентов IoT

Защитник для IoT подключается как к облаку Azure, так и к локальным компонентам. Решение предназначено для масштабируемости в крупных и географически распределенных средах с несколькими удаленными расположениями. Это решение позволяет реализовать многоуровневую распределенную архитектуру по странам, регионам, подразделениям или зонам. 

Защитник Azure для IoT включает следующие компоненты: 

**Развертывания, подключенные к облаку**

- Защитник Azure для виртуальной машины или устройства датчика IoT
- портал Azure для управления облаком и интеграции с Azure Sentinel
- Локальная консоль управления для управления локальным сайтом
- Встроенный агент безопасности (необязательно)

**Развертывания Air — гаппед (вне сети)**

- Защитник Azure для виртуальной машины или устройства датчика IoT
- Локальная консоль управления для управления локальным сайтом

:::image type="content" source="./media/architecture/defender-iot-security-architecture-v3.png" alt-text="Архитектура защитника для Интернета вещей.":::

### <a name="azure-defender-for-iot-sensors"></a>Защитник Azure для датчиков IoT

Защитник для датчиков IoT обнаруживает и постоянно отслеживает сетевые устройства. Датчики собираются сетевой трафик ICS с помощью пассивного мониторинга (без агента) в IoT и на устройствах. 
 
Специально разработанная для сетей IoT и в сетях. Технология без агента обеспечивает глубокую видимость Интернета вещей и риск в течение нескольких минут подключения к сети. Оно оказывает отрицательное влияние на производительность сети и сетевых устройств из-за его неограниченного подхода к анализу сетевого трафика (НТА). 
 
Используя патенты, средства анализа поведения с учетом особенностей IoT и осведомленности и глубокая проверка пакетов уровня 7 (DPI), она позволяет анализировать не только традиционные решения на основе подписей, но и сразу же обнаруживать сложные угрозы Интернета вещей и угроз (например, вредоносные программы без файлов), основанные на аномальных или несанкционированных действиях. 
  
Защитник для датчиков Интернета вещей подключается к порту SPAN или к сети, и сразу же начинает проdpi в Интернете вещей и сетевому трафику. 
 
Сбор данных, обработка, анализ и оповещения происходят непосредственно на датчике. Это идеально подходит для расположений с низкой пропускной способностью или подключением с высокой задержкой, поскольку в консоль управления передаются только метаданные.

Датчик включает пять ядер обнаружения аналитики. Обработчики запускают оповещения на основе анализа трафика в режиме реального времени и предварительно записанного. Доступны следующие модули: 

#### <a name="protocol-violation-detection-engine"></a>Подсистема обнаружения нарушений Протокола
Механизм обнаружения нарушений протокола определяет использование структур пакетов и значений полей, которые нарушают спецификацию протокола ICS, например: Modbus Exception и инициацию устаревших предупреждений о коде функции.

#### <a name="policy-violation-detection-engine"></a>Подсистема обнаружения нарушений политики
С помощью машинного обучения подсистема обнаружения нарушений политики предупреждает пользователей о любых отклонениях от базового поведения, таких как незаконное использование конкретных кодов функций, доступ к конкретным объектам или изменение конфигурации устройства. Например: Делтав Software Version Changed и несанкционированные оповещения о программировании. В частности, подсистема нарушений политики моделирует сети ICS как детерминированные последовательности состояний и переходов — с помощью запатентованного метода, именуемого моделированием промышленного конечного состояния (ИФСМ). Механизм обнаружения нарушений политики устанавливает базовые показатели сетей ICS, поэтому для платформы требуется более короткий период обучения для создания базовых показателей сети, чем универсальные математические подходы или аналитика, изначально разработанные для ИТ, а не для сетей.

#### <a name="industrial-malware-detection-engine"></a>Модуль обнаружения вредоносных программ
Промышленный механизм обнаружения вредоносных программ определяет поведение, которое указывает на наличие известных вредоносных программ, таких как Conficker, черная энергия, Хавекс, WannaCry, Нотпетя и Тритон. 

#### <a name="anomaly-detection-engine"></a>Подсистема обнаружения аномалий
Подсистема обнаружения аномалий обнаруживает необычное взаимодействие и поведение компьютера-компьютера (M2M). При моделировании сетей ICS в виде детерминированных последовательностей состояний и переходов платформа требует более короткого периода обучения, чем универсальные математические подходы или аналитика, изначально разработанная для него, а не. Он также обнаруживает аномалии быстрее, с минимальными ложными срабатываниями. Предупреждения подсистемы обнаружения аномалий включают чрезмерные попытки входа в систему SMB, и программа "переводит" обнаружила предупреждения.

#### <a name="operational-incident-detection"></a>Обнаружение рабочих инцидентов
Обнаружение рабочих инцидентов обнаруживает проблемы с работоспособностью, например периодическое подключение, которое может указывать на ранние признаки сбоя оборудования. Например, устройство считается отключенным (не отвечает), а команда "предотвращать S7" от компании Siemens отправила оповещения.

### <a name="management-consoles"></a>Консоли управления
Управление защитником Azure для Интернета вещей в гибридных средах осуществляется с помощью двух порталов управления: 
- Консоль датчика
- Локальная консоль управления
- Портал Azure

### <a name="sensor-console"></a>Консоль датчика
Обнаружение датчиков отображается в консоли датчика, где их можно просматривать, исследовать и анализировать в карте сети, инвентаризации активов и в обширном диапазоне отчетов, например отчеты об оценке рисков, запросы интеллектуального анализа данных и векторы атак. Кроме того, консоль можно использовать для просмотра и обработки угроз, обнаруженных подсистемами датчиков, переадресации информации в партнерские системы, управления пользователями и т. д.

:::image type="content" source="./media/architecture/sensor-console-v2.png" alt-text="Консоль датчика для центра Интернета вещей, защитник":::

### <a name="on-premises-management-console"></a>Локальная консоль управления
Локальная консоль управления позволяет операторам центра безопасности (SOC) управлять и анализировать оповещения, Объединенные из нескольких датчиков, в одну панель мониторинга, а также предоставляет общее представление о работоспособности сетей.

Эта архитектура обеспечивает полное унифицированное представление сети на уровне SOC, оптимизированную обработку предупреждений и управление сетевой безопасностью, гарантируя тем самым, что управление принятием решений и рисками остается безупречным.

Помимо многопользовательской аренды, мониторинга, анализа данных и удаленного управления датчиком, консоль управления предоставляет дополнительные средства обслуживания системы (такие как исключение предупреждений) и полностью настраиваемые функции отчетов для каждого из удаленных устройств. Эта масштабируемая архитектура поддерживает локальное управление на уровне сайта, на уровне зоны и глобальном управлении в SOC.

Консоль управления можно развернуть для конфигурации высокого уровня доступности, которая предоставляет консоль архивации, которая периодически получает резервные копии всех файлов конфигурации, необходимых для восстановления. В случае сбоя основной консоли устройства управления локального сайта автоматически отключаются для синхронизации с консолью резервного копирования, чтобы поддерживать доступность без прерывания.

Тесная интеграция с рабочими процессами SOC и запуск книг позволяет легко определять приоритеты действий по устранению рисков и взаимной корреляции угроз.

- Целостность — сокращение сложности с помощью единой унифицированной платформы для управления активами, управления рисками и уязвимостью, а также мониторинга угроз с реагированием на инциденты.

- Агрегирование и корреляция — отображение, агрегирование и анализ данных и оповещений, собранных со всех сайтов.

- Управление всеми датчиками — Настройка и мониторинг всех датчиков из одного места.

   :::image type="content" source="media/updates/alerts-and-site-management-v2.png" alt-text="Управляйте всеми своими оповещениями и информацией.":::

### <a name="azure-portal"></a>Портал Azure

Защитник для портала IoT в Azure поможет вам:

- Приобретение устройств решения

- Установка и обновление программного обеспечения
- Подключение датчиков к Azure
- Обновление пакетов аналитики угроз

## <a name="agent-based-solution-for-device-builders"></a>Решение на основе агента для разработчиков устройств

### <a name="embedded-security-agent-built-in-mode"></a>Встроенный агент безопасности: встроенный режим

В **встроенном** режиме защитник для Интернета вещей включается, когда вы включаете параметр **безопасности** в центре Интернета вещей. Поддержка мониторинга в реальном времени, рекомендации и оповещения. встроенный режим обеспечивает одношаговую видимость устройств и защиту от несоответствий. В режиме сборки не требуется установка агента на каких-либо устройствах и использование расширенной аналитики в зарегистрированных операциях для анализа и защиты устройства "поле" и центра Интернета вещей.

### <a name="embedded-security-agent-enhanced-mode"></a>Встроенный агент безопасности: Расширенный режим

В **расширенном** режиме после включения параметра **безопасности** в центре Интернета вещей и установки защитника для агентов устройств IOT на устройствах агенты собирают, объединяют и анализируют необработанные события безопасности с ваших устройств. Необработанные события безопасности могут включать IP-подключения, создание процессов, имена входа пользователей и другие сведения, относящиеся к безопасности. Защитник для устройств IoT также обрабатывает агрегирование событий, чтобы помочь избежать высокой пропускной способности сети. Агенты обеспечивают широкие возможности настройки, позволяя использовать их для конкретных задач, например для отправки только важной информации по быстрому соглашению об уровне обслуживания или для статистической обработки обширных сведений о безопасности и контекста в крупных сегментах, избегая более высоких затрат на обслуживание.

Агенты устройств и другие приложения используют **пакет SDK отправки сообщений безопасности Azure** для отправки сведений о безопасности в центр Интернета вещей Azure. Центр Интернета вещей получает эти сведения и перенаправляет их в службу "защитник для Интернета вещей".

После включения защитника для службы IoT в дополнение к перенаправленным данным центр Интернета вещей также отправляет все внутренние данные для анализа в защитнике для Интернета вещей. Эти данные включают в себя журналы операций в облаке устройства, удостоверения устройств и конфигурацию концентратора. Все эти сведения помогут создать конвейер для аналитики для центра Интернета вещей.

Защитник для конвейера аналитики центра Интернета вещей также получает дополнительные потоки аналитики угроз из различных источников, входящих в состав партнеров Майкрософт и Майкрософт. Защитник для всего конвейера аналитики для Интернета вещей работает с каждой пользовательской конфигурацией, сделанной в службе (например, пользовательскими оповещениями и использованием пакета SDK отправки сообщений безопасности).

С помощью конвейера аналитики защитник для Интернета вещей объединяет все потоки информации, чтобы создать практические рекомендации и оповещения. Конвейер содержит как настраиваемые правила, созданные исследователими безопасности, так и их эксперты, а также модели машинного обучения, которые ищут отклонения от стандартных поведений устройств и анализа рисков.

Сведения о защитнике и предупреждениях IoT (выходные данные конвейера аналитики) записываются в Log Analytics рабочей области каждого клиента. Включение необработанных событий в рабочую область, а также оповещений и рекомендаций обеспечивает углубленное расследование и запросы, используя точные сведения об обнаруженных подозрительных действиях.

:::image type="content" source="media/architecture/micro-agent-architecture.png" alt-text="Архитектура Micro Agent.":::

## <a name="see-also"></a>См. также раздел

[Вопросы и ответы о защитнике для IoT](resources-frequently-asked-questions.md)

[Требования к системе](quickstart-system-prerequisites.md)
