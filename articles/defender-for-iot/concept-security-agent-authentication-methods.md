---
title: Методы проверки подлинности агента безопасности
description: Узнайте о различных методах проверки подлинности, доступных при использовании защитника для службы IoT.
services: defender-for-iot
ms.service: defender-for-iot
documentationcenter: na
author: shhazam-ms
manager: rkarlin
editor: ''
ms.devlang: na
ms.topic: conceptual
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 01/24/2021
ms.author: shhazam
ms.openlocfilehash: aa5a8a842a750e44d4beeb915008f86c6b5bbb70
ms.sourcegitcommit: 4784fbba18bab59b203734b6e3a4d62d1dadf031
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/08/2021
ms.locfileid: "99809258"
---
# <a name="security-agent-authentication-methods"></a>Методы проверки подлинности агента безопасности

В этой статье описываются различные методы проверки подлинности, которые можно использовать с агентом Азуреиотсекурити для проверки подлинности в центре Интернета вещей.

Для каждого устройства, подключенного к защитнику для IoT в центре Интернета вещей, требуется модуль безопасности. Для проверки подлинности устройства защитник для Интернета вещей может использовать один из двух способов. Выберите метод, который лучше подходит для существующего решения IoT.

> [!div class="checklist"]
> * Секуритимодуле, параметр
> * Параметр устройства

## <a name="authentication-methods"></a>Методы проверки подлинности

Два метода защитника Азуреиотсекурити для агента Интернета вещей выполняют проверку подлинности:

- Режим проверки подлинности **секуритимодуле**<br>
Проверка подлинности агента выполняется с помощью удостоверения модуля безопасности независимо от удостоверения устройства.
Используйте этот тип проверки подлинности, если вы хотите, чтобы агент безопасности использовал выделенный метод проверки подлинности через модуль безопасности (только симметричный ключ).

- Режим проверки подлинности **устройства**<br>
В этом методе агент безопасности сначала выполняет проверку подлинности с удостоверением устройства. После первоначальной проверки подлинности агент защитника для IoT **выполняет вызов в** центре Интернета вещей, используя REST API с данными проверки подлинности устройства. Затем защитник для агента Интернета вещей запрашивает метод проверки подлинности модуля безопасности и данные из центра Интернета вещей. На последнем шаге агент защитник для IoT выполняет проверку подлинности для модуля защитник для IoT.

Используйте этот тип проверки подлинности, если вы хотите, чтобы агент безопасности повторно использовал существующий метод проверки подлинности устройства (самозаверяющий сертификат или симметричный ключ).

Дополнительные сведения о настройке см. в разделе [Параметры установки агента безопасности](#security-agent-installation-parameters) .

## <a name="authentication-methods-known-limitations"></a>Известные ограничения методов проверки подлинности

- Режим проверки подлинности **секуритимодуле** поддерживает только проверку подлинности с симметричным ключом.
- CA-Signed сертификат не поддерживается режимом проверки подлинности **устройства** .

## <a name="security-agent-installation-parameters"></a>Параметры установки агента безопасности

При [развертывании агента безопасности](how-to-deploy-agent.md)в качестве аргументов должны быть предоставлены сведения о проверке подлинности.
Эти аргументы описаны в следующей таблице.

|Имя параметра Linux | Имя параметра Windows | Сокращенный параметр |Описание|Параметры|
|---------------------|---------------|---------|---------------|---------------|
|Проверка подлинности — удостоверение|аусентикатионидентити|ауи|Удостоверение проверки подлинности| **Секуритимодуле** или **устройство**|
|authentication-method|AuthenticationMethod|аум|Метод проверки подлинности|**SymmetricKey** или **SelfSignedCertificate**|
|путь к файлу|FilePath|f|Абсолютный полный путь к файлу, содержащему сертификат или симметричный ключ| |
|имя узла|HostName|HN|Полное доменное имя центра Интернета вещей|Пример: ContosoIotHub.azure-devices.net|
|идентификатор устройства|DeviceId|Di|Идентификатор устройства|Пример: MyDevice1|
|тип сертификата-Location|цертификателокатионкинд|CL|Расположение хранилища сертификатов|**Локальный_файл** или **магазин**|
|

При использовании скрипта установки агента безопасности следующая конфигурация выполняется автоматически. Чтобы изменить проверку подлинности агента безопасности вручную, измените файл конфигурации.

## <a name="change-authentication-method-after-deployment"></a>Изменение метода проверки подлинности после развертывания

При развертывании агента безопасности с помощью скрипта установки автоматически создается файл конфигурации.

Чтобы изменить методы проверки подлинности после развертывания, необходимо вручную изменить файл конфигурации.

### <a name="c-based-security-agent"></a>Агент безопасности на основе C#

Измените _Authentication.config_ со следующими параметрами:

```xml
<Authentication>
  <add key="deviceId" value=""/>
  <add key="gatewayHostname" value=""/>
  <add key="filePath" value=""/>
  <add key="type" value=""/>
  <add key="identity" value=""/>
  <add key="certificateLocationKind" value="" />
</Authentication>
```

### <a name="c-based-security-agent"></a>Агент безопасности на основе C

Измените _LocalConfiguration.js_ со следующими параметрами:

```json
"Authentication" : {
    "Identity" : "",
    "AuthenticationMethod" : "",
    "FilePath" : "",
    "DeviceId" : "",
    "HostName" : ""
}
```

## <a name="see-also"></a>См. также

- [Обзор агентов безопасности](security-agent-architecture.md)
- [Развертывание агента безопасности](how-to-deploy-agent.md)
- [Доступ к необработанным данным безопасности](how-to-security-data-access.md)
