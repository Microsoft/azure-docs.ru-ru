---
title: Настройка мониторинга SNMP MIB
description: Мониторинг работоспособности датчика можно выполнить с помощью SNMP. Датчик реагирует на SNMP-запросы, отправленные с полномочного сервера мониторинга.
author: shhazam-ms
manager: rkarlin
ms.author: shhazam
ms.date: 12/14/2020
ms.topic: how-to
ms.service: azure
ms.openlocfilehash: e0ae029323d5b64288c5e61ea28a494c1106a53f
ms.sourcegitcommit: 8be279f92d5c07a37adfe766dc40648c673d8aa8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/31/2020
ms.locfileid: "97842034"
---
# <a name="set-up-snmp-mib-monitoring"></a>Настройка мониторинга SNMP MIB

Мониторинг работоспособности датчика можно выполнять с помощью протокола SNMP. Датчик реагирует на SNMP-запросы, отправленные с полномочного сервера мониторинга. Монитор SNMP периодически опрашивает идентификаторы OID датчика (до 50 раз в секунду).

Поддерживаемыми SNMP версиями являются SNMP v2 или SNMP v3. Протокол SNMP использует UDP в качестве транспортного протокола с портом 161 (SNMP).

Прежде чем приступить к настройке мониторинга SNMP, необходимо открыть порт UDP 161 в брандмауэре.

## <a name="oids"></a>OID

| Консоль управления и датчик | OID | Формат | Описание |
|--|--|--|--|
| Имя устройства | 1.3.6.1.2.1.1.5.0 | СТРОКУ | Имя устройства для локальной консоли управления |
| Vendor | 1.3.6.1.2.1.1.4.0 | СТРОКУ | Служба поддержки Майкрософт (support.microsoft.com) |
| Платформа | 1.3.6.1.2.1.1.1.0 | СТРОКУ | Датчик или локальная консоль управления |
| Серийный номер | 1.3.6.1.4.1.9.9.53313.1 | СТРОКУ | Строка, используемая лицензией |
| Версия программного обеспечения | 1.3.6.1.4.1.9.9.53313.2 | СТРОКУ | Кссенсе полная версия строки и управления Строка полной версии |
| Использование ЦП | 1.3.6.1.4.1.9.9.53313.3.1 | ЗНАЧЕНИЕ GAUGE32 | Признак нулевого значения в 100 |
| Температура ЦП | 1.3.6.1.4.1.9.9.53313.3.2 | СТРОКУ | Индикатор Цельсия для от нуля до 100 на основе входных данных Linux |
| Использование памяти | 1.3.6.1.4.1.9.9.53313.3.3 | ЗНАЧЕНИЕ GAUGE32 | Признак нулевого значения в 100 |
| Занято места на диске | 1.3.6.1.4.1.9.9.53313.3.4 | ЗНАЧЕНИЕ GAUGE32 | Признак нулевого значения в 100 |
| Состояние службы | 1.3.6.1.4.1.9.9.53313.5 | СТРОКУ | В сети или вне сети, если один из четырех важных компонентов не работает |
| Пропускная способность | Вне области действия для 2,4 |  | Пропускная способность, полученная для каждого интерфейса монитора в Кссенсе |

   - Несуществующие ключи реагируют на значение null, HTTP 200 на основе [Stack overflow](https://stackoverflow.com/questions/51419026/querying-for-non-existing-record-returns-null-with-http-200).
    
   - Связанные с оборудованием MIB (загрузка ЦП, температура ЦП, использование памяти, использование диска) должны проверяться на всех архитектурах и физических датчиках. Ожидается, что температура ЦП на виртуальных машинах будет неприменима.

Можно скачать журнал, содержащий все SNMP-запросы, получаемые датчиком, включая данные подключения и необработанные данные из пакета.

Определение мониторинга работоспособности SNMP v2:

1. В боковом меню выберите **Параметры системы**.

2. В области **Active Discovery** выберите **мониторинг SNMP MIB** :::image type="icon" source="media/how-to-set-up-snmp-mib-monitoring/snmp-icon.png" border="false"::: .

    :::image type="content" source="media/how-to-set-up-snmp-mib-monitoring/edit-snmp.png" alt-text="Измените окно SNMP.":::

3. В разделе **Разрешенные узлы** выберите **Добавить узел** и введите IP-адрес сервера, который выполняет мониторинг работоспособности системы.

    :::image type="content" source="media/how-to-set-up-snmp-mib-monitoring/snmp-allowed-ip-addess.png" alt-text="Введите IP-адрес для разрешенных узлов.":::

4. В разделе **Проверка подлинности** в поле **строка сообщества SNMP v2** введите строку. Строка сообщества SNMP может содержать до 32 символов и включать любое сочетание буквенно-цифровых символов (прописные буквы, строчные буквы и цифры). Пробелы недопустимы.

5. Щелкните **Сохранить**.

Определение мониторинга работоспособности SNMP v3:

1. В боковом меню выберите **Параметры системы**.

2. На панели **Active Discovery** выберите **мониторинг SNMP MIB** :::image type="icon" source="media/how-to-set-up-snmp-mib-monitoring/snmp-icon.png" border="false"::: .

    :::image type="content" source="media/how-to-set-up-snmp-mib-monitoring/edit-snmp.png" alt-text="Измените окно SNMP.":::

3. В разделе **Разрешенные узлы** выберите **Добавить узел** и введите IP-адрес сервера, который выполняет мониторинг работоспособности системы.

    :::image type="content" source="media/how-to-set-up-snmp-mib-monitoring/snmp-allowed-ip-addess.png" alt-text="Введите IP-адрес для разрешенных узлов.":::

4. В разделе **authentication (проверка подлинности** ) задайте следующие параметры:

    | Параметр | Описание |
    |--|--|
    | **Имя пользователя** | Имя пользователя SNMP может содержать до 32 символов и включать любое сочетание буквенно-цифровых символов (прописные буквы, строчные буквы и цифры). Пробелы недопустимы. <br /> <br />Имя пользователя для проверки подлинности SNMP v3 должно быть настроено в системе и на SNMP-сервере. |
    | **Пароль** | Введите пароль для проверки подлинности с учетом регистра. Пароль для проверки подлинности может содержать от 8 до 12 символов и включать любое сочетание буквенно-цифровых символов (прописные буквы, строчные буквы и цифры). <br /> <br/>Имя пользователя для проверки подлинности SNMP v3 должно быть настроено в системе и на SNMP-сервере. |
    | **Тип проверки подлинности** | Выберите MD5 или SHA. |
    | **Шифрование** | Выберите DES или AES. |
    | **Секретный ключ** | Ключ должен содержать ровно восемь символов и включать любое сочетание буквенно-цифровых символов (прописные буквы, строчные буквы и цифры). |

5. Щелкните **Сохранить**.

## <a name="see-also"></a>См. также раздел

[Экспорт журналов устранения неполадок](how-to-troubleshoot-the-sensor-and-on-premises-management-console.md)
