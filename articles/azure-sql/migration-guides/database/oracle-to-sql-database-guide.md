---
title: Oracle в базу данных SQL Azure. Руководство по миграции
description: В этом руководстве описывается перенос схемы Oracle в базу данных SQL Azure с помощью Помощник по миграции SQL Server для Oracle (SSMA для Oracle).
ms.service: sql-database
ms.subservice: migration-guide
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: MashaMSFT
ms.author: mathoma
ms.date: 08/25/2020
ms.openlocfilehash: 62b1924a1aeb1c1e5bc06ec0783d83d6918d162c
ms.sourcegitcommit: f0a3ee8ff77ee89f83b69bc30cb87caa80f1e724
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/26/2021
ms.locfileid: "105557927"
---
# <a name="migration-guide-oracle-to-azure-sql-database"></a>Руководство по миграции: Oracle в базу данных SQL Azure
[!INCLUDE[appliesto-sqldb-sqlmi](../../includes/appliesto-sqldb.md)]

В этом руководстве описывается перенос схем Oracle в базу данных SQL Azure с помощью Помощник по миграции SQL Server для Oracle.

Другие руководства по миграции см. в разделе [Перенос базы данных](https://docs.microsoft.com/data-migration). 

## <a name="prerequisites"></a>Предварительные требования

Чтобы перенести схему Oracle в базу данных SQL, вам потребуется: 

- проверить, поддерживается ли исходная среда; 
- скачать [Помощник по миграции SQL Server (SSMA) для Oracle](https://www.microsoft.com/en-us/download/details.aspx?id=54258); 
- Целевая [база данных SQL Azure](../../database/single-database-create-quickstart.md). 
- получить [необходимые разрешения для SSMA для Oracle](/sql/ssma/oracle/connecting-to-oracle-database-oracletosql) и [поставщика](/sql/ssma/oracle/connect-to-oracle-oracletosql).
 

## <a name="pre-migration"></a>Подготовка к миграции

После выполнения необходимых условий можно приступать к поиску топологии среды и оценить возможность миграции. Данный этап процесса включает в себя проведение инвентаризации баз данных, которые необходимо перенести, проверку этих баз данных на наличие потенциальных проблем или препятствий для миграции и устранение этих проблем.



### <a name="assess"></a>Оценка 


Используйте Помощник по миграции SQL Server (SSMA) для Oracle для просмотра объектов и данных базы данных, оценки баз данных для миграции, переноса объектов базы данных в базу данных SQL Azure, а затем, наконец, переноса данных в базу данных. 

Чтобы создать оценку, выполните следующие действия. 

1. Откройте [Помощник по миграции SQL Server для Oracle](https://www.microsoft.com/en-us/download/details.aspx?id=54258). 
1. Выберите **Файл**, а затем пункт **Новый проект**. 
1. Укажите имя проекта, расположение для сохранения проекта, а затем выберите База данных SQL Azure в качестве целевого объекта миграции из раскрывающегося списка. Нажмите кнопку **ОК**:

   ![Создать проект](./media/oracle-to-sql-database-guide/new-project.png)

1. Выберите **подключиться к Oracle**. Введите значения в поля сведения о соединении Oracle в диалоговом окне **соединение с Oracle** :

   ![Соединение с Oracle](./media/oracle-to-sql-database-guide/connect-to-oracle.png)

   Выберите схемы Oracle, которые требуется перенести: 

   ![Выбор схемы Oracle](./media/oracle-to-sql-database-guide/select-schema.png)

1. Щелкните правой кнопкой мыши схему Oracle, которую необходимо перенести, в **обозревателе метаданных Oracle**, а затем выберите команду **создать отчет**. При этом будет создан HTML-отчет. Кроме того, можно выбрать пункт **создать отчет** на панели навигации после выбора базы данных.

   ![Создавать отчет](./media/oracle-to-sql-database-guide/create-report.png)

1. Ознакомьтесь с HTML-отчетом, чтобы получить сведения о статистике преобразований и любых ошибках или предупреждениях. Также можно открыть отчет в Excel, чтобы получить список объектов Oracle и усилия, необходимые для выполнения преобразования схемы. Расположение отчета по умолчанию находится в папке "report" в каталоге SSMAProjects.

   Например: `drive:\<username>\Documents\SSMAProjects\MyOracleMigration\report\report_2020_11_12T02_47_55\`

   ![Отчет об оценке](./media/oracle-to-sql-database-guide/assessment-report.png) 



### <a name="validate-data-types"></a>Обновление типов данных

Проверьте сопоставления типов данных по умолчанию и измените их в зависимости от требований, если это необходимо. Для этого выполните следующие действия.

1. В главном меню выберите **Сервис**. 
1. Выберите **Параметры проекта**. 
1. Перейдите на вкладку **сопоставления типов** : 

   ![Сопоставление типов](./media/oracle-to-sql-database-guide/type-mappings.png)

1. Сопоставление типов для каждой таблицы можно изменить, выбрав таблицу в **обозревателе метаданных Oracle**.

### <a name="convert-schema"></a>Преобразовать схему

Чтобы преобразовать схему, выполните следующие действия. 

1. (Необязательно) Добавьте динамические или нерегламентированные запросы в инструкции. Щелкните узел правой кнопкой мыши и выберите **Добавить инструкции**.
1. Выберите **Подключение к базе данных SQL Azure**. 
    1. Введите сведения о подключении, чтобы подключить базу данных в базе данных SQL Azure.
    1. Выберите целевую базу данных SQL из раскрывающегося списка или укажите новое имя. в этом случае база данных будет создана на целевом сервере. 
    1. Укажите сведения о проверке подлинности. 
    1. Выберите **подключить**:

    ![Подключение к базе данных SQL](./media/oracle-to-sql-database-guide/connect-to-sql-database.png)


1. Щелкните правой кнопкой мыши схему Oracle в **обозревателе метаданных Oracle** и выберите команду **преобразовать схему**. Кроме того, можно выбрать пункт **преобразовать схему** из верхней панели навигации после выбора схемы:

   ![Преобразовать схему](./media/oracle-to-sql-database-guide/convert-schema.png)

1. После завершения преобразования Сравните и изучите преобразованные объекты с исходными объектами, чтобы выявление потенциальных проблем и их устранение на основе рекомендаций.

   ![Обзор схемы рекомендаций](./media/oracle-to-sql-database-guide/table-mapping.png)

   Сравните преобразованный текст Transact-SQL с исходными хранимыми процедурами и ознакомьтесь с рекомендациями:

   ![Обзор рекомендаций](./media/oracle-to-sql-database-guide/procedure-comparison.png)

1. В области вывода выберите элемент **Просмотр результатов** и проверьте ошибки в области **Список ошибок**. 
1. Сохраните проект локально для исправления схемы в автономном режиме. В меню **Файл** выберите команду **Сохранить проект**. Это дает возможность оценивать исходную и целевую схемы в автономном режиме и выполнять исправление перед публикацией схемы в базе данных SQL.

## <a name="migrate"></a>Миграция

После того как вы завершите оценку баз данных и устраните несоответствия, следующим шагом является выполнение процесса миграции. Перенос состоит из двух этапов: публикация схемы и перенос данных. 

Чтобы опубликовать схему и перенести данные, выполните следующие действия.

1. Опубликуйте схему. Щелкните правой кнопкой мыши базу данных в узле **базы** данных в **обозревателе МЕТАДАННЫХ базы данных SQL Azure** и выберите **синхронизировать с базой данных**:

   ![Синхронизация с базой данных](./media/oracle-to-sql-database-guide/synchronize-with-database.png)

   Проверьте сопоставление между исходным и целевым проектами.

   ![Синхронизация с проверкой базы данных](./media/oracle-to-sql-database-guide/synchronize-with-database-review.png)


1. Перенос данных. Щелкните правой кнопкой мыши базу данных или объект, которые требуется перенести, в **обозревателе метаданных Oracle** и выберите пункт **перенести данные**. Кроме того, команду **Перенос данных** можно выбрать на верхней панели навигации. Чтобы перенести данные всей базы данных, установите флажок рядом с ее именем. Чтобы перенести данные из отдельной таблицы, разверните базу данных, разверните узел "Таблицы" и установите флажок рядом с таблицей. Чтобы пропустить данные из отдельных таблиц, снимите флажок:

   ![Перенос данных](./media/oracle-to-sql-database-guide/migrate-data.png)

1. Укажите сведения о подключении для Oracle и базы данных SQL Azure.
1. После завершения миграции просмотрите **отчет о переносе данных**:  

   ![Отчет о миграции данных](./media/oracle-to-sql-database-guide/data-migration-report.png)

1. Подключитесь к базе данных SQL Azure с помощью [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms) и проверьте миграцию, просмотрев данные и схему.

   ![Проверка в SSMA](./media/oracle-to-sql-database-guide/validate-data.png)

Кроме того, для выполнения миграции также можно использовать SQL Server Integration Services (SSIS). Дополнительные сведения см. на следующих ресурсах: 

- [начало работы с SQL Server Integration Services](/sql/integration-services/sql-server-integration-services)
- [SQL Server Integration Services: службы SSIS для Azure и гибридное перемещение данных](https://download.microsoft.com/download/D/2/0/D20E1C5F-72EA-4505-9F26-FEF9550EFD44/SSIS%20Hybrid%20and%20Azure.docx)


## <a name="post-migration"></a>После миграции 

После успешного завершения этапа **миграции** необходимо выполнить ряд задач, чтобы обеспечить бесперебойную и эффективную работу всех компонентов.

### <a name="remediate-applications"></a>Исправление приложений

После переноса данных в целевую среду все приложения, которые раньше использовали источник, должны приступить к приему целевого объекта. Для этого в некоторых случаях потребуется внести изменения в приложения.

[Data Access Migration Toolkit](https://marketplace.visualstudio.com/items?itemName=ms-databasemigration.data-access-migration-toolkit) — это расширение для Visual Studio Code, которое позволяет анализировать исходный код Java и обнаруживать вызовы API-интерфейсов и запросы на доступ к данным. Это единое представление для оценки усилий, необходимых для поддержки нового сервера базы данных. Дополнительные сведения см. в записи блога [Перенос приложения Java из Oracle](https://techcommunity.microsoft.com/t5/microsoft-data-migration/migrate-your-java-applications-from-oracle-to-sql-server-with/ba-p/368727). 



### <a name="perform-tests"></a>Выполнение тестов

Тестирование переноса базы данных включает указанные ниже действия.

1.  **Разработка проверочных тестов**. Чтобы протестировать перенос базы данных, необходимо использовать SQL-запросы. Необходимо создать запросы проверки, которые будут выполняться как в исходной, так и в целевой базах данных. Запросы на проверку должны охватывать определенную область.

2.  **Настройка тестовой среды**. Тестовая среда должна содержать копию исходной и целевой баз данных. Не забудьте изолировать тестовую среду.

3.  **Выполнение проверочных тестов**. Выполните проверочные тесты для источника и целевого объекта, а затем проанализируйте результаты.

4.  **Выполнение тестов производительности**. Запустите тест производительности для источника и целевого объекта, а затем проанализируйте и сравните результаты.


### <a name="optimize"></a>Оптимизация

Проверка после миграции — очень важный шаг, позволяющий добиться точности и полноты данных, а также выявить проблемы с производительностью рабочей нагрузки.

> [!NOTE]
> Дополнительные сведения об этих проблемах и мерах по их устранению см. в [руководстве по проверке и оптимизации после миграции](/sql/relational-databases/post-migration-validation-and-optimization-guide).


## <a name="migration-assets"></a>Ресурсы, посвященные миграции 

Дополнительные сведения о выполнении сценария миграции см. на следующих ресурсах, которые были разработаны с учетом поддержки реального проекта миграции.

| **Название со ссылкой**                                                                                                                                          | **Описание**                                                                                                                                                                                                                                                                                                                                                                                       |
| ------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [Модель и средство оценки рабочей нагрузки данных](https://github.com/Microsoft/DataMigrationTeam/tree/master/Data%20Workload%20Assessment%20Model%20and%20Tool) | Это средство предоставляет предлагаемые "оптимальные" целевые платформы, готовность к переходу в облако и уровень исправления приложения/базы данных для конкретной рабочей нагрузки. Оно обеспечивает простое и быстрое вычисление и создание отчетов, которое помогает ускорить оценку больших объемов, предоставляя, автоматизируя и унифицируя процесс принятия решения относительно целевой платформы.                                                          |
| [Артефакты скрипта инвентаризации Oracle](https://github.com/Microsoft/DataMigrationTeam/tree/master/Oracle%20Inventory%20Script%20Artifacts)                 | Этот ресурс включает в себя запрос PL/SQL, который обращается к системным таблицам Oracle и возвращает количество объектов по типам схем, типам объектов и состоянию. Он также дает приблизительную оценку объема "необработанных данных" и размера таблиц в каждой схеме. Результаты сохраняются в формате CSV.                                                                                                               |
| [Автоматизация сбора и объединения данных для оценки баз данных Oracle в SSMA](https://github.com/microsoft/DataMigrationTeam/tree/master/IP%20and%20Scripts/Automate%20SSMA%20Oracle%20Assessment%20Collection%20%26%20Consolidation)                                             | Этот набор ресурсов использует CSV-файл (sources.csv в папках проектов) в качестве основы для создания XML-файлов, необходимых для проведения оценки SSMA в режиме консоли. Файл source.csv предоставляется клиентом на основе инвентаризации существующих экземпляров Oracle. Выходные файлы: AssessmentReportGeneration_source_1.xml, ServersConnectionFile.xml и VariableValueFile.xml.|
| [Распространенные ошибки SSMA для Oracle и способы их устранения](https://aka.ms/dmj-wp-ssma-oracle-errors)                                                           | Oracle позволяет задавать нескалярное условие в предложении WHERE. В SQL Server, однако, такой тип условия не поддерживается. В результате Помощник по миграции SQL Server (SSMA) для Oracle не преобразует запросы с нескалярным условием в предложении WHERE, выдавая вместо этого ошибку O2SS0001. В этом техническом документе содержатся дополнительные сведения о данной проблеме и способах ее устранения.          |
| [Руководство по переносу баз данных Oracle в SQL Server](https://github.com/microsoft/DataMigrationTeam/blob/master/Whitepapers/Oracle%20to%20SQL%20Server%20Migration%20Handbook.pdf)                | В этом документе рассматриваются задачи, связанные с переносом схемы Oracle в последнюю версию SQL Server. Если миграция требует внесения изменений в компоненты и функции, необходимо тщательно учесть возможное влияние каждого изменения на приложения, использующие базу данных.                                                     |

Эти ресурсы были разработаны в рамках программы Data SQL Ninja, которая спонсируется группой разработчиков Azure Data Group. Основная часть программы Data SQL Ninja заключается в разрешении и ускорении сложной модернизации и реализация перехода на платформу данных Microsoft Azure. Если вы считаете, что ваша организация заинтересована в участии в программе Data SQL Ninja, обратитесь в службу поддержки своей учетной записи и попросите отправить заявку.

## <a name="next-steps"></a>Дальнейшие действия

- Матрицу служб и средств Майкрософт и сторонних производителей, доступных для помощи в различных сценариях переноса баз данных и данных, а также специальных задачах, см. в статье [Службы и средства для переноса данных](../../../dms/dms-tools-matrix.md).

- Дополнительные сведения о базе данных SQL Azure см. в следующих статьях: 
  - [Обзор базы данных SQL Azure](../../database/sql-database-paas-overview.md)
  - [Калькулятор совокупной стоимости владения Azure (TCO)](https://azure.microsoft.com/en-us/pricing/tco/calculator/)


- Дополнительные сведения о структуре и цикле внедрения для миграции в облако см. в разделе
   -  [Cloud Adoption Framework для Azure](/azure/cloud-adoption-framework/migrate/azure-best-practices/contoso-migration-scale)
   -  [Рекомендации по затратам и изменению размеров рабочих нагрузок, переносятся в Azure](/azure/cloud-adoption-framework/migrate/azure-best-practices/migrate-best-practices-costs) 

- Видеоматериалы см. в следующих статьях: 
    - [Обзор процесса миграции и средств и служб, рекомендованных для выполнения оценки и миграции](https://azure.microsoft.com/resources/videos/overview-of-migration-and-recommended-tools-services/)