---
title: 'Из DB2 в базу данных SQL: руководство по миграции'
description: В этом руководстве описывается перенос баз данных DB2 в базу данных SQL Azure с помощью Помощник по миграции SQL Server для DB2 (SSMA для DB2).
ms.service: sql-database
ms.subservice: migration-guide
ms.custom: ''
ms.devlang: ''
ms.topic: how-to
author: mokabiru
ms.author: mokabiru
ms.reviewer: MashaMSFT
ms.date: 11/06/2020
ms.openlocfilehash: 917390b43a772cbb9374c560fc3a65cfa7278839
ms.sourcegitcommit: 18a91f7fe1432ee09efafd5bd29a181e038cee05
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/16/2021
ms.locfileid: "103563952"
---
# <a name="migration-guide-db2-to-sql-database"></a>Руководство по миграции: DB2 в базу данных SQL
[!INCLUDE[appliesto-sqldb-sqlmi](../../includes/appliesto-sqldb.md)]

В этом руководстве описывается перенос баз данных DB2 в базу данных SQL Azure с помощью Помощник по миграции SQL Server для DB2. 

Другие сценарии см. в разделе [руководств по миграции баз данных](https://datamigration.microsoft.com/).

## <a name="prerequisites"></a>Предварительные требования 

Чтобы перенести базу данных DB2 в базу данных SQL, вам потребуется:

- проверить, что исходная среда поддерживается;
- скачать [Помощник по миграции Microsoft SQL Server (SSMA) для DB2](https://www.microsoft.com/download/details.aspx?id=54254).
- Целевая [база данных SQL Azure](../../database/single-database-create-quickstart.md).


## <a name="pre-migration"></a>Подготовка к миграции

После выполнения необходимых условий можно приступать к поиску топологии среды и оценить возможность миграции. 

### <a name="assess-and-convert"></a>Оценка и преобразование

Создайте оценку с помощью Помощника по миграции SQL Server (SSMA). 

Чтобы создать оценку, выполните следующие действия.

1. Откройте Помощник по миграции Microsoft SQL Server (SSMA) для DB2. 
1. Выберите **Файл**, а затем пункт **Новый проект**. 
1. Укажите имя проекта, расположение для сохранения проекта, а затем выберите База данных SQL Azure в качестве целевого объекта миграции из раскрывающегося списка. Щелкните **ОК**.  

   :::image type="content" source="media/db2-to-sql-database-guide/new-project.png" alt-text="Укажите сведения о проекте и нажмите кнопку ОК для сохранения.":::


1. Введите сведения о подключении к DB2 в диалоговом окне **Подключение к DB2**. 

   :::image type="content" source="media/db2-to-sql-database-guide/connect-to-db2.png" alt-text="Подключение к экземпляру DB2":::


1. Щелкните правой кнопкой мыши схему DB2, которую необходимо перенести, и выберите **Создать отчет**. При этом будет создан HTML-отчет. Кроме того, можно выбрать **Создать отчет** на панели навигации после выбора схемы. 

   :::image type="content" source="media/db2-to-sql-database-guide/create-report.png" alt-text="Контекстное меню для схемы и выбор команды &quot;Создать отчет&quot;":::

1. Ознакомьтесь с HTML-отчетом, чтобы получить сведения о статистике преобразований и любых ошибках или предупреждениях. Также можно открыть отчет в Excel, чтобы получить список объектов DB2 и усилия, необходимые для выполнения преобразования схемы. Расположение отчета по умолчанию находится в папке "report" в каталоге SSMAProjects.

   Например: `drive:\<username>\Documents\SSMAProjects\MyDB2Migration\report\report_<date>`. 

   :::image type="content" source="media/db2-to-sql-database-guide/report.png" alt-text="Просмотр отчета для обнаружения ошибок и предупреждений":::


### <a name="validate-data-types"></a>Обновление типов данных

Проверьте сопоставления типов данных по умолчанию и измените их в зависимости от требований, если это необходимо. Для этого выполните следующие действия. 

1. В главном меню выберите **Сервис**. 
1. Выберите **Параметры проекта**. 
1. Перейдите на вкладку **Сопоставления типов**. 

   :::image type="content" source="media/db2-to-sql-database-guide/type-mapping.png" alt-text="Выбор схемы и вкладки &quot;Сопоставления типов&quot;":::

1. Сопоставление типов для каждой таблицы можно изменить, выбрав таблицу в **обозревателе метаданных DB2**. 

### <a name="schema-conversion"></a>Преобразование схемы 

Чтобы преобразовать схему, выполните следующие действия.

1. (Необязательно) Добавьте динамические или нерегламентированные запросы в инструкции. Щелкните узел правой кнопкой мыши и выберите **Добавить инструкции**. 
1. Выберите **Подключение к базе данных SQL Azure**. 
    1. Введите сведения о подключении, чтобы подключить базу данных в базе данных SQL Azure. 
    1. Выберите целевую базу данных SQL из раскрывающегося списка. 
    1. Выберите **Подключиться**. 

   :::image type="content" source="media/db2-to-sql-database-guide/connect-to-sql-database.png" alt-text="Введите сведения для подключения к логическому серверу в Azure":::


1. Щелкните правой кнопкой мыши схему и выберите **Преобразовать схему**. Кроме того, можно выбрать пункт **Преобразовать схему** на верхней панели навигации после выбора схемы. 

   :::image type="content" source="media/db2-to-sql-database-guide/convert-schema.png" alt-text="Выбор команды &quot;Преобразовать схему&quot; в контекстном меню":::

1. После завершения преобразования сравните и изучите структуру схемы, чтобы вычислить потенциальные проблемы и устранить их в соответствии с рекомендациями. 

   :::image type="content" source="media/db2-to-sql-database-guide/compare-review-schema-structure.png" alt-text="Сравнение и изучение структуры схемы для поиска потенциальных проблем и их устранения на основе рекомендаций.":::

1. Сохраните проект локально для исправления схемы в автономном режиме. В меню **Файл** выберите команду **Сохранить проект**. 


## <a name="migrate"></a>Миграция

После того как вы завершите оценку баз данных и устраните несоответствия, следующим шагом является выполнение процесса миграции.

Чтобы опубликовать схему и перенести данные, выполните следующие действия.

1. Опубликуйте схему. Щелкните правой кнопкой мыши базу данных в узле **базы** данных в **обозревателе МЕТАДАННЫХ базы данных SQL Azure** и выберите **синхронизировать с базой данных**.

   :::image type="content" source="media/db2-to-sql-database-guide/synchronize-with-database.png" alt-text="Выбор пункта &quot;Синхронизировать с базой данных&quot; в контекстном меню":::

1. Перенесите данные: щелкните правой кнопкой мыши схему в **обозревателе метаданных DB2** и выберите **Перенести данные**. 

   :::image type="content" source="media/db2-to-sql-database-guide/migrate-data.png" alt-text="Выбор пункта &quot;Перенести данные&quot; в контекстном меню схемы.":::

1. Укажите сведения о подключении как для DB2, так и для базы данных SQL Azure. 
1. Просмотрите **отчет о переносе данных**. 

   :::image type="content" source="media/db2-to-sql-database-guide/data-migration-report.png" alt-text="Обзор отчета о переносе данных":::

1. Подключитесь к базе данных SQL Azure с помощью SQL Server Management Studio и проверьте миграцию, просмотрев данные и схему. 

   :::image type="content" source="media/db2-to-sql-database-guide/compare-schema-in-ssms.png" alt-text="Сравнение схемы в SSMS":::

## <a name="post-migration"></a>Действия после миграции 

После успешного завершения этапа миграции необходимо выполнить ряд задач, чтобы обеспечить бесперебойную и эффективную работу всех компонентов.

### <a name="remediate-applications"></a>Исправление приложений 

После переноса данных в целевую среду все приложения, которые раньше использовали источник, должны приступить к приему целевого объекта. Для этого в некоторых случаях потребуется внести изменения в приложения.


### <a name="perform-tests"></a>Выполнение тестов

Тестирование переноса базы данных включает следующие действия.

1. **Разработка проверочных тестов**. Чтобы протестировать перенос базы данных, необходимо использовать SQL-запросы. Необходимо создать запросы проверки, которые будут выполняться как в исходной, так и в целевой базах данных. Запросы на проверку должны охватывать определенную область.
1. **Настройка тестовой среды**. Тестовая среда должна содержать копию исходной и целевой баз данных. Не забудьте изолировать тестовую среду.
1. **Выполнение проверочных тестов**. Выполните проверочные тесты для источника и целевого объекта, а затем проанализируйте результаты.
1. **Выполнение тестов производительности**. Запустите тест производительности для источника и целевого объекта, а затем проанализируйте и сравните результаты.


## <a name="leverage-advanced-features"></a>Использование дополнительных функций 

Воспользуйтесь преимуществами расширенных облачных функций, предлагаемых базой данных SQL, таких как [Встроенная Высокая доступность](../../database/high-availability-sla.md), [обнаружение угроз](../../database/azure-defender-for-sql.md), [мониторинг и Настройка рабочей нагрузки](../../database/monitor-tune-overview.md). 


Некоторые SQL Server функции доступны только после изменения [уровня совместимости базы данных](/sql/relational-databases/databases/view-or-change-the-compatibility-level-of-a-database) на последний уровень совместимости (150). 

## <a name="migration-assets"></a>Ресурсы, посвященные миграции 

Дополнительные сведения см. на следующих ресурсах, которые были разработаны с учетом поддержки реального сотрудничества проекта миграции.

|Ресурс  |Описание  |
|---------|---------|
|[Модель и средство оценки рабочей нагрузки данных](https://github.com/Microsoft/DataMigrationTeam/tree/master/Data%20Workload%20Assessment%20Model%20and%20Tool)| Это средство предоставляет предлагаемые "оптимальные" целевые платформы, готовность к переходу в облако и уровень исправления приложения/базы данных для конкретной рабочей нагрузки. Оно обеспечивает простое и быстрое вычисление и создание отчетов, которое помогает ускорить оценку больших объемов, предоставляя, автоматизируя и унифицируя процесс принятия решения относительно целевой платформы.|
|[Пакет обнаружения и оценки ресурсов данных DB2 zOS](https://github.com/Microsoft/DataMigrationTeam/tree/master/DB2%20zOS%20Data%20Assets%20Discovery%20and%20Assessment%20Package)|После выполнения скрипта SQL в базе данных результаты можно экспортировать в файл в файловой системе. Поддерживается несколько форматов файлов, в том числе CSV, что позволяет записывать результаты во внешние средства, такие как электронные таблицы. Этот метод может быть полезен, если требуется возможность с легкостью делиться результатами с командами, у которых нет Workbench.|
|[Сценарии и артефакты инвентаризации IBM DB2 LUW](https://github.com/Microsoft/DataMigrationTeam/tree/master/IBM%20DB2%20LUW%20Inventory%20Scripts%20and%20Artifacts)|Этот ресурс включает SQL-запрос, который обращается к системным таблицам IBM DB2 LUW версии 11.1 и предоставляет количество объектов по схеме и типу объектов, приблизительную оценку "необработанных данных" в каждой схеме и размер таблиц в каждой схеме с результатами, хранящимися в формате CSV.|
|[Инструкции по установке DB2 LUW pure scale в Azure](https://github.com/Microsoft/DataMigrationTeam/blob/master/Whitepapers/DB2%20PureScale%20on%20Azure.pdf)|Это руководством служит отправной точкой для плана реализации DB2. Ваши бизнес-требования будут другими, однако базовый шаблон остается без изменений. Этот шаблон архитектуры также может использоваться для приложений OLAP в Azure.|

Эти ресурсы были разработаны в рамках программы Data SQL Ninja, которая спонсируется группой разработчиков Azure Data Group. Основная часть программы Data SQL Ninja заключается в разрешении и ускорении сложной модернизации и реализация перехода на платформу данных Microsoft Azure. Если вы считаете, что ваша организация заинтересована в участии в программе Data SQL Ninja, обратитесь в службу поддержки своей учетной записи и попросите отправить заявку.



## <a name="next-steps"></a>Дальнейшие действия

- Сведения о службах и средствах Майкрософт и сторонних поставщиков, которые помогут вам в использовании различных сценариев переноса баз данных и данных, а также специальных задач см. в разделе [служба и средства для переноса данных](../../../dms/dms-tools-matrix.md).

- См. дополнительные сведения о Базе данных SQL Azure:
   - [Общие сведения о базе данных SQL](../../database/sql-database-paas-overview.md)
   - [Калькулятор совокупной стоимости владения Azure](https://azure.microsoft.com/pricing/tco/calculator/) 


- Дополнительные сведения о структуре и цикле внедрения для миграции в облако см. в разделе
   -  [Cloud Adoption Framework для Azure](/azure/cloud-adoption-framework/migrate/azure-best-practices/contoso-migration-scale)
   -  [Рекомендации по затратам и изменению размеров рабочих нагрузок, переносятся в Azure](/azure/cloud-adoption-framework/migrate/azure-best-practices/migrate-best-practices-costs) 

- Чтобы оценить уровень доступа к приложениям, см. раздел [набор средств миграции для доступа к данным (Предварительная версия)](https://marketplace.visualstudio.com/items?itemName=ms-databasemigration.data-access-migration-toolkit)
- Дополнительные сведения о выполнении проверки уровня доступа к данным A/B см. [Database experimentation Assistant](/sql/dea/database-experimentation-assistant-overview).