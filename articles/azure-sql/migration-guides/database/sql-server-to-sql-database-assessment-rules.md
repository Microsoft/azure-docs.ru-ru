---
title: Правила оценки для SQL Server миграции базы данных SQL
description: Правила оценки для обнаружения проблем с исходным экземпляром SQL Server, которые необходимо устранить перед миграцией в базу данных SQL Azure.
ms.service: sql-database
ms.subservice: migration-guide
ms.custom: ''
ms.devlang: ''
ms.topic: how-to
author: MashaMSFT
ms.author: mathoma
ms.reviewer: MashaMSFT
ms.date: 12/15/2020
ms.openlocfilehash: bf825572226bf5d7432fd3ad825f2f3a13355c53
ms.sourcegitcommit: f3ec73fb5f8de72fe483995bd4bbad9b74a9cc9f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/04/2021
ms.locfileid: "102054966"
---
# <a name="assessment-rules-for-sql-server-to-sql-database-migration"></a>Правила оценки для SQL Server миграции базы данных SQL
[!INCLUDE[appliesto--sqldb](../../includes/appliesto-sqldb.md)]

Средства миграции проверяют экземпляр SQL Server источника, выполняя ряд правил оценки для обнаружения проблем, которые необходимо устранить перед переносом базы данных SQL Server в базу данных SQL Azure. 

В этой статье представлен список правил, используемых для оценки возможности миграции базы данных SQL Server в базу данных SQL Azure. 


## <a name="bulk-insert"></a>Инструкция INSERT<a id="BulkInsert"></a>

**Title: BULK INSERT с источником данных BLOB-объектов, отличным от Azure, не поддерживается в базе данных SQL Azure.**   
**Категория**: вопрос   

**Описание**   
База данных SQL Azure не может получить доступ к файловым ресурсам или папкам Windows. Сведения об использовании инструкций BULK INSERT, которые не ссылаются на большой двоичный объект Azure, см. в разделе "затронутые объекты". Объекты с "BULK INSERT", где источник не является хранилищем BLOB-объектов Azure, не будут работать после миграции в базу данных SQL Azure. 


**Рекомендуемые**   
При переносе в базу данных SQL Azure необходимо преобразовать инструкции BULK INSERT, использующие локальные файлы или общие файловые ресурсы, для использования файлов из хранилища BLOB-объектов Azure. Также можно перейти на SQL Server на виртуальной машине Azure.

## <a name="compute-clause"></a>Предложение COMPUTE<a id="ComputeClause"></a>

**Title: предложение COMPUTE больше не поддерживается и было удалено.**   
**Категория**: предупреждение   

**Описание**   
Предложение COMPUTE формирует итоги, которые отображаются в виде дополнительных столбцов сводки в конце результирующего набора. Однако это предложение больше не поддерживается в базе данных SQL Azure. 


**Рекомендуемые**   
Модуль T-SQL необходимо переписывать с помощью оператора ROLLUP. В приведенном ниже коде показано, как можно заменить ВЫЧИСЛЕНие на ROLLUP. 

```sql 
USE AdventureWorks 
GO;  

SELECT SalesOrderID, UnitPrice, UnitPriceDiscount 
FROM Sales.SalesOrderDetail 
ORDER BY SalesOrderID COMPUTE SUM(UnitPrice), SUM(UnitPriceDiscount) BY SalesOrderID GO; 

SELECT SalesOrderID, UnitPrice, UnitPriceDiscount,SUM(UnitPrice) as UnitPrice , 
SUM(UnitPriceDiscount) as UnitPriceDiscount 
FROM Sales.SalesOrderDetail 
GROUP BY SalesOrderID, UnitPrice, UnitPriceDiscount WITH ROLLUP; 
```

Дополнительные сведения: [неподдерживаемая функция ядро СУБД в SQL Server ](/previous-versions/sql/2014/database-engine/discontinued-database-engine-functionality-in-sql-server-2016#Denali)

## <a name="change-data-capture-cdc"></a>Система отслеживания измененных данных (CDC)<a id="CDC"></a>

**Title: система отслеживания измененных данных (CDC) не поддерживается в базе данных SQL Azure.**   
**Категория**: вопрос   


**Описание**   
Система отслеживания измененных данных (CDC) не поддерживается в базе данных SQL Azure. Оцените, можно ли использовать вместо этого Отслеживание изменений.  Кроме того, можно перейти на Azure SQL Управляемый экземпляр или SQL Server на виртуальных машинах Azure. 


**Рекомендуемые**   
Система отслеживания измененных данных (CDC) не поддерживается в базе данных SQL Azure. Оцените, можно ли использовать Отслеживание изменений вместо этого, или рассмотрите возможность миграции на Управляемый экземпляр SQL Azure.

Дополнительные сведения см. в этой записи. [Включение отслеживания изменений SQL Azure](https://social.technet.microsoft.com/wiki/contents/articles/2976.azure-sql-how-to-enable-change-tracking.aspx)

## <a name="clr-assemblies"></a>Сборки среды CLR<a id="ClrAssemblies"></a>

**Title: сборки SQL CLR не поддерживаются в базе данных SQL Azure.**   
**Категория**: вопрос   


**Описание**   
База данных SQL Azure не поддерживает сборки SQL CLR. 


**Рекомендуемые**   
В настоящее время невозможно добиться этого в базе данных SQL Azure. Для использования только сборок, поддерживаемых базой данных SQL Azure, в рекомендуемых альтернативных решениях потребуется внести изменения в код приложения и базу данных. Также можно перейти на Управляемый экземпляр или SQL Server SQL Azure на виртуальной машине Azure

Дополнительные сведения: [неподдерживаемые различия Transact-SQL в базе данных SQL](../../database/transact-sql-tsql-differences-sql-server.md#transact-sql-syntax-not-supported-in-azure-sql-database)

## <a name="cryptographic-provider"></a>Поставщик служб шифрования<a id="CryptographicProvider"></a>

**Title: обнаружено использование создания поставщика служб шифрования или изменение поставщика служб шифрования, которое не поддерживается в базе данных SQL Azure.**   
**Категория**: вопрос   

**Описание**   
База данных SQL Azure не поддерживает инструкции поставщика служб шифрования, так как она не может получить доступ к файлам. Сведения об использовании операторов поставщика служб шифрования см. в разделе затронутые объекты. Объекты с `CREATE CRYPTOGRAPHIC PROVIDER` или `ALTER CRYPTOGRAPHIC PROVIDER` будут работать неправильно после переноса в базу данных SQL Azure.  


**Рекомендуемые**   
Проверьте объекты с помощью `CREATE CRYPTOGRAPHIC PROVIDER` или `ALTER CRYPTOGRAPHIC PROVIDER` . В любом из необходимых объектов удалите использование этих функций. Также можно перейти на SQL Server на виртуальной машине Azure

## <a name="cross-database-references"></a>Межбазовые ссылки<a id="CrossDataseReferences"></a>

**Title: межбазовые запросы не поддерживаются в базе данных SQL Azure.**   
**Категория**: вопрос   

**Описание**   
Базы данных на этом сервере используют межбазовые запросы, которые не поддерживаются в базе данных SQL Azure. 


**Рекомендуемые**   
База данных SQL Azure не поддерживает запросы между базами данных. Рекомендуется выполнять следующие действия. 
- Перенесите зависимые базы данных в базу данных SQL Azure и используйте функции запросов к эластичной базе данных (в настоящее время в предварительной версии) для запроса в базах данных SQL Azure. 
- Переместить зависимые наборы данных из других баз данных в переносимую. 
- Переход на Управляемый экземпляр Azure SQL.
- Переход на SQL Server на виртуальной машине Azure. 

Дополнительные сведения: [Проверка запроса к эластичной базе данных SQL Azure (Предварительная версия)](../../database/elastic-query-overview.md)

## <a name="database-compatibility"></a>Совместимость базы данных<a id="DbCompatLevelLowerThan100"></a>

**Title: база данных SQL Azure не поддерживает уровни совместимости ниже 100.**   
**Категория**: предупреждение   

**Описание**   
Уровень совместимости базы данных — это ценное средство, помогающее в модернизации базы данных, позволяющее обновлять SQL Server ядро СУБД, сохраняя при этом работоспособное состояние приложений, сохраняя при этом одинаковый уровень совместимости базы данных до обновления. База данных SQL Azure не поддерживает уровни совместимости ниже 100. 


**Рекомендуемые**   
Оцените, не повреждена ли функциональность приложения при обновлении уровня совместимости базы данных до 100 в Управляемый экземпляр Azure SQL. Также можно перейти на SQL Server на виртуальной машине Azure

## <a name="database-mail"></a>Компонент Database Mail<a id="DatabaseMail"></a>

**Title: Database Mail не поддерживается в базе данных SQL Azure.**   
**Категория**: предупреждение   

**Описание**   
Этот сервер использует функцию Database Mail, которая не поддерживается в базе данных SQL Azure.


**Рекомендуемые**   
Рассмотрите возможность перехода на Управляемый экземпляр Azure SQL, которая поддерживает Database Mail.  Кроме того, можно использовать функции Azure и Sendgrid для выполнения почтовых функций в базе данных SQL Azure.

Дополнительные сведения: [Отправка электронной почты из базы данных SQL Azure с помощью скрипта функций Azure](https://github.com/microsoft/DataMigrationTeam/tree/master/IP%20and%20Scripts/AF%20SendMail)


## <a name="database-principal-alias"></a>Псевдоним участника базы данных<a id="DatabasePrincipalAlias"></a>

**Title: SYS. DATABASE_PRINCIPAL_ALIASES прекращена и была удалена.**   
**Категория**: вопрос   

**Описание**   
Представления. DATABASE_PRINCIPAL_ALIASES прекращена и была удалена в базе данных SQL Azure.  


**Рекомендуемые**   
Использование ролей вместо псевдонимов.

Дополнительные сведения: [неподдерживаемая функция ядро СУБД в SQL Server](/previous-versions/sql/2014/database-engine/discontinued-database-engine-functionality-in-sql-server-2016#Denali)


## <a name="disable_def_cnst_chk-option"></a>DISABLE_DEF_CNST_CHK, параметр<a id="DisableDefCNSTCHK"></a>

**Title: параметр SET DISABLE_DEF_CNST_CHK больше не поддерживается и был удален.**   
**Категория**: вопрос   

**Описание**   
Параметр SET DISABLE_DEF_CNST_CHK больше не поддерживается и был удален в базе данных SQL Azure.  


Дополнительные сведения: [неподдерживаемая функция ядро СУБД в SQL Server](/previous-versions/sql/2014/database-engine/discontinued-database-engine-functionality-in-sql-server-2016#Denali)

## <a name="fastfirstrow-hint"></a>Подсказка FASTFIRSTROW<a id="FastFirstRowHint"></a>

**Title: указание запроса FASTFIRSTROW прекращено и было удалено.**   
**Категория**: предупреждение   

**Описание**   
Указание запроса FASTFIRSTROW прекращено и было удалено в базе данных SQL Azure.  


**Рекомендуемые**   
Вместо параметра Use указание запроса FASTFIRSTROW (FAST n).

Дополнительные сведения: [неподдерживаемая функция ядро СУБД в SQL Server](/previous-versions/sql/2014/database-engine/discontinued-database-engine-functionality-in-sql-server-2016#Denali)

## <a name="filestream"></a>Потока<a id="FileStream"></a>

**Title: FILESTREAM не поддерживается в базе данных SQL Azure**   
**Категория**: вопрос   

**Описание**   
Функция FILESTREAM, которая позволяет хранить неструктурированные данные, такие как текстовые документы, изображения и видео в файловой системе NTFS, не поддерживается в базе данных SQL Azure. 


**Рекомендуемые**   
Отправьте неструктурированные файлы в хранилище BLOB-объектов Azure и сохраните метаданные, связанные с этими файлами (имя, тип, расположение URL-адреса, ключ к хранилищу и т. д.) в базе данных SQL Azure. Возможно, потребуется выполнить повторное проектирование приложения, чтобы разрешить потоковую передачу больших двоичных объектов в базу данных SQL Azure и из нее. Также можно перейти на SQL Server на виртуальной машине Azure.

Дополнительные сведения: [потоковая передача больших двоичных объектов в блог SQL Azure и из](https://azure.microsoft.com/blog/streaming-blobs-to-and-from-sql-azure/) него


## <a name="linked-server"></a>Связанный сервер<a id="LinkedServer"></a>

**Title: функциональность связанного сервера не поддерживается в базе данных SQL Azure.**   
**Категория**: вопрос   

**Описание**   
Связанные серверы позволяют SQL Server ядро СУБД выполнять команды для OLE DB источников данных за пределами экземпляра SQL Server. 


**Рекомендуемые**   
База данных SQL Azure не поддерживает функциональность связанного сервера. Для устранения необходимости в связанных серверах рекомендуется выполнить следующие действия. 
- Определите зависимые наборы данных от удаленных серверов SQL и рассмотрите возможность перемещения их в переносимую базу. 
- Перенесите зависимые базы данных в Azure и используйте функции запросов к эластичной базе данных (Предварительная версия), чтобы выполнять запросы к базам данных, наводимым в службе "SQL Azure" 

Дополнительные сведения: [Проверка эластичных запросов базы данных SQL Azure (Предварительная версия)](../../database/elastic-query-overview.md) 

## <a name="ms-dtc"></a>MS DTC<a id="MSDTCTransactSQL"></a>

**Title: начало РАСПРЕДЕЛЕНной транзакции не поддерживается в базе данных SQL Azure.**   
**Категория**: вопрос   

**Описание**   
Распределенная транзакция, запущенная инструкцией Transact SQL BEGIN РАСПРЕДЕЛЕНной ТРАНЗАКЦИей и управляемая Microsoft координатор распределенных транзакций (MS DTC), не поддерживается в базе данных SQL Azure.  


**Рекомендуемые**   
Просмотрите раздел затронутые объекты в службе "миграция Azure", чтобы просмотреть все объекты с помощью транзакции BEGIN ДИСТРУБУТЕД. Рассмотрите возможность переноса баз данных участников в Azure SQL Управляемый экземпляр, где поддерживаются распределенные транзакции между несколькими экземплярами (в настоящее время это предварительная версия). Также можно перейти на SQL Server на виртуальной машине Azure.

Дополнительные сведения: [транзакции на нескольких серверах для управляемый экземпляр Azure SQL ](../../database/elastic-transactions-overview.md#transactions-across-multiple-servers-for-azure-sql-managed-instance)


## <a name="openrowset-bulk"></a>OPENROWSET (BULK)<a id="OpenRowsetWithNonBlobDataSourceBulk"></a>

**Title: функция OpenRowSet, используемая в групповой операции с источником данных хранилища BLOB-объектов, отличной от Azure, не поддерживается в базе данных SQL Azure.**   
**Категория**: вопрос   

**Описание** Функция OPENROWSET поддерживает групповые операции с помощью встроенного поставщика BULK, который позволяет считывать данные из файла и возвращаться их в виде набора строк. Функция OPENROWSET с источником данных хранилища BLOB-объектов, отличной от Azure, не поддерживается в базе данных SQL Azure.


**Рекомендуемые**   
База данных SQL Azure не может получить доступ к файловым ресурсам и папкам Windows, поэтому файлы необходимо импортировать из хранилища BLOB-объектов Azure. Поэтому в функции OPENROWSET поддерживается только источник данных типа больших двоичных объектов. Также можно перейти на SQL Server на виртуальной машине Azure

Дополнительные сведения: [разрешение различий Transact-SQL во время миграции в базу данных SQL](../../database/transact-sql-tsql-differences-sql-server.md#transact-sql-syntax-not-supported-in-azure-sql-database)


## <a name="openrowset-provider"></a>OPENROWSET (поставщик)<a id="OpenRowsetWithSQLAndNonSQLProvider"></a>

**Title: OpenRowSet с SQL или поставщиком, отличным от поставщика SQL, не поддерживается в базе данных SQL Azure.**   
**Категория**: вопрос   

**Описание**   
OpenRowSet с поставщиком SQL или отличным от поставщика SQL является альтернативой доступу к таблицам на связанном сервере и является одноразовым, нерегламентированным методом подключения и доступа к удаленным данным с помощью OLE DB. OpenRowSet с SQL или поставщиком, отличным от поставщика SQL, не поддерживается в базе данных SQL Azure.


**Рекомендуемые**   
База данных SQL Azure поддерживает OPENROWSET только для импорта из хранилища BLOB-объектов Azure. Также можно перейти на SQL Server на виртуальной машине Azure

Дополнительные сведения: [разрешение различий Transact-SQL во время миграции в базу данных SQL](../../database/transact-sql-tsql-differences-sql-server.md#transact-sql-syntax-not-supported-in-azure-sql-database)


## <a name="non-ansi-left-outer-join"></a>Левое внешнее соединение не из ANSI<a id="NonANSILeftOuterJoinSyntax"></a>

**Title: неподдерживаемое левое внешнее соединение в стиле ANSI не поддерживается и было удалено.**   
**Категория**: предупреждение   

**Описание**   
Неподдерживаемое левое внешнее соединение в стиле ANSI больше не поддерживается и было удалено в базе данных SQL Azure. 


**Рекомендуемые**   
Использование синтаксиса соединения ANSI.

Дополнительные сведения: [неподдерживаемая функция ядро СУБД в SQL Server](/previous-versions/sql/2014/database-engine/discontinued-database-engine-functionality-in-sql-server-2016#Denali)


## <a name="non-ansi-right-outer-join"></a>Правое внешнее соединение не из ANSI<a id="NonANSIRightOuterJoinSyntax"></a>

**Title: в стиле без ANSI правое внешнее соединение не поддерживается и было удалено.**   
**Категория**: предупреждение   

**Описание**   
Дальнейшее внешнее соединение в стиле, отличном от ANSI, прекращено и было удалено в базе данных SQL Azure. 


**Рекомендуемые**   
Использование синтаксиса соединения ANSI.

Дополнительные сведения: [неподдерживаемая функция ядро СУБД в SQL Server](/previous-versions/sql/2014/database-engine/discontinued-database-engine-functionality-in-sql-server-2016#Denali)

## <a name="next-column"></a>Следующий столбец<a id="NextColumn"></a>

**Title: таблицы и столбцы с именем NEXT приведут к ошибке в базе данных SQL Azure.**   
**Категория**: вопрос   

**Описание**   
Обнаружены таблицы или столбцы с именами NEXT. ДЛЯ последовательностей, введенных в Microsoft SQL Server, используется стандартная функция следующего значения ANSI. Если таблица или столбец имеют имя NEXT, а столбец имеет псевдоним VALUE, а также если пропущено ключевое слово AS по стандарту ANSI, то результирующая инструкция может вызвать ошибку.  


**Рекомендуемые**   
При создании псевдонима для таблицы или столбца перепишите инструкции, включив ключевое слово AS по стандарту ANSI. Например, если столбец имеет имя NEXT, а этот столбец имеет псевдоним в виде значения, запрос вызовет `SELECT NEXT VALUE FROM TABLE` ошибку и должен быть переписан в качестве значения SELECT далее в таблице. Аналогично, если таблица имеет имя NEXT и эта таблица имеет псевдоним в виде значения, запрос вызовет `SELECT Col1 FROM NEXT VALUE` ошибку и должен быть переписан в виде `SELECT Col1 FROM NEXT AS VALUE` .

## <a name="raiserror"></a>RAISERROR<a id="RAISERROR"></a>

**Title: вызовы RAISERROR в устаревшем стиле должны быть заменены современными эквивалентами.**   
**Категория**: предупреждение   

**Описание**   
Вызовы RAISERROR, как в приведенном ниже примере, называются устаревшими, так как они не содержат запятые и круглые скобки. `RAISERROR 50001 'this is a test'`. Этот метод вызова инструкции RAISERROR будет прекращен и удален в базе данных SQL Azure. 


**Рекомендуемые**   
Перепишите инструкцию, используя текущий синтаксис RAISERROR, или оцените, является ли этот современный подход `BEGIN TRY { }  END TRY BEGIN CATCH {  THROW; } END CATCH` возможным.

Дополнительные сведения: [неподдерживаемая функция ядро СУБД в SQL Server](/previous-versions/sql/2014/database-engine/discontinued-database-engine-functionality-in-sql-server-2016#Denali)

## <a name="server-audits"></a>Аудиты сервера<a id="ServerAudits"></a>

**Title: использование функций аудита базы данных SQL Azure для замены аудита сервера**   
**Категория**: предупреждение   

**Описание**   
Аудиты сервера не поддерживаются в базе данных SQL Azure.


**Рекомендуемые**   
Рассмотрим функции аудита базы данных SQL Azure, чтобы заменить аудиты сервера.  Azure SQL поддерживает аудит, а функции — более широкие возможности, чем SQL Server. База данных SQL Azure может выполнять аудит различных действий и событий базы данных, включая доступ к данным, изменения схемы (DDL), изменения данных (DML), учетные записи, роли и разрешения (ДКЛ, исключения безопасности. Аудит базы данных SQL Azure увеличивает способность Организации получать подробные сведения о событиях и изменениях, происходящих в их базе данных, в том числе об обновлениях и запросах к данным. Кроме того, можно выполнить миграцию в Azure SQL Управляемый экземпляр или SQL Server на виртуальной машине Azure.

Дополнительные сведения см. в подсистеме [аудита для базы данных SQL Azure](../../database/auditing-overview.md) .

## <a name="server-credentials"></a>Учетные данные сервера<a id="ServerCredentials"></a>

**Title: учетные данные уровня сервера не поддерживаются в базе данных SQL Azure.**   
**Категория**: предупреждение   

**Описание**   
Учетные данные — это запись, которая содержит сведения для проверки подлинности (учетные данные), необходимые для подключения к ресурсу за пределами SQL Server. База данных SQL Azure поддерживает учетные данные базы данных, но не созданные в области SQL Server.   


**Рекомендуемые**   
База данных SQL Azure поддерживает учетные данные для базы данных. Преобразовать учетные данные уровня сервера в учетные данные области базы данных. Также можно перейти на Управляемый экземпляр или SQL Server SQL Azure на виртуальной машине Azure

Дополнительные сведения см. в этой [области. Создание учетных данных для базы данных](/sql/t-sql/statements/create-database-scoped-credential-transact-sql)

## <a name="service-broker"></a>Компонент Service Broker<a id="ServiceBroker"></a>

**Title: Service Broker функция не поддерживается в базе данных SQL Azure.**   
**Категория**: вопрос   

**Описание**   
SQL Server Service Broker обеспечивает встроенную поддержку приложений для обмена сообщениями и очередей в SQL Server ядро СУБД. Функция Service Broker не поддерживается в базе данных SQL Azure.


**Рекомендуемые**   
Функция Service Broker не поддерживается в базе данных SQL Azure. Рассмотрите возможность перехода на Управляемый экземпляр Azure SQL, которая поддерживает компонент Service Broker в пределах одного экземпляра. Также можно перейти на SQL Server на виртуальной машине Azure. 

## <a name="server-scoped-triggers"></a>Триггеры уровня сервера<a id="ServerScopedTriggers"></a>

**Title: триггер уровня сервера не поддерживается в базе данных SQL Azure.**   
**Категория**: предупреждение   

**Описание**   
Триггер — это специальная разновидность хранимой процедуры, которая выполняется в ответ на определенное действие над таблицей, например вставку, удаление или обновление данных. Триггеры уровня сервера не поддерживаются в базе данных SQL Azure. База данных SQL Azure не поддерживает следующие параметры триггеров: для входа в систему, шифрование, с ДОБАВЛЕНИЕм, не для репликации, параметр внешнего имени (нет поддержки внешнего метода), параметр ALL SERVER (триггер DDL), триггер для события входа в систему (триггер входа), база данных SQL Azure не поддерживает триггеры CLR.


**Рекомендуемые**   
Вместо этого используйте триггер уровня базы данных. Также можно перейти на Управляемый экземпляр или SQL Server SQL Azure на виртуальной машине Azure

Дополнительные сведения: [разрешение различий Transact-SQL во время миграции в базу данных SQL](../../database/transact-sql-tsql-differences-sql-server.md#transact-sql-syntax-not-supported-in-azure-sql-database)


## <a name="sql-agent-jobs"></a>Задания агента SQL Server<a id="AgentJobs"></a>

**Title: агент SQL Server задания недоступны в базе данных SQL Azure.**   
**Категория**: предупреждение   

**Описание**   
Агент SQL Server — это служба Microsoft Windows, которая выполняет запланированные административные задачи, которые называются заданиями в SQL Server. Задания агент SQL Server недоступны в базе данных SQL Azure. 


**Рекомендация** Используйте задания обработки эластичных БД (Предварительная версия), которые являются заменой агент SQL Server заданий в базе данных SQL Azure. Задания обработки эластичных баз данных для базы данных SQL Azure позволяют надежно выполнять скрипты T-SQL, охватывающие несколько баз данных, при автоматическом повторе и предоставляя гарантии полного завершения. Также можно выполнить миграцию в Azure SQL Управляемый экземпляр или SQL Server на виртуальных машинах Azure.

Дополнительные сведения: начало [работы с задания обработки эластичных баз данных (Предварительная версия) ](../../database/elastic-jobs-overview.md)

## <a name="sql-database-size"></a>Размер базы данных SQL<a id="SQLDBDatabaseSize"></a>

**Title: база данных SQL Azure не поддерживает размер базы данных больше 100 ТБ.**   
**Категория**: вопрос   

**Описание**   
Размер базы данных превышает максимальный поддерживаемый размер в 100 ТБ. 


**Рекомендуемые**   
Оцените, могут ли данные быть архивированы или сжаты или сегментированы в несколько баз данных. Также можно перейти на SQL Server на виртуальной машине Azure. 

Дополнительные сведения: [ограничения ресурсов Виртуальное ядро](../../database/resource-limits-vcore-single-databases.md) 

## <a name="sql-mail"></a>Служба SQL Mail<a id="SqlMail"></a>

**Title: прекращена поддержка службы SQL Mail.**   
**Категория**: предупреждение   

**Описание**   
Служба SQL Mail прекращена и удалена в базе данных SQL Azure.


**Рекомендуемые**   
Попробуйте выполнить миграцию в Azure SQL Управляемый экземпляр или SQL Server на виртуальных машинах Azure и использовать Database Mail.

Дополнительные сведения: [неподдерживаемая функция ядро СУБД в SQL Server](/previous-versions/sql/2014/database-engine/discontinued-database-engine-functionality-in-sql-server-2016#Denali)

## <a name="systemprocedures110"></a>SystemProcedures110<a id="SystemProcedures110"></a>

**Title: обнаружены инструкции, которые ссылаются на удаленные системные хранимые процедуры, недоступные в базе данных SQL Azure.**   
**Категория**: предупреждение   

**Описание**   
Следующие неподдерживаемые системные и расширенные хранимые процедуры нельзя использовать в базе данных SQL Azure —,,,, `sp_dboption` `sp_addserver` `sp_dropalias` `sp_activedirectory_obj` `sp_activedirectory_scp` , `sp_activedirectory_start` .


**Рекомендуемые**    
Удалите ссылки на неподдерживаемые системные процедуры, которые были удалены в базе данных SQL Azure.

Дополнительные сведения: [неподдерживаемая функция ядро СУБД в SQL Server](/previous-versions/sql/2014/database-engine/discontinued-database-engine-functionality-in-sql-server-2016#Denali)

## <a name="trace-flags"></a>Флаги трассировки<a id="TraceFlags"></a>

**Title: база данных SQL Azure не поддерживает флаги трассировки.**   
**Категория**: предупреждение   

**Описание**   
Флаги трассировки используются для временной установки определенных характеристик сервера или отключения определенного режима. Флаги трассировки часто используются для диагностики проблем, связанных с производительностью, отладки хранимых процедур или сложных компьютерных систем. База данных SQL Azure не поддерживает флаги трассировки. 


**Рекомендуемые**   
Просмотрите раздел затронутые объекты в службе "миграция Azure", чтобы просмотреть все флаги трассировки, которые не поддерживаются в базе данных SQL Azure, и оцените, можно ли их удалить. Кроме того, можно перейти на Azure SQL Управляемый экземпляр, который поддерживает ограниченное число глобальных флагов трассировки или SQL Server на виртуальной машине Azure.

Дополнительные сведения: [разрешение различий Transact-SQL во время миграции в базу данных SQL](../../database/transact-sql-tsql-differences-sql-server.md#transact-sql-syntax-not-supported-in-azure-sql-database)


## <a name="windows-authentication"></a>Проверка подлинности Windows<a id="WindowsAuthentication"></a>

**Title: пользователи базы данных, сопоставленные с проверкой подлинности Windows (встроенная безопасность), не поддерживаются в базе данных SQL Azure.**   
**Категория**: предупреждение   

**Описание**   
База данных SQL Azure поддерживает два типа проверки подлинности 
- Проверка подлинности SQL: использует имя пользователя и пароль 
- Azure Active Directory Authentication: использует удостоверения, управляемые Azure Active Directory, и поддерживается для управляемых и интегрированных доменов. 

Пользователи базы данных, сопоставленные с проверкой подлинности Windows (встроенная безопасность), не поддерживаются в базе данных SQL Azure 



**Рекомендуемые**   
Федерацию локального Active Directory с Azure Active Directory. Затем удостоверение Windows можно заменить эквивалентными удостоверениями Azure Active Directory. Также можно перейти на SQL Server на виртуальной машине Azure.

Дополнительные сведения: [возможности безопасности базы данных SQL](../../database/security-overview.md#authentication)

## <a name="xp_cmdshell"></a>XP_cmdshell<a id="XpCmdshell"></a>

**Title: xp_cmdshell не поддерживается в базе данных SQL Azure.**   
**Категория**: вопрос   

**Описание**   
xp_cmdshell, который порождает командную оболочку Windows и передает строку для выполнения, не поддерживается в базе данных SQL Azure. 


**Рекомендуемые**   
Просмотрите раздел затронутые объекты в службе "миграция Azure", чтобы просмотреть все объекты, использующие xp_cmdshell, и оцените, можно ли удалить ссылку на xp_cmdshell или затронутый объект. Также рассмотрите возможность изучения службы автоматизации Azure, которая предоставляет облачную автоматизацию и службу настройки. Также можно перейти на SQL Server на виртуальной машине Azure. 

## <a name="next-steps"></a>Дальнейшие действия

Чтобы приступить к переносу SQL Server в базу данных SQL Azure, см. [инструкции по миграции SQL Server в базу данных SQL](sql-server-to-sql-database-guide.md).

- Сведения о службах и средствах Майкрософт и сторонних поставщиков, которые помогут вам в использовании различных сценариев переноса баз данных и данных, а также специальных задач см. в разделе [служба и средства для переноса данных](../../../dms/dms-tools-matrix.md).

- Дополнительные сведения о базе данных SQL см. в следующих статьях:
   - [Общие сведения о базе данных SQL Azure](../../database/sql-database-paas-overview.md)
   - [Калькулятор совокупной стоимости владения Azure](https://azure.microsoft.com/pricing/tco/calculator/) 

- Дополнительные сведения о структуре и цикле внедрения для миграции в облако см. в разделе
   -  [Cloud Adoption Framework для Azure](/azure/cloud-adoption-framework/migrate/azure-best-practices/contoso-migration-scale)
   -  [Рекомендации по затратам и изменению размеров рабочих нагрузок, переносятся в Azure](/azure/cloud-adoption-framework/migrate/azure-best-practices/migrate-best-practices-costs) 


- Чтобы оценить уровень доступа к приложениям, см. раздел [набор средств миграции для доступа к данным (Предварительная версия)](https://marketplace.visualstudio.com/items?itemName=ms-databasemigration.data-access-migration-toolkit)
- Дополнительные сведения о выполнении проверки уровня доступа к данным A/B см. [Database experimentation Assistant](/sql/dea/database-experimentation-assistant-overview).
