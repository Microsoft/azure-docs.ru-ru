---
title: 'Oracle для SQL Server на виртуальной машине Azure: руководство по миграции'
description: В этом руководстве описывается перенос схем Oracle в SQL Server на виртуальных машинах Azure с помощью Помощник по миграции SQL Server для Oracle.
ms.service: virtual-machines-sql
ms.subservice: migration-guide
ms.custom: ''
ms.devlang: ''
ms.topic: how-to
author: mokabiru
ms.author: mokabiru
ms.reviewer: MashaMSFT
ms.date: 11/06/2020
ms.openlocfilehash: f9b6dea216e05bb645daf5fdd041cec692821af8
ms.sourcegitcommit: 18a91f7fe1432ee09efafd5bd29a181e038cee05
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/16/2021
ms.locfileid: "103565284"
---
# <a name="migration-guide-oracle-to-sql-server-on-azure-vm"></a>Руководство по миграции: Oracle to SQL Server на виртуальной машине Azure
[!INCLUDE[appliesto-sqldb-sqlmi](../../includes/appliesto-sqldb.md)]

В этом руководстве объясняется, как перенести схемы Oracle в SQL Server на виртуальной машине Azure с помощью Помощник по миграции SQL Server для Oracle. 

Другие сценарии см. в разделе [руководств по миграции баз данных](https://datamigration.microsoft.com/).

## <a name="prerequisites"></a>Предварительные требования 

Чтобы перенести схему Oracle в SQL Server на виртуальной машине Azure, вам потребуется:

- Чтобы проверить, поддерживается ли исходная среда.
- Чтобы скачать [Помощник по миграции SQL Server (SSMA) для Oracle](https://www.microsoft.com/en-us/download/details.aspx?id=54258).
- Целевая [Виртуальная машина SQL Server](../../virtual-machines/windows/sql-vm-create-portal-quickstart.md).
- [Необходимые разрешения для SSMA для Oracle](/sql/ssma/oracle/connecting-to-oracle-database-oracletosql) и [поставщика](/sql/ssma/oracle/connect-to-oracle-oracletosql).

## <a name="pre-migration"></a>Подготовка к миграции

При подготовке к переходу в облако убедитесь, что исходная среда поддерживается и что вы устранили все предварительные требования. Это поможет обеспечить эффективную и успешную миграцию.

Эта часть процесса включает в себя проведение инвентаризации баз данных, которые необходимо перенести, оценка этих баз данных на наличие потенциальных проблем миграции или блокирования, а также разрешение любых элементов, которые могли быть обнаружены. 

### <a name="discover"></a>Обнаружить

Используйте [MAP Toolkit](https://go.microsoft.com/fwlink/?LinkID=316883) для поиска существующих источников данных и сведений о функциях, которые используются в вашей организации, чтобы лучше понять и спланировать миграцию. Этот процесс включает проверку сети для обнаружения всех экземпляров Oracle организации вместе с используемой версией и функциями.

Чтобы использовать MAP Toolkit для проверки инвентаризации, выполните следующие действия. 

1. Откройте [набор MAP Toolkit](https://go.microsoft.com/fwlink/?LinkID=316883).
1. Выберите **создать или выбрать базу данных**.
1. Выберите **создать базу данных инвентаризации**, введите имя создаваемой новой базы данных инвентаризации, укажите краткое описание и нажмите кнопку **ОК**. 
1. Выберите **сбора данных инвентаризации** , чтобы открыть **Мастер инвентаризации и оценки**. 
1. В **мастере инвентаризации и оценки** выберите **Oracle** , а затем нажмите кнопку **Далее**. 
1. Выберите вариант поиска компьютеров, который лучше подходит для бизнес-потребностей и среды, а затем нажмите кнопку **Далее**. 
1. Введите учетные данные или создайте новые учетные данные для систем, которые необходимо исследовать, а затем нажмите кнопку **Далее**.
1. Задайте порядок учетных данных, а затем нажмите кнопку **Далее**. 
1. Укажите учетные данные для каждого компьютера, который требуется обнаружить. Вы можете использовать уникальные учетные данные для каждого компьютера или компьютера или использовать список **учетных данных всех компьютеров** .  
1. Проверьте сводку выбора и нажмите кнопку **Готово**.
1. После завершения проверки просмотрите сводный отчет по **сбору данных** . Сканирование занимает несколько минут и зависит от количества баз данных. По завершении нажмите кнопку **Закрыть** . 
1. Выберите **Параметры** , чтобы создать отчет о оценке и сведениях о базе данных Oracle. Выберите оба параметра (один на один), чтобы создать отчет.


### <a name="assess"></a>Оценка

Определив источники данных, используйте [Помощник по миграции SQL Server (SSMA) для Oracle](https://www.microsoft.com/en-us/download/details.aspx?id=54258) , чтобы оценить миграцию экземпляров oracle на SQL Serverную виртуальную машину, чтобы понимать зазоры между ними. С помощью помощника по миграции можно просматривать объекты и данные базы данных, оценивать базы данных для миграции, переносить объекты базы данных в SQL Server, а затем переносить данные в SQL Server.

Чтобы создать оценку, выполните следующие действия. 

1. Откройте  [Помощник по миграции SQL Server (SSMA) для Oracle](https://www.microsoft.com/en-us/download/details.aspx?id=54258). 
1. Выберите **Файл**, а затем пункт **Новый проект**. 
1. Укажите имя проекта, расположение для сохранения проекта, а затем выберите из раскрывающегося списка целевой объект миграции SQL Server. Щелкните **ОК**. 
1. Введите значения в поля сведения о соединении Oracle в диалоговом окне **соединение с Oracle** .
1. Щелкните правой кнопкой мыши схему Oracle, которую необходимо перенести, в **обозревателе метаданных Oracle**, а затем выберите команду **создать отчет**. При этом будет создан HTML-отчет. Кроме того, можно выбрать пункт **создать отчет** на панели навигации после выбора базы данных.

1. В **обозревателе метаданных Oracle** выберите схему Oracle, а затем выберите **создать отчет** , чтобы создать отчет HTML с статистикой преобразования и ошибкой/предупреждениями, если таковые имеются.
1. Проверьте HTML-отчет на наличие статистики преобразования, а также ошибок и предупреждений. Проанализируйте ее, чтобы понять проблемы преобразования и способы их устранения.

   Этот отчет можно также открыть из папки проектов SSMA, как это было выбрано на первом экране. В приведенном выше примере нахождение файла report.xml из: 

   `drive:\<username>\Documents\SSMAProjects\MyOracleMigration\report\report_2016_11_12T02_47_55\`

    затем откройте его в Excel, чтобы получить список объектов Oracle и усилия, необходимые для выполнения преобразования схемы.


### <a name="validate-data-types"></a>Обновление типов данных

Проверьте сопоставления типов данных по умолчанию и измените их в зависимости от требований, если это необходимо. Для этого выполните следующие действия. 

1. В главном меню выберите **Сервис**. 
1. Выберите **Параметры проекта**. 
1. Перейдите на вкладку **Сопоставления типов**. 
1. Сопоставление типов для каждой таблицы можно изменить, выбрав таблицу в **обозревателе метаданных Oracle**. 



### <a name="convert-schema"></a>Преобразовать схему

Чтобы преобразовать схему, выполните следующие действия. 

1. Используемых Чтобы преобразовать динамические или нерегламентированные запросы, щелкните правой кнопкой мыши узел и выберите команду **Добавить инструкцию**.
1. Выберите **подключиться к SQL Server** в верхней строке панели навигации и укажите сведения о подключении для SQL Server на виртуальной машине Azure. Можно выбрать подключение к существующей базе данных или указать новое имя. в этом случае база данных будет создана на целевом сервере.
1. Щелкните правой кнопкой мыши схему и выберите команду **преобразовать схему**.
1. После завершения преобразования схемы Сравните и изучите структуру схемы для выявления потенциальных проблем.

   Проект можно сохранить локально для применения в автономном режиме исправления схемы. Это можно сделать, выбрав **сохранить проект** в меню **файл** . Это дает возможность оценивать исходную и целевую схемы в автономном режиме и выполнять исправление перед публикацией схемы в SQL Server.


## <a name="migrate"></a>Миграция

После выполнения необходимых условий и выполнения задач, связанных с стадией **перед миграцией** , можно приступать к миграции схемы и данных. Миграция состоит из двух этапов: публикация схемы и перенос данных. 


Чтобы опубликовать схему и перенести данные, выполните следующие действия. 

1. Щелкните правой кнопкой мыши базу данных в **обозревателе метаданных SQL Server**  и выберите **синхронизировать с базой данных**. Это действие публикует схему Oracle для SQL Server на виртуальной машине Azure. 
1. Щелкните правой кнопкой мыши схему Oracle в **обозревателе метаданных Oracle** и выберите пункт **перенести данные**. Кроме того, можно выбрать вариант перенести данные из области навигации в верхней строке.
1. Укажите сведения о подключении для Oracle и SQL Server на виртуальной машине Azure в диалоговом окне.
1. После завершения миграции просмотрите отчет о переносе данных:
1. Подключитесь к SQL Server на виртуальной машине Azure, используя [SQL Server Management Studio](/sql/ssms/download-sql-server-management-studio-ssms) для просмотра данных и схемы в экземпляре SQL Server. 


В дополнение к использованию SSMA можно также использовать SQL Server Integration Services (SSIS) для переноса данных. Дополнительные сведения см. на следующих ресурсах: 
- Статья [Начало работы с SQL Server Integration Services](https://docs.microsoft.com//sql/integration-services/sql-server-integration-services).
- Технический документ [SQL Server Integration Services: службы SSIS для Azure и гибридное перемещение данных](https://download.microsoft.com/download/D/2/0/D20E1C5F-72EA-4505-9F26-FEF9550EFD44/SSIS%20Hybrid%20and%20Azure.docx).



## <a name="post-migration"></a>После миграции 

После успешного завершения этапа **миграции** необходимо выполнить ряд задач, выполняемых после миграции, чтобы обеспечить бесперебойную и эффективную работу всех компонентов.

### <a name="remediate-applications"></a>Исправление приложений

После переноса данных в целевую среду все приложения, которые раньше использовали источник, должны приступить к приему целевого объекта. Для этого в некоторых случаях потребуется внести изменения в приложения.

[Набор средств миграции доступа к данным](https://marketplace.visualstudio.com/items?itemName=ms-databasemigration.data-access-migration-toolkit) — это расширение для Visual Studio Code, которое позволяет анализировать исходный код Java и обнаруживать вызовы и запросы API доступа к данным, предоставляя представление с одной областью, что необходимо для поддержки новой серверной части базы данных. Дополнительные сведения см. в блоге [Oracle о переносе приложения Java](https://techcommunity.microsoft.com/t5/microsoft-data-migration/migrate-your-java-applications-from-oracle-to-sql-server-with/ba-p/368727) . 

### <a name="perform-tests"></a>Выполнение тестов

Тестовый подход к переносу базы данных состоит из выполнения следующих действий.

1. **Разработка проверочных тестов**. Чтобы протестировать миграцию базы данных, необходимо использовать SQL-запросы. Необходимо создать запросы проверки, которые будут выполняться как в исходной, так и в целевой базах данных. Запросы на проверку должны охватывать определенную область.

2. **Настройка тестовой среды**. Тестовая среда должна содержать копию базы данных-источника и целевой базы данных. Не забудьте изолировать тестовую среду.

3. **Выполнение проверочных тестов**. Выполните проверочные тесты для источника и целевого объекта, а затем проанализируйте результаты.

4. **Запустите тесты производительности**. Запустите тест производительности для источника и целевого объекта, а затем проанализируйте и сравните результаты.

### <a name="optimize"></a>Оптимизация

Этап, выполняемый после миграции, крайне важен для согласования любых проблем с точностью данных и проверки полноты, а также для устранения проблем с производительностью рабочей нагрузки.

> [!Note]
> Дополнительные сведения об этих проблемах и конкретные действия по их устранению см. в [руководстве по проверке и оптимизации после миграции](/sql/relational-databases/post-migration-validation-and-optimization-guide).


## <a name="migration-assets"></a>Ресурсы, посвященные миграции 

Дополнительную помощь по выполнению этого сценария миграции см. в следующих ресурсах, которые были разработаны с учетом поддержки реальных проектов миграции.

| **Заголовок или ссылка**                                                                                                                                          | **Описание**                                                                                                                                                                                                                                                                                                   |
| ------------------------------------------------------------------------------------------------------------------------------------------------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [Модель и средство оценки рабочей нагрузки данных](https://github.com/Microsoft/DataMigrationTeam/tree/master/Data%20Workload%20Assessment%20Model%20and%20Tool) | Это средство предоставляет предлагаемые "оптимальные" целевые платформы, готовность к облаку и уровень исправления приложения/базы данных для конкретной рабочей нагрузки. Он обеспечивает простое, одноразовое вычисление и создание отчетов, которое существенно помогает ускорить оценку больших объемов, предоставляя и автоматизируя и равномерное решение целевой платформы.                                                          |
| [Артефакты сценария инвентаризации Oracle](https://github.com/Microsoft/DataMigrationTeam/tree/master/Oracle%20Inventory%20Script%20Artifacts)                 | Этот ресурс включает в себя запрос PL/SQL, который обращается к системным таблицам Oracle и предоставляет количество объектов по типу схемы, типу объекта и состоянию. Он также предоставляет приблизительную оценку «необработанных данных» в каждой схеме и размер таблиц в каждой схеме с результатами, хранящимися в формате CSV.                                                                                                               |
| [Автоматизация SSMA сбора оценки Oracle & консолидация](https://github.com/microsoft/DataMigrationTeam/tree/master/IP%20and%20Scripts/Automate%20SSMA%20Oracle%20Assessment%20Collection%20%26%20Consolidation)                                             | Этот набор ресурсов использует CSV-файл в качестве записи (sources.csv в папках проекта) для создания XML-файлов, необходимых для выполнения оценки SSMA в режиме консоли. source.csv предоставляется клиентом на основе инвентаризации существующих экземпляров Oracle. Выходные файлы — это AssessmentReportGeneration_source_1.xml, ServersConnectionFile.xml и VariableValueFile.xml.|
| [SSMA для распространенных ошибок Oracle и способы их устранения](https://aka.ms/dmj-wp-ssma-oracle-errors)                                                           | С помощью Oracle можно назначить нескалярное условие в предложении WHERE. Однако SQL Server не поддерживает этот тип условия. В результате Помощник по миграции SQL Server (SSMA) для Oracle не преобразует запросы с нескалярным условием в предложении WHERE, а вместо этого создает ошибку O2SS0001. В этом техническом документе содержатся дополнительные сведения о проблемах и способы их устранения.          |
| [Руководство по миграции с Oracle на SQL Server](https://github.com/microsoft/DataMigrationTeam/blob/master/Whitepapers/Oracle%20to%20SQL%20Server%20Migration%20Handbook.pdf)                | В этом документе рассматриваются задачи, связанные с миграцией схемы Oracle в последнюю версию SQL Сервербасе. Если миграция требует внесения изменений в функции и функции, то возможное влияние каждого изменения на приложения, использующие эту базу данных, должно быть тщательно рассмотрено.                                                     |

Эти ресурсы были разработаны в рамках программы Data SQL Ninja, которая спонсируется группой разработчиков Azure Data Group. Основная часть программы Data SQL Ninja заключается в разрешении и ускорении сложной модернизации и реализация перехода на платформу данных Microsoft Azure. Если вы считаете, что ваша организация заинтересована в участии в программе Data SQL Ninja, обратитесь в службу поддержки своей учетной записи и попросите отправить заявку.

## <a name="next-steps"></a>Дальнейшие действия

- Чтобы проверить доступность служб, применимых к SQL Server, см. [Глобальный центр инфраструктуры Azure](https://azure.microsoft.com/global-infrastructure/services/?regions=all&amp;products=synapse-analytics,virtual-machines,sql-database) .

- Сведения о службах и средствах Майкрософт и сторонних поставщиков, которые помогут вам в использовании различных сценариев переноса баз данных и данных, а также специальных задач см. в статье [служба и средства для переноса данных.](../../../dms/dms-tools-matrix.md)

- Дополнительные сведения о SQL Azure см. в следующих статьях:
   - [Варианты развертывания](../../azure-sql-iaas-vs-paas-what-is-overview.md)
   - [SQL Server на виртуальных машинах Azure](../../virtual-machines/windows/sql-server-on-azure-vm-iaas-what-is-overview.md)
   - [Калькулятор совокупной стоимости владения Azure](https://azure.microsoft.com/pricing/tco/calculator/) 


- Дополнительные сведения о структуре и цикле внедрения для миграции в облако см. в разделе
   -  [Cloud Adoption Framework для Azure](/azure/cloud-adoption-framework/migrate/azure-best-practices/contoso-migration-scale)
   -  [Рекомендации по затратам и изменению размеров рабочих нагрузок, переносятся в Azure](/azure/cloud-adoption-framework/migrate/azure-best-practices/migrate-best-practices-costs) 

- Сведения о лицензировании см. в разделе
   - [Использование собственной лицензии с Преимущество гибридного использования Azure](../../virtual-machines/windows/licensing-model-azure-hybrid-benefit-ahb-change.md)
   - [Бесплатная расширенная поддержка для SQL Server 2008 и SQL Server 2008 R2](../../virtual-machines/windows/sql-server-2008-extend-end-of-support.md)


- Чтобы оценить уровень доступа к приложениям, см. раздел [набор средств миграции для доступа к данным (Предварительная версия)](https://marketplace.visualstudio.com/items?itemName=ms-databasemigration.data-access-migration-toolkit)
- Дополнительные сведения о выполнении проверки уровня доступа к данным A/B см. [Database experimentation Assistant](/sql/dea/database-experimentation-assistant-overview).

