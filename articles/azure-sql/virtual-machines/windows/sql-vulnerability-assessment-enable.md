---
title: Оценка уязвимостей SQL для SQL Server на виртуальных машинах Azure
description: Описание оценки уязвимостей SQL для SQL Server баз данных, работающих на виртуальных машинах Azure.
services: virtual-machines-windows
author: MashaMSFT
ms.service: virtual-machines-sql
ms.subservice: security
ms.topic: conceptual
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 12/02/2020
ms.author: mathoma
ms.openlocfilehash: 817203b8e795ce15c8c48c18bc7b9a46217dc93a
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "97356733"
---
# <a name="sql-vulnerability-assessment-for-sql-server-on-azure-vms"></a>Оценка уязвимостей SQL для SQL Server на виртуальных машинах Azure
[!INCLUDE[appliesto-sqlvm](../../includes/appliesto-sqlvm.md)]

Оценка уязвимости SQL (ва) — это простая в настройке служба, которая может обнаруживать, записывать и помогать устранять потенциальные уязвимости базы данных. Используйте его для упреждающего повышения безопасности базы данных для SQL Server на виртуальных машинах Azure. 

Оценка уязвимостей является частью предложения ["защитник Azure для SQL"](../../database/azure-defender-for-sql.md) , которое является единым пакетом для расширенных возможностей обеспечения безопасности SQL. Доступ к оценке уязвимостей и управление ими можно получить с помощью центрального портала Azure Defender для SQL или с помощью центра безопасности Azure. 

## <a name="overview"></a>Обзор

Оценка уязвимости SQL (ва) — это служба, которая обеспечивает видимость состояния безопасности. Оценка уязвимостей включает действия по устранению проблем безопасности и повышению уровня безопасности базы данных. Эта служба может помочь в выполнении следующих задач: 

- соблюдение нормативных требований, требующих отчетов о проверке базы данных; 
- соблюдение стандартов конфиденциальности данных; 
- мониторинг динамической среды базы данных, в которой сложно отслеживать изменения. 

Оценка уязвимостей — это служба сканирования, которая использует базу знаний с правилами, показывающими уязвимости системы безопасности. Он выделяет отклонения от рекомендаций, таких как непредусмотренные настройки, чрезмерные разрешения и незащищенные конфиденциальные данные. 

Правила основаны на рекомендациях корпорации Майкрософт и сосредоточены на вопросах безопасности, представляющих наибольшую опасность для базы данных и ее ценных данных. Они охватывают проблемы уровня базы данных и проблемы безопасности на уровне сервера, такие как параметры брандмауэра сервера и разрешения уровня сервера. В этих правилах также представлены многие требования различных контролирующих органов, что позволяет соблюдать стандарты соответствия. 

Результаты проверки включают в себя практические действия по устранению каждой проблемы, а также настроенные скрипты исправления, если их можно применить. Вы можете настроить отчет об оценке для своей среды, установив допустимый базовый план для: 

- Конфигурации разрешений 
- Конфигурации компонентов 
- Параметры базы данных 

## <a name="enable-sql-va"></a>Включить SQL ва

Включите защитник Azure для серверов SQL на компьютерах, чтобы реализовать оценку уязвимостей. 

Чтобы использовать защитник Azure для SQL Server, выполните следующие действия.

1. [Установка расширения агента IaaS для SQL](sql-agent-extension-manually-register-single-vm.md)
1. [Включение автоматической подготовки агента Log Analytics](../../../security-center/security-center-enable-data-collection.md#auto-provision-mma)
1. [Включение дополнительного плана центра безопасности](../../../security-center/defender-for-sql-usage.md#step-2-enable-the-optional-plan-in-security-centers-pricing-and-settings-page)

Так как Оценка уязвимостей входит в состав защитника Azure для SQL, то после включения защитника Azure на виртуальной машине базы данных автоматически сканируются каждые 12 часов, чтобы вычислить уязвимости системы безопасности. Результаты отправляются в центр безопасности Azure для централизованного агрегированного представления пространства данных SQL, защищенного защитником Azure для SQL. 

> [!NOTE]
> Сканирование является легковесным и надежным, и его выполнение занимает всего несколько секунд на одну базу данных и полностью доступно только для чтения. При проверке никакие изменения в базу данных не вносятся. 

## <a name="view-report"></a>Просмотр отчета

В отчете базы данных представлен обзор состояния безопасности. В нем указывается, сколько обнаруженных проблем и их серьезность. Результаты включают предупреждения о отклонениях от рекомендаций и моментальный снимок параметров безопасности, таких как субъекты и роли базы данных и связанные с ними разрешения.  

Чтобы просмотреть отчет, выполните следующие действия.

1. Перейдите в [Центр безопасности Azure](https://ms.portal.azure.com/#blade/Microsoft_Azure_Security/SecurityMenuBlade/0) на портал Azure.
1. В меню **Общие** выберите пункт **рекомендации** . 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/recommendations-in-security-center.png" alt-text="Перейдите к разделу рекомендации в разделе Параметры в центре безопасности Azure портал Azure":::

1. Прокрутите вниз до раздела рекомендации и разверните узел **исправление уязвимостей**.
1. Выберите **результаты оценки уязвимостей на серверах SQL Server на компьютерах, которые следует исправить**. 

   :::image type="content" source="media/sql-vulnerability-assessment-enable/report-in-security-center.png" alt-text="Просмотрите отчет в колонке рекомендации центра безопасности Azure.":::

На этой странице отображается совокупность уязвимостей безопасности, определенных для всех SQL Server виртуальных машин в подписке. 


## <a name="analyze-results"></a>Анализ результатов

Проверьте результаты и выявление результатов в отчете, которые являются настоящими проблемами безопасности в вашей среде. Изучите подробные сведения о каждой проблеме, чтобы понять, как она влияет на безопасность и почему проверка безопасности не пройдена.  

:::image type="content" source="media/sql-vulnerability-assessment-enable/sample-report.png" alt-text="Проверьте результаты и выявление результатов в отчете, которые являются настоящими проблемами безопасности в вашей среде.":::

## <a name="set-baseline"></a>Задать базовый план 

При проверке результатов оценки можно пометить результаты как приемлемые базовые показатели в вашей среде. Базовые показатели — важные параметры, влияющие на содержимое отчета о проверке. При следующих проверках результаты, которые соответствуют базовым показателям, будут рассматриваться как прошедшие проверку. После того как вы установили базовое состояние безопасности, Оценка уязвимостей будет сообщать только об отклонениях от базовых показателей. Таким образом вы можете сосредоточиться на соответствующих проблемах. 

:::image type="content" source="media/sql-vulnerability-assessment-enable/analyze-report-for-details.png" alt-text="При проверке результатов оценки можно пометить результаты как приемлемые базовые показатели в вашей среде.":::

## <a name="export-results"></a>Экспорт результатов

Используйте функцию [непрерывного экспорта](../../../security-center/continuous-export.md) в центре безопасности Azure, чтобы экспортировать результаты оценки уязвимостей в концентратор событий Azure или в log Analytics рабочую область. 


## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. в статьях [Оценка уязвимостей SQL в SQL Azure](../../database/sql-vulnerability-assessment.md)и [Защита данных SQL с помощью центра безопасности Azure](../../../security-center/security-center-introduction.md).

