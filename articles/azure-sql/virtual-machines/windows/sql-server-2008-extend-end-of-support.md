---
title: Расширенная поддержка SQL Server 2008 и 2008 R2
description: 'Получите расширенную поддержку для SQL Server 2008 и SQL Server 2008 R2: переведите свой экземпляр SQL Server на платформу Azure или приобретите услуги расширенной поддержки для локальных экземпляров.'
services: virtual-machines-windows
documentationcenter: ''
author: MashaMSFT
tags: azure-service-management
ms.service: virtual-machines-sql
ms.subservice: management
ms.topic: conceptual
ms.tgt_pltfrm: vm-windows-sql-server
ms.workload: iaas-sql-server
ms.date: 04/08/2019
ms.author: mathoma
ms.reviewer: jroth
ms.custom: seo-lt-2019
ms.openlocfilehash: 4c25adc16d14b4a5fb72ae0103ca05b193b40499
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "97359172"
---
# <a name="extend-support-for-sql-server-2008-and-sql-server-2008-r2-with-azure"></a>Расширенная поддержка SQL Server 2008 и SQL Server 2008 R2 с Azure
[!INCLUDE[appliesto-sqlvm](../../includes/appliesto-sqlvm.md)]

Поддержка решений SQL Server 2008 и SQL Server 2008 R2 [завершена в связи с окончанием их жизненного цикла](https://www.microsoft.com/sql-server/sql-server-2008). Поскольку многие клиенты по-прежнему пользуются этими версиями, мы предлагаем несколько вариантов дальнейшей поддержки. Вы можете перенести свои локальные экземпляры SQL Server на виртуальные машины Azure, перейти на Базу данных SQL Azure или продолжить пользоваться локальными экземплярами, оплатив доступ к дальнейшим обновлениям для системы безопасности.

В отличие от управляемых экземпляров, при переходе на виртуальные машины Azure вам не придется повторно сертифицировать свои приложения. И в отличие от дальнейшей работы в локальном режиме, при переходе на виртуальные машины Azure вы будете и далее бесплатно получать обновления для системы безопасности.

Далее в этой статье рассматриваются различные аспекты переноса экземпляра SQL Server на виртуальную машину Azure.

Более подробные сведения о вариантах действий после прекращения поддержки, см. в статье об [окончании поддержки](/sql/sql-server/end-of-support/sql-server-end-of-life-overview).

## <a name="provisioning"></a>Подготовка

В Azure Marketplace доступен образ **SQL Server 2008 R2 на базе Windows Server 2008 R2** с оплатой по мере использования.

Клиенты, которые по-прежнему используют SQL Server 2008, должны будут самостоятельно установить SQL Server 2008 R2 или перейти на эту версию. Аналогичным образом клиенты, которые используют Windows Server 2008, должны будут развернуть свои виртуальные машины из собственного виртуального жесткого диска или перейти на Windows Server 2008 R2.

В образах, развертываемых через Azure Marketplace, заранее установлено расширение SQL IaaS. Расширение SQL IaaS необходимо для гибкого лицензирования и автоматической установки исправлений. Клиентам, которые развертывают самостоятельно установленные виртуальные машины, потребуется вручную установить расширение SQL IaaS. Расширение SQL IaaS не поддерживается на Windows Server 2008.

> [!NOTE]
> Хотя колонки **Создание** и **Управление** в SQL Server совместимы с образом SQL Server 2008 R2 на портале Azure, следующие функции _не поддерживаются_: автоматическое резервное копирование, интеграция с Azure Key Vault, службы R и конфигурация хранилища.

## <a name="licensing"></a>Лицензирование
Лицензии на развертывание SQL Server 2008 R2 с оплатой по мере использования можно преобразовать в лицензии [Преимущество гибридного использования Azure](https://azure.microsoft.com/pricing/hybrid-benefit/).

Чтобы преобразовать лицензию на основе Software Assurance (SA) на оплату по мере использования, клиенты должны зарегистрироваться в [расширении агента IaaS SQL](sql-agent-extension-manually-register-single-vm.md). После регистрации можно будет выбирать тип лицензии SQL: Преимущество гибридного использования Azure или оплата по мере использования.

Самостоятельно установленные экземпляры SQL Server 2008 или SQL Server 2008 R2 на виртуальной машине Azure могут зарегистрироваться в расширении агента IaaS SQL и преобразовать их тип лицензии в "Оплата по мере использования".

## <a name="migration"></a>Миграция
Экземпляры SQL Server после окончания поддержки можно переносить на виртуальные машины Azure с использованием средств ручного резервного копирования и восстановления. Это наиболее распространенный способ миграции с локальной среды на виртуальную машину Azure.

### <a name="azure-site-recovery"></a>Azure Site Recovery

Для пакетной миграции рекомендуем использовать службу [Azure Site Recovery](../../../site-recovery/site-recovery-overview.md). С помощью Azure Site Recovery клиенты могут реплицировать всю виртуальную машину, включая SQL Server, из локальной среды в виртуальную машину Azure.

Для надлежащего восстановления SQL Server необходимы согласованные с приложениями моментальные снимки Azure Site Recovery. Azure Site Recovery поддерживает возможность создания согласованных с приложениями моментальных снимков с минимальным интервалом в 1 час. Минимальная целевая точка восстановления (RPO), возможная для SQL Server при миграции с использованием Azure Site Recovery, составляет 1 час. Целевое время восстановления (RTO) составляет 2 часа плюс время восстановления SQL Server.

### <a name="database-migration-service"></a>Database Migration Service

[Azure Database Migration Service](../../../dms/dms-overview.md) является вариантом для клиентов, если миграция выполняется из локальной среды в виртуальную машину Azure путем обновления SQL Server до версии 2012 или более поздней.

## <a name="disaster-recovery"></a>Аварийное восстановление

Ниже описаны решения для аварийного восстановления SQL Server после окончания поддержки на виртуальной машине Azure.

- **Резервные копии SQL Server.** Azure Backup поможет вам защитить SQL Server 2008 и 2008 R2 после окончания поддержки от программ-шантажистов, случайного удаления и повреждения с 15-минутной целевой точкой восстановления и функцией восстановления на определенный момент времени. Дополнительные сведения см. в [этой статье](../../../backup/sql-support-matrix.md#scenario-support).
- **Доставка журналов.** Для уменьшения RTO вы можете создать реплику доставки журналов в другой зоне или регионе Azure с непрерывным восстановлением. Доставку журналов необходимо настроить вручную.
- **Azure Site Recovery.** Вы можете реплицировать виртуальную машину между зонами и регионами с помощью репликации Azure Site Recovery. Для надлежащего восстановления SQL Server в случае аварии необходимы согласованные с приложениями моментальные снимки. В ситуации аварийного восстановления Azure Site Recovery обеспечивает для SQL Server после окончания поддержки минимальные показатели RPO в 1 час RTO в 2 часа (плюс время восстановления SQL Server).

## <a name="security-patching"></a>Установка обновлений для системы безопасности

Расширенные обновления системы безопасности для SQL Server виртуальные машины доставляются по Центр обновления Майкрософтным каналам после регистрации SQL Server виртуальной машины с [расширением агента IaaS SQL](sql-agent-extension-manually-register-single-vm.md). Исправления можно загружать вручную или автоматически.

*Automated patching* включен по умолчанию. Автоматическая установка исправлений позволяет Azure автоматически исправлять SQL Server и операционную систему. Если у вас установлено расширение IaaS для SQL Server, вы можете указать день недели, время и длительность периода обслуживания. Azure устанавливает исправления в период обслуживания. Расписание периода обслуживания использует для определения времени региональные параметры VM. Дополнительные сведения см. в статье об [автоматической установке исправлений SQL Server на виртуальных машинах Azure](automated-patching.md).


## <a name="next-steps"></a>Дальнейшие действия

Перенос виртуальной машины SQL Server на платформу Azure:

* [Миграция базы данных SQL Server в экземпляр SQL Server на виртуальной машине Azure](migrate-to-vm-from-sql-server.md)

Начало работы с SQL Server на виртуальных машинах Azure:

* [Создание виртуальной машины SQL Server на портале Azure](sql-vm-create-portal-quickstart.md).

Ответы на часто задаваемые вопросы о виртуальных машинах SQL Server:

* [Вопросы и ответы об SQL Server на виртуальных машинах Azure](frequently-asked-questions-faq.md)

Дополнительные сведения о вариантах действий после окончания поддержки и дальнейших обновлениях для системы безопасности:

* [Окончание поддержки](/sql/sql-server/end-of-support/sql-server-end-of-life-overview) & [Дополнительные обновления для системы безопасности](/sql/sql-server/end-of-support/sql-server-extended-security-updates)