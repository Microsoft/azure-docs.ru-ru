---
title: Пример приложения с несколькими клиентами — SaaS Wingtip
description: В этой статье приводятся шаги и рекомендации по установке и запуску примера мультитенантного приложения SaaS, использующего Базу данных SQL Azure — Wingtip Tickets.
services: sql-database
ms.service: sql-database
ms.subservice: scenario
ms.custom: seo-lt-2019, sqldbrb=1
ms.devlang: ''
ms.topic: conceptual
author: stevestein
ms.author: sstein
ms.reviewer: ''
ms.date: 12/18/2018
ms.openlocfilehash: aa9215fa001fb117000eb6a68867ddd46fac9b92
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "92780331"
---
# <a name="general-guidance-for-working-with-wingtip-tickets-sample-saas-apps"></a>Общие рекомендации по работе с примерами приложений SaaS Wingtip Tickets
[!INCLUDE[appliesto-sqldb](../includes/appliesto-sqldb.md)]

Эта статья содержит общие рекомендации по запуску примеров приложений SaaS Wingtip Tickets, использующих Базу данных SQL Azure.

## <a name="download-and-unblock-the-wingtip-tickets-saas-scripts"></a>Скачивание и разблокирование сценариев SaaS Wingtip Tickets

Исполняемое содержимое (скрипты, библиотеки DLL) может быть заблокировано Windows, в то время как ZIP-файлы можно загрузить с внешнего источника, а затем извлечь их содержимое. При извлечении скриптов из ZIP-файла **выполните следующие действия, чтобы разблокировать ZIP-файл перед извлечением**. После этого скрипты можно выполнять.

1. Перейдите в репозиторий SaaS Wingtip Tickets на сайте GitHub, в котором хранится шаблон аренды базы данных, который вы хотите просмотреть.
    - [WingtipTicketsSaaS-StandaloneApp](https://github.com/Microsoft/WingtipTicketsSaaS-StandaloneApp)
    - [WingtipTicketsSaaS-DbPerTenant](https://github.com/Microsoft/WingtipTicketsSaaS-DbPerTenant)
    - [WingtipTicketsSaaS-MultiTenantDb](https://github.com/Microsoft/WingtipTicketsSaaS-MultiTenantDb)
2. Выберите **Clone or download** (Клонировать или скачать).
3. Щелкните **скачать ZIP** -файл и сохраните его.
4. Щелкните правой кнопкой мыши этот ZIP-файл и выберите **Свойства**. Имя ZIP-файла будет соответствовать имени репозитория. (Например, _WingtipTicketsSaaS-DbPerTenant-master.zip_.)
5. На вкладке **Общие** выберите **Разблокировать**.
6. Нажмите кнопку **ОК**.
7. Извлеките файлы.

Сценарии находятся в *... \\ Папка учебных модулей* .


## <a name="working-with-the-wingtip-tickets-powershell-scripts"></a>Работа со сценариями PowerShell для приложения Wingtip Tickets

Чтобы использовать пример с максимальной пользой, необходимо детально изучить приведенные скрипты. Используйте точки останова и пошагово выполните сценарии, изучив особенности реализации различных шаблонов SaaS. Для легкого пошагового выполнения указанных скриптов и прохождения модулей мы рекомендуем использовать [интегрированную среду сценариев PowerShell](/powershell/scripting/components/ise/introducing-the-windows-powershell-ise).

### <a name="update-the-configuration-file-for-your-deployment"></a>Обновление файла конфигурации для развертывания

Измените файл **UserConfig.psm1**, используя имя группы ресурсов и значение пользователя, заданные во время развертывания:

1. Откройте *интегрированную среду сценариев PowerShell* и загрузите файл *Learning Modules*\\UserConfig.psm1\\.
2. В полях *ResourceGroupName* и *Name* введите специфические для развертывания значения (только в строках 10 и 11).
3. Сохраните изменения.

Если задать эти значения, относящиеся к развертыванию, здесь, вам не понадобится обновлять их в каждом скрипте.

### <a name="execute-the-scripts-by-pressing-f5"></a>Выполнение сценариев нажатием клавиши F5

Некоторые скрипты используют *$PSScriptRoot*, чтобы разрешить перемещение по папкам. Переменная *$PSScriptRoot* обрабатывается только при выполнении скрипта по нажатию клавиши **F5**.  Если выделить несколько скриптов и запустить их (**F8**), может произойти ошибка, поэтому нажмите клавишу **F5** при выполнении скриптов.

### <a name="step-through-the-scripts-to-examine-the-implementation"></a>Пошаговое выполнение скриптов и изучение их реализации

Лучший способ разобраться в скриптах — поэтапно выполнить их, чтобы узнать, что они делают. Просмотрите включенные скрипты **Demo-** с легким детализированным рабочим процессом. В скриптах **Demo-** показаны шаги, необходимые для выполнения каждой задачи, поэтому установите точки останова и подробно изучите отдельные вызовы, чтобы просмотреть сведения о реализации для различных шаблонов SaaS.

Советы для просмотра и пошагового выполнения скриптов PowerShell:

- Откройте скрипты **Demo-** в интегрированной среде сценариев PowerShell.
- Выполните скрипт или продолжайте работу, нажав клавишу **F5** (использование клавиши **F8** не рекомендуется, так как при этом переменная *$PSScriptRoot* не обрабатывается во время выполнения нескольких скриптов).
- Поместите точки останова, щелкнув или выбрав линию и нажав клавишу **F9**.
- Чтобы обойти функцию или вызов скрипта, нажмите клавишу **F10**.
- Чтобы перейти к функции или вызову скрипта, нажмите клавишу **F11**.
- Чтобы выйти из текущей функции или скрипта, нажмите клавиши **SHIFT+F11**.


## <a name="explore-database-schema-and-execute-sql-queries-using-ssms"></a>Просмотр схемы базы данных и выполнение SQL-запросов с помощью SSMS

Используйте [SQL Server Management Studio (SSMS)](/sql/ssms/download-sql-server-management-studio-ssms) для подключения и просмотра серверов и баз данных приложения.

В развертывании изначально есть клиенты и серверы каталогов для подключения. Схема именования серверов зависит от шаблона аренды базы данных (ниже приведены точные сведения).

   - **Изолированное приложение:** серверы для каждого клиента (например, сервер *contosoconcerthall-&lt;Пользователь&gt;*) и *catalog-sa-&lt;Пользователь&gt;*.
   - **Однотенантная база данных: серверы** *tenants1-dpt-&lt;Пользователь&gt;* и *catalog-dpt-&lt;Пользователь&gt;*.
   - **Мультитенантная база данных: серверы** *tenants1-mt-&lt;Пользователь&gt;* и *catalog-mt-&lt;Пользователь&gt;*.

Для успешного выполнения демонстрационного подключения на обоих серверах есть [правило брандмауэра](firewall-configure.md), которое разрешает трафик со всех IP-адресов.


1. Откройте среду *SSMS* и подключитесь к клиентам. Имя сервера зависит от выбранного шаблона аренды базы данных (ниже приведены точные сведения).
    - **Изолированное приложение:** серверы отдельных клиентов (например, *contosoconcerthall-&lt;Пользователь&gt;.database.windows.net*).
    - **Однотенантная база данных:** *tenants1-dpt-&lt;Пользователь&gt;.database.windows.net*.
    - **Мультитенантная база данных:** *tenants1-mt-&lt;Пользователь&gt;.database.windows.net*.
2. Нажмите кнопку **подключить**  >  **ядро СУБД...**:

   ![сервер каталога](./media/saas-tenancy-wingtip-app-guidance-tips/connect.png)

3. Демонстрационные учетные данные: имя входа — *разработчик*, пароль — *P \@ ssword1*

    На следующем рисунке показано имя для входа для шаблона *однотенантной базы данных*.
    ![connection](./media/saas-tenancy-wingtip-app-guidance-tips/tenants1-connect.png)



4. Повторите шаги 2–3 и подключитесь к серверу каталога (ниже указаны имена конкретных серверов на основе выбранного шаблона аренды базы данных).
    - **Изолированное приложение:** *catalog-sa-&lt;Пользователь&gt;.database.windows.net*.
    - **Однотенантная база данных:** *catalog-dpt-&lt;Пользователь&gt;.database.windows.net*.
    - **Мультитенантная база данных:** *catalog-mt-&lt;Пользователь&gt;.database.windows.net*.


После успешного подключения вы увидите все серверы. Список баз данных может отличаться в зависимости от подготовленных клиентов.

На следующем рисунке показано имя для входа для шаблона *однотенантной базы данных*.

![обозреватель объектов](./media/saas-tenancy-wingtip-app-guidance-tips/object-explorer.png)



## <a name="next-steps"></a>Дальнейшие действия
- [Развертывание отдельного SaaS-приложения Wingtip Tickets](./saas-standaloneapp-get-started-deploy.md)
- [Развертывание приложения SaaS Wingtip Tickets для однотенантной базы данных](./saas-dbpertenant-get-started-deploy.md)
- [Развертывание приложения SaaS Wingtip Tickets для мультитенантной базы данных](./saas-multitenantdb-get-started-deploy.md)