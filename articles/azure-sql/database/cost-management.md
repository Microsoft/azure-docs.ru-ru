---
title: Планирование и управление затратами для базы данных SQL Azure
description: Сведения о планировании и управлении затратами для базы данных SQL Azure с помощью анализа затрат в портал Azure.
author: stevestein
ms.author: sstein
ms.custom: subject-cost-optimization
ms.service: sql-database
ms.topic: how-to
ms.date: 01/15/2021
ms.openlocfilehash: 8d36166a67e683dd7f15eef18d589562b39ba568
ms.sourcegitcommit: fc401c220eaa40f6b3c8344db84b801aa9ff7185
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/20/2021
ms.locfileid: "98600621"
---
# <a name="plan-and-manage-costs-for-azure-sql-database"></a>Планирование и управление затратами для базы данных SQL Azure

В этой статье описывается планирование и управление затратами для базы данных SQL Azure. Сначала используйте калькулятор цен Azure, чтобы добавить ресурсы Azure, и ознакомьтесь с оценочными затратами. После начала работы с ресурсами базы данных SQL Azure используйте функции управления затратами для установки бюджетов и отслеживания затрат. Вы также можете просматривать прогнозные затраты и выявление тенденций расходов для выявления областей, в которых может потребоваться выполнить действия. Стоимость базы данных SQL Azure — это лишь часть ежемесячных затрат в счете Azure. Несмотря на то, что в этой статье описывается планирование и управление затратами для базы данных SQL Azure, взимается плата за все службы и ресурсы Azure, используемые в подписке Azure, включая любые сторонние службы.


## <a name="prerequisites"></a>Предварительные требования

Анализ затрат поддерживает большинство типов учетных записей Azure, но не все. Полный список поддерживаемых типов учетных записей см. в статье [Understand Cost Management data](../../cost-management-billing/costs/understand-cost-mgt-data.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn) (Интерпретация данных службы "Управление затратами"). Для просмотра данных о затратах требуется по крайней мере доступ на чтение для учетной записи Azure. 

Дополнительные сведения о назначении доступа к данным службы "Управление затратами" Azure см. в [этой статье](../../cost-management/assign-access-acm-data.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn).


## <a name="sql-database-initial-cost-considerations"></a>Вопросы первоначальной стоимости базы данных SQL

При работе с базой данных SQL Azure необходимо учитывать несколько функций экономии затрат:


### <a name="vcore-or-dtu-purchasing-models"></a>модели приобретения Виртуальное ядро или DTU 

База данных SQL Azure поддерживает две модели приобретения: Виртуальное ядро и DTU. Способ оплаты зависит от моделей приобретения, поэтому важно понимать модель, которая лучше всего подходит для вашей рабочей нагрузки при планировании и оценке затрат. Сведения о моделях приобретения Виртуальное ядро и DTU см. [в разделе Выбор между моделями покупки Виртуальное ядро и DTU](purchasing-models.md).


### <a name="provisioned-or-serverless"></a>Подготовленные или бессерверные

В модели приобретения Виртуальное ядро база данных SQL Azure также поддерживает два типа расчетных уровней: подготовленная пропускная способность и бессерверные. Способ оплаты за каждый уровень вычислений меняется, поэтому важно понимать, что лучше всего подходит для вашей рабочей нагрузки при планировании и оценке затрат. Дополнительные сведения см. в разделе [Общие сведения о модели Виртуальное ядро — уровни вычислений](service-tiers-vcore.md#compute-tiers).

В подготовленном уровне вычислений для модели приобретения на основе виртуальное ядро можно обмениваться существующими лицензиями для тарифов со скидкой. Дополнительные сведения см. в разделе [преимущество гибридного использования Azure (АХБ)](../azure-hybrid-benefit.md).

### <a name="elastic-pools"></a>Эластичные пулы

Для сред с несколькими базами данных, которые имеют разные и непредсказуемые требования к использованию, эластичные пулы могут обеспечить экономию затрат по сравнению с подготовкой одного и того же объема отдельных баз данных. Дополнительные сведения см. в разделе [эластичные пулы](elastic-pool-overview.md).

## <a name="estimate-azure-sql-database-costs"></a>Оценка затрат на базу данных SQL Azure

Используйте [Калькулятор цен Azure](https://azure.microsoft.com/pricing/calculator/) для оценки затрат на различные конфигурации базы данных SQL Azure. Сведения и цены на следующем рисунке приведены только в качестве примера:

:::image type="content" source="media/cost-management/pricing-calc.png" alt-text="Пример калькулятора цен для базы данных SQL Azure":::

Вы также можете оценить влияние различных параметров политики хранения на стоимость. Сведения и цены на следующем рисунке приведены только в качестве примера:

:::image type="content" source="media/cost-management/backup-storage.png" alt-text="Пример калькулятора цен на базу данных SQL Azure для хранилища":::


## <a name="understand-the-full-billing-model-for-azure-sql-database"></a>Сведения о модели полного выставления счетов для базы данных SQL Azure

База данных SQL Azure работает в инфраструктуре Azure, которая выполняет накопление затрат вместе с базой данных SQL Azure при развертывании нового ресурса. Важно понимать, что дополнительная инфраструктура может начислять затраты. Необходимо управлять этими затратами при внесении изменений в развернутые ресурсы. 


Плата за базу данных SQL Azure (за исключением бессерверных) оплачивается на основе прогнозируемой почасовой ставки. Если база данных SQL активна менее часа, плата взимается за каждый час существования базы данных с использованием наивысшего уровня служб, подготовленного хранилища и операций ввода-вывода, которые были применены в течение этого часа, независимо от использования или того, была ли база данных активна менее часа.


### <a name="using-monetary-credit-with-azure-sql-database"></a>Использование денежного кредита с базой данных SQL Azure

Вы можете платить за использование базы данных SQL Azure с помощью предоплаты Azure (ранее называлось денежным обязательством). Однако вы не можете использовать предварительную оплату Azure для оплаты за продукты и услуги сторонних производителей, включая данные из Azure Marketplace.

## <a name="review-estimated-costs-in-the-azure-portal"></a>Просмотр предполагаемых затрат на портале Azure

По мере выполнения процесса создания базы данных SQL Azure можно увидеть оценочные затраты во время настройки уровня вычислений. 

Чтобы открыть этот экран, выберите **настроить базу данных** на вкладке " **основы** " на странице " **Создание базы данных SQL** ". Сведения и цены на следующем рисунке приведены только в качестве примера:

  :::image type="content" source="media/cost-management/cost-estimate.png" alt-text="Пример, демонстрирующий оценку затрат в портал Azure":::



Если у вашей подписки Azure есть предельная сумма расходов, Azure не позволит вам тратить деньги на сумму кредита. При создании и использовании ресурсов Azure используются ваши кредиты. При достижении лимита кредита развернутые ресурсы отключаются в оставшейся части этого расчетного периода. Вы не можете изменить лимит кредита, но можете удалить его. Дополнительные сведения об ограничениях расходов см. в статье [предельная сумма расходов в Azure](https://docs.microsoft.com/azure/billing/billing-spending-limit).

## <a name="monitor-costs"></a>Мониторинг затрат

По мере того как вы начинаете использовать базу данных SQL Azure, вы можете увидеть оценочные затраты на портале. Чтобы ознакомиться с оценкой затрат, выполните следующие действия.

1. Войдите в портал Azure и перейдите к группе ресурсов базы данных SQL Azure. Чтобы выбрать группу ресурсов, перейдите к своей базе данных и выберите **Группа ресурсов** в разделе **Обзор** .
1. В меню выберите **анализ затрат**.
1. Просмотрите **накопленные затраты** и установите в нижней части диаграммы **имя службы**. На этой диаграмме показана оценка текущих затрат на базу данных SQL. Чтобы уменьшить затраты на всю страницу в базе данных SQL Azure, щелкните **Добавить фильтр** , а затем выберите **база данных SQL Azure**. Сведения и цены на следующем рисунке приведены только в качестве примера:

   :::image type="content" source="media/cost-management/cost-analysis.png" alt-text="Пример, демонстрирующий накопленные затраты в портал Azure":::

Здесь вы можете исследовать затраты самостоятельно. Дополнительные сведения о различных параметрах анализа затрат см. в статье [Начало анализа затрат](../../cost-management/cost-mgt-alerts-monitor-usage-spending.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn).

## <a name="create-budgets"></a>Создание бюджетов

<!-- Note to Azure service writer: Modify the following as needed for your service. -->

Вы можете создавать [бюджеты](../../cost-management/tutorial-acm-create-budgets.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn) для управления затратами и создавать [оповещения](../../cost-management/cost-mgt-alerts-monitor-usage-spending.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn) , которые автоматически уведомляют заинтересованных лиц о трате аномалий и чрезмерной трате рисков. Оповещения основываются на расходах по сравнению с пороговыми значениями бюджета и затрат. Бюджеты и оповещения создаются для подписок Azure и групп ресурсов, поэтому они полезны в рамках общей стратегии мониторинга затрат. 

Бюджеты можно создавать с помощью фильтров для конкретных ресурсов или служб в Azure, если требуется дополнительная детализация в мониторинге. Фильтры помогают предотвратить случайное создание новых ресурсов, которые избавляет вас от дополнительных денег. Дополнительные сведения о параметрах фильтра при создании бюджета см. в разделе [Параметры группы и фильтра](../../cost-management-billing/costs/group-filter.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn).

## <a name="export-cost-data"></a>Экспорт данных о затратах

Вы также можете [экспортировать данные о затратах](../../cost-management-billing/costs/tutorial-export-acm-data.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn) в учетную запись хранения. Это полезно, если вам или другим пользователям требуется выполнить дополнительный анализ данных за затраты. Например, финансовые группы могут анализировать данные с помощью Excel или Power BI. Вы можете экспортировать затраты на ежедневное, еженедельное или ежемесячное расписание и задать настраиваемый диапазон дат. Для извлечения наборов данных о затратах рекомендуется экспортировать данные о затратах.


## <a name="other-ways-to-manage-and-reduce-costs-for-azure-sql-database"></a>Другие способы управления и снижения затрат для базы данных SQL Azure

Кроме того, база данных SQL Azure позволяет масштабировать ресурсы, чтобы контролировать затраты в зависимости от потребностей приложения. Дополнительные сведения см. в разделе [динамическое масштабирование ресурсов базы данных](scale-resources.md).

Экономия денег путем фиксации на резервирование ресурсов для вычислений на один-три года. Дополнительные сведения см. [в разделе экономия затрат для ресурсов с зарезервированной емкостью](reserved-capacity-overview.md).


## <a name="next-steps"></a>Следующие шаги

- Узнайте [, как оптимизировать инвестиции в облако с помощью службы "Управление затратами Azure](../../cost-management-billing/costs/cost-mgt-best-practices.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn)".
- Дополнительные сведения об управлении затратами с помощью [анализа затрат](../../cost-management-billing/costs/quick-acm-cost-analysis.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn).
- Узнайте, как [предотвратить непредвиденные затраты](../../cost-management-billing/manage/getting-started.md?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn).
- Пройдите курс обучения по [управлению затратами](https://docs.microsoft.com/learn/paths/control-spending-manage-bills?WT.mc_id=costmanagementcontent_docsacmhorizontal_-inproduct-learn) .
