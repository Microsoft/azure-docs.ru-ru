---
title: Использование Работоспособность ресурсов Azure для мониторинга работоспособности базы данных
description: Используйте Работоспособность ресурсов Azure для мониторинга базы данных SQL Azure и Azure SQL Управляемый экземпляр Health, помогает диагностировать и получать поддержку, когда проблемы с Azure влияют на ресурсы SQL.
services: sql-database
ms.service: sql-db-mi
ms.subservice: performance
ms.custom: sqldbrb=2
ms.devlang: ''
ms.topic: conceptual
author: aamalvea
ms.author: aamalvea
ms.reviewer: wiassaf, sstein
ms.date: 03/24/2021
ms.openlocfilehash: 4434c796a41126444b8785440427123e88e0b528
ms.sourcegitcommit: bed20f85722deec33050e0d8881e465f94c79ac2
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/25/2021
ms.locfileid: "105107794"
---
# <a name="use-resource-health-to-troubleshoot-connectivity-for-azure-sql-database-and-azure-sql-managed-instance"></a>Использование Работоспособность ресурсов для устранения неполадок подключения к базе данных SQL Azure и Azure SQL Управляемый экземпляр
[!INCLUDE[appliesto-sqldb-sqlmi](../includes/appliesto-sqldb-sqlmi.md)]

[Работоспособность ресурсов](../../service-health/resource-health-overview.md#get-started) для базы данных SQL azure и управляемый экземпляр SQL Azure помогает диагностировать и получать поддержку, когда проблемы с Azure влияют на ресурсы SQL. Она представляет сведения о текущем состоянии работоспособности ресурсов и о состоянии работоспособности ресурсов за прошедший период, а также помогает устранить проблемы. Работоспособность ресурсов предоставляет техническую поддержку, если вам нужна помощь по проблемам со службами Azure.

![Обзор](./media/resource-health-to-troubleshoot-connectivity/sql-resource-health-overview.jpg)

## <a name="health-checks"></a>Проверки работоспособности

Служба "Работоспособность ресурсов Azure" определяет работоспособность ресурсов SQL с помощью проверки успешной и неудачной операции входа в ресурс. В настоящее время Работоспособность ресурсов для ресурса базы данных SQL проверяет только ошибки входа в систему из-за системной ошибки, а не ошибки пользователя. Состояние Работоспособность ресурсов обновляется каждые 1 – 2 минуты.

## <a name="health-states"></a>Состояния работоспособности

### <a name="available"></a>Доступно

Состояние **доступно** означает, что работоспособность ресурсов не обнаружил ошибки входа в систему из-за системных ошибок в ресурсе SQL.

![Доступно](./media/resource-health-to-troubleshoot-connectivity/sql-resource-health-available.jpg)

### <a name="degraded"></a>Деградация

Состояние **Деградация** означает, что служба "Работоспособность ресурсов Azure" обнаружила большую часть успешных и некоторые неудачные операции входа. Это скорее всего временные ошибки входа. Чтобы снизить влияние проблем с подключением, вызванных временными ошибками входа, реализуйте [логику повторных попыток](troubleshoot-common-connectivity-issues.md#retry-logic-for-transient-errors) в коде.

![Деградация](./media/resource-health-to-troubleshoot-connectivity/sql-resource-health-degraded.jpg)

### <a name="unavailable"></a>Рекомендации недоступны

Состояние **Недоступно** означает, что служба "Работоспособность ресурсов Azure" обнаружила согласованные неудачные операции входа в ресурс SQL. Если ресурс остается в этом состоянии в течение продолжительного периода времени, обратитесь в службу поддержки.

![Недоступно](./media/resource-health-to-troubleshoot-connectivity/sql-resource-health-unavailable.jpg)

### <a name="unknown"></a>Неизвестно

Состояние работоспособности **Неизвестно** указывает на то, что служба работоспособности ресурсов не получала сведений об этом ресурсе более 10 минут. Несмотря на то что это значение не указывает состояние ресурса определенно, оно является важной точкой данных в процессе устранения неполадок. Если ресурс работает должным образом, через несколько минут его состояние изменится на "Доступно". При возникновении проблем с ресурсом состояние работоспособности "Неизвестно" может означать, что на ресурс влияет какое-то событие на платформе.

![Неизвестно](./media/resource-health-to-troubleshoot-connectivity/sql-resource-health-unknown.jpg)

## <a name="historical-information"></a>Накопленные сведения

В разделе Журнал работоспособности Работоспособность ресурсов можно получить доступ к журналу работоспособности в течение 14 дней. В разделе также содержится причина простоя (при его наличии) для тех простоев, о которых сообщает служба "Работоспособность ресурсов Azure". В настоящее время Azure показывает время простоя для ресурса базы данных с гранулярностью в две минуты. Фактическое время простоя, скорее всего, составляет менее одной минуты. Среднее значение составляет 8 секунд.

### <a name="downtime-reasons"></a>Причины простоя

Когда база данных работает просто, выполняется анализ для определения причины. Если это возможно, причина простоя сообщается в разделе журнала работоспособности службы "Работоспособность ресурсов Azure". Причины простоя обычно публикуются в течение 45 минут после события.

#### <a name="planned-maintenance"></a>Плановое техническое обслуживание

Инфраструктура Azure периодически выполняет плановое обслуживание — обновление компонентов оборудования или программного обеспечения в центре обработки данных. Пока база данных находится в состоянии обслуживания, SQL Azure может завершить некоторые существующие подключения и отказаться от новых. Ошибки входа, возникшие во время планового обслуживания, обычно являются временными, и [логика повторных попыток](troubleshoot-common-connectivity-issues.md#retry-logic-for-transient-errors) позволяет снизить воздействие. Если вы продолжаете работать с ошибками входа в систему, обратитесь в службу поддержки.

#### <a name="reconfiguration"></a>Reconfiguration

Перенастройки рассматриваются как временные условия, и их ожидаемое время. Эти события могут запускаться при балансировке нагрузки или сбоях оборудования и программного обеспечения. Любое клиентское рабочее приложение, которое подключается к облачной базе данных, должно реализовывать надежную [логику повторных подключений](troubleshoot-common-connectivity-issues.md#retry-logic-for-transient-errors). Это поможет устранить такие ситуации и сделает эти ошибки прозрачными для пользователя.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о [логике повторных попыток для временных ошибок](troubleshoot-common-connectivity-issues.md#retry-logic-for-transient-errors).
- [Устранение неполадок, диагностика и предотвращение ошибок подключения SQL](troubleshoot-common-connectivity-issues.md).
- Дополнительные сведения о [настройке оповещений работоспособность ресурсов](../../service-health/resource-health-alert-arm-template-guide.md).
- Ознакомьтесь с обзором [работоспособность ресурсов](../../service-health/resource-health-overview.md).
- Ознакомьтесь [работоспособность ресурсов часто задаваемые вопросы](../../service-health/resource-health-faq.md).
