---
title: Период обслуживания
description: Узнайте, как можно настроить окно "база данных SQL Azure" и Управляемый экземпляр "обслуживание".
services: sql-database
ms.service: sql-db-mi
ms.subservice: service
ms.topic: conceptual
author: WilliamDAssafMSFT
ms.author: wiassaf
ms.reviewer: sstein
ms.custom: references_regions
ms.date: 03/02/2021
ms.openlocfilehash: 4006cedf5f24ab2fc08e41b58f8acf90c404f668
ms.sourcegitcommit: b4647f06c0953435af3cb24baaf6d15a5a761a9c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/02/2021
ms.locfileid: "101680115"
---
# <a name="maintenance-window-preview"></a>Период обслуживания (Предварительная версия)
[!INCLUDE[appliesto-sqldb-sqlmi](../includes/appliesto-sqldb-sqlmi.md)]

Функция периода обслуживания позволяет настраивать расписания прогнозируемого периода обслуживания для [базы данных SQL Azure](sql-database-paas-overview.md) и [управляемого экземпляра SQL](../managed-instance/sql-managed-instance-paas-overview.md). 

Дополнительные сведения о событиях обслуживания см. [в статье Планирование событий обслуживания Azure в базе данных SQL Azure и управляемый экземпляр Azure SQL](planned-maintenance.md).

## <a name="overview"></a>Обзор

Azure периодически выполняет запланированное обновление базы данных SQL Azure и ресурсов SQL Управляемый экземпляр, которые часто включают обновления базового оборудования, программного обеспечения, включая базовую операционную систему (ОС) и ядро SQL. Во время обновления обслуживания ресурсы полностью доступны и доступны, но для некоторых обновлений обслуживания требуется отработка отказа, так как Azure переводит экземпляры в автономный режим в течение короткого времени для применения обновлений обслуживания (в среднем за восемь секунд).  Запланированные обновления обслуживания происходят каждые 35 дней в среднем. Это означает, что клиент может рассчитывать примерно одно запланированное событие обслуживания в месяц для каждой базы данных SQL Azure или управляемого экземпляра SQL и только в те слоты периода обслуживания, выбранные клиентом.   

Период обслуживания предназначен для бизнес-рабочих нагрузок, которые чувствительны к потенциальным нарушениям подключения, которые могут быть результатом запланированных событий обслуживания в окне по умолчанию.  

Окно обслуживания можно настроить с помощью портал Azure, PowerShell, интерфейса командной строки или API Azure. Его можно настроить при создании или для существующих баз данных SQL и управляемых экземпляров SQL.

### <a name="gain-more-predictability-with-maintenance-window"></a>Увеличение предсказуемости с помощью периода обслуживания

По умолчанию все базы данных SQL Azure и базы данных управляемого экземпляра обновляются только во время 17:00 8:00 в местное время, чтобы избежать пиковых перерывов в рабочих часах. Местное время определяется [регионом Azure](https://azure.microsoft.com/global-infrastructure/geographies/) , в котором размещен ресурс. Можно дополнительно настроить обновления обслуживания на время, подходящее для базы данных, выбрав один из двух дополнительных слотов периода обслуживания:

* Окно **по умолчанию** , 17:00 в 8:00 Местное время понедельник – воскресенье 
* Окно "будний день", 10PM до 06:00 Местное время понедельник — четверг: **требуется согласие клиента** 
* Окно выходных дней, 10PM to 06:00 Местное время пятница – воскресенье: **требуется согласие клиента**  

После выбора периода обслуживания все запланированные обновления обслуживания будут выполняться только в выбранном окне.   

> [!Note]
> Помимо запланированных обновлений обслуживания, в редких случаях незапланированные события обслуживания могут вызвать недоступность. 

### <a name="cost"></a>Стоимость

Выбор периода обслуживания предоставляется бесплатно для следующих [типов предложений](https://azure.microsoft.com/support/legal/offer-details/)подписки: оплата по мере использования, поставщик облачных решений (CSP), Microsoft Enterprise или соглашение клиента Майкрософт.

> [!Note]
> Предложение Azure — это тип имеющейся подписки Azure. Например, подписка с [тарифами с оплатой по мере](https://azure.microsoft.com/offers/ms-azr-0003p/)использования, [Azure в открытом](https://azure.microsoft.com/en-us/offers/ms-azr-0111p/)виде и [Visual Studio Enterprise](https://azure.microsoft.com/en-us/offers/ms-azr-0063p/) все предложения Azure. Каждое предложение или план имеют разные условия и преимущества. Ваше предложение или план отображается в обзоре подписки. Дополнительные сведения о переключении подписки на другое предложение см. в статье [изменение подписки Azure на другое предложение](/azure/cost-management-billing/manage/switch-azure-offer).

## <a name="advance-notifications"></a>Авансовые уведомления

Уведомления об обслуживании можно настроить для оповещения клиентов о предстоящих событиях запланированного обслуживания за 24 часа, на момент обслуживания и после завершения периода обслуживания. Дополнительные сведения см. в разделе [предварительные уведомления](advance-notifications.md).

## <a name="availability"></a>Доступность

### <a name="supported-service-level-objectives"></a>Поддерживаемые цели уровня обслуживания

Выбор периода обслуживания, отличного от значения по умолчанию, доступен для всех SLO, **за исключением**:
* Уровень "Гипермасштабирование" 
* Устаревший го поколения Виртуальное ядро
* Basic, S0 и S1 
* DC, серия fsv2, серия M

### <a name="azure-region-support"></a>Поддержка региона Azure

Выбор периода обслуживания, отличного от значения по умолчанию, в настоящее время доступен в следующих регионах:

- Восточная Австралия
- Юго-Восточная Австралия
- Южная Бразилия
- Центральная Канада
- Центральная часть США
- Восточная часть США
- восточная часть США 2
- Japan East
- Норсцентрал США
- Северная Европа
- Саусцентрал США
- Юго-Восточная Азия
- южная часть Соединенного Королевства
- Западная Европа
- западная часть США
- Западная часть США 2

## <a name="gateway-maintenance-for-azure-sql-database"></a>Обслуживание шлюза для базы данных SQL Azure

Чтобы получить максимальную пользу из периодов обслуживания, убедитесь, что клиентские приложения используют политику перенаправления подключений. Перенаправление является рекомендуемой политикой подключения, где клиенты устанавливают подключения непосредственно к узлу, на котором размещена база данных, что приводит к снижению задержки и повышению пропускной способности.  

* В базе данных SQL Azure все подключения, использующие политику подключения прокси-сервера, могут быть затронуты как в выбранном периоде обслуживания, так и в окне обслуживания узла шлюза. Однако клиентские подключения, использующие рекомендованную политику перенаправления подключений, не затрагиваются при отработке отказа узла шлюза. 

* В управляемом экземпляре SQL Azure узлы шлюза находятся [в виртуальном кластере](../../azure-sql/managed-instance/connectivity-architecture-overview.md#virtual-cluster-connectivity-architecture) и имеют тот же период обслуживания, что и управляемый экземпляр, поэтому использование политики прокси-подключения не является потенциальным предоставлением подключений к дополнительному периоду обслуживания.

Дополнительные сведения о политике подключения клиентов в базе данных SQL Azure см. в статье [Политика подключения к базе данных SQL Azure](../database/connectivity-architecture.md#connection-policy). 

Дополнительные сведения о политике клиентских подключений в управляемом экземпляре SQL Azure см. в статье [типы подключения управляемый экземпляр Azure SQL](../../azure-sql/managed-instance/connection-types-overview.md).


## <a name="next-steps"></a>Дальнейшие действия

* [Авансовые уведомления](advance-notifications.md)
* [Настройка периода обслуживания](maintenance-window-configure.md)

## <a name="learn-more"></a>Дополнительные сведения

* [Часто задаваемые вопросы об окне обслуживания](maintenance-window-faq.yml)
* [База данных SQL Azure](sql-database-paas-overview.md) 
* [Управляемый экземпляр SQL](../managed-instance/sql-managed-instance-paas-overview.md)
* [Планирование событий обслуживания Azure в базе данных SQL Azure и Управляемый экземпляр Azure SQL](planned-maintenance.md)




