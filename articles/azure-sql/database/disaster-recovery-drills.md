---
title: Отработка аварийного восстановления
description: Дополнительные сведения и рекомендации по использованию Базы данных SQL Azure для выполнения детализации при аварийном восстановлении.
services: sql-database
ms.service: sql-database
ms.subservice: high-availability
ms.custom: ''
ms.devlang: ''
ms.topic: conceptual
author: anosov1960
ms.author: sashan
ms.reviewer: mathoma, sstein
ms.date: 12/18/2018
ms.openlocfilehash: f53a08a12c5afda8dbc3f25d9102f52b870ceea4
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "91321668"
---
# <a name="performing-disaster-recovery-drills"></a>Выполнение отработок аварийного восстановления
[!INCLUDE[appliesto-sqldb](../includes/appliesto-sqldb.md)]

Рекомендуется периодически проверять готовность приложений к рабочему процессу восстановления. Проверка поведения приложения и возможных последствий потери данных и нарушений работы, которая включает отработку отказа, предусмотрена стандартами разработки. Эта процедура также является обязательной для большинства отраслевых стандартов в рамках сертификации непрерывности бизнес-процессов.

Этапы отработки аварийного восстановления:

* моделирование сбоя уровня данных;
* восстановление;
* проверка целостности приложения после восстановления.

Рабочий процесс отработки зависит от того, как вы [спроектировали приложение для обеспечения непрерывности бизнес-процессов](business-continuity-high-availability-disaster-recover-hadr-overview.md). В этой статье приведены рекомендации по отработке аварийного восстановления с использованием службы "База данных SQL Azure".

## <a name="geo-restore"></a>Геовосстановление

Чтобы избежать потери данных при отработке аварийного восстановления, выполняйте ее в тестовой среде. Для этого создайте копию рабочей среды и используйте ее для проверки рабочего процесса отработки отказа для приложения.

### <a name="outage-simulation"></a>Моделирование сбоя

Чтобы сымитировать сбой, можно переименовать базу данных-источник. Это изменение имени вызовет сбой подключения приложения.

### <a name="recovery"></a>Восстановление

* Выполните геовосстановление базы данных на другой сервер, следуя инструкциям [здесь](disaster-recovery-guidance.md).
* Измените конфигурацию приложения, чтобы подключиться к восстановленной базе данных, и завершите восстановление, следуя инструкциям в статье [Восстановление базы данных SQL Azure или переход на базу данных-получатель при отказе](disaster-recovery-guidance.md).

### <a name="validation"></a>Проверка

Выполните отработку, проверив целостность приложения после восстановления (в том числе проверьте строки подключения, учетные данные, протестируйте основные функции или выполните другие проверки стандартной процедуры утверждения приложений).

## <a name="failover-groups"></a>Группы отработки отказа

Для базы данных, защищенной с помощью групп отработки отказа, в тренировочном упражнении предусмотрена плановая отработка отказа на сервер-получатель. Плановая отработка отказа гарантирует, что база данных-источник и база данных-получатель в группе отработки отказа останутся синхронизированными после переключения ролей. В отличие от незапланированной отработки отказа, эта операция не приводит к потере данных, поэтому отработку можно выполнить в рабочей среде.

### <a name="outage-simulation"></a>Моделирование сбоя

Чтобы сымитировать сбой, можно отключить веб-приложение или виртуальную машину, подключенные к базе данных. Эта имитация приведет к сбоям подключения веб-клиентов.

### <a name="recovery"></a>Восстановление

* Убедитесь, что конфигурация приложения в регионе аварийного восстановления указывает на бывшую базу данных-получатель, которая станет полностью доступной новой базой данных-источником.
* Инициируйте [плановую отработку отказа](scripts/setup-geodr-and-failover-database-powershell.md) для группы отработки отказа с сервера-получателя.
* Следуйте инструкциям в руководстве [по настройке базы данных после восстановления](disaster-recovery-guidance.md) , чтобы завершить восстановление.

### <a name="validation"></a>Проверка

Выполните отработку, проверив целостность приложения после восстановления (в том числе проверьте подключение, протестируйте основные функции или выполните другие проверки, требуемые для утверждения отработки).

## <a name="next-steps"></a>Дальнейшие действия

* Ознакомьтесь со [сценариями обеспечения непрерывности для бизнес-процессов](business-continuity-high-availability-disaster-recover-hadr-overview.md).
* Чтобы узнать об автоматически создаваемых резервных копиях базы данных SQL Azure, ознакомьтесь с разделом [создаваемых автоматически резервных копий базы данных SQL](automated-backups-overview.md)
* Дополнительные сведения об использовании автоматических резервных копий для восстановления см. в статье [Восстановление базы данных из резервных копий, инициированных службой](recovery-using-backups.md).
* Чтобы узнать о более быстрых вариантах восстановления, ознакомьтесь со сведениями об [активной георепликации](active-geo-replication-overview.md) и [группах автоматической отработки отказа](auto-failover-group-overview.md).
