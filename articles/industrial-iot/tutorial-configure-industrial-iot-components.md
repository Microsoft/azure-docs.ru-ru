---
title: Настройка компонентов промышленного Интернета вещей Azure
description: В рамках этого учебника вы узнаете, как изменить значения конфигурации по умолчанию.
author: jehona-m
ms.author: jemorina
ms.service: industrial-iot
ms.topic: tutorial
ms.date: 3/22/2021
ms.openlocfilehash: 348276a71b2227063374da6455445118fcb00fcf
ms.sourcegitcommit: f611b3f57027a21f7b229edf8a5b4f4c75f76331
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104787293"
---
# <a name="tutorial-configure-the-industrial-iot-components"></a>Учебник. Настройка компонентов промышленного Интернета вещей

Сценарий развертывания автоматически настраивает все компоненты для работы, используя значения по умолчанию. Однако параметры значений по умолчанию можно изменить в соответствии с вашими требованиями.

В этом руководстве описано следующее.

> [!div class="checklist"]
> * Настройка конфигурации компонентов


Ниже приведены некоторые из наиболее подходящих параметров настройки для компонентов.
* Центр Интернета вещей
    * Сеть → Общий доступ. Настройка доступа к Интернету, например фильтры IP-адресов.
    * Сети → Подключения частных конечных точек. Создание конечной точки, недоступной через Интернет, которая может использоваться внутри системы другими службами Azure или локальными устройствами (например, через VPN-подключение).
    * IoT Edge. Управление конфигурацией пограничных устройств, подключенных к серверам OPC UA. 
* Cosmos DB
    * Глобальная репликация данных. Настройка избыточности данных.
    * Брандмауэр и виртуальные сети. Настройка доступа к Интернету и виртуальным сетям, а также фильтрации IP-адресов.
    * Подключения к частным конечным точкам. Создание конечной точки, которая недоступна через Интернет. 
* Key Vault
    * Секреты. Управление параметрами платформы.
    * Политики доступа. Управление тем, какие приложения и пользователи могут получать доступ к данным в Key Vault и какие операции (например, чтение, запись, создание списка, удаление) разрешается выполнять относительно сети, брандмауэра, виртуальной сети и частных конечных точек.
* Azure Active Directory (AAD) → Регистрация приложений
    * <APP_NAME>-web → Проверка подлинности. Управление ответами URI (список URI, которые можно использовать в качестве целевых страниц после выполнения проверки подлинности). Сценарий развертывания может не иметь возможности автоматической настройки в определенных случаях, например при отсутствии прав администратора AAD. При изменении имени узла веб-приложения, например номера порта, используемого localhost для отладки, может потребоваться добавить или изменить URI.
* Служба приложений
    * Конфигурация. Управление переменными среды, которые управляют службами или пользовательским интерфейсом
* Виртуальная машина
    * Сетевые подключения. Настройка поддерживаемых сетей и правил брандмауэра.
    * Серийная консоль. Доступ в SSH для получения аналитики или для отладки, получение учетных данных из выходных данных скрипта развертывания или сброс пароля.
* Центр Интернета вещей → IoT Edge.
    * Управление удостоверениями устройств IoT Edge, которые могут получить доступ к концентратору, настройка установки модулей и используемой конфигурации, например параметров кодирования для издателя OPC.
* Центр Интернета вещей → IoT Edge → \<DEVICE> → Задание модулей → OpcPublisher (только для отдельной операции издателя OPC).


## <a name="configuration-options"></a>Варианты настройки

|Параметр конфигурации (сокращенное или полное имя)    |    Описание   |
|----------------------------------------------|------------------|
pf/publishfile |Имя файла для настройки узлов для публикации. Если указан этот параметр, издатель OPC работает в автономном режиме.
lf/logfile |Имя используемого файла журнала.
ll/loglevel |Используемый уровень журнала (допустимые значения: неустранимый, ошибка, предупреждение, сведения, отладка, подробный).
me/messageencoding |Кодирование обмена сообщениями для исходящих сообщений. Допустимые значения: JSON, UADP.
mm/messagingmode |Режим обмена сообщениями для исходящих сообщений. Допустимые значения: PubSub, Samples.
fm/fullfeaturedmessage |Полнофункциональный режим для сообщений (все поля заполняются). Значение по умолчанию — true, для устаревшей совместимости — false.
aa/autoaccept |Издатель доверяет всем серверам, к которым он подключен.
bs/batchsize |Количество сообщений об изменениях данных OPC UA, кэшируемых для пакетной обработки.
si/iothubsendinterval |Интервал пакетной обработки триггера в секундах.
ms/iothubmessagesize |Максимальный размер сообщения (IoT D2C).
om/maxoutgressmessages |Максимальный размер буфера исходящих сообщений (IoT D2C).
di/diagnosticsinterval |Отображает диагностические данные издателя с указанным интервалом в секундах (требуется информация на уровне журнала). -1 отключает удаленный журнал и выходные данные диагностики.
lt/logflugtimespan |Интервал времени в секундах для освобождения файла журнала.
ih/iothubprotocol |Протокол, используемый для связи с концентратором. Допустимые значения: AmqpOverTcp, AmqpOverWebsocket, MqttOverTcp, MqttOverWebsocket, Amqp, Mqtt, Tcp, Websocket, любое.
hb/heartbeatinterval |Издатель использует это значение по умолчанию в секундах для задания интервала подтверждения соединения узлов без заданного интервала подтверждения соединения.
ot/operationtimeout |Время ожидания операции клиента OPC UA издателя в миллисекундах.
ol/opcmaxstringlen |Максимальная длина строки OPC, которая может быть передана или получена.
oi/opcsamplinginterval |Значение по умолчанию (в миллисекундах) для запроса примеров значений на серверах
op/opcpublishinginterval |Значение по умолчанию (в миллисекундах) для параметра интервала публикации подписок на сервере OPC UA.
ct/createsessiontimeout |Интервал (в секундах) для отправки издателем сообщений проверки активности на серверы OPC в конечных точках, к которым он подключен.
kt/keepalivethresholt |Указывание количества пакетов проверки активности, которые сервер может пропускать, перед отключением сеанса.
tm/trustmyself |Сертификат издателя помещается в хранилище доверия автоматически.
at/appcertstoretype |Собственный тип хранилища сертификатов приложений (разрешено: каталог, X509Store).


## <a name="next-steps"></a>Дальнейшие действия
Теперь, когда вы узнали, как изменить в конфигурации значения по умолчанию, ознакомьтесь с указанными ниже документами. 

> [!div class="nextstepaction"]
> [Получение данных IIoT в ADX](tutorial-industrial-iot-azure-data-explorer.md)

> [!div class="nextstepaction"]
> [Визуализация и анализ данных с помощью Аналитики временных рядов](tutorial-visualize-data-time-series-insights.md)
