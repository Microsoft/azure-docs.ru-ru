---
title: Визуализация данных OPC UA в службе "Аналитика временных рядов Azure"
description: Из учебника вы узнаете, как визуализировать данные с помощью службы "Аналитика временных рядов".
author: jehona-m
ms.author: jemorina
ms.service: industrial-iot
ms.topic: tutorial
ms.date: 3/22/2021
ms.openlocfilehash: 5bd218c0d94922b6137a964e3993f516216ca4b7
ms.sourcegitcommit: f611b3f57027a21f7b229edf8a5b4f4c75f76331
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/22/2021
ms.locfileid: "104787351"
---
# <a name="tutorial-visualize-data-with-time-series-insights-tsi"></a>Учебник. Визуализация данных с помощью службы "Аналитика временных рядов" (TSI)

Модуль издателя OPC подключается к серверам OPC UA и публикует данные из этих серверов в Центре Интернета вещей. Процессор данных телеметрии на промышленной платформе IoT обрабатывает соответствующие события и пересылает контекстуализированные примеры в TSI и другим потребителям.  

В этом руководстве показано, как визуализировать и анализировать данные телеметрии OPC UA с помощью окружения службы "Аналитика временных рядов".

В этом руководстве описано следующее.

> [!div class="checklist"]
> * Все учебники содержат список необходимых шагов.
> * Каждый из этих пунктов соответствует ключу H2.
> * Используйте в рамках учебника указанные зеленые флажки.

## <a name="prerequisite"></a>Предварительное требование

* Развертывание платформы IIoT для автоматического создания окружения Аналитики временных рядов.
* Публикация данных в Центр Интернета вещей.

## <a name="time-series-insights-explorer"></a>Обозреватель службы "Аналитика временных рядов"

Обозреватель службы "Аналитика временных рядов" — веб-приложение, которое можно использовать, чтобы визуализировать данные телеметрии. Чтобы получить URL-адрес приложения, откройте файл `.env`, сохраненный в результате развертывания.  Откройте в браузере URL-адрес для переменной `PCS_TSI_URL`.  

Прежде чем использовать обозреватель службы "Аналитика временных рядов", необходимо предоставить доступ к данным TSI пользователям, которым разрешено визуализировать данные. Обратите внимание, что при новом развертывании политики доступа к данным по умолчанию не настроены, поэтому никто не может видеть эти данные. Политики доступа к данным должны быть настроены с помощью портала Azure (в окружении Аналитики временных рядов, развернутой в группе ресурсов, которая в свою очередь развернута с использованием платформы IIoT), как показано ниже.

   ![Обозреватель Аналитики временных рядов 1](media/tutorial-iiot-visualize-data-tsi/tutorial-time-series-insights-data-access-1.png)

Выберите "Политики доступа к данным":

   ![Обозреватель Аналитики временных рядов 2](media/tutorial-iiot-visualize-data-tsi/tutorial-time-series-insights-data-access-2.png)

Назначьте требуемых пользователей:

   ![Обозреватель Аналитики временных рядов 3](media/tutorial-iiot-visualize-data-tsi/tutorial-time-series-insights-data-access-3.png)


В Обозревателе Аналитики временных рядов обратите внимание на неназначенные экземпляры временных рядов. Экземпляр Аналитики временных рядов соответствует временному ряду / ряду значений для определенной точки данных на основе опубликованного узла на сервере OPC. Экземпляр Аналитики временных рядов, соответственно точка данных OPC UA, однозначно идентифицируется с помощью EndpointId, SubscriptionId и NodeId. Модели экземпляров Аналитики временных рядов автоматически обнаруживаются и отображаются в обозревателе на основе данных телеметрии, полученных из концентратора событий для процессора данных телеметрии платформы IIoT.

   ![Обозреватель Аналитики временных рядов 4](media/tutorial-iiot-visualize-data-tsi/tutorial-time-series-insights-step-0.png)

Данные телеметрии можно визуализировать с помощью диаграммы, щелкнув правой кнопкой мыши экземпляр Аналитики временных рядов и выбрав элемент "Значение". Интервал времени для диаграммы можно изменить с помощью параметра в правом верхнем углу. Значение нескольких экземпляров можно визуализировать на основе одного и того же параметра времени.

Дополнительные сведения см. в [кратком руководстве по предварительной версии Аналитики временных рядов Azure](https://docs.microsoft.com/azure/time-series-insights/time-series-insights-update-quickstart).

## <a name="define-and-apply-a-new-model"></a>Определение и применение новой модели

Так как экземпляры телеметрии теперь представлены только в необработанном формате, их необходимо контекстуализировать соответственно. 

Подробные сведения см. в статье о [модели временных рядов в предварительной версии Аналитики временных рядов Azure](https://docs.microsoft.com/azure/time-series-insights/time-series-insights-update-tsm).

1. Шаг 1. На вкладке "Модель" в Обозревателе определите новую иерархию для принимаемых данных телеметрии. Иерархия — это логическая древовидная структура, предназначенная для введения метаданных, необходимых для более интуитивной навигации по экземплярам Аналитики временных рядов. Пользователь может создавать, удалять и изменять шаблоны иерархии, с помощью которых затем могут быть созданы различные экземпляры Аналитики временных рядов.

   ![Шаг 1](media/tutorial-iiot-visualize-data-tsi/tutorial-time-series-insights-step-1.png)

2. Шаг 2. Определите новый тип для значений. В нашем примере обрабатываются только числовые типы данных.

   ![Шаг 2](media/tutorial-iiot-visualize-data-tsi/tutorial-time-series-insights-step-2.png)

3. Шаг 3. Выберите новый экземпляр Аналитики временных рядов Azure, который необходимо категоризировать в ранее определенной иерархии.

   ![Шаг 3](media/tutorial-iiot-visualize-data-tsi/tutorial-time-series-insights-step-3.png)

4. Шаг 4. Заполните параметры свойств экземпляров (имя, описание, значение данных), а также поля иерархии в соответствии с логической структурой. 

   ![Шаг 4](media/tutorial-iiot-visualize-data-tsi/tutorial-time-series-insights-step-4.png)

5. Шаг 5. Повторите шаг 5 для всех экземпляров Аналитики временных рядов без категории.

   ![Шаг 5](media/tutorial-iiot-visualize-data-tsi/tutorial-time-series-insights-step-5.png)

6. Шаг 6. Вернитесь на главную страницу Обозревателя Аналитики временных рядов, просмотрите иерархию экземпляров по категориям и выберите значения для точек данных для анализа.

   ![Этап 6](media/tutorial-iiot-visualize-data-tsi/tutorial-time-series-insights-step-6.png)

## <a name="connect-time-series-insights-to-power-bi"></a>Подключение Аналитики временных рядов к Power BI

Вы также можете подключить окружение Аналитики временных рядов к Power BI.  Дополнительные сведения см. в статьях [Подключение Аналитики временных рядов к Power BI](https://docs.microsoft.com/azure/time-series-insights/how-to-connect-power-bi) и [Визуализация данных из Аналитики временных рядов в Power BI](https://docs.microsoft.com/azure/time-series-insights/concepts-power-bi).


## <a name="next-steps"></a>Дальнейшие действия
Теперь, узнав, как визуализировать данные в Аналитике временных рядов, вы можете просмотреть сведения о промышленном Интернете вещей в репозитории GitHub:

> [!div class="nextstepaction"]
> [Ресурсы платформы IIoT в репозитории GitHub](https://github.com/Azure/iot-edge-opc-publisher)