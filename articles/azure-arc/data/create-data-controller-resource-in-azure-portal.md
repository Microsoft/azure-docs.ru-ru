---
title: Создание контроллера данных ARC в Azure на портал Azure
description: Создание контроллера данных ARC в Azure на портал Azure
services: azure-arc
ms.service: azure-arc
ms.subservice: azure-arc-data
author: twright-msft
ms.author: twright
ms.reviewer: mikeray
ms.date: 09/22/2020
ms.topic: how-to
ms.openlocfilehash: bd8c079e91a6765dff8ad347085c44d0aa2f8d82
ms.sourcegitcommit: 78ecfbc831405e8d0f932c9aafcdf59589f81978
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/23/2021
ms.locfileid: "98737309"
---
# <a name="create-an-azure-arc-data-controller-in-the-azure-portal"></a>Создание контроллера данных ARC в Azure на портал Azure

[!INCLUDE [azure-arc-data-preview](../../../includes/azure-arc-data-preview.md)]

## <a name="introduction"></a>Введение

Для создания контроллера данных Arc Azure можно использовать портал Azure.

Многие возможности создания для дуги Azure начинаются в портал Azure даже несмотря на то, что создаваемый или управляемый ресурс находится вне инфраструктуры Azure. Шаблон взаимодействия с пользователем в таких случаях, особенно при отсутствии прямого подключения между Azure и средой, заключается в использовании портал Azure для создания скрипта, который затем можно скачать и выполнить в вашей среде, чтобы установить безопасное подключение к Azure. Например, серверы с поддержкой ARC в Azure следуют этому шаблону для [создания серверов с поддержкой Arc](../servers/onboard-portal.md).

Сейчас, учитывая, что предварительная версия поддерживает только неограниченный режим подключения служб данных, включенных в службу "Дуга Azure", вы можете использовать портал Azure для создания записной книжки, которую затем можно скачать и запустить в Azure Data Studio в кластере Kubernetes. В будущем, когда доступен напрямую подключенный режим, вы сможете подготавливать контроллер данных непосредственно из портал Azure. Дополнительные сведения о [режимах подключения](connectivity.md)можно получить.

## <a name="use-the-azure-portal-to-create-an-azure-arc-data-controller"></a>Создание контроллера данных ARC в Azure с помощью портал Azure

Выполните следующие действия, чтобы создать контроллер данных ARC в Azure с помощью портал Azure и Azure Data Studio.

1. Сначала войдите в [портал Azure Marketplace](https://ms.portal.azure.com/#blade/Microsoft_Azure_Marketplace/MarketplaceOffersBlade/selectedMenuItemId/home/searchQuery/azure%20arc%20data%20controller).  Результаты поиска в Marketplace будут отфильтрованы, чтобы отобразить "контроллер данных Arc Azure".
2. Если на первом шаге не было указано условие поиска. Введите в результаты поиска и щелкните "контроллер данных Arc Azure".
3. Выберите плитку контроллер данных Azure из Marketplace.
4. Нажмите кнопку **Создать**.
5. Ознакомьтесь с требованиями к созданию контроллера данных ARC в Azure и установке недостающего необходимого программного обеспечения, например Azure Data Studio и kubectl.
6. Нажмите кнопку **сведения о контроллере данных** .
7. Выберите подписку, группу ресурсов и расположение Azure так же, как и для любого другого ресурса, который будет создан в портал Azure. В этом случае в выбранном расположении Azure будут храниться метаданные о ресурсе.  Сам ресурс будет создан в любой выбранной инфраструктуре. Это не обязательно должно быть в инфраструктуре Azure.
8. Введите имя для своего контроллера данных.
9. Выберите режим подключения для контроллера данных. Дополнительные сведения о [режимах подключения и требованиях](./connectivity.md). 

   > [!NOTE] 
   > Если выбран режим **прямого** подключения, убедитесь, что учетные данные субъекта-службы заданы с помощью переменных среды, как описано в разделе [Создание субъекта-службы](upload-metrics-and-logs-to-azure-monitor.md#create-service-principal). 

1. Выберите профиль конфигурации развертывания.
1. Нажмите кнопку **Открыть в Azure Studio** .
1. На следующем экране вы увидите сводку по выбранным параметрам и созданную записную книжку.  Чтобы скачать записную книжку, нажмите кнопку **скачать подготовку к учетной записной книжке** .
1. Откройте записную книжку в Azure Data Studio и нажмите кнопку **запустить все** в верхней части страницы.
1. Следуйте указаниям и инструкциям в записной книжке, чтобы завершить создание контроллера данных.

## <a name="monitoring-the-creation-status"></a>Наблюдение за состоянием создания

Создание контроллера займет несколько минут. Вы можете отслеживать ход выполнения в другом окне терминала с помощью следующих команд:

> [!NOTE]
>  В примерах команд ниже предполагается, что вы создали контроллер данных и пространство имен Kubernetes с именем "Arc".  Если вы использовали другое имя пространства имен или контроллера данных, вы можете заменить "Arc" своим именем.

```console
kubectl get datacontroller/arc --namespace arc
```

```console
kubectl get pods --namespace arc
```

Вы также можете проверить состояние создания любого конкретного модуля, выполнив команду, как показано ниже.  Это особенно полезно для устранения любых проблем.

```console
kubectl describe po/<pod name> --namespace arc

#Example:
#kubectl describe po/control-2g7bl --namespace arc
```

## <a name="troubleshooting-creation-problems"></a>Устранение неполадок при создании

Если у вас возникли роняли с созданием, ознакомьтесь с [руководством по устранению неполадок](troubleshoot-guide.md).