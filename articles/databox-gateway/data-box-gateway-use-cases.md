---
title: Microsoft Azure Шлюз Data Box вариантов использования | Документация Майкрософт
description: Описание вариантов использования Шлюз Azure Data Box, решения для хранения виртуальных устройств, которое позволяет передавать данные в Azure,
services: databox
author: alkohli
ms.service: databox
ms.subservice: gateway
ms.topic: article
ms.date: 10/14/2020
ms.author: alkohli
ms.openlocfilehash: 3bf137f968082e677f45c20947793232b9181220
ms.sourcegitcommit: a055089dd6195fde2555b27a84ae052b668a18c7
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/26/2021
ms.locfileid: "98786618"
---
# <a name="use-cases-for-azure-data-box-gateway"></a>Сценарии использования для шлюза Azure Data Box

Шлюз Azure Data Box — это устройство шлюза для облачного хранилища, размещенное в локальной среде для отправки в Azure изображений, мультимедийных файлов и других данных. Устройство шлюза для облачного хранилища создается на виртуальной машине, подготовленной в гипервизоре. Вы можете сохранять данные на этом виртуальном устройстве по протоколам NFS и SMB, а затем они отправляются в Azure. В этой статье подробно описаны несколько сценариев, в которых целесообразно развертывать такое устройство.

Шлюз Data Box следует применять в следующих случаях:

- для постоянного приема очень больших объемов данных;
- для эффективной и защищенной архивации данных в облаке;
- для передачи добавочных данных по сети после начальной массовой передачи с помощью Data Box.

В следующих разделах подробно описаны все эти сценарии.


## <a name="continuous-data-ingestion"></a>Непрерывный прием данных

Одно из основных преимуществ Шлюза Data Box — возможность постоянно принимать на устройство данные для копирования в облако, независимо от их размера.

Устройство отправляет данные в службу хранилище Azure по мере их получения. Устройство автоматически управляет хранилищем, удаляя локальные копии файлов (но сохраняя метаданные) при достижении определенного порога. Сохранение локальной копии метаданных позволяет устройству шлюза передавать только изменения при обновлении файла. Отправляемые на устройство шлюза данные должны соответствовать требованиям, изложенным в разделе [Предупреждения, связанные с передачей данных](data-box-gateway-limits.md#data-upload-caveats).

По мере заполнения устройства данными оно применяет регулирование скорости для приема данных (по мере необходимости) в соответствии со скоростью передачи данных в облако. Для мониторинга непрерывного процесса приема применяются оповещения. Эти оповещения создаются при начале регулирования и удаляются при его прекращении.

## <a name="cloud-archival-of-data"></a>Архивация данных в облаке

Шлюз Data Box позволяет длительное время хранить данные в облаке. Для долгосрочного хранения можно использовать архивный уровень хранилища.

Уровень архива оптимизирован для хранения редко запрашиваемых данных в течение не менее 180 дней. Архивный уровень требует наименьших затрат на хранение, но наибольших — на доступ. Дополнительные сведения см. в разделе [Архивный уровень доступа](../storage/blobs/storage-blob-storage-tiers.md#archive-access-tier).

### <a name="move-data-to-the-archive-tier"></a>Перемещение данных на уровень архива

Перед началом работы убедитесь, что у вас есть работающее устройство "Шлюз Data Box". Выполните действия, описанные в разделе [учебник. Подготовка к развертыванию шлюз Azure Data Box](data-box-gateway-deploy-prep.md) и продолжите переход к следующему руководству, пока не будет установлено рабочее устройство.

- Отправьте данные в Azure с помощью Шлюза Data Box, используя обычные процедуры передачи данных, как описано в [этом руководстве](data-box-gateway-deploy-add-shares.md).
- После отправки данных переведите хранилище на архивный уровень. Задать уровень больших двоичных объектов можно двумя способами: с помощью скрипта Azure PowerShell или политики управления жизненным циклом службы хранилища Azure.  
    - При использовании Azure PowerShell выполните следующие [действия](../databox/data-box-how-to-set-data-tier.md#use-azure-powershell-to-set-the-blob-tier) , чтобы переместить данные на уровень архива.
    - Если вы используете управление жизненным циклом Azure, выполните следующие действия, чтобы переместить данные на уровень архива.
        - [Зарегистрируйтесь](../storage/blobs/storage-lifecycle-management-concepts.md) для получения предварительной версии службы управления жизненным циклом больших двоичных объектов, чтобы использовать уровень архива.
        - Используйте описанную ниже политику [архивации данных при приеме](../storage/blobs/storage-lifecycle-management-concepts.md#archive-data-after-ingest).
- После того как большие двоичные объекты помечены как архивные, они больше не могут быть изменены шлюзом, пока они не будут перемещены на горячий или холодный уровень. Если файл находится в локальном хранилище, любые изменения, внесенные в локальную копию (включая удаления), не передаются на архивный уровень.
- Чтобы считать данные в архивном хранилище, необходимо выполнить восстановление данных, изменив уровень больших двоичных объектов на "горячий" или "холодно". При [обновлении общей папки](data-box-gateway-manage-shares.md#refresh-shares) в шлюзе большой двоичный объект не восстанавливается.

Дополнительные сведения см. в статье [Управление жизненным циклом хранилища BLOB-объектов Azure (предварительная версия)](../storage/blobs/storage-lifecycle-management-concepts.md).

## <a name="initial-bulk-transfer-followed-by-incremental-transfer"></a>Начальная массовая передача данных с последующей передачей добавочных данных

Если нужно выполнить массовую передачу большого объема данных с последующей передачей добавочных данных, Data Box и Шлюз Data Box следует использовать совместно. Data Box позволяет вне сети перенести большой объем данных (первоначальное заполнение), а Шлюз Data Box можно настроить для добавочной передачи текущих изменений по сети.

### <a name="seed-the-data-with-data-box"></a>Первоначальное заполнение с помощью Data Box

Выполните указанные ниже действия, чтобы скопировать данные в Data Box и отправить их в службу хранилища Azure.

1. [Заказ Data Box](../databox/data-box-deploy-ordered.md).
2. [Настройка Data Box](../databox/data-box-deploy-set-up.md).
3. [Копирование данных на Data Box по SMB](../databox/data-box-deploy-copy-data.md).
4. [Передача Data Box и проверка отправки данных в Azure](../databox/data-box-deploy-picked-up.md).
5. Когда передача данных в Azure завершится, все данные будут расположены в контейнерах хранилища Azure. В учетной записи хранения для Data Box перейдите к контейнеру больших двоичных объектов (и файлов) и убедитесь, что все данные успешно скопированы. Запомните или запишите имя контейнера, так как оно потребуется вам позже. Например, на следующем снимке экрана контейнер `databox` будет использоваться для добавочной передачи.

    ![Контейнер с данными в Data Box](media/data-box-gateway-use-cases/data-container.png)

Эта массовая передача завершает этап начального заполнения.

### <a name="ongoing-feed-with-data-box-gateway"></a>Постоянный канал передачи через Шлюз Data Box

Выполните описанные ниже действия, чтобы настроить текущий прием данных в Шлюзе Data Box. 

1. Создайте общую облачную папку в Шлюзе Data Box. Все данные из этой папки будут автоматически отправляться в учетную запись хранения Azure. Перейдите к **списку общих папок** в ресурсе "Шлюз Data Box" и щелкните **+ Добавить общую папку**.

    ![Выбор элемента "+ Добавить общую папку"](media/data-box-gateway-use-cases/add-share.png)

2. Убедитесь, что общая папка сопоставлена с контейнером, который содержит начальные данные. В разделе **Выберите контейнер BLOB-объектов** выберите вариант **Использовать существующий** и найдите в списке контейнер, в который ранее передали данные с помощью Data Box.

    ![Параметры общей папки](media/data-box-gateway-use-cases/share-settings-select-existing-container.png)

3. Завершив создание общей папки, обновите ее. С помощью этой операции локальная общая папка обновляется и заполняется содержимым из Azure.

    ![Обновление общей папки](media/data-box-gateway-use-cases/refresh-share.png)

    При синхронизации общей папки Шлюз Data Box отправляет все добавочные изменения, которые внесены в файлы на клиентском компьютере.

## <a name="next-steps"></a>Дальнейшие действия

- Просмотрите [системные требования для Шлюза Data Box](data-box-gateway-system-requirements.md).
- Ознакомьтесь с общими сведениями об [ограничениях Шлюза Data Box](data-box-gateway-limits.md).
- Разверните [Шлюз Azure Data Box](data-box-gateway-deploy-prep.md) на портале Azure.