---
title: Перенос подписки Azure в другой каталог Azure AD
description: Узнайте, как передать подписку Azure и известные связанные ресурсы в другой каталог Azure Active Directory (Azure AD).
services: active-directory
author: rolyon
manager: mtillman
ms.service: role-based-access-control
ms.devlang: na
ms.topic: how-to
ms.workload: identity
ms.date: 12/10/2020
ms.author: rolyon
ms.openlocfilehash: 93821979e0c14a879b805049a4f662e9ef6d5b15
ms.sourcegitcommit: 3ee3045f6106175e59d1bd279130f4933456d5ff
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/31/2021
ms.locfileid: "106075684"
---
# <a name="transfer-an-azure-subscription-to-a-different-azure-ad-directory"></a>Перенос подписки Azure в другой каталог Azure AD

Организации могут иметь несколько подписок Azure. Каждая подписка связана с определенным каталогом Azure Active Directory (Azure AD). Чтобы упростить управление, может потребоваться перенести подписку в другой каталог Azure AD. При переносе подписки в другой каталог Azure AD некоторые ресурсы не передаются в целевой каталог. Например, все назначения ролей и настраиваемые роли в управлении доступом на основе ролей в Azure (Azure RBAC) **окончательно** удаляются из исходного каталога и не передаются в целевой каталог.

В этой статье описываются основные действия по переносу подписки в другой каталог Azure AD и повторному созданию некоторых ресурсов после переноса.

> [!NOTE]
> Подписки поставщиков облачных решений Azure не поддерживают изменение каталога Azure AD.

## <a name="overview"></a>Обзор

Перенос подписки Azure в другой каталог Azure AD — это сложный процесс, который необходимо планировать и выполнять тщательно. Многие службы Azure используют субъекты безопасности (удостоверения) для нормальной работы и даже управления другими ресурсами Azure. В этой статье мы постарались охватить большинство служб Azure, которые сильно зависят от субъектов безопасности, однако этим их список не исчерпывается.

> [!IMPORTANT]
> В некоторых сценариях перенос подписки может повлечь простой до окончания процесса. Тщательное планирование позволит оценить, потребуется ли простой для переноса подписки.

На следующей схеме показаны основные действия, которые необходимо выполнить при переносе подписки в другой каталог.

1. Подготовка к переносу

1. Перенос подписки Azure в другой каталог

1. Повторное создание ресурсов в целевом каталоге (назначений ролей, настраиваемых ролей, управляемых удостоверений и т. д.)

    ![Схема, демонстрирующая перенос подписки](./media/transfer-subscription/transfer-subscription.png)

### <a name="deciding-whether-to-transfer-a-subscription-to-a-different-directory"></a>Принятие решения о переносе подписки в другой каталог

Ниже приведено несколько причин, по которым может потребоваться перенос подписки.

- Из-за слияния или приобретения компании нужно управлять приобретенной подпиской в основном каталоге Azure AD.
- Пользователь организации создал подписку, и вы хотите консолидировать управление в определенном каталоге Azure AD.
- У вас есть приложения, которые зависят от идентификатора или URL-адреса конкретной подписки, и вы не можете легко изменить конфигурацию или код приложения.
- Часть вашего бизнеса выделилась в отдельную компанию, и вам нужно перенести некоторые ресурсы в другой каталог Azure AD.
- Вы хотите управлять некоторыми ресурсами в другом каталоге Azure AD, чтобы изолировать их в целях безопасности.

### <a name="alternate-approaches"></a>Альтернативные подходы

Перенос подписки вызовет простой до завершения процесса. В зависимости от сценария можно рассмотреть следующие альтернативные подходы.

- Повторно создайте ресурсы и скопируйте данные в целевой каталог и подписку.
- Внедрите архитектуру с несколькими каталогами и оставьте подписку в исходном каталоге. Используйте Azure Lighthouse для делегирования ресурсов, чтобы пользователи целевого каталога могли получить доступ к подписке в исходном каталоге. Подробнее см. в статье [Azure Lighthouse в корпоративных сценариях](../lighthouse/concepts/enterprise.md).

### <a name="understand-the-impact-of-transferring-a-subscription"></a>Общие сведения о влиянии переноса подписки

Некоторые ресурсы Azure зависят от подписки или каталога. В следующей таблице перечислены известные последствия переноса подписки согласно ситуации. Выполнив действия, описанные в этой статье, вы сможете заново создать некоторые ресурсы, существовавшие до переноса подписки.

> [!IMPORTANT]
> В этом разделе перечислены известные службы или ресурсы Azure, которые зависят от вашей подписки. Так как типы ресурсов в Azure постоянно развиваются, могут появиться дополнительные зависимости, не включенные в этот список, что может привести к критическим изменениям в среде. 

| Служба или ресурс | Затрагивается | Восстанавливается | Вы затронуты? | Возможные действия |
| --------- | --------- | --------- | --------- | --------- |
| Назначения ролей | Да | Да | [Список назначений ролей](#save-all-role-assignments) | Все назначения ролей удаляются без возможности восстановления. Необходимо сопоставить пользователей, группы и субъекты-службы с соответствующими объектами в целевом каталоге. Необходимо повторно создать назначения ролей. |
| Пользовательские роли | Да | Да | [Вывод списка настраиваемых ролей](#save-custom-roles) | Все настраиваемые роли удаляются без возможности восстановления. Необходимо повторно создать настраиваемые роли и назначения ролей. |
| Управляемые удостоверения, назначаемые системой | Да | Да | [Вывод списка управляемых удостоверений](#list-role-assignments-for-managed-identities) | Необходимо отключить и заново включить управляемые удостоверения. Необходимо повторно создать назначения ролей. |
| Управляемые удостоверения, назначаемые пользователем | Да | Да | [Вывод списка управляемых удостоверений](#list-role-assignments-for-managed-identities) | Необходимо удалить, повторно создать и подключить управляемые удостоверения к соответствующему ресурсу. Необходимо повторно создать назначения ролей. |
| Хранилище ключей Azure; | Да | Да | [Вывод списка политик доступа Key Vault](#list-key-vaults) | Необходимо обновить идентификатор клиента, связанный с хранилищами ключей. Необходимо удалить и добавить новые политики доступа. |
| Базы данных SQL Azure с включенной интеграцией аутентификации Azure AD | Да | нет | [Проверка баз данных SQL Azure с аутентификацией Azure AD](#list-azure-sql-databases-with-azure-ad-authentication) |  | 
| Служба хранилища Azure и Azure Data Lake Storage 2-го поколения | Да | Да |  | Необходимо повторно создать все списки ACL. |
| Хранилище Azure Data Lake Storage 1-го поколения | Да | Да |  | Необходимо повторно создать все списки ACL. |
| Файлы Azure | Да | Да |  | Необходимо повторно создать все списки ACL. |
| Служба синхронизации файлов Azure | Да | Да |  |  |
| управляемые диски Azure. | Да | Да |  |  Если вы используете наборы шифрования дисков для шифрования управляемых дисков с помощью управляемых клиентом ключей, необходимо отключить и повторно включить назначаемые системой удостоверения, связанные с наборами шифрования дисков. Кроме того, необходимо повторно создать назначения ролей, т. е. предоставить необходимые разрешения для наборов шифрования дисков в хранилищах ключей. |
| Служба Azure Kubernetes | Да | Да |  |  |
| Политика Azure | Да | нет | Все объекты Политики Azure, включая настраиваемые определения, назначения, исключения и данные о соответствии. | Необходимо [экспортировать](../governance/policy/how-to/export-resources.md), импортировать и повторно назначить определения. Затем создайте новые назначения политик и все необходимые [исключения политик](../governance/policy/concepts/exemption-structure.md). |
| Доменные службы Azure Active Directory | Да | нет |  |  |
| Регистрация приложений | Да | Да |  |  |

> [!WARNING]
> Если для ресурса, например учетной записи хранения или базы данных SQL, используется шифрование неактивных ресурсов, которое зависит от хранилища ключей, и если это хранилище ключей **не** принадлежит переносимой подписке, итогом сценария может стать неустранимый сбой. В этом случае стоит попробовать использовать другое хранилище ключей или временно отключить ключи, управляемые клиентом, чтобы избежать неисправимых последствий.

## <a name="prerequisites"></a>Предварительные требования

Чтобы выполнить эти действия, вам потребуется следующее:

- [Bash в Azure Cloud Shell](../cloud-shell/overview.md) или [Azure CLI](/cli/azure)
- Администратор учетной записи подписки, которую вы хотите переместить, в исходном каталоге
- Роль [владельца](built-in-roles.md#owner) в целевом каталоге

## <a name="step-1-prepare-for-the-transfer"></a>Шаг 1. Подготовка к переносу

### <a name="sign-in-to-source-directory"></a>Вход в исходный каталог

1. Войдите в Azure как администратор.

1. Получите список своих подписок с помощью команды [az account list](/cli/azure/account#az_account_list).

    ```azurecli
    az account list --output table
    ```

1. Используйте команду [az account set](/cli/azure/account#az_account_set), чтобы задать активную подписку для переноса.

    ```azurecli
    az account set --subscription "Marketing"
    ```

### <a name="install-the-azure-resource-graph-extension"></a>Установка расширения Azure Resource Graph

 Расширение Azure CLI для [Azure Resource Graph](../governance/resource-graph/index.yml), *resource-graph*, позволяет использовать команду [az graph](/cli/azure/ext/resource-graph/graph) для запроса ресурсов, управляемых Azure Resource Manager. Эта команда вам понадобится на последующих этапах.

1. Используйте команду [az extension list](/cli/azure/extension#az_extension_list), чтобы узнать, установлено ли расширение *resource-graph*.

    ```azurecli
    az extension list
    ```

1. Если нет, установите расширение *resource-graph*.

    ```azurecli
    az extension add --name resource-graph
    ```

### <a name="save-all-role-assignments"></a>Сохранение всех назначений ролей

1. Используйте команду [az role assignment list](/cli/azure/role/assignment#az_role_assignment_list), чтобы вывести список всех назначений ролей (включая наследуемые).

    Чтобы упростить просмотр списка, можно экспортировать выходные данные в формате JSON, TSV или в виде таблицы. Подробнее см. в статье [Вывод списка назначений ролей с помощью Azure RBAC и Azure CLI](role-assignments-list-cli.md).

    ```azurecli
    az role assignment list --all --include-inherited --output json > roleassignments.json
    az role assignment list --all --include-inherited --output tsv > roleassignments.tsv
    az role assignment list --all --include-inherited --output table > roleassignments.txt
    ```

1. Сохраните список назначений ролей.

    При переносе подписки все назначения ролей удаляются **без возможности восстановления**, поэтому важно сохранить копию.

1. Просмотрите список назначений ролей. В нем могут быть назначения ролей, которые вам не понадобятся в целевом каталоге.

### <a name="save-custom-roles"></a>Сохранение настраиваемых ролей

1. Используйте команду [az role definition list](/cli/azure/role/definition#az_role_definition_list), чтоб получить список настраиваемых ролей. Подробнее см. в статье [Создание или изменение настраиваемых ролей Azure с помощью Azure CLI](custom-roles-cli.md).

    ```azurecli
    az role definition list --custom-role-only true --output json --query '[].{roleName:roleName, roleType:roleType}'
    ```

1. Сохраните каждую настраиваемую роль, которая понадобится в целевом каталоге, в виде отдельного JSON-файла.

    ```azurecli
    az role definition list --name <custom_role_name> > customrolename.json
    ```

1. Создайте копии файлов настраиваемых ролей.

1. Измените каждую копию, чтобы использовать следующий формат.

    Позже эти файлы помогут вам заново создать настраиваемые роли в целевом каталоге.

    ```json
    {
      "Name": "",
      "Description": "",
      "Actions": [],
      "NotActions": [],
      "DataActions": [],
      "NotDataActions": [],
      "AssignableScopes": []
    }
    ```

### <a name="determine-user-group-and-service-principal-mappings"></a>Определение сопоставлений пользователей, групп и субъектов-служб

1. Определите пользователей, группы и субъекты-службы, которые будут сопоставляться в целевом каталоге, согласно списку назначений ролей.

    Тип субъекта можно узнать, просмотрев свойство `principalType` в каждом назначении ролей.

1. При необходимости создайте в целевом каталоге всех пользователей, группы или субъекты-службы, которые вам понадобятся.

### <a name="list-role-assignments-for-managed-identities"></a>Вывод списка назначений ролей для управляемых удостоверений

Управляемые удостоверения не обновляются при переносе подписки в другой каталог. Таким образом, все существующие управляемые удостоверения, назначаемые системой или пользователем, будут повреждены. После переноса подписки можно снова включить все управляемые удостоверения, назначаемые системой. Управляемые удостоверения, назначаемые пользователем, необходимо создать заново и подключить к целевому каталогу.

1. Просмотрите [список служб Azure, поддерживающих управляемые удостоверения](../active-directory/managed-identities-azure-resources/services-support-managed-identities.md), чтобы узнать, где можно использовать управляемые удостоверения.

1. Используйте команду [az ad sp list](/cli/azure/ad/sp#az_ad_sp_list), чтобы получить список управляемых удостоверений, назначаемых системой и пользователем.

    ```azurecli
    az ad sp list --all --filter "servicePrincipalType eq 'ManagedIdentity'"
    ```

1. Определите, какие из управляемых удостоверений в списке назначаются системой, а какие — пользователем. Для определения типа можно использовать следующие критерии.

    | Критерии | Тип управляемого удостоверения |
    | --- | --- |
    | Свойство `alternativeNames` содержит `isExplicit=False` | Назначаемое системой |
    | Свойство `alternativeNames` не содержит `isExplicit` | Назначаемое системой |
    | Свойство `alternativeNames` содержит `isExplicit=True` | Назначаемое пользователем |

    Можно также использовать команду [az identity list](/cli/azure/identity#az_identity_list), чтобы вывести только список управляемых удостоверений, назначаемых пользователем. Подробнее см. в статье [Создание и удаление управляемых удостоверений, назначаемых пользователем, а также получение их списка с помощью Azure CLI](../active-directory/managed-identities-azure-resources/how-to-manage-ua-identity-cli.md).

    ```azurecli
    az identity list
    ```

1. Получите список значений `objectId` для управляемых удостоверений.

1. Выполните поиск в списке назначений ролей, чтобы узнать, есть ли назначения ролей для управляемых удостоверений.

### <a name="list-key-vaults"></a>получение списка хранилищ ключей;

Создаваемое в рамках подписки хранилище ключей автоматически привязывается к идентификатору клиента Azure Active Directory, заданному по умолчанию для этой подписки. Все записи политики доступа также привязываются к этому идентификатору клиента. Подробнее см. в статье [Перемещение Azure Key Vault в другую подписку](../key-vault/general/move-subscription.md).

> [!WARNING]
> Если для ресурса, например учетной записи хранения или базы данных SQL, используется шифрование неактивных ресурсов, которое зависит от хранилища ключей, и если это хранилище ключей **не** принадлежит переносимой подписке, итогом сценария может стать неустранимый сбой. В этом случае стоит попробовать использовать другое хранилище ключей или временно отключить ключи, управляемые клиентом, чтобы избежать неисправимых последствий.

- Если у вас есть хранилище ключей, используйте команду [az keyvault show](/cli/azure/keyvault#az_keyvault_show), чтобы получить список политик доступа. Подробнее см. в статье [Назначение политики доступа Key Vault](../key-vault/general/assign-access-policy-cli.md).

    ```azurecli
    az keyvault show --name MyKeyVault
    ```

### <a name="list-azure-sql-databases-with-azure-ad-authentication"></a>Вывод списка баз данных SQL Azure с аутентификацией Azure AD

- Используйте команду [az sql server ad-admin list](/cli/azure/sql/server/ad-admin#az_sql_server_ad_admin_list) и расширение [az graph](/cli/azure/ext/resource-graph/graph), чтобы узнать, включена ли интеграция аутентификации Azure AD в ваших базах данных SQL Azure. Подробнее см. в статье [Настройка аутентификации Azure Active Directory и управление ей с помощью SQL](../azure-sql/database/authentication-aad-configure.md).

    ```azurecli
    az sql server ad-admin list --ids $(az graph query -q 'resources | where type == "microsoft.sql/servers" | project id' -o tsv | cut -f1)
    ```

### <a name="list-acls"></a>Вывод списков ACL

1. Если вы используете Azure Data Lake Storage 1-го поколения, списки ACL, применяемые к любому файлу, можно получить на портале Azure или с помощью PowerShell.

1. Если вы используете Azure Data Lake Storage 2-го поколения, списки ACL, применяемые к любому файлу, тоже можно получить на портале Azure или с помощью PowerShell.

1. Если вы используете Файлы Azure, выведите списки ACL, применяемые к любому файлу.

### <a name="list-other-known-resources"></a>Вывод списка других известных ресурсов

1. Команда [az account show](/cli/azure/account#az_account_show) позволяет узнать идентификатор подписки.

    ```azurecli
    subscriptionId=$(az account show --query id | sed -e 's/^"//' -e 's/"$//')
    ```

1. Расширение [az graph](/cli/azure/ext/resource-graph/graph) выводит список других ресурсов Azure с известными зависимостями каталога Azure AD.

    ```azurecli
    az graph query -q \
    'resources | where type != "microsoft.azureactivedirectory/b2cdirectories" | where  identity <> "" or properties.tenantId <> "" or properties.encryptionSettingsCollection.enabled == true | project name, type, kind, identity, tenantId, properties.tenantId' \
    --subscriptions $subscriptionId --output table
    ```

## <a name="step-2-transfer-the-subscription"></a>Шаг 2. Перенос подписки

На этом этапе подписка переносится из исходного каталога в целевой. Действия будут отличаться в зависимости от того, нужно ли также передавать права на выставление счетов.

> [!WARNING]
> При переносе подписки все назначения ролей в исходном каталоге удаляются **окончательно** без возможности восстановления. После переноса подписки откат назад становится невозможным. Перед выполнением этого шага убедитесь, что выполнены предыдущие шаги.

1. Определите, нужно ли также передавать в другую учетную запись права на выставление счетов.

1. Перенесите подписку Azure в другой каталог.

    - Если вы хотите сохранить текущие права на выставление счетов, выполните действия, описанные в статье [Связывание или добавление подписки Azure в клиент Azure Active Directory](../active-directory/fundamentals/active-directory-how-subscriptions-associated-directory.md).
    - Если вы хотите передать права на выставление счетов, выполните действия, описанные в статье [Передача прав на выставление счетов по подписке Azure в другую учетную запись](../cost-management-billing/manage/billing-subscription-transfer.md). Чтобы перенести подписку в другой каталог, необходимо установить флажок **Клиент Azure AD для подписки**.

1. Завершив перенос подписки, вернитесь к этой статье, чтобы заново создать ресурсы в целевом каталоге.

## <a name="step-3-re-create-resources"></a>Шаг 3. Повторное создание ресурсов

### <a name="sign-in-to-target-directory"></a>Вход в целевой каталог

1. Войдите в целевой каталог как пользователь, который принял запрос на перенос.

    Доступ к управлению этими ресурсами будет только у пользователя новой учетной записи, который принял запрос на перенос.

1. Получите список своих подписок с помощью команды [az account list](/cli/azure/account#az_account_list).

    ```azurecli
    az account list --output table
    ```

1. Запустите команду [az account set](/cli/azure/account#az_account_set), чтобы задать активную подписку для использования.

    ```azurecli
    az account set --subscription "Contoso"
    ```

### <a name="create-custom-roles"></a>Создание настраиваемых ролей
        
- Используйте команду [az role definition create](/cli/azure/role/definition#az_role_definition_create), чтобы создать все настраиваемые роли из файлов, созданных ранее. Подробнее см. в статье [Создание или изменение настраиваемых ролей Azure с помощью Azure CLI](custom-roles-cli.md).

    ```azurecli
    az role definition create --role-definition <role_definition>
    ```

### <a name="assign-roles"></a>Назначение ролей

- Используйте команду [az role assignment create](/cli/azure/role/assignment#az_role_assignment_create), чтобы назначить роли пользователям, группам и субъектам-службам. Подробнее см. в статье [Назначение ролей Azure с помощью Azure CLI](role-assignments-cli.md).

    ```azurecli
    az role assignment create --role <role_name_or_id> --assignee <assignee> --resource-group <resource_group>
    ```

### <a name="update-system-assigned-managed-identities"></a>Обновление управляемые удостоверений, назначаемых системой

1. Отключите и снова включите управляемые удостоверения, назначаемые системой.

    | Служба Azure | Дополнительные сведения | 
    | --- | --- |
    | Виртуальные машины | [Настройка управляемых удостоверений для ресурсов Azure на виртуальной машине Azure с помощью Azure CLI](../active-directory/managed-identities-azure-resources/qs-configure-cli-windows-vm.md#system-assigned-managed-identity) |
    | Масштабируемые наборы виртуальных машин | [Настройка управляемых удостоверений для ресурсов Azure в масштабируемом наборе виртуальных машин с помощью Azure CLI](../active-directory/managed-identities-azure-resources/qs-configure-cli-windows-vmss.md#system-assigned-managed-identity) |
    | другие службы. | [Службы с поддержкой управляемых удостоверений для ресурсов Azure](../active-directory/managed-identities-azure-resources/services-support-managed-identities.md) |

1. Используйте команду [az role assignment create](/cli/azure/role/assignment#az_role_assignment_create), чтобы назначить роли управляемым удостоверениям, назначаемым системой. Подробнее см. в статье [Назначение доступа к ресурсу на основе управляемого удостоверения с помощью Azure CLI](../active-directory/managed-identities-azure-resources/howto-assign-access-cli.md).

    ```azurecli
    az role assignment create --assignee <objectid> --role '<role_name_or_id>' --scope <scope>
    ```

### <a name="update-user-assigned-managed-identities"></a>Обновление управляемых удостоверений, назначаемых пользователем

1. Удалите, заново создайте и подключите управляемые удостоверения, назначаемые пользователем.

    | Служба Azure | Дополнительные сведения | 
    | --- | --- |
    | Виртуальные машины | [Настройка управляемых удостоверений для ресурсов Azure на виртуальной машине Azure с помощью Azure CLI](../active-directory/managed-identities-azure-resources/qs-configure-cli-windows-vm.md#user-assigned-managed-identity) |
    | Масштабируемые наборы виртуальных машин | [Настройка управляемых удостоверений для ресурсов Azure в масштабируемом наборе виртуальных машин с помощью Azure CLI](../active-directory/managed-identities-azure-resources/qs-configure-cli-windows-vmss.md#user-assigned-managed-identity) |
    | другие службы. | [Службы с поддержкой управляемых удостоверений для ресурсов Azure](../active-directory/managed-identities-azure-resources/services-support-managed-identities.md)<br/>[Создание и удаление управляемых удостоверений, назначаемых пользователем, а также получение их списка с помощью Azure CLI](../active-directory/managed-identities-azure-resources/how-to-manage-ua-identity-cli.md) |

1. Используйте команду [az role assignment create](/cli/azure/role/assignment#az_role_assignment_create), чтобы назначить роли управляемым удостоверениям, назначаемым системой. Подробнее см. в статье [Назначение доступа к ресурсу на основе управляемого удостоверения с помощью Azure CLI](../active-directory/managed-identities-azure-resources/howto-assign-access-cli.md).

    ```azurecli
    az role assignment create --assignee <objectid> --role '<role_name_or_id>' --scope <scope>
    ```

### <a name="update-key-vaults"></a>Обновление хранилищ ключей

В этом разделе описаны основные шаги по обновлению хранилищ ключей. Подробнее см. в статье [Перемещение Azure Key Vault в другую подписку](../key-vault/general/move-subscription.md).

1. Обновите идентификатор клиента, связанный со всеми существующими хранилищами ключей в подписке, для целевого каталога.

1. Удалите все существующие записи политики доступа.

1. Добавьте новые записи политики доступа, связанные с целевым каталогом.

### <a name="update-acls"></a>Обновление списков управления доступом

1. Если вы используете Azure Data Lake Storage 1-го поколения, назначьте соответствующие списки ACL. Дополнительные сведения см. в статье [Защита данных, хранимых в Azure Data Lake Storage 1-го поколения](../data-lake-store/data-lake-store-secure-data.md).

1. Если вы используете Azure Data Lake Storage 2-го поколения, назначьте соответствующие списки ACL. Дополнительные сведения см. в статье [Контроль доступа в Azure Data Lake Storage 2-го поколения](../storage/blobs/data-lake-storage-access-control.md).

1. Если вы используете Файлы Azure, назначьте соответствующие списки ACL.

### <a name="review-other-security-methods"></a>Проверка других механизмов безопасности

Хотя при передаче подписки назначения ролей удаляются, пользователи из исходной учетной записи могут сохранить возможность доступа к подписке через другие механизмы безопасности, включая:

- Ключи доступа для служб, таких как служба хранилища.
- [Сертификаты управления](../cloud-services/cloud-services-certs-create.md), которые предоставляют пользователю с правами администратора доступ к ресурсам подписки.
- Учетные данные удаленного доступа для служб, таких как Виртуальные машины Azure.

Если вы хотите лишить пользователей исходного каталога доступа к целевому каталогу, следует подумать о смене учетных данных. Пока вы не обновите учетные данные, у пользователей по-прежнему будет доступ к ресурсам подписки после ее перемещения.

1. Измените ключи доступа к учетной записи хранения. См. сведения о том, как [управлять ключами доступа к учетной записи хранения](../storage/common/storage-account-keys-manage.md).

1. Если вы используете ключи доступа для других служб, таких как База данных SQL Azure или обмен сообщениями служебной шины Azure, измените ключи доступа.

1. Если ресурсы используют секрет, откройте их параметры и обновите секрет.

1. Если ресурсы используют сертификаты, обновите сертификат.

## <a name="next-steps"></a>Дальнейшие действия

- [Передача прав владения на выставление счетов для подписки Azure другой учетной записи](../cost-management-billing/manage/billing-subscription-transfer.md)
- [Перенос подписок Azure между подписчиками и CSP](../cost-management-billing/manage/transfer-subscriptions-subscribers-csp.md)
- [Associate or add an Azure subscription to your Azure Active Directory tenant](../active-directory/fundamentals/active-directory-how-subscriptions-associated-directory.md) (Связывание или добавление подписки Azure в клиент Azure Active Directory)
- [Использование Azure Lighthouse в корпоративных сценариях](../lighthouse/concepts/enterprise.md)
