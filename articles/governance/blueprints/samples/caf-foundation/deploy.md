---
title: Развертывание примера схемы CAF Foundation
description: Процедура развертывания для образца схемы CAF Foundation и сведения о параметрах артефактов схемы.
ms.date: 03/12/2021
ms.topic: sample
ms.openlocfilehash: a8d41364451bf2ebf1e48b90fad74f4b24c804e1
ms.sourcegitcommit: 32e0fedb80b5a5ed0d2336cea18c3ec3b5015ca1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2021
ms.locfileid: "103470155"
---
# <a name="deploy-the-microsoft-cloud-adoption-framework-for-azure-foundation-blueprint-sample"></a>Развертывание примера схемы Microsoft Cloud Adoption Framework для Azure Foundation

Чтобы развернуть пример схемы Microsoft Cloud Adoption Framework для Azure (CAF) Foundation, необходимо выполнить следующие действия:

> [!div class="checklist"]
> - создание схемы на основе примера;
> - установка метки копии образца **Опубликовано**;
> - назначение копии схемы существующей подписке;

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free), прежде чем начинать работу.

## <a name="create-blueprint-from-sample"></a>Создание схемы на основе примера

Для начала внедрите пример схемы, создав новую схему в среде на основе этого примера.

1. Выберите **Все службы** в левой области. Найдите и выберите пункт **Схемы**.

1. На странице **Начало работы** с левой стороны в разделе _Создание схемы_ щелкните кнопку **Создать**.

1. Найдите пример схемы **CAF Foundation** в разделе _Другие примеры_ и выберите **Использовать этот пример**.

1. Введите _основные данные_ образца схемы.

   - **Имя схемы**. Укажите имя для копии примера схемы CAF Foundation.
   - **Расположение определения**. Используйте кнопку с многоточием и выберите группу управления, в которой нужно сохранить копию примера.

1. В верхней части страницы выберите вкладку _Артефакты_ или внизу страницы щелкните **Далее: Артефакты**.

1. Просмотрите список артефактов, из которых состоит образец схемы. Многие артефакты имеют параметры, которые мы определим позднее. После завершения просмотра образца схемы выберите **Сохранить черновик**.

## <a name="publish-the-sample-copy"></a>Публикации копии образца

Теперь в вашей среде создана копия образца схемы. Она создана в режиме **Черновик**, и прежде чем назначить и развернуть эту копию, ее необходимо **опубликовать**. Вы можете изменить параметры своей копии этого примера схемы с учетом среды и требований, но такие изменения могут нарушить соответствие типу схемы CAF Foundation.

1. Выберите **Все службы** в левой области. Найдите и выберите пункт **Схемы**.

1. В меню слева выберите страницу **Определения схем**. Примените фильтры, чтобы найти копию примера схемы, и выберите его.

1. В верхней части страницы выберите **Опубликовать схему**. В правой части новой страницы укажите **версию** для копии примера схемы. Это свойство позволяет вносить изменения позднее. Укажите **сведения об изменениях**, например "Первая версия, опубликованная из примера схемы CAF Foundation". Затем щелкните **Опубликовать** в нижней части страницы.

## <a name="assign-the-sample-copy"></a>Назначение копии образца

После успешной **публикации** копию образца схемы можно назначить подписке в группе управления, в которой ее сохранили. На этом шаге указывают параметры, которые позволяют сделать каждое развертывание образца схемы уникальным.

1. Выберите **Все службы** в левой области. Найдите и выберите пункт **Схемы**.

1. В меню слева выберите страницу **Определения схем**. Примените фильтры, чтобы найти копию примера схемы, и выберите его.

1. В верхней части страницы определения схемы выберите **Назначить схему**.

1. Укажите значения параметра для назначения схемы.

   - Основы
       - **Подписки**. Выберите одну или несколько подписок, которые находятся в группе управления, в которой вы сохранили копию образца схемы. Если вы выберите более одной подписки, для каждой из них будет создано назначение с использованием введенных параметров.
     - **Имя назначения.** Имя автоматически заполняется на основе имени схемы.
       Измените его при желании или сохраните вариант по умолчанию.
     - **Расположение.** Выберите регион, в котором будет создано управляемое удостоверение.
     - Azure Blueprint использует это управляемое удостоверение для развертывания всех артефактов в назначенную схему.
       Дополнительные сведения см. в статье [Управляемые удостоверения для ресурсов Azure](../../../../active-directory/managed-identities-azure-resources/overview.md).
     - **Версия определения схемы**. Выберите **опубликованную** версию копии примера схемы.

   - Блокировка назначения

     Выберите режим блокировки для схемы с учетом своей среды. Дополнительные сведения см. в разделе [Блокировка ресурсов схем](../../concepts/resource-locking.md).

   - Управляемое удостоверение

     Выберите вариант удостоверения по умолчанию (управляемое удостоверение, _назначаемое системой_,) или удостоверение, _назначаемое пользователем_.

   - Параметры схемы

     Параметры, определенные в этом разделе, используются многими артефактами из определения схемы. Это сделано для обеспечения согласованности.

     - **Организация**. Введите имя организации, например Contoso, которое должно быть уникальным.
     - **Регион Azure**. Выберите регион Azure для развертывания.
     - **Разрешенные расположения**. В каких регионах Azure можно будет создавать ресурсы?
     
   - Параметры артефакта

     Параметры, определенные в этом разделе, применяются к артефакту, под которым они определены. Поскольку эти параметры определяются во время назначения схемы, они являются [динамическими](../../concepts/parameters.md#dynamic-parameters). Полный список параметров артефактов с описаниями можно найти в [таблице параметров артефактов](#artifact-parameters-table).

1. После ввода всех параметров в нижней части страницы выберите **Назначить**. Это действие создает назначение схемы и начинает развертывание артефактов. Развертывание занимает около часа. Чтобы проверить состояние развертывания, откройте назначение схемы.

> [!WARNING]
> Служба Azure Blueprints и встроенные примеры схем предоставляются **бесплатно**. Ресурсы Azure оплачиваются согласно [тарифам на продукты](https://azure.microsoft.com/pricing/). С помощью [калькулятора цен](https://azure.microsoft.com/pricing/calculator/) вы можете оценить расходы на выполнение ресурсов, развертываемых этим примером схемы.

## <a name="artifact-parameters-table"></a>Таблица параметров артефактов

Следующая таблица содержит полный список параметров артефактов схемы.

|Имя артефакта|Тип артефакта|Имя параметра|Описание|
|-|-|-|-|
|Допустимые номера SKU учетных записей хранения|Назначение политики|Policy_Allowed-StorageAccount-SKUs|Номер SKU, используемый в учетных записях хранения журналов диагностики|
|Allowed virtual machine SKUs;|Назначение политики|Policy_Allowed-VM-SKUs|Allowed virtual machine SKUs;|
|Добавление тега CostCenter в группы ресурсов|Назначение политики|Policy_CostCenter_Tag|Добавление тега CostCenter и его значения из группы ресурсов|
|Типы ресурсов, которые не нужно разрешать в среде|Назначение политики|Policy_Allowed-Resource-Types|Ресурсы Azure, которые нужно разрешить в среде|
|Развертывание Key Vault|Шаблон Resource Manager|KV-AccessPolicy|**Locked** — <Object ID> группы или пользователя Azure AD, которому нужно предоставить разрешения в Key Vault|
|Развертывание Log Analytics|Шаблон Resource Manager|LogAnalytics_DataRetention|**Locked** — количество дней, в течение которых данные будут храниться в Log Analytics|
|Развертывание Log Analytics|Шаблон Resource Manager|LogAnalytics_Location|**Locked** — регион, используемый при создании рабочей области|

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы ознакомились с шагами по развертыванию примера схемы CAF Foundation, перейдите к следующей статье, чтобы узнать об архитектуре:

> [!div class="nextstepaction"]
> [Общие сведения об использовании Microsoft Cloud Adoption Framework с примером схемы CAF Foundation](./index.md)

Дополнительные статьи о схемах и способах их использования:

- Ознакомьтесь со сведениями о [жизненном цикле схем](../../concepts/lifecycle.md).
- Узнайте, как использовать [статические и динамические параметры](../../concepts/parameters.md).
- Научитесь настраивать [последовательность схемы](../../concepts/sequencing-order.md).
- Узнайте, как применять [блокировку ресурсов схемы](../../concepts/resource-locking.md).
- Узнайте, как [обновлять существующие назначения](../../how-to/update-existing-assignments.md).
