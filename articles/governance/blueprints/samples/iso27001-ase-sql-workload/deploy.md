---
title: Развертывание примера схемы рабочей нагрузки ASE или SQL на основе ISO 27001
description: 'Процедура развертывания примера схемы "ISO 27001: рабочая нагрузка Среды службы приложений или Базы данных SQL", включая сведения о параметрах артефактов схемы.'
ms.date: 02/05/2021
ms.topic: sample
ms.openlocfilehash: 5c329a9d7175772e80ea6d9d8da3baf85ce0d170
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "104669650"
---
# <a name="deploy-the-iso-27001-app-service-environmentsql-database-workload-blueprint-sample"></a>Развертывание примера схемы "ISO 27001: рабочая нагрузка Среды службы приложений или Базы данных SQL"

Чтобы развернуть пример схемы "ISO 27001: рабочая нагрузка Среды службы приложений или Базы данных SQL" в Azure Blueprints, выполните следующие действия:

> [!div class="checklist"]
> - развертывание примера схемы [ISO 27001: общие службы](../iso27001-shared/index.md);
> - создание схемы на основе примера;
> - установка метки копии образца **Опубликовано**;
> - назначение копии схемы существующей подписке;

Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free), прежде чем начинать работу.

## <a name="deploy-the-iso-27001-shared-services-blueprint-sample"></a>Развертывание примера схемы "ISO 27001: общие службы"

Прежде чем развернуть этот пример схемы, разверните в целевой подписке пример схемы [ISO 27001: общие службы](../iso27001-shared/index.md). Без успешного развертывания примера схемы "ISO 27001: общие службы" будут отсутствовать необходимые для этого примера инфраструктурные зависимости, что приведет к сбою во время развертывания.

> [!IMPORTANT]
> Этот пример схемы следует назначить в ту же подписку, что и пример схемы [ISO 27001: общие службы](../iso27001-shared/index.md).

## <a name="create-blueprint-from-sample"></a>Создание схемы на основе примера

Для начала внедрите пример схемы, создав новую схему в среде на основе этого примера.

1. Выберите **Все службы** в левой области. Найдите и выберите пункт **Схемы**.

1. На странице **Начало работы** с левой стороны в разделе _Создание схемы_ щелкните кнопку **Создать**.

1. Найдите пример схемы **ISO 27001: рабочая нагрузка ASE/SQL** в разделе _Другие примеры_ и выберите действие **Использовать этот пример**.

1. Введите _основные данные_ образца схемы.

   - **Имя схемы**. Укажите имя для копии примера схемы "ISO 27001: рабочая нагрузка ASE/SQL".
   - **Расположение определения**. Используйте кнопку с многоточием и выберите группу управления, в которой нужно сохранить копию примера.

1. В верхней части страницы выберите вкладку _Артефакты_ или внизу страницы щелкните **Далее: Артефакты**.

1. Просмотрите список артефактов, из которых состоит образец схемы. Многие артефакты имеют параметры, которые мы определим позднее. После завершения просмотра образца схемы выберите **Сохранить черновик**.

## <a name="publish-the-sample-copy"></a>Публикации копии образца

Теперь в вашей среде создана копия образца схемы. Она создана в режиме **Черновик**, и прежде чем назначить и развернуть эту копию, ее необходимо **опубликовать**. Вы можете изменить параметры своей копии этого примера схемы с учетом среды и требований, но такие изменения могут нарушить соответствие стандарту ISO 27001.

1. Выберите **Все службы** в левой области. Найдите и выберите пункт **Схемы**.

1. В меню слева выберите страницу **Определения схем**. Примените фильтры, чтобы найти копию примера схемы, и выберите его.

1. В верхней части страницы выберите **Опубликовать схему**. В правой части новой страницы укажите **версию** для копии примера схемы. Это свойство позволяет вносить изменения позднее. Укажите **сведения об изменениях**, например "Первая версия, опубликованная из примера схемы ISO 27001". Затем щелкните **Опубликовать** в нижней части страницы.

## <a name="assign-the-sample-copy"></a>Назначение копии образца

После успешной **публикации** копию образца схемы можно назначить подписке в группе управления, в которой ее сохранили. На этом шаге указывают параметры, которые позволяют сделать каждое развертывание образца схемы уникальным.

1. Выберите **Все службы** в левой области. Найдите и выберите пункт **Схемы**.

1. В меню слева выберите страницу **Определения схем**. Примените фильтры, чтобы найти копию примера схемы, и выберите его.

1. В верхней части страницы определения схемы выберите **Назначить схему**.

1. Укажите значения параметра для назначения схемы.

   - Основы

     - **Подписки**. Выберите одну или несколько подписок, которые находятся в группе управления, в которой вы сохранили копию образца схемы. Если вы выберите более одной подписки, для каждой из них будет создано назначение с использованием введенных параметров.
     - **Имя назначения.** Имя автоматически заполняется на основе имени схемы.
       Измените его при желании или сохраните вариант по умолчанию.
     - **Расположение.** Выберите регион, в котором будет создано управляемое удостоверение. Azure Blueprint использует это управляемое удостоверение для развертывания всех артефактов в назначенную схему. Дополнительные сведения см. в статье [Управляемые удостоверения для ресурсов Azure](../../../../active-directory/managed-identities-azure-resources/overview.md).
     - **Версия определения схемы**. Выберите **опубликованную** версию копии примера схемы.

   - Блокировка назначения

     Выберите режим блокировки для схемы с учетом своей среды. Дополнительные сведения см. в разделе [Блокировка ресурсов схем](../../concepts/resource-locking.md).

   - Управляемое удостоверение

     Сохраните значение по умолчанию _Назначено системой_ для управляемого удостоверения.

   - Параметры схемы

     Параметры, определенные в этом разделе, используются многими артефактами из определения схемы. Это сделано для обеспечения согласованности.

     - **Название организации**. Введите короткое название вашей организации. Это свойство в основном используется для именования ресурсов.
     - **Shared Service Subscription ID** (ИД подписки общих служб). Идентификатор подписки, в которую назначен пример схемы [ISO 27001: общие службы](../iso27001-shared/index.md).
     - **Префикс адреса подсети по умолчанию**. Используемая по умолчанию подсеть виртуальной сети в нотации CIDR.
       Значение по умолчанию — _10.1.0.0/16_.
     - **Расположение рабочих нагрузок**. Определяет расположение для развертывания артефактов. Некоторые службы доступны не во всех регионах. Артефакты, которые развертывают такие службы, предоставляют параметр для настройки расположения для развертывания артефакта.

   - Параметры артефакта

     Параметры, определенные в этом разделе, применяются к артефакту, под которым они определены. Поскольку эти параметры определяются во время назначения схемы, они являются [динамическими](../../concepts/parameters.md#dynamic-parameters). Полный список параметров артефактов с описаниями можно найти в [таблице параметров артефактов](#artifact-parameters-table).

1. После ввода всех параметров в нижней части страницы выберите **Назначить**. Это действие создает назначение схемы и начинает развертывание артефактов. Развертывание занимает около часа. Чтобы проверить состояние развертывания, откройте назначение схемы.

> [!WARNING]
> Служба Azure Blueprints и встроенные примеры схем предоставляются **бесплатно**. Ресурсы Azure оплачиваются согласно [тарифам на продукты](https://azure.microsoft.com/pricing/). С помощью [калькулятора цен](https://azure.microsoft.com/pricing/calculator/) вы можете оценить расходы на выполнение ресурсов, развертываемых этим примером схемы.

## <a name="artifact-parameters-table"></a>Таблица параметров артефактов

Следующая таблица содержит полный список параметров артефактов схемы.

|Имя артефакта|Тип артефакта|Имя параметра|Описание|
|-|-|-|-|
|Группа ресурсов Log Analytics|Группа ресурсов|Имя|**Заблокировано**. Чтобы группа ресурсов была уникальной, объединяются значения **названия организации** и `-workload-log-rg`.|
|Группа ресурсов Log Analytics|Группа ресурсов|Расположение|**Заблокировано**. Используется параметр схемы.|
|Шаблон Log Analytics|Шаблон Resource Manager|Уровень служб|Задает уровень рабочей области Log Analytics. Значение по умолчанию — _PerNode_.|
|Шаблон Log Analytics|Шаблон Resource Manager|Хранение журналов в днях|Хранение данных в днях. Значение по умолчанию — _365_.|
|Шаблон Log Analytics|Шаблон Resource Manager|Расположение|Регион, используемый для создания рабочей области Log Analytics. Значение по умолчанию — _Западная часть США 2_.|
|Группа сетевых ресурсов|Группа ресурсов|Имя|**Заблокировано**. Чтобы группа ресурсов была уникальной, объединяются значения **названия организации** и `-workload-net-rg`.|
|Группа сетевых ресурсов|Группа ресурсов|Расположение|**Заблокировано**. Используется параметр схемы.|
|Шаблон группы безопасности сети|Шаблон Resource Manager|Хранение журналов в днях|Хранение данных в днях. Значение по умолчанию — _365_.|
|Шаблон виртуальной сети и таблицы маршрутов|Шаблон Resource Manager|Частный IP-адрес брандмауэра Azure|Определяет частный IP-адрес [Брандмауэра Azure](../../../../firewall/overview.md). Должен входить в нотацию CIDR, которая определена в схеме _ISO 27001: Общие службы_ в параметре артефакта **Префикс адреса подсети Брандмауэра Azure**. Значение по умолчанию — _10.0.4.4_.|
|Шаблон виртуальной сети и таблицы маршрутов|Шаблон Resource Manager|Shared Services Subscription ID (ИД подписки общих служб)|Значение, используемое для включения пиринга виртуальной сети между рабочей нагрузкой и общими службами.|
|Шаблон виртуальной сети и таблицы маршрутов|Шаблон Resource Manager|Префикс адреса виртуальной сети|Виртуальная сеть в нотации CIDR. Значение по умолчанию — _10.1.0.0/16_.|
|Шаблон виртуальной сети и таблицы маршрутов|Шаблон Resource Manager|Префикс адреса подсети по умолчанию|Используемая по умолчанию подсеть виртуальной сети в нотации CIDR. Значение по умолчанию — _10.1.0.0/16_.|
|Шаблон виртуальной сети и таблицы маршрутов|Шаблон Resource Manager|IP-адрес ADDS|IP-адрес первой виртуальной машины ADDS. Это значение используется в качестве пользовательского сервера DNS для виртуальной сети.|
|группа ресурсов хранилища ключей;|Группа ресурсов|Имя|**Заблокировано**. Чтобы группа ресурсов была уникальной, объединяются значения **названия организации** и `-workload-kv-rg`.|
|группа ресурсов хранилища ключей;|Группа ресурсов|Расположение|**Заблокировано**. Используется параметр схемы.|
|Шаблон Key Vault|Шаблон Resource Manager|Идентификатор объекта AAD|Идентификатор объекта AAD для учетной записи, которой требуется доступ к экземпляру Key Vault. Значение по умолчанию отсутствует, пустые значения не допускаются. Чтобы найти это значение на портале Azure, найдите и выберите элемент "Пользователи" в разделе _Службы_. Отфильтруйте учетные записи по полю _Имя_ и выберите нужную учетную запись. На странице _Профиль пользователя_ щелкните значок "Щелкните, чтобы копировать" рядом с полем _Идентификатор объекта_.|
|Шаблон Key Vault|Шаблон Resource Manager|Хранение журналов в днях|Хранение данных в днях. Значение по умолчанию — _365_.|
|Шаблон Key Vault|Шаблон Resource Manager|Номер SKU для Key Vault|Указывает номер SKU для создаваемого хранилища ключей. Значение по умолчанию — _Premium_.|
|Шаблон Key Vault|Шаблон Resource Manager|Имя администратора Azure SQL Server|Имя пользователя для доступа к Azure SQL Server Должно совпадать со значением аналогичного свойства в **шаблоне базы данных SQL Azure**. Значение по умолчанию — _sql-admin-user_.|
|Группа ресурсов для Базы данных SQL Azure|Группа ресурсов|Имя|**Заблокировано**. Чтобы группа ресурсов была уникальной, объединяются значения **названия организации** и `-workload-azsql-rg`.|
|Группа ресурсов для Базы данных SQL Azure|Группа ресурсов|Расположение|**Заблокировано**. Используется параметр схемы.|
|Шаблон базы данных SQL Azure|Шаблон Resource Manager|Имя администратора Azure SQL Server|Имя пользователя для Azure SQL Server. Должно совпадать со значением аналогичного свойства в **шаблоне Key Vault**. Значение по умолчанию — _sql-admin-user_.|
|Шаблон базы данных SQL Azure|Шаблон Resource Manager|Пароль администратора Azure SQL Server (идентификатор ресурса Key Vault)|Идентификатор ресурса для Key Vault. Укажите значение "/subscriptions/{subscriptionId}/resourceGroups/{orgName}-workload-kv-rg/providers/Microsoft.KeyVault/vaults/{orgName}-workload-kv" и замените `{subscriptionId}` соответствующим идентификатором подписки, а `{orgName}` — параметром **Название организации** в схеме.|
|Шаблон базы данных SQL Azure|Шаблон Resource Manager|Пароль администратора Azure SQL Server (имя секрета Key Vault)|Имя администратора SQL Server. Должно совпадать со значением свойства **Имя администратора Azure SQL Server** в **шаблоне Key Vault**.|
|Шаблон базы данных SQL Azure|Шаблон Resource Manager|Хранение журналов в днях|Хранение данных в днях. Значение по умолчанию — _365_.|
|Шаблон базы данных SQL Azure|Шаблон Resource Manager|Идентификатор объекта администратора AAD|Идентификатор объекта AAD пользователя, который будет назначен администратором Active Directory. Значение по умолчанию отсутствует, пустые значения не допускаются. Чтобы найти это значение на портале Azure, найдите и выберите элемент "Пользователи" в разделе _Службы_. Отфильтруйте учетные записи по полю _Имя_ и выберите нужную учетную запись. На странице _Профиль пользователя_ щелкните значок "Щелкните, чтобы копировать" рядом с полем _Идентификатор объекта_.|
|Шаблон базы данных SQL Azure|Шаблон Resource Manager|Имя администратора AAD|Сейчас нельзя задать учетные записи Майкрософт (например, live.com или outlook.com) для роли администратора. Роль администратора могут выполнять только пользователи и группы безопасности в пределах организации. Значение по умолчанию отсутствует, пустые значения не допускаются. Чтобы найти это значение на портале Azure, найдите и выберите элемент "Пользователи" в разделе _Службы_. Отфильтруйте учетные записи по полю _Имя_ и выберите нужную учетную запись. На странице _Профиль пользователя_ скопируйте _Имя пользователя_.|
|Группа ресурсов Среды службы приложений|Группа ресурсов|Имя|**Заблокировано**. Чтобы группа ресурсов была уникальной, объединяются значения **названия организации** и `-workload-ase-rg`.|
|Группа ресурсов Среды службы приложений|Группа ресурсов|Расположение|**Заблокировано**. Используется параметр схемы.|
|Шаблон Среды службы приложений|Шаблон Resource Manager|Доменное имя|Имя каталога Active Directory, созданного с помощью этого примера. Значение по умолчанию — _contoso.com_.|
|Шаблон Среды службы приложений|Шаблон Resource Manager|Расположение ASE|Расположение Среды службы приложений. Значение по умолчанию — _Западная часть США 2_.|
|Шаблон Среды службы приложений|Шаблон Resource Manager|Хранение журналов Шлюза приложений в днях|Хранение данных в днях. Значение по умолчанию — _365_.|

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы ознакомились с процедурой развертывания примера схемы "ISO 27001: рабочая нагрузка Среды службы приложений или Базы данных SQL", узнайте об архитектуре и сопоставлении элементов управления:

> [!div class="nextstepaction"]
> [Схема рабочей нагрузки Среды службы приложений или Базы данных SQL на основе ISO 27001 — обзор](./index.md)
> [Схема рабочей нагрузки Среды службы приложений или Базы данных SQL на основе ISO 27001 — сопоставление элементов управления](./control-mapping.md)

Дополнительные статьи о схемах и способах их использования:

- Ознакомьтесь со сведениями о [жизненном цикле схем](../../concepts/lifecycle.md).
- Узнайте, как использовать [статические и динамические параметры](../../concepts/parameters.md).
- Научитесь настраивать [последовательность схемы](../../concepts/sequencing-order.md).
- Узнайте, как применять [блокировку ресурсов схемы](../../concepts/resource-locking.md).
- Узнайте, как [обновлять существующие назначения](../../how-to/update-existing-assignments.md).
