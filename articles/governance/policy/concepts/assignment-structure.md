---
title: Сведения о структуре назначения политики
description: Описывает определение назначения политики, используемое политикой Azure, для связывания определений политик и параметров с ресурсами для оценки.
ms.date: 01/29/2021
ms.topic: conceptual
ms.openlocfilehash: 625314a8b83a4d0cc76eae51eae8d357e39d2a6a
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100581959"
---
# <a name="azure-policy-assignment-structure"></a>Структура назначения в службе "Политика Azure"

Назначения политики используются политикой Azure для определения ресурсов, которым назначаются политики или инициативы. Назначение политики может определять значения параметров для этой группы ресурсов во время назначения, что позволяет повторно использовать определения политик, в которых используются те же свойства ресурсов, с разными требованиями к соответствию.

Для создания назначения политики используется JSON. Назначение политики содержит элементы для:

- display name
- description
- метаданные
- режим принудительного применения
- исключенные области
- определение политики
- сообщения о несоответствии
- parameters

Например, в следующем JSON показано назначение политики в режиме _донотенфорце_ с динамическими параметрами:

```json
{
    "properties": {
        "displayName": "Enforce resource naming rules",
        "description": "Force resource names to begin with DeptA and end with -LC",
        "metadata": {
            "assignedBy": "Cloud Center of Excellence"
        },
        "enforcementMode": "DoNotEnforce",
        "notScopes": [],
        "policyDefinitionId": "/subscriptions/{mySubscriptionID}/providers/Microsoft.Authorization/policyDefinitions/ResourceNaming",
        "nonComplianceMessages": [
            {
                "message": "Resource names must start with 'DeptA' and end with '-LC'."
            }
        ],
        "parameters": {
            "prefix": {
                "value": "DeptA"
            },
            "suffix": {
                "value": "-LC"
            }
        }
    }
}
```

Все примеры политик Azure см. в [примерах для Политики Azure](../samples/index.md).

## <a name="display-name-and-description"></a>Отображаемое имя и описание

Используйте **DisplayName** и **Description** , чтобы определить назначение политики и предоставить контекст для его использования с определенным набором ресурсов. Максимальная длина **displayName** составляет _128_ символов, а **description** — _512_ символов.

## <a name="enforcement-mode"></a>Режим принудительного применения

Свойство **енфорцементмоде** предоставляет клиентам возможность проверить результат политики в существующих ресурсах без инициации воздействия политики или запуска записей в [журнале действий Azure](../../../azure-monitor/essentials/platform-logs-overview.md). Этот сценарий обычно называется "What If" и соответствует практическим рекомендациям по развертыванию. **енфорцементмоде** отличается от [отключенного](./effects.md#disabled) действия, так как это предотвращает оценку ресурсов.

Это свойство имеет следующие значения:

|Режим |Значение JSON |Type |Исправить вручную |Запись журнала действий |Описание |
|-|-|-|-|-|-|
|Активировано |Значение по умолчанию |строка |Да |Да |Этот результат политики применяется во время создания или обновления ресурса. |
|Выключено |донотенфорце |строка |Да |Нет | Этот результат политики не применяется во время создания или обновления ресурса. |

Если **енфорцементмоде** не указан в политике или в определении инициативы, используется значение _по умолчанию_ . [Задачи исправления](../how-to/remediate-resources.md) можно запустить для политик [deployIfNotExists](./effects.md#deployifnotexists) , даже если для **енфорцементмоде** задано значение _донотенфорце_.

## <a name="excluded-scopes"></a>Исключенные области

**Область** назначения включает все дочерние контейнеры ресурсов и дочерние ресурсы. Если к контейнеру дочернего ресурса или дочернему ресурсу не должно применяться определение, каждое из них можно _исключить_ из оценки, задав **нотскопес**. Это свойство является массивом, который включает исключение одного или нескольких контейнеров ресурсов или ресурсов из оценки. **нотскопес** можно добавить или обновить после создания начального назначения.

> [!NOTE]
> _Исключенный_ ресурс отличается _от исключаемого ресурса._ Дополнительные сведения см. [в разделе сведения о области в политике Azure](./scope.md).

## <a name="policy-definition-id"></a>Идентификатор определения политики

Это поле должно быть полным путем к имени политики или определению инициативы.
`policyDefinitionId` является строкой, а не массивом. Если несколько политик часто назначаются вместе, рекомендуется использовать [инициативу](./initiative-definition-structure.md) .

## <a name="non-compliance-messages"></a>Сообщения о несоответствии

Чтобы задать пользовательское сообщение, описывающее, почему ресурс не соответствует политике или определению инициативы, задайте `nonComplianceMessages` в определении назначения. Этот узел представляет собой массив `message` записей. Это пользовательское сообщение добавляется в дополнение к сообщению об ошибке по умолчанию для несоответствия и является необязательным.

```json
"nonComplianceMessages": [
    {
        "message": "Default message"
    }
]
```

Если назначение предназначено для инициативы, для каждого определения политики в инициативе можно настроить различные сообщения. В сообщениях используется `policyDefinitionReferenceId` значение, настроенное в определении инициативы. Дополнительные сведения см. в разделе [свойства определений политик](./initiative-definition-structure.md#policy-definition-properties).

```json
"nonComplianceMessages": [
    {
        "message": "Default message"
    },
    {
        "message": "Message for just this policy definition by reference ID",
        "policyDefinitionReferenceId": "10420126870854049575"
    }
]
```

## <a name="parameters"></a>Параметры

Этот сегмент назначения политики предоставляет значения для параметров, определенных в [определении политики или в определении инициативы](./definition-structure.md#parameters). Такая схема позволяет повторно использовать определение политики или инициативы с различными ресурсами, но проверять разные бизнес-значения или результаты.

```json
"parameters": {
    "prefix": {
        "value": "DeptA"
    },
    "suffix": {
        "value": "-LC"
    }
}
```

В этом примере параметры, ранее определенные в определении политики, имеют значение `prefix` и `suffix` . Это конкретное назначение политики задает `prefix` для **отделов** и `suffix` для **LC**. Одно и то же определение политики можно многократно использовать с другим набором параметров для другого отдела, уменьшая дублирование и сложность определений политик, обеспечивая гибкость.

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте больше о [структуре определения политик](./definition-structure.md).
- Узнайте о [программном создании политик](../how-to/programmatically-create.md).
- Узнайте, как [получать сведения о соответствии](../how-to/get-compliance-data.md).
- Узнайте, как [исправлять несоответствующие ресурсы](../how-to/remediate-resources.md).
- Дополнительные сведения о группе управления см. в статье [Упорядочивание ресурсов с помощью групп управления Azure](../../management-groups/overview.md).
