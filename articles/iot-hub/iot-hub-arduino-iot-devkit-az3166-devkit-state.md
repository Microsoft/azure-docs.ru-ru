---
title: Использование двойников устройств Azure для управления состоянием пользовательского светодиодного индикатора платы MXChip IoT DevKit | Документация Майкрософт
description: Данное руководство описывает процесс управления пользовательским светодиодным индикатором и мониторинга состояния DevKit с помощью двойников устройств Центра Интернета вещей Azure.
author: liydu
manager: jeffya
ms.service: iot-hub
services: iot-hub
ms.topic: conceptual
ms.tgt_pltfrm: arduino
ms.date: 04/04/2018
ms.author: liydu
ms.openlocfilehash: 8c43c8a0b9fdf30b5ce5ae6ecbf123b563099ff6
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "92148778"
---
# <a name="mxchip-iot-devkit"></a>MXChip IoT DevKit

С помощью этого примера можно отслеживать состояние датчиков и сведения о Wi-Fi MXChip IoT DevKit, а также управлять цветом пользовательского светодиодного индикатора с помощью двойников устройств Центра Интернета вещей Azure.

## <a name="what-you-learn"></a>Что вы узнаете

- Как выполнять мониторинг состояния датчиков MXChip IoT DevKit.

- Как управлять цветом светодиодного индикатора RGB DevKit.

## <a name="what-you-need"></a>Что нужно

- Настройте среду разработки согласно инструкциям в статье [Подключение платы IoT DevKit AZ3166 к Центру Интернета вещей Azure в облаке](./iot-hub-arduino-iot-devkit-az3166-get-started.md).

- В окне терминала GitBash (или в другом интерфейсе командной строки Git) выполните следующие команды.

   ```bash
   git clone https://github.com/DevKitExamples/DevKitState.git
   cd DevKitState
   code .
   ```

## <a name="provision-azure-services"></a>Подготовка служб Azure

1. Щелкните раскрывающееся меню **Задачи** в Visual Studio Code и выберите **Запустить задачу...** - , **cloud-provision**.

2. Ход выполнения воспроизводится на вкладке **Терминал** панели **Приветствие**.

3. При появлении запроса с сообщением *What subscription would you like to choose* (Какую подписку вы хотели бы выбрать) сделайте свой выбор.

4. Выберите группу ресурсов. 
 
   > [!NOTE]
   > При наличии свободного Центра Интернета вещей этот шаг можно пропустить.

5. При появлении запроса с сообщением *What IoT hub would you like to choose* (Какой Центр Интернета вещей вы хотели бы выбрать) выберите или создайте Центр Интернета вещей.

6. На экране появится нечто похожее на *Приложение-функция. Название приложения-функции — xxx*. Запишите название приложения-функции, используемое далее.

7. Дождитесь окончания развертывания шаблона Azure Resource Manager, о чем свидетельствует появившееся сообщение *Resource Manager template deployment: Done* (Развертывание шаблона диспетчера ресурсов: выполнено).

## <a name="deploy-function-app"></a>Развертывание приложения-функции

1. Щелкните раскрывающееся меню **Задачи** в Visual Studio Code и выберите **Запустить задачу...** - **cloud-deploy**.

2. Дождитесь, пока завершится передача кода приложения-функции (появится сообщение *function app deploys: Done* (Развертывание приложения-функции: выполнено)).

## <a name="configure-iot-hub-device-connection-string-in-devkit"></a>Настройка строки подключения к устройству Центра Интернета вещей в DevKit

1. Подключите MXChip IoT DevKit к компьютеру.

2. Щелкните раскрывающееся меню **Задачи** в Visual Studio Code и выберите **Запустить задачу...** - , **config-device-connection**.

3. На MXChip IoT DevKit нажмите и удерживайте кнопку **A**, дополнительно нажмите кнопку **Сброс**, а затем отпустите кнопку **A**, чтобы DevKit вошел в режим настройки.

4. Дождитесь окончания процесса настройки строки подключения.

## <a name="upload-arduino-code-to-devkit"></a>Передача кода Arduino в DevKit

После подключения MXChip IoT DevKit к компьютеру сделайте следующее:

1. Щелкните раскрывающееся меню **задачи** в Visual Studio Code и выберите **выполнить задачу сборки...** Эскиз Arduino компилируется и отправляется в DevKit.

2. Если эскиз успешно передан, на экран выводится сообщение *Build & Upload Sketch: success* (Сборка и передача эскиза: успешно).

## <a name="monitor-devkit-state-in-browser"></a>Мониторинг состояния DevKit в браузере

1. Откройте в веб-браузере файл `DevKitState\web\index.html`, созданный на шаге требуемых элементов.

2. Откроется соответствующая веб-страница.![Укажите название приложения-функции.](media/iot-hub-arduino-iot-devkit-az3166-devkit-state/devkit-state-function-app-name.png)

3. Введите название приложения-функции, записанное ранее.

4. Нажмите кнопку **подключить** .

5. Через несколько секунд страница обновится и на ней отобразится состояние подключения DevKit по Wi-Fi, а также состояние каждого из встроенных датчиков.

## <a name="control-the-devkits-user-led"></a>Управление пользовательским светодиодным индикатором DevKit

1. Выберите вариант графического изображения светодиодного пользовательского индикатора на рисунке веб-страницы.

2. Через несколько секунд экран обновится и на нем будет показано текущее состояние пользовательского индикатора, обозначаемое соответствующим цветом.

3. Попробуйте изменить значение цвета светодиодного индикатора RGB, перемещая ползунки элементов управления цветом палитры RGB.

## <a name="example-operation"></a>Пример действий

![Пример процедуры тестирования](media/iot-hub-arduino-iot-devkit-az3166-devkit-state/devkit-state.gif)

> [!NOTE]
> Необработанные данные двойникаов устройств можно просмотреть в портал Azure: центр Интернета вещей — \> устройства IOT — \> *\<your device\>*  - \> устройства двойника.

## <a name="next-steps"></a>Дальнейшие действия

Вы узнали, как выполнять такие задачи:
- Подключение устройства MXChip IoT DevKit к акселератору решения Azure IoT для удаленного мониторинга.
- Определение состояния системы и управление цветом светодиодного индикатора RGB DevKit с помощью функции двойников устройств Интернета вещей Azure.

Ниже приведен предлагаемый следующий шаг: [Обзор акселератора решений для удаленного мониторинга Интернета вещей Azure](/azure/iot-suite/)