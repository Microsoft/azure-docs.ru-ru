---
title: Отключить проверку электронной почты во время регистрации клиента
titleSuffix: Azure AD B2C
description: Узнайте, как отключить проверку электронной почты во время регистрации клиента в Azure Active Directory B2C.
services: active-directory-b2c
author: msmimart
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: how-to
ms.date: 12/10/2020
ms.custom: project-no-code
ms.author: mimart
ms.subservice: B2C
zone_pivot_groups: b2c-policy-type
ms.openlocfilehash: 0f70c8d501a7d56f4bc29e0f2b065760cad625e5
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "97585026"
---
# <a name="disable-email-verification-during-customer-sign-up-in-azure-active-directory-b2c"></a>Отключить проверку электронной почты во время регистрации клиента в Azure Active Directory B2C

[!INCLUDE [active-directory-b2c-choose-user-flow-or-custom-policy](../../includes/active-directory-b2c-choose-user-flow-or-custom-policy.md)]

По умолчанию Azure Active Directory B2C (Azure AD B2C) проверяет адрес электронной почты клиента для локальных учетных записей (учетные записи для пользователей, которые подписываются с помощью адреса электронной почты или имени пользователя). Azure AD B2C гарантирует наличие допустимых адресов электронной почты, чтобы клиенты могли проверить их во время процесса регистрации. Кроме того, злоумышленники не могут использовать автоматизированные процессы для создания мошеннических учетных записей в приложениях.

Некоторые разработчики приложений предпочитают пропускать проверку по электронной почте в процессе регистрации, а клиенты должны проверить свой адрес электронной почты позже. Для этого в Azure AD B2C можно отключить проверку адреса электронной почты. Это создает более гладкий процесс регистрации и предоставляет разработчикам гибкие возможности для различения клиентов, которые проверили свой адрес электронной почты у клиентов, не имеющих.

> [!WARNING]
> Отключение проверки адреса электронной почты в процессе регистрации может привести к получению спама. При отключении проверки электронной почты по умолчанию, предоставляемой Azure AD B2C, рекомендуется реализовать систему проверки замены.

## <a name="prerequisites"></a>Предварительные условия

[!INCLUDE [active-directory-b2c-customization-prerequisites](../../includes/active-directory-b2c-customization-prerequisites.md)]
## <a name="disable-email-verification"></a>Отключение проверки по электронной почте

::: zone pivot="b2c-user-flow"

Чтобы отключить проверку по электронной почте, выполните следующие действия.

1. Войдите на [портал Azure](https://portal.azure.com)
1. Используйте фильтр **каталог и подписка** в верхнем меню, чтобы выбрать каталог, содержащий клиент Azure AD B2C.
1. В меню слева выберите **Azure AD B2C**. Либо щелкните **Все службы**, а затем найдите и выберите **Azure AD B2C**
1. Выберите **Потоки пользователей**.
1. Выберите поток пользователя, для которого требуется отключить проверку по электронной почте. Например, *B2C_1_signinsignup*.
1. Выберите **макеты страниц**.
1. Выберите **страницу регистрации локальной учетной записи**.
1. В разделе **атрибуты пользователя** выберите **адрес электронной почты**.
1. В раскрывающемся списке **требуется подтверждение** выберите **нет**.
1. Щелкните **Сохранить**. Проверка электронной почты теперь отключена для этого потока пользователя.

::: zone-end

::: zone pivot="b2c-custom-policy"
Технический профиль **локалаккаунтсигнупвислогонемаил** — это [самоподтвержденный](self-asserted-technical-profile.md), который вызывается во время процесса регистрации. Чтобы отключить проверку по электронной почте, установите `EnforceEmailVerification` для метаданных значение false. Переопределите технические профили Локалаккаунтсигнупвислогонемаил в файле расширения. 

1. Откройте файл расширения для политики, например <em>`SocialAndLocalAccounts/`**`TrustFrameworkExtensions.xml`**</em>.
1. Найдите элемент `ClaimsProviders` . Если такой элемент не существует, добавьте его.
1. Добавьте в элемент следующий поставщик утверждений `ClaimsProviders` :

```xml
<ClaimsProvider>
  <DisplayName>Local Account</DisplayName>
  <TechnicalProfiles>
    <TechnicalProfile Id="LocalAccountSignUpWithLogonEmail">
      <Metadata>
        <Item Key="EnforceEmailVerification">false</Item>
      </Metadata>
    </TechnicalProfile>
  </TechnicalProfiles>
</ClaimsProvider>
```
::: zone-end

::: zone pivot="b2c-user-flow"

## <a name="test-your-policy"></a>Тестирование политики 

1. Войдите на [портал Azure](https://portal.azure.com)
1. Используйте фильтр **каталог и подписка** в верхнем меню, чтобы выбрать каталог, содержащий клиент Azure AD B2C.
1. В меню слева выберите **Azure AD B2C**. Либо щелкните **Все службы**, а затем найдите и выберите **Azure AD B2C**
1. Выберите **Потоки пользователей**.
1. Выберите поток пользователя, для которого требуется отключить проверку по электронной почте. Например, *B2C_1_signinsignup*.
1. Чтобы проверить политику, выберите пункт **выполнить пользовательскую последовательность**.
1. Для **приложения** выберите веб-приложение с именем *testapp1* , которое вы зарегистрировали ранее. В поле **URL-адрес ответа** должно содержаться значение `https://jwt.ms`.
1. Щелкните **выполнить поток пользователя**
1. Вы можете зарегистрироваться, используя адрес электронной почты без проверки.

::: zone-end

::: zone pivot="b2c-custom-policy"

## <a name="update-and-test-the-relying-party-file"></a>Обновление и тестирование файла проверяющей стороны

1. Войдите на [портал Azure](https://portal.azure.com).
1. Убедитесь, что вы используете каталог с клиентом Azure AD, выбрав фильтр **Каталог и подписка** в меню вверху и каталог с вашим клиентом Azure AD.
1. Выберите **Все службы** в левом верхнем углу окна портала Azure, а затем найдите и выберите **Регистрация приложений**.
1. Выберите **Инфраструктура процедур идентификации**.
1. Выберите **Отправка пользовательской политики** и отправьте два файла политики, которые вы изменили ранее.
1. Выберите отправленную вами политику регистрации или входа и нажмите кнопку **Выполнить**.
1. Вы можете зарегистрироваться, используя адрес электронной почты без проверки.

::: zone-end


## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как [настроить пользовательский интерфейс в Azure Active Directory B2C](customize-ui-with-html.md)

