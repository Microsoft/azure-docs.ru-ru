---
title: Краткое руководство. Настройка входа для классического приложения
titleSuffix: Azure AD B2C
description: В этом кратком руководстве рассматривается запуск примера классического приложения WPF, использующего Azure Active Directory B2C для предоставления возможности входа с учетной записью.
services: active-directory-b2c
author: msmimart
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: quickstart
ms.custom: mvc
ms.date: 09/12/2019
ms.author: mimart
ms.subservice: B2C
ms.openlocfilehash: ebed2f5e8664bd4336219f9387b8d27c8f3a1c59
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "78187341"
---
# <a name="quickstart-set-up-sign-in-for-a-desktop-app-using-azure-active-directory-b2c"></a>Краткое руководство. Настройка входа в классическое приложение с помощью Azure Active Directory B2C

Azure Active Directory (Azure AD) B2C обеспечивает управление идентификаторами облака для защиты приложения, бизнеса и клиентов. Azure AD B2C позволяет приложениям аутентифицироваться в учетных записях социальных сетей и корпоративных учетных записях с помощью протоколов на базе открытых стандартов. В этом кратком руководстве мы будем использовать классическое приложение Windows Presentation Foundation (WPF) для входа с помощью поставщика удостоверений в социальных сетях и вызова защищенного веб-API Azure AD B2C.

[!INCLUDE [quickstarts-free-trial-note](../../includes/quickstarts-free-trial-note.md)]

## <a name="prerequisites"></a>Предварительные требования

- [Visual Studio 2019](https://www.visualstudio.com/downloads/) с рабочей нагрузкой **ASP.NET и веб-разработка**.
- Учетная запись социальных сетей Facebook, Google или Майкрософт.
- [Скачайте ZIP-файл](https://github.com/Azure-Samples/active-directory-b2c-dotnet-desktop/archive/msalv3.zip) или клонируйте репозиторий [Azure-Samples/active-directory-b2c-dotnet-desktop](https://github.com/Azure-Samples/active-directory-b2c-dotnet-desktop) на сайте GitHub.

    ```
    git clone https://github.com/Azure-Samples/active-directory-b2c-dotnet-desktop.git
    ```

## <a name="run-the-application-in-visual-studio"></a>Запуск приложения в Visual Studio

1. В папке с проектом приложения откройте решение **active-directory-b2c-wpf.sln** в Visual Studio.
2. Нажмите клавишу **F5** для запуска отладки приложения.

## <a name="sign-in-using-your-account"></a>Вход с помощью учетной записи

1. Щелкните **Вход**, чтобы запустить рабочий процесс **регистрации или входа**.

    ![Снимок экрана: пример приложения WPF](./media/quickstart-native-app-desktop/wpf-sample-application.png)

    Пример поддерживает несколько вариантов регистрации, в том числе использование поставщика удостоверений социальных сетей или создание локальной учетной записи на основе адреса электронной почты. В рамках этого краткого руководства используется учетная запись поставщика удостоверений в социальных сетях (Facebook, Google или Майкрософт).


2. В Azure AD B2C в качестве примера веб-приложения предоставляется пользовательская страница входа для вымышленной компании Fabrikam. Чтобы зарегистрироваться с помощью поставщика удостоверений в социальных сетях, нажмите кнопку поставщика удостоверений, которого нужно использовать.

    ![Страница входа или регистрации с поставщиками удостоверений](./media/quickstart-native-app-desktop/sign-in-or-sign-up-wpf.png)

    Выполните проверку подлинности (вход) с помощью данных учетной записи социальных сетей и авторизацию приложения для чтения информации из учетной записи социальных сетей. Предоставляя доступ, приложение может получить сведения о профиле из учетной записи социальных сетей (например, имя и город).

2. Завершите процесс входа для поставщика удостоверений.

    Сведения о профиле новой учетной записи будут заполнены информацией из учетной записи социальных сетей.

## <a name="edit-your-profile"></a>Изменение профиля

Azure AD B2C позволяет пользователям изменять их профили. Образец веб-приложения использует для рабочего процесса поток пользователя по изменению профиля Azure AD B2C.

1. В приложении в строке меню выберите **Edit profile** (Изменить профиль), чтобы изменить созданный профиль.

    ![Кнопка изменения профиля, выделенная в примере приложения WPF](./media/quickstart-native-app-desktop/edit-profile-wpf.png)

2. Выберите поставщик удостоверений, связанный с созданной учетной записью. Например, если при создании учетной записи в качестве поставщика удостоверений использовался Facebook, выберите Facebook, чтобы изменить сведения связанного профиля.

3. Измените значение **Display name** (Отображаемое имя) или **City** (Город) и щелкните **Continue** (Продолжить).

    Новый маркер доступа появится в текстовом поле *Token info* (Сведения о маркере). Если вы хотите проверить изменения для профиля, скопируйте и вставьте маркер доступа в декодер маркеров https://jwt.ms.

## <a name="access-a-protected-api-resource"></a>Получение доступа к защищенному ресурсу API

Щелкните **Call API** (Вызвать API), чтобы отправить запрос к защищенному ресурсу.

![Вызов API](./media/quickstart-native-app-desktop/call-api-wpf.png)

Приложение включает маркер доступа Azure AD в запрос к защищенному ресурсу веб-API. Веб-API отправляет отображаемое имя, содержащееся в маркере доступа.

Вы успешно применили свою учетную запись пользователя Azure AD B2C, чтобы выполнить авторизованный вызов защищенного веб-API Azure AD B2C.

## <a name="clean-up-resources"></a>Очистка ресурсов

Вы можете использовать свой клиент Azure AD B2C при работе с другими руководствами или краткими пособиями по Azure AD B2C. [Удалите клиент Azure AD B2C](faq.md#how-do-i-delete-my-azure-ad-b2c-tenant), если он больше не нужен.

## <a name="next-steps"></a>Дальнейшие действия

В этом кратком руководстве используется пример классического приложения для выполнения следующих задач:

* вход в систему с пользовательской страницы входа;
* вход с помощью поставщика удостоверений социальных сетей;
* создание учетной записи Azure AD B2C;
* вызов веб-API, защищенного Azure AD B2C.

Попробуйте создать собственный клиент Azure AD B2C.

> [!div class="nextstepaction"]
> [Создание клиента Azure Active Directory B2C на портале Azure](tutorial-create-tenant.md)
