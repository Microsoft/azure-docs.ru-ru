---
title: Управление данными пользователей в Azure Active Directory B2C | Документация Майкрософт
description: Сведения о том, как удалить или экспортировать пользовательские данные в Azure AD B2C.
services: active-directory-b2c
author: msmimart
manager: celestedg
ms.service: active-directory
ms.workload: identity
ms.topic: how-to
ms.date: 05/06/2018
ms.author: mimart
ms.subservice: B2C
ms.custom: fasttrack-edit
ms.openlocfilehash: d9bdf7258296b82e65e03f6b8af8021b9a7be0f0
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "94952477"
---
# <a name="manage-user-data-in-azure-active-directory-b2c"></a>Управление пользовательскими данными в Azure Active Directory B2C

 В этой статье описывается, как можно управлять данными пользователей в Azure Active Directory B2C (Azure AD B2C) с помощью операций, предоставляемых [API-интерфейсом Microsoft Graph](/graph/use-the-api). Управление пользовательскими данными позволяет удалять данные или экспортировать их из журналов аудита.

[!INCLUDE [gdpr-intro-sentence.md](../../includes/gdpr-intro-sentence.md)]

## <a name="delete-user-data"></a>Удаление пользовательских данных

Пользовательские данные хранятся в каталоге Azure AD B2C и журналах аудита. В Azure AD B2C все данные аудита пользователя сохранены в течение 7 дней. Если вы хотите удалить данные пользователя в течение этого 7-дневного периода, можно использовать операцию [удалить пользователя](/graph/api/user-delete) . Операция удаления требуется для каждого из клиентов Azure AD B2C, где могут храниться данные.

Каждому пользователю в Azure AD B2C назначается идентификатор объекта. Это однозначный идентификатор, позволяющий удалить пользовательские данные в Azure AD B2C. В зависимости от архитектуры идентификатор объекта может использоваться как полезный идентификатор корреляции в других службах, например базах данных для финансовых и маркетинговых сведений, а также для управления отношениями с клиентами.

Наиболее точным является получение идентификатора объекта для пользователя в рамках проверки подлинности в Azure AD B2C. Если от пользователя получен допустимый запрос к данным с помощью других методов, для поиска этого пользователя и уточнения идентификатора объекта может потребоваться автономная процедура, например поиск агентом поддержки из центра обслуживания клиентов.

Следующий пример показывает возможный поток удаления данных:

1. Пользователь выполняет вход и выбирает **Delete my data** (Удалить мои данные).
2. Приложение предлагает возможность удаления данных в разделе администрирования приложения.
3. Приложение принудительно выполняет проверку подлинности в Azure AD B2C. Azure AD B2C возвращает в приложение токен с идентификатором объекта этого пользователя.
4. Маркер получается приложением, а идентификатор объекта используется для удаления данных пользователя путем вызова API Microsoft Graph. Microsoft Graph API удаляет данные пользователя и возвращает код состояния 200 ОК.
5. При необходимости приложение управляет удалением пользовательских данных в других системах организации, используя идентификатор объекта или другие идентификаторы.
6. Приложение подтверждает удаление данных и сообщает пользователю о следующих шагах.

## <a name="export-customer-data"></a>Экспорт данных клиента

Процесс экспорта пользовательских данных из Azure AD B2C похож на процедуру удаления.

Пользовательские данные Azure AD B2C ограничены следующим:

- **Данные, хранящиеся в Azure Active Directory** — данные можно извлечь при аутентификации пользователя в Azure AD B2C, используя идентификатор объекта или любое учетное имя, например адрес электронной почты или имя пользователя.
- **Отчет о событиях аудита для конкретного пользователя** — данные индексируются с использованием идентификатора объекта.

В следующем примере операции экспорта данных действия, выполняемые приложением, могут также выполняться серверным процессом или пользователем с ролью администратора в каталоге:

1. Пользователь входит в приложение. При необходимости Azure AD B2C обеспечивает проверку подлинности при использовании многофакторной идентификации Azure AD.
2. Приложение использует учетные данные пользователя для вызова операции Microsoft Graph API для получения атрибутов пользователя. Microsoft Graph API предоставляет данные атрибутов в формате JSON. В зависимости от схемы содержимое токена идентификатора может включать все персональные данные пользователя.
3. Приложение извлекает действия аудита для пользователя. Microsoft Graph API предоставляет приложению данные о событиях.
4. Приложение объединяет данные и предоставляет их пользователю.

## <a name="next-steps"></a>Дальнейшие действия

См. дополнительные сведения об [управлении доступом пользователей к приложению](manage-user-access.md).