---
title: Вопросы и ответы по настройке приложений Azure
description: Ознакомьтесь с ответами на часто задаваемые вопросы о конфигурации приложений Azure, например о том, как она отличается от Azure Key Vault.
services: azure-app-configuration
author: AlexandraKemperMS
ms.service: azure-app-configuration
ms.topic: conceptual
ms.date: 02/19/2020
ms.author: alkemper
ms.openlocfilehash: 39ad20bd57e3da6345c63d4601f34b19e640c1d6
ms.sourcegitcommit: d49bd223e44ade094264b4c58f7192a57729bada
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/02/2021
ms.locfileid: "99256481"
---
# <a name="azure-app-configuration-faq"></a>Вопросы и ответы по настройке приложений Azure

В этой статье содержатся ответы на часто задаваемые вопросы о конфигурации приложений Azure.

## <a name="how-is-app-configuration-different-from-azure-key-vault"></a>Чем отличается Конфигурация приложения от Azure Key Vault?

Конфигурация приложений помогает разработчикам управлять параметрами приложений и доступом к функциям управления. Она нацелена на упрощение многих задач работы со сложными данными конфигурации.

Конфигурация приложения поддерживает:

- Иерархические пространства имен
- Добавление меток
- Обширные запросы
- Пакетное извлечение
- Специализированные операции управления
- Пользовательский интерфейс управления функциями

Конфигурация приложения дополняет Key Vault, и два должны использоваться параллельно в большинстве развертываний приложений.

## <a name="should-i-store-secrets-in-app-configuration"></a>Следует ли хранить секреты в конфигурации приложения?

Хотя конфигурация приложений обеспечивает усиленную безопасность, Key Vault по-прежнему является лучшим местом для хранения секретов приложения. Key Vault обеспечивает шифрование на уровне оборудования, политики детализированного доступа и операции управления, такие как смена сертификатов.

Можно создать значения конфигурации приложения, которые ссылаются на секреты, хранящиеся в Key Vault. Дополнительные сведения см. [в статье использование Key Vault ссылок в приложении ASP.NET Core](./use-key-vault-references-dotnet-core.md).

## <a name="does-app-configuration-encrypt-my-data"></a>Шифрует ли данные в конфигурации приложения?

Да. Служба "Конфигурация приложений" шифрует все хранимые значения ключей и данные сетевого взаимодействия. Имена и метки ключей используются в качестве индексов для получения данных конфигурации и не шифруются.

## <a name="where-does-data-stored-in-app-configuration-reside"></a>Где находятся данные, хранящиеся в конфигурации приложения? 

Данные клиента, хранящиеся в конфигурации приложения, находятся в регионе, в котором было создано хранилище конфигураций приложений клиента. Конфигурация приложения может реплицировать данные в [парные регионы](../best-practices-availability-paired-regions.md) для обеспечения устойчивости данных, но не реплицирует или не перемещает данные клиентов за пределами географической информации, как определено [местонахождение данных в Azure](https://azure.microsoft.com/global-infrastructure/data-residency/). Клиенты и конечные пользователи могут по всему миру перемещать, копировать или получать доступ к своим пользовательским данным из любого расположения.

## <a name="how-is-app-configuration-different-from-azure-app-service-settings"></a>Чем отличается Конфигурация приложения от параметров службы приложений Azure?

Служба приложений Azure позволяет определять параметры приложения для каждого экземпляра службы приложений. Эти параметры передаются в код приложения в виде переменных среды. При необходимости можно связать параметр с конкретным слотом развертывания. Дополнительные сведения см. в разделе [Configure app settings](../app-service/configure-common.md#configure-app-settings).

В отличие от этого, конфигурация приложений Azure позволяет определять параметры, которые могут совместно использоваться несколькими приложениями. Сюда входят приложения, работающие в службе приложений, а также другие платформы. Код вашего приложения обращается к этим параметрам через поставщиков конфигураций для .NET и Java, через пакет SDK для Azure или напрямую через интерфейсы API-интерфейсов RESTFUL.

Кроме того, можно импортировать и экспортировать параметры между службой приложений и конфигурацией приложения. Эта возможность позволяет быстро настроить новое хранилище конфигураций приложений на основе существующих параметров службы приложений. Вы также можете использовать конфигурацию совместно с существующим приложением, которое зависит от параметров службы приложений.

## <a name="are-there-any-size-limitations-on-keys-and-values-stored-in-app-configuration"></a>Существуют ли ограничения на размер ключей и значений, хранящихся в конфигурации приложения?

Для одного элемента "ключ-значение" существует ограничение в 10 КБ.

## <a name="how-should-i-store-configurations-for-multiple-environments-test-staging-production-and-so-on"></a>Как хранить конфигурации для нескольких сред (тестирования, промежуточного хранения, рабочей среды и т. д.)?

Вы можете управлять доступом к конфигурации приложений на уровне магазина. Используйте отдельное хранилище для каждой среды, для которой требуются другие разрешения. Такой подход обеспечивает лучшую изоляцию безопасности.

Если изоляция безопасности между средами не требуется, можно использовать метки для различения значений конфигурации. [Используйте метки, чтобы включить различные конфигурации для разных сред](./howto-labels-aspnet-core.md) . полный пример.

## <a name="what-are-the-recommended-ways-to-use-app-configuration"></a>Каковы рекомендуемые способы использования конфигурации приложения?

См. рекомендации по [использованию](./howto-best-practices.md).

## <a name="how-much-does-app-configuration-cost"></a>Сколько стоит Конфигурация приложения?

Существует две ценовые категории:

- Уровень служб "Бесплатный"
- Уровень Standard.

Если вы создали магазин до введения уровня "Стандартный", он автоматически перемещается на уровень "бесплатный" после выхода общедоступной версии. Можно выбрать обновление до уровня "Стандартный" или оставить его на уровне "бесплатный".

Нельзя понизить уровень хранилища "Стандартный" до уровня "бесплатный". Вы можете создать новое хранилище на уровне Free, а затем импортировать данные конфигурации в это хранилище.

## <a name="which-app-configuration-tier-should-i-use"></a>Какой уровень конфигурации приложений следует использовать?

Оба уровня конфигурации приложений предлагают основные функции, включая параметры конфигурации, флаги компонентов, Key Vault ссылки, базовые операции управления, метрики и журналы.

Ниже приведены рекомендации по выбору уровня.

- **Ресурсов на подписку**: ресурс состоит из одного хранилища конфигурации. Каждая подписка ограничена одним хранилищем конфигурации на уровне Free. Подписки могут иметь неограниченное количество хранилищ конфигураций на уровне "Стандартный".
- **Хранилище на ресурс**. в бесплатном уровне каждое хранилище конфигурации ограничено 10 МБ хранилища. На уровне "Стандартный" Каждое хранилище конфигураций может использовать до 1 ГБ хранилища.
- **Журнал редакций**. в конфигурации приложения хранится журнал всех изменений, внесенных в ключи. На уровне Free этот журнал хранится в течение семи дней. На уровне "Стандартный" Этот журнал хранится в течение 30 дней.
- **Квоты запросов**. хранилища уровня Free ограничены 1 000 запросами в день. Когда магазин достигает 1 000 запросов, он возвращает код состояния HTTP 429 для всех запросов до полуночи в формате UTC.

    Хранилища уровня "Стандартный" ограничены 20 000 запросами в час. При исчерпании квоты возвращается код состояния HTTP 429 для всех запросов до конца часа.

- **Соглашение об уровне обслуживания**. уровень "Стандартный" имеет соглашение о доступности уровня "99,9%". Уровень Free не имеет соглашения об уровне обслуживания.
- **Функции безопасности**. оба уровня включают основные функции безопасности, включая шифрование с помощью ключей, управляемых корпорацией Майкрософт, проверку подлинности с помощью HMAC или Azure Active Directory, поддержку Azure RBAC, управляемое удостоверение и теги служб. Уровень "Стандартный" предлагает более широкие возможности безопасности, включая поддержку закрытых ссылок и шифрование с помощью управляемых клиентом ключей.
- **Стоимость**: в магазинах уровня "Стандартный" взимается плата за ежедневное использование. Ежемесячная оплата включает первые 200 000 запросов ежедневно. Кроме того, за запросы за ежедневное выделение взимается плата. Использование хранилища Free уровня не имеет затрат.

## <a name="can-i-upgrade-a-store-from-the-free-tier-to-the-standard-tier-can-i-downgrade-a-store-from-the-standard-tier-to-the-free-tier"></a>Можно ли обновить магазин с уровня "бесплатный" до уровня "Стандартный"? Можно ли понизить уровень хранилища "Стандартный" до уровня "бесплатный"?

Вы можете обновить уровень "бесплатный" до уровня "Стандартный" в любое время.

Нельзя понизить уровень хранилища "Стандартный" до уровня "бесплатный". Вы можете создать новое хранилище на уровне Free, а затем [импортировать данные конфигурации в это хранилище](howto-import-export-data.md).

## <a name="are-there-any-limits-on-the-number-of-requests-made-to-app-configuration"></a>Существуют ли ограничения на количество запросов, выполняемых в конфигурации приложения?

При чтении значений ключа в конфигурации приложения данные будут разбиты на страницы, и каждый запрос может прочитать до 100 значений ключа. При записи значений ключа каждый запрос может создать или обновить одно значение ключа. Это поддерживается с помощью REST API, пакетов SDK конфигурации приложений и поставщиков конфигурации. Хранилища конфигурации на уровне Free ограничены 1 000 запросами в день. Если частота запросов превышает 20 000 запросов в час, в хранилищах конфигураций уровня "Стандартный" может возникать временное регулирование.

Когда магазин достигает своего предела, он возвращает код состояния HTTP 429 для всех запросов, сделанных до истечения периода времени. `retry-after-ms`Заголовок в ответе дает предполагаемое время ожидания (в миллисекундах) перед повторным выполнением запроса.

Если приложение регулярно поступают в ответах с кодом состояния HTTP 429, рассмотрите возможность его перепроектирования, чтобы уменьшить число выполненных запросов. Дополнительные сведения см. [в разделе сокращение количества запросов, выполненных в конфигурации приложения](./howto-best-practices.md#reduce-requests-made-to-app-configuration) .

## <a name="my-application-receives-http-status-code-429-responses-why"></a>Мое приложение получает ответы с кодом состояния HTTP 429. Почему?

В следующих обстоятельствах вы получите ответ с кодом состояния HTTP 429.

* Превышение лимита ежедневного запроса для магазина на уровне Free.
* Временное регулирование в связи с высокой частотой запросов для магазина на уровне Standard.
* Чрезмерное использование пропускной способности.
* Попытка создать или изменить ключ при превышении квоты хранилища.

Проверьте текст ответа 429 по конкретной причине, по которой произошел сбой запроса.

## <a name="how-can-i-receive-announcements-on-new-releases-and-other-information-related-to-app-configuration"></a>Как получить объявления о новых выпусках и о других сведениях, связанных с конфигурацией приложения?

Подпишитесь на наш [репозиторий GitHub](https://github.com/Azure/AppConfiguration-Announcements).

## <a name="how-can-i-report-an-issue-or-give-a-suggestion"></a>Как сообщить о вопросе или дать предложение?

Вы можете связаться с нами непосредственно на [GitHub](https://github.com/Azure/AppConfiguration/issues).

## <a name="next-steps"></a>Дальнейшие действия

* [Сведения о службе "Конфигурация приложений Azure"](./overview.md)
