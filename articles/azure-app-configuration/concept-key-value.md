---
title: Общие сведения о хранилище значений ключа конфигурации приложений Azure
description: Общие сведения о хранилище "ключ — значение" в конфигурации приложения Azure, в котором данные конфигурации хранятся в виде значений ключа. Значения ключа — это представление параметров приложения.
author: AlexandraKemperMS
ms.author: alkemper
ms.service: azure-app-configuration
ms.topic: conceptual
ms.date: 08/04/2020
ms.openlocfilehash: ad9e96433a7ee72476ae2251c684d17ec7a6d1ce
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96930251"
---
# <a name="keys-and-values"></a>Ключи и значения

В конфигурации приложений Azure данные конфигурации хранятся в виде значений ключа. Ключевые значения — это простое и гибкое представление параметров приложений, используемых разработчиками.

## <a name="keys"></a>Ключи

Ключи служат идентификаторами для значений ключа и используются для хранения и извлечения соответствующих значений. Традиционно ключи размещаются в иерархическом пространстве имен и разделяются определенным символом, например `/` или `:`. Используйте соглашение, которое лучше всего подходит для вашего приложения. Конфигурация приложений всегда обрабатывает ключи целиком. Она не выполняет синтаксический анализ ключей для изучения структуры имен или применения к ним любых правил.

Ниже приведен пример имен ключей, структурированных в иерархии на основе служб компонентов.

```aspx
    AppName:Service1:ApiEndpoint
    AppName:Service2:ApiEndpoint
```

Использование данных конфигурации в платформах приложений может диктовать определенные схемы именования для значений ключа. Например, пружинная облачная платформа Java определяет `Environment` ресурсы, которые предоставляют параметры для пружинного приложения.  Они параметризованы переменными, включающими *имя приложения* и *профиль*. Ключи для конфигураций, имеющих отношение к Spring Clould, обычно начинаются с этих двух элементов с разделителем.

Ключи хранятся в Конфигурации приложений в формате строк Юникода с учетом регистра. Например, *app1* и *App1* в хранилище Конфигурации приложений будут разными ключами. Учитывайте это при использовании параметров конфигурации в приложении, так как некоторые платформы не учитывают регистр для ключей конфигурации. Не рекомендуется использовать регистр для различения ключей.

В именах ключей можно использовать любой символ Юникода, кроме `%` . Имя ключа не может быть `.` или `..` ни одного. Существует общий предел размера в 10 КБ на значение ключа. Сюда входят все символы ключа, значения и связанные с ними необязательные атрибуты. В пределах этого ограничения можно создать многоуровневую иерархию ключей.

### <a name="design-key-namespaces"></a>Проектирование пространства имен ключей

Существует два принципиальных подхода к именованию ключей для данных конфигурации: плоская или иерархическая структура. С точки зрения использования в приложении эти методы похожи, но второй дает ряд дополнительных преимуществ:

* Более удобен для чтения. Разделители в функции имени иерархического ключа в виде пробелов в предложении. Слова в этих предложениях разделены пробелами.
* Более удобен для управления. Иерархия имен ключей объединяет данные конфигурации в логические группы.
* Более удобен для использования. Гораздо проще применить в запросе сопоставление иерархических имен ключей с шаблоном, чтобы извлечь только нужную часть данных конфигурации. Кроме того, многие новые платформы программирования предоставляют встроенную поддержку для иерархической конфигурации данных, что позволяет приложениям использовать определенные наборы данных конфигурации.

Вы можете использовать много разных методов для организации иерархической конфигурации ключей. Такие ключи аналогичны структурам [URI](https://en.wikipedia.org/wiki/Uniform_Resource_Identifier). Каждый иерархический ключ представляет собой *путь* к ресурсу, состоящий из одного или нескольких компонентов с определенными разделителями. Выберите символ на роль разделителя с учетом потребностей приложения, языка программирования или платформы. В Конфигурации приложений используйте для разных ключей несколько разных разделителей.

### <a name="label-keys"></a>Пометка ключей

В Конфигурации приложений пары "ключ — значение" можно дополнять атрибутом label (метка). Метки позволяют различать пары "ключ — значение" в пределах одного ключа. Например, ключ *app1* с метками *A* и *B* создает в хранилище Конфигурации приложения два разных ключа. По умолчанию ключевое значение не имеет метки. Чтобы явно ссылаться на ключевое значение без метки, используйте `\0` (URL-адрес в кодировке AS `%00` ).

Метка обеспечивает удобное создание вариантов ключа. Метки обычно используется для указания нескольких сред для одного ключа.

```
    Key = AppName:DbEndpoint & Label = Test
    Key = AppName:DbEndpoint & Label = Staging
    Key = AppName:DbEndpoint & Label = Production
```

### <a name="version-key-values"></a>Ключ версии — значения

Используйте метки в качестве способа создания нескольких версий ключевого значения. Например, в метки можно заносить номера версий приложения или идентификаторы фиксации Git, чтобы отслеживать пары "ключ — значение" для определенной версии или сборки программного обеспечения.

> [!NOTE]
> Если вы ищете версии изменений, в конфигурации приложений все изменения значений ключа, произошедшие за определенный период времени, сохраняются автоматически. Дополнительные сведения см. [в разделе моментальный снимок на момент времени](./concept-point-time-snapshot.md) .

### <a name="query-key-values"></a>Значения ключа запроса

Каждая пара "ключ — значение" уникально идентифицируется по сочетанию ключа и метки (которая может принимать значение `\0`). Вы запрашиваете хранилище конфигурации приложений для значений ключа, указав шаблон. Хранилище конфигураций приложений возвращает все значения ключа, соответствующие шаблону, включая соответствующие значения и атрибуты. Используйте следующие шаблоны ключей в вызовах к REST API Конфигурации приложений:

| Ключ | Описание |
|---|---|
| `key` не указан или имеет значение `key=*` | Совпадает с любым ключом. |
| `key=abc` | Совпадает с ключом, который имеет точное имя **abc**. |
| `key=abc*` | Совпадает с ключом, имя которого начинается с **abc**. |
| `key=abc,xyz` | Соответствует именам ключей **ABC** или **XYZ**. Ограничено пятью CSV |

Кроме того, вы можете добавить следующие шаблоны меток:

| Метка | Описание |
|---|---|
| `label` не указан или имеет значение `label=*` | Совпадает с любой меткой, включая `\0`. |
| `label=%00` | Совпадает с меткой `\0`. |
| `label=1.0.0` | Совпадает с меткой, имеющей точное значение **1.0.0**. |
| `label=1.0.*` | Совпадает с меткой, которая начинается с **1.0.** |
| `label=%00,1.0.0` | Совпадает с меткой, которая имеет значение `\0` или **1.0.0** и сохранена в одном из пяти CSV-файлов. |

> [!NOTE]
> `*`, `,` и `\` являются зарезервированными символами в запросах. Если в именах ключей или метках используется зарезервированный символ, его необходимо экранировать с помощью `\{Reserved Character}` в запросах.

## <a name="values"></a>Значения

Присваиваемые ключам значения также являются строками Юникода. Для значений можно использовать любые символы Юникода.

### <a name="use-content-type"></a>Использование Content-Type
Каждое значение ключа в конфигурации приложения имеет атрибут Content-Type. При необходимости этот атрибут можно использовать для хранения сведений о типе значения в ключевом значении, что позволяет приложению правильно обрабатывать его. Для типа Content-Type можно использовать любой формат. Конфигурация приложения использует [типы мультимедиа]( https://www.iana.org/assignments/media-types/media-types.xhtml) (также известные как типы MIME) для встроенных типов данных, таких как флаги компонентов, Key Vault ссылки и значения ключа JSON.

## <a name="next-steps"></a>Дальнейшие действия

* [Моментальный снимок на определенный момент времени](./concept-point-time-snapshot.md)
* [Управление функциями](./concept-feature-management.md)
* [Обработка событий](./concept-app-configuration-event.md)
