---
title: Отправка и получение данных для Базы данных SQL Azure и Azure Synapse Analytics
description: Сведения о совместном использовании и получении данных из базы данных SQL Azure и Azure синапсе Analytics
author: jifems
ms.author: jife
ms.service: data-share
ms.topic: how-to
ms.date: 11/12/2020
ms.openlocfilehash: bdbbf3e808e1dda0970aaf87d154ee79bea4dcb1
ms.sourcegitcommit: f6f928180504444470af713c32e7df667c17ac20
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/07/2021
ms.locfileid: "97964173"
---
# <a name="share-and-receive-data-from-azure-sql-database-and-azure-synapse-analytics"></a>Отправка и получение данных для Базы данных SQL Azure и Azure Synapse Analytics

[!INCLUDE[appliesto-sql](includes/appliesto-sql.md)]

Общий ресурс данных Azure поддерживает общий доступ к базе данных SQL Azure и Azure синапсе Analytics на основе моментального снимка. В этой статье объясняется, как совместно использовать и принимать данные из этих источников.

Общий ресурс данных Azure поддерживает общий доступ к таблицам и представлениям из базы данных SQL Azure и Azure синапсе Analytics (ранее — хранилище Azure SQL) и общий доступ к таблицам из выделенного пула SQL Azure синапсе Analytics (Рабочая область). Совместное использование несерверного пула SQL в Azure синапсе Analytics (Рабочая область) в настоящее время не поддерживается. Потребители данных могут принять данные в Azure Data Lake Storage 2-го поколения или хранилище BLOB-объектов Azure в виде CSV-или Parquet-файла, а также в базу данных SQL Azure и Azure синапсе Analytics в качестве таблиц.

При принятии данных в Azure Data Lake Store Gen2 или хранилище BLOB-объектов Azure полные моментальные снимки перезаписывают содержимое целевого файла, если он уже существует.
Если данные получены в таблицу SQL и Целевая таблица еще не существует, то общая папка данных Azure создает таблицу SQL с исходной схемой. Если целевая таблица с таким именем уже существует, она будет удалена и переписана с использованием последнего полного моментального снимка. Добавочные моментальные снимки в настоящее время не поддерживаются.

## <a name="share-data"></a>Совместное использование данных

### <a name="prerequisites-to-share-data"></a>Необходимые условия для совместного использования данных

* Подписка Azure. Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/), прежде чем начинать работу.
* Адрес электронной почты для входа получателей в Azure (псевдонимы электронной почты не поддерживаются).
* Если исходное хранилище данных Azure находится в подписке Azure, отличной от той, которая будет использоваться для создания ресурса Data Share, зарегистрируйте [поставщик ресурсов Microsoft.DataShare](concepts-roles-permissions.md#resource-provider-registration) в подписке, в которой находится хранилище данных Azure. 

### <a name="prerequisites-for-sql-source"></a>Необходимые условия для источника SQL
Ниже приведен список предварительных условий для предоставления общего доступа к данным из источника SQL. 

#### <a name="prerequisites-for-sharing-from-azure-sql-database-or-azure-synapse-analytics-formerly-azure-sql-dw"></a>Предварительные требования для предоставления общего доступа к данным Базы данных SQL Azure или Azure Synapse Analytics (ранее — хранилище данных SQL Azure)
Для настройки необходимых компонентов cм. [ролик с пошаговыми инструкциями](https://youtu.be/hIE-TjJD8Dc).

* База данных SQL Azure или Azure Synapse Analytics (ранее — хранилище данных SQL Azure) с таблицами и представлениями, к которым вы хотите предоставить общий доступ.
* Разрешение на запись в базы данных на сервере SQL, которое присутствует в *Microsoft.Sql/servers/databases/write*. Это разрешение назначено роли **участника**.
* Разрешение на доступ управляемого удостоверения Data Share к базе данных. Это можно обеспечить следующим образом. 
    1. На портале Azure перейдите к SQL Server и назначьте себе роль **администратора Azure Active Directory**.
    1. Подключитесь к Базе данных или Хранилищу данных SQL Azure с помощью [редактора запросов](../azure-sql/database/connect-query-portal.md#connect-using-azure-active-directory) или SQL Server Management Studio, выполнив проверку подлинности в Azure Active Directory. 
    1. Выполните указанный ниже сценарий, чтобы добавить управляемое удостоверение для ресурса Data Share в качестве db_datareader. Необходимо подключиться с помощью Active Directory, а не аутентификации SQL Server. 
    
        ```sql
        create user "<share_acct_name>" from external provider;     
        exec sp_addrolemember db_datareader, "<share_acct_name>"; 
        ```                   
       Обратите внимание на то, что *<share_acc_name>* — это имя вашего ресурса Data Share. Если вы еще не создали ресурс Data Share, вы можете вернуться к этому требованию позже.  

* Пользователь Базы данных SQL Azure с доступом **db_datareader** для навигации и выбора таблиц и/или представлений, к которым необходимо предоставить общий доступ. 

* Доступ к брандмауэру SQL Server. Это можно обеспечить следующим образом. 
    1. На портале Azure перейдите к SQL Server. Выберите *Брандмауэры и виртуальные сети* в левой области навигации.
    1. Выберите значение **Да** для параметра *Разрешить доступ к серверу службам и ресурсам Azure*.
    1. Щелкните **+Добавить IP-адрес клиента**. IP-адрес клиента можно изменить. При следующем совместном использовании данных SQL из портала Azure может потребоваться повторение этого процесса. Вы можете также добавить диапазон IP-адресов.
    1. Выберите команду **Сохранить**. 

#### <a name="prerequisites-for-sharing-from-azure-synapse-analytics-workspace-sql-pool"></a>Необходимые условия для предоставления общего доступа к данным из пула SQL Azure Synapse Analytics (рабочая область)

* Выделенный пул SQL Azure Synapse Analytics (рабочая область) с таблицами, к которым вы хотите предоставить общий доступ. Предоставление общего доступа к данным представления в настоящее время не поддерживается. Предоставление общего доступа к данным из бессерверного пула SQL в настоящее время не поддерживается.
* Разрешение на запись в пул SQL в рабочей области Synapse, которое предоставляется через *Microsoft.Synapse/workspaces/sqlPools/write*. Это разрешение назначено роли **участника**.
* Разрешение на доступ управляемого удостоверения Data Share к пулу SQL рабочей области Synapse. Это можно обеспечить следующим образом. 
    1. На портале Azure перейдите в рабочую область Synapse. Выберите на панели навигации слева "Администратор Active Directory для SQL" и назначьте себе роль **администратора Azure Active Directory**.
    1. Откройте Synapse Studio, затем выберите *Управление* в области навигации слева. Выберите *Управление доступом* в разделе "Безопасность". Назначьте себе роль **Администратор SQL** или **Администратор рабочей области**.
    1. В Synapse Studio в области навигации слева выберите *Разработка*. Выполните указанный ниже сценарий в пуле SQL, чтобы добавить управляемое удостоверение для ресурса Data Share в качестве db_datareader. 
    
        ```sql
        create user "<share_acct_name>" from external provider;     
        exec sp_addrolemember db_datareader, "<share_acct_name>"; 
        ```                   
       Обратите внимание на то, что *<share_acc_name>* — это имя вашего ресурса Data Share. Если вы еще не создали ресурс Data Share, вы можете вернуться к этому требованию позже.  

* Доступ к брандмауэру рабочей области Synapse. Это можно обеспечить следующим образом. 
    1. На портале Azure перейдите в рабочую область Synapse. В области навигации слева выберите *Брандмауэры*.
    1. Выберите значение **Вкл.** для параметра *Разрешить службам и ресурсам Azure доступ к этой рабочей области*.
    1. Щелкните **+Добавить IP-адрес клиента**. IP-адрес клиента можно изменить. При следующем совместном использовании данных SQL из портала Azure может потребоваться повторение этого процесса. Вы можете также добавить диапазон IP-адресов.
    1. Выберите команду **Сохранить**. 

### <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Войдите на [портал Azure](https://portal.azure.com/).

### <a name="create-a-data-share-account"></a>Создание учетной записи для общего доступа к данным

Создайте ресурс Azure Data Share в группе ресурсов Azure.

1. Нажмите кнопку меню в левом верхнем углу окна портала и выберите элемент **Создать ресурс** (+).

1. Найдите *Data Share*.

1. Выберите Data Share и команду **Создать**.

1. Укажите основные сведения о ресурсе Azure Data Share, указав следующую информацию. 

     **Параметр** | **Рекомендуемое значение** | **Описание поля**
    |---|---|---|
    | Подписка | Ваша подписка | Выберите подписку Azure, которую нужно использовать для своей учетной записи Data Share.|
    | Группа ресурсов | *test-resource-group* | Воспользуйтесь существующей группой ресурсов или создайте новую. |
    | Расположение | *Восточная часть США 2* | Выберите регион для учетной записи Data Share.
    | Имя | *datashareaccount* | Укажите имя вашей учетной записи Data Share. |
    | | |

1. Выберите **Проверить и создать**, а затем **Создать**, чтобы подготовить учетную запись для общего ресурса данных. Подготовка новой учетной записи для общего доступа к данным обычно занимает около 2 минут или меньше. 

1. Когда развертывание будет завершено, выберите **Перейти ресурсу**.

### <a name="create-a-share"></a>Создание общей папки

1. Перейдите на страницу "Обзор Data Share".

    ![Общий доступ к данным](./media/share-receive-data.png "Общий доступ к данным") 

1. Выберите команду **Начать совместное использование данных**.

1. Нажмите кнопку **создания**.   

1. Введите сведения о совместном использовании. Укажите имя, тип совместного использования, описание содержимого и условия использования (необязательно). 

    ![EnterShareDetails](./media/enter-share-details.png "Введите сведения об общем ресурсе") 

1. Выберите **Continue** (Продолжить).

1. Чтобы добавить наборы данных в общий ресурс, выберите **Добавить наборы данных**. 

    ![Добавление наборов данных в общий ресурс](./media/datasets.png "Наборы данных")

1. Выберите тип набора данных, который хотите добавить. Вы увидите другой список типов наборов данных в зависимости от типа ресурса (моментальный снимок или на странице), который вы выбрали на предыдущем этапе. 

    ![AddDatasets](./media/add-datasets.png "Добавление наборов данных")    

1. Выберите свою рабочую область SQL Server или синапсе, введите учетные данные при появлении соответствующего запроса и нажмите кнопку **Далее** , чтобы вернуться к объекту, к которому вы хотите предоставить общий доступ, и выберите "добавить наборы данных". Вы можете выбрать таблицы и представления из базы данных SQL Azure и Azure синапсе Analytics (ранее — хранилище Azure SQL) или таблиц из выделенного пула SQL Azure синапсе Analytics (Рабочая область). 

    ![SelectDatasets](./media/select-datasets-sql.png "Выбор наборов данных")    

1. На вкладке "Получатели" введите адреса электронной почты получателей данных, выбрав команду "+Добавить получателя". Адрес электронной почты должен быть электронной почтой имени получателя Azure.

    ![AddRecipients](./media/add-recipient.png "Добавление получателей") 

1. Выберите **Continue** (Продолжить).

1. Если выбран тип общего доступа к моментальным снимкам, вы можете настроить расписание моментальных снимков для предоставления обновлений данных потребителям. 

    ![EnableSnapshots](./media/enable-snapshots.png "Включение моментальных снимков") 

1. Выберите время начала и интервал повторения. 

1. Выберите **Continue** (Продолжить).

1. На вкладке "Просмотр и создание" просмотрите содержимое пакета, параметры, получателей и параметры синхронизации. Нажмите кнопку **Создать**.

Azure Data Share создан, и получатель Data Share готов принять ваше приглашение. 

## <a name="receive-data"></a>Получение данных

### <a name="prerequisites-to-receive-data"></a>Необходимые условия для получения данных
Чтобы принять приглашение в общий ресурс данных, вам необходимо подготовить к работе ряд ресурсов Azure, которые перечислены ниже. 

Прежде чем принять приглашение в общий ресурс данных, выполните все предварительные требования. 

* Подписка Azure. Если у вас еще нет подписки Azure, [создайте бесплатную учетную запись](https://azure.microsoft.com/free/), прежде чем начинать работу.
* Приглашение Data Share. Приглашение от Microsoft Azure с темой "Приглашение Azure Data Share от **<yourdataprovider@domain.com>** ".
* Зарегистрируйте [поставщик ресурсов Microsoft.DataShare](concepts-roles-permissions.md#resource-provider-registration) в подписке Azure, где вы создадите ресурс Data Share и подписку Azure, в которой находятся целевые хранилища данных Azure.

### <a name="prerequisites-for-target-storage-account"></a>Необходимые условия для целевой учетной записи хранения
Если вы решили получить данные в службе хранилища Azure, ниже приведен список предварительных требований.

* Учетная запись хранения Azure. Если у вас еще нет учетной записи хранения Azure, вы можете [создать ее](../storage/common/storage-account-create.md). 
* Разрешение на запись в учетную запись хранения, которая имеется в *Microsoft.Storage/storageAccounts/write*. Это разрешение назначено роли **участника**. 
* Разрешение на добавление назначения ролей для управляемого удостоверения ресурса общей папки в учетную запись хранения, которая имеется в *Microsoft. Authorization/назначение ролей/запись*. Это разрешение назначено роли **владельца**.  

### <a name="prerequisites-for-sql-target"></a>Необходимые условия для целевого объекта SQL
Если вы решили принимать данные в Базу данных SQL Azure или Azure Synapse Analytics, изучите следующий список предварительных условий. 

#### <a name="prerequisites-for-receiving-data-into-azure-sql-database-or-azure-synapse-analytics-formerly-azure-sql-dw"></a>Необходимые условия для получения данных в Базу данных SQL Azure или Azure Synapse Analytics (прежнее название — Хранилище данных SQL Azure)
Для настройки необходимых компонентов cм. [ролик с пошаговыми инструкциями](https://youtu.be/aeGISgK1xro).

* База данных SQL Azure или Azure Synapse Analytics (прежнее название — Хранилище данных SQL).
* Разрешение на запись в базы данных на сервере SQL, которое присутствует в *Microsoft.Sql/servers/databases/write*. Это разрешение назначено роли **участника**. 
* Разрешение на доступ управляемого удостоверения Data Share к Базе данных SQL Azure или Azure Synapse Analytics. Это можно обеспечить следующим образом. 
    1. На портале Azure перейдите к SQL Server и назначьте себе роль **администратора Azure Active Directory**.
    1. Подключитесь к Базе данных или Хранилищу данных SQL Azure с помощью [редактора запросов](../azure-sql/database/connect-query-portal.md#connect-using-azure-active-directory) или SQL Server Management Studio, выполнив проверку подлинности в Azure Active Directory. 
    1. Выполните следующий скрипт, чтобы добавить управляемое удостоверение Data Share с ролями db_datareader, db_datawriter и db_ddladmin. Необходимо подключиться с помощью Active Directory, а не аутентификации SQL Server. 

        ```sql
        create user "<share_acc_name>" from external provider; 
        exec sp_addrolemember db_datareader, "<share_acc_name>"; 
        exec sp_addrolemember db_datawriter, "<share_acc_name>"; 
        exec sp_addrolemember db_ddladmin, "<share_acc_name>";
        ```      
        Обратите внимание на то, что *<share_acc_name>* — это имя вашего ресурса Data Share. Если вы еще не создали ресурс Data Share, вы можете вернуться к этому требованию позже.         

* Доступ к брандмауэру SQL Server. Это можно обеспечить следующим образом. 
    1. В SQL Server на портале Azure перейдите к разделу *Брандмауэры и виртуальные сети*
    1. Выберите значение **Да** для параметра *Разрешить доступ к серверу службам и ресурсам Azure*.
    1. Щелкните **+Добавить IP-адрес клиента**. IP-адрес клиента можно изменить. При следующем совместном использовании данных SQL из портала Azure может потребоваться повторение этого процесса. Вы можете также добавить диапазон IP-адресов.
    1. Выберите команду **Сохранить**. 
 
#### <a name="prerequisites-for-receiving-data-into-azure-synapse-analytics-workspace-sql-pool"></a>Необходимые условия для получения данных в пул SQL в Azure Synapse Analytics (рабочая область)

* Выделенный пул SQL в Azure Synapse Analytics (рабочая область). Получение данных в бессерверный пул SQL в настоящее время не поддерживается.
* Разрешение на запись в пул SQL в рабочей области Synapse, которое предоставляется через *Microsoft.Synapse/workspaces/sqlPools/write*. Это разрешение назначено роли **участника**.
* Разрешение на доступ управляемого удостоверения Data Share к пулу SQL рабочей области Synapse. Это можно обеспечить следующим образом. 
    1. На портале Azure перейдите в рабочую область Synapse. Выберите на панели навигации слева "Администратор Active Directory для SQL" и назначьте себе роль **администратора Azure Active Directory**.
    1. Откройте Synapse Studio, затем выберите *Управление* в области навигации слева. Выберите *Управление доступом* в разделе "Безопасность". Назначьте себе роль **Администратор SQL** или **Администратор рабочей области**.
    1. В Synapse Studio в области навигации слева выберите *Разработка*. Выполните в пуле SQL следующий скрипт, чтобы добавить ресурс управляемого удостоверения Data Share с ролями db_datareader, db_datawriter и db_ddladmin. 
    
        ```sql
        create user "<share_acc_name>" from external provider; 
        exec sp_addrolemember db_datareader, "<share_acc_name>"; 
        exec sp_addrolemember db_datawriter, "<share_acc_name>"; 
        exec sp_addrolemember db_ddladmin, "<share_acc_name>";
        ```                   
       Обратите внимание на то, что *<share_acc_name>* — это имя вашего ресурса Data Share. Если вы еще не создали ресурс Data Share, вы можете вернуться к этому требованию позже.  

* Доступ к брандмауэру рабочей области Synapse. Это можно обеспечить следующим образом. 
    1. На портале Azure перейдите в рабочую область Synapse. В области навигации слева выберите *Брандмауэры*.
    1. Выберите значение **Вкл.** для параметра *Разрешить службам и ресурсам Azure доступ к этой рабочей области*.
    1. Щелкните **+Добавить IP-адрес клиента**. IP-адрес клиента можно изменить. При следующем совместном использовании данных SQL из портала Azure может потребоваться повторение этого процесса. Вы можете также добавить диапазон IP-адресов.
    1. Выберите команду **Сохранить**. 

### <a name="sign-in-to-the-azure-portal"></a>Вход на портал Azure

Войдите на [портал Azure](https://portal.azure.com/).

### <a name="open-invitation"></a>Открытие приглашения

1. Вы можете открыть приглашение из электронной почты или непосредственно из портала Azure. 

   Чтобы открыть приглашение из электронной почты, проверьте папку "Входящие" на наличие приглашения от поставщика данных. Это должно быть приглашение от Microsoft Azure с названием **Приглашение Azure Data Share от <yourdataprovider@domain.com>** . Выберите **Просмотреть приглашение**, чтобы увидеть ваше приглашение в Azure. 

   Чтобы открыть приглашение непосредственно из портала Azure, найдите на портале параметр **Приглашения Data Share**. Вы перейдете к списку приглашений Data Share.

   ![Список приглашений](./media/invitations.png "Список приглашений") 

1. Выберите общий ресурс для просмотра. 

### <a name="accept-invitation"></a>Принятие приглашения
1. Просмотрите все поля, в том числе **Условия использования**. Если вы согласны с условиями использования, установите флажок для подтверждения своего согласия. 

   ![Условия использования](./media/terms-of-use.png "Условия использования") 

1. В разделе *Target Data Share Account* (Целевая учетная запись Data Share) выберите подписку и группу ресурсов, куда будете развертывать общий ресурс данных. 

   В поле **учетной записи Data Share** выберите **Создать**, если у вас нет существующей учетной записи Data Share. В противном случае выберите учетную запись Data Share, где бы вы хотели принимать данные. 

   В поле **Received Share Name** (Имя полученного общего ресурса) можно оставить значение по умолчанию, заданное поставщиком данных, или указать для полученного общего ресурса новое имя. 

   Согласившись с условиями использования и указав учетную запись Data Share для управления полученным общим ресурсом, выберите **Accept and Configure** (Принять и настроить). Будет создана подписка на общий ресурс. 

   ![Принятие параметров](./media/accept-options.png "Принятие параметров") 

   Это приведет к получению общего ресурса в учетной записи общего ресурса данных. 

   Если вы не хотите принимать приглашение, выберите *Отклонить*. 

### <a name="configure-received-share"></a>Настройка полученного общего ресурса
Выполните следующие действия, чтобы настроить место для получения данных.

1. Перейдите на вкладку **Наборы данных**. Установите флажок рядом с набором данных, которому следует назначить место назначение. Нажмите **+ Сопоставить с целевым объектом**, чтобы выбрать целевое хранилище данных. 

   ![Кнопка "Сопоставить с целевым объектом"](./media/dataset-map-target.png "Сопоставление с целевым объектом") 

1. Выберите целевое хранилище данных, в котором должны находиться данные. Все файлы и таблицы данных в целевом хранилище данных с тем же путем и именем будут перезаписаны. 

   ![Целевая учетная запись хранения](./media/dataset-map-target-sql.png "Целевое хранилище данных") 

1. Для совместного использования на основе моментальных снимков можно также включить на вкладе **Расписание моментальных снимков** функцию расписания моментальных снимков при условии, что поставщик данных создал такое расписание для регулярного обновления данных. Установите флажок рядом с расписанием моментальных снимков и выберите **+ Включить**.

   ![Включение расписания моментальных снимков](./media/enable-snapshot-schedule.png "Включение расписания моментальных снимков")

### <a name="trigger-a-snapshot"></a>Активация создания моментальных снимков
Эти действия применимы только к общему доступу на основе моментальных снимков.

1. Вы можете активировать создание моментальных снимков, нажав на вкладке **Подробности** кнопку **Активировать моментальный снимок**. Здесь вы сможете активировать полные или добавочные моментальные снимки ваших данных. Если вы осуществляете прием данных от поставщика в первый раз, выберите полное копирование. Для источников SQL поддерживается только полный моментальный снимок.

   ![Активация создания моментального снимка](./media/trigger-snapshot.png "Активация создания моментального снимка") 

1. Если состояние последнего запуска является *успешным*, перейдите к целевому хранилищу данных для просмотра полученных данных. Выберите **Наборы данных** и щелкните ссылку в целевом пути. 

   ![Наборы данных объекта-получателя](./media/consumer-datasets.png "Сопоставление набора данных объекта-получателя") 

### <a name="view-history"></a>Просмотр истории
Этот шаг применим только для общего доступа на основе моментальных снимков. Чтобы просмотреть журнал моментальных снимков, выберите вкладку **Журнал**. Здесь вы найдете журнал всех моментальных снимков за последние 30 дней. 

## <a name="supported-data-types"></a>Поддерживаемые типы данных
При совместном использовании данных из источника SQL в процессе создания моментального снимка используются следующие сопоставления типов данных SQL Server с промежуточными типами данных Azure. 

| Тип данных SQL Server | Общий ресурс данных Azure — промежуточный тип данных |
|:--- |:--- |
| BIGINT |Int64 |
| binary |Byte[] |
| bit |Логическое |
| char |String, Char[] |
| Дата |Дата и время |
| Datetime |Дата и время |
| datetime2 |Дата и время |
| Datetimeoffset |DateTimeOffset |
| Decimal |Decimal |
| FILESTREAM attribute (varbinary(max)) |Byte[] |
| Float |Double |
| Изображение |Byte[] |
| INT |Int32 |
| money |Decimal |
| nchar |String, Char[] |
| ntext |String, Char[] |
| NUMERIC |Decimal |
| nvarchar |String, Char[] |
| real |Один |
| rowversion |Byte[] |
| smalldatetime |Дата и время |
| smallint |Int16 |
| smallmoney |Decimal |
| sql_variant |Объект |
| text |String, Char[] |
| time |TimeSpan |
| TIMESTAMP |Byte[] |
| tinyint |Int16 |
| UNIQUEIDENTIFIER |Guid |
| varbinary |Byte[] |
| varchar |String, Char[] |
| Xml |Строка |

>[!NOTE]
> 1. Для типов данных, которые сопоставляются с промежуточным типом Decimal, в настоящее время моментальный снимок поддерживает точность до 28. Если у вас есть данные, для которых требуется точность больше 28, рассмотрите возможность преобразования в строку. 
> 1.  При совместном использовании данных из базы данных SQL Azure в Azure синапсе Analytics поддерживаются не все типы данных. Дополнительные сведения см. в разделе [табличные типы данных в выделенном пуле SQL](../synapse-analytics/sql-data-warehouse/sql-data-warehouse-tables-data-types.md) . 

## <a name="sql-always-encrypted-or-dynamic-data-masking"></a>SQL Always Encrypted или динамическое маскирование данных
Сейчас общая папка данных Azure не поддерживает базы данных SQL Azure с настроенными Always Encrypted. 

Для исходных таблиц SQL с динамическим маскированием данных данные будут отображаться маскированными на стороне получателя.

## <a name="sql-snapshot-performance"></a>Производительность моментального снимка SQL
Производительность моментального снимка SQL влияет на ряд факторов. Всегда рекомендуется проводить тестирование производительности. Ниже приведены некоторые примеры факторов, влияющих на производительность.

* Конфигурация оборудования (например, виртуальных ядер, память, DWU) исходного и целевого хранилища данных SQL. 
* Одновременный доступ к исходному и целевому хранилищам данных. При совместном использовании нескольких таблиц и представлений из одного хранилища данных SQL или при получении нескольких таблиц и представлений в одном хранилище данных SQL производительность будет снижена.   
* Расположение исходных и целевых хранилищ данных. 

## <a name="troubleshoot-sql-snapshot-failure"></a>Устранение ошибок моментального снимка SQL
Наиболее распространенной причиной сбоя моментального снимка является то, что общая папка данных не имеет разрешения на доступ к исходному или целевому хранилищу данных. Чтобы предоставить разрешение на общий доступ к данным для исходной или целевой базы данных SQL Azure или Azure синапсе Analytics (ранее это хранилище Azure SQL), необходимо запустить предоставленный скрипт SQL при подключении к базе данных SQL, используя проверку подлинности Azure Active Directory. Сведения об устранении дополнительных сбоев моментальных снимков SQL см. в статье [Устранение неполадок моментального снимка](data-share-troubleshoot.md#snapshots).

## <a name="next-steps"></a>Дальнейшие действия
Вы узнали, как совместно использовать и принимать данные из источников SQL с помощью службы общего доступа к данным Azure. Чтобы получить дополнительные сведения о совместном использовании из других источников данных, перейдите к [поддерживаемым хранилищам данных](supported-data-stores.md).