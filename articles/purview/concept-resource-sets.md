---
title: Сведения о наборах ресурсов
description: В этой статье объясняется, что такое наборы ресурсов и как Azure зрения их создает.
author: djpmsft
ms.author: daperlov
ms.service: purview
ms.subservice: purview-data-catalog
ms.topic: conceptual
ms.date: 02/03/2021
ms.openlocfilehash: cbf070dce056795ad8e4a5f3e4d609e7d36d631e
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "103200817"
---
# <a name="understanding-resource-sets"></a>Сведения о наборах ресурсов

Эта статья поможет вам понять, как Azure зрения использует наборы ресурсов для преобразования ресурсов данных в логические ресурсы.
## <a name="background-info"></a>Сведения о фоне

В системах обработки данных с масштабированием обычно одна таблица хранится на диске в виде нескольких файлов. Эта концепция представлена в Azure зрения с помощью наборов ресурсов. Набор ресурсов — это один объект в каталоге, представляющий большое количество ресурсов в хранилище.

Например, предположим, что в кластере Spark сохранен кадр данных в Azure Data Lake Storage (ADLS) Gen2 Data Source. Хотя в Spark таблица выглядит как единичный логический ресурс, на диске, скорее всего, тысячи Parquet файлов, каждый из которых представляет раздел общего содержимого в кадре данных. Данные и данные журнала Интернета вещей имеют одинаковую сложность. Представьте, что у вас есть датчик, который выводит файлы журналов несколько раз в секунду. Это не займет много времени, пока вы не получите сотни тысяч файлов журналов от одного датчика.

Чтобы решить проблему сопоставления большого количества ресурсов данных с одним логическим ресурсом, Azure зрения использует наборы ресурсов.

## <a name="how-azure-purview-detects-resource-sets"></a>Как Azure зрения обнаруживает наборы ресурсов

Azure зрения поддерживает обнаружение наборов ресурсов в хранилище BLOB-объектов Azure, ADLS 1-го поколения и ADLS 2-го поколения.

Azure зрения автоматически обнаруживает наборы ресурсов при сканировании. Эта функция рассматривает все данные, полученные посредством сканирования, и сравнивает их с набором определенных шаблонов.

Например, предположим, что вы просматриваете источник данных, URL-адрес которого имеет значение `https://myaccount.blob.core.windows.net/mycontainer/machinesets/23/foo.parquet` . Azure зрения просматривает сегменты пути и определяет, соответствуют ли они встроенным шаблонам. Он содержит встроенные шаблоны для идентификаторов GUID, чисел, форматов даты, кодов локализации (например, EN-US) и т. д. В этом случае шаблон номера соответствует *23*. В Azure зрения предполагается, что этот файл является частью набора ресурсов с именем `https://myaccount.blob.core.windows.net/mycontainer/machinesets/{N}/foo.parquet` .

Для URL-адреса, например `https://myaccount.blob.core.windows.net/mycontainer/weblogs/en_au/23.json` , Azure зрения соответствует шаблону локализации и шаблону числа, создавая набор ресурсов с именем `https://myaccount.blob.core.windows.net/mycontainer/weblogs/{LOC}/{N}.json` .

С помощью этой стратегии Azure зрения будет сопоставлять следующие ресурсы с одним и тем же набором ресурсов `https://myaccount.blob.core.windows.net/mycontainer/weblogs/{LOC}/{N}.json` :

- `https://myaccount.blob.core.windows.net/mycontainer/weblogs/cy_gb/1004.json`
- `https://myaccount.blob.core.windows.net/mycontainer/weblogs/cy_gb/234.json`
- `https://myaccount.blob.core.windows.net/mycontainer/weblogs/de_Ch/23434.json`

## <a name="file-types-that-azure-purview-will-not-detect-as-resource-sets"></a>Типы файлов, которые Azure зрения не будет выявлять как наборы ресурсов

Зрения намеренно не пытается классифицировать большинство типов файлов документов, например Word, Excel или PDF, как наборы ресурсов. Исключением является формат CSV, так как это общий формат секционированного файла.

## <a name="how-azure-purview-scans-resource-sets"></a>Как Azure зрения сканирует наборы ресурсов

Когда Azure зрения обнаруживает ресурсы, которые он считает частью набора ресурсов, он переключается с полной проверки на образец сканирования. В примере сканирования открывается только подмножество файлов, которые посчитались в наборе ресурсов. Для каждого открываемого файла он использует схему и выполняет классификаторы. Затем Azure зрения находит самый новый ресурс из открытых ресурсов и использует схему и классификации этого ресурса в записи для всего набора ресурсов в каталоге.

## <a name="what-azure-purview-stores-about-resource-sets"></a>Что такое хранилище Azure зрения о наборах ресурсов

В дополнение к одной схеме и классификациям Azure зрения сохраняет следующие сведения о наборах ресурсов:

- Данные из последнего ресурса раздела, который он глубоко проверил.
- Статистическая информация о ресурсах секций, составляющих набор ресурсов.
- Число секций, показывающее, сколько ресурсов секций найдено.
- Число схем, показывающее, сколько уникальных схем было найдено в образце, на котором она выполняла глубокое сканирование. Это значение может быть числом от 1 до 5 или для значений больше 5, 5 +.
- Список типов разделов, если в наборе ресурсов включено более одного типа секции. Например, датчик Интернета вещей может выводить файлы XML и JSON, хотя и логически являются частью одного набора ресурсов.

## <a name="built-in-resource-set-patterns"></a>Встроенные шаблоны наборов ресурсов

Azure зрения поддерживает следующие шаблоны наборов ресурсов. Эти шаблоны могут отображаться в виде имени в каталоге или в составе имени файла.
### <a name="regex-based-patterns"></a>Шаблоны на основе регулярных выражений

| Имя шаблона | Отображаемое имя | Описание |
|--------------|--------------|-------------|
| Guid         | УСТРОЙСТВА       | Глобальный уникальный идентификатор, как определено в [RFC 4122](https://tools.ietf.org/html/rfc4122) |
| Число       | \N          | Одна или несколько цифр |
| Форматы даты и времени | Год Месяц Ежедневные \N     | Поддерживаются различные форматы даты и времени, но они представлены с помощью {Year} [разделитель] {month} [разделитель] {Day} или серии {N} s. |
| 4ByteHex     | Hex        | 4-значное ШЕСТНАДЦАТЕРИЧное число. |
| Локализация | Loc        | Тег языка, как определено в [BCP 47](https://tools.ietf.org/html/bcp47), поддерживаются имена и-и _ (например, en_CA и en-CA). |

### <a name="complex-patterns"></a>Сложные шаблоны

| Имя шаблона | Отображаемое имя | Описание |
|--------------|--------------|-------------|
| спаркпас    | {Спаркпартитионс} | Идентификатор файла раздела Spark |
| Путь к дате (гггг/мм/дд)  | {Year}/{Монс}/{дай} | Шаблон "год/месяц/день", охватывающий несколько папок |


## <a name="how-resource-sets-are-displayed-in-the-azure-purview-catalog"></a>Отображение наборов ресурсов в каталоге Azure зрения

Когда Azure зрения сопоставляет группу активов с набором ресурсов, она пытается извлечь наиболее полезную информацию для использования в качестве отображаемого имени в каталоге. Ниже приведены некоторые примеры применяемого по умолчанию соглашения об именовании. 

### <a name="example-1"></a>Пример 1

Полное имя: `https://myblob.blob.core.windows.net/sample-data/name-of-spark-output/{SparkPartitions}`

Отображаемое имя: "имя выхода Spark"

### <a name="example-2"></a>Пример 2

Полное имя: `https://myblob.blob.core.windows.net/my-partitioned-data/{Year}-{Month}-{Day}/{N}-{N}-{N}-{N}/{GUID}`

Отображаемое имя: "Мои секционированные данные"

### <a name="example-3"></a>Пример 3

Полное имя: `https://myblob.blob.core.windows.net/sample-data/data{N}.csv`

Отображаемое имя: "данные"

## <a name="known-issues-with-resource-sets"></a>Известные проблемы с наборами ресурсов

Хотя наборы ресурсов хорошо работают в большинстве случаев, вы можете столкнуться со следующими проблемами, в которых Azure зрения:

- Неправильно помечает ресурс как набор ресурсов
- Помещение ресурса в недопустимый набор ресурсов
- Неправильно помечает ресурс как не являющийся набором ресурсов

## <a name="next-steps"></a>Следующие шаги

Чтобы приступить к работе с Azure зрения, см. раздел [Краткое руководство. Создание учетной записи Azure зрения](create-catalog-portal.md).
