---
title: Регистрация и сканирование Azure Data Lake Storage (ADLS) Gen2
description: В этом учебнике описано, как проверить Azure Data Lake Storage 2-го поколения.
author: shsandeep123
ms.author: sandeepshah
ms.service: purview
ms.subservice: purview-data-catalog
ms.topic: how-to
ms.date: 11/17/2020
ms.openlocfilehash: 0232682661387e635e6ce8bfb5fc6e03301d130c
ms.sourcegitcommit: b6267bc931ef1a4bd33d67ba76895e14b9d0c661
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 12/19/2020
ms.locfileid: "97694811"
---
# <a name="register-and-scan-azure-data-lake-storage-gen2"></a>Регистрация и сканирование Azure Data Lake Storage 2-го поколения

В этой статье описано, как зарегистрировать Azure Data Lake Storage 2-го поколения в качестве источника данных в Azure зрения и настроить проверку.

## <a name="supported-capabilities"></a>Поддерживаемые возможности

Источник данных Azure Data Lake Storage 2-го поколения поддерживает следующие функциональные возможности:

- **Полные и добавочные Просмотры** для записи метаданных и классификации в Azure Data Lake Storage 2-го поколения

- **Журнал преобразований** между ресурсами данных для операций копирования и потока ADF

## <a name="prerequisites"></a>Предварительные требования

Перед регистрацией источников данных создайте учетную запись Azure зрения. Дополнительные сведения о создании учетной записи зрения см. в разделе [Краткое руководство. Создание учетной записи Azure зрения](create-catalog-portal.md).

### <a name="setting-up-authentication-for-a-scan"></a>Настройка проверки подлинности для сканирования

Для Azure Data Lake Storage 2-го поколения поддерживаются следующие методы проверки подлинности:

- Управляемое удостоверение
- Субъект-служба
- Ключ учетной записи

#### <a name="managed-identity-recommended"></a>Управляемое удостоверение (рекомендуется)

При выборе **управляемого удостоверения** для настройки подключения необходимо сначала предоставить учетной записи зрения разрешение на проверку источника данных:

1. Перейдите к учетной записи хранения ADLS 2-го поколения.
1. Щелкните **Управление доступом (IAM)** в области навигации слева. 
1. Щелкните **+ Добавить**.
1. Задайте **роль** для **модуля чтения данных большого двоичного объекта хранилища** и введите имя учетной записи Azure зрения в поле **выберите** вход. Затем щелкните **Сохранить**, чтобы назначить эту роль учетной записи Purview.

> [!Note]
> Дополнительные сведения см. в статье [авторизация доступа к BLOB-объектам и очередям с помощью Azure Active Directory](https://docs.microsoft.com/azure/storage/common/storage-auth-aad)

#### <a name="account-key"></a>Ключ учетной записи

Если выбран метод проверки подлинности " **ключ учетной записи**", необходимо получить ключ доступа и сохранить его в хранилище ключей:

1. Перейдите к учетной записи хранения ADLS Gne2
1. Выберите **параметры > ключи доступа**
1. Скопируйте *ключ* и сохраните его в любое место для дальнейших действий
1. Перейдите в хранилище ключей.
1. Выберите **Параметры > Секреты**.
1. Выберите **+ создать/импортировать** и введите **имя** и **значение** в качестве *ключа* из вашей учетной записи хранения.
1. Чтобы завершить процесс, щелкните **Создать**.
1. Если хранилище ключей еще не подключено к службе Purview, вам придется [создать новое подключение к хранилищу ключей](manage-credentials.md#create-azure-key-vaults-connections-in-your-azure-purview-account).
1. Наконец, [Создайте новые учетные данные](manage-credentials.md#create-a-new-credential) с помощью ключа, чтобы настроить проверку.

#### <a name="service-principal"></a>Субъект-служба

Чтобы использовать субъект-службу, вам нужно выбрать существующий субъект-службу или создать новый. 

> [!Note]
> Если необходимо создать субъект-службу, выполните следующие действия:
> 1. Перейдите на [портал Azure](https://portal.azure.com).
> 1. В меню слева выберите **Azure Active Directory**.
> 1. Щелкните **Регистрация приложений**.
> 1. Выберите **Регистрация нового приложения**.
> 1. Введите имя **приложения** (имя субъекта-службы).
> 1. Установите флажок **Учетные записи только в этом каталоге организации**.
> 1. Для URI перенаправления выберите тип **Интернет** и введите произвольный URL-адрес, не обязательно существующий и работающий.
> 1. Нажмите кнопку **Зарегистрировать**.

Необходимо получить идентификатор и секрет приложения субъекта-службы:

1. Откройте страницу субъекта-службы на [портале Azure](https://portal.azure.com).
1. Скопируйте значения **Идентификатор приложения (клиент)** из раздела **Обзор** и **Секрет клиента** из раздела **Сертификаты и секреты**.
1. Перейдите в хранилище ключей.
1. Выберите **Параметры > Секреты**.
1. Выберите **+ Создать или импортировать**, а затем введите **Имя** и **Значение**, содержащее **секрет клиента** для вашего субъекта-службы.
1. Чтобы завершить процесс, щелкните **Создать**.
1. Если хранилище ключей еще не подключено к службе Purview, вам придется [создать новое подключение к хранилищу ключей](manage-credentials.md#create-azure-key-vaults-connections-in-your-azure-purview-account).
1. Наконец, [создайте новые учетные данные](manage-credentials.md#create-a-new-credential) для сканирования, указав субъект-службу.

##### <a name="granting-the-service-principal-access-to-your-adls-gen2-account"></a>Предоставление субъекту-службе доступа к учетной записи ADLS Gen2

1. Войдите в свою учетную запись хранения.
1. Щелкните **Управление доступом (IAM)** в области навигации слева. 
1. Щелкните **+ Добавить**.
1. Задайте **роль** для **модуля чтения данных большого двоичного объекта хранилища** и введите имя или идентификатор объекта субъекта-службы в поле **выберите** вход. Затем выберите **сохранить** , чтобы назначить эту роль субъекту-службе.
### <a name="firewall-settings"></a>Параметры брандмауэра

> [!NOTE]
> Если брандмауэр включен для учетной записи хранения, при настройке проверки необходимо использовать метод проверки подлинности с **управляемым удостоверением** .

1. Перейдите в учетную запись хранения АСЛС Gen2 в [портал Azure](https://portal.azure.com)
1. Перейдите к разделу **параметры > сети** и
1. Выберите **Выбранные сети** в разделе **Разрешить доступ из**
1. В разделе **исключения** выберите **разрешить доверенным службам Майкрософт доступ к этой учетной записи хранения** и нажмите кнопку **сохранить** .

:::image type="content" source="./media/register-scan-adls-gen2/firewall-setting.png" alt-text="Снимок экрана с параметром брандмауэра":::

## <a name="register-azure-data-lake-storage-gen2-data-source"></a>Регистрация Azure Data Lake Storage 2-го поколения источника данных

Чтобы зарегистрировать новую учетную запись ADLS 2-го поколения в каталоге данных, выполните следующие действия.

1. Перейдите к учетной записи Purview.
2. В области навигации слева выберите **Источники**.
3. Нажмите кнопку **Зарегистрировать**.
4. В меню **Регистрация источников** выберите **Azure Data Lake Storage 2-го поколения**
5. Выберите **Продолжить**

На экране **Регистрация источников (Azure Data Lake Storage 2-го поколения)** выполните следующие действия.

1. Введите **Имя**, под которым этот источник данных будет включен в каталог.
2. Выберите подписку, чтобы отфильтровать учетные записи хранения
3. Выбор учетной записи хранения
4. Выберите коллекцию или создайте новую (необязательно).
5. Щелкните **Готово**, чтобы завершить регистрацию источника данных.

:::image type="content" source="media/register-scan-adls-gen2/register-sources.png" alt-text="Параметры регистрации источников" border="true":::

[!INCLUDE [create and manage scans](includes/manage-scans.md)]

## <a name="next-steps"></a>Дальнейшие действия

- [Обзор каталога данных Azure Purview](how-to-browse-catalog.md)
- [Поиск по каталогу данных Azure Purview](how-to-search-catalog.md)
