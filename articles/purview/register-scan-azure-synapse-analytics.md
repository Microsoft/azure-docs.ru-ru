---
title: Как проверить Azure синапсе Analytics
description: В этом разделе приведены инструкции по сканированию Azure синапсе Analytics.
author: viseshag
ms.author: viseshag
ms.service: purview
ms.subservice: purview-data-catalog
ms.topic: how-to
ms.date: 10/22/2020
ms.openlocfilehash: 3ba43b83166b5548dee4ea4e52c7411db48d23f5
ms.sourcegitcommit: ca215fa220b924f19f56513fc810c8c728dff420
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/19/2021
ms.locfileid: "98567264"
---
# <a name="register-and-scan-azure-synapse-analytics"></a>Регистрация и проверка Azure синапсе Analytics

В этой статье описывается, как зарегистрировать и проверить экземпляр Azure синапсе Analytics (ранее — хранилище данных SQL) в зрения.

## <a name="supported-capabilities"></a>Поддерживаемые возможности

Azure синапсе Analytics (ранее — хранилище данных SQL) поддерживает полное и добавочное сканирование для записи метаданных и схемы. Проверки также классифицируют данные автоматически на основе системных и настраиваемых правил классификации.

### <a name="known-limitations"></a>Известные ограничения

Azure зрения не поддерживает сканирование [представлений](/sql/relational-databases/views/views?view=azure-sqldw-latest&preserve-view=true) в Azure синапсе Analytics.

## <a name="prerequisites"></a>Предварительные требования

- Перед регистрацией источников данных создайте учетную запись Azure зрения. Дополнительные сведения о создании учетной записи зрения см. в разделе [Краткое руководство. Создание учетной записи Azure зрения](create-catalog-portal.md).
- Необходимо быть администратором источника данных Azure зрения.
- Сетевой доступ между учетной записью зрения и Azure синапсе Analytics.
 
## <a name="setting-up-authentication-for-a-scan"></a>Настройка проверки подлинности для сканирования

Настроить аутентификацию для Azure синапсе Analytics можно тремя способами:

- Управляемое удостоверение
- Проверка подлинности SQL
- Субъект-служба

    > [!Note]
    > Создавать имена входа могут только имена входа участника уровня сервера (созданного процессом подготовки) или члены роли базы данных `loginmanager` в базе данных master. Процесс предоставления разрешений займет примерно 15 минут, и после этого Purview будет иметь нужные разрешения для сканирования ресурсов.

### <a name="managed-identity-recommended"></a>Управляемое удостоверение (рекомендуется) 
   
Ваша учетная запись зрения имеет собственное управляемое удостоверение, которое по сути является именем зрения при его создании. Необходимо создать пользователя Azure AD в Azure синапсе Analytics (ранее — SQL DW) с именем управляемого удостоверения зрения, следуя предварительным требованиям и руководству по [созданию пользователей Azure AD с помощью приложений Azure AD](/azure/azure-sql/database/authentication-aad-service-principal-tutorial).

Пример синтаксиса SQL для создания пользователя и предоставления разрешений:

```sql
CREATE USER [PurviewManagedIdentity] FROM EXTERNAL PROVIDER
GO

EXEC sp_addrolemember 'db_owner', [PurviewManagedIdentity]
GO
```

Проверка подлинности должна иметь разрешение на получение метаданных для базы данных, схем и таблиц. Кроме того, требуется возможность запрашивать из таблиц примеры для классификации. Рекомендуется назначить `db_owner` разрешение для удостоверения.

### <a name="service-principal"></a>Субъект-служба

Чтобы использовать проверку подлинности субъекта-службы для проверок, можно использовать существующую или создать новую. 

> [!Note]
> Если необходимо создать субъект-службу, выполните следующие действия:
> 1. Перейдите на [портал Azure](https://portal.azure.com).
> 1. В меню слева выберите **Azure Active Directory**.
> 1. Щелкните **Регистрация приложений**.
> 1. Выберите **Регистрация нового приложения**.
> 1. Введите имя **приложения** (имя субъекта-службы).
> 1. Установите флажок **Учетные записи только в этом каталоге организации**.
> 1. Для URI перенаправления выберите тип **Интернет** и введите произвольный URL-адрес, не обязательно существующий и работающий.
> 1. Нажмите кнопку **Зарегистрировать**.

Необходимо получить идентификатор и секрет приложения субъекта-службы:

1. Откройте страницу субъекта-службы на [портале Azure](https://portal.azure.com).
1. Скопируйте значения **Идентификатор приложения (клиент)** из раздела **Обзор** и **Секрет клиента** из раздела **Сертификаты и секреты**.
1. Перейдите в хранилище ключей.
1. Выберите **Параметры > Секреты**.
1. Выберите **+ Создать или импортировать**, а затем введите **Имя** и **Значение**, содержащее **секрет клиента** для вашего субъекта-службы.
1. Чтобы завершить процесс, щелкните **Создать**.
1. Если хранилище ключей еще не подключено к службе Purview, вам придется [создать новое подключение к хранилищу ключей](manage-credentials.md#create-azure-key-vaults-connections-in-your-azure-purview-account).
1. Наконец, [создайте новые учетные данные](manage-credentials.md#create-a-new-credential) для сканирования, указав субъект-службу. 

#### <a name="granting-the-service-principal-access-to-your-azure-synapse-analytics-formerly-sql-dw"></a>Предоставление субъекту-службе доступа к Azure синапсе Analytics (прежнее название — SQL DW)

Кроме того, необходимо также создать пользователя Azure AD в Azure синапсе Analytics, выполнив предварительные требования и учебник по [созданию пользователей Azure AD с помощью приложений Azure AD](https://docs.microsoft.com/azure/azure-sql/database/authentication-aad-service-principal-tutorial). Пример синтаксиса SQL для создания пользователя и предоставления разрешений:

```sql
CREATE USER [ServicePrincipalName] FROM EXTERNAL PROVIDER
GO

EXEC sp_addrolemember 'db_owner', [ServicePrincipalName]
GO
```

> [!Note]
> Для сканирования в Purview нужно предоставить значения **Идентификатор приложения (клиент)** и **Секрет клиента**.

### <a name="sql-authentication"></a>Проверка подлинности SQL

Чтобы создать имя входа для Azure синапсе Analytics (прежнее название — SQL DW), выполните инструкции из статьи [Создание имени входа](/sql/t-sql/statements/create-login-transact-sql?view=azure-sqldw-latest&preserve-view=true#examples-1) .

Если выбран метод проверки подлинности **SQL**, необходимо получить пароль и сохранить его в хранилище ключей:

1. Получение пароля для имени входа SQL
1. Перейдите в хранилище ключей.
1. Выберите **Параметры > Секреты**.
1. Выберите **+ создать/импортировать** и введите **имя** и **значение** в качестве *пароля* для имени входа SQL.
1. Чтобы завершить процесс, щелкните **Создать**.
1. Если хранилище ключей еще не подключено к службе Purview, вам придется [создать новое подключение к хранилищу ключей](manage-credentials.md#create-azure-key-vaults-connections-in-your-azure-purview-account).
1. Наконец, [Создайте новые учетные данные](manage-credentials.md#create-a-new-credential) с помощью ключа, чтобы настроить проверку.

## <a name="register-an-azure-synapse-analytics-instance-formerly-sql-dw"></a>Регистрация экземпляра Azure синапсе Analytics (ранее — хранилище данных SQL)

Чтобы зарегистрировать новый сервер Azure синапсе Analytics в каталоге данных, выполните следующие действия.

1. Перейдите к учетной записи Purview.
1. В области навигации слева выберите **Источники**.
1. Нажмите кнопку **Зарегистрировать**.
1. В меню **Регистрация источников** выберите **Azure синапсе Analytics (прежнее название — SQL DW)** .
1. Выберите **Продолжить**

На экране **Register Sources (Azure синапсе Analytics) (регистрация источников)** выполните следующие действия.

1. Введите **Имя**, под которым этот источник данных будет включен в каталог.
1. Выберите способ указания нужной учетной записи хранения:
   1. Выберите **из подписки Azure**, выберите подходящую подписку в раскрывающемся списке **Подписка Azure** и соответствующий сервер в раскрывающемся списке **имя сервера** .
   1. Можно также выбрать действие **Ввести вручную** и указать **Имя сервера**.
1. Щелкните **Готово**, чтобы завершить регистрацию источника данных.

:::image type="content" source="media/register-scan-azure-synapse-analytics/register-sources.png" alt-text="Параметры регистрации источников" border="true":::

[!INCLUDE [create and manage scans](includes/manage-scans.md)]

## <a name="next-steps"></a>Дальнейшие действия

- [Обзор каталога данных Azure Purview](how-to-browse-catalog.md)
- [Поиск по каталогу данных Azure Purview](how-to-search-catalog.md)

