---
title: Использование обработчика правил для принудительного применения протокола HTTPS в стандартной сети доставки содержимого Microsoft Azure | Документация Майкрософт
description: Используйте обработчик правил для стандартной сети доставки содержимого Microsoft Azure (Azure CDN), чтобы настроить способ обработки HTTP-запросов сетью Azure CDN, включая блокирование доставки определенных типов содержимого, определение политики кэширования и изменение заголовков HTTP. В этой статье вы узнаете, как создать правило для перенаправления пользователей по протоколу HTTPS.
services: cdn
author: asudbring
ms.service: azure-cdn
ms.topic: how-to
ms.date: 11/01/2019
ms.author: allensu
ms.openlocfilehash: b94798580b2d4ba746c152486c0de753cf64d2c9
ms.sourcegitcommit: 32e0fedb80b5a5ed0d2336cea18c3ec3b5015ca1
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/30/2021
ms.locfileid: "102564906"
---
# <a name="set-up-the-standard-rules-engine-for-azure-cdn"></a>Настройка стандартного обработчика правил для Azure CDN

В этой статье описывается, как настроить и использовать стандартный обработчик правил для сети доставки содержимого Microsoft Azure (Azure CDN).

## <a name="standard-rules-engine"></a>Стандартный обработчик правил

Стандартный обработчик правил Azure CDN позволяет настраивать процесс обработки HTTP-запросов. Например, обработчик правил можно использовать для принудительного использования определенных протоколов доставки содержимого, для определения политики кэширования или изменения заголовка HTTP. В этой статье показано, как создать правило, которое автоматически перенаправляет пользователей по протоколу HTTPS. 

> [!NOTE]
> Обработчик правил, описанный в этой статье, доступен только для стандартной сети доставки содержимого Microsoft Azure. 

## <a name="redirect-users-to-https"></a>Перенаправление пользователей по протоколу HTTPS

1. В профилях Майкрософт перейдите к сети доставки содержимого Microsoft Azure.

1. На странице **Профиль CDN** выберите конечную точку, которую требуется изменить.
  
1. Выберите вкладку **Обработчик правил**.
   
    Откроется панель **Обработчик правил**, на которой отображается список доступных глобальных правил. 
   
    [![Страница нового правила Azure CDN](./media/cdn-standard-rules-engine/cdn-new-rule.png)](./media/cdn-standard-rules-engine/cdn-new-rule.png#lightbox)
   
   > [!IMPORTANT]
   > Порядок, в котором указаны правила, влияет на способ их обработки. Действия, указанные в правиле, могут быть перезаписаны последующим правилом.
   >

1. Выберите **Добавить правило** и введите имя правила. Имена правил должны начинаться с буквы и могут содержать только буквы и цифры.

1. Чтобы определить тип запросов, к которым применяется правило, создайте условие соответствия.
    1. Выберите **Добавить условие**, а затем выберите условие соответствия **Протокол запроса**.
    1. Для параметра **Оператор** выберите **Равно**.
    1. Для параметра **Значение** выберите **HTTP**.
   
   [![Условие соответствия правила Azure CDN](./media/cdn-standard-rules-engine/cdn-match-condition.png)](./media/cdn-standard-rules-engine/cdn-match-condition.png#lightbox)
   
   > [!NOTE]
   > В раскрывающемся списке **Добавить условие** можно выбрать несколько условий соответствия. Подробный список условий соответствия см. в статье [Условия соответствия в стандартном обработчике правил](cdn-standard-rules-engine-match-conditions.md).
   
1. Выберите действие для применения к запросам, которые удовлетворяют условию соответствия:
   1. Выберите **Добавить действие**, а затем выберите **Перенаправление URL-адресов**.
   1. В поле **Тип** выберите значение **Найдено (302)** .
   1. Для параметра **Protocol** (Протокол) выберите **HTTPS**.
   1. Оставьте все остальные поля пустыми, чтобы использовать входящие значения.
   
   [![Действие правила Azure CDN](./media/cdn-standard-rules-engine/cdn-action.png)](./media/cdn-standard-rules-engine/cdn-action.png#lightbox)
   
   > [!NOTE]
   > В раскрывающемся списке **Добавить действие** можно выбрать несколько действий. Подробный список действий см. в разделе [Действия в стандартном обработчике правил](cdn-standard-rules-engine-actions.md).

6. Нажмите **Сохранить**, чтобы сохранить новое правило. Теперь правило доступно для использования.
   
   > [!IMPORTANT]
   > Распространение изменений в правиле по сети Azure CDN может занять до 15 минут.
   >
   

## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о сети доставки содержимого Azure](cdn-overview.md)
- [Справочник по стандартному обработчику правил](cdn-standard-rules-engine-reference.md)
- [Условия соответствия в стандартном обработчике правил](cdn-standard-rules-engine-match-conditions.md)
- [Действия в стандартном обработчике правил](cdn-standard-rules-engine-actions.md)
