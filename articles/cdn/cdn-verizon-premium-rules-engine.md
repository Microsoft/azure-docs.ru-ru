---
title: Переопределение режима HTTP с помощью Azure CDN — обработчик правил Verizon Premium
description: Обработчик правил помогает настраивать способ обработки HTTP-запросов в Azure CDN от Verizon Premium, включая блокировку доставки определенных типов содержимого, определение политики кэширования и изменение заголовков HTTP.
services: cdn
author: asudbring
ms.service: azure-cdn
ms.topic: how-to
ms.date: 05/31/2019
ms.author: allensu
ms.openlocfilehash: a49912bc2275e478d657f06587c4ddc830210d3a
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "87040210"
---
# <a name="override-http-behavior-using-the-azure-cdn-from-verizon-premium-rules-engine"></a>Переопределение режима HTTP с помощью правил Azure CDN от Verizon Premium

[!INCLUDE [cdn-premium-feature](../../includes/cdn-premium-feature.md)]

## <a name="overview"></a>Обзор

Обработчик правил Azure CDN позволяет настраивать процесс обработки запросов HTTP. Например, можно блокировать доставку определенных типов содержимого, определять политику кэширования и изменять заголовок HTTP. В этом руководстве описано, как создать правило, которое изменяет схему кэширования ресурсов CDN. Дополнительные сведения о синтаксисе обработчика правил см. в разделе [Обработчик правил Azure CDN](cdn-verizon-premium-rules-engine-reference.md).

## <a name="access"></a>Доступ

Чтобы получить доступ к обработчику правил, сначала необходимо получить доступ к странице управление Azure CDN. Это можно сделать, выбрав **Управление** в верхней части страницы **профиля CDN**. В зависимости от того, была ли конечная точка оптимизирована для динамического ускорения сайтов (DSA), вы получаете доступ к обработчику правил с набором правил, подходящих для вашего типа конечной точки.

- Конечные точки, оптимизированные для веб-доставки общего характера или другой оптимизации (не DSA):
    
    На вкладке **Большой HTTP-объект** выберите **Обработчик правил**.

    ![Обработчик правил для HTTP](./media/cdn-rules-engine/cdn-http-rules-engine.png)

- Конечные точки, оптимизированные для DSA:
    
    На вкладке **ADN** выберите **Обработчик правил**.
    
    Термин ADN используется Verizon для задания содержимого DSA. Все правила, которые созданы здесь и не оптимизированы для DSA, будут игнорироваться конечными точками в профиле.

    ![Обработчик правил для DSA](./media/cdn-rules-engine/cdn-dsa-rules-engine.png)

## <a name="tutorial"></a>Учебник

1. На странице **профиля CDN** выберите **Управление**.
   
    ![Кнопка "Управление" для профиля CDN](./media/cdn-rules-engine/cdn-manage-btn.png)
   
    Откроется портал управления CDN.

2. На вкладке **Большой HTTP-объект** выберите **Обработчик правил**.
   
    После этого на экране появятся параметры для нового правила.
   
    ![Параметры нового правила CDN](./media/cdn-rules-engine/cdn-new-rule.png)
   
   > [!IMPORTANT]
   > Порядок перечисления правил влияет на способ их обработки. Последующее правило может переопределить действия, заданные предыдущим правилом. Например, если имеется правило, разрешающее доступ к ресурсу на основе свойства запроса и правила, запрещающего доступ ко всем запросам, второе правило переопределяет первое из них. Правила будут переопределять предыдущие правила только в том случае, если они взаимодействуют с одними и теми же свойствами.
   >

3. В поле **Имя и описание** введите имя.

4. Укажите тип запросов, к которым применяется правило. Используйте условие соответствия по умолчанию — **Всегда**.
   
   ![Условие соответствия правила CDN](./media/cdn-rules-engine/cdn-request-type.png)
   
   > [!NOTE]
   > В раскрывающемся списке доступны несколько условий соответствия. Дополнительную информацию о выбранных условиях соответствия можно узнать, выбрав синий информационный значок слева.
   >
   >  Подробный список условных выражений см. в статье [Условные выражения обработчика правил](cdn-verizon-premium-rules-engine-reference-match-conditions.md).
   >  
   > Подробный список условий соответствия см. в статье [Условия соответствия обработчика правил](cdn-verizon-premium-rules-engine-reference-match-conditions.md).
   >
   >

5. Чтобы добавить новую функцию, нажмите кнопку **+** рядом с пунктом **Функции**.  В раскрывающемся списке в левой части выберите **Принудительно извлечь внутренний максимальный возраст**.  В появившемся текстовом поле введите **300**. Не изменяйте остальные значения по умолчанию.
   
   ![Функция правила CDN](./media/cdn-rules-engine/cdn-new-feature.png)
   
   > [!NOTE]
   > Несколько функций доступны в раскрывающемся списке. Дополнительную информацию о выбранных функциях можно узнать, выбрав синий информационный значок слева.
   >
   > Для пункта **Принудительное использование внутреннего максимального срока** заголовки `Cache-Control` и `Expires` актива переопределяются для управления, когда граничный узел CDN обновляет актив из источника. В этом примере граничный узел CDN кэширует ресурс на 300 секунд или 5 минут, прежде чем обновить его из источника.
   >
   > Полный список доступных функций см. в статье [Функции обработчика правил Azure CDN](cdn-verizon-premium-rules-engine-reference-features.md).
   >
   >

6. Чтобы сохранить новое правило, нажмите кнопку **Добавить**.  Теперь новое правило ожидает утверждения. После утверждения состояние правила изменится с **Pending XML** (XML в ожидании) на **Active XML** (Активный XML).
   
   > [!IMPORTANT]
   > Распространение изменений правил по сети Azure CDN может занять до 10 минут.
   >
   >

## <a name="see-also"></a>См. также раздел

- [Общие сведения о сети доставки содержимого Azure](cdn-overview.md)
- [Справочник по обработчику правил](cdn-verizon-premium-rules-engine-reference.md)
- [Условия соответствия для обработчика правил](cdn-verizon-premium-rules-engine-reference-match-conditions.md)
- [Условные выражения обработчика правил](cdn-verizon-premium-rules-engine-reference-conditional-expressions.md)
- [Возможности обработчика правил](cdn-verizon-premium-rules-engine-reference-features.md)
- [Пятничный видеоролик об Azure. Azure CDN's powerful new Premium Features](https://azure.microsoft.com/documentation/videos/azure-cdns-powerful-new-premium-features/) (Новые возможности Azure CDN уровня "Премиум")