---
title: Общие сведения о выставлении счетов в Azure CDN | Документация Майкрософт
description: Сведения о структуре выставления счетов за содержимое, размещенное в сети доставки содержимого Azure, включая регионы выставления счетов, расходы на доставку и управление затратами.
services: cdn
documentationcenter: ''
author: asudbring
manager: danielgi
editor: ''
ms.assetid: ''
ms.service: azure-cdn
ms.workload: media
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: article
ms.date: 09/13/2019
ms.author: allensu
ms.openlocfilehash: aa2f00a732a3978524fc017481285859c9535387
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96018687"
---
# <a name="understanding-azure-cdn-billing"></a>Общие сведения о выставлении счетов в Azure CDN

В этих вопросах и ответах описывается структура выставления счетов за содержимое, размещенное в сети доставки содержимого Azure (CDN).

## <a name="what-is-a-billing-region"></a>Что такое регион выставления счетов?
Регион выставления счетов представляет собой географическую область, используемую для определения тарифов за доставку объектов из Azure CDN. Текущие зоны выставления счетов и их регионы:

- Зона 1: Северная Америка, Европа, Ближний Восток и Африка.

- Зона 2: Азиатско-Тихоокеанский регион (включая Японию).

- Зона 3: Южная Америка.

- Зона 4: Австралия и Новая Зеландия.

- Зона 5: Индия.

Сведения о регионах точки подключения (POP) см. в статье [Расположения POP для сети CDN в Azure по регионам](./cdn-pop-locations.md). Например, точка подключения, расположенная в Мексике, находится в регионе "Северная Америка" и, следовательно, включена в зону 1. 

Сведения о ценах на Azure CDN см. в [этой статье](https://azure.microsoft.com/pricing/details/cdn/).

## <a name="how-are-delivery-charges-calculated-by-region"></a>Как рассчитываются цены за доставку по регионам?
Регион выставления счетов Azure CDN основан на расположении исходного сервера, доставляющего содержимое конечному пользователю. Назначение (физическое расположение) клиента не является регионом выставления счетов.

Например, если пользователь, находящийся в Мексике, делает запрос и этот запрос обслуживается сервером, расположенным в точке подключения "Северная Америка", по причине условий пиринга или трафика, регионом выставления счетов будет считаться Северная Америка.

## <a name="what-is-a-billable-azure-cdn-transaction"></a>Что такое транзакция Azure CDN, подлежащая оплате?
Любой запрос HTTP(S), который завершается в CDN, является оплачиваемым событием, которое включает в себя все типы ответов: успех, сбой или другое. Однако разные ответы могут создавать разный объем трафика. Например, *304 — Объект не изменялся* и другие ответы только с заголовками создают небольшой объем трафика, так как они являются ответами с небольшими заголовками. Аналогичным образом оплачиваются ответы об ошибках (например, *404 — Не найдено*), но за них взимается небольшая плата по причине небольшого количества полезных данных ответа.

## <a name="what-other-azure-costs-are-associated-with-azure-cdn-use"></a>Какие еще затраты Azure связаны с использованием Azure CDN?
При использовании Azure CDN также взимается плата за службы, выполняющие роль источника для объектов. Эти затраты, как правило, составляют небольшую часть общей стоимости использования CDN.

Использование хранилища BLOB-объектов Azure в качестве источника для содержимого повлечет за собой следующие расходы за заполнение кэша:

- Фактическое количество используемых ГБ: фактическое хранение исходных объектов.

- Транзакции: при необходимости осуществляются для заполнения кэша.

- Передача в ГБ: количество передаваемых данных для заполнения кэша CDN.

> [!NOTE]
> Начиная с 2019 октября, если вы используете Azure CDN от Майкрософт, затраты на перенос данных из источников, размещенных в Azure в CDN, не взимается. Azure CDN от Verizon и Azure CDN из Akamai подчиняются указанным ниже тарифам.

Дополнительную информацию о выставлении счетов на службу хранилища см. в записи блога [Understanding Windows Azure Storage Billing – Bandwidth, Transactions, and Capacity](https://blogs.msdn.microsoft.com/windowsazurestorage/2010/07/08/understanding-windows-azure-storage-billing-bandwidth-transactions-and-capacity/) (Общие сведения о выставлении счетов за использование службы хранилища Azure Windows — пропускная способность, транзакции и емкость).

Если вы используете *доставку размещенной службы*, плата будет взиматься следующим образом.

- Время вычислений Azure: экземпляры вычислений, выполняющие роль источника.

- Передача вычислений Azure: передача данных из экземпляров вычислений для заполнения кэшей Azure CDN.

Если клиент использует запросы диапазона байтов (независимо от исходной службы), действительны следующие условия.

- *Запрос диапазона байтов* в CDN является оплачиваемой транзакцией. Такой запрос создается для подмножества (диапазон) объекта. В ответ CDN отправляет лишь часть запрашиваемого содержимого. За такой неполный ответ взимается плата, а объем передачи ограничен размером диапазона ответа (плюс заголовки).

- Если запрашивается только часть объекта (путем указания заголовка диапазона байтов), CDN может загрузить в свой кэш весь объект. В результате, несмотря на то что оплачиваемая транзакция из CDN выполняется для частичного ответа, оплачиваемая транзакция из источника может включать полный размер объекта.

## <a name="how-much-transfer-activity-occurs-to-support-the-cache"></a>Сколько транзакций выполняется для поддержки кэша?
Каждый раз, когда точка подключения CDN должна заполнять кэш, она отправляет запрос в источник для кэшируемого объекта. В результате при каждом промахе в кэше источник выполняет транзакцию, за которую взимается плата. Количество промахов в кэше зависит от ряда факторов.

- Метод кэширования содержимого. Если содержимое имеет высокие значения TTL (срок жизни) или срока действия и часто используется, тогда CDN обрабатывает подавляющую часть нагрузки. Обычно коэффициент попаданий в кэш составляет более 90 %, а это означает, что менее 10 % клиентских запросов должны возвращаться к источнику при промахах в кэше или при обновлении объекта.

- Количество узлов, которым необходимо загрузить объект. Каждый раз, когда узел загружает объект из источника, он выполняет транзакцию, подлежащую оплате. В результате использование более глобального содержимого, к которому имеет доступ большое количество узлов, приводит к увеличению количества оплачиваемых транзакций.

- Влияние TTL. Чем длиннее срок жизни объекта, тем реже нужно извлекать его из источника. Это также означает, что такие клиенты, как браузеры, могут кэшировать объект дольше, что может уменьшить число транзакций в CDN.

## <a name="which-origin-services-are-eligible-for-free-data-transfer-with-azure-cdn-from-microsoft"></a>Какие службы источника имеют право на бесплатную пересылку данных с Azure CDN от Майкрософт? 
Если вы используете одну из следующих служб Azure в качестве источника CDN, вы не будете получать оплату за перенос данных из источника в POP CDN. 

- Хранилище Azure
- Службы мультимедиа Azure
- Виртуальные машины Azure
- Виртуальная сеть
- Load Balancer
- Шлюз приложений
- Azure DNS
- ExpressRoute
- VPN-шлюз
- Диспетчер трафика
- Наблюдатель за сетями
- Брандмауэр Azure
- Azure Front Door Service
- Бастион Azure
- Служба приложений Azure.
- Функции Azure
- Фабрика данных Azure
- Служба "Управление API Azure"
- Пакетная служба Azure 
- Обозреватель данных Azure
- HDInsight
- Azure Cosmos DB
- Хранилище озера данных Azure
- Машинное обучение Azure 
- База данных SQL Azure
- Управляемый экземпляр SQL Azure
- Кэш Azure для Redis

## <a name="how-do-i-manage-my-costs-most-effectively"></a>Как эффективней управлять расходами?
Установите самый длинный срок жизни для своего содержимого.