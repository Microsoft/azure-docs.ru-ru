---
title: Подключение корневого или вершине домена к существующей конечной точке Azure CDN — портал Azure
description: Узнайте, как подключить корневой или вершине-домен к существующей конечной точке Azure CDN с помощью портал Azure.
services: cdn
author: asudbring
ms.service: azure-cdn
ms.topic: how-to
ms.date: 11/07/2020
ms.author: allensu
ms.openlocfilehash: 8ab4f698c7149d8d57f790e221ccbe35ec090fe6
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "94370511"
---
# <a name="onboard-a-root-or-apex-domain-to-an-existing-azure-cdn-endpoint"></a>Подключение корневого или вершине домена к существующей конечной точке Azure CDN

Azure CDN использует записи CNAME для проверки владения доменом для адаптации пользовательских доменов. CDN не предоставляет интерфейсный IP-адрес, связанный с профилем CDN. Вы не можете сопоставлять домен вершине с IP-адресом, если ваша цель заключается в адаптации его к Azure CDN.

Протокол DNS предотвращает назначение записей CNAME на вершине зоны. Например, если ваш домен имеет значение, `contoso.com` можно создать записи CNAME для `somelabel.contoso.com` , но нельзя создать CNAME для `contoso.com` себя. Это ограничение представляет собой проблему для владельцев приложений, имеющих приложения с балансировкой нагрузки, Azure CDN. Поскольку для использования профиля CDN требуется создание записи CNAME, невозможно указать профиль CDN из зоны вершине.

Эту проблему можно устранить с помощью записей псевдонимов в Azure DNS. В отличие от записей CNAME, записи псевдонимов создаются в зоне вершине. Владельцы приложений могут использовать его для указания записи вершине зоны в профиль CDN с общедоступными конечными точками. Владельцы приложений указывают на тот же профиль CDN, который используется для любого другого домена в своей зоне DNS. Например, `contoso.com` и `www.contoso.com` может указывать на один и тот же профиль CDN. 

Для сопоставления вашего вершине или корневого домена с профилем CDN требуется сведение CNAME или отслеживание DNS. Механизм, в котором поставщик DNS рекурсивно разрешает запись CNAME, пока не достигнет IP-адреса. Эта функция поддерживается Azure DNS для конечных точек CDN. 

> [!NOTE]
> Существуют и другие поставщики DNS, поддерживающие сведение CNAME или отслеживание DNS, однако Azure CDN рекомендует использовать Azure DNS для своих клиентов для размещения своих доменов.

Вы можете использовать портал Azure для подключения домена вершине в сети CDN и включения протокола HTTPS, связав его с сертификатом для завершения TLS. Домены вершине также называются корневыми или доменными доменами с атрибутом naked.

## <a name="create-an-alias-record-for-zone-apex"></a>Создание записи псевдонима для зоны вершине

1. Откройте конфигурацию **Azure DNS** для домена, который необходимо подключить.

2. Выберите **+ Набор записей**.

3. В поле **Добавить набор записей** введите или выберите следующие сведения.

    | Параметр | Значение |
    | ------- | ------|
    | Имя | Введите **@** . |
    | Type | Выберите **.** |
    | Набор записей псевдонима | Выберите ответ **Да**. |
    | Тип псевдонима | Выберите **Ресурс Azure**. |
    | Выберите подписку. | Выберите свою подписку. |
    | Ресурс Azure | Выберите конечную точку CDN. |

4. Введите значение **TTL**.

5. Нажмите кнопку **ОК** , чтобы отправить изменения.

    :::image type="content" source="./media/onboard-apex-domain/cdn-apex-alias-record.png" alt-text="Запись псевдонима для вершине зоны":::

6. На приведенном выше шаге будет создана запись зоны вершине, указывающая на ресурс CDN. **Cdnverify** СОПОСТАВЛЕНИЯ записей CNAME используется для подключения домена в профиле CDN.
    1. Например, **cdnverify.contoso.com**.
    

## <a name="onboard-the-custom-domain-on-your-cdn"></a>Подключение пользовательского домена в CDN

После регистрации личного домена его можно добавить в конечную точку CDN. 

1. Войдите на [портал Azure](https://portal.azure.com/) и перейдите в профиль CDN, содержащий конечную точку, которую нужно сопоставить с личным доменом.
    
2. На странице **профиля CDN** выберите конечную точку CDN, чтобы связать ее с личным доменом.

    :::image type="content" source="media/onboard-apex-domain/cdn-endpoint-selection.png" alt-text="Выбор конечной точки CDN" border="true":::
    
3. Выберите **+ Личный домен**. 

   :::image type="content" source="media/onboard-apex-domain/cdn-custom-domain-button.png" alt-text="Кнопка добавления личного домена" border="true":::

4. В разделе **Добавить личный домен** значение для параметра **Имя узла конечной точки** заполняется автоматически и выводится из URL-адреса конечной точки CDN: **\<endpoint-hostname>** .azureedge.net. Их невозможно изменить.

5. В поле **пользовательское имя узла** введите пользовательский корневой или вершине домен, чтобы использовать его в качестве исходного домена записи CNAME. 
    1. Например, **contoso.com**. **Не используйте имя поддомена cdnverify**.

    :::image type="content" source="media/onboard-apex-domain/cdn-add-custom-domain.png" alt-text="Добавление личного домена" border="true":::

6. Выберите **Добавить**.

   Azure проверит наличие записи CNAME для введенного имени личного домена. Если запись CNAME правильна, пользовательский домен пройдет проверку. 

   Для применения новых параметров личного домена на всех граничных узлах CDN может потребоваться некоторое время: 
    - Для профилей **Azure CDN категории "Стандартный" от Майкрософт** распространение обычно выполняется в течение 10 минут. 
    - Для профилей **Azure CDN уровня "Стандартный" от Akamai** распространение обычно завершается в течение одной минуты. 
    - Для профилей **Azure CDN уровня "Стандартный" от Verizon** и **Azure CDN уровня "Премиум" от Verizon** распространение обычно выполняется в течение 10 минут.   

## <a name="enable-https-on-your-custom-domain"></a>Включение протокола HTTPS в пользовательском домене

Дополнительные сведения о включении протокола HTTPS в пользовательском домене для Azure CDN см. в разделе [учебник. Настройка HTTPS в пользовательском домене Azure CDN](cdn-custom-ssl.md)

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте, как [создать конечную точку CDN](cdn-create-new-endpoint.md).
