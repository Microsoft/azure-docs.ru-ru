---
title: Руководство. Настройка правил кэширования Azure CDN | Документация Майкрософт
description: В этом руководстве вы настроите глобальные и пользовательские правила кэширования Azure CDN.
services: cdn
documentationcenter: ''
author: asudbring
manager: danielgi
editor: ''
ms.service: azure-cdn
ms.workload: tbd
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: tutorial
ms.date: 04/20/2018
ms.author: allensu
ms.custom: mvc
ms.openlocfilehash: ae217352b83617600fd983a747d578f8f28e7ddd
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: HT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "92779243"
---
# <a name="tutorial-set-azure-cdn-caching-rules"></a>Руководство по Настройка правил кэширования Azure CDN

> [!NOTE] 
> Правила кэширования доступны только для профилей **Azure CDN уровня "Стандартный" от Verizon** и **Azure CDN уровня "Стандартный" от Akamai**. Для профилей **Azure CDN от корпорации Майкрософт** необходимо использовать [стандартный обработчик правил](cdn-standard-rules-engine-reference.md). Для профилей **Azure CDN (цен. категории "Премиум") от Verizon** необходимо использовать [обработчик правил Verizon (цен. категории "Премиум")](./cdn-verizon-premium-rules-engine.md) на **портале управления** для аналогичных функций.
 

В этом руководстве описывается, как использовать правила кэширования сети доставки содержимого Azure (CDN) или изменять истечение срока действия кэша по умолчанию как глобально, так и с настраиваемыми условиями (например, URL-путь и расширения файла). Azure CDN предоставляет два типа правил кэширования.
- Глобальные правила кэширования: вы можете задать в своем профиле одно глобальное правило кэширования для каждой конечной точки, которое влияет на все запросы к конечной точке. Глобальное правило кэширования переопределяет все заголовки директив кэша HTTP (если они заданы).

- Настраиваемые правила кэширования: вы можете задать одно или несколько настраиваемых правил кэширования для каждой конечной точки в профиле. Настраиваемые правила кэширования соответствуют конкретным путям и расширениям файлов, обрабатываются по порядку и переопределяют глобальное правило кэширования (если оно задано). 

В этом руководстве описано следующее:
> [!div class="checklist"]
> - Открыть страницу правил кэширования.
> - Создать глобальное правило кэширования.
> - Создать настраиваемое правило кэширования.

[!INCLUDE [quickstarts-free-trial-note](../../includes/quickstarts-free-trial-note.md)]

## <a name="prerequisites"></a>Предварительные требования

Прежде чем перейти к выполнению шагов в этом руководстве, сначала создайте профиль и как минимум одну конечную точку CDN. Дополнительные сведения см. в [кратком руководстве по созданию профиля и конечной точки Azure CDN](cdn-create-new-endpoint.md).

## <a name="open-the-azure-cdn-caching-rules-page"></a>Открытие страницы правил кэширования Azure CDN

1. На [портале Azure](https://portal.azure.com) выберите профиль CDN, а затем конечную точку.

2. В области слева в разделе "Параметры" выберите **Правила кэширования**.

   ![Кнопка "Правила кэширования" CDN](./media/cdn-caching-rules/cdn-caching-rules-btn.png)

   Появится страница **Правила кэширования**.

   ![Страница правил кэширования CDN](./media/cdn-caching-rules/cdn-caching-rules-page.png)


## <a name="set-global-caching-rules"></a>Установка глобальных правил кэширования

Создайте глобальное правило кэширования следующим образом:

1. В разделе **Глобальные правила кэширования** задайте для параметра **Режим кэширования строк запросов** значение **Пропускать строки запросов**.

2. Задайте для параметра **Поведение кэширования** значение **Установить, если отсутствует**.
       
3. Для параметра **Срок действия кэша** введите значение 10 в поле **Days** (Дни).

    Глобальное правило кэширования влияет на все запросы к конечной точке. Это правило учитывает исходные заголовки директив кэша, если они имеются (`Cache-Control` или `Expires`). В противном случае, если они не указаны, задается кэш на 10 дней. 

    ![Глобальные правила кэширования](./media/cdn-caching-rules/cdn-global-caching-rules.png)

## <a name="set-custom-caching-rules"></a>Установка настраиваемых правил кэширования

Создайте настраиваемое правило кэширования следующим образом.

1. В разделе **Настраиваемые правила кэширования** задайте для параметра **Условие соответствия** значение **Путь**, а для параметра **Значение соответствия** — значение `/images/*.jpg`.
    
2. Задайте для параметра **Поведение кэширования** значение **Override** (Переопределить) и введите 30 в поле **Days** (Дни).
       
    Это правило кэширования задает для длительности кэширования значение "30 дней" для всех файлов изображений (`.jpg`) в папке конечной точки `/images`. Оно переопределяет все заголовки HTTP `Cache-Control` или `Expires`, отправленные с сервера-источника.

    ![Настраиваемые правила кэширования](./media/cdn-caching-rules/cdn-custom-caching-rules.png)

    
## <a name="clean-up-resources"></a>Очистка ресурсов

На предыдущих шагах вы создали правила кэширования. Если они вам больше не нужны, их можно удалить, сделав следующее:
 
1. Выберите профиль CDN, а затем щелкните конечную точку с правилами кэширования, которые нужно удалить.

2. В области слева в разделе "Параметры" выберите **Правила кэширования**.

3. В разделе **Глобальные правила кэширования** задайте для параметра **Поведение кэширования** значение **Не задано**.
 
4. В разделе **Настраиваемые правила кэширования** установите флажок рядом с правилом, которое требуется удалить.

5. Выберите команду **Удалить**.

6. В верхней части страницы выберите **Сохранить**.


## <a name="next-steps"></a>Дальнейшие действия

В этом руководстве вы узнали, как выполнять следующие задачи:

> [!div class="checklist"]
> - Открыть страницу правил кэширования.
> - Создать глобальное правило кэширования.
> - Создать настраиваемое правило кэширования.

Перейти к следующей статье, чтобы научиться настраивать дополнительные параметры правил кэширования.

> [!div class="nextstepaction"]
> [Управление режимом кэширования Azure CDN с помощью правил кэширования](cdn-caching-rules.md)