---
title: Действия в обработчике стандартных правил для Azure CDN | Документация Майкрософт
description: Справочная документация по действиям в обработчике стандартных правил для сети доставки содержимого Azure (Azure CDN).
services: cdn
author: asudbring
ms.service: azure-cdn
ms.topic: article
ms.date: 08/04/2020
ms.author: allensu
ms.openlocfilehash: 051737a9f5e0d4092cda26a3f7ce3df1d7f535ef
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "87760130"
---
# <a name="actions-in-the-standard-rules-engine-for-azure-cdn"></a>Действия в обработчике стандартных правил для Azure CDN

В [обработчике стандартных правил](cdn-standard-rules-engine.md) для сети доставки содержимого Azure (Azure CDN) правило состоит из одного или нескольких условий соответствия и действия. В этой статье содержатся подробные описания действий, которые можно использовать в обработчике стандартных правил для Azure CDN.

Вторая часть правила — это действие. Действие определяет поведение, применяемое к типу запроса, который соответствует одному или нескольким условиям соответствия.

## <a name="actions"></a>Действия

Следующие действия можно использовать в обработчике стандартных правил для Azure CDN. 

### <a name="cache-expiration"></a>Срок действия кэша

Используйте это действие, чтобы перезаписать значение срока жизни (TTL) конечной точки для запросов, для которых указаны условия соответствия правил.

#### <a name="required-fields"></a>Обязательные поля

Поведение кэша |  Описание              
---------------|----------------
Обход кэша | Если выбран этот параметр и правило соответствует, содержимое не кэшируется.
Переопределение | Если выбран этот параметр и правило соответствует, то значение TTL, возвращенное из источника, перезаписывается значением, указанным в действии. Это поведение будет применено только в том случае, если ответ доступен для кэширования. Для заголовка ответа управления Cache-Control со значениями "без кэша", "Private" и "No-Store" действие будет неприменимо.
Задать, если отсутствует | Если выбран этот параметр и правило соответствует, если из источника не было возвращено значение TTL, правило устанавливает TTL в значение, указанное в действии. Это поведение будет применено только в том случае, если ответ доступен для кэширования. Для заголовка ответа управления Cache-Control со значениями "без кэша", "Private" и "No-Store" действие будет неприменимо.

#### <a name="additional-fields"></a>Дополнительные поля

Дни | Часы | Минуты | Секунды
-----|-------|---------|--------
Int | Int | Int | Int 

### <a name="cache-key-query-string"></a>Строка запроса ключа кэша

Это действие используется для изменения ключа кэша на основе строк запроса.

#### <a name="required-fields"></a>Обязательные поля

Поведение | Описание
---------|------------
Включение | Если выбран этот параметр и правило соответствует, строки запроса, указанные в параметрах, включаются при создании ключа кэша. 
Кэшировать каждый уникальный URL-адрес. | Если выбран этот параметр и правило соответствует, то каждый уникальный URL-адрес имеет свой собственный ключ кэша. 
Исключить | Если выбран этот параметр и правило соответствует, строки запроса, указанные в параметрах, исключаются при создании ключа кэша.
Пропускать строки запросов. | Если выбран этот параметр и правило соответствует, строки запроса не учитываются при создании ключа кэша. 

### <a name="modify-request-header"></a>Изменение заголовка запроса

Это действие используется для изменения заголовков, которые включены в полученные вашим источником запросы.

#### <a name="required-fields"></a>Обязательные поля

Действие | Имя заголовка HTTP | Значение
-------|------------------|------
Append | Если выбран этот параметр и запрос соответствует правилу, в запрос добавляется заголовок, указанный в поле **Имя заголовка**, с заданным значением. Если такой заголовок уже существует, новое значение добавляется к существующему. | Строка
Overwrite | Если выбран этот параметр и запрос соответствует правилу, в запрос добавляется заголовок, указанный в поле **Имя заголовка**, с заданным значением. Если такой заголовок уже существует, новое значение переопределяет существующее. | Строка
DELETE | Если выбран этот параметр, запрос соответствует правилу и в запросе присутствует указанный в правиле заголовок, этот заголовок удаляется из запроса. | Строка

### <a name="modify-response-header"></a>Изменение заголовка ответа

Это действие используется для изменения заголовков, которые включены в возвращаемые клиентам ответы.

#### <a name="required-fields"></a>Обязательные поля

Действие | Имя заголовка HTTP | Значение
-------|------------------|------
Append | Если выбран этот параметр и запрос соответствует правилу, в ответ добавляется заголовок, указанный в поле **Имя заголовка**, с заданным **значением**. Если такой заголовок уже существует, новое **значение** добавляется к существующему. | Строка
Overwrite | Если выбран этот параметр и запрос соответствует правилу, в ответ добавляется заголовок, указанный в поле **Имя заголовка**, с заданным **значением**. Если такой заголовок уже существует, новое **значение** переопределяет существующее. | Строка
DELETE | Если выбран этот параметр, запрос соответствует правилу и в запросе присутствует указанный в правиле заголовок, этот заголовок удаляется из ответа. | Строка

### <a name="url-redirect"></a>Перенаправление URL-адреса

Используйте это действие для перенаправления клиентов на новый URL-адрес. 

#### <a name="required-fields"></a>Обязательные поля

Поле | Описание 
------|------------
Type | Выберите тип ответа, который будет возвращаться запрашивающему: "Найдено (302)", "Перемещено (301)", "Временное перенаправление (307)" или "Постоянное перенаправление (308)".
Протокол | Сопоставляется с запросом, HTTP, HTTPS.
Hostname (Имя узла) | Выберите имя узла, на который будет перенаправлен запрос. Оставьте поле пустым, чтобы сохранить входящий узел.
Путь | Определите путь для использования при перенаправлении. Оставьте поле пустым, чтобы сохранить входящий путь.  
Строка запроса | Определите строку запроса для использования при перенаправлении. Оставьте поле пустым, чтобы сохранить входящую строку запроса. 
Fragment | Определите фрагмент для использования при перенаправлении. Оставьте поле пустым, чтобы сохранить входящий фрагмент. 

Настоятельно рекомендуется использовать абсолютный URL-адрес. При использовании относительного URL-адреса можно перенаправить Azure CDN URL-адреса на недопустимый путь. 

### <a name="url-rewrite"></a>Переопределение URL-адреса

Используйте это действие, чтобы перезаписать путь в запросе, который поступает на ваш источник.

#### <a name="required-fields"></a>Обязательные поля

Поле | Описание 
------|------------
Исходный шаблон | Определите исходный шаблон в URL-пути для замены. В настоящее время исходный шаблон использует сопоставление на основе префикса. Чтобы сопоставить все URL-пути, используйте косую черту ( **/** ) в качестве исходного значения шаблона.
Назначение | Определите целевой путь, который будет использоваться в перезаписи. Целевой путь перезаписывает исходный шаблон.
Сохранить непарный путь | Если задано значение **Да**, оставшийся путь после исходного шаблона добавляется к новому целевому пути. 

## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о сети доставки содержимого Azure](cdn-overview.md)
- [Справочник по стандартному обработчику правил](cdn-standard-rules-engine-reference.md)
- [Условия соответствия в стандартном обработчике правил](cdn-standard-rules-engine-match-conditions.md)
- [Принудительное применение HTTPS с помощью стандартного обработчика правил](cdn-standard-rules-engine.md)
