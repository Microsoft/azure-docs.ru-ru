---
title: Использование виртуального рабочего стола Windows с Azure NetApp Files | Документация Майкрософт
description: Содержит рекомендации и примеры чертежей по развертыванию виртуальных рабочих столов Windows с Azure NetApp Files.
services: azure-netapp-files
documentationcenter: ''
author: b-juche
manager: ''
editor: ''
ms.assetid: ''
ms.service: azure-netapp-files
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 08/13/2020
ms.author: b-juche
ms.openlocfilehash: 0cd1f6210fbdb74e3fd511150157dccca3e92dda
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "91932470"
---
# <a name="benefits-of-using-azure-netapp-files-with-windows-virtual-desktop"></a>Преимущества использования Azure NetApp Files с Виртуальным рабочим столом Windows 

В этой статье содержатся рекомендации по развертыванию виртуальных рабочих столов Windows (ВВД) с Azure NetApp Files.

Azure NetApp Files — это высокопроизводительная служба хранилища файлов из Azure. Он может обеспечить до 450 000 операций ввода-вывода в секунду и задержку в миллисекундах, которая может поддерживать очень крупный масштаб развертывания виртуальных рабочих столов Windows. Вы можете настроить пропускную способность и изменить уровень обслуживания Azure NetApp Filesных томов практически мгновенно, не прибегая к приостановке ввода-вывода, сохраняя при этом доступ к плоскости данных. Эта возможность позволяет легко оптимизировать масштаб развертывания ВВД за счет затрат. Кроме того, можно создавать моментальные снимки томов на момент времени, не влияя на производительность тома. Эта возможность позволяет выполнять откат для отдельных [контейнеров профилей пользователей фслогикс](../virtual-desktop/store-fslogix-profile.md) с помощью копирования из `~snapshot` каталога или мгновенно выполнять откат всего тома одновременно с помощью возможности восстановления тома.  При наличии до 255 (ротации) моментальных снимков для защиты тома от потери или повреждения данных администраторы имеют много шансов на отмену выполненных действий.

## <a name="sample-blueprints"></a>Примеры чертежей

В следующих примерах схем демонстрируется интеграция виртуальных рабочих столов Windows с Azure NetApp Files. В сценарии с настольным компьютером пользователи направляются в наиболее доступный узел в [](../virtual-desktop/host-pool-load-balancing.md#breadth-first-load-balancing-method)пуле с использованием [многосеансовых виртуальных машин](../virtual-desktop/windows-10-multisession-faq.md#what-is-windows-10-enterprise-multi-session). С другой стороны, личные настольные компьютеры зарезервированы для сценариев, в которых у каждого пользователя есть собственная виртуальная машина.

### <a name="pooled-desktop-scenario"></a>Сценарий рабочего стола в составе пула

Для сценария с группировкой группа виртуальных рабочих столов Windows [рекомендует](/windows-server/remote/remote-desktop-services/virtual-machine-recs#multi-session-recommendations) для виртуальных ЦП следующие рекомендации по количеству пользователей. Обратите внимание, что в этой рекомендации не указан размер виртуальной машины.

|     Тип рабочей нагрузки     |     Светлая    |     Средний    |     Тяжелый    |
|-----------------------|--------------|---------------|--------------|
|     Пользователей на виртуальных ЦП    |     6        |     4         |     2        |


Эта рекомендация подтверждается с помощью Логинвси теста 500-User, где приблизительно 62 "база знаний/средние пользователи" записывается на каждую D16as_V4 виртуальную машину. 

Например, 62 пользователей на каждую D16as_V4 виртуальную машину, Azure NetApp Files может легко поддерживать 60 000 пользователей на каждую среду. Тестирование для оценки верхнего предела D32as_v4 виртуальной машины. Если ВВД User on виртуальных ЦП содержит значение true для D32as_v4, более 120 000 пользователей будут помещаться в 1 000 виртуальных машин до броачинг [ограничения IP-адресов виртуальной сети 1 000](./azure-netapp-files-network-topologies.md), как показано на следующем рисунке.  

![Сценарий рабочего стола для пула виртуальных рабочих столов Windows](../media/azure-netapp-files/solutions-pooled-desktop-scenario.png)   

### <a name="personal-desktop-scenario"></a>Сценарий персонального рабочего стола 

В сценарии с личным столом на следующем рисунке показана рекомендация по архитектуре общего назначения. Пользователи сопоставляются с конкретными рабочими столами, а каждый модуль — под управлением виртуальных машин 1 000, освобождая место для IP-адресов, распространяемых из виртуальной сети управления. Azure NetApp Files может легко справиться с 900 и личными рабочими столами на виртуальную сеть пула узлов с одним сеансом, фактические число виртуальных машин равно 1 000 минус число узлов управления, найденных в виртуальной сети концентратора. Если требуется больше персональных рабочих столов, можно легко добавить дополнительные модули (пулы узлов и виртуальные сети), как показано на следующем рисунке. 

![Сценарий Windows Virtual Desktop персональный Рабочий стол](../media/azure-netapp-files/solutions-personal-desktop-scenario.png)  

При построении архитектуры на основе POD назначайте пользователям правильный модуль по имени входа, чтобы гарантировать, что пользователи всегда будут находить свои профили пользователей. 

## <a name="next-steps"></a>Дальнейшие действия

- [Архитектура решений, использующих Azure NetApp Files](azure-netapp-files-solution-architectures.md)