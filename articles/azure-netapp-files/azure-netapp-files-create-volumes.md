---
title: Создание тома NFS для Azure NetApp Files | Документация Майкрософт
description: В этой статье показано, как создать том NFS в Azure NetApp Files. Сведения о вопросах, таких как используемая версия, и рекомендации.
services: azure-netapp-files
documentationcenter: ''
author: b-juche
manager: ''
editor: ''
ms.assetid: ''
ms.service: azure-netapp-files
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: how-to
ms.date: 09/24/2020
ms.author: b-juche
ms.openlocfilehash: 2cc9d3e0fb711a0662852ce4f2c5a08dc626f246
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96854739"
---
# <a name="create-an-nfs-volume-for-azure-netapp-files"></a>Создание тома NFS для Azure NetApp Files

Azure NetApp Files поддерживает создание томов с помощью NFS (NFSv3 и Нфсв 4.1), SMB3 или двойного протокола (NFSv3 и SMB). Потребление емкости тома зависит от подготовленной емкости пула. В этой статье показано, как создать том NFS. 

## <a name="before-you-begin"></a>Перед началом 
* Перед началом необходимо настроить пул емкости.  
    См. раздел [Настройка пула емкости](azure-netapp-files-set-up-capacity-pool.md).   
* Подсеть должна быть делегирована службе Azure NetApp Files.  
    См. раздел [Делегирование подсети для Azure NetApp Files](azure-netapp-files-delegate-subnet.md).

## <a name="considerations"></a>Рекомендации 

* Выбор используемой версии NFS  
  NFSv3 может поддерживать широкий спектр вариантов использования и обычно развертывается в большинстве корпоративных приложений. Необходимо проверить, какая версия (NFSv3 или Нфсв 4.1) требуется приложению, и создать том с использованием соответствующей версии. Например, при использовании [Apache активемк](https://activemq.apache.org/shared-file-system-master-slave)рекомендуется блокировать файл с помощью нфсв 4.1 вместо NFSv3. 

* Безопасность  
  Поддержка бит в режиме UNIX (чтение, запись и выполнение) доступна для NFSv3 и Нфсв 4.1. Для подключения томов NFS требуется доступ на корневом уровне к клиенту NFS.

* Поддержка локальных пользователей и групп и LDAP для Нфсв 4.1  
  В настоящее время Нфсв 4.1 поддерживает только корневой доступ к томам. См. раздел [Настройка домена по умолчанию нфсв 4.1 для Azure NetApp Files](azure-netapp-files-configure-nfsv41-domain.md). 

## <a name="best-practice"></a>Рекомендации

* Убедитесь, что вы используете правильные инструкции по подключению для тома.  См. раздел [подключение или отключение тома для виртуальных машин Windows или Linux](azure-netapp-files-mount-unmount-volumes-for-virtual-machines.md).

* Клиент NFS должен находиться в той же или одноранговой виртуальной сети, что и Azure NetApp Files том. Подключение из-за пределов виртуальной сети поддерживается; Однако это приводит к дополнительной задержке и снижению общей производительности.

* Убедитесь, что клиент NFS обновлен и на нем установлены последние обновления для операционной системы.

## <a name="create-an-nfs-volume"></a>Создание тома NFS

1.  В колонке управления пулами емкости щелкните колонку **Тома**. Чтобы создать том щелкните **+ Добавить том**. 

    ![Переход к томам](../media/azure-netapp-files/azure-netapp-files-navigate-to-volumes.png) 

2.  В окне Создание тома нажмите кнопку **создать** и введите сведения для следующих полей на вкладке "основы":   
    * **Имя тома**      
        Укажите имя создаваемого тома.   

        Имя тома должно быть уникальным в пределах каждого пула емкости. Длина имени должна быть не менее трех знаков. Имя может состоять из любых буквенно-цифровых символов.   

        Нельзя использовать `default` или `bin` в качестве имени тома.

    * **Пул емкости**  
        Укажите пул емкости, в котором нужно создать том.

    * **Квота**  
        Укажите объем логического хранилища, выделенный для тома.  

        В поле **Доступная квота** отображается объем неиспользуемого пространства выбранного пула емкости, которое можно использовать для создания нового тома. Размер нового тома не должен превышать доступную квоту.  

    * **Пропускная способность (MiB/с)**   
        Если том создается в пуле ресурсов ручного обслуживания вручную, укажите необходимую пропускную способность для тома.   

        Если том создается в пуле ресурсов автоматического качества обслуживания, в этом поле отображается значение (пропускная способность уровня обслуживания "квота x").   

    * **Виртуальная сеть**  
        Укажите виртуальную сеть Azure, из которой будет осуществляться доступ к тому.  

        В указанной виртуальной сети должна быть подсеть, делегированная службе Azure NetApp Files. Доступ к службе Azure NetApp Files можно получить только из той же виртуальной сети либо из виртуальной сети, которая находится в том же расположении, что и том, через пиринговую связь. Доступ к тому также можно получить из локальной сети через Express Route.   

    * **Подсеть**  
        Укажите подсеть, которую нужно использовать для тома.  
        Указанная подсеть должна быть делегирована службе Azure NetApp Files. 
        
        Если вы не делегировали подсеть, вы можете щелкнуть **Создать** на странице "Создать том". Затем на странице "Создание подсети" укажите сведения о подсети и выберите **Microsoft.NetApp/volumes**, чтобы делегировать подсеть службе Azure NetApp Files. В каждой виртуальной сети можно делегировать только одну подсеть в Azure NetApp Files.   
 
        ![Создание тома](../media/azure-netapp-files/azure-netapp-files-new-volume.png)
    
        ![Создание подсети](../media/azure-netapp-files/azure-netapp-files-create-subnet.png)

    * Если вы хотите применить к тому существующую политику моментальных снимков, щелкните **Показать дополнительные** , чтобы развернуть его, укажите, нужно ли скрыть путь к моментальному снимку, а затем выберите политику моментальных снимков в раскрывающемся меню. 

        Дополнительные сведения о создании политики моментальных снимков см. в разделе [Управление политиками моментальных снимков](azure-netapp-files-manage-snapshots.md#manage-snapshot-policies).

        ![Отобразить расширенный выбор](../media/azure-netapp-files/volume-create-advanced-selection.png)

3. Щелкните **Протокол**, а затем выполните приведенные ниже действия.  
    * Выберите **NFS** в качестве типа протокола тома.   
    * Укажите **путь к файлу** , который будет использоваться для создания пути экспорта для нового тома. Путь экспорта используется для подключения и получения доступа к тому.

        Имя пути к файлу может содержать только буквы, цифры и дефисы. Длина имени находится в диапазоне от 16 до 40 знаков. 

        Путь к файлу должен быть уникальным в пределах каждой подписки и каждого региона. 

    * Выберите версию NFS (**NFSv3** или **NFSv4.1**) для тома.  

    * Если вы используете Нфсв 4.1, укажите, нужно ли включить шифрование **Kerberos** для тома.  

        При использовании Kerberos с Нфсв 4.1 требуются дополнительные конфигурации. Следуйте инструкциям в разделе [Настройка шифрования Kerberos для нфсв 4.1](configure-kerberos-encryption.md).

    * При необходимости [Настройте политику экспорта для тома NFS](azure-netapp-files-configure-export-policy.md).

    ![Указание протокола NFS](../media/azure-netapp-files/azure-netapp-files-protocol-nfs.png)

4. Нажмите **Проверка и создание**, чтобы ознакомиться с сведениями о томе.  Затем нажмите кнопку **создать** , чтобы создать том.

    Созданный том появится на странице "Тома". 
 
    От пула емкости том наследует атрибуты подписки, группы ресурсов и расположения. Состояние развертывания можно отслеживать на вкладке уведомлений.


## <a name="next-steps"></a>Дальнейшие действия  

* [Настройка домена по умолчанию NFSv4.1 для Azure NetApp Files](azure-netapp-files-configure-nfsv41-domain.md)
* [Настройка шифрования Kerberos для NFSv4.1](configure-kerberos-encryption.md)
* [Подключение или отключение тома для виртуальных машин Windows или Linux](azure-netapp-files-mount-unmount-volumes-for-virtual-machines.md)
* [Настройка политики экспорта для тома NFS](azure-netapp-files-configure-export-policy.md)
* [Ограничения ресурсов для службы Azure NetApp Files](azure-netapp-files-resource-limits.md)
* [Узнайте об интеграции виртуальной сети для служб Azure](../virtual-network/virtual-network-for-azure-services.md)