---
title: Что такое средство создания моментальных снимков с единообразным применением приложений Azure для Azure NetApp Files | Документация Майкрософт
description: Содержит вводные сведения о средстве создания моментальных снимков, совместимых с приложениями Azure, которые можно использовать с Azure NetApp Files.
services: azure-netapp-files
documentationcenter: ''
author: Phil-Jensen
manager: ''
editor: ''
ms.assetid: ''
ms.service: azure-netapp-files
ms.workload: storage
ms.tgt_pltfrm: na
ms.devlang: na
ms.topic: conceptual
ms.date: 12/14/2020
ms.author: phjensen
ms.openlocfilehash: 4ba679459686340396e0e4d65344295c0fa9c4be
ms.sourcegitcommit: 42e4f986ccd4090581a059969b74c461b70bcac0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/23/2021
ms.locfileid: "104869962"
---
# <a name="what-is-azure-application-consistent-snapshot-tool-preview"></a>Что такое средство создания моментальных снимков с единообразием приложений Azure (Предварительная версия)

Средство создания моментальных снимков с согласованием приложений Azure (Азакснап) — это программа командной строки, которая обеспечивает защиту данных от сторонних баз данных за счет обработки всего оркестрации, необходимого для перевода их в согласованное состояние приложения перед созданием моментального снимка хранилища, после чего он возвращает их в операционное состояние.

## <a name="supported-platforms-and-os"></a>Поддерживаемые платформы и ОС

- **Базы данных**
  - SAP HANA (Дополнительные сведения см. в [матрице поддержки](azacsnap-get-started.md#snapshot-support-matrix-from-sap) )

- **Операционные системы**
  - SUSE Linux Enterprise Server 12 +
  - Red Hat Enterprise Linux 7+

## <a name="benefits-of-using-azacsnap"></a>Преимущества использования Азакснап

AzAcSnap использует функции моментального снимка тома и репликации в Azure NetApp Files и крупном экземпляре Azure.  Он предоставляет следующие преимущества:

- **Защита данных, учитывающая приложения** Азакснап — это централизованное решение для резервного копирования критически важных файлов базы данных. Он обеспечивает согласованность базы данных перед выполнением моментального снимка тома хранилища. В результате это гарантирует, что моментальный снимок тома хранилища можно будет использовать для восстановления базы данных.
- **Управление каталогом базы данных** При использовании Азакснап с базой данных, имеющей встроенный каталог резервных копий, записи в каталоге сохраняются в моментальных снимках хранилища.  Эта возможность позволяет администратору базы данных видеть действие резервного копирования.
- **Защита тома с нерегламентированными правами** Эта возможность полезна для томов, не относящихся к базам данных, которые не требуют замораживания приложений перед созданием моментального снимка хранилища.  К примерам относятся SAP HANA тома резервного копирования журналов или тома САПТРАНС.
- **Клонирование томов хранилища** Эта возможность позволяет клонировать тома хранилища, эффективные для целей разработки и тестирования.
- **Поддержка аварийного восстановления** Азакснап использует репликацию тома хранилища для предоставления параметров для восстановления реплицированных моментальных снимков на основе приложений на удаленном сайте.

Азакснап — это один двоичный файл.  Для взаимодействия с базой данных или хранилищем (Azure NetApp Files с помощью Azure Resource Manager и крупного экземпляра Azure через SSH) не требуются дополнительные агенты или подключаемые модули.  Азакснап должен быть установлен в системе, имеющей подключение к базе данных и хранилищу.  Однако гибкость установки и настройки обеспечивает либо единую централизованную установку, либо полностью распределенную установку с копиями, установленными при установке каждой базы данных.

## <a name="architecture-overview"></a>Обзор архитектуры

Азакснап может быть установлен на том же узле, что и база данных (SAP HANA), или может быть установлен в централизованной системе.  Однако должно существовать сетевое подключение к серверам баз данных и серверной части хранилища (Azure Resource Manager для Azure NetApp Files или SSH для крупных экземпляров Azure).

Азакснап — это упрощенное приложение, которое обычно выполняется из внешнего планировщика.  В большинстве систем Linux это операция `cron` , на которую будет сосредоточена документация.  Но планировщик может быть альтернативным инструментом, если он может импортировать `azacsnap` профиль оболочки пользователя.  Импорт параметров среды пользователя обеспечивает правильную инициализацию путей к файлам и разрешений.

## <a name="command-synopsis"></a>Краткий обзор команды

Общий формат команд выглядит следующим образом: `azacsnap -c [command] --[command] [sub-command] --[flag-name] [flag-value]` .

## <a name="command-options"></a>Параметры команды

Параметры команды выглядят следующим образом с командами в качестве основных маркеров и связанных вложенных команд в виде маркеров с отступами:

- **`-h`** предоставляет расширенную справку по командной строке с примерами использования Азакснап.
- **`-c configure`** Эта команда предоставляет интерактивный вопрос Q&интерфейс стиля для создания или изменения `azacsnap` файла конфигурации (по умолчанию = `azacsnap.json` ).
  - **`--configuration new`** создаст новый файл конфигурации.
  - **`--configuration edit`** будет изменять существующий файл конфигурации.
  - см. инструкции по [настройке справочника по командам](azacsnap-cmd-ref-configure.md).
- **`-c test`** Проверка файла конфигурации и проверка подключения.
  - **`--test hana`**  проверяет соединение с экземпляром SAP HANA.
  - **`--test storage`** проверяет связь с базовым интерфейсом хранилища, создавая временный моментальный снимок хранилища для всех настроенных `data` томов, а затем удаляя их.
  - **`--test all`** будет выполнять `hana` `storage` тесты и последовательно.
  - см. [Справочник по командам тестирования](azacsnap-cmd-ref-test.md).
- **`-c backup`** — Основная команда для выполнения моментальных снимков хранилища, целостного для базы данных (SAP HANA томов данных) & других (например, общих резервных копий журналов или загрузочных томов).
  - **`--volume data`** для создания моментальных снимков всех томов в `dataVolume` станза файла конфигурации.
  - **`--volume other`** для создания моментальных снимков всех томов в `otherVolume` станза файла конфигурации.
  - см. [Справочник по командам Backup](azacsnap-cmd-ref-backup.md).
- **`-c details`** предоставляет сведения о моментальных снимках или репликации.
  - **`--details snapshots`** Содержит список основных сведений о моментальных снимках для каждого настроенного тома.
  - **`--details replication`** Содержит основные сведения о состоянии репликации с рабочего сайта на сайт аварийного восстановления.
  - Дополнительные сведения см. в [справочнике по командам](azacsnap-cmd-ref-details.md).
- **`-c delete`** Эта команда удаляет моментальный снимок хранилища или набор моментальных снимков. Можно использовать либо идентификатор резервного копирования SAP HANA, который находится в HANA Studio, либо имя моментального снимка хранилища. Идентификатор резервной копии привязывается только к `hana` моментальным снимкам, которые создаются для данных и общих томов. В противном случае, если указано имя моментального снимка, выполняется поиск всех моментальных снимков, соответствующих указанному имени моментального снимка.
  - см. раздел [Delete](azacsnap-cmd-ref-delete.md).
- **`-c restore`** предоставляет два метода восстановления моментального снимка на том путем создания нового тома на основе моментального снимка или отката тома до состояния предварительного просмотра.
  - **`--restore snaptovol`** Создает новый том на основе последнего моментального снимка на целевом томе.
  - **`-c restore --restore revertvolume`** Возврат целевого тома к предыдущему состоянию на основе последнего моментального снимка.
  - см. [Справочник по командам Restore](azacsnap-cmd-ref-restore.md).
- **`[--configfile <configfilename>]`** Необязательный параметр командной строки для предоставления другого имени файла конфигурации JSON.  Это особенно полезно для создания отдельного файла конфигурации для каждого идентификатора безопасности (например `--configfile H80.json` ,).

## <a name="next-steps"></a>Дальнейшие действия

- [Приступая к работе со средством создания моментальных снимков, совместимых с приложениями Azure](azacsnap-get-started.md)
