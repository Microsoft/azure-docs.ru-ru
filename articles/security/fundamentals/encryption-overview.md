---
title: Общие сведения о шифровании Azure | Документация Майкрософт
description: Сведения о параметрах шифрования в Azure. Сведения о шифровании неактивных данных, шифровании в полете и управлении ключами с помощью Azure Key Vault.
services: security
author: msmbaldwin
ms.assetid: ''
ms.service: security
ms.subservice: security-fundamentals
ms.topic: article
ms.date: 07/20/2020
ms.author: mbaldwin
ms.openlocfilehash: d7d438b369c863660a032f101e466b6fadf639fa
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "98879720"
---
# <a name="azure-encryption-overview"></a>Общие сведения о шифровании в Azure

В этой статье представлен обзор использования шифрования в Microsoft Azure. Здесь приведены сведения об основных областях шифрования, включая шифрование неактивных данных, шифрование данных в процессе, а также об управлении ключами с помощью Azure Key Vault. В каждом разделе содержатся ссылки для получения дополнительных сведений.

## <a name="encryption-of-data-at-rest"></a>Шифрование неактивных данных

К неактивным данным относятся сведения, хранящиеся в постоянном хранилище на физическом носителе в любом цифровом формате. Это могут быть файлы на магнитных или оптических носителях, архивированные данные и резервные копии данных. Microsoft Azure предлагает различные решения для хранения данных для разных нужд, включая дисковое и файловое хранилище, а также хранилище больших двоичных объектов и таблиц. Корпорация Майкрософт также предоставляет возможности шифрования для защиты [Базы данных SQL Azure](../../azure-sql/database/sql-database-paas-overview.md), [Azure Cosmos DB](../../data-factory/introduction.md) и Azure Data Lake.

Шифрование неактивных данных доступно для службы с облачными моделями "программное обеспечение как услуга" (SaaS), "платформа как услуга" (PaaS) и "инфраструктура как услуга" (IaaS). В этой статье приводится краткое описание и предлагаются ресурсы, которые помогут вам воспользоваться различными вариантами шифрования Azure.

Дополнительные сведения о шифровании неактивных данных в Azure см. в разделе [Шифрование неактивных данных в Azure](encryption-atrest.md).

## <a name="azure-encryption-models"></a>Модели шифрования Azure

Azure поддерживает различные модели шифрования, включая шифрование на стороне сервера с помощью ключей, управляемых службами, ключей, управляемых клиентами в Key Vault, или ключей на оборудовании, управляемом клиентом. Шифрование на стороне клиента позволяет хранить ключи локально или в другом защищенном месте, а также управлять ими.

### <a name="client-side-encryption"></a>шифрования на стороне клиента

Шифрование на стороне клиента выполняется за пределами Azure. Сюда входят:

- Данные, зашифрованные приложением, выполняющимся в центре обработки данных клиента, или приложением службы.
- Зашифрованные данные, полученные Azure.

При шифровании на стороне клиента у поставщика облачных служб нет доступа к ключам шифрования и он не может расшифровать эти данные. Вы полностью управляете ключами.

### <a name="server-side-encryption"></a>Шифрование на стороне сервера

Три модели шифрования на стороне сервера имеют разные характеристики управления ключами, которые можно выбрать в соответствии с требованиями.

- **Ключи, управляемые службой**. Обеспечивают возможности управления, удобство благодаря низким затратам.

- **Ключи, управляемые клиентом**. Дают возможность контролировать ключи, включая поддержку использования собственных ключей (BYOK) или их создания.

- **Ключи, управляемые службой, на оборудовании, управляемом клиентом**. Позволяют управлять ключами в собственном репозитории, не управляемом корпорацией Майкрософт. Это называется размещением собственного ключа (HYOK). Однако конфигурация сложна, потому большинство служб Azure не поддерживают эту модель.

### <a name="azure-disk-encryption"></a>Шифрование дисков Azure

Виртуальные машины Windows и Linux можно защитить с помощью [шифрования дисков Azure](./azure-disk-encryption-vms-vmss.md), при котором используется технология [Windows BitLocker](/previous-versions/windows/it-pro/windows-vista/cc766295(v=ws.10)), и Linux [DM-Crypt](https://en.wikipedia.org/wiki/Dm-crypt) для защиты дисков операционной системы и дисков данных с шифрованием всего тома.

Защита ключей шифрования и секретов обеспечивается в подписке [Azure Key Vault](../../key-vault/general/overview.md). С помощью службы Azure Backup можно создавать резервные копии виртуальных машин, зашифрованные с помощью конфигурации ключа шифрования ключей (KEK), а также восстанавливать эти виртуальные машины.

### <a name="azure-storage-service-encryption"></a>Шифрование службы хранилища Azure

Неактивные данные, размещенные в хранилище BLOB-объектов Azure и файловых ресурсах Azure, можно зашифровать на стороне сервера и на стороне клиента.

При [шифровании службы хранилища Azure (SSE)](../../storage/common/storage-service-encryption.md) данные можно автоматически зашифровать перед их сохранением и автоматически расшифровать после их получения. Процесс является полностью прозрачным для пользователей. Шифрование службы хранилища использует 256-разрядный алгоритм [шифрования AES](https://en.wikipedia.org/wiki/Advanced_Encryption_Standard), являющийся одним из самых надежных блочных шифров. AES обеспечивает прозрачное шифрование, расшифровку и управление ключами.

### <a name="client-side-encryption-of-azure-blobs"></a>Шифрование больших двоичных объектов Azure на стороне клиента

Шифрование больших двоичных объектов Azure можно выполнять разными способами.

Вы можете воспользоваться клиентской библиотекой службы хранилища Azure для пакета NuGet .NET для шифрования данных в клиентских приложениях до их передачи в службу хранилища Azure.

Дополнительные сведения о клиентской библиотеке службы хранилища Azure для пакета NuGet .NET приведены в описании [службы хранилища Azure 8.3.0](https://www.nuget.org/packages/WindowsAzure.Storage).

При использовании шифрования на стороне клиента с Key Vault данные шифруются с помощью одноразового симметричного ключа шифрования содержимого (CEK), который создает клиентский пакет SDK для службы хранилища Azure. CEK зашифрован с помощью ключа шифрования ключей (KEK), который может быть парой симметричных или асимметричных ключей. Ими можно управлять локально или сохранить в Key Vault. Зашифрованные данные затем передаются в службу хранилища Azure.

Дополнительные сведения о шифровании на стороне клиента с помощью Key Vault и инструкции приведены в статье [ Шифрование и расшифровка BLOB-объектов в хранилище Microsoft Azure с помощью хранилища ключей Azure](../../storage/blobs/storage-encrypt-decrypt-blobs-key-vault.md).

Вы также можете использовать клиентскую библиотеку службы хранилища Azure для Java, чтобы шифровать данные на стороне клиента перед передачей в службу хранилища Azure и расшифровывать их при скачивании в клиент. Эта библиотека также поддерживает интеграцию с [Key Vault](https://azure.microsoft.com/services/key-vault/) для управления ключами учетной записи хранения.

### <a name="encryption-of-data-at-rest-with-azure-sql-database"></a>Шифрование неактивных данных с помощью Базы данных SQL Azure

[База данных SQL Azure](../../azure-sql/database/sql-database-paas-overview.md) — это реляционная база данных общего назначения (служба) в Azure, которая поддерживает такие структуры, как реляционные данные, JSON, пространственные данные и XML. База данных SQL поддерживает шифрование на стороне сервера путем прозрачного шифрования данных (TDE) и шифрование на стороне клиента посредством функции Always Encrypted.

#### <a name="transparent-data-encryption"></a>прозрачное шифрование данных.

[TDE](/sql/relational-databases/security/encryption/transparent-data-encryption-tde) используется для шифрования [SQL Server](https://www.microsoft.com/sql-server/sql-server-2016), [базы данных SQL Azure](../../azure-sql/database/sql-database-paas-overview.md)и файлов данных [Azure синапсе Analytics](../../synapse-analytics/sql-data-warehouse/sql-data-warehouse-overview-what-is.md) в режиме реального времени с помощью ключа шифрования базы данных (DEK), который хранится в загрузочной записи базы данных для обеспечения доступности во время восстановления.

TDE обеспечивает защиту данных и файлов журналов с помощью алгоритмов шифрования AES и 3DES. Шифрование файлов базы данных выполняется на уровне страницы. Страницы в зашифрованной базе данных шифруются перед записью на диск и расшифровываются во время чтения в память. В созданных базах данных Azure SQL TDE включено по умолчанию.

#### <a name="always-encrypted-feature"></a>Функция Always Encrypted

Используя функцию [Always Encrypted](/sql/relational-databases/security/encryption/always-encrypted-database-engine) в SQL Azure, можно шифровать данные в клиентских приложениях перед их сохранением в базе данных SQL Azure. Можно также включить делегирование прав администрирования локальной базы данных третьим лицам и обеспечить разделение на владельцев данных (которые могут просматривать данные) и управляющих данными (у которых не должно быть доступа к данным).

#### <a name="cell-level-or-column-level-encryption"></a>Шифрование на уровне ячейки или столбца

База данных SQL Azure позволяет применять симметричное шифрование к столбцу данных с помощью Transact-SQL. Данный подход называется [шифрованием на уровне ячейки или столбцам](/sql/relational-databases/security/encryption/encrypt-a-column-of-data), так как при этом можно зашифровать определенные столбцы или даже ячейки данных с помощью разных ключей шифрования. При этом обеспечивается более детальное шифрование, чем при использовании TDE, при котором данные шифруются на страницах.

CLE имеет встроенные функции, которые можно использовать для шифрования данных с помощью симметричных или асимметричных ключей, с помощью открытого ключа сертификата или парольной фразы с использованием 3DES.

### <a name="cosmos-db-database-encryption"></a>Шифрование базы данных Cosmos DB

[Azure Cosmos DB](../../cosmos-db/database-encryption-at-rest.md) — это глобально распределенная многомодельная база данных Майкрософт. Данные пользователя, хранящиеся в Cosmos DB в энергонезависимом хранилище (твердотельные накопители), шифруются по умолчанию. Невозможно включить или отключить такое шифрование. Шифрование неактивных данных реализуется с применением различных технологий обеспечения безопасности, включая безопасные системы хранения ключей, зашифрованные сети и криптографические API. Ключами шифрования управляет корпорация Майкрософт, и их смена осуществляется в соответствии с ее внутренними правилами.

### <a name="at-rest-encryption-in-data-lake"></a>Шифрование неактивных данных в Data Lake

[Azure Data Lake](../../data-lake-store/data-lake-store-encryption.md) — корпоративный централизованный репозиторий данных различных типов, собранных до любого формального определения требований или схемы. Data Lake Store поддерживает модель "Включено по умолчанию", прозрачное шифрование неактивных данных, настраиваемое во время создания учетной записи. По умолчанию Azure Data Lake Store управляет ключами автоматически, но вы можете управлять ими вручную.

При шифровании и расшифровке данных используются три типа ключей: главный ключ шифрования (MEK), ключ шифрования данных (DEK) и ключ шифрования блоков (BEK). MEK используется для шифрования DEK, хранящегося на постоянном носителе, а BEK можно получить на основе DEK и блока данных. Если вы управляете собственными ключами, MEK можно сменить.

## <a name="encryption-of-data-in-transit"></a>Шифрование передаваемых данных

Azure предлагает множество механизмов защиты данных при их перемещении из одного расположения в другое.

### <a name="data-link-layer-encryption-in-azure"></a>Шифрование канального уровня данных в Azure

Каждый раз, когда трафик клиента Azure перемещается между центрами обработки данных, за пределами физических границ, не контролируемых корпорацией Майкрософт (или от имени корпорации Майкрософт), метод шифрования канального уровня, использующий [стандарты безопасности IEEE 802.1 СЗ Mac](https://1.ieee802.org/security/802-1ae/) (также известный как максек), применяется к базовому сетевому оборудованию с точки на точку. Пакеты шифруются и расшифровываются на устройствах перед их отправкой, предотвращая физические атаки "злоумышленник в середине" или "прослеживание/виретаппинг". Так как эта технология интегрирована в самом сетевом оборудовании, она обеспечивает шифрование с учетом скорости строк на сетевом оборудовании без измеряемой задержки связи. Это шифрование Максек включено по умолчанию для всего трафика Azure, передаваемых в пределах региона или между регионами, и для включения в части клиентов никаких действий не требуется. 

### <a name="tls-encryption-in-azure"></a>Шифрование TLS в Azure

Корпорация Майкрософт предоставляет клиентам [возможность использовать протокол](https://en.wikipedia.org/wiki/Transport_Layer_Security) TLS для защиты данных при их командировке между облачными службами и клиентами. Центры обработки данных Майкрософт устанавливают подключение по протоколу TLS с клиентскими системами, подключающимися к службам Azure. TLS обеспечивает надежную аутентификацию, конфиденциальность сообщений, целостность данных (включая обнаружение незаконного изменения, перехвата и подделки сообщений), взаимодействие, гибкость алгоритмов, простоту развертывания и использования.

[Полная безопасность пересылки](https://en.wikipedia.org/wiki/Forward_secrecy) (PFS) позволяет защитить подключения между клиентскими системами заказчиков и облачными службами Майкрософт с помощью уникальных ключей. Соединения также используют ключи шифрования на 2048 бит на основе RSA. Благодаря такому сочетанию усложняется перехват данных и доступ к ним во время передачи.

### <a name="azure-storage-transactions"></a>Транзакции со службой хранилища Azure

При взаимодействии со службой хранилища Azure на портале Azure все транзакции выполняются по протоколу HTTPS. Кроме того, для взаимодействия со службой хранилища Azure можно использовать REST API службы хранилища по протоколу HTTPS. Можно принудительно задать использование протокола HTTPS при вызове интерфейсов REST API для доступа к объектам в учетных записях хранения, включив безопасное перемещение для учетной записи хранения.

Подписанные URL-адреса ([SAS](../../storage/common/storage-sas-overview.md)), которые можно использовать для делегирования доступа к объектам службы хранилища Azure, предусматривают возможность указывать, что при использовании подписанных URL-адресов можно использовать только протокол HTTPS. Таким образом любой пользователь, отправляя ссылки с маркерами SAS, будет использовать правильный протокол.

[Протокол SMB 3.0](/previous-versions/windows/it-pro/windows-server-2012-R2-and-2012/dn551363(v=ws.11)#BKMK_SMBEncryption), используемый для доступа к файловым ресурсам Azure, поддерживает шифрование и может использоваться в Windows Server 2012 R2, Windows 8, Windows 8.1 и Windows 10. Он обеспечивает доступ между регионами и даже доступ на компьютере.

При шифровании на стороне клиента данные шифруются перед отправкой в ваш экземпляр службы хранилища Azure, чтобы обеспечить их шифрование при передаче по сети.

### <a name="smb-encryption-over-azure-virtual-networks"></a>Шифрование SMB в виртуальных сетях Azure 

С помощью [SMB 3.0](https://support.microsoft.com/help/2709568/new-smb-3-0-features-in-the-windows-server-2012-file-server) на виртуальных машинах под управлением Windows Server 2012 или более поздней версии можно защитить передачу данных путем шифрования данных при передаче по виртуальной сети Azure. Шифрование данных помогает защитить их от незаконного изменения и перехвата. Администраторы могут включить шифрование SMB для всего сервера или определенных общих ресурсов.

По умолчанию после включения шифрования SMB для общего ресурса или сервера доступ к зашифрованным общим ресурсам разрешен только клиентам SMB 3.0.

## <a name="in-transit-encryption-in-vms"></a>Шифрование передаваемых данных в виртуальных машинах

Данные, передаваемые в, из и между виртуальными машинами, работающими под Windows, могут быть зашифрованы несколькими способами в зависимости от характера соединения.

### <a name="rdp-sessions"></a>Сеансы RDP

Вы можете подключиться к виртуальной машине и войти в нее с помощью [протокола удаленного рабочего стола](/windows/win32/termserv/remote-desktop-protocol) с клиентского компьютера Windows или с компьютера Mac с установленным клиентом RDP. Данные, передаваемые по сети во время сеанса RDP, можно защитить с помощью протокола TLS.

Кроме того, можно воспользоваться удаленным рабочим столом для подключения к виртуальной машине Linux в Azure

### <a name="secure-access-to-linux-vms-with-ssh"></a>Защита доступа к виртуальным машинам Linux с помощью SSH

С помощью [Secure Shell](../../virtual-machines/linux/ssh-from-windows.md) (SSH) можно подключиться к виртуальным машинам Linux, работающим в Azure, для удаленного управления. SSH — это протокол зашифрованного подключения, позволяющий безопасно входить в систему через незащищенные соединения. Это протокол подключения по умолчанию для виртуальных машин Linux, размещенных в Azure. Используя ключи SSH для аутентификации, не нужно применять пароли для входа. SSH использует пару открытого и закрытого ключей (асимметричное шифрование) для аутентификации.

## <a name="azure-vpn-encryption"></a>Шифрование Azure VPN

К Azure можно подключиться через виртуальную частную сеть, создающую безопасный туннель, защищающий данные, отправляемые по сети.

### <a name="azure-vpn-gateways"></a>VPN-шлюзы Azure

[VPN-шлюз Azure](../../vpn-gateway/vpn-gateway-about-vpn-gateway-settings.md) можно использовать для отправки зашифрованного трафика между виртуальной сетью и локальным расположением по общедоступному подключению или между виртуальными сетями.

VPN-подключения типа "сеть — сеть" используют протокол [IPsec](https://en.wikipedia.org/wiki/IPsec) для шифрования транспорта. VPN-шлюзы Azure используют набор предложений по умолчанию. VPN-шлюзы Azure можно настроить для использования настраиваемой политики IPsec/IKE с определенными алгоритмами шифрования и надежностью ключа, а не наборов политик по умолчанию Azure.

### <a name="point-to-site-vpns"></a>VPN-подключения типа "точка — сеть"

VPN-подключения типа "точка — сеть" позволяют отдельным клиентским компьютерам осуществлять доступ к виртуальной сети Azure. Для создания VPN-туннеля используется [протокол SSTP](/previous-versions/technet-magazine/cc162322(v=msdn.10)). Он может проходить через брандмауэры (туннель выглядит как HTTPS-подключение). Для создания подключений типа "точка — сеть" можно использовать собственный корневой центр сертификации (ЦС) внутренней инфраструктуры открытых ключей.

Вы можете настроить VPN-подключение типа "точка — сеть" к виртуальной сети на портале Azure, используя аутентификацию на основе сертификата или PowerShell.

Дополнительные сведения о VPN-подключениях типа "точка — сеть" к виртуальным сетям Azure приведены в следующих разделах:

[Настройка подключения "точка — сеть" к виртуальной сети с использованием собственной аутентификации Azure на основе сертификата и портала Azure](../../vpn-gateway/vpn-gateway-howto-point-to-site-resource-manager-portal.md) 

[Настройка подключения "точка — сеть" к виртуальной сети с использованием собственной аутентификации Azure на основе сертификата и PowerShell](../../vpn-gateway/vpn-gateway-howto-point-to-site-rm-ps.md)

### <a name="site-to-site-vpns"></a>VPN-подключения типа "сеть — сеть" 

Подключение VPN-шлюза типа "сеть — сеть" можно использовать для создания подключения между локальной сетью и виртуальной сетью Azure через VPN-туннель по протоколу IPsec/IKE (IKEv1 или IKEv2). Для этого типа подключения требуется локальное VPN-устройство, которому назначен внешний общедоступный IP-адрес.

Вы можете настроить VPN-подключение типа "сеть — сеть" к виртуальной сети с помощью Azure, PowerShell или Azure CLI.

Дополнительные сведения см. в разделе:

[Создание подключения типа "сеть — сеть" на портале Azure](../../vpn-gateway/tutorial-site-to-site-portal.md)

[Создание виртуальной сети с VPN-подключением типа "сеть — сеть" с помощью PowerShell](../../vpn-gateway/vpn-gateway-create-site-to-site-rm-powershell.md)

[Создание виртуальной сети с VPN типа "сеть — сеть" с помощью интерфейса командной строки](../../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-cli.md)

## <a name="in-transit-encryption-in-data-lake"></a>Шифрование передаваемых данных в Data Lake

Передаваемые (перемещаемые) данные также всегда шифруются в Data Lake Store. Данные не только шифруются перед сохранением на постоянном носителе. Они также всегда защищены при передаче благодаря использованию протокола HTTPS. HTTPS — единственный протокол, который поддерживают интерфейсы REST в Data Lake Store.

Дополнительные сведения о шифровании передаваемых данных в Data Lake см. в разделе [Шифрование данных в Azure Data Lake Store](../../data-lake-store/data-lake-store-encryption.md).

## <a name="key-management-with-key-vault"></a>Управление ключами с помощью Key Vault

Без соответствующей защиты и управления ключами шифрование бесполезно. Корпорация Майкрософт рекомендует использовать Key Vault в качестве решения по управлению доступом к ключам шифрования, используемым облачными службами. Разрешения на доступ к ключам можно назначить службам или пользователям с помощью учетных записей Azure Active Directory.

Key Vault освобождает организации от необходимости настройки, обновления и обслуживания аппаратных модулей безопасности и программного обеспечения по управлению ключами. При использовании Key Vault вы сохраняете контроль. В корпорации Майкрософт не видны ваши ключи, а приложения не имеют к ним прямого доступа. Кроме того, аппаратные модули безопасности позволяют импортировать и создавать ключи.

## <a name="next-steps"></a>Дальнейшие действия

- [Общие сведения о безопасности в Azure](./overview.md)
- [Обзор сетевой безопасности Azure](network-overview.md)
- [Общие сведения о защите базы данных Azure](../../azure-sql/database/security-overview.md)
- [Общие сведения о безопасности при использовании виртуальных машин Azure](virtual-machines-overview.md)
- [Шифрование неактивных данных](encryption-atrest.md)
- [Рекомендации по шифрованию и обеспечению защиты данных](data-encryption-best-practices.md)