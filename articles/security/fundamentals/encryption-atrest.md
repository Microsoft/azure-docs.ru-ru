---
title: Шифрование данных Azure-at-RESTful — безопасность Azure
description: В этой статье приводятся общие сведения о шифровании неактивных данных Azure, общих возможностях и общих вопросах.
services: security
documentationcenter: na
author: msmbaldwin
manager: rkarlin
ms.assetid: 9dcb190e-e534-4787-bf82-8ce73bf47dba
ms.service: security
ms.subservice: security-fundamentals
ms.devlang: na
ms.topic: article
ms.tgt_pltfrm: na
ms.workload: na
ms.date: 08/13/2020
ms.author: mbaldwin
ms.openlocfilehash: 1318aaf50d4f05b8a999e5661318dc83997a2f02
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96920780"
---
# <a name="azure-data-encryption-at-rest"></a>Шифрование неактивных данных в Azure

Microsoft Azure включает средства для защиты данных в соответствии с потребностями Организации в обеспечении безопасности и соответствия требованиям. В этой статье основное внимание уделяется следующим вопросам:

- защита неактивных данных в Microsoft Azure;
- описание различных компонентов, обеспечивающих защиту данных;
- анализ преимуществ и недостатков основных подходов к защите управления.

Шифрование неактивных данных — общее требование безопасности. В Azure организации могут зашифровать неактивные данные без пользовательских решений для управления ключами, которые создают дополнительный риск и затраты. Организации могут предоставить Azure полный контроль над шифрованием неактивных данных. Кроме того, им доступны различные параметры точного управления шифрованием или ключами шифрования.

## <a name="what-is-encryption-at-rest"></a>Что такое шифрование неактивных данных?

Шифрование — это безопасная кодировка данных, используемая для защиты конфиденциальности данных. Схемы шифрования неактивных данных в Azure используют симметричное шифрование для быстрого шифрования и расшифровки больших объемов данных на основе простой концептуальной модели:

- Симметричный ключ шифрования используется для шифрования данных во время их записи в хранилище.
- Этот же ключ используется для расшифровки данных при подготовке к использованию в памяти.
- Данные могут быть секционированы, а для каждой секции могут использоваться разные ключи.
- Ключи должны храниться в безопасном месте с применением доступа на основе удостоверений и политик аудита. Ключи шифрования данных часто шифруются с помощью ключа шифрования ключа в Azure Key Vault для дальнейшего ограничения доступа.

На практике основные сценарии управления и регулирования, а также гарантии масштабирования и доступности требуют дополнительных конструкций. Ниже приведены основные понятия и компоненты шифрования неактивных данных в Microsoft Azure.

## <a name="the-purpose-of-encryption-at-rest"></a>Цель шифрования неактивных данных

Шифрование при хранении обеспечивает защиту хранимых данных (неактивные данные). Атаки, направленные на такие данные, включают попытки получить физический доступ к оборудованию, на котором хранятся данные, с последующей компрометацией этих данных. При такой атаке жесткий диск сервера может быть необработан в ходе обслуживания, что позволяет злоумышленнику удалить жесткий диск. Позже злоумышленник может поместить жесткий диск в компьютер, находящийся под его контролем, чтобы попытаться получить доступ к данным.

Шифрование неактивных данных предназначено для предотвращения доступа злоумышленника к незашифрованным данным за счет шифрования данных на диске. Если злоумышленник получит жесткий диск с зашифрованными данными, но не ключи шифрования, злоумышленнику придется взломать шифр для получения доступа к данным. Такая атака намного сложнее и требует больше ресурсов, чем доступ к незашифрованным данным на жестком диске. По этой причине мы настоятельно рекомендуем использовать шифрование неактивных данных, которое имеет приоритетное значение для многих организаций.

Шифрование неактивных данных также может потребоваться в Организации, необходимой для управления данными и обеспечения соответствия требованиям. В отраслевых и государственных нормативах, например HIPAA, PCI и FedRAMP, описываются меры по обеспечению безопасности на основе требований к шифрованию и защите данных. Шифрование при хранении является обязательной мерой, необходимой для соблюдения некоторых из этих нормативов. Дополнительные сведения о подходе корпорации Майкрософт к проверке FIPS 140-2 см. в статье [Федеральный стандарт обработки информации (FIPS) 140-2](/microsoft-365/compliance/offering-fips-140-2).

Шифрование неактивных данных не только позволяет выполнить нормативные требования и требования соответствия, но и предоставляет расширенную защиту для платформы. Microsoft Azure предоставляет соответствующую стандартам платформу для служб, приложений и данных. Также предоставляется поддержка на уровне оборудования для физической защиты, управления доступом к данным и аудита. Однако важно предоставить дополнительные "перекрывающиеся" меры безопасности в случае сбоя одного из других мер безопасности, и шифрование неактивных данных обеспечивает такую меру безопасности.

Корпорация Майкрософт намерена обеспечить шифрование неактивных для всех облачных служб, а также предоставить клиентам возможность управлять ключами шифрования и журналами их использования. Кроме того, корпорация Майкрософт активно работает над тем, чтобы такое шифрование применялось по умолчанию для всех неактивных данных пользователей.

## <a name="azure-encryption-at-rest-components"></a>Компоненты шифрования неактивных данных в Azure

Как было описано выше, цель шифрования неактивных данных — выполнить шифрование данных, хранящихся на диске, с помощью секретного ключа шифрования. Для достижения этой цели необходимы безопасное создание ключей, хранилище, управление доступом и ключами шифрования. Хотя некоторые моменты могут отличаться, реализацию шифрования неактивных данных можно описать с помощью понятий, проиллюстрированных на соответствующей схеме.

![Компоненты](./media/encryption-atrest/azure-security-encryption-atrest-fig1.png)

### <a name="azure-key-vault"></a>Azure Key Vault

Место хранения ключей шифрования и управление доступом к этим ключам имеет принципиально важное значение в отношении модели шифрования неактивных данных. Ключи должны быть надежно защищены. При этом определенные службы должны иметь к ним доступны, и они должны быть доступны для управления определенными пользователями. Для служб Azure рекомендуемым решением хранилища ключей является хранилище Azure Key Vault, предоставляющее общие возможности управления в службах. Для хранения ключей и управления ими используются хранилища ключей, доступ к которым можно предоставить пользователям или службам. Azure Key Vault поддерживает создание пользователем ключей или импорт пользовательских ключей для использования в сценариях ключей шифрования, управляемых пользователем.

### <a name="azure-active-directory"></a>Azure Active Directory

Учетным записям Azure Active Directory можно предоставить разрешения на использование ключей, хранящихся в Azure Key Vault, управление ими или доступ к ним в целях шифрования неактивных данных и расшифровки.

### <a name="key-hierarchy"></a>Иерархия ключей

При реализации шифрования неактивных данных используется несколько ключей шифрования. Хранение ключа шифрования в Azure Key Vault обеспечивает безопасный доступ к ключам и централизованное управление ключами. Однако локальный доступ к ключам шифрования служб более эффективен для шифрования и расшифровки, чем взаимодействие с Key Vault для каждой операции с данными, что обеспечивает более надежное шифрование и лучшую производительность. Ограничение использования ключа шифрования снижает риск его компрометации, а также затраты на повторное шифрование при необходимости замены ключа. Модели шифрования Azure в моделях неактивных данных используют иерархию ключей, состоящие из следующих типов ключей, чтобы удовлетворить все эти потребности.

- **Ключ шифрования данных (DEK)**  — симметричный ключ AES256 для шифрования раздела или блока данных.  Один ресурс может включать много секций и много ключей шифрования данных. Шифрование каждого блока данных другим ключом создает дополнительные сложности для выполнения атак в отношении зашифрованных данных. Доступ к DEK требуется поставщику ресурсов или экземпляру приложения, выполняющему шифрование или расшифровку определенного блока. Когда DEK заменяется новым ключом, повторного шифрования этим ключом требуют только данные в его связанном блоке.
- Ключ **шифрования ключа (KEK)** — ключ шифрования, используемый для шифрования ключей шифрования данных. Использование ключа шифрования ключа, который никогда не покидает Key Vault, позволяет шифровать и контролировать ключи шифрования данных. Сущность, у которой есть доступ к KEK, может быть отличной от сущности, требующей DEK. Сущность выступает в качестве брокера при доступе к DEK, чтобы ограничить доступ каждого DEK для определенной секции. Так как KEK требуется для расшифровки ключей DEK, его можно фактически рассматривать как единую точку, с помощью которой можно удалить ключи DEK (непосредственно удалив KEK).

Ключи шифрования данных, зашифрованные с помощью ключей шифрования ключей, хранятся отдельно, и только сущность с доступом к ключу шифрования ключей может расшифровывать эти ключи шифрования данных. Поддерживаются различные модели хранилища ключей. Дополнительные сведения см. в разделе [модели шифрования данных](encryption-models.md) .

## <a name="encryption-at-rest-in-microsoft-cloud-services"></a>Шифрование неактивных данных в облачных службах Майкрософт

Облачные службы Майкрософт используются во всех трех облачных моделях: IaaS, PaaS, SaaS. Ниже приведены примеры их размещения в каждой модели.

- Программные службы, называемые программным обеспечением как сервер или SaaS, которые имеют приложения, предоставляемые облаком, например Microsoft 365.
- Службы платформы, через которые пользователи используют облако в своих приложениях, в частности для доступа к функциям служебной шины, хранения и аналитики.
- Службы инфраструктуры (инфраструктура как услуга (IaaS)), в которых пользователь развертывает операционные системы и приложения, размещенные в облаке, и в которых может использовать другие облачные службы.

### <a name="encryption-at-rest-for-saas-customers"></a>Шифрование неактивных данных пользователей SaaS

Для пользователей программного обеспечения как услуги (SaaS) шифрование неактивных данных обычно включено или доступно в каждой службе. У Microsoft 365 есть несколько вариантов для проверки или включения шифрования при неактивных подключениях. Дополнительные сведения о службах Microsoft 365 см. [в разделе Шифрование в Microsoft 365](/microsoft-365/compliance/encryption).

### <a name="encryption-at-rest-for-paas-customers"></a>Шифрование неактивных данных пользователей PaaS

Данные клиента "платформа как услуга" (PaaS) обычно находятся в службе хранилища, например в хранилище BLOB-объектов, но также могут кэшироваться или храниться в среде выполнения приложений, например в виртуальной машине. Чтобы просмотреть доступные варианты шифрования неактивных данных, ознакомьтесь с таблицей ниже для используемых хранилищ и платформ приложений.

### <a name="encryption-at-rest-for-iaas-customers"></a>Шифрование неактивных данных пользователей IaaS

Пользователи, использующие инфраструктуру как услугу (IaaS), могут использовать ряд служб и приложений. Службы IaaS могут включить шифрование неактивных данных на своих размещенных в Azure виртуальных машинах и виртуальных жестких дисках с помощью шифрования дисков Azure.

#### <a name="encrypted-storage"></a>Зашифрованное хранилище

Аналогично решениям PaaS, решения IaaS могут использовать другие службы Azure, которые хранят данные в зашифрованном виде. В таких случаях можно включить поддержку шифрования неактивных данных для каждой используемой службы Azure. В таблице ниже перечислены основные хранилища, службы и платформы приложений, а также поддерживаемые модели шифрования неактивных данных.

#### <a name="encrypted-compute"></a>Зашифрованные вычисления

Все управляемые диски, моментальные снимки и образы шифруются с помощью Шифрование службы хранилища с помощью ключа, управляемого службой. Более полное шифрование неактивных решений гарантирует, что данные никогда не сохраняются в незашифрованном виде. При обработке данных на виртуальной машине данные могут быть сохранены в файле подкачки Windows или в файле подкачки Linux, аварийном дампе или журнале приложений. Чтобы убедиться, что эти данные шифруются при хранении, приложения IaaS могут использовать службу "Шифрование дисков Azure" на виртуальной машине Azure IaaS (Windows или Linux) и виртуальном диске.

#### <a name="custom-encryption-at-rest"></a>Пользовательское шифрование неактивных данных

Рекомендуется, чтобы приложения IaaS использовали шифрование дисков Azure и параметры шифрования неактивных данных, предоставляемые любой используемой службой Azure. В некоторых случаях, например при нестандартных требованиях к шифрованию или при использовании хранилища, отличного от Azure, разработчику приложения IaaS может потребоваться реализовать шифрование неактивных данных самостоятельно. Разработчики решений IaaS могут обеспечивать лучшую интеграцию с управлением Azure и удовлетворять ожидания пользователей за счет использования определенных компонентов Azure. В частности разработчикам следует использовать службу Azure Key Vault, чтобы обеспечить безопасное хранение ключей, а также предоставить своим пользователям согласованные параметры управления ключами большинства служб платформы Azure. Кроме того, пользовательские решения должны использовать удостоверения служб, управляемых Azure, чтобы предоставить учетным записям служб доступ к ключам шифрования. Сведения для разработчиков об Azure Key Vault и удостоверениях управляемых служб см. в соответствующих пакетах SDK.

## <a name="azure-resource-providers-encryption-model-support"></a>Поддержка модели шифрования поставщиками ресурсов Azure

Каждая служба Microsoft Azure поддерживает одну или несколько моделей шифрования неактивных данных. Тем не менее для некоторых служб одна или несколько моделей шифрования могут быть неприменимы. Для служб, которые поддерживают управляемые клиентами сценарии использования ключей, они могут поддерживать только несколько типов ключей, которые поддерживает хранилище Azure Key Vault для ключей шифрования ключей. Кроме того, службы могут добавлять поддержку этих сценариев и типов ключей в разное время. В этом разделе описывается поддержка шифрования неактивных данных на момент написания этой статьи для основных служб хранения данных Azure.

### <a name="azure-disk-encryption"></a>Шифрование дисков Azure

Любой пользователь, который использует функции инфраструктуры как услуги (IaaS) Azure, может включить шифрование неактивных данных на виртуальных машинах IaaS и дисках с помощью шифрования дисков Azure. Дополнительные сведения о шифровании дисков Azure см. в [документации по шифрованию дисков Azure](./azure-disk-encryption-vms-vmss.md).

#### <a name="azure-storage"></a>Хранилище Azure

Все службы хранилища Azure (хранилище BLOB-объектов, хранилище очередей, хранилище таблиц и файлы Azure) поддерживают шифрование неактивных данных на стороне сервера; Некоторые службы дополнительно поддерживают управляемые клиентом ключи и шифрование на стороне клиента.

- На стороне сервера: все службы хранилища Azure используют шифрование на стороне сервера по умолчанию с использованием управляемых службой ключей, которые являются прозрачными для приложения. Дополнительные сведения см. в статье [Шифрование службы хранилища Azure для неактивных данных (предварительная версия)](../../storage/common/storage-service-encryption.md). Хранилище BLOB-объектов Azure и служба файлов Azure также поддерживают 2048-битные управляемые клиентом ключи RSA в Azure Key Vault. Дополнительные сведения см. в статье [Шифрование службы хранилища с помощью управляемых клиентом ключей в Azure Key Vault](../../storage/common/customer-managed-keys-configure-key-vault.md).
- На стороне клиента: большие двоичные объекты, таблицы и очереди Azure поддерживают шифрование на стороне клиента. При использовании шифрования на стороне клиента данные шифруются и передаются в виде зашифрованного большого двоичного объекта. Управление ключами осуществляется пользователем. Дополнительные сведения см. в статье [Шифрование на стороне клиента для службы хранилища Microsoft Azure](../../storage/common/storage-client-side-encryption.md).

#### <a name="azure-sql-database"></a>База данных SQL Azure

В настоящее время База данных SQL Azure поддерживает шифрование неактивных данных в сценариях шифрования на стороне клиента и на стороне управляемых служб Майкрософт.

Поддержка шифрования на стороне сервера в настоящее время предоставляется с помощью функции SQL, которая называется прозрачным шифрованием данных. Как только пользователь базы данных SQL Azure активирует прозрачное шифрование данных, эта функция будет автоматически создавать ключи и управлять ими. Шифрование неактивных данных можно включить на уровне базы данных и на уровне сервера. Начиная с июня 2017 г. [прозрачное шифрование данных (TDE)](/sql/relational-databases/security/encryption/transparent-data-encryption) включается по умолчанию для всех новых баз данных. База данных SQL Azure поддерживает управляемые клиентом 2048-битные ключи RSA в Azure Key Vault. Дополнительные сведения см. в статье [Прозрачное шифрование данных с поддержкой использования собственных ключей для Базы данных SQL Azure и хранилища данных SQL Azure](/sql/relational-databases/security/encryption/transparent-data-encryption-byok-azure-sql).

Шифрование на стороне клиента Базы данных SQL Azure поддерживается с помощью функции [Always Encrypted](/sql/relational-databases/security/encryption/always-encrypted-database-engine). Always Encrypted использует ключ, который создается и хранится клиентом. пользователь может хранить главный ключ в хранилище сертификатов Windows, Azure Key Vault или аппаратном модуле безопасности (HSM), размещенном локально. С помощью SQL Server Management Studio пользователи SQL выбирают, какой ключ следует использовать для шифрования столбца.

## <a name="conclusion"></a>Заключение

Защита данных пользователя, хранимых в службах Azure, представляет особую важность для Майкрософт. Все службы, размещенные в Azure, обязуются предоставлять параметры шифрования неактивных данных. Службы Azure поддерживают ключи, управляемые службой, ключи, управляемые клиентом, или шифрование на стороне клиента. Службы Azure широко расширяют возможности шифрования при недоступности, а новые варианты запланированы на предварительную версию и общую доступность в ближайшие месяцы.

## <a name="next-steps"></a>Дальнейшие действия

- Дополнительные сведения о ключах, управляемых службой, и ключах, управляемых клиентом, см. в разделе [модели шифрования данных](encryption-models.md) .
- Узнайте, как Azure использует [двойное шифрование](double-encryption.md) для устранения угроз, поступающих от шифрования данных.
- Узнайте о том, что корпорация Майкрософт делает для обеспечения [целостности платформы и безопасности](platform.md) узлов, проходящих через конвейеры сборки, интеграции, эксплуатации и восстановления.
