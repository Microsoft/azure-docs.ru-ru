---
title: Рекомендации по обеспечению безопасности для образов Azure Marketplace | Документация Майкрософт
description: В этой статье содержатся рекомендации для образов, включенных в Marketplace.
services: security
documentationcenter: na
author: terrylanfear
manager: barbkess
ms.assetid: ''
ms.service: security
ms.subservice: security-fundamentals
ms.devlang: na
ms.topic: article
ms.date: 01/11/2019
ms.author: terrylan
ms.openlocfilehash: 7c317a0b4fea0c981b227bace00c1b8924fd582c
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "89536388"
---
# <a name="security-recommendations-for-azure-marketplace-images"></a>Рекомендации по обеспечению безопасности для образов Azure Marketplace

Образ должен соответствовать этим рекомендациям по настройке безопасности. Это поможет обеспечить высокий уровень безопасности для образов партнерских решений в Azure Marketplace.

Всегда выполняйте обнаружение уязвимостей системы безопасности в образе перед отправкой. При обнаружении уязвимости системы безопасности в собственном опубликованном образе необходимо своевременно информировать клиентов об уязвимостях и способах ее устранения.

## <a name="open-source-based-images"></a>Образы на основе открытого источника

| Category | Проверить |
| -------- | ----- |
| Безопасность                                                     | Установите все последние исправления безопасности для дистрибутива Linux.                                                                                                                                                                                                              |
| Безопасность                                                     | Следуйте отраслевым рекомендациям по защите образа виртуальной машины для конкретного дистрибутива Linux.                                                                                                                                                                                     |
| Безопасность                                                     | Снизьте уязвимость среды, используя минимальный объем памяти и только необходимые роли Windows Server, компоненты, службы и сетевые порты.                                                                                                                                               |
| Безопасность                                                     | Сканируйте исходный код и итоговый образ виртуальной машины на наличие вредоносных программ.                                                                                                                                                                                                                                   |
| Безопасность                                                     | Образ VHD включает только необходимые заблокированные учетные записи, не имеющие паролей по умолчанию, которые могут разрешить интерактивное вход в систему. нет задних дверей.                                                                                                                                           |
| Безопасность                                                     | Отключите правила брандмауэра, если приложение не использует их, например устройство брандмауэра.                                                                                                                                                                             |
| Безопасность                                                     | Удалите все конфиденциальные данные из образа VHD, такие как тестовые ключи SSH, известные файлы узлов, журналы и ненужные сертификаты.                                                                                                                                       |
| Безопасность                                                     | Избегайте использования LVM.                                                                                                                                                                                                                                            |
| Безопасность                                                     | Включить последние версии требуемых библиотек: </br> — OpenSSL версии 1.0 или более поздней; </br> — Python версии 2.5 или более поздней (рекомендуется использовать Python 2.6 и выше); </br> — пакет Python pyasn1, если он еще не установлен; </br> — d.OpenSSL версии 1.0 или более поздней.                                                                |
| Безопасность                                                     | Очистите записи журнала Bash/Shell.                                                                                                                                                                                                                                             |
| Сеть                                                   | По умолчанию Включите сервер SSH. Задайте для параметра Проверка активности SSH значение sshd config со следующим параметром: ClientAliveInterval 180.                                                                                                                                                        |
| Сеть                                                   | Удалите из образа любую пользовательскую конфигурацию сети. Удалите resolv. conf: `rm /etc/resolv.conf` .                                                                                                                                                                                |
| Deployment (Развертывание)                                                   | Установите последнюю версию агента Linux для Azure.</br> — Установите с помощью пакета RPM или deb.  </br> — Можно использовать процесс установки вручную, но рекомендуется применять пакеты установщика. </br> — При установке агента вручную из репозитория GitHub сначала скопируйте файл `waagent` в `/usr/sbin` и запустите его (в качестве привилегированного пользователя): </br>`# chmod 755 /usr/sbin/waagent` </br>`# /usr/sbin/waagent -install` </br>Файл конфигурации агента помещается в каталог `/etc/waagent.conf`. |
| Deployment (Развертывание)                                                   | Убедитесь, что служба поддержки Azure может предоставить нашим партнерам последовательные выходные данные консоли при необходимости и обеспечить достаточное время ожидания для подключения диска ОС из облачного хранилища. Добавьте следующие параметры в загрузочную строку ядра образа: `console=ttyS0 earlyprintk=ttyS0 rootdelay=300` . |
| Deployment (Развертывание)                                                   | На диске операционной системы отсутствует раздел подкачки. Можно запросить подкачку для создания локального диска ресурсов с помощью агента Linux.         |
| Deployment (Развертывание)                                                   | Создайте один корневой раздел для диска ОС.      |
| Deployment (Развертывание)                                                   | Только 64-разрядная операционная система.                                                                                                                                                                                                                                                          |

## <a name="windows-server-based-images"></a>Образы на основе сервера Windows

| Category | Проверить |
|--------- | ----- |
| Безопасность                                                         | Используйте безопасный базовый образ ОС. Виртуальный жесткий диск, используемый для источника любого образа на основе Windows Server, должен быть из образов ОС Windows Server, предоставленных через Microsoft Azure. |
| Безопасность                                                         | Установите все последние обновления безопасности.                                                                                                                                     |
| Безопасность                                                         | Приложения не должны зависеть от ограниченных имен пользователей, таких как администратор, корень или администратор.                                                                |
| Безопасность                                                         | Включите шифрование диска BitLocker как для жестких дисков операционной системы, так и для жестких дисков данных.                                                             |
| Безопасность                                                         | Снизьте уязвимость среды, используя минимальный объем памяти и включив только необходимые роли Windows Server, компоненты, службы и сетевые порты.                         |
| Безопасность                                                         | Сканируйте исходный код и итоговый образ виртуальной машины на наличие вредоносных программ.                                                                                                                     |
| Безопасность                                                         | Установите автоматическое обновление системы безопасности образов Windows Server.                                                                                                                |
| Безопасность                                                         | Образ VHD включает только необходимые заблокированные учетные записи, не имеющие паролей по умолчанию, которые могут разрешить интерактивное вход в систему. нет задних дверей.                             |
| Безопасность                                                         | Отключите правила брандмауэра, если приложение не использует их, например устройство брандмауэра.                                                               |
| Безопасность                                                         | Удалите все конфиденциальные данные из образа VHD, включая файлы узлов, файлы журналов и ненужные сертификаты.                                              |
| Deployment (Развертывание)                                                       | Только 64-разрядная операционная система.                            |

Даже если в вашей организации нет образов в Azure Marketplace, рассмотрите возможность проверки конфигураций образов Windows и Linux в соответствии с этими рекомендациями.

