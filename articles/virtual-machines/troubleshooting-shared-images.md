---
title: Устранение неполадок с общими образами в Azure
description: Узнайте, как устранять неполадки в общих галереях образов.
author: olayemio
ms.service: virtual-machines
ms.subservice: shared-image-gallery
ms.topic: troubleshooting
ms.workload: infrastructure
ms.date: 10/27/2020
ms.author: olayemio
ms.reviewer: cynthn
ms.openlocfilehash: 015fa201fe1c31dde2e30c2fe689ac13452b1b01
ms.sourcegitcommit: 73d80a95e28618f5dfd719647ff37a8ab157a668
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/26/2021
ms.locfileid: "105607598"
---
# <a name="troubleshoot-shared-image-galleries-in-azure"></a>Устранение неполадок с общими галереями образов в Azure

При возникновении проблем с выполнением любых операций с общими коллекциями образов, определениями образов и версиями изображений выполните команду Failed в режиме отладки. Режим отладки активируется путем передачи `--debug` коммутатора с Azure CLI и `-Debug` коммутатора с помощью PowerShell. После обнаружения ошибки следуйте этой статье, чтобы устранить ее.


## <a name="creating-or-modifying-a-gallery"></a>Создание или изменение коллекции ##

**Сообщение**: *недопустимое имя галереи. Допустимыми символами являются английские алфавитно-цифровые символы с символами подчеркивания и допустимыми точками в среднем, до 80 символов. Все прочие специальные символы, включая тире,* запрещены.  
**Причина**: имя коллекции не соответствует требованиям к именованию.  
**Обходное решение**. Выберите имя, которое соответствует следующим условиям. 
- Имеет ограничение в 80 символов
- Содержит только английские буквы, цифры, символы подчеркивания и точки
- Начинается и заканчивается буквами или цифрами английского языка

**Сообщение**: *имя сущности "галлеринаме" недопустимо в соответствии с правилом проверки: ^ [^ \_ \w] [\В-. \_ ] {0,79} (? <! [-.]) $.*  
**Причина**: имя коллекции не соответствует требованиям к именованию.  
**Обходное решение**. Выберите имя коллекции, которое соответствует следующим условиям: 
- Имеет ограничение в 80 символов
- Содержит только английские буквы, цифры, символы подчеркивания и точки
- Начинается и заканчивается буквами или цифрами английского языка

**Сообщение**: *указанное имя ресурса <галлеринаме \> содержит следующие недопустимые конечные символы: <символ \> . Имя не может заканчиваться символами: <символ \>*  
**Причина**: имя коллекции заканчивается точкой или символом подчеркивания.  
**Обходное решение**. Выберите имя коллекции, которое соответствует следующим условиям: 
- Имеет ограничение в 80 символов
- Содержит только английские буквы, цифры, символы подчеркивания и точки
- Начинается и заканчивается буквами или цифрами английского языка

**Сообщение**: *указанное расположение <региона \> недоступно для типа ресурсов "Microsoft. COMPUTE/галереи". Список доступных регионов для типа ресурса:...*  
**Причина**: регион, указанный для коллекции, неверен или требует запроса на доступ.  
**Обходное решение**. Проверьте правильность имени региона. Если имя региона указано правильно, отправьте [запрос на доступ к](/troubleshoot/azure/general/region-access-request-process) региону.

**Сообщение**: *не удается удалить ресурс перед удалением вложенных ресурсов.*  
**Причина**: вы попытались удалить коллекцию, содержащую по крайней мере одно существующее определение образа. Коллекция должна быть пустой, прежде чем ее можно будет удалить.  
**Обходное решение**. Удалите все определения образов в коллекции, а затем продолжайте удалять коллекцию. Если определение образа содержит версии изображений, необходимо удалить версии образа, прежде чем удалять определения образов.

**Сообщение**: *имя коллекции "<галлеринаме \> " не уникально в пределах подписки " <subscriptionID> ". Выберите другое имя коллекции.*  
**Причина**: у вас есть коллекция с тем же именем и вы попытались создать другую коллекцию с тем же именем.  
**Обходное решение**. Выберите другое имя для коллекции.

**Сообщение**: *ресурс <галлеринаме \> уже существует в расположении <региона \_ 1 \> в группе ресурсов <resourceGroup \> . Ресурс с таким же именем не может быть создан в расположении <региона \_ 2 \> . Выберите новое имя ресурса.*  
**Причина**: у вас есть коллекция с тем же именем и вы попытались создать другую коллекцию с тем же именем.  
**Обходное решение**. Выберите другое имя для коллекции.

## <a name="creating-or-modifying-image-definitions"></a>Создание или изменение определений изображений ##

**Сообщение**: *изменяющееся свойство "галлеримаже. Properties. <свойство \> "* недопустимо.  
**Причина**: вы попытались изменить тип ОС, состояние ОС, создание Hyper-V, предложение, издателя или номер SKU. Изменение любого из этих свойств не разрешено.  
**Обходное решение**. вместо этого создайте новое определение образа.

**Сообщение**: *ресурс <галлеринаме/имажедефинитионнаме \> уже существует в расположении <региона \_ 1 \> в группе ресурсов <resourceGroup \> . Ресурс с таким же именем не может быть создан в расположении <региона \_ 2 \> . Выберите новое имя ресурса.*  
**Причина**. в коллекции и группе ресурсов с тем же именем уже определено определение образа. Вы попытались создать другое определение образа с тем же именем и в той же коллекции, но в другом регионе.  
**Обходное решение**. Используйте другое имя для определения образа или вставьте определение изображения в другую коллекцию или группу ресурсов.

**Сообщение**: *указанное имя ресурса <Галлеринаме \> /<имажедефинитионнаме \> содержит следующие недопустимые конечные символы: <символ \> . Имя не может заканчиваться символами: <символ \>*  
**Причина**: <имя имажедефинитионнаме \> заканчивается точкой или символом подчеркивания.  
**Обходное решение**. Выберите имя для определения образа, которое соответствует следующим условиям: 
- Имеет ограничение в 80 символов
- Содержит только английские буквы, цифры, символы подчеркивания, дефисы и точки.
- Начинается и заканчивается буквами английского алфавита или цифрами.

**Сообщение**: *имя сущности <имажедефинитионнаме \> является недопустимым согласно правилу проверки: ^ [^ \_ \\ W] [ \\ W-. \_ ] {0,79} (? <! [-.]) $"*  
**Причина**: <имя имажедефинитионнаме \> заканчивается точкой или символом подчеркивания.  
**Обходное решение**. Выберите имя для определения образа, которое соответствует следующим условиям: 
- Имеет ограничение в 80 символов
- Содержит только английские буквы, цифры, символы подчеркивания, дефисы и точки.
- Начинается и заканчивается буквами или цифрами английского языка

**Сообщение**: *имя ресурса галлеримаже. Properties. identifier. <недопустимо \> . Оно не может быть пустым. Допустимые символы: прописные или строчные буквы, цифры, дефис (-), точка (.), символ подчеркивания ( \_ ). Имена не могут заканчиваться точкой (.). Длина имени не может превышать <\> символов числа.*  
**Причина**: значение издателя, предложения или номера SKU не соответствует требованиям к именованию.  
**Обходное решение**. Выберите значение, которое соответствует следующим условиям. 
- Имеет ограничение в 128 символов для издателя или 64 символов для предложения и номера SKU
- Содержит только английские буквы, цифры, дефисы, символы подчеркивания и точки.
- Не заканчивается точкой

**Сообщение**: *не удается выполнить запрошенную операцию с вложенным ресурсом. Родительский ресурс <Галлеринаме \> не найден.*  
**Причина**: отсутствует коллекция с именем <галлеринаме \> в текущей подписке и группе ресурсов.  
**Решение**. Проверьте правильность имен коллекции, подписки и группы ресурсов. В противном случае создайте новую галерею с именем <Галлеринаме \> .

**Сообщение**: *указанное расположение <региона \> недоступно для типа ресурсов "Microsoft. COMPUTE/галереи". Список доступных регионов для типа ресурса:...*  
**Причина**: имя региона <\> неверен или требует запроса на доступ.  
**Обходное решение**. Проверьте правильность написания имени региона. Эту команду можно использовать для просмотра регионов, к которым у вас есть доступ. Если региона нет в списке, отправьте [запрос на доступ](/troubleshoot/azure/general/region-access-request-process).

**Сообщение**: *не удалось сериализовать значение: <значение \> типа: "ISO-8601"., ISO8601Error: ISO 8601 обозначение времени "t" отсутствует. Не удалось проанализировать строку DateTime \> <значение*  
**Причина**: значение, указанное для свойства, неправильно отформатировано как дата.  
**Обходное решение**. Укажите дату в формате гггг-мм-дд, гггг-мм-дд'т'хх: mm: Ссззз или [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)— допустимый формат.

**Сообщение**: *не удалось преобразовать строку в значение типа DateTimeOffset: <\> . Путь "Свойства. <свойство \> "*  
**Причина**: значение, указанное для свойства, неправильно отформатировано как дата.  
**Обходное решение**. Укажите дату в формате гггг-мм-дд, гггг-мм-дд'т'хх: mm: Ссззз или [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)— допустимый формат.

**Сообщение**: *ендофлифедате должно быть установлено в будущем.*  
**Причина**: свойство даты окончания срока действия неправильно форматируется как дата после сегодняшней даты.  
**Обходное решение**. Укажите дату в формате гггг-мм-дд, гггг-мм-дд'т'хх: mm: Ссззз или [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)— допустимый формат.

**Сообщение**: *аргумент--<свойство \> : недопустимое значение int: <\> значение*  
**Причина**: <свойство \> принимает только целочисленные значения, а <значение \> не является целым числом.  
**Обходное решение**. Выберите целочисленное значение.

**Message**: *минимальное значение свойства <\> не должно превышать максимальное значение свойства <\> .*  
**Причина**: минимальное значение, указанное для свойства <\> , выше максимального значения, указанного для свойства <\> .  
**Обходное решение**. Измените значения так, чтобы минимальное значение не превышало максимальное значение.

**Сообщение**: *образ коллекции: <имажедефинитионнаме, \> идентифицируемый (издатель: издатель <\> , предложение: <предложение \> , SKU: <SKU \> ) уже существует. Выберите другую комбинацию издателя, предложения, номера SKU.*  
**Причина**. Вы попытались создать новое определение образа с тем же издателем, предложением и SKU Triplet в качестве существующего определения образа в той же коллекции.  
**Решение**. в галерее все определения образов должны иметь уникальные сочетания издателя, предложения и SKU. Выберите уникальное сочетание или выберите новую коллекцию и создайте определение образа еще раз.

**Сообщение**: *не удается удалить ресурс перед удалением вложенных ресурсов.*  
**Причина**: предпринята попытка удаления определения образа, содержащего версии изображений. Прежде чем можно будет удалить определение образа, оно должно быть пустым.  
**Обходное решение**. Удалите все версии образа в определении образа, а затем продолжайте удаление определения образа.

**Сообщение**: *не удается привязать параметр <свойства \> . Не удается преобразовать значение <\> в тип <propertyType \> . Не удалось сопоставить имя идентификатора, <значение, \> с допустимым именем перечислителя. Укажите одно из следующих имен перечислителя и повторите попытку: <выбор \_ 1 \> , <выбор \_ 2 \> ,...*  
**Причина**: у свойства есть ограниченный список возможных значений, а <значение \> не является одним из них.  
**Обходное решение**. Выберите одно из возможных значений <выбора \> .

**Сообщение**: *не удается привязать параметр <свойства \> . Не удается преобразовать значение <значение \> в тип &quot; System. &quot; DateTime*  
**Причина**: значение, указанное для свойства, неправильно отформатировано как дата.  
**Обходное решение**. Укажите дату в формате гггг-мм-дд, гггг-мм-дд'т'хх: mm: Ссззз или [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)— допустимый формат.

**Сообщение**: *не удается привязать параметр <свойства \> . Не удается преобразовать значение <значение \> в тип &quot; System. &quot; Int32*  
**Причина**: <свойство \> принимает только целочисленные значения, а <значение \> не является целым числом.  
**Обходное решение**. Выберите целочисленное значение.

**Сообщение**: *тип учетной записи хранения ZRS не поддерживается в этом регионе.*  
**Причина**: вы выбрали стандартное хранилище, избыточное в пределах зоны (ZRS), в регионе, который еще не поддерживает его.  
**Решение**. Измените тип учетной записи хранения на **Premium \_ LRS** или **Standard \_ LRS**. Ознакомьтесь с документацией по последнему [списку регионов](../storage/common/storage-redundancy.md#zone-redundant-storage) с включенной предварительной версией ZRS.

## <a name="creating-or-updating-image-versions"></a>Создание или обновление версий изображений ##

**Сообщение**: *указанное расположение <региона \> недоступно для типа ресурсов "Microsoft. COMPUTE/галереи". Список доступных регионов для типа ресурса:...*  
**Причина**: имя региона <\> неверен или требует запроса на доступ.  
**Обходное решение**. Проверьте правильность написания имени региона. Эту команду можно использовать для просмотра регионов, к которым у вас есть доступ. Если региона нет в списке, отправьте [запрос на доступ](/troubleshoot/azure/general/region-access-request-process).

**Сообщение**: *не удается выполнить запрошенную операцию с вложенным ресурсом. Родительский ресурс <Галлеринаме/Имажедефинитионнаме \> не найден.*  
**Причина**: отсутствует коллекция с именем <Галлеринаме/имажедефинитионнаме \> в текущей подписке и группе ресурсов.  
**Решение**. Проверьте правильность имен коллекции, подписки и группы ресурсов. В противном случае создайте новую галерею с именем <Галлеринаме \> и/или определением образа с именем <имажедефинитионнаме \> в указанной группе ресурсов.

**Сообщение**: *не удается привязать параметр <свойства \> . Не удается преобразовать значение <значение \> в тип &quot; System. &quot; DateTime*  
**Причина**: значение, указанное для свойства, неправильно отформатировано как дата.  
**Обходное решение**. Укажите дату в формате гггг-мм-дд, гггг-мм-дд'т'хх: mm: Ссззз или [ISO 8601](https://en.wikipedia.org/wiki/ISO_8601)— допустимый формат.

**Сообщение**: *не удается привязать параметр <свойства \> . Не удается преобразовать значение <значение \> в тип &quot; System. &quot; Int32*  
**Причина**: <свойство \> принимает только целочисленные значения, а <значение \> не является целым числом.  
**Обходное решение**. Выберите целочисленное значение.

**Сообщение**: *Версия образа коллекции регионы профиля публикации <публишингрегионс \> должен содержать расположение версии образа <саурцерегион \>*  
**Причина**: расположение исходного образа (<саурцерегион \> ) должно быть содержаться в списке <публишингрегионс \> .  
**Обходное решение**. Включите <саурцерегион \> в список <публишингрегионс \> .

**Сообщение**: *значение <значение \> параметра <свойства \> выходит за пределы допустимого диапазона. Значение должно находиться в диапазоне от <minValue \> до <MaxValue \> включительно.*  
**Причина**: <значение выходит \> за пределы диапазона возможных значений для свойства <\> .  
**Обходное решение**. Выберите значение в диапазоне от <minValue \> до <MaxValue \> включительно.

**Сообщение**: *Source <ResourceId \> не найден. Убедитесь, что источник существует и находится в том же регионе, что и создаваемая версия образа коллекции.*  
**Причина**: отсутствует источник, расположенный по адресу <ResourceId \> , или источник в <ResourceId \> находится не в том же регионе, что и создаваемый образ коллекции.  
**Обходное решение**. Проверьте \> правильность значения ResourceId <и убедитесь, что исходная область версии образа коллекции совпадает с регионом значения ResourceId <\> .

**Сообщение**: *изменение свойства "галлеримажеверсион. Properties. StorageProfile. <дискимаже \> . Source.ID" не разрешено.*  
**Причина**: идентификатор источника версии образа коллекции нельзя изменить после создания.  
**Обходное решение**. Убедитесь, что исходный идентификатор совпадает с существующим идентификатором источника, измените номер версии образа или удалите текущую версию образа и повторите попытку.

**Сообщение**: *на дисках входных данных обнаружены дублирующиеся номера LUN. Номер LUN должен быть уникальным для каждого диска данных.*  
**Причина**. при создании версии образа с помощью списка дисков и (или) моментальных снимков дисков один и тот же LUN имеет два или более дисков или моментальных снимков дисков.  
**Обходной путь**. Удалите или измените все дублирующиеся LUN.

**Сообщение**: *на входных дисках найдены дублирующиеся идентификаторы источников. Идентификатор источника должен быть уникальным для каждого диска.*  
**Причина**. при создании версии образа с помощью списка дисков и (или) моментальных снимков диска у двух или более дисков или моментальных снимков дисков один и тот же идентификатор ресурса.  
**Обходной путь**. Удалите или измените все дубликаты исходных идентификаторов дисков.

**Сообщение**: *идентификатор свойства <ResourceId \> в пути "properties. storageProfile. <дискимажес \> . Source.ID" недопустим. Предполагался полный идентификатор ресурса, начинающийся с "/Subscriptions/ <subscriptionID> " или "/providers/ <resourceProviderNamespace> /".*  
**Причина**: значение ResourceId <\> имеет неправильный формат.  
**Решение**. Проверьте правильность идентификатора ресурса.

**Сообщение**: *идентификатор источника: <ResourceId \> должен быть управляемым образом, виртуальной машиной или другой версией образа коллекции.*  
**Причина**: значение ResourceId <\> имеет неправильный формат.  
**Решение**. Если вы используете виртуальную машину, управляемый образ или версию образа коллекции в качестве исходного образа, проверьте правильность идентификатора ресурса виртуальной машины, управляемого образа или версии образа коллекции.

**Сообщение**: *идентификатор источника: <ResourceId \> должен быть управляемым диском или моментальным снимком.*  
**Причина**: значение ResourceId <\> имеет неправильный формат.  
**Решение**. Если вы используете диски и (или) моментальные снимки дисков в качестве источников для версии образа, проверьте правильность идентификаторов ресурсов дисков и (или) моментальных снимков дисков.

**Сообщение**: *не удается создать версию образа из коллекции из: <ResourceId, \> так как состояние ОС в родительском образе коллекции (<OsState \_ 1 \> ) не <OsState \_ 2 \> .*  
**Причина**: состояние операционной системы (обобщенное или специализированное) не соответствует состоянию операционной системы, указанному в определении образа.  
**Решение**. Выберите источник на основе виртуальной машины с состоянием операционной системы <OsState \_ 1 \> или создайте новое определение образа для виртуальных машин на основе <OsState \_ 2 \> .

**Сообщение**: *ресурс с идентификатором "<ResourceId \> " имеет другое поколение гипервизоров ["<V # \_ 1 \> "], чем создание гипервизора образа родительской коллекции ["<V # \_ 2 \> "]*  
**Причина**: создание низкоуровневой оболочки версии образа не соответствует формированию гипервизора, указанному в определении образа. Операционная система определения образа имеет <V # \_ 1 \> , а версия образа операционной системы — <V # \_ 2 \> .  
**Обходное решение**. Выберите источник с тем же поколением гипервизора, что и определение образа, или создайте или выберите новое определение образа с тем же поколением гипервизора, что и версия образа.

**Сообщение**: *ресурс с идентификатором "<ResourceId \> " имеет другой тип ОС ["<OsType \_ 1 \> "], чем создание типа ОС образа родительской коллекции ["<OsType \_ 2 \> "]*  
**Причина**: создание низкоуровневой оболочки версии образа не соответствует формированию гипервизора, указанному в определении образа. Операционная система определения образа — <OsType \_ 1 \> , а версия образа — <OsType \_ 2 \> .  
**Обходное решение**. Выберите источник с той же операционной системой (Linux или Windows), что и определение образа, или создайте или выберите определение нового образа с тем же поколением операционной системы, что и версия образа.

**Сообщение**: *исходная виртуальная машина <ResourceId \> не может содержать временный диск ОС.*  
**Причина**: источник на <ResourceId \> содержит временный диск ОС. В настоящее время коллекция общих образов не поддерживает временные диски ОС.  
**Решение**. Выберите другой источник на основе виртуальной машины, которая не использует временный диск ОС.

**Сообщение**: *исходная виртуальная машина <ResourceId \> не может содержать диск [' <diskID \> '], хранящийся в типе учетной записи ултрассд.*  
**Причина**: диск <diskID \> является диском SSD (цен. Категория "ультра"). Коллекция общих образов в настоящее время не поддерживает SSD (цен. категория "Ультра") дисков.  
**Обходное решение**. Используйте источник, содержащий только SSD (цен. категория "Премиум"), SSD (цен. Категория "Стандартный") и (или) HDD (цен. Категория "Стандартный") управляемых дисков.

**Сообщение**: *исходная виртуальная машина <ResourceId \> должна быть создана с управляемых дисков.*  
**Причина**: виртуальная машина в <ResourceId \> использует неуправляемые диски.  
**Обходное решение**. Используйте источник, основанный на виртуальной машине, которая содержит только SSD (цен. категория "Премиум"), SSD (цен. Категория "Стандартный") и (или) HDD (цен. Категория "Стандартный") управляемых дисков.

**Сообщение**: *слишком много запросов к источнику "<ResourceId \> ". Сократите количество запросов в источнике или подождите некоторое время, прежде чем повторять попытку.*  
**Причина**: в настоящее время источник для этой версии изображения регулируется из-за слишком большого числа запросов.  
**Обходное решение**. Попробуйте создать версию образа позже.

**Сообщение**. *набор шифрования диска "<дискенкриптионсетид \> " должен находиться в той же подписке "<subscriptionID \> ", что и ресурс коллекции.*  
**Причина**. наборы шифрования дисков можно использовать только в той же подписке и регионе, в котором они были созданы.  
**Обходное решение**. Создайте или используйте набор шифрования в той же подписке и регионе, что и версия образа.

**Сообщение**: *зашифрованный источник: "<ResourceId \> " имеет идентификатор подписки, отличный от идентификатора текущей подписки на версию образа коллекции "<subscriptionID \_ 1 \> ". Повторите попытку с незашифрованными источниками или используйте подписку источника "<Субкриптионид \_ 2 \> " для создания версии образа коллекции.*  
**Причина**: коллекция общих образов в настоящее время не поддерживает создание версий изображений в другой подписке из другого исходного образа, если исходный образ зашифрован.  
**Обходное решение**. Используйте незашифрованный источник или создайте версию образа в той же подписке, в которой находится источник.

**Сообщение**: *набор шифрования диска <дискенкриптионсетид \> не найден.*  
**Причина**: Шифрование диска может быть неправильным.  
**Обходное решение**. Проверьте правильность идентификатора ресурса для набора шифрования диска.

**Сообщение**: *недопустимое имя версии образа. Имя версии образа должно соответствовать основной (int). Дополнительный (int). Формат исправления (int), например 1.0.0, 2018.12.1 и т. д.*  
**Причина**: допустимый формат версии изображения — три целых числа, разделенные точкой. Имя версии образа не соответствует допустимому формату.  
**Обходное решение**. Используйте имя версии образа, которое следует за форматом Major (int). Дополнительный (int). Patch (int). Например: 1.0.0. или 2018.12.1.

**Сообщение**: *недопустимое значение параметра галлеряртифактверсион. Properties. публишингпрофиле. таржетрегионс. encryption. датадискимажес. дискенкриптионсетид*  
**Причина**: идентификатор ресурса набора шифрования диска, используемого в образе диска данных, использует недопустимый формат.  
**Обходное решение**. Убедитесь, что идентификатор ресурса для набора шифрования диска соответствует формату/Subscriptions/<subscriptionID \> /ResourceGroups/<ResourceGroupName \> /провидерс/Микрософт.компуте/<дискенкриптионсетнаме \> .

**Сообщение**: *значение параметра галлеряртифактверсион. Properties. публишингпрофиле. таржетрегионс. encryption. осдискимаже. дискенкриптионсетид недопустимо.*  
**Причина**: идентификатор ресурса набора шифрования диска, используемого в образе диска ОС, использует недопустимый формат.  
**Обходное решение**. Убедитесь, что идентификатор ресурса для набора шифрования диска соответствует формату/Subscriptions/<subscriptionID \> /ResourceGroups/<ResourceGroupName \> /провидерс/Микрософт.компуте/<дискенкриптионсетнаме \> .

**Сообщение**: *не удается указать новый LUN для шифрования диска данных [<номер \> ] с набором шифрования дисков в регионе [<Region \> ] для запроса версии образа коллекции обновлений. Чтобы обновить эту версию, удалите новый LUN. Если необходимо изменить параметры шифрования образа диска данных, необходимо создать новую версию образа коллекции с правильными параметрами.*  
**Причина**: вы добавили шифрование на диск данных существующей версии образа. Нельзя добавить шифрование к существующей версии образа.  
**Решение**. Создайте новую версию образа коллекции или удалите добавленные параметры шифрования.

**Сообщение**: *Источник версии артефакта коллекции может указываться либо непосредственно в storageProfile, либо в отдельных дисках операционной системы или данных. Можно указать только один тип источника (пользовательский образ, моментальный снимок, диск, виртуальная машина).*  
**Причина**: отсутствует идентификатор источника.  
**Обходное решение**. Убедитесь в наличии исходного идентификатора источника.

**Сообщение**: *источник не найден: <ResourceId \> . Убедитесь, что источник существует.*  
**Причина**. возможно, идентификатор ресурса источника неверен.  
**Обходное решение**. Убедитесь, что идентификатор ресурса источника указан правильно.

**Сообщение**. *для диска "галлеряртифактверсион. Properties. публишингпрофиле. таржетрегионс. encryption. осдискимаже. дискенкриптионсетид" в целевом регионе "<регион 1" требуется набор шифрования дисков, \_ \> так как \> для соответствующего диска в регионе "<регион \_ 2 \> " используется шифрование диска "<diskEncryptionSetId"*  
**Причина**: шифрование было использовано на диске ос в <регионе \_ 2 \> , но не в <регионе \_ 1 \> .  
Инструкции по **решению**: Если вы используете шифрование на диске операционной системы, используйте шифрование во всех регионах.

**Сообщение**. *набор шифрования дисков требуется для номера LUN <номеру диска \> в целевом регионе "<региона \_ 1", \> так как \> для соответствующего диска в регионе "<регион \_ 2 \> " используется шифрование диска "<дискенкриптионсетид"* .  
**Причина**: шифрование было использовано на диске данных с номером LUN <номер \> в <регионе \_ 2 \> , но не в <регионе \_ 1 \> .  
Инструкции по **решению**: Если вы используете шифрование на диске данных, используйте шифрование во всех регионах.

**Сообщение**: *Недопустимый LUN [<номер \> ] был указан в encryption. датадискимажес. LUN должен иметь одно из следующих значений [' 0, 9 '].*  
**Причина**: номер LUN, указанный для шифрования, не соответствует ни одному из LUN для дисков, подключенных к виртуальной машине.  
**Решение**. Измените номер LUN в шифровании на LUN диска данных, который находится на виртуальной машине.

**Сообщение**: *\> в целевом регионе "<" в регионе " \> датадискимажес" указаны дублирующиеся номера LUN "<".*  
**Причина**: параметры шифрования, используемые в <регионе, \> задают LUN по крайней мере дважды.  
**Решение**. Измените lun в <ном регионе \> , чтобы убедиться, что все LUN уникальны в <ном регионе \> .

**Сообщение**: *осдискимаже и датадискимаже не могут указывать на тот же большой \> двоичный объект <sourceID* .  
**Причина**. источники для диска ОС и по крайней мере один диск данных не являются уникальными.  
**Решение**. измените источник диска операционной системы и (или) диски данных, чтобы убедиться, что диск операционной системы и диск данных уникальны.

**Сообщение**: *в целевых регионах публикации не допускаются дублирующие регионы.*  
**Причина**: регион присутствует в нескольких регионах публикации несколько раз.  
**Обходной путь**. Удалите дублирующийся регион.

**Сообщение**: *Добавление новых дисков данных или изменение LUN диска данных в существующем образе запрещено.*  
**Причина**: вызов обновления к версии образа либо содержит новый диск данных, либо содержит новый LUN для диска.  
**Обходное решение**. Используйте номера LUN и диски данных существующей версии образа.

**Сообщение**. *набор шифрования диска <дискенкриптионсетид \> должен находиться в той же подписке <subscriptionID, \> что и ресурс коллекции.*  
**Причина**: коллекция общих образов в настоящее время не поддерживает использование набора шифрования дисков в другой подписке.  
**Решение**. Создайте версию образа и набор шифрования дисков в одной подписке.

**Сообщение**: *сбой репликации в этом регионе из-за того, что размер галлеримажеверсион ресурса источника 2048 превышает максимальный поддерживаемый размер 1024.*  
**Причина**: диск данных в источнике больше 1 ТБ.  
**Обходное решение**. Измените размер диска данных до 1 ТБ.

## <a name="creating-or-updating-a-vm-or-scale-sets-from-an-image-version"></a>Создание или обновление виртуальных машин или масштабируемых наборов из версии образа ##

**Сообщение**: *для "<имажедефинитионресаурцеид \> " не существует последней версии образа*  
**Причина**: Определение образа, использованное для развертывания виртуальной машины, не содержит никаких версий образов, которые включены в последнюю версию.  
**Обходное решение**. Убедитесь, что существует хотя бы одна версия образа с параметром "исключить из последней", установленным в значение false. 

**Сообщение**: у *клиента есть разрешение на выполнение действия "Microsoft. COMPUTE/галереи/Images/Versions/READS" в области <ResourceId \> , однако текущий клиент <tenantID \> не имеет прав доступа к связанной подписке <subscriptionID \> .*  
**Причина**: виртуальная машина или масштабируемый набор был создан с помощью образа SIG в другом клиенте. Вы попытались внести изменения в виртуальную машину или масштабируемый набор, но у вас нет доступа к подписке, владеющей этим образом.  
**Обходное решение**. обратитесь к владельцу подписки на версию образа, чтобы предоставить доступ на чтение к версии образа.

**Сообщение**: *образ коллекции <ResourceId \> недоступен в регионе <региона \> . Обратитесь к владельцу образа для репликации в этот регион или измените запрошенный регион.*  
**Причина**. Виртуальная машина создается в регионе, который не входит в список опубликованных регионов для образа коллекции.  
**Решение**. либо выполните репликацию образа в регион, либо создайте виртуальную машину в одном из регионов в регионах публикации образа коллекции.

**Сообщение**: *параметр "osProfile" не разрешен.*  
**Причина**: для виртуальной машины, созданной из специализированной версии образа, предоставлены имя пользователя администратора, пароль или ключи SSH.  
**Обходное решение**. не включайте имя администратора, пароль или ключи SSH, если планируется создать виртуальную машину из этого образа. В противном случае используйте обобщенную версию образа и укажите имя администратора, пароль или ключи SSH.

**Сообщение**: *отсутствует обязательный параметр "osProfile" (null).*  
**Причина**. Виртуальная машина создается из обобщенного образа и в ней отсутствует имя администратора, пароль или ключи SSH. Так как обобщенные образы не сохранили имя пользователя, пароль или ключи SSH администратора, эти поля должны быть указаны во время создания виртуальной машины или масштабируемого набора.  
**Обходное решение**. Укажите имя пользователя администратора, пароль или ключи SSH или используйте специальную версию образа.

**Сообщение**: *не удается создать версию образа из коллекции из: <ResourceId, \> так как состояние ОС в родительском образе коллекции ("специализированное") не является "обобщенным".*  
**Причина**: версия образа создается из обобщенного источника, но его родительское определение является специализированным.  
Инструкции по **решению**: Создайте версию образа с помощью специализированного источника или используйте обобщенное универсальное определение.

**Сообщение**: *не удается обновить масштабируемый набор виртуальных машин <vmssName \> , так как текущее состояние ОС масштабируемого набора виртуальных машин является обобщенным, что отличается от обновленного состояния ОС образа коллекции, которое является специализированным.*  
**Причина**: текущий исходный образ масштабируемого набора является обобщенным исходным изображением, но он обновляется с помощью специализированного исходного образа. Текущее исходное изображение и новый исходный образ для масштабируемого набора должны иметь одно и то же состояние.  
**Решение**. чтобы обновить масштабируемый набор, используйте обобщенную версию образа.

**Сообщение**: *набор шифрования диска <дискенкриптионсетид \> в общей коллекции образов <versionID \> принадлежит к подписке <subscriptionID \_ 1 \> и не может использоваться с ресурсом "" в подписке <subscriptionID \_ 2 \>*  
**Причина**: набор шифрования диска, используемый для шифрования версии образа, находится в другой подписке, чем подписка для размещения версии образа.  
**Обходное решение**. Используйте ту же подписку для версии образа и набора шифрования диска.

**Сообщение**: *Создание масштабируемой виртуальной машины или набора виртуальных машин занимает много времени.*  
**Обходное решение**. Убедитесь, что **OSType** версии образа, с которой вы пытаетесь создать виртуальную машину или масштабируемый набор виртуальных машин, имеет тот же **OSType** источника, который использовался для создания версии образа. 

**Сообщение**. *ресурс с идентификатором <vmID \> имеет другой план [' { \" имя \" : \" <name> \" , \" Издатель:, \" \" <publisher> \" \" продукт \" : \" <product> \" , \" промотионкоде \" : \" <promotionCode> \" } '], отличный от плана образа родительской коллекции [' null '].*  
**Причина**: Определение родительского образа для развертываемой версии изображения не содержит сведений о плане покупки.  
Инструкции по **решению**: Создайте определение образа с теми же сведениями о плане покупки из сообщения об ошибке и создайте версию образа в определении образа.


## <a name="creating-a-disk-from-an-image-version"></a>Создание диска на основе версии образа ##

**Сообщение**: *недопустимое значение параметра imageReference.*  
**Причина**: предпринята попытка экспорта из версии образа SIG на диск, но использовалась не существующая в образе расположение LUN.    
**Обходное решение**. Проверьте версию образа, чтобы узнать, какие позиции LUN используются.

## <a name="sharing-resources"></a>Совместное использование ресурсов

Общий доступ к ресурсам коллекции образов, определений изображений и версий изображений в подписках включен с помощью [управления доступом на основе ролей Azure (Azure RBAC)](../role-based-access-control/rbac-and-directory-admin-roles.md). 

## <a name="replication-speed"></a>Скорость репликации

Используйте флаг **--expand репликатионстатус** , чтобы проверить, завершилась ли репликация для всех указанных целевых регионов. В противном случае дождитесь завершения задания в течение шести часов. Если происходит сбой, активируйте команду еще раз, чтобы создать и реплицировать версию образа. Если существует много целевых регионов, в которые реплицируется версия образа, рекомендуется выполнить репликацию поэтапно.

## <a name="azure-limits-and-quotas"></a>Ограничения и квоты Azure 

[Ограничения и квоты Azure](../azure-resource-manager/management/azure-subscription-service-limits.md) применяются ко всем ресурсам коллекции общих образов, определения и версии образа. Убедитесь, что вы находитесь за пределами ваших подписок. 


## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения см. в статье [Обзор коллекции общих образов](./shared-image-galleries.md).