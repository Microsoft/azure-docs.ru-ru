---
title: Создание виртуальной машины из управляемого образа в Azure
description: Создание виртуальной машины Windows из универсального управляемого образа с использованием Azure PowerShell или портала.
author: cynthn
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.topic: how-to
ms.date: 09/17/2018
ms.author: cynthn
ms.openlocfilehash: edcaf3fb92b78f2d1fab54cf4db21aaaff0e3d59
ms.sourcegitcommit: aaa65bd769eb2e234e42cfb07d7d459a2cc273ab
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/27/2021
ms.locfileid: "98881861"
---
# <a name="create-a-vm-from-a-managed-image"></a>Создание виртуальной машины из управляемого образа

Вы можете создать несколько виртуальных машин из управляемого образа виртуальной машины Azure, используя портал Azure или PowerShell. Управляемый образ виртуальной машины содержит сведения, необходимые для создания виртуальной машины, включая диски ОС и диски данных. Виртуальные жесткие диски (VHD), входящие в образ, включая диски ОС и диски данных, хранятся в виде управляемых дисков. 

Перед созданием виртуальной машины необходимо [создать управляемый образ виртуальной машины](capture-image-resource.md) для использования в качестве исходного образа и предоставить доступ на чтение к этому образу всем пользователям, которым он необходим. 

Один управляемый образ поддерживает до 20 одновременных развертываний. Попытка одновременного создания более 20 виртуальных машин из одного управляемого образа может привести к истечению времени ожидания подготовки из-за ограничений производительности хранилища для одного виртуального жесткого диска. Для одновременного создания более 20 виртуальных машин используйте образ из [общей коллекции образов](../shared-image-galleries.md), для которого настроена отдельная реплика для каждых 20-ти одновременных развертываний виртуальных машин.

## <a name="use-the-portal"></a>Использование портала

1. Используйте [портал Azure](https://portal.azure.com) для поиска управляемого образа. Найдите и выберите пункт **Образы**.
3. Выберите в списке необходимый образ. Откроется страница **Обзор** для образа.
4. В меню выберите **Создать виртуальную машину**.
5. Введите сведения о виртуальной машине. Имя пользователя и пароль понадобятся для входа на виртуальную машину. Когда все будет готово, нажмите кнопку **ОК**. Вы можете создать виртуальную машину в существующей группе ресурсов или выбрать **Создать**, чтобы создать группу ресурсов для хранения данных виртуальной машины.
6. Выберите размер виртуальной машины. Чтобы просмотреть дополнительные размеры, выберите **Просмотреть все** или измените фильтр **Supported disk type** (Поддерживаемые типы диска). 
7. Внесите необходимые изменения в разделе **Параметры** и щелкните **ОК**. 
8. На странице сводных данных вы увидите имя образа в строке **Частный образ**. Щелкните **ОК**, чтобы запустить развертывание виртуальной машины.


## <a name="use-powershell"></a>Использование PowerShell

С помощью PowerShell вы можете создать виртуальную машину из образа, используя упрощенный набор параметров для командлета [New-AzVm](/powershell/module/az.compute/new-azvm). Образ должен находиться в той же группе ресурсов, где будет создана виртуальная машина.

 

Для создания виртуальной машины из образа в упрощенном наборе параметров для [New-AzVm](/powershell/module/az.compute/new-azvm) нужно указать только имя, группу ресурсов и имя образа. В качестве имени всех ресурсов, которые создаются автоматически, New-AzVm будет использовать значение параметра **-Name**. В этом примере мы предоставим более подробные имена для каждого из ресурсов, которые автоматически создаются при помощи командлета. Также можно создать такие ресурсы, как виртуальная сеть, заранее и передать соответствующее имя ресурса в командлет. New-AzVm будет использовать существующие ресурсы, если их можно найти по имени.

В следующем примере на основе образа с именем *myImage* создается виртуальная машина с именем *myVMFromImage* в группе *myResourceGroup*. 


```azurepowershell-interactive
New-AzVm `
    -ResourceGroupName "myResourceGroup" `
    -Name "myVMfromImage" `
    -ImageName "myImage" `
    -Location "East US" `
    -VirtualNetworkName "myImageVnet" `
    -SubnetName "myImageSubnet" `
    -SecurityGroupName "myImageNSG" `
    -PublicIpAddressName "myImagePIP" `
    -OpenPorts 3389
```



## <a name="next-steps"></a>Дальнейшие действия
[Руководство. Создание и администрирование виртуальных машин Windows с помощью Azure PowerShell](tutorial-manage-vm.md)