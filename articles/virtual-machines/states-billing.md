---
title: Состояния и выставление счетов за виртуальные машины Azure
description: Общие сведения о различных состояниях, которые может ввести виртуальная машина, а также о том, когда взимается плата за пользователя.
services: virtual-machines
author: mimckitt
ms.service: virtual-machines
ms.subservice: billing
ms.topic: conceptual
ms.date: 03/8/2021
ms.author: mimckitt
ms.reviewer: cynthn
ms.openlocfilehash: c206cba3b23a0bf41ce32481980aa466e869bcde
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "104596303"
---
# <a name="states-and-billing-of-azure-virtual-machines"></a>Состояния и выставление счетов за виртуальные машины Azure

Виртуальные машины Azure проходят различные состояния, которые могут быть отнесены к состояниям *подготовки* и состояниям *включения*. Цель этой статьи — описать эти состояния и показать, когда клиентам будет выставлен счет, например, за использование экземпляра. 

## <a name="get-states-using-instance-view"></a>Получение состояний с помощью представления экземпляров

API представления экземпляра предоставляет информацию о состоянии выполнения виртуальной машины. Дополнительные сведения см. в разделе [Virtual Machines — Instance View](/rest/api/compute/virtualmachines/instanceview) (Просмотр экземпляров виртуальных машин в документации по API).

Обозреватель ресурсов Azure предоставляет простой пользовательский интерфейс для просмотра состояния выполнения виртуальной машины — [Обозреватель ресурсов](https://resources.azure.com/).

Состояния подготовки отображаются в свойствах виртуальной машины и в представлении экземпляра. Состояния включения доступно в представлении экземпляра виртуальной машины.

Чтобы узнать рабочее состояние всех виртуальных машин в подписке, используйте [API "Виртуальные машины — показать все"](/rest/api/compute/virtualmachines/listall) с параметром **statusOnly**, которому задано значение *true*.

> [!NOTE]
> [Виртуальные машины. список всех API](/rest/api/compute/virtualmachines/listall) с параметром **statusOnly** , имеющим значение true, будет получать состояния электропитания всех виртуальных машин в подписке. Однако в некоторых редких ситуациях состояние электропитания может быть недоступно из-за периодических проблем в процессе получения. В таких ситуациях рекомендуется повторить попытку с помощью того же API или с помощью [работоспособность ресурсов Azure](../service-health/resource-health-overview.md) или [графа ресурсов Azure](..//governance/resource-graph/overview.md) , чтобы проверить состояние энергопотребления виртуальных машин.
 
## <a name="power-states-and-billing"></a>Состояния электропитания и выставления счетов

Состояние включения представляет собой последнее известное состояние виртуальной машины.

:::image type="content" source="./media/virtual-machines-common-states-lifecycle/vm-power-states.png" alt-text="На рисунке изображены состояния электропитания, которые может пройти виртуальная машина. ":::

В следующей таблице представлено описание каждого состояния экземпляра и указано, будет ли выставлен счет за его использование.

| Состояние электропитания | Описание | Выставление счетов |  
|---|---|---|
| Запуск| Включение питания виртуальной машины. |Не оплачивается * | 
| Запущен | Виртуальная машина находится в полном объеме. Это стандартное рабочее состояние. | Счета выставляются | 
| Остановка | Это переходное состояние между запуском и остановкой. | Счета выставляются| 
|Остановлена | Работа виртуальной машины завершена в гостевой ОС или с помощью API-интерфейсов выключена. В этом состоянии виртуальная машина по-прежнему будет выдачу базового оборудования. Это состояние также называется *остановленным (выделено)*. | Счета выставляются | 
| Отмена выделения | Это переходное состояние между выполнением и освобождением. | Не оплачивается * | 
| Освобождено | Виртуальная машина освободила аренду на базовом оборудовании и полностью выключена. Это состояние также называется *Stopped (освобождено)*. | Не оплачивается * | 

&#42; некоторых ресурсов Azure, таких как [диски](https://azure.microsoft.com/pricing/details/managed-disks) и [сеть](https://azure.microsoft.com/pricing/details/bandwidth/) , будет взиматься плата.


## <a name="provisioning-states"></a>Состояния подготовки

Состояние подготовки — это состояние инициированной пользователем операции уровня управления на виртуальной машине. Эти состояния отделены от состояния включения виртуальной машины.

:::image type="content" source="./media/virtual-machines-common-states-lifecycle/vm-provisioning-states.png" alt-text="На рисунке показано состояние подготовки виртуальной машины.":::

| Состояние подготовки | Описание | Состояние электропитания | Выставление счетов | 
|---|---|---|---|
| Создать | Создание виртуальной машины. | Запуск | Не оплачивается * | 
| Update | Обновляет модель для существующей виртуальной машины. Некоторые немоделиные изменения виртуальной машины, такие как запуск и перезапуск, попадают в состояние обновления. | Запущен | Счета выставляются | 
| Удалить | Удаление виртуальной машины. | Отмена выделения | Не оплачивается * |
| Отменить выделение | Виртуальная машина полностью остановлена и удалена из базового узла. Отмена выделения виртуальной машины считается обновлением и отображает состояние подготовки, аналогичное обновлению. | Отмена выделения | Не оплачивается * | 

&#42; некоторых ресурсов Azure, таких как [диски](https://azure.microsoft.com/pricing/details/managed-disks) и [сеть](https://azure.microsoft.com/pricing/details/bandwidth/) , будет взиматься плата.

## <a name="os-provisioning-states"></a>Состояния подготовки ОС
Состояния подготовки ОС применяются только к виртуальным машинам, созданным с помощью образа ОС. Для специализированных образов эти состояния отображаться не будут. 

:::image type="content" source="./media/virtual-machines-common-states-lifecycle/os-provisioning-states.png" alt-text="На рисунке показана подготовка виртуальной машины к просмотру.":::

| Состояние подготовки ОС | Описание | Состояние электропитания | Выставление счетов | 
|---|---|---|---|
| оспровисионингинпрогресс | Виртуальная машина запущена, и выполняется установка гостевой ОС. | Запущен | Счета выставляются | 
| оспровисионингкомплете | Это непродолжительное состояние. Виртуальная машина быстро переходит из этого состояния в состояние **успеха**. Если расширения по-прежнему устанавливаются, это состояние будет отображаться до тех пор, пока они не будут завершены. | Запущен | Счета выставляются | 
| Выполнено | Действия, инициированные пользователем, завершены. | Запущен | Счета выставляются | 
| Сбой | Представляет неудачную операцию. Дополнительные сведения и возможные решения см. в коде ошибки. | Запущен  | Счета выставляются | 


## <a name="next-steps"></a>Дальнейшие действия
- Ознакомьтесь с [документацией по управлению затратами и выставлению счетов Azure](../cost-management-billing/index.yml)
- Используйте [Калькулятор цен Azure](https://azure.microsoft.com/pricing/calculator/) для планирования развертываний.
- Дополнительные сведения о мониторинге виртуальной машины см. [в статье мониторинг виртуальных машин в Azure](../azure-monitor/vm/monitor-vm-azure.md).