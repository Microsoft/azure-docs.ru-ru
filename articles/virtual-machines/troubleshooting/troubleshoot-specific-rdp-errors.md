---
title: Некоторые сообщения об ошибках протокола удаленного рабочего стола для виртуальных машин Azure | Документация Майкрософт
description: Сведения о некоторых ошибках, которые могут происходить при попытке подключения к удаленному рабочему столу виртуальной машины Windows в Azure.
keywords: Ошибка удаленного рабочего стола, ошибка подключения к удаленному рабочему столу, не удается подключиться к виртуальной машине, диагностика удаленного рабочего стола
services: virtual-machines-windows
documentationcenter: ''
author: genlin
manager: dcscontentpm
editor: ''
tags: top-support-issue,azure-service-management,azure-resource-manager
ms.assetid: 5feb1d64-ee6f-4907-949a-a7cffcbc6153
ms.service: virtual-machines-windows
ms.workload: infrastructure-services
ms.tgt_pltfrm: vm-windows
ms.topic: troubleshooting
ms.date: 10/31/2018
ms.author: genli
ms.openlocfilehash: 808443cb805b2dee2426198f9cd4f7ba502d8999
ms.sourcegitcommit: 2bd0a039be8126c969a795cea3b60ce8e4ce64fc
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/14/2021
ms.locfileid: "98197512"
---
# <a name="troubleshooting-specific-rdp-error-messages-to-a-windows-vm-in-azure"></a>Устранение некоторых ошибок подключения по протоколу RDP к виртуальной машине Windows в Azure
При попытке подключиться к удаленному рабочему столу виртуальной машины Windows в Azure могут возникать определенные ошибки. В этой статье описаны некоторые наиболее распространенные сообщения об ошибках, а также действия по их устранению. Если вам не удается подключиться к виртуальной машине по протоколу RDP, но сообщение об ошибке не появляется, см. [руководство по устранению неполадок с подключением к удаленному рабочему столу](troubleshoot-rdp-connection.md).

Сведения о некоторых определенных ошибках смотрите далее в этой статье.

* [Удаленный сеанс отключен, поскольку отсутствуют доступные серверы лицензирования удаленных рабочих столов, которые могли бы провести лицензирование](#rdplicense).
* [Службе удаленного рабочего стола не удается найти имя компьютера](#rdpname).
* [Произошла ошибка проверки подлинности. Не удается связаться с локальным администратором безопасности»](#rdpauth).
* [Ошибка системы безопасности Windows: недействительные учетные данные](#wincred).
* [Не удается подключиться к удаленному компьютеру](#rdpconnect).

<a id="rdplicense"></a>

## <a name="the-remote-session-was-disconnected-because-there-are-no-remote-desktop-license-servers-available-to-provide-a-license"></a>Удаленный сеанс отключен, так как отсутствуют доступные серверы лицензирования удаленных рабочих столов, которые могли бы обеспечить лицензирование.
Причина: истек 120-дневный льготный период лицензирования для роли сервера удаленных рабочих столов, и вам необходимо установить лицензии.

В качестве решения вы можете сохранить локальную копию RDP-файла с портала, а затем установить подключение, выполнив следующую команду в командной строке PowerShell. На этом шаге лицензирование будет отключено только для текущего подключения.

```powershell
mstsc <File name>.RDP /admin
```

Если вы не планируете устанавливать более двух одновременных подключений к удаленному рабочему столу виртуальной машины, вы можете удалить роль сервера удаленных рабочих столов с помощью диспетчера серверов.

Дополнительные сведения см. в записи блога [RDP to Azure VM fails with "No Remote Desktop License Servers available"](/archive/blogs/mast/rdp-to-azure-vm-fails-with-no-remote-desktop-license-servers-available) (RDP-подключение к виртуальной машине Azure выдает ошибку, связанную с отсутствием серверов лицензирования удаленных рабочих столов).

<a id="rdpname"></a>

## <a name="remote-desktop-cant-find-the-computer-name"></a>Службе удаленного рабочего стола не удается найти имя компьютера.
Причина: клиенту удаленного рабочего стола не удается разрешить имя компьютера в параметрах RDP-файла.

Возможные решения:

* Если вы работаете в интрасети организации, убедитесь в том, что у вашего компьютера есть доступ к прокси-серверу и возможность передавать на него данные по протоколу HTTPS.
* Если вы работаете с локальным RDP-файлом, попробуйте воспользоваться файлом, созданным с помощью портала. На этом шаге вы проверите правильность DNS-имени виртуальной машины, имени облачной службы и порта конечной точки виртуальной машины. Вот пример RDP-файла, созданного порталом:

    ```output
    full address:s:tailspin-azdatatier.cloudapp.net:55919
    prompt for credentials:i:1
    ```

Адресная часть в этом RDP-файле состоит из:

* полного доменного имени облачной службы, в которой находится виртуальная машина (в этом примере — tailspin-azdatatier.cloudapp.net);
* внешнего TCP-порта конечной точки для обмена данными с удаленным рабочим столом (55919).

<a id="rdpauth"></a>

## <a name="an-authentication-error-has-occurred-the-local-security-authority-cannot-be-contacted"></a>Произошла ошибка проверки подлинности. Не удается связаться с локальным администратором безопасности».
Причина: целевой виртуальной машине не удается найти администратор безопасности, указанного в части имени пользователя ваших учетных данных.

Если имя пользователя указано в формате *секуритяусорити* \\ *имя* пользователя (например: CORP\User1), часть *секуритяусорити* является либо именем компьютера виртуальной машины (для локального центра безопасности), либо Active Directory именем домена.

Возможные решения:

* Если учетная запись является локальной для виртуальной машины, проверьте правильность написания имени виртуальной машины.
* Если учетная запись относится к домену Active Directory, проверьте правильность написания имени домена.
* Если она является учетной записью домена Active Directory и имя домена указано правильно, убедитесь, что контроллер домена доступен для этого домена. В виртуальных сетях Azure с контроллерами домена этот компонент может быть часто недоступен, так как он не запущен. В качестве решения вместо учетной записи домена используйте учетную запись локального администратора.

<a id="wincred"></a>

## <a name="windows-security-error-your-credentials-did-not-work"></a>Ошибка безопасности Windows: учетные данные не работают.
Причина: целевой виртуальной машине не удается проверить имя и пароль учетной записи.

Компьютер Windows принимает данные локальных учетных записей и учетных записей домена.

* Для локальных учетных записей используйте синтаксис *ComputerName* \\ *username* (пример: SQL1\Admin4798).
* Для учетных записей домена используйте  \\ синтаксис *имени пользователя* DomainName (например: контосо\петеродман).

Если вы повысили уровень виртуальной машины до контроллера домена в новом лесу Active Directory, локальная учетная запись администратора, под которой вы выполнили вход в систему, преобразуется в эквивалентную учетную запись с тем же паролем в новом лесу и домене. Затем локальная учетная запись удаляется.

Например, если вы вошли с локальной учетной записью DC1\DCAdmin и повысили уровень виртуальной машины до контроллера домена corp.contoso.com в новом лесу, локальная учетная запись DC1\DCAdmin удаляется, а вместо нее создается новая учетная запись домена CORP\DCAdmin с тем же паролем.

Убедитесь, что имя учетной записи — это имя, которое виртуальная машина может проверить и принять как действительную учетную запись, а пароль указан правильно.

Сведения о том, как изменить пароль учетной записи локального администратора, см. в статье [Сброс службы удаленных рабочих столов или ее пароля для входа в систему на виртуальной машине под управлением Windows](reset-rdp.md).

<a id="rdpconnect"></a>

## <a name="this-computer-cant-connect-to-the-remote-computer"></a>Не удается подключиться к удаленному компьютеру.
Причина: у учетной записи, которую вы используете для подключения, нет прав для входа на удаленный рабочий стол.

На каждом компьютере Windows есть локальная группа пользователей удаленного рабочего стола. Она содержит учетные записи и группы, обладающие правом удаленного входа. Аналогичные права доступа есть и у участников локальной группы администраторов, хотя соответствующие учетные записи и не входят в локальную группу пользователей удаленного рабочего стола. На компьютерах, подключенных к домену, локальная группа администраторов также содержит учетные записи администраторов этого домена.

Убедитесь в том, что у учетной записи, которую вы используете для подключения, есть права для входа на удаленный рабочий стол. Для устранения этой проблемы воспользуйтесь учетной записью администратора домена или локального администратора, чтобы создать подключение к удаленному рабочему столу. Чтобы добавить требуемую учетную запись в локальную группу пользователей удаленного рабочего стола, используйте оснастку "Консоль управления (MMC)" (**Служебные программы > Локальные пользователи и группы > Группы > Пользователи удаленного рабочего стола**).

## <a name="next-steps"></a>Дальнейшие действия
Если описанные выше ошибки отсутствуют и при подключении по протоколу RDP возникает неизвестная проблема, см. [руководство по устранению неполадок с подключением к удаленному рабочему столу](troubleshoot-rdp-connection.md).

* Сведения об устранении неполадок с доступом к приложениям, работающим на виртуальной машине, см. в статье [Устранение проблем с подключением к приложениям на виртуальных машинах Linux в Azure](./troubleshoot-app-connection.md?toc=/azure/virtual-machines/linux/toc.json).
* Если вы подключаетесь к виртуальной машине Linux в Azure по протоколу SSH и у вас возникают проблемы, см. статью [Устранение неполадок с SSH-подключением к виртуальной машине Azure Linux: сбой, ошибка или отклонение](./troubleshoot-ssh-connection.md?toc=/azure/virtual-machines/linux/toc.json).
