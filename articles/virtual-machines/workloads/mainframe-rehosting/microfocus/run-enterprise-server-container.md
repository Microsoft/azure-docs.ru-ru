---
title: Запуск Micro Focus Enterprise Server 5,0 в контейнере DOCKER в Azure | Документация Майкрософт
description: Из этой статьи вы узнаете, как запустить Micro Focus Enterprise Server 5,0 в контейнере DOCKER на Microsoft Azure.
services: virtual-machines
documentationcenter: ''
author: maggsl
ms.author: edprice
manager: edprice
editor: edprice
ms.topic: conceptual
ms.date: 06/29/2020
tags: ''
keywords: ''
ms.service: virtual-machines
ms.subservice: mainframe-rehosting
ms.openlocfilehash: 146fc59704719fd3aebb03b9b90a176221beea10
ms.sourcegitcommit: ac035293291c3d2962cee270b33fca3628432fac
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2021
ms.locfileid: "104950694"
---
# <a name="run-micro-focus-enterprise-server-50-in-a-docker-container-on-azure"></a>Запуск Micro Focus Enterprise Server 5,0 в контейнере DOCKER в Azure

Вы можете запустить Micro Focus Enterprise Server 5,0 в контейнере DOCKER в Azure. В этом руководстве показано, как это делать. В нем используется демонстрация Windows CICS (система управления сведениями о клиентах) акктдемо для Enterprise Server.

DOCKER добавляет в приложения переносимость и изоляцию. Например, можно экспортировать образ DOCKER с одной виртуальной машины Windows (ВМ) для запуска в другой или из репозитория в Windows Server с помощью DOCKER. Образ DOCKER выполняется в новом расположении с той же конфигурацией, без необходимости установки Enterprise Server. Он является частью образа. Рекомендации по лицензированию по-прежнему применяются.

В этом руководстве мы устанавливаем **Windows 2016 Datacenter с контейнерами** виртуальных машин из Azure Marketplace. Эта виртуальная машина включает **DOCKER 18.09.0**. В следующих шагах показано, как развернуть контейнер, запустить его, а затем подключиться к нему с помощью эмулятора 3270.

## <a name="prerequisites"></a>Предварительные условия

Прежде чем приступить к работе, ознакомьтесь с этими предварительными условиями.

-   Подписка Azure. Если у вас еще нет подписки Azure, создайте [бесплатную учетную запись](https://azure.microsoft.com/free/?WT.mc_id=A261C142F), прежде чем начать работу.

-   Программное обеспечение Micro Focus и действующая лицензия (или лицензия на пробную версию). Если вы являетесь существующим клиентом Micro Focus, свяжитесь с вашим представителям Micro Focus. В противном случае [запросите пробную версию](https://www.microfocus.com/products/enterprise-suite/enterprise-server/trial/).

    > [!Note] 
    > Демонстрационные файлы DOCKER включены в состав Enterprise Server 5,0. В этом руководстве используется ENT \_ Server \_ файлы dockerfile \_ 5,0 \_windows.zip. Откройте его из того же места, где был получен доступ к файлу установки Enterprise Server, или перейдите в раздел " *Micro Focus* ", чтобы приступить к работе.

-   Документация для [Enterprise Server и разработчика Enterprise](https://www.microfocus.com/documentation/enterprise-developer/#%22).

## <a name="create-a-vm"></a>Создание виртуальной машины

1.  Защитите носитель от файла ENT \_ Server \_ файлы dockerfile \_ 5,0 \_windows.zip. Обеспечьте безопасность файла лицензирования ES-DOCKER-мфлик-XXXXXXXX. (требуется для создания образов DOCKER).

2.  Создайте виртуальную машину. Для этого откройте портал Azure, выберите **создать ресурс** в верхнем левом меню и отфильтруйте *операционную систему Windows Server*. В результатах выберите **Windows Server.** На следующем экране выберите **Windows Server 2016 Datacenter — с контейнерами**.

    ![Снимок экрана результатов поиска портал Azure](./media/run-image-1.png)

3.  Чтобы настроить свойства виртуальной машины, выберите сведения об экземпляре:

    1.  Выберите размер виртуальной машины. Для работы с этим руководством рассмотрите возможность использования стандартной виртуальной машины **DS2 \_ v3** с 2 ВИРТУАЛЬНЫХ ЦП и 16 ГБ памяти.

    2.  Выберите **регион** и **группу ресурсов** , в которых вы хотите выполнить развертывание.

    3.  Для **параметров доступности** используйте значение по умолчанию.

    4.  В поле **username (имя пользователя**) введите учетную запись администратора, которую вы хотите использовать, и пароль.

    5.  Убедитесь, что **порт 3389 RDP** открыт. Только этот порт должен быть общедоступным, чтобы вы могли войти на виртуальную машину. Затем примите все значения по умолчанию и нажмите кнопку **проверить и создать**.

    ![Снимок экрана: создание области виртуальной машины](./media/run-image-2.png)

4.  Дождитесь завершения развертывания (несколько минут). Появится сообщение о том, что виртуальная машина создана.

5.  Выберите **Переход к ресурсу** , чтобы открыть колонку " **Обзор** " для виртуальной машины.

6.  Справа выберите **подключить**. Параметры **Подключение к виртуальной машине** отображаются справа.

7.  Нажмите кнопку **скачать RDP-файл** , чтобы скачать файл протокола удаленного рабочего стола (RDP), который позволяет присоединиться к виртуальной машине.

8.  После завершения загрузки файла откройте его и введите имя пользователя и пароль, созданные для виртуальной машины.

    > [!Note]    
    > Не используйте корпоративные учетные данные для входа. (Предполагается, что клиент RDP может использовать эти данные. Это не так.)

9.  Выберите **Дополнительные параметры**, а затем выберите учетные данные виртуальной машины.

На этом этапе виртуальная машина работает и подключена через RDP. Вы вошли и готовы к следующему шагу.

## <a name="create-a-sandbox-directory-and-upload-the-zip-file"></a>Создание каталога "песочницы" и отправка Zip-файла

1.  Создайте каталог на виртуальной машине, где можно передать файлы демонстрационной версии и лицензии. Например, **C: \\ песочницей**.

2.  Отправьте **ENT \_ server \_ файлы dockerfile \_ 5,0 \_windows.zip** и файл **ES-DOCKER--XXXXXXXX. мфлик** в созданный каталог.

3.  Извлеките содержимое ZIP-файла в каталог **Windows ENT \_ server \_ файлы dockerfile \_ 5,0 \_** , созданный процессом извлечения. Этот каталог содержит файл сведений (в формате HTML и txt) и два подкаталога, **ентерприсесервер** и **примеры**.

4.  Скопируйте **ES-DOCKER-мфлик-XXXXXXXX.** в папку C: \\ Sandbox \\ ENT \_ Server \_ файлы dockerfile \_ 5,0 \_ Windows \\ ентерприсесервер and C: \\ Песочница \\ ENT \_ Server \_ файлы dockerfile \_ 5,0 \_ Windows \\ examples \\ CICS Directories.  
      
    > [!Note]
    > Обязательно скопируйте файл лицензирования в оба каталога. Они необходимы для этапа сборки DOCKER, чтобы убедиться, что образы должным образом лицензированы.

## <a name="check-docker-version-and-create-base-image"></a>Проверка версии DOCKER и создание базового образа

> [!Important]  
> Создание соответствующего образа DOCKER — это двухэтапный процесс. Сначала создайте базовый образ Enterprise Server 5,0. Затем создайте еще один образ для платформы x64. Несмотря на то, что можно создать образ x86 (32-bit), используйте 64-разрядный образ.

1.  Откройте командную строку.

2.  Убедитесь, что DOCKER установлен. В командной строке введите: **версия DOCKER** .  
    Например, при написании этой версии была 18.09.0.

3.  Чтобы изменить каталог, введите:  
    **компакт-диск \\ Песочница \\ ENT \_ server \_ файлы dockerfile \_ 5,0 \_ Windows \\ ентерприсесервер**.

4.  Введите **bld.bat иакцептеула** , чтобы начать процесс сборки для первоначального базового образа. Подождите несколько минут, пока этот процесс будет выполнен. В результатах Обратите внимание на два созданных образа — один для x64 и один для x86:

    ![командное окно отображения изображений](./media/run-image-3.png)

5.  Чтобы создать окончательный образ для демонстрации CICS, перейдите в каталог CICS, введя команду **CD \\ Песочница \\ ent \_ Server \_ файлы dockerfile \_ 5,0 \_ Windows \\ examples \\ CICS**.

6.  Чтобы создать образ, введите **bld.bat x64**. Подождите несколько минут, пока процесс будет выполнен, и сообщение о том, что образ был создан.

7.  Введите **образы DOCKER** , чтобы отобразить список всех образов DOCKER, установленных на виртуальной машине. Убедитесь, что для **микрофокуса/ES-акктдемо** один из них.

    ![Командное окно изображения ES-акктдемо](./media/run-image-4.png)

## <a name="run-the-image"></a>Запуск образа

1.  Чтобы запустить Enterprise Server 5,0 и приложение акктдемо, в командной строке введите:

    ```
    **docker run -p 16002:86/tcp -p 16002:86/udp -p 9040-9050:9040-9050 -p 9000-9010:9000-9010 -ti --network="nat" --rm microfocus/es-acctdemo:win\_5.0\_x64
    ```

1.  Установите эмулятор терминала 3270, например [x3270](http://x3270.bgp.nu/) , и используйте его для подключения через порт 9040 к образу, который работает.

2.  Получите IP-адрес контейнера акктдемо, чтобы DOCKER мог работать как DHCP-сервер для контейнеров, которыми он управляет:

    1.  Возвращает идентификатор выполняющегося контейнера. Введите **DOCKER PS** в командной строке и запишите идентификатор (**22a0fe3159d0** в этом примере). Сохраните его для следующего шага.

    2.  Чтобы получить IP-адрес для контейнера акктдемо, используйте идентификатор контейнера из предыдущего шага следующим образом:

    ```
    docker inspect \<containerID\> --format="{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}"
    ```

    Пример:

    ```
    docker inspect 22a0fe3159d0 --format="{{range.NetworkSettings.Networks}}{{.IPAddress}}{{end}}"
    ```

4. Запишите IP-адрес для образа акктдемо. Например, адрес в следующем выводе — 172.19.202.52.

    ![Снимок экрана командное окно с IP-адресом](./media/run-image-5.png)

5. Подключите образ с помощью эмулятора. Настройте эмулятор для использования адреса образа акктдемо и порта 9040. Здесь это **172.19.202.52:9040**. Ваш вид будет похожим. Откроется экран **входа в CICS** .

    ![Снимок экрана с Signon на CICS](./media/run-image-6.png)

6. Войдите в регион CICS, введя **СИСАД** для **UserID** и **СИСАД** в качестве **пароля**.

7. Очистите экран, используя кэймап эмулятора. Для x3270 выберите пункт меню " **кэймап** ".

8. Чтобы запустить приложение акктдемо, введите **acct**. Отобразится начальный экран приложения.

     ![На снимке экрана показано окно консоли, в котором отображается приложение.](./media/run-image-7.png)

9. Поэкспериментируйте с отображением типов учетных записей. Например, введите **D** для запроса и **11111** для **учетной записи**. Другие номера учетных записей для попыток — 22222, 33333 и т. д.

    ![На снимке экрана показано изменение различных значений в приложении.](./media/run-image-8.png)

10. Чтобы отобразить консоль администрирования Enterprise Server, откройте командную строку и введите команду **start http: 172.19.202.52:86**.

    ![Консоль администрирования Enterprise Server](media/run-image-9.png)

Вот и все! Теперь вы используете приложение CICS и управляете им в контейнере DOCKER.

## <a name="next-steps"></a>Дальнейшие действия

-   [Установка Micro Focus Enterprise Server 5,0 и Enterprise Developer 5,0 в Azure](./set-up-micro-focus-azure.md)

-   [Перенос приложений с мейнфреймов](/azure/architecture/cloud-adoption/infrastructure/mainframe-migration/application-strategies)
