---
title: Общие сведения о сценарии аварийного восстановления Oracle в среде Azure | Документация Майкрософт
description: Сценарий аварийного восстановления базы данных Oracle Database 12c в среде Azure
author: dbakevlar
ms.service: virtual-machines
ms.subservice: oracle
ms.collection: linux
ms.topic: article
ms.date: 08/02/2018
ms.author: kegorman
ms.openlocfilehash: 68b5b9dfd205628c9d7c430df4c0230267752e01
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "101669954"
---
# <a name="disaster-recovery-for-an-oracle-database-12c-database-in-an-azure-environment"></a>Аварийное восстановление базы данных Oracle Database 12c в среде Azure.

## <a name="assumptions"></a>Предположения

- У вас есть представление о структуре Oracle Data Guard и средах Azure.


## <a name="goals"></a>Цели
- Создать топологию и конфигурацию, которые соответствуют вашим требованиям к аварийному восстановлению.

## <a name="scenario-1-primary-and-dr-sites-on-azure"></a>Сценарий 1. Основные сайты и сайты аварийного восстановления в Azure

У клиента есть база данных Oracle на основном сайте. Сайт аварийного восстановления находится в другом регионе. Клиент использует Oracle Data Guard для быстрого восстановления между этими сайтами. На основном сайте также создана база данных-получатель для отчетности и других целей. 

### <a name="topology"></a>Топология

Краткое описание настройки в Azure:

- два сайта (первичный сайт и сайт для аварийного восстановления);
- две виртуальные сети;
- две базы данных Oracle с Data Guard (основная и резервная);
- две базы данных Oracle с Golden Gate или Data Guard (только основной сайт);
- две службы приложений: одна на основном сайте, другая на сайте аварийного восстановления;
- *группа доступности*, которая используется для службы приложений и базы данных на основном сайте;
- одна среда Jumpbox на каждом сайте, которая ограничивает доступ к частной сети и разрешает вход только администратору;
- среда Jumpbox, служба приложения, база данных и VPN-шлюз в отдельных подсетях;
- группа безопасности сети, применяющаяся в подсетях приложения и базы данных;

![Схема, в которой показаны основной сайт и сайты аварийного восстановления в Azure.](./media/oracle-disaster-recovery/oracle_topology_01.png)

## <a name="scenario-2-primary-site-on-premises-and-dr-site-on-azure"></a>Сценарий 2. Основной локальный сайт и сайт аварийного восстановления в Azure

Клиент имеет локальную базу данных Oracle (основной сайт). Сайт аварийного восстановления — в Azure. Oracle Data Guard используется для быстрого восстановления между этими сайтами. На основном сайте также создана база данных-получатель для отчетности и других целей. 

Существует два подхода для такой конфигурации.

### <a name="approach-1-direct-connections-between-on-premises-and-azure-requiring-open-tcp-ports-on-the-firewall"></a>Способ 1. Прямые соединения между локальной средой и Azure, для чего в брандмауэре необходимо открыть TCP-порты 

Мы не рекомендуем использовать прямые соединения, так как они позволяют открыть внешний доступ к TCP-портам.

#### <a name="topology"></a>Топология

Ниже приведено краткое описание настройки в Azure:

- один сайт для аварийного восстановления; 
- Одна виртуальную сеть
- одна база данных Oracle с Data Guard (активная);
- одна служба приложения на сайте аварийного восстановления;
- одна среда Jumpbox, которая ограничивает доступ к частной сети и разрешает вход только администратору;
- среда Jumpbox, служба приложения, база данных и VPN-шлюз в отдельных подсетях;
- группа безопасности сети, применяющаяся в подсетях приложения и базы данных;
- политика или правило NSG, разрешающие использовать входящий TCP-порт 1521 (или порт, определенный пользователем);
- политика или правило NSG, разрешающие доступ к виртуальной сети только IP-адресам или локальным адресам (для базы данных или приложения).

![Схема, на которой показаны прямые подключения между локальной средой и Azure, в брандмауэре которого требуются открытые TCP-порты.](./media/oracle-disaster-recovery/oracle_topology_02.png)

### <a name="approach-2-site-to-site-vpn"></a>Способ 2. VPN-подключение типа "сеть — сеть"
Оптимальным способом является использование VPN-подключения типа "сеть — сеть". Дополнительные сведения о настройке VPN см. в статье [Создание виртуальной сети с VPN типа "сеть — сеть" с помощью интерфейса командной строки](../../../vpn-gateway/vpn-gateway-howto-site-to-site-resource-manager-cli.md).

#### <a name="topology"></a>Топология

Ниже приведено краткое описание настройки в Azure:

- один сайт для аварийного восстановления; 
- Одна виртуальную сеть 
- одна база данных Oracle с Data Guard (активная);
- одна служба приложения на сайте аварийного восстановления;
- одна среда Jumpbox, которая ограничивает доступ к частной сети и разрешает вход только администратору;
- среда Jumpbox, служба приложения, база данных и VPN-шлюз находятся в отдельных подсетях;
- группа безопасности сети, применяющаяся в подсетях приложения и базы данных;
- VPN-подключение типа "сеть — сеть" между локальной средой и Azure.

![Снимок экрана страницы топологии аварийного восстановления](./media/oracle-disaster-recovery/oracle_topology_03.png)

## <a name="additional-reading"></a>Дополнительные материалы

- [Design and implement an Oracle database in Azure](oracle-design.md) (Разработка базы данных Oracle и ее реализация в Azure)
- [Настройка Oracle Data Guard](configure-oracle-dataguard.md)
- [Реализация Oracle Golden Gate на виртуальной машине Azure под управлением Linux](configure-oracle-golden-gate.md)
- [Создание резервных копий и восстановление базы данных Oracle Database 12c на виртуальной машине Linux в Azure](./oracle-overview.md)


## <a name="next-steps"></a>Дальнейшие действия

- Изучите [руководство по созданию высокодоступных виртуальных машин](../../linux/create-cli-complete.md).
- [Изучите примеры развертывания виртуальных машин с помощью интерфейса командной строки](https://github.com/Azure-Samples/azure-cli-samples/tree/master/virtual-machine).