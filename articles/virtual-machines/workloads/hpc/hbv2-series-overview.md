---
title: Обзор виртуальных машин серии HBv2. виртуальные машины Azure | Документация Майкрософт
description: Сведения о размере виртуальной машины серии HBv2 в Azure.
services: virtual-machines
author: vermagit
tags: azure-resource-manager
ms.service: virtual-machines
ms.subservice: hpc
ms.workload: infrastructure-services
ms.topic: article
ms.date: 09/28/2020
ms.author: amverma
ms.reviewer: cynthn
ms.openlocfilehash: 59dd953b2116bc1ec7bd0a581cc181df64fbf49e
ms.sourcegitcommit: e6de1702d3958a3bea275645eb46e4f2e0f011af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "104721153"
---
# <a name="hbv2-series-virtual-machine-overview"></a>Обзор виртуальных машин серии HBv2 

 
Максимизация производительности приложений с высокой производительностью (HPC) в AMD ЕПИК требует продуманного подхода к локализации памяти и размещению процессов. Ниже мы рассмотрим архитектуру AMD ЕПИК и нашу реализацию ИТ в Azure для приложений HPC. Мы будем использовать термин **пнума** для ссылки на физический домен NUMA и **внума** для ссылки на виртуализированный домен NUMA. 

Физически сервер [серии HBv2](../../hbv2-series.md) — это 2 * 64-ядерные цп ЕПИК 7742, что составляет всего 128 физических ядер. Эти ядра 128 делятся на Пнумаые домены 32 (16 на сокет), каждый из которых имеет 4 ядра и называется "AMD" в качестве **ядра комплексной сложной** (или **КККС**). Каждый КККС имеет собственный кэш L3, что позволяет операционной системе видеть границу Пнума/Внума. Четыре смежных Ккксс имеют доступ к 2 каналам физической памяти DRAM. 

Чтобы предоставить службе низкоуровневой оболочки Azure возможность работы, не мешая работе виртуальной машины, мы резервируем физические домены Пнума 0 и 16 (т. е. Первый КККС каждого разъема ЦП). Все остальные 30 Пнума доменов назначаются виртуальной машине, где они становятся Внума. Таким образом, виртуальная машина будет видеть:

`(30 vNUMA domains) * (4 cores/vNUMA) = 120` количество ядер на виртуальную машину 

Сама виртуальная машина не осведомлена о том, что Пнума 0 и 16 зарезервированы. Он перечислит Внума, который он видит как 0-29, с 15 Внума на сокет, Внума 0-14 на Всоккет 0 и Внума 15-29 на Всоккет 1. В следующем разделе приведены инструкции по оптимальному запуску приложений MPI на этом асимметричном макете NUMA. 

Закрепление процессов будет работать на виртуальных машинах серии HBv2, так как для гостевой виртуальной машины мы предоставляем базовую Кристалл "как есть". Мы настоятельно рекомендуем закреплять процесс для обеспечения оптимальной производительности и согласованности. 


## <a name="hardware-specifications"></a>Характеристики оборудования 

| Спецификации оборудования          | Виртуальная машина серии HBv2                   | 
|----------------------------------|----------------------------------|
| Ядра                            | 120 (SMT отключено)               | 
| ЦП                              | AMD ЕПИК 7742                    | 
| Частота ЦП (не AVX)          | ~ 3,1 ГГц (один + все ядра)    | 
| Память                           | 4 ГБ/ядро (всего 480 ГБ)         | 
| Локальный диск                       | 960 Гб NVMe (Block), SSD 480 ГБ (файл подкачки) | 
| Infiniband;                       | 200 Гбит/с ЕДР Mellanox ConnectX-6 | 
| Сеть                          | 50 ГБ/с Ethernet (40 ГБ/с) для использования во второй Смартник Azure | 


## <a name="software-specifications"></a>Спецификации программного обеспечения 

| Спецификации программного обеспечения     | Виртуальная машина серии HBv2                                            | 
|-----------------------------|-----------------------------------------------------------|
| Максимальный размер задания MPI            | 36000 ядер (300 ВМ в одном масштабируемом наборе виртуальных машин с singlePlacementGroup = true) |
| Поддержка MPI                 | HPC-X, Intel MPI, Опенмпи, MVAPICH2, МПИЧ, платформа MPI  |
| Дополнительные платформы       | УККС, либфабрик, ПГАС |
| Поддержка хранилища Azure       | Диски уровня "Стандартный" и "Премиум" (максимум 8 дисков) |
| Поддержка ОС для SRIOV RDMA   | CentOS/RHEL 7.6 +, Ubuntu 16.04 +, SLES 12 SP4 +, WinServer 2016 +  |
| Поддержка Orchestrator        | Циклеклауд, Batch, AKS; [Параметры конфигурации кластера](../../sizes-hpc.md#cluster-configuration-options)  |

> [!NOTE] 
> Windows Server 2012 R2 не поддерживается на HBv2 и других виртуальных машинах с более чем 64 (виртуальными или физическими) ядрами. Подробнее см. [здесь](https://docs.microsoft.com/windows-server/virtualization/hyper-v/supported-windows-guest-operating-systems-for-hyper-v-on-windows).

## <a name="next-steps"></a>Следующие шаги

- Узнайте больше о [архитектуре AMD ЕПИК](https://bit.ly/2Epv3kC) и [архитектурах с несколькими микросхемами](https://bit.ly/2GpQIMb). Дополнительные сведения см. в описании [рекомендаций по настройке HPC для процессоров AMD ЕПИК](https://bit.ly/2T3AWZ9).
- Ознакомьтесь с последними объявлениями, примерами рабочей нагрузки HPC и результатами производительности в [блогах сообщества разработчиков Azure](https://techcommunity.microsoft.com/t5/azure-compute/bg-p/AzureCompute).
- Сведения о более высоком уровне архитектурного представления выполнения рабочих нагрузок HPC см. в статье [Высокопроизводительные вычисления (HPC) в Azure](/azure/architecture/topics/high-performance-computing/).