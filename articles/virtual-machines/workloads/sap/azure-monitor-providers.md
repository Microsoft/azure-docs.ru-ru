---
title: Azure Monitor для поставщиков решений SAP | Документация Майкрософт
description: Эта статья содержит ответы на часто задаваемые вопросы о Azure Monitor для поставщиков решений SAP.
author: rdeltcheva
ms.service: virtual-machines-sap
ms.topic: article
ms.date: 06/30/2020
ms.author: radeltch
ms.openlocfilehash: 1282d1916d669f1026707e15cc8d5437d885087f
ms.sourcegitcommit: b4647f06c0953435af3cb24baaf6d15a5a761a9c
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/02/2021
ms.locfileid: "101668999"
---
# <a name="azure-monitor-for-sap-solutions-providers-preview"></a>Azure Monitor для поставщиков решений SAP (Предварительная версия)

## <a name="overview"></a>Обзор  

В контексте Azure Monitor для решений SAP *тип поставщика* относится к конкретному *поставщику*. Например *SAP HANA*, которая настроена для конкретного компонента в ландшафте SAP, например SAP HANA базы данных. Поставщик содержит сведения о соединении для соответствующего компонента и помогает в сборе данных телеметрии из этого компонента. Для одного Azure Monitor ресурса решений SAP (также известного как ресурс SAP Monitor) можно настроить несколько поставщиков одного типа поставщика или нескольких поставщиков для нескольких типов поставщиков.
   
Клиенты могут выбрать настройку различных типов поставщиков, чтобы включить сбор данных из соответствующего компонента в своей ландшафтной среде SAP. Например, клиенты могут настроить одного поставщика для типа поставщика SAP HANA, другого поставщика для типа поставщика кластеров с высоким уровнем доступности и т. д.  

Клиенты также могут настроить несколько поставщиков определенного типа поставщика, чтобы повторно использовать один и тот же ресурс SAP Monitor и связанную управляемую группу. Дополнительные сведения об управляемой группе ресурсов. Для общедоступной предварительной версии поддерживаются следующие типы поставщиков:   
- SAP HANA
- Кластер с высоким уровнем доступности
- Microsoft SQL Server

![Azure Monitor для поставщиков решений SAP](./media/azure-monitor-sap/azure-monitor-providers.png)

Пользователям рекомендуется настроить по крайней мере одного поставщика из доступных типов поставщиков во время развертывания ресурса мониторинга SAP. Настроив поставщик, клиенты инициируют сбор данных из соответствующего компонента, для которого настроен поставщик.   

Если клиенты не настраивают какие бы то ни было поставщики во время развертывания ресурса монитора SAP, хотя ресурс SAP Monitor будет успешно развернут, данные телеметрии собираться не будут. У клиентов есть возможность добавлять поставщиков после развертывания с помощью ресурса монитора SAP в портал Azure. Клиенты могут в любое время добавлять или удалять поставщиков из ресурса мониторинга SAP.

> [!Tip]
> Если вы хотите, чтобы корпорация Майкрософт реализовала конкретного поставщика, оставьте отзыв по ссылке в конце документа или обратитесь к группе вашей учетной записи.  

## <a name="provider-type-sap-hana"></a>Тип поставщика SAP HANA

Клиенты могут настроить одного или нескольких поставщиков типа поставщика *SAP HANA* , чтобы включить сбор данных из SAP HANA базы данных. Поставщик SAP HANA подключается к SAP HANA базе данных через порт SQL, извлекает данные телеметрии из базы данных и передает их в рабочую область Log Analytics в подписке клиента. Поставщик SAP HANA собирает данные каждые 1 минуту из базы данных SAP HANA.  

В общедоступной предварительной версии клиенты могут видеть следующие данные с помощью поставщика SAP HANA: базовое использование инфраструктуры, состояние узла SAP HANA, SAP HANA репликация системы и SAP HANA данные телеметрии резервного копирования. Чтобы настроить поставщик SAP HANA, необходимо указать IP-адрес узла, номер порта SQL HANA и имя пользователя и пароль СИСТЕМДБ. Клиентам рекомендуется настроить SAP HANA поставщика для СИСТЕМДБ, однако для других клиентов базы данных можно настроить дополнительные поставщики.

![Azure Monitor для поставщиков решений SAP — SAP HANA](./media/azure-monitor-sap/azure-monitor-providers-hana.png)

## <a name="provider-type-high-availability-cluster"></a>Тип поставщика кластер высокой доступности
Клиенты могут настроить один или несколько поставщиков *кластера с высоким уровнем доступности* , чтобы включить сбор данных из кластера Pacemaker в ландшафте SAP. Поставщик кластеров с высоким уровнем доступности подключается к Pacemaker, используя конечную точку [ha_cluster_exporter](https://github.com/ClusterLabs/ha_cluster_exporter) , извлекает данные телеметрии из базы данных и отправляет их в log Analytics рабочую область в подписке клиента. Поставщик кластеров с высоким уровнем доступности собирает данные каждые 60 секунд из Pacemaker.  

В общедоступной предварительной версии клиенты могут видеть следующие данные с помощью поставщика кластеров с высоким уровнем доступности:   
 - Состояние кластера, представленного в виде свертки состояния узла и ресурса 
 - [участниками](https://github.com/ClusterLabs/ha_cluster_exporter/blob/master/doc/metrics.md) 

![Azure Monitor для поставщиков решений SAP — кластер с высоким уровнем доступности](./media/azure-monitor-sap/azure-monitor-providers-pacemaker-cluster.png)

Для настройки поставщика кластеров с высоким уровнем доступности используются два основных этапа.

1. Установите [ha_cluster_exporter](https://github.com/ClusterLabs/ha_cluster_exporter) в *каждом* узле в кластере Pacemaker.

   Существует два варианта установки ha_cluster_exporter.
   
   - Используйте сценарии службы автоматизации Azure для развертывания кластера с высоким уровнем доступности. Скрипты устанавливают [ha_cluster_exporter](https://github.com/ClusterLabs/ha_cluster_exporter) на каждом узле кластера.  
   - Выполните [установку вручную](https://github.com/ClusterLabs/ha_cluster_exporter#manual-clone--build). 

2. Настройте поставщик кластеров с высоким уровнем доступности для *каждого* узла в кластере Pacemaker.

   Для настройки поставщика кластеров с высоким уровнем доступности требуются следующие сведения:
   
   - **Имя**. Имя этого поставщика. Оно должно быть уникальным для этого Azure Monitor для экземпляра решений SAP.
   - **Конечная точка Prometheus**. HTTP \: // \<servername or ip address\> : 9664/метрики.
   - **Идентификатор безопасности**. Для систем SAP используйте идентификатор безопасности SAP. Для других систем (например, кластеров NFS) используйте для кластера имя из трех символов. Идентификатор безопасности должен отличаться от других отслеживаемых кластеров.   
   - **Имя кластера**. Имя кластера, используемое при создании кластера. Имя кластера можно найти в свойстве Cluster `cluster-name` .
   - **Имя узла**. Имя узла Linux виртуальной машины.  


## <a name="provider-type-os-linux"></a>Тип поставщика ОС (Linux)
Клиенты могут настроить одного или нескольких поставщиков ОС с типом поставщика (Linux), чтобы включить сбор данных из BareMetal или узла виртуальной машины. Поставщик ОС (Linux) подключается к BareMetal или узлам виртуальной машины [](https://github.com/prometheus/node_exporter), используя   конечную точку Node_Exporter, извлекает данные телеметрии из узлов и отправляет их в log Analytics рабочую область в подписке клиента. Поставщик ОС (Linux) собирает данные каждые 60 секунд для большинства метрик из узлов. 

В общедоступной предварительной версии клиенты могут видеть следующие данные с поставщиком ОС (Linux): 
   - Загрузка ЦП, использование ЦП процессом 
   - Использование диска, чтение & записи ввода-вывода 
   - Распределение памяти, использование памяти, перестановка использования памяти 
   - Использование сети, сетевой входящий & сведения о исходящем трафике. 

Для настройки поставщика ОС (Linux) используются два основных шага.
1. Установите [Node_Exporter](https://github.com/prometheus/node_exporter)   на каждом узле BareMetal или виртуальной машины.
   Существует два варианта установки [Node_exporter](https://github.com/prometheus/node_exporter). 
      - Для установки службы автоматизации с помощью Ansible используйте [Node_Exporter](https://github.com/prometheus/node_exporter) на каждом узле BareMetal или виртуальных машинах для установки поставщика ОС (Linux).  
      - Выполните [установку вручную](https://prometheus.io/docs/guides/node-exporter/).

2. Настройте поставщик ОС (Linux) для каждого экземпляра BareMetal или узла виртуальной машины в вашей среде. 
   Для настройки поставщика ОС (Linux) требуются следующие сведения: 
      - Название Имя этого поставщика. Оно должно быть уникальным для этого Azure Monitor для экземпляра решений SAP. 
      - Конечная точка программы экспорта узлов. Обычно http:// <servername or ip address> : 9100/метрики 

> [!NOTE]
> 9100 — это порт, предоставляемый для Node_Exporter конечной точки.

> [!Warning]
> Убедитесь, что средство экспорта узлов продолжает выполняться после перезагрузки узла. 


## <a name="provider-type-microsoft-sql-server"></a>Тип поставщика Microsoft SQL Server

Клиенты могут настроить один или несколько поставщиков типа поставщика *Microsoft SQL Server* , чтобы включить сбор данных из [SQL Server на виртуальных машинах](https://azure.microsoft.com/services/virtual-machines/sql-server/). SQL Server поставщик подключается к Microsoft SQL Server через порт SQL, извлекает данные телеметрии из базы данных и передает их в рабочую область Log Analytics в подписке клиента. Для SQL Server необходимо настроить проверку подлинности SQL и SQL Server имя входа, при этом необходимо создать базу данных SAP по умолчанию для поставщика. Поставщик SQL Server собирает данные каждые 60 секунд вплоть до каждого часа из SQL Server.  

В общедоступной предварительной версии клиенты могут видеть следующие данные с помощью поставщика SQL Server: базовое использование инфраструктуры, верхние инструкции SQL, самые большие таблицы, проблемы, записанные в SQL Server журналы ошибок, блокирующие процессы и другие.  

Чтобы настроить поставщик Microsoft SQL Server, требуются идентификатор системы SAP, IP-адрес узла, SQL Server номер порта и имя входа SQL Server и пароль.

![Azure Monitor для поставщиков решений SAP — SQL](./media/azure-monitor-sap/azure-monitor-providers-sql.png)

## <a name="next-steps"></a>Дальнейшие действия

- Создайте первую Azure Monitor для ресурса решений SAP.
- У вас возникли вопросы по Azure Monitor для решений SAP? Проверка раздела " [вопросы и ответы](./azure-monitor-faq.md) "
