---
title: Развертывание Avere vFXT для Azure
description: Узнайте, как использовать мастер развертывания, доступный в Azure Marketplace, для развертывания кластера с помощью Авере Вфкст для Azure.
author: ekpgh
ms.service: avere-vfxt
ms.topic: how-to
ms.date: 01/13/2020
ms.author: rohogue
ms.openlocfilehash: 110fc658ffc3b72de91bbf1c9562f3efeecaf55b
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "92342422"
---
# <a name="deploy-the-vfxt-cluster"></a>Развертывание кластера vFXT

Эта процедура описывает использование мастера развертывания, который предоставляется в Azure Marketplace. Этот мастер автоматически развертывает кластер с помощью шаблона Azure Resource Manager. После ввода параметров в форме и нажатия кнопки **создать** Azure автоматически выполняет следующие задачи:

* Создает контроллер кластера, который представляет собой базовую виртуальную машину, которая содержит программное обеспечение, необходимое для развертывания кластера и управления им.
* Настраивает группу ресурсов и инфраструктуру виртуальной сети, включая создание новых элементов.
* Создает виртуальные машины узла кластера и настраивает их в качестве кластера Авере.
* При запросе создает новый контейнер больших двоичных объектов Azure и настраивает его в качестве основного фильтр кластера.

После выполнения инструкций, приведенных в этом документе, вы получите виртуальную сеть, подсеть, контроллер кластера и кластер Вфкст, как показано на следующей схеме. На этой схеме показаны дополнительные фильтры BLOB-объектов Azure, в том числе новый контейнер хранилища больших двоичных объектов (в новой учетной записи хранения, не показан) и конечная точка службы для хранилища Microsoft в подсети.

![на схеме показаны три концентрических прямоугольника с компонентами кластера Авере. Внешний прямоугольник помечен как "Группа ресурсов" и содержит шестиугольник с меткой "хранилище BLOB-объектов (необязательно)". Следующий прямоугольник в помечен как "Виртуальная сеть: 10.0.0.0/16" и не содержит уникальных компонентов. Внутренний прямоугольник помечен как "Subnet: 10.0.0.0/24" и содержит виртуальную машину с меткой "контроллер кластера", стек из трех виртуальных машин с меткой "Вфкст nodes (кластер Вфкст)" и шестиугольник с меткой "конечная точка службы". В группе ресурсов имеется стрелка, соединяющая конечную точку службы (которая находится в подсети) и хранилище BLOB-объектов (которое находится за пределами подсети и виртуальной сети). Стрелка проходит через границы подсети и виртуальной сети.](media/avere-vfxt-deployment.png)

Перед запуском шаблона создания убедитесь, что у вас есть следующие необходимые компоненты:  

* [Новая подписка](avere-vfxt-prereqs.md#create-a-new-subscription)
* [Разрешения владельца подписки](avere-vfxt-prereqs.md#configure-subscription-owner-permissions).
* [Квота для кластера vFXT](avere-vfxt-prereqs.md#quota-for-the-vfxt-cluster).
* [Конечная точка службы хранилища (при необходимости)](avere-vfxt-prereqs.md#create-a-storage-service-endpoint-in-your-virtual-network-if-needed) — требуется для развертываний, использующих существующую виртуальную сеть и создав хранилище BLOB-объектов.

Дополнительные сведения о шагах развертывания кластера и планировании см. в статьях [Plan your Avere vFXT system](avere-vfxt-deploy-plan.md) (Планирование системы Avere vFXT) и [Avere vFXT for Azure - deployment overview](avere-vfxt-deploy-overview.md) (Общие сведения о развертывании Avere vFXT для Azure).

## <a name="create-the-avere-vfxt-for-azure"></a>Создание кластера Avere vFXT для Azure

Чтобы получить доступ к шаблону создания в портал Azure, найдите Авере и выберите Авере Вфкст для шаблона Azure ARM.

![В окне браузера отображается портал Azure с выделенными элементами "Создать > Marketplace > Все". На странице все в поле поиска есть слово «авере», а во втором — «Авере Вфкст для шаблона ARM для Azure» выделены красным цветом.](media/avere-vfxt-template-choose.png)

После прочтения сведений на странице шаблонов Авере Вфкст для Azure ARM щелкните **Create (создать** ), чтобы начать.

![Сайт Azure Marketplace, где отображается первая страница шаблона развертывания](media/avere-vfxt-deploy-first.png)

Этот шаблон состоит из четырех шагов — две страницы для сбора информации, а затем шаги проверки и подтверждения.

* Одна страница собирает параметры для виртуальной машины контроллера кластера.
* Страница 2 собирает параметры для создания кластера и дополнительных ресурсов, таких как подсети и хранилище.
* На третьей странице приведена сводка по выбору и проверке конфигурации.
* Четвертая страница описывает условия использования программного обеспечения, позволяя начать создание кластера.

## <a name="page-one-parameters---cluster-controller-information"></a>Параметры на первой странице для сведений о контроллере кластера

Первая страница шаблона развертывания посвящена контроллеру кластера.

![Первая страница шаблона развертывания](media/avere-vfxt-deploy-1.png)

Заполните следующие сведения:

* **Cluster controller name** (Имя контроллера кластера). Введите имя виртуальной машины для контроллера кластера.

* **Имя пользователя контроллера** . Задайте корневое имя пользователя для виртуальной машины контроллера кластера.

* **Authentication type** (Тип проверки подлинности). Выберите проверку подлинности на основе пароля или открытого ключа SSH, которая будет применяться при подключениях к контроллеру. Мы рекомендуем использовать метод с открытым ключом SSH (см. инструкции по [созданию и использованию ключей SSH](../virtual-machines/linux/ssh-from-windows.md)).

* **Password** (Пароль) или **SSH public key** (Открытый ключ SSH) — в зависимости выбранного типа проверки подлинности в следующих полях нужно предоставить открытый ключ RSA или пароль. Эти учетные данные используются в сочетании с указанным выше именем пользователя.

* **Subscription** (Подписка). Выберите подписку для Avere vFXT.

* **Группа ресурсов**. Выберите существующую пустую группу ресурсов для кластера Avere vFXT или щелкните "Создать" и введите имя новой группы ресурсов.

* **Location** (Расположение). Укажите расположение кластера и ресурсов Azure.

Щелкните **OK**, когда все будет готово.

> [!NOTE]
> Если для контроллера кластера нужно настроить доступный из Интернета IP-адрес, создайте для этого кластера новую виртуальную сеть и не используйте существующие сети. Этот параметр вы найдете на второй странице.

## <a name="page-two-parameters---vfxt-cluster-information"></a>Параметры на второй странице для сведений о кластере vFXT

Вторая страница шаблона развертывания позволяет задать размер кластера, тип узлов, размер кэша, параметры хранилища и еще несколько параметров.

![Вторая страница шаблона развертывания](media/avere-vfxt-deploy-2.png)

* **Число узлов кластера Авере вфкст** — выберите количество узлов в кластере. Допускаются значения в диапазоне от трех до двенадцати узлов.

* **Cluster administration password** (Пароль для администрирования кластера). Создайте пароль для администрирования кластера. Этот пароль используется с именем пользователя ```admin``` для входа на панель управления кластера, где можно отслеживать кластер и настраивать параметры кластера.

* **Avere vFXT cluster name** (Имя кластера Avere vFXT). Присвойте кластеру уникальное имя.

* **Size (размер** ). в этом разделе показан тип виртуальной машины, который будет использоваться для узлов кластера. Хотя существует только один рекомендуемый вариант, ссылка **изменить размер** открывает таблицу со сведениями об этом типе экземпляра и ссылкой на калькулятор цен.

* **Размер кэша на узел** . кэш кластера распределяется между узлами кластера, поэтому общий размер кэша в кластере авере вфкст будет умножен на число узлов.

  Рекомендуемая конфигурация: для Standard_E32s_v3 узлов используется 4 ТБ на узел.

* **Виртуальная сеть** . Определите новую виртуальную сеть для размещения кластера или выберите существующую сеть, которая соответствует предварительным требованиям, описанным в разделе [Планирование системы авере вфкст](avere-vfxt-deploy-plan.md#subscription-resource-group-and-network-infrastructure).

  > [!NOTE]
  > При создании новой виртуальной сети контроллер кластера будет иметь общедоступный IP-адрес, чтобы получить доступ к новой частной сети. При выборе существующей виртуальной сети контроллер кластера настраивается без общедоступного IP-адреса.
  >
  > Общедоступный IP-адрес для контроллера кластера обеспечивает более удобный доступ к кластеру vFXT, но создает небольшую угрозу безопасности.
  >* Благодаря наличию общедоступного IP-адреса контроллер кластера можно использовать в качестве узла перехода для подключения к кластеру Avere vFXT за пределами частной подсети.
  >* Если у вас нет общедоступного IP-адреса на контроллере, для доступа к кластеру требуется другой узел перехода, VPN-подключение или ExpressRoute. Например, используйте существующую виртуальную сеть, для которой уже настроено VPN-подключение.
  >* Если вы создаете контроллер с общедоступным IP-адресом, необходимо защитить виртуальную машину контроллера с помощью группы безопасности сети. По умолчанию Авере Вфкст для развертывания Azure создает группу безопасности сети, которая разрешает входящий доступ только к порту 22 для контроллеров с общедоступными IP-адресами. Вы можете дополнительно защитить систему, ограничив доступ по выбранному диапазону исходных IP-адресов, то есть разрешая подключения только от тех компьютеров, с которых вам нужен доступ к этому кластеру.

  Для новой виртуальной сети также настроена конечная точка службы хранилища для хранилища BLOB-объектов Azure, а Управление доступом к сети блокируется, чтобы разрешить только IP-адреса из подсети кластера.

* **Подсеть** — выберите подсеть или создайте новую.

* **Создание и использование хранилища BLOB-объектов** . Выберите **значение true** , чтобы создать новый контейнер больших двоичных объектов Azure и настроить его в качестве серверного хранилища для нового кластера авере вфкст. Этот параметр также создает новую учетную запись хранения в группе ресурсов кластера и создает конечную точку службы хранилища Майкрософт в подсети кластера.
  
  При указании существующей виртуальной сети перед созданием кластера она должна иметь конечную точку службы хранилища. (Дополнительные сведения см. в статье [планирование Авере вфкст System](avere-vfxt-deploy-plan.md).)

  Задайте этому полю значение **false**, если вы не хотите создавать контейнер. В этом случае необходимо подключить и настроить хранилище после создания кластера. Дополнительные инструкции см. в статье [Настройка хранилища](avere-vfxt-add-storage.md).

* **(Новая) учетная запись хранения** . при создании нового контейнера больших двоичных объектов Azure введите имя новой учетной записи хранения.

## <a name="validation-and-purchase"></a>Проверка и приобретение

На третьей странице представлена сводная информация о конфигурации и проверка параметров. После завершения проверки проверьте сводку и нажмите кнопку **ОК** .

> [!TIP]
> Вы можете сохранить параметры создания этого кластера, щелкнув ссылку **загрузить шаблон и параметры** рядом с кнопкой **ОК** . Эти сведения могут оказаться полезными, если позже потребуется создать подобный кластер, например для создания заменяющего кластера в сценарии аварийного восстановления. (Дополнительные сведения см. в [статье Руководство по аварийному восстановлению](disaster-recovery.md) .)

![Третья страница шаблона развертывания, проверка параметров](media/avere-vfxt-deploy-3.png)

На четвертой странице приводятся условия использования и ссылки на сведения о конфиденциальности и ценах.

Введите недостающие контактные данные, а затем нажмите кнопку " **создать** ", чтобы принять условия и создать авере вфкст для кластера Azure.

![Четвертая страница шаблона развертывания с описанием условий и кнопкой создания](media/avere-vfxt-deploy-4.png)

Развертывание кластера занимает 15–20 минут.

## <a name="gather-template-output"></a>Сбор выходных данных шаблона

Когда шаблон Авере Вфкст завершает создание кластера, он выводит важную информацию о новом кластере.

> [!TIP]
> Не забудьте скопировать **IP-адрес управления** из выходных данных шаблона. Этот адрес вам понадобится для администрирования кластера.

Чтобы найти сведения:

1. Перейдите к группе ресурсов для контроллера кластера.

1. В левой части страницы щелкните **Развертывания**, а затем — **microsoft-avere.vfxt-template**.

   ![Страница портала для группы ресурсов, где слева выбран пункт "Развертывания", а в таблице для имени развертывания указано значение microsoft-avere.vfxt-template](media/avere-vfxt-outputs-deployments.png)

1. В левой части страницы щелкните **Выходные данные**. Скопируйте значения в каждом из полей.

   ![Страница выходных значений со значениями SSHSTRING, RESOURCE_GROUP, LOCATION, NETWORK_RESOURCE_GROUP, NETWORK, SUBNET, SUBNET_ID, VSERVER_IPs и MGMT_IP в полях с метками](media/avere-vfxt-outputs-values.png)

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда кластер работает и вы узнаете его IP-адрес управления, [подключитесь к средству настройки кластера](avere-vfxt-cluster-gui.md).

Используйте интерфейс настройки для настройки кластера, включая следующие задачи установки:

* [Включение поддержки](avere-vfxt-enable-support.md)
* [Добавить хранилище](avere-vfxt-add-storage.md) (при необходимости)