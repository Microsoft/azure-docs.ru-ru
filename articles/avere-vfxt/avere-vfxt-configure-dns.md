---
title: DNS-сервер для Avere vFXT в Azure
description: Сведения о настройке DNS-сервера для балансировки нагрузки кластера Avere vFXT для Azure методом циклического перебора
author: ekpgh
ms.service: avere-vfxt
ms.topic: conceptual
ms.date: 12/19/2019
ms.author: rohogue
ms.openlocfilehash: 81b53904f85e2ac936195b1e39d7586fd1d47524
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "96009030"
---
# <a name="avere-cluster-dns-configuration"></a>Настройка DNS для кластера Avere

В этом разделе объясняется основная настройка системы DNS для балансировки нагрузки кластера Avere vFXT.

Здесь *не содержатся* инструкции по настройке DNS-сервера и управлению им в среде Azure.

Вместо использования DNS-сервера для балансировки нагрузки кластера vFXT в Azure методом циклического перебора можно вручную равномерно назначить IP-адреса среди клиентов при их подключении. Некоторые методы описываются в сведениях о [подключении кластера Avere](avere-vfxt-mount-clients.md).

Принимая решение о том, следует ли использовать DNS-сервер, учитывайте следующее:

* Если к вашей системе обращаются только клиенты NFS, использование DNS не требуется — можно указать все сетевые адреса, используя числовые IP-адреса.

* Если ваша система поддерживает доступ к SMB (CIFS), DNS-сервер требуется, потому что нужно указать домен DNS для сервера Active Directory.

* DNS является обязательным, если вы хотите использовать аутентификацию Kerberos.

## <a name="load-balancing"></a>Балансировка нагрузки

Чтобы распределить общую нагрузку, настройте DNS-домен для использования распределения нагрузки методом циклического перебора для IP-адресов, ориентированных на клиенты.

## <a name="configuration-details"></a>Сведения о конфигурации

Когда клиенты обращаются к кластеру, RRDNS автоматически балансирует их запросы между всеми доступными интерфейсами.

Для обеспечения оптимальной производительности настройте DNS-сервер для обработки адресов кластера, ориентированных на клиенты, как показано на следующей схеме.

Слева отображается кластер vserver, а IP-адреса отображаются в центре и справа. Укажите для каждой точки доступа клиента записи и указатели A, как показано на рисунке.

![Схема DNS с циклическим перебором кластера Avere](media/avere-vfxt-rrdns-diagram.png)
<!--- separate text description file provided  [diagram text description](avere-vfxt-rrdns-alt-text.md) -->

Каждый IP-адрес, обращенный к клиенту, должен иметь уникальное имя для внутреннего использования кластером. (На этой схеме клиентские IP-адреса называются vs1-client-IP-* для ясности, но в рабочей среде вам, вероятно, следует использовать более точное определение, например, client*.)

Клиенты подключают кластер, используя имя сервера vserver в качестве аргумента сервера.

Измените файл ``named.conf`` DNS-сервера, чтобы установить циклический порядок запросов на сервер vserver. Этот параметр гарантирует циклический перебор всех доступных значений. Добавьте инструкцию следующим образом:

```
options {
    rrset-order {
        class IN A name "vserver1.example.com" order cyclic;
    };
};
```

Следующие команды ``nsupdate`` содержат пример правильной настройки DNS:

```
update add vserver1.example.com. 86400 A 10.0.0.10
update add vserver1.example.com. 86400 A 10.0.0.11
update add vserver1.example.com. 86400 A 10.0.0.12
update add vs1-client-IP-10.example.com. 86400 A 10.0.0.10
update add vs1-client-IP-11.example.com. 86400 A 10.0.0.11
update add vs1-client-IP-12.example.com. 86400 A 10.0.0.12
update add 10.0.0.10.in-addr.arpa. 86400 PTR vs1-client-IP-10.example.com
update add 11.0.0.10.in-addr.arpa. 86400 PTR vs1-client-IP-11.example.com
update add 12.0.0.10.in-addr.arpa. 86400 PTR vs1-client-IP-12.example.com
```

## <a name="cluster-dns-settings"></a>Параметры DNS для кластера

Укажите DNS-сервер, используемый кластером вфкст, на   >  странице параметров **административной сети** кластера. Параметры на этой странице включают:

* адрес DNS-сервера;
* доменное имя DNS-сервера;
* домены поиска DNS.

Ознакомьтесь с [параметрами DNS](<https://azure.github.io/Avere/legacy/ops_guide/4_7/html/gui_admin_network.html#gui-dns>) в руководстве по настройке кластера Avere, чтобы узнать больше об использовании этой страницы.
