---
title: Безопасность данных службы автоматизации Azure
description: Эта статья поможет вам узнать, как служба автоматизации Azure защищает конфиденциальность и обеспечивает защиту данных.
services: automation
ms.subservice: shared-capabilities
ms.date: 03/10/2021
ms.topic: conceptual
ms.openlocfilehash: e41e9af418b08210f5f0f40de9951d03711dc8e7
ms.sourcegitcommit: e6de1702d3958a3bea275645eb46e4f2e0f011af
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/20/2021
ms.locfileid: "102616122"
---
# <a name="management-of-azure-automation-data"></a>Управление данными службы автоматизации Azure

В этой статье содержатся несколько разделов, объясняющих, как защитить данные и защищать их в среде службы автоматизации Azure.

## <a name="tls-12-enforcement-for-azure-automation"></a>Принудительное применение TLS 1,2 для службы автоматизации Azure

Чтобы обеспечить безопасность данных при передаче в службу автоматизации Azure, настоятельно рекомендуется настроить использование протокола TLS 1,2. Ниже приведен список методов или клиентов, взаимодействующих по протоколу HTTPS со службой автоматизации.

* Вызовы веб-перехватчика

* Гибридные рабочие роли Runbook, которые включают компьютеры, управляемые с помощью Управление обновлениями и Отслеживание изменений и инвентаризации.

* Узлы DSC

Более старые версии протоколов TLS/SSL оказались уязвимы. Хотя они все еще используются для обеспечения обратной совместимости, применять их **не рекомендуется**. Не рекомендуется явно задавать агенту использование TLS 1,2, если это не требуется, так как оно может разрушить функции безопасности на уровне платформы, позволяющие автоматически обнаруживать и использовать преимущества более новых защищенных протоколов, как только они становятся доступными, например TLS 1,3.

Сведения о поддержке TLS 1,2 с помощью агента Log Analytics для Windows и Linux, который является зависимостью от роли гибридного рабочего процесса Runbook, см. в разделе [Обзор агента log Analytics-TLS 1,2](..//azure-monitor/agents/log-analytics-agent.md#tls-12-protocol).

### <a name="platform-specific-guidance"></a>Поиск руководств в соответствии с платформой

|Платформа или язык | Поддержка | Дополнительные сведения |
| --- | --- | --- |
|Linux | Как правило, дистрибутивы Linux для поддержки протокола TLS 1.2 используют [OpenSSL](https://www.openssl.org).  | Убедитесь, что ваша версия OpenSSL поддерживается, проверив [журнал изменений OpenSSL](https://www.openssl.org/news/changelog.html).|
| Windows 8.0–10 | Поддерживается и включена по умолчанию. | Убедитесь, что вы все еще используете [параметры по умолчанию](/windows-server/security/tls/tls-registry-settings).  |
| Windows Server 2012–2016 | Поддерживается и включена по умолчанию. | Проверка того, что все еще используются [параметры по умолчанию](/windows-server/security/tls/tls-registry-settings) |
| Windows 7 с пакетом обновления 1 и Windows Server 2008 R2 с пакетом обновления 1 | Поддерживается, но не включена по умолчанию. | Информацию о том, как ее включить, см. на странице [Transport Layer Security (TLS) registry settings](/windows-server/security/tls/tls-registry-settings) (Параметры реестра TLS).  |

## <a name="data-retention"></a>Хранение данных

При удалении ресурса в службе автоматизации Azure он будет храниться в течение нескольких дней для аудита перед окончательным удалением. В течение этого времени его нельзя увидеть или использовать. Эта политика применяется также к ресурсам удаляемой учетной записи службы автоматизации. Политика хранения применяется ко всем пользователям и в настоящее время не может быть изменена. Но если вам нужно сохранять данные на более длительный период времени, воспользуйтесь [пересылкой данных задания службы автоматизации Azure в журналы Azure Monitor](automation-manage-send-joblogs-log-analytics.md).

В следующей таблице кратко описана политика хранения для различных ресурсов.

| Данные | Политика |
|:--- |:--- |
| Учетные записи |Учетная запись окончательно удаляется через 30 дней после удаления пользователем. |
| Активы |Актив окончательно удаляется через 30 дней после удаления пользователем или через 30 дней после удаления пользователем учетной записи, которая содержала этот актив. Активы включают переменные, расписания, учетные данные, сертификаты, пакеты Python 2 и подключения. |
| Узлы DSC |Узел DSC окончательно удаляется через 30 дней после отмены регистрации в учетной записи службы автоматизации на портале Azure или с помощью командлета [Unregister-AzAutomationDscNode](/powershell/module/az.automation/unregister-azautomationdscnode) в Windows PowerShell. Также узел окончательно удаляется через 30 дней после удаления пользователем учетной записи, которая содержала этот узел. |
| Задания |Задание удаляется окончательно через 30 дней после изменения его состояния, например после его завершения, остановки или приостановки. |
| Модули |Модуль окончательно удаляется через 30 дней после удаления пользователем или через 30 дней после удаления пользователем учетной записи, которая содержала этот модуль. |
| Конфигурации узлов и MOF-файлы |Старая конфигурация узла окончательно удаляется через 30 дней после создания новой конфигурации узла. |
| Отчеты узла |Отчет узла окончательно удаляется через 90 дней после создания нового отчета для того же узла. |
| Модули runbook |Модуль Runbook окончательно удаляется через 30 дней после удаления пользователем ресурса или через 30 дней после удаления пользователем учетной записи, содержащей ресурс<sup>1</sup>. |

<sup>1</sup> Модуль Runbook можно восстановить в течение 30-дневного периода, направив обращение в службу поддержки Azure с поддержкой Microsoft Azure. Перейдите на [сайт поддержки Azure](/support/options) и выберите **Отправить запрос в службу поддержки**.

## <a name="data-backup"></a>Резервное копирование данных

При удалении учетной записи службы автоматизации в Azure удаляются и все содержащиеся в ней объекты. Это могут быть runbook, модули, конфигурации, параметры, задания и активы. Объекты невозможно восстановить после удаления учетной записи. Приведенная ниже информация позволит вам создать резервную копию содержимого учетной записи службы автоматизации перед ее удалением.

### <a name="runbooks"></a>Модули runbook

Модули Runbook можно экспортировать в файлы сценариев с помощью портала Azure или командлета [Get-AzureAutomationRunbookDefinition](/powershell/module/servicemanagement/azure.service/get-azureautomationrunbookdefinition) в Windows PowerShell. Чтобы импортировать файлы скрипта в другую учетную запись службы автоматизации, воспользуйтесь руководством [Управление модулями runbook в службе автоматизации Azure](manage-runbooks.md).

### <a name="integration-modules"></a>Модули интеграции

Вы не можете экспортировать модули интеграции из службы автоматизации Azure, они должны быть доступны за пределами учетной записи службы автоматизации.

### <a name="assets"></a>Активы

Невозможно экспортировать следующие активы службы автоматизации Azure: сертификаты, подключения, учетные данные, расписания и переменные. Но вы можете сохранить сведения об этих активах, используя портал Azure и командлеты Azure. На основе этих сведений можно воссоздать все ресурсы, используемые в runbook, которые вы импортируете в другую службу автоматизации.

С помощью командлетов невозможно получить значения зашифрованных переменных или полей с паролями для учетных данных. Если эти значения вам неизвестны, их можно получить из runbook. Извлечение значений переменных описано в статье [Управление переменными в службе автоматизации Azure](shared-resources/variables.md). Сведения о получении значений учетных данных см. в статье [Управление учетными данными в службе автоматизации Azure](shared-resources/credentials.md).

### <a name="dsc-configurations"></a>Конфигурации DSC

Конфигурации DSC можно экспортировать в файлы скриптов с помощью портала Azure или командлета [Export-AzAutomationDscConfiguration](/powershell/module/az.automation/export-azautomationdscconfiguration) в Windows PowerShell. Вы можете импортировать эти конфигурации и применить их в другой учетной записи службы автоматизации.

## <a name="geo-replication-in-azure-automation"></a>Георепликация в службе автоматизации Azure

Георепликация является стандартной возможностью в учетных записях службы автоматизации Azure. При настройке учетной записи вы выбираете основной регион. Внутренняя служба георепликации в службе автоматизации сама назначает учетной записи дополнительный регион. После этого она постоянно сохраняет резервные копии данных учетной записи из основного региона в дополнительном регионе. Полный список основных и дополнительных регионов см. в статье [Непрерывность бизнес-процессов и аварийное восстановление (BCDR) в парах регионов Azure](../best-practices-availability-paired-regions.md).

Резервная копия, созданная службой георепликации службы автоматизации, является полной копией всех активов, конфигураций и т. п. из службы автоматизации. Эта резервная копия пригодится в том случае, если основной регион выйдет из строя и/или потеряет ваши данные. В этом маловероятном случае корпорация Майкрософт попытается восстановить утраченные данные основного региона.

> [!NOTE]
> Служба автоматизации Azure хранит данные клиентов в регионе, выбранном клиентом. В целях BCDR для всех регионов, кроме Южная Бразилия и Юго-Восточной Азии, данные службы автоматизации Azure хранятся в другом регионе (парный регион Azure). Данные службы автоматизации Azure хранятся в одном регионе только для Южная Бразилия (Сан--Паулу State) географического региона Бразилии и Юго-Восточной Азии (Сингапур) Азиатско-Тихоокеанский регион geography.

У внешних клиентов нет возможности напрямую использовать службу георепликации службы автоматизации в случае регионального сбоя. Если вы хотите сохранить возможность обновлять конфигурацию и runbook в службе автоматизации во время региональных сбоев, сделайте следующее.

1. Выберите дополнительный регион, являющийся парным для региона вашей основной учетной записи службы автоматизации.

2. Создайте учетную запись службы автоматизации в этом дополнительном регионе.

3. Экспортируйте runbook в виде файлов скриптов из основной учетной записи.

4. Импортируйте эти runbook в учетную запись службы автоматизации в дополнительном регионе.

## <a name="next-steps"></a>Дальнейшие действия

* Сведения о защите активов в службе автоматизации см. в статье [Шифрование защищенных ресурсов в службе автоматизации Azure](automation-secure-asset-encryption.md).

* Подробные сведения о георепликации см. в статье [Создание и использование активной георепликации](../azure-sql/database/active-geo-replication-overview.md).
