---
title: Создание автономной учетной записи службы автоматизации Azure
description: В этой статье рассказывается, как создать автономную учетную запись службы автоматизации Azure и классическую учетную запись запуска от имени.
services: automation
ms.subservice: process-automation
ms.date: 01/07/2021
ms.topic: conceptual
ms.openlocfilehash: e0088fb129e9c6558de7539ba754a45e067dc3d8
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "99576843"
---
# <a name="create-a-standalone-azure-automation-account"></a>Создание автономной учетной записи службы автоматизации Azure

В этой статье объясняется, как создать учетную запись службы автоматизации на портале Azure. Вы можете использовать учетную запись службы автоматизации на портале, чтобы оценить и изучить службу автоматизации Azure, не прибегая к дополнительным функциям управления или интеграции с журналами Azure Monitor. Вы можете добавить функции управления или настроить интеграцию с журналами Azure Monitor для расширенного мониторинга заданий runbook позднее в любой момент.

С использованием учетной записи службы автоматизации можно проверять подлинность ресурсов управления модулями Runbook в модели Azure Resource Manager или в классической модели развертывания. Одна учетная запись автоматизации может управлять ресурсами во всех регионах и подписках для конкретного клиента.

При создании учетной записи службы автоматизации на портале Azure автоматически создается учетная запись **запуска от имени**. Она выполняет следующие задачи:

* создает субъект-службу в Azure Active Directory (Azure AD);
* создает сертификат;
* Назначает роль участника, которая управляет ресурсами Azure Resource Manager с помощью модулей Runbook.

С помощью этой учетной записи вы можете быстро начать создание и развертывание модулей runbook для решения конкретных задач автоматизации.

## <a name="permissions-required-to-create-an-automation-account"></a>Разрешения, необходимые для создания учетной записи службы автоматизации

Чтобы создать или обновить учетную запись службы автоматизации и выполнить задачи, приведенные в этой статье, вам потребуются указанные ниже привилегии и разрешения.

* Для создания учетной записи службы автоматизации необходимо добавить учетную запись пользователя Azure AD к роли с разрешениями, аналогичными разрешениям для роли владельца ресурсов `Microsoft.Automation`. Дополнительные сведения см. в статье [Управление доступом на основе ролей в службе автоматизации Azure](automation-role-based-access-control.md).
* На портале Azure выберите **Azure Active Directory** > **Управление** > **Параметры пользователя**. Если для параметра **Регистрация приложений** установлено значение **Да**, то пользователи без прав администратора могут [зарегистрировать приложения Active Directory](../active-directory/develop/howto-create-service-principal-portal.md#check-azure-subscription-permissions) в клиенте Azure AD. Если параметр **Регистрация приложений** имеет значение **нет**, пользователь, выполняющий это действие, должен иметь по крайней мере роль РАЗРАБОТЧИКА приложения в Azure AD.

Если пользователь, которому назначают роль глобального администратора или соадминистратора подписки, не является участником экземпляра подписки Active Directory, он будет добавлен в Active Directory в качестве гостя. В этом случае на панели добавления учетной записи службы автоматизации появится сообщение: `You do not have permissions to create.`

Пользователей, которым впервые назначается роль соадминистратора или глобального администратора, можно удалить из экземпляра подписки Active Directory. Вы можете повторно добавить этим пользователям роль "Пользователь" в Active Directory. Чтобы проверить роли пользователей, сделайте следующее:

1. На портале Azure перейдите на панель "Azure Active Directory".
1. Выберите **Пользователи и группы**.
1. Выберите **Все пользователи**.
1. После выбора конкретного пользователя выберите **Профиль**. Значение атрибута **Тип пользователя** в профиле пользователя не должно соответствовать значению **Гость**.

## <a name="create-a-new-automation-account-in-the-azure-portal"></a>Создание учетной записи службы автоматизации на портале Azure

Чтобы создать учетную запись службы автоматизации Azure на портале Azure, выполните следующие действия:

1. Войдите на портал Azure с помощью учетной записи, добавленной в качестве участника роли "Администраторы" подписки и соадминистратора подписки.
1. Выберите действие **+ Создать ресурс**.
1. Введите в строку поиска **Служба автоматизации**. В результатах поиска выберите **Автоматизация**.

   ![Поиск и выбор предложения "Автоматизация и управление" в Azure Marketplace](media/automation-create-standalone-account/automation-marketplace-select-create-automationacct.png)

1. На следующем экране выберите **Создать новый**.

   ![Добавление учетной записи службы автоматизации](media/automation-create-standalone-account/automation-create-automationacct-properties.png)

   > [!NOTE]
   > Если учетная запись не является участником роли "Администраторы подписки" и соадминистратором подписки, в колонке "Добавление учетной записи службы автоматизации" отобразится следующее сообщение.
   >
   > :::image type="content" source="media/automation-create-standalone-account/create-account-without-perms.png" alt-text="Снимок экрана запроса &quot;у вас нет разрешений на создание учетной записи запуска от имени в Azure Active Directory&quot;.":::

1. В области "Добавление учетной записи службы автоматизации" в поле **Имя** введите имя новой учетной записи службы автоматизации. После установки имени его нельзя изменить. 

    > [!NOTE]
    > Имена учетных записей службы автоматизации уникальны для каждого региона и группы ресурсов. Имена удаленных учетных записей службы автоматизации, могут быть недоступны некоторое время.

1. Если у вас несколько подписок, укажите подписку, которую нужно использовать для новой учетной записи, в поле **Подписки**.
1. В поле **Группа ресурсов** укажите или выберите новую или имеющуюся группу ресурсов.
1. В поле **Расположение** выберите расположение центра обработки данных Azure.
1. Убедитесь, что для параметра **Создать учетную запись запуска от имени** установлено значение **Да**, а затем нажмите **Создать**.

   > [!NOTE]
   > Если вы решили не создавать учетную запись запуска от имени и выбрали значение **Нет** для параметра **Создать учетную запись запуска от имени**, в области "Добавление учетной записи службы автоматизации" появится сообщение. Хотя учетная запись и создается на портале Azure, она не содержит соответствующее удостоверение проверки подлинности в службе каталогов подписки классической модели развертывания или подписки Azure Resource Manager. Поэтому у учетной записи службы автоматизации не будет доступа к ресурсам в вашей подписке. Из-за этого модули Runbook, ссылающиеся на эту учетную запись, не смогут проходить проверку подлинности и выполнять задачи, используя ресурсы в соответствующих моделях развертывания.
   >
   > :::image type="content" source="media/automation-create-standalone-account/create-account-decline-create-runas-msg.png" alt-text="Снимок экрана запроса с сообщением &quot;вы решили не создавать учетную запись запуска от имени&quot;.":::
   >
   > Если субъект-служба не создан, роль участника не назначается.
   >

1. Чтобы отслеживать ход создания учетной записи службы автоматизации, выберите в меню пункт **Уведомления**.

После создания учетной записи службы автоматизации автоматически создаются несколько ресурсов. После создания эти модули Runbook можно безопасно удалить, если вы не хотите их хранить. Чтобы выполнить аутентификацию для вашей учетной записи в модуле runbook, можно использовать учетные записи запуска от имени. Вы можете не удалять их, если не собираетесь создавать новую учетную запись или если они еще могут потребоваться. В следующей таблице перечислены ресурсы для учетной записи запуска от имени.

| Ресурс | Описание |
| --- | --- |
| Модуль Runbook AzureAutomationTutorial |Пример графического модуля Runbook, который демонстрирует, как выполнить проверку подлинности с помощью учетной записи запуска от имени. Он получает доступ ко всем ресурсам Resource Manager. |
| Модуль Runbook AzureAutomationTutorialScript |Пример модуля Runbook PowerShell, который демонстрирует, как выполнить проверку подлинности с помощью учетной записи запуска от имени. Он получает доступ ко всем ресурсам Resource Manager. |
| AzureAutomationTutorialPython2 Runbook |Пример модуля Runbook Python, в котором показано, как выполнить аутентификацию с помощью учетной записи запуска от имени. Модуль Runbook отображает список групп ресурсов для указанной подписки. |
| AzureRunAsCertificate |Ресурс сертификатов, создаваемый автоматически во время создания учетной записи службы автоматизации или с помощью приведенного ниже сценария PowerShell для имеющейся учетной записи. Этот сертификат позволяет пройти проверку подлинности в Azure, что дает возможность управлять ресурсами Azure Resource Manager с помощью модулей Runbook. Срок действия этого сертификата — один год. |
| AzureRunAsConnection |Ресурс подключений, создаваемый автоматически во время создания учетной записи службы автоматизации или с помощью сценария PowerShell для имеющейся учетной записи. |

## <a name="create-a-classic-run-as-account"></a>Создание классической учетной записи запуска от имени

Классические учетные записи запуска от имени не создаются по умолчанию при создании учетной записи службы автоматизации Azure. Если для управления классическими ресурсами Azure требуется Классическая учетная запись запуска от имени, выполните следующие действия.

1. В учетной записи службы автоматизации в разделе **Параметры учетной записи** выберите **Учетные записи запуска от имени**.
2. Выберите **Классическая учетная запись запуска от имени Azure**.
3. Нажмите **Создать**, чтобы начать создание классической учетной записи запуска от имени.

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения о графической разработке см. в статье [о создании графических runbook в службе автоматизации Azure](automation-graphical-authoring-intro.md).
* Чтобы начать работу с модулями runbook PowerShell, изучите документ [Руководство. Создание модуля runbook PowerShell](learn/automation-tutorial-runbook-textual-powershell.md).
* Чтобы начать работу с модулями runbook рабочих процессов PowerShell, изучите документ [Руководство. Создание модуля runbook рабочего процесса PowerShell](learn/automation-tutorial-runbook-textual.md).
* Чтобы приступить к работе с модулями Runbook Python 3, см. раздел [учебник. Создание модуля Runbook Python 3](learn/automation-tutorial-runbook-textual-python-3.md).
* Справочник по командлетам PowerShell см. в документации по [Az.Automation](/powershell/module/az.automation).
