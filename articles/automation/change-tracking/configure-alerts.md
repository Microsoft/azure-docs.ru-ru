---
title: Создание оповещений для Отслеживание изменений и инвентаризации службы автоматизации Azure
description: В этой статье рассказывается, как настроить оповещения Azure для уведомления о состоянии изменений, обнаруженных Отслеживание изменений и инвентаризации.
services: automation
ms.subservice: change-inventory-management
ms.date: 10/15/2020
ms.topic: conceptual
ms.openlocfilehash: 91be2f8641a061d009962cdcd03a8d56048594da
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "104594511"
---
# <a name="how-to-create-alerts-for-change-tracking-and-inventory"></a>Создание оповещений для Отслеживание изменений и инвентаризации

Оповещения в Azure заблаговременно уведомляют Вас о результатах выполнения заданий Runbook, проблем с работоспособностью служб или других сценариев, связанных с вашей учетной записью службы автоматизации. Служба автоматизации Azure не включает предварительно настроенные правила генерации оповещений, но ее можно создать на основе данных, которые он создает. В этой статье приводятся рекомендации по созданию правил генерации оповещений на основе изменений, определенных Отслеживание изменений и инвентаризации.

Если вы не знакомы с Azure Monitor оповещениями, ознакомьтесь со статьей [Обзор оповещений в Microsoft Azure](../../azure-monitor/alerts/alerts-overview.md) перед началом работы. Дополнительные сведения об оповещениях, использующих запросы журналов, см. [в разделе оповещения журнала в Azure Monitor](../../azure-monitor/alerts/alerts-unified-log.md).

## <a name="create-alert"></a>Создание оповещения

В следующем примере показано, что файл **c:\windows\system32\drivers\etc\hosts** был изменен на компьютере. Этот файл важен, так как Windows использует его для разрешения имен узлов в IP-адреса. Эта операция имеет приоритет над DNS и может привести к проблемам с подключением. Она также может привести к перенаправлению трафика на вредоносные или другие опасные веб-сайты.

![Диаграмма, показывающая изменение файла hosts](./media/configure-alerts/changes.png)

Рассмотрим этот пример, чтобы обсудить шаги по созданию оповещений об изменении.

1. На странице **Отслеживание изменений** в учетной записи службы автоматизации выберите **log Analytics**.

2. В интерфейсе поиска по журналам найдите изменения содержимого в файле **hosts** с помощью запроса `ConfigurationChange | where FieldsChanged contains "FileContentChecksum" and FileSystemPath contains "hosts"`. Этот запрос ищет изменения содержимого для файлов с полными именами путей, содержащими слово `hosts` . Вы также можете запросить конкретный файл, изменив путь на абсолютный, например с помощью `FileSystemPath == "c:\windows\system32\drivers\etc\hosts"`.

3. После того как запрос вернет результаты, выберите **создать правило генерации оповещений** в поиске по журналам, чтобы открыть страницу **создания предупреждения** . Вы также можете перейти к этой странице с помощью **Azure Monitor** на портале Azure.

4. Снова проверьте запрос и измените логику оповещения. В этом случае вы хотите, чтобы оповещение активировалось, если на всех машинах среды обнаружено хотя бы одно изменение.

    ![Изменение запроса для отслеживания изменений в файле hosts](./media/configure-alerts/change-query.png)

5. После установки логики оповещения назначьте группам действий выполнение действий в ответ на срабатывание предупреждения. В этом случае мы настраиваем отправление сообщений электронной почты и создание билета управления ИТ-услугами (ITSM).

Выполните следующие действия, чтобы настроить оповещения, чтобы сообщить о состоянии развертывания обновлений. Если вы не знакомы с оповещениями Azure, см. статью [Обзор оповещений Azure](../../azure-monitor/alerts/alerts-overview.md).

## <a name="configure-action-groups-for-your-alerts"></a>Настройка групп действий для оповещений

После настройки оповещений можно создать для них группу действий, которые будут применяться сразу к нескольким оповещениям. Действия могут включать уведомления по электронной почте, модули Runbook, веб-перехватчики и многое другое. Дополнительные сведения о группах действий см. в разделе [Создание групп действий и управление ими на портале Azure](../../azure-monitor/alerts/action-groups.md).

1. Выберите оповещение и нажмите в разделе **Группы действий** кнопку **Создать**.

2. Введите полное и короткое имена для новой группы действий. Решение "Управление обновлениями" использует короткое имя группы при отправке уведомлений с помощью этой группы.

3. В разделе **Действия** введите имя, характеризующее действие (например, **Уведомление по электронной почте**).

4. В поле **тип действия** выберите соответствующий тип, например " **Электронная почта/SMS-сообщение/Push/Voice**".

5. Щелкните значок с изображением карандаша, чтобы изменить сведения о действии.

6. Введите данные, необходимые для выбранного типа действия. Например, если для отправки сообщения электронной почты используется **Электронная почта, SMS/Push/Voice** , введите имя действия, установите флажок **электронной почты** , введите допустимый адрес электронной почты, а затем нажмите кнопку **ОК**.

    ![Настройка группы действий электронной почты](./media/configure-alerts/configure-email-action-group.png)

7. В области Добавление группы действий нажмите кнопку **ОК**.

8. Для оповещения по электронной почте можно настроить тему письма. Для этого выберите в разделе **Создание правила** пункт **Настройка действий** и нажмите **Тема электронного письма**.

9. Когда закончите, выберите **Создать правило оповещения**.

## <a name="next-steps"></a>Дальнейшие действия

* Дополнительные сведения об [оповещениях см. в Azure Monitor](../../azure-monitor/alerts/alerts-overview.md).

* Сведения о [запросах журнала](../../azure-monitor/logs/log-query-overview.md) для извлечения и анализа данных из рабочей области log Analytics.

* Управление [использованием и затратами с помощью журналов Azure Monitor](../../azure-monitor/logs/manage-cost-storage.md) описывает управление затратами путем изменения срока хранения данных, а также анализ и оповещение об использовании данных.