---
title: Выбор размеров и образов виртуальных машин для пулов
description: Выбор из доступных размеров виртуальных машин и версий ОС для вычисленийных узлов в пулах пакетной службы Azure
ms.topic: conceptual
ms.date: 03/18/2021
ms.custom: seodec18
ms.openlocfilehash: 2c3b90d6188dc6660233ae659fb4280dc1d4f2a5
ms.sourcegitcommit: a8ff4f9f69332eef9c75093fd56a9aae2fe65122
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/24/2021
ms.locfileid: "105027386"
---
# <a name="choose-a-vm-size-and-image-for-compute-nodes-in-an-azure-batch-pool"></a>Выбор размера и образа виртуальной машины для расчетных узлов в пуле пакетной службы Azure

При выборе размера узла для пула пакетной службы Azure вы можете использовать любые размеры виртуальной машины, доступные в Azure. В Azure предоставлен диапазон размеров виртуальных машин Windows и Linux для разных рабочих нагрузок.

## <a name="supported-vm-series-and-sizes"></a>Поддерживаемые размеры и серии виртуальных машин

### <a name="pools-in-virtual-machine-configuration"></a>Пулы в конфигурации виртуальной машины

Пулы пакетной службы в конфигурации виртуальной машины поддерживают почти все [размеры виртуальных машин](../virtual-machines/sizes.md). Дополнительные сведения о поддерживаемых размерах и ограничениях см. в следующей таблице.

| Серия виртуальной машины  | Поддерживаемые размеры |
|------------|---------|
| Basic A | Все размеры *за исключением* Basic_A0 (A0) |
| Объект | Все размеры, *кроме* Standard_A0, Standard_A8, Standard_A9, Standard_A10, Standard_A11 |
| Av2 | Все размеры |
| B | Не поддерживается |
| DCsv2 | Все размеры |
| Dv2, DSv2 | Все размеры |
| Dv3, Dsv3 | Все размеры |
| Dav4, Dasv4 | Все размеры |
| Ddv4, Ddsv4 |  Все размеры |
| Dv4, Dsv4 | Не поддерживается |
| Ev3, Esv3 | Все размеры, кроме E64is_v3 |
| Eav4, Easv4 | Все размеры |
| Edv4, Edsv4 |  Все размеры |
| Ev4, Esv4 | Не поддерживается |
| F, Fs | Все размеры |
| Fsv2 | Все размеры |
| G, Gs | Все размеры |
| H | Все размеры |
| HB | Все размеры |
| HBv2 | Все размеры |
| HBv3 | Standard_HB120rs_v3 (другие размеры еще не доступны) |
| HC | Все размеры |
| Ls | Все размеры |
| Lsv2 | Все размеры |
| M | Все размеры |
| Mv2<sup>1</sup> | Все размеры |
| NC | Все размеры |
| NCv2 | Все размеры |
| NCv3 | Все размеры |
| NCasT4_v3 | Все размеры |
| ND | Все размеры |
| NDv2 | Нет. Пока недоступно |
| NV | Все размеры |
| NVv3 | Все размеры |
| NVv4 | Все размеры |
| SAP HANA | Не поддерживается |

<sup>1</sup> эту серию виртуальных машин можно использовать только с образами виртуальных машин версии 2.

### <a name="using-generation-2-vm-images"></a>Использование образов виртуальных машин поколения 2

Некоторые серии виртуальных машин, например [Mv2](../virtual-machines/mv2-series.md), можно использовать только с [образами виртуальных машин версии 2](../virtual-machines/generation-2.md). Образы виртуальных машин поколения 2 указываются как любой образ виртуальной машины с помощью свойства SKU конфигурации ["imageReference"](/rest/api/batchservice/pool/add#imagereference) . строки SKU имеют суффикс, например "-G2" или "-Gen2". Чтобы получить список образов виртуальных машин, поддерживаемых пакетом, включая образы поколения 2, используйте API ["List Supported Images"](/rest/api/batchservice/account/listsupportedimages) , [PowerShell](/powershell/module/az.batch/get-azbatchsupportedimage)или [Azure CLI](/cli/azure/batch/pool/supported-images).

### <a name="pools-in-cloud-service-configuration"></a>Пулы в конфигурации облачной службы

В пулах пакетной службы в конфигурации облачной службы поддерживаются все [размеры облачных служб](../cloud-services/cloud-services-sizes-specs.md), **кроме** следующих.

| Серия виртуальной машины  | Неподдерживаемые размеры |
|------------|-------------------|
| Серия A   | Очень малый       |
| Серия Av2 | Standard_A1_v2, Standard_A2_v2, Standard_A2m_v2 |

## <a name="size-considerations"></a>Рекомендации по выбору размера

- **Требования приложения**. Учтите характеристики и требования приложений, которые будут выполняться на узлах. Чтобы выбрать правильный размер узла, что позволит снизить затраты, также следует учитывать такие аспекты, как многопоточность приложений и требуемый объем памяти. Для [рабочих нагрузок MPI](batch-mpi.md) с несколькими экземплярами или приложений CUDA рассмотрите возможность использования специализированных размеров виртуальных машин [HPC](../virtual-machines/sizes-hpc.md) или [с поддержкой GPU](../virtual-machines/sizes-gpu.md) (соответственно). Дополнительные сведения см. в статье [Использование экземпляров с поддержкой RDMA или графического процессора (GPU) в пулах пакетной службы](batch-pool-compute-intensive-sizes.md).

- **Задачи на узел**. Обычно при выборе размера узла предполагается, что единовременно на нем будет выполняться одна задача. Однако может быть полезно настроить [параллельное выполнение](batch-parallel-node-tasks.md) нескольких задач (а значит и нескольких экземпляров приложения) на вычислительных узлах во время выполнения задания. В таком случае обычно выбирается многоядерный узел с учетом роста потребностей, связанных с выполнением параллельных задач.

- **Уровни нагрузки для различных задач**. Все узлы в пуле имеют одинаковый размер. Если вы планируете выполнять приложения с разными требованиями к системе и/или с разной нагрузкой, рекомендуется использовать отдельные пулы.

- **Регионы доступности**. Серия или размер виртуальной машины могут быть недоступны в регионах, где вы создаете учетные записи пакетной службы. Чтобы убедиться, что размер доступен, перейдите на страницу [Доступность продуктов по регионам](https://azure.microsoft.com/regions/services/).

- **Квоты**. [Квота на ядра](batch-quota-limit.md#resource-quotas) на учетную запись пакетной службы может ограничить количество узлов определенного размера, которые можно добавить в пул пакетной службы. При необходимости можно [запросить увеличение квоты](batch-quota-limit.md#increase-a-quota).

- **Конфигурация пула**. Как правило, при создании пула в конфигурации виртуальной машины имеется больше вариантов размера виртуальной машины по сравнению с созданием пула в конфигурации облачной службы.

## <a name="supported-vm-images"></a>Поддерживаемые образы виртуальных машин

Используйте один из следующих интерфейсов API, чтобы получить список образов виртуальных машин Windows и Linux, которые в настоящее время поддерживаются пакетом, включая идентификаторы SKU агента узла для каждого образа:

- Пакетная служба REST API: [Вывод списка поддерживаемых образов](/rest/api/batchservice/account/listsupportedimages)
- PowerShell: [Get-азбатчсуппортедимаже](/powershell/module/az.batch/get-azbatchsupportedimage)
- Azure CLI: [AZ Batch Pool Supported-Images](/cli/azure/batch/pool/supported-images)

Настоятельно рекомендуется избегать образов с ожидающими окончаниями срока службы поддержки пакетов (конца строки). Эти даты можно обнаружить с помощью [ `ListSupportedImages` API](https://docs.microsoft.com/rest/api/batchservice/account/listsupportedimages), [PowerShell](https://docs.microsoft.com/powershell/module/az.batch/get-azbatchsupportedimage)или [Azure CLI](https://docs.microsoft.com/cli/azure/batch/pool/supported-images). Дополнительные сведения о выборе образа виртуальной машины пула пакетной службы см. в разделе рекомендации по [пакетной](best-practices.md) службе

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте подробнее о [рабочем процессе и основных ресурсах пакетной службы](batch-service-workflow-features.md), таких как пулы, узлы, задания и задачи.
- Дополнительные сведения об использовании размеров виртуальных машин для ресурсоемких вычислений см. в статье [Использование экземпляров с поддержкой RDMA или графического процессора (GPU) в пулах пакетной службы](batch-pool-compute-intensive-sizes.md).
