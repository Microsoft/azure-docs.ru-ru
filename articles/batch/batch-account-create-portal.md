---
title: Создание учетной записи на портале Azure
description: Узнайте, как создать учетную запись пакетной службы Azure на портале Azure для обработки крупных параллельных рабочих нагрузок в облаке.
ms.topic: how-to
ms.date: 02/23/2021
ms.custom: H1Hack27Feb2017
ms.openlocfilehash: 36759a0caef41af9307bf621a1b6b634ddf586cc
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101703670"
---
# <a name="create-a-batch-account-with-the-azure-portal"></a>Создание учетной записи пакетной службы на портале Azure

В этом разделе показано, как создать [учетную запись пакетной службы Azure](accounts.md) на [портал Azure](https://portal.azure.com), выбрав Свойства учетной записи, соответствующие вашему сценарию вычислений. Вы также узнаете, где найти важные свойства учетной записи, такие как ключи доступа и URL-адреса учетных записей.

Дополнительные сведения об учетных записях пакетной службы см. в статье [Рабочий процесс и ресурсы пакетной службы](batch-service-workflow-features.md).

## <a name="create-a-batch-account"></a>Создание учетной записи Пакетной службы

[!INCLUDE [batch-account-mode-include](../../includes/batch-account-mode-include.md)]

1. Войдите на [портал Azure](https://portal.azure.com).

1. На домашней странице выберите **создать ресурс**.

1. В поле поиска введите **Пакетная служба**. В результатах выберите **Пакетная служба** , а затем щелкните **создать**.

1. Введите следующие сведения.

    :::image type="content" source="media/batch-account-create-portal/batch-account-portal.png" alt-text="Снимок экрана: новый экран учетной записи пакетной службы.":::

    а. **Подписка**: Подписка, в которой будет создана учетная запись пакетной службы. Если у вас только одна подписка, она будет выбрана по умолчанию.

    b. **Группа ресурсов.** Существующая группа ресурсов для новой учетной записи пакетной службы (при необходимости можно создать новую группу ресурсов).

    c. **Имя учетной записи**. Имя учетной записи должно быть уникальным в пределах региона Azure, где будет создана учетная запись (описание параметра **Расположение** см. ниже). Имя учетной записи может содержать только строчные буквы и цифры, а его длина должна быть не меньше 3 и не больше 24 символов.

    d. **Расположение.** Регион Azure, в котором будет создана учетная запись пакетной службы. Будут отображаться только те регионы, которые поддерживаются для вашей подписки и группы ресурсов.

    д) **Учетная запись хранения**. Дополнительная [учетная запись хранения Azure](accounts.md#azure-storage-accounts) , которую вы свяжете с учетной записью пакетной службы. Можно выбрать существующую учетную запись хранения или создать новую. Для наилучшей производительности рекомендуется использовать учетную запись хранения общего назначения версии 2.

    :::image type="content" source="media/batch-account-create-portal/storage_account.png" alt-text="Снимок экрана с параметрами при создании учетной записи хранения.":::

1. При необходимости выберите **Дополнительно** , чтобы указать **тип удостоверения**, **доступ к общедоступной сети** или **режим распределения пула**. В большинстве случаев параметры по умолчанию прекрасно работают.

1. Выберите **проверить и создать**, а затем щелкните **создать** , чтобы создать учетную запись.

## <a name="view-batch-account-properties"></a>Просмотр свойств учетной записи пакетной службы

После создания учетной записи выберите ее для доступа к параметрам и свойствам учетной записи. Все параметры и свойства учетной записи можно просмотреть с помощью меню слева.

> [!NOTE]
> Имя учетной записи пакетной службы является идентификатором и его нельзя изменить. Если необходимо изменить имя учетной записи пакетной службы, удалите учетную запись и создайте новую с нужным именем.

:::image type="content" source="media/batch-account-create-portal/batch_blade.png" alt-text="Снимок экрана со страницей учетной записи пакетной службы в портал Azure.":::

При разработке приложения с использованием [API-интерфейсов пакетной службы](batch-apis-tools.md#azure-accounts-for-batch-development) вам понадобится URL-адрес и ключ учетной записи для доступа к ресурсам пакетной службы. (Пакетная поддержка также поддерживает проверку подлинности Azure Active Directory.) Чтобы просмотреть сведения о доступе к учетной записи пакетной службы, выберите **ключи**.

:::image type="content" source="media/batch-account-create-portal/batch-account-keys.png" alt-text="Снимок экрана ключей учетной записи пакетной службы в портал Azure.":::

Чтобы просмотреть имя и ключи учетной записи хранения, связанной с учетной записью пакетной службы, выберите **Учетная запись хранения**.

Чтобы просмотреть [квоты ресурсов](batch-quota-limit.md) , которые применяются к учетной записи пакетной службы, выберите **квоты**.

## <a name="additional-configuration-for-user-subscription-mode"></a>Дополнительная настройка для режима пользовательской подписки

Если вы решили создать учетную запись пакетной службы в режиме пользовательской подписки, сначала выполните приведенные ниже дополнительные инструкции.

> [!IMPORTANT]
> Пользователь, создающий учетную запись пакетной службы в режиме пользовательской подписки, должен иметь назначение роли участника или владельца для подписки, в которой будет создана учетная запись пакетной службы.

### <a name="allow-azure-batch-to-access-the-subscription-one-time-operation"></a>Предоставление пакетной службе Azure доступа к подписке (одноразовая операция)

При первом создании учетной записи пакетной службы в режиме пользовательской подписки нужно зарегистрировать подписку в пакетной службе. (Если вы уже сделали это, перейдите к следующему разделу.)

1. Войдите на [портал Azure](https://portal.azure.com).

1. Последовательно выберите пункты **Все службы** > **Подписки** и выберите подписку, которую нужно использовать для учетной записи пакетной службы.

1. На странице **Подписки** выберите **Поставщики ресурсов** и выполните поиск **Microsoft.Batch**. Убедитесь, что поставщик ресурсов **Microsoft.Batch** зарегистрирован в подписке. Если это не так, щелкните ссылку **зарегистрировать** в верхней части экрана.

    :::image type="content" source="media/batch-account-create-portal/register_provider.png" alt-text="Снимок экрана, показывающий поставщик ресурсов Microsoft.BatCH.":::

1. Вернитесь на страницу **Подписка** , затем выберите назначения **ролей управления доступом (IAM)**  >    >  **Добавить**  >  **назначение ролей**.

    :::image type="content" source="media/batch-account-create-portal/subscription_iam.png" alt-text="Снимок экрана со страницей назначения ролей для подписки.":::

1. На странице **Добавление назначения ролей** выберите роль **участник** или **владелец** , а затем найдите API пакетной службы. Найдите **Пакетная служба Microsoft Azure** или **MicrosoftAzureBatch** , чтобы найти API. (**ddbf3205-c6bd-46ae-8127-60eb93363864** — это идентификатор приложения для API пакетной службы.)

1. Выберите найденный API пакетной службы и выберите **Сохранить**.

### <a name="create-a-key-vault"></a>Создание хранилища ключей

В режиме пользовательской подписки требуется [Azure Key Vault](../key-vault/general/overview.md) . Key Vault должны находиться в той же подписке и регионе, что и создаваемая учетная запись пакетной службы.

1. На домашней странице [портал Azure](https://portal.azure.com)выберите **создать ресурс**.
1. В поле поиска введите **Key Vault**. Выберите **Key Vault** из результатов и нажмите кнопку **создать**.
1. На странице **Создание хранилища ключей** введите имя Key Vault и создайте новую группу ресурсов в том же регионе, что и для учетной записи пакетной службы. Для остальных параметров оставьте значения по умолчанию, а затем выберите **Создать**.

При создании учетной записи пакетной службы в режиме пользовательской подписки укажите **подписку пользователя** в качестве режима выделения пула, выберите созданный Key Vault и установите флажок, чтобы предоставить пакетной службе Azure доступ к Key Vault.

Если вы предпочитаете предоставить доступ к Key Vault вручную, перейдите к разделу **политики доступа** Key Vault и выберите **Добавить политику доступа**. Щелкните ссылку рядом с пунктом **Выбор субъекта** и выполните поиск по запросу **Пакетная служба Microsoft Azure** (идентификатор приложения **ddbf3205-c6bd-46ae-8127-60eb93363864**). Выберите этого участника, а затем настройте **разрешения секрета** с помощью раскрывающегося меню. Пакетной службе Azure необходимо предоставить минимум разрешений на **получение**, **перечисление**, **установку** и **удаление**. Для [хранилищ ключей, в которых включено обратимое удаление](../key-vault/general/soft-delete-overview.md), пакету Azure также необходимо предоставить разрешение на **Восстановление** .

:::image type="content" source="media/batch-account-create-portal/secret-permissions.png" alt-text="Снимок экрана с выбранными разрешениями секрета для пакетной службы Azure":::

Нажмите **кнопку Добавить**, а затем убедитесь, что для связанного **Key Vault** ресурса установлены флажки **виртуальные машины Azure для** развертывания и **Azure Resource Manager для развертывания шаблона** . Нажмите кнопку **сохранить** , чтобы зафиксировать изменения.

:::image type="content" source="media/batch-account-create-portal/key-vault-access-policy.png" alt-text="Снимок экрана с экраном политики доступа.":::

### <a name="configure-subscription-quotas"></a>Настройка квот для подписки

Для учетных записей пакетной службы подписки на пользователя необходимо задать [квоты ядра](batch-quota-limit.md) вручную. Квоты на пакетная служба (цен. категория "Стандартный") ядра не применяются к учетным записям в режиме пользовательской подписки, а [квоты в вашей подписке](../azure-resource-manager/management/azure-subscription-service-limits.md) для региональных ядер, вычислений для ряда и других ресурсов используются и применяются.

1. На [портале Azure](https://portal.azure.com) выберите учетную запись пакетной службы в режиме пользовательской подписки, чтобы отобразить параметры и свойства учетной записи.
1. В меню слева выберите **Квоты**, чтобы просмотреть и настроить квоты ядер, связанные с учетной записью пакетной службы.

## <a name="other-batch-account-management-options"></a>Другие параметры управления учетной записью пакетной службы

Помимо портала Azure, создавать учетные записи пакетной службы и управлять ими можно с помощью следующих средств:

- [командлеты PowerShell для пакетной службы;](batch-powershell-cmdlets-get-started.md)
- [Azure CLI](batch-cli-get-started.md)
- [Библиотека .NET для управления пакетной службой](batch-management-dotnet.md)

## <a name="next-steps"></a>Дальнейшие действия

- Узнайте подробнее о [рабочем процессе и основных ресурсах пакетной службы](batch-service-workflow-features.md), таких как пулы, узлы, задания и задачи.
- Здесь приведены основные сведения о разработке приложений с поддержкой пакетной службы с помощью [клиентской библиотеки .NET для пакетной службы](quick-run-dotnet.md) или [Python](quick-run-python.md). В этих кратких руководствах описывается пример приложения, которое использует пакетную службу для выполнения рабочей нагрузки на нескольких процессорных узлах с использованием службы хранилища Azure для промежуточного хранения и извлечения файлов рабочей нагрузки.