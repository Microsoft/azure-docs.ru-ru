---
title: Приобретение пользовательского доменного имени
description: Узнайте, как купить домен службы приложений и использовать его как личный домен для службы приложений Azure.
ms.assetid: 70fb0e6e-8727-4cca-ba82-98a4d21586ff
ms.topic: article
ms.date: 11/30/2020
ms.custom: seodec18
ms.openlocfilehash: cdcf22a42375949cc4d6be0b4f3062cee26219d6
ms.sourcegitcommit: c27a20b278f2ac758447418ea4c8c61e27927d6a
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/03/2021
ms.locfileid: "101704860"
---
# <a name="buy-a-custom-domain-name-for-azure-app-service"></a>Приобретение личного доменного имени в Службе приложений Azure

Домены службы приложений — это пользовательские домены, которые управляются непосредственно в Azure. Они упрощают управление личными доменами для [Службы приложений Azure](overview.md). В этом руководстве показано, как приобрести домен Службы приложений Azure и назначить DNS-имена Службе приложений Azure.

Сведения о виртуальной машине Azure или службе хранилища Azure см. в статье [Assign App Service domain to Azure VM or Azure Storage](https://azure.github.io/AppService/2017/07/31/Assign-App-Service-domain-to-Azure-VM-or-Azure-Storage) (Назначение домена службы приложений виртуальной машине Azure или службе хранилища Azure). Сведения об облачных службах см. в статье [Настройка пользовательского доменного имени для облачной службы Azure](../cloud-services/cloud-services-custom-domain-name-portal.md).

## <a name="prerequisites"></a>Предварительные требования

Для работы с этим руководством сделайте следующее:

* [Создайте приложение службы приложений](./index.yml) или используйте приложение, созданное для работы с другим руководством. Приложение должно находиться в общедоступном регионе Azure. В настоящее время национальные облака Azure не поддерживаются.
* [Снимите ограничение на предельную сумму расходов для подписки](../cost-management-billing/manage/spending-limit.md#remove). Невозможно приобрести домены службы приложений, используя деньги на счете бесплатной подписки.

## <a name="buy-an-app-service-domain"></a>Приобретение домена службы приложений

Сведения о ценах на домены службы приложений см. на [странице цен на службу](https://azure.microsoft.com/pricing/details/app-service/windows/) приложений и прокрутите вниз до области домен службы приложений.

1. Откройте [портал Azure](https://portal.azure.com) и войдите в систему, используя свою учетную запись Azure.

1. В строке поиска найдите и выберите **домены службы приложений**.

    ![Навигация на портале в доменах службы приложений Azure](./media/app-service-web-tutorial-custom-domain/view-app-service-domains.png)

1. В представлении **домены службы приложений** нажмите кнопку **Добавить**.

    ![Щелкните Добавить в доменах службы приложений.](./media/app-service-web-tutorial-custom-domain/add-app-service-domain.png)

1. Выберите **щелкните, чтобы попробовать новую версию доменов службы приложений создать интерфейс**.

    ![Создание домена службы приложений с новым интерфейсом](./media/app-service-web-tutorial-custom-domain/select-new-create-experience.png)

### <a name="basics-tab"></a>Вкладка "Основные сведения"

1. На вкладке " **основы** " настройте параметры, используя следующую таблицу:  

   | Параметр  | Описание |
   | -------- | ----------- |
   | **Подписка** | Подписка, используемая для приобретения домена. |
   | **Группа ресурсов** | Группа ресурсов, в которой будет размещен домен. Например, Группа ресурсов, в которой находится приложение. |
   | **Доменная** | Введите нужный домен. Например, **contoso.com**. Если нужный домен недоступен, можно выбрать из списка предлагаемых доменов или использовать другой домен. |

    > [!NOTE]
    > Следующие [домены верхнего уровня](https://wikipedia.org/wiki/Top-level_domain) поддерживаются доменами службы приложений: _com_, _net_, _co.uk_, _org_, _nl_, _in_, _biz_, _org.uk_ и _co.in_.
    >
    >
    
2. По завершении нажмите кнопку **Далее: Контактная информация**.

### <a name="contact-information-tab"></a>Вкладка «контактные данные»

1. Укажите сведения, необходимые [ИКАНН](https://go.microsoft.com/fwlink/?linkid=2116641) для регистрации домена. 

    Очень важно ввести правильные данные в обязательные поля. Неверные данные для контактной информации могут привести к сбою при покупке домена.

1. По завершении нажмите кнопку **Далее: дополнительно**.

### <a name="advanced-tab"></a>Вкладка «Дополнительно»

1. На вкладке **Дополнительно** настройте дополнительные параметры.  

   | Параметр  | Описание |
   | -------- | ----------- |
   | **Автоматическое продление** | Включен по умолчанию. Ваш домен службы приложений регистрируется в течение одного года. Автоматическое продление гарантирует, что регистрация домена не истечет и вы сохраните владение доменом. Ваша подписка Azure автоматически взимается за ежегодную плату за регистрацию домена на момент продления. Чтобы отказаться от этого, выберите **Отключить**. Если автоматическое продление отключено, его можно [обновить вручную](#renew-the-domain). |
   | **Защита конфиденциальности** | Включен по умолчанию. Защита конфиденциальности скрывает контактные данные регистрации домена из базы данных WHOIS. Защита конфиденциальности уже включена в тариф ежегодной регистрации домена. Чтобы отказаться от этого, выберите **Отключить**. |

2. По завершении нажмите кнопку **Далее: Теги**.

### <a name="finish"></a>Готово

1. На вкладке **теги** задайте нужные теги для домена службы приложений. Для использования доменов службы приложений Добавление тегов не требуется, но это [функция в Azure, которая помогает управлять ресурсами](../azure-resource-manager/management/tag-resources.md).

1. Нажмите кнопку **Далее: Проверка + создать**.

1. На вкладке " **Проверка и создание** " проверьте порядок домена. По завершении нажмите кнопку **Создать**.

    > [!NOTE]
    > Домены службы приложений используют GoDaddy для регистрации доменов и Azure DNS для размещения доменов. Кроме оплаты за ежегодную регистрацию домена, взимается плата за использование Azure DNS. Дополнительные сведения см. на странице [цен на Azure DNS](https://azure.microsoft.com/pricing/details/dns/).
    >
    >

1. После завершения регистрации домена появится кнопка **Переход к ресурсу** . Выберите его, чтобы просмотреть страницу управления.

    ![Домен службы приложений создан. Переход к ресурсу](./media/app-service-web-tutorial-custom-domain/deployment-complete.png)

Теперь все готово к назначению приложения службы приложений этому пользовательскому домену.

## <a name="prepare-the-app"></a>Подготовка приложения

Чтобы сопоставить настраиваемое DNS-имя с веб-приложением, уровень [плана Службы приложений](https://azure.microsoft.com/pricing/details/app-service/) должен быть платным ("Общий", "Базовый", "Стандартный", "Премиум" или "Потребление" для Функций Azure). На этом шаге следует убедиться, что приложение службы приложений находится в поддерживаемой ценовой категории.

[!INCLUDE [app-service-dev-test-note](../../includes/app-service-dev-test-note.md)]

### <a name="navigate-to-the-app-in-the-azure-portal"></a>Переход к приложению на портале Azure

1. В верхней строке поиска найдите и выберите **службы приложений**.

    ![Поиск служб приложений](./media/app-service-web-tutorial-custom-domain/app-services.png)

1. Выберите имя приложения.

    ![Переход к приложению Azure на портале](./media/app-service-web-tutorial-custom-domain/select-app.png)

    Откроется страница управления приложением службы приложений.  

### <a name="check-the-pricing-tier"></a>Проверка ценовой категории

1. В левой области навигации страницы приложения перейдите к разделу **Параметры** и выберите **Увеличить масштаб (план службы приложений)** .

    ![Меню увеличения масштаба](./media/app-service-web-tutorial-custom-domain/scale-up-menu.png)

1. Текущий уровень приложения выделен синей рамкой. Убедитесь, что приложение не находится в ценовой категории **F1**. Использование личного домена DNS не поддерживается на уровне **F1**. 

    :::image type="content" source="./media/app-service-web-tutorial-custom-domain/check-pricing-tier.png" alt-text="Снимок экрана: меню навигации слева на странице приложения с выбранным вертикальным масштабированием (план службы приложений).":::

1. Если план службы приложений не **F1**, закройте страницу **увеличения масштаба** и перейдите к разделу [Приобретение домена](#buy-an-app-service-domain).

### <a name="scale-up-the-app-service-plan"></a>Изменение уровня плана службы приложений

1. Выберите любой платный уровень (**D1**, **B1**, **B2**, **B3** или любой уровень в категории **Рабочие**). Чтобы просмотреть дополнительные параметры, щелкните **См. дополнительные параметры**.

1. Нажмите кнопку **Применить**.

    :::image type="content" source="./media/app-service-web-tutorial-custom-domain/choose-pricing-tier.png" alt-text="Снимок экрана для ценовых категорий пользовательского домена в категории &quot;Рабочая область&quot; с вкладкой &quot;производство&quot;, &quot;план&quot; и выделенной кнопкой &quot;Применить&quot;.":::

    Если вы увидите уведомление ниже, значит уровень плана службы приложений изменен.

    ![Подтверждение операции масштабирования](./media/app-service-web-tutorial-custom-domain/scale-notification.png)

## <a name="map-app-service-domain-to-your-app"></a>Сопоставьте домен службы приложений с приложением

Можно легко сопоставлять имя узла в домене службы приложений с приложением службы приложений, если оно находится в той же подписке. Вы сопоставляете домен службы приложений или любой из его поддоменов непосредственно в своем приложении, и Azure создает необходимые записи DNS.

> [!NOTE]
> Если домен и приложение находятся в разных подписках, домен службы приложений будет сопоставлен с приложением так же, как [сопоставление внешнего приобретенного домена](app-service-web-tutorial-custom-domain.md). В этом случае Azure DNS является поставщиком внешних доменов, и вам нужно [вручную добавить необходимые записи DNS](#manage-custom-dns-records).
>

### <a name="map-the-domain"></a>Сопоставление домена

1. В левой области навигации страницы приложения перейдите к разделу **Параметры** и выберите **Личные домены**.

    ![Снимок экрана с меню "Личные домены".](./media/app-service-web-tutorial-custom-domain/custom-domain-menu.png)

1. Нажмите кнопку **Добавить личный домен**.

    ![Снимок экрана, на котором показан элемент добавления имени узла.](./media/app-service-web-tutorial-custom-domain/add-host-name-cname.png)

1. Введите домен службы приложений (например, **contoso.com**) или поддомен (например, **www.contoso.com**) и нажмите кнопку **проверить**.

    > [!NOTE]
    > Если в имени домена службы приложений была введена опечатка, в нижней части страницы появится ошибка проверки, указывающая на отсутствие некоторых записей DNS. Вам не нужно добавлять эти записи вручную для домена службы приложений. Просто убедитесь, что имя домена введено правильно, и нажмите кнопку **проверить** еще раз.
    >
    > ![Снимок экрана, на котором показана ошибка проверки.](./media/app-service-web-tutorial-custom-domain/verification-error-cname.png)

1. Примите **тип записи имени узла** и нажмите кнопку **Добавить личный домен**.

    ![Снимок экрана, на котором показана кнопка "Добавить личный домен".](./media/app-service-web-tutorial-custom-domain/validate-domain-name-cname.png)

1. Возможно, потребуется некоторое время, чтобы новый личный домен отобразился на странице **Личные домены** вашего приложения. Обновите браузер, чтобы обновить данные.

    ![Снимок экрана, показывающий добавление записи CNAME.](./media/app-service-web-tutorial-custom-domain/cname-record-added.png)

    > [!NOTE]
    > **Небезопасная** метка для личного домена означает, что она еще не привязана к сертификату TLS/SSL. На любой HTTPS-запрос из браузера к такому личному домену возвращается сообщение об ошибке или предупреждение в зависимости от браузера. Сведения о добавлении привязки TLS см. в статье [Защита пользовательского доменного имени с помощью привязки TLS/SSL в Службе приложений Azure](configure-ssl-bindings.md).
    
### <a name="test-the-custom-domain"></a>Тестирование личного домена

Чтобы проверить личный домен, перейдите к нему в браузере.

## <a name="renew-the-domain"></a>Продление срока действия домена

Домен службы приложений, который вы приобрели, действителен в течение одного года с момента покупки. По умолчанию домен настроен для автоматического продления срока действия. Для этого в следующем году с вас списывается соответствующая сумма с помощью выбранного метода оплаты. Вы можете вручную продлить имя домена.

Если вы хотите отключить автоматическое продление или хотите вручную продлить срок действия домена, выполните действия, приведенные ниже.

1. В строке поиска найдите и выберите **домены службы приложений**.

    ![Навигация на портале в доменах службы приложений Azure](./media/app-service-web-tutorial-custom-domain/view-app-service-domains.png)

1. В разделе **Домены службы приложений** выберите домен, который необходимо настроить.

1. В левой области навигации домена выберите **Продление домена**. Чтобы отключить автоматическое продление срока действия домена, установите флажок **выкл**. Этот параметр незамедлительно вступает в силу.

    ![Снимок экрана, на котором показан параметр автоматического продления домена.](./media/custom-dns-web-site-buydomains-web-app/dncmntask-cname-buydomains-autorenew.png)

    > [!NOTE]
    > При переходе от страницы не обращайте внимание на ошибку "несохраненные изменения будут отклонены", нажав кнопку **ОК**.
    >

Чтобы вручную обновить домен, нажмите кнопку **Продление домена**. Однако эта кнопка неактивна до [90 дней до истечения срока действия домена](#when-domain-expires).

Если продление домена прошло успешно, вы получите уведомление по электронной почте в течение 24 часов.

## <a name="when-domain-expires"></a>При истечении срока действия домена

Azure работает с доменами службы приложений с истекшим сроком действия или с истекшим сроком действия следующим образом:

* Если автоматическое продление отключено: 90 дней до истечения срока действия домена, на портале отправляется сообщение с уведомлением об обновлении и активируется кнопка **продлить домен** .
* Если автоматическое продление включено: в день после истечения срока действия домена Azure пытается выставить счет за продление доменного имени.
* Если во время автоматического продления возникает ошибка (например, истек срок действия карточки в файле) или автоматическое продление отключено и вы разрешаете срок действия домена, Azure уведомляет об истечении срока действия домена и парки имя домена. Вы можете [обновить домен вручную](#renew-the-domain) .
* В течение 4-го и 12-дневного дня после истечения срока действия Azure отправляет вам дополнительные уведомления по электронной почте. Вы можете [обновить домен вручную](#renew-the-domain) . По истечении 5-го дня разрешение DNS останавливается для домена с истекшим сроком действия.
* По истечении 19-дневного дня домен остается на удержании, но подпадает под контрольную плату за погашение. Вы можете обратиться в службу поддержки клиентов, чтобы продлить свое доменное имя в соответствии с любыми подходящими обновлениями и погашением расходов.
* На 25-й день после истечения срока действия Azure помещает свой домен в поле "аукцион" в доменное имя службы отрасли. Вы можете обратиться в службу поддержки клиентов, чтобы продлить свое доменное имя в соответствии с любыми подходящими обновлениями и погашением расходов.
* В течение 30 дней после истечения срока действия вы больше не сможете активировать домен.

<a name="custom"></a>

## <a name="manage-custom-dns-records"></a>Управление пользовательскими записями DNS

В Azure управление записями DNS для домена службы приложений осуществляется с помощью [Azure DNS](https://azure.microsoft.com/services/dns/). Вы можете добавлять, удалять и обновлять записи DNS так же, как для приобретенного внешнего домена. Для управления пользовательскими записями DNS:

1. В строке поиска найдите и выберите **домены службы приложений**.

    ![Навигация на портале в доменах службы приложений Azure](./media/app-service-web-tutorial-custom-domain/view-app-service-domains.png)

1. В разделе **Домены службы приложений** выберите домен, который необходимо настроить.

1. На странице **Обзор** выберите **Управление записями DNS**.

    ![Снимок экрана, на котором показано, где можно получить доступ к записям DNS.](./media/custom-dns-web-site-buydomains-web-app/dncmntask-cname-buydomains-dns-zone.png)

Сведения о том, как изменять записи DNS, см. в статье [Приобретение и настройка имени личного домена для службы приложений Azure](../dns/dns-operations-dnszones-portal.md).

## <a name="cancel-purchase-delete-domain"></a>Отмена покупки (удаление домена)

Вы можете отменить регистрацию домена службы приложений с полным возмещением в течение 5 дней после даты покупки домена. По истечении 5 дней вы сможете удалить домен службы приложений, но не сможете получить полное возмещение.

1. В строке поиска найдите и выберите **домены службы приложений**.

    ![Навигация на портале в доменах службы приложений Azure](./media/app-service-web-tutorial-custom-domain/view-app-service-domains.png)

1. В разделе **Домены службы приложений** выберите домен, который необходимо настроить.

1. В левой области навигации домена выберите **привязки имен узлов**. Здесь перечислены привязки имен узлов из всех служб Azure.

    ![Снимок экрана, на котором показана страница привязок имен узлов.](./media/custom-dns-web-site-buydomains-web-app/dncmntask-cname-buydomains-hostname-bindings.png)

1. Удалите каждую привязку имени узла, выбрав **...**  >  **Удалить**. После удаления всех привязок нажмите кнопку **Сохранить**.

    <!-- ![Screenshot that shows where to delete the hostname bindings.](./media/custom-dns-web-site-buydomains-web-app/dncmntask-cname-buydomains-delete-hostname-bindings.png) -->

1. В левой области навигации домена выберите **Обзор**. 

1. Если период отмены приобретенного домена не истек, выберите **Отменить покупку**. В противном случае вы увидите кнопку **Удалить**. Чтобы удалить домен без возмещения средств, нажмите кнопку **Удалить**.

    ![Снимок экрана, на котором показано, куда удалять или отменять приобретенный домен.](./media/custom-dns-web-site-buydomains-web-app/dncmntask-cname-buydomains-cancel.png)

1. Подтвердите операцию, выбрав **Да**.

    После завершения операции домен освобождается из подписки, и его снова может купить любой желающий. 

## <a name="direct-default-url-to-a-custom-directory"></a>Прямой URL-адрес по умолчанию для пользовательского каталога

По умолчанию служба приложений направляет веб-запросы в корневой каталог кода приложения. Чтобы направить их в подкаталог, например `public` , см. раздел [перенаправление в пользовательский каталог](app-service-web-tutorial-custom-domain.md#redirect-to-a-custom-directory).

## <a name="next-steps"></a>Дальнейшие действия

Узнайте, как привязать пользовательский сертификат TLS/SSL к службе приложений.

> [!div class="nextstepaction"]
> [Защита настраиваемого DNS-имени с помощью привязки TLS в службе приложений Azure](configure-ssl-bindings.md)
