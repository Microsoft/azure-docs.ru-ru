---
title: Управление трафиком с помощью диспетчера трафика
description: Ознакомьтесь с рекомендациями по настройке диспетчера трафика Azure при его интеграции со службой приложений Azure.
ms.assetid: dabda633-e72f-4dd4-bf1c-6e945da456fd
ms.topic: article
ms.date: 02/25/2016
ms.custom: seodec18
ms.openlocfilehash: 040f84288c66f4506919e775b9ea41324b617cfa
ms.sourcegitcommit: 867cb1b7a1f3a1f0b427282c648d411d0ca4f81f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "80437900"
---
# <a name="controlling-azure-app-service-traffic-with-azure-traffic-manager"></a>Управление трафиком службы приложений Azure с помощью диспетчера трафика Azure
> [!NOTE]
> В этой статье представлена сводная информация об использовании диспетчера трафика Microsoft Azure со службой приложений Azure. Дополнительные сведения о самом компоненте диспетчера трафика Azure можно найти по ссылкам, приведенным в конце статьи.
> 
> 

## <a name="introduction"></a>Введение
С помощью диспетчера трафика Azure можно управлять распределением запросов от веб-клиентов между приложениями в службе приложений Azure. После добавления конечных точек службы приложений в профиль диспетчера трафика Azure этот компонент отслеживает состояние ваших приложений службы приложений (запущены, остановлены или удалены). На основании этой информации диспетчер трафика принимает решение о том, на какие из этих конечных точек нужно перенаправлять трафик.

## <a name="routing-methods"></a>Методы маршрутизации
Диспетчер трафика Azure использует четыре разных метода маршрутизации. Эти методы и их применение к службе приложений Azure описаны в следующем списке.

* **[По приоритету](../traffic-manager/traffic-manager-routing-methods.md#priority-traffic-routing-method)**. Основное приложение получает весь трафик, а резервные копии создаются на тот случай, если основное или резервное приложения будут недоступны.
* **[Со взвешиванием](../traffic-manager/traffic-manager-routing-methods.md#weighted)**. Трафик распределяется между несколькими приложениями равномерно или в соответствии с весовыми коэффициентами, которые вы можете настроить.
* **[По производительности](../traffic-manager/traffic-manager-routing-methods.md#performance)**. Если используется несколько приложений, размещенных в разных географических регионах, трафик направляется к ближайшему из них в соответствии со статистикой задержек в сети.
* **[Географический](../traffic-manager/traffic-manager-routing-methods.md#geographic)**. Пользователи направляются к конкретному приложению в соответствии с настройками для географических расположений, из которых получены соответствующие запросы DNS. 

Дополнительные сведения см. в статье [Методы маршрутизации диспетчера трафика](../traffic-manager/traffic-manager-routing-methods.md).

## <a name="app-service-and-traffic-manager-profiles"></a>Служба приложений и профили диспетчера трафика
Чтобы настроить управление трафиком приложения службы приложений, создайте профиль в диспетчере трафика Azure, который использует один из четырех описанных выше методов балансировки нагрузки, а затем добавьте конечные точки (в этом случае — службу приложений), для которых требуется управлять трафиком в профиле. Сведения о состоянии приложения (запущено, остановлено или удалено) регулярно передаются в профиль. Это позволяет диспетчеру трафика Azure правильно перенаправлять трафик.

При использовании диспетчера трафика Azure с Azure необходимо помнить следующее:

* В случае развертывания в одном регионе служба приложений уже предоставляет возможности отработки отказа и циклического перебора вне зависимости от режима работы приложения.
* В случае развертывания в одном регионе, в котором служба приложений используется совместно с другой облачной службой Azure, вы можете сочетать оба типа конечных точек для реализации гибридных сценариев.
* В профиле можно указать только одну конечную точку службы приложений на регион. При выборе приложения в качестве конечной точки для одного региона остальные приложения в этом регионе становятся недоступны для выбора.
* Конечные точки службы приложений, которые вы укажете в профиле диспетчера трафика Azure, появляются в разделе **Доменные имена** на странице настройки приложения, входящего в этот профиль, но настроить их там невозможно.
* Когда вы добавите приложение в профиль, на странице этого приложения на панели мониторинга в поле **URL-адрес** отобразится URL-адрес личного домена, если вы настроили его для этого приложения. В противном случае отобразится URL-адрес профиля диспетчера трафика (например, `contoso.trafficmanager.net`). На странице настройки приложения в разделе **Доменные имена** одновременно отображаются оба адреса: прямое доменное имя приложения и URL-адрес диспетчера трафика.
* Имена личных доменов будут работать как обычно, но нужно не только добавить их в приложение, но и настроить для них сопоставление DNS с URL-адресом диспетчера трафика. Сведения о том, как настроить личный домен для приложения службы приложений, см. в статье [Настройка пользовательского доменного имени в службе приложений Azure с интеграцией диспетчера трафика](configure-domain-traffic-manager.md).
* В профиль диспетчера трафика Azure можно добавлять только приложения, использующие уровень "Стандартный" или "Премиум".
* Добавление приложения в профиль диспетчера трафика приводит к перезапуску приложения.

## <a name="next-steps"></a>Дальнейшие действия
Общие и технические сведения о диспетчере трафика Azure см. в разделе [Обзор диспетчера трафика](../traffic-manager/traffic-manager-overview.md).


