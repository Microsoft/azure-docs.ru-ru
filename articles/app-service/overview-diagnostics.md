---
title: Средство диагностики и устранения проблем
description: Узнайте, как устранять неполадки в приложении в службе приложений Azure с помощью средства "Диагностика и устранение неполадок" в портал Azure.
keywords: app service, azure app service, diagnostics, support, web app, troubleshooting, self-help
author: jen7714
ms.topic: article
ms.date: 10/18/2019
ms.author: jennile
ms.custom: seodec18
ms.openlocfilehash: d58341979b0bbe0699a5ca293b20394c43cde1d1
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "88962814"
---
# <a name="azure-app-service-diagnostics-overview"></a>Общие сведения о диагностике службы приложений Azure

Если вы используете веб-приложение, нужно быть готовым к любым возможным проблемам, от появления ошибок 500 до сообщений пользователей о том, что сайт не работает. Диагностика службы приложений — это интеллектуальный и интерактивный интерфейс, помогающий устранять неполадки в приложении без необходимости настройки. При возникновении проблем с приложением диагностика службы приложений указывает, что не так, чтобы упростить и быстро устранить проблему и устранить ее.

Хотя эта возможность наиболее полезна при возникновении проблем с приложением в течение последних 24 часов, все диагностические графы всегда доступны для анализа.

Диагностика службы приложений работает не только для приложений Windows, но и для приложений на [Linux с контейнерами](./overview.md#app-service-on-linux), в [среде службы приложений](./environment/intro.md) и в службе [Функции Azure](../azure-functions/functions-overview.md).

## <a name="open-app-service-diagnostics"></a>Доступ к диагностике службы приложений

Чтобы получить доступ к диагностике службы приложений, перейдите к веб-приложению службы приложений или Среда службы приложений в [портал Azure](https://portal.azure.com). На панели навигации слева щелкните **Диагностика и решение проблем**.

Для функций Azure перейдите к приложению функции, а затем в верхней области навигации щелкните **компоненты платформы** и выберите **Диагностика и устранение проблем** в разделе **Управление ресурсами** .

На домашней странице диагностики службы приложений можно выбрать категорию, которая наилучшим образом описывает эту ошибку в приложении, используя ключевые слова на каждой плитке домашней страницы. Кроме того, на этой странице можно найти **средства диагностики** для приложений Windows. См. раздел [средства диагностики (только для приложения Windows)](#diagnostic-tools-only-for-windows-app).

![Домашняя страница](./media/app-service-diagnostics/app-service-diagnostics-homepage-1.png)

> [!NOTE]
> Если приложение работает медленно, можно [получить трассировку профилирования](https://azure.github.io/AppService/2018/06/06/App-Service-Diagnostics-Profiling-an-ASP.NET-Web-App-on-Azure-App-Service.html) для выявления причины проблемы. Профилирование имеет неяркий вес и предназначено для рабочих сценариев.
>

## <a name="interactive-interface"></a>Интерактивный интерфейс

После выбора категории домашней страницы, которая лучше всего соответствует проблеме вашего приложения, интерактивный интерфейс диагностики службы приложений, Genie, может помочь вам в диагностике и решении проблем с приложением. Вы можете использовать ярлыки плиток, предоставляемые Genie, для просмотра полного диагностического отчета интересующей вас категории проблем. Плитки быстрых действий обеспечивают прямой доступ к метрикам диагностики.

![Плитки быстрых действий](./media/app-service-diagnostics/tile-shortcuts-2.png)

Щелкнув эти плитки, можно просмотреть список разделов, связанных с проблемой, описанной в плитке. Эти статьи содержат фрагменты с важными сведениями из полного отчета. Вы можете щелкнуть любой из этих разделов для дальнейшего изучения проблем. Кроме того, можно щелкнуть **Просмотреть полный отчет** , чтобы изучить все темы на одной странице.

![Разделы](./media/app-service-diagnostics/application-logs-insights-3.png)

![Просмотреть полный отчет](./media/app-service-diagnostics/view-full-report-4.png)

## <a name="diagnostic-report"></a>Диагностический отчет

После того, как вы решите устранить проблему, щелкнув раздел, можно просмотреть дополнительные сведения о разделе, который часто дополняется диаграммами и файлы Markdown. Диагностический отчет может быть мощным средством для выявления проблемы в приложении.

![Диагностический отчет](./media/app-service-diagnostics/full-diagnostic-report-5.png)

## <a name="health-checkup"></a>Проверка работоспособности

Если вы не уверены в том, в чем заключается проблема с вашим приложением, или не узнаете, где следует начать устранение неполадок, лучше всего начать проверку работоспособности. Проверка работоспособности анализирует ваши приложения, чтобы дать вам быстрый интерактивный обзор, который указывает на работоспособность и неправильность, указывая, где следует искать причину проблемы. Интеллектуальный и интерактивный интерфейс предлагает рекомендации в течение всего процесса устранения проблем. Проверка работоспособности интегрирована с Genie интерфейсом для приложений Windows и диагностического отчета о веб-приложениях для Linux.

### <a name="health-checkup-graphs"></a>Графики проверки работоспособности

В ходе проверки работоспособности существует четыре разных графика.

- **запросы и ошибки:** Граф, отображающий количество запросов за последние 24 часа и ошибки HTTP-сервера.
- **производительность приложения:** Граф, отображающий время ответа за последние 24 часа для различных групп процентилей.
- **Загрузка ЦП:** Граф, отображающий общий процент использования ЦП на экземпляр за последние 24 часа.  
- **использование памяти:** Граф, показывающий общий процент использования физической памяти на экземпляр за последние 24 часа.

![Проверка работоспособности](./media/app-service-diagnostics/health-checkup-6.png)

### <a name="investigate-application-code-issues-only-for-windows-app"></a>Исследование проблем с кодом приложения (только для приложения Windows)

Многие проблемы приложений связаны с ошибками в коде приложения, поэтому диагностика службы приложений в интеграции [Application Insights](../azure-monitor/app/app-insights-overview.md) позволяет проводить анализ исключений и зависимостей для поиска проблем, имеющих отношение к выбранному времени простоя. Application Insights необходимо включить отдельно.

![Application Insights](./media/app-service-diagnostics/application-insights-7.png)

Чтобы просмотреть Application Insights исключения и зависимости, выберите ярлыки **веб-приложения** или **веб-приложения медленные** плитки.

### <a name="troubleshooting-steps-only-for-windows-app"></a>Действия по устранению неполадок (только для приложений Windows)

Если в течение последних 24 часов обнаружена проблема с определенной категорией проблем, можно просмотреть полный диагностический отчет, и диагностика службы приложений может предложить вам просмотреть дополнительные советы по устранению неполадок и дальнейшие действия для более интерактивного интерфейса.

![Application Insights и устранение неполадок и дальнейшие действия](./media/app-service-diagnostics/troubleshooting-and-next-steps-8.png)

## <a name="diagnostic-tools-only-for-windows-app"></a>Средства диагностики (только для приложений Windows)

Средства диагностики включают более сложные средства диагностики, помогающие исследовать проблемы кода приложения, медленная работа, строки подключения и многое другое. и упреждающие средства, помогающие устранить проблемы использования ЦП, запросов и памяти.

### <a name="proactive-cpu-monitoring"></a>Упреждающий мониторинг ЦП

Упреждающий мониторинг ЦП обеспечивает простой и упреждающий способ выполнения действия, когда приложение или дочерний процесс использует ресурсы ЦП большого уровня. Вы можете задать собственные правила порога ЦП, чтобы временно уменьшить нагрузку на ЦП, пока не будет обнаружена реальная причина непредвиденной проблемы. Дополнительные сведения см. в статье [Устранение проблем с производительностью ЦП](https://azure.github.io/AppService/2019/10/07/Mitigate-your-CPU-problems-before-they-even-happen.html).

![Упреждающий мониторинг ЦП](./media/app-service-diagnostics/proactive-cpu-monitoring-9.png)

### <a name="auto-healing-and-proactive-auto-healing"></a>Автоматическое восстановление и упреждающее автоматическое восстановление

Автоматическое восстановление — это действие по устранению рисков, которое можно предпринять при непредвиденном поведении приложения. Вы можете задать собственные правила на основе числа запросов, скорости запроса, предела памяти и кода состояния HTTP, чтобы активировать действия по устранению рисков. Используйте средство, чтобы временно устранить непредвиденное поведение, пока не обнаружится основная причина. Дополнительные сведения см. [в статье объявление новых возможностей автоматического восстановления в службе диагностики службы приложений](https://azure.github.io/AppService/2018/09/10/Announcing-the-New-Auto-Healing-Experience-in-App-Service-Diagnostics.html).

![Автоматическое восстановление](./media/app-service-diagnostics/auto-healing-10.png)

Как и упреждающее наблюдение за ЦП, упреждающее автоматическое восстановление — это решение, которое позволяет устранить непредвиденное поведение приложения. Упреждающее автоматическое восстановление перезапускает приложение, когда служба приложений определит, что приложение находится в невосстанавливаемом состоянии. Дополнительные сведения см. в разделе [Введение в упреждающее автоматическое](https://azure.github.io/AppService/2017/08/17/Introducing-Proactive-Auto-Heal.html)восстановление.

## <a name="navigator-and-change-analysis-only-for-windows-app"></a>Навигатор и анализ изменений (только для приложения Windows)

В большой группе с непрерывной интеграцией и при наличии множества зависимостей у приложения может быть трудно выявить конкретное изменение, которое вызывает неработоспособное поведение. Навигатор помогает получить представление о топологии приложения, автоматически выполнив визуализацию схемы зависимостей приложения и всех ресурсов в той же подписке. Навигатор позволяет просматривать объединенный список изменений, внесенных приложением и его зависимостями, и ограничивать изменения, вызывающие неработоспособное поведение. Доступ к нему можно получить с помощью **навигатора** плитки домашней страницы. его необходимо включить, прежде чем использовать его в первый раз. Дополнительные сведения см. [в разделе Получение сведений о зависимостях приложения с помощью навигатора](https://azure.github.io/AppService/2019/08/06/Bring-visibility-to-your-app-and-its-dependencies-with-Navigator.html).

![Страница навигатора по умолчанию](./media/app-service-diagnostics/navigator-default-page-11.png)

![Представление инструмента сравнения](./media/app-service-diagnostics/diff-view-12.png)

Доступ к анализу изменений приложений можно получить с помощью ярлыков плиток, **изменений приложений** и **сбоев приложений** в **доступности и производительности** , чтобы их можно было использовать одновременно с другими метриками. Перед использованием этой функции необходимо сначала включить ее. Дополнительные сведения см. [в статье объявление новых возможностей анализа изменений в службе диагностики службы приложений](https://azure.github.io/AppService/2019/05/07/Announcing-the-new-change-analysis-experience-in-App-Service-Diagnostics-Analysis.html).

Опубликуйте свои вопросы или отзывы в [UserVoice](https://feedback.azure.com/forums/169385-web-apps) , добавив "[DIAG]" в заголовке.