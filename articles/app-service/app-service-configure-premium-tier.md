---
title: Настройка уровня Премиум (версия 3)
description: Узнайте, как повысить производительность веб-приложения, мобильных устройств и приложений API в службе приложений Azure путем масштабирования до новой ценовой категории PremiumV3.
keywords: служба приложений, служба приложений azure, масштабировать, масштабируемый, план службы приложений, стоимость службы приложений
ms.assetid: ff00902b-9858-4bee-ab95-d3406018c688
ms.topic: article
ms.date: 10/01/2020
ms.custom: seodec18, devx-track-azurecli
ms.openlocfilehash: c187a1521762c0b69d42c81f464694729d3c02f7
ms.sourcegitcommit: e559daa1f7115d703bfa1b87da1cf267bf6ae9e8
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 02/17/2021
ms.locfileid: "100594218"
---
# <a name="configure-premiumv3-tier-for-azure-app-service"></a>Настройка уровня PremiumV3 для службы приложений Azure

Новая ценовая категория **PremiumV3** предоставляет более быстрые процессоры, хранилище SSD и четверное соотношение между памятью и ядром существующих ценовых категорий (Double уровня **категории премиум v2** ). В дополнение к более высокой производительности вы можете сэкономить свои деньги, запуская приложения на меньшем числе экземпляров. Из этой статьи вы узнаете, как создать приложение на уровне **PremiumV3** или масштабировать приложение до уровня **PremiumV3** .

## <a name="prerequisites"></a>Предварительные требования

Чтобы масштабировать приложение до **PremiumV3**, необходимо иметь приложение службы приложений Azure, которое работает в ценовой категории ниже **PremiumV3**, а приложение должно выполняться в развертывании службы приложений, поддерживающем PremiumV3.

<a name="availability"></a>

## <a name="premiumv3-availability"></a>Доступность PremiumV3

Уровень **PremiumV3** доступен как для собственных приложений, так и для контейнеров, включая контейнеры Windows и контейнеры Linux.

> [!NOTE]
> Все контейнеры Windows, работающие на уровне **контейнера "Премиум** " в период действия предварительной версии, продолжают работать как есть, но уровень **контейнера "Премиум** " останется в предварительной версии. Уровень **PremiumV3** является официальной заменой для уровня **контейнера Premium** . 

**PremiumV3** доступен в некоторых регионах Azure, и доступность в дополнительных регионах постоянно добавляется. Чтобы узнать, доступна ли она в вашем регионе, выполните следующую команду Azure CLI в [Azure Cloud Shell](../cloud-shell/overview.md):

```azurecli-interactive
az appservice list-locations --sku P1V3
```

<a name="create"></a>

## <a name="create-an-app-in-premiumv3-tier"></a>Создание приложения на уровне PremiumV3

Ценовая категория приложения службы приложений определяется в [плане службы приложений](overview-hosting-plans.md), с использованием которого оно выполняется. Вы можете создать план службы приложений отдельно или в процессе создания приложения.

При настройке плана службы приложений на <a href="https://portal.azure.com" target="_blank">портале Azure</a> выберите **Ценовая категория**. 

Выберите **Рабочая**, затем выберите **P1V3**, **P2V3** или **P3V3**, а затем нажмите кнопку **Применить**.

![Снимок экрана, показывающий Рекомендуемые ценовые категории для вашего приложения.](media/app-service-configure-premium-tier/scale-up-tier-select.png)

> [!IMPORTANT] 
> Если вы не видите параметры **P1V3**, **P2V3** и **P3V3** в качестве параметров или если параметры неактивны, то **PremiumV3** , скорее всего, недоступен в базовом развертывании службы приложений, содержащем план службы приложений. Ознакомьтесь с разделом [Увеличение масштаба для группы ресурсов из неподдерживаемого региона](#unsupported) для получения дополнительных сведений.

## <a name="scale-up-an-existing-app-to-premiumv3-tier"></a>Масштабирование существующего приложения до уровня PremiumV3

Перед масштабированием существующего приложения до уровня **PremiumV3** убедитесь, что **PremiumV3** доступен. Дополнительные сведения см. в разделе [PremiumV3 Availability](#availability). Если эта ценовая категория недоступна, ознакомьтесь с разделом [Увеличение масштаба для группы ресурсов из неподдерживаемого региона](#unsupported).

В зависимости от выбранной среды размещения масштабирование может потребовать дополнительных шагов. 

Откройте страницу службы приложений на <a href="https://portal.azure.com" target="_blank">портале Azure</a>.

В левой области навигации этой страницы выберите **Увеличить масштаб (план службы приложений)**.

![Снимок экрана, показывающий, как масштабировать план службы приложений.](media/app-service-configure-premium-tier/scale-up-tier-portal.png)

Выберите **Рабочая**, затем выберите **P1V3**, **P2V3** или **P3V3**, а затем нажмите кнопку **Применить**.

![Снимок экрана, показывающий Рекомендуемые ценовые категории для вашего приложения.](media/app-service-configure-premium-tier/scale-up-tier-select.png)

Если операция завершается успешно, на странице обзора вашего приложения отображается, что она теперь находится на **PremiumV3** уровне.

![Снимок экрана, на котором показана ценовая категория PremiumV3 на странице обзора приложения.](media/app-service-configure-premium-tier/finished.png)

### <a name="if-you-get-an-error"></a>Если возникла ошибка

Некоторые планы службы приложений не могут масштабироваться до уровня PremiumV3, если базовое развертывание службы приложений не поддерживает PremiumV3. Ознакомьтесь с разделом [Увеличение масштаба для группы ресурсов из неподдерживаемого региона](#unsupported) для получения дополнительных сведений.

<a name="unsupported"></a>

## <a name="scale-up-from-an-unsupported-resource-group-and-region-combination"></a>Увеличение масштаба для группы ресурсов из неподдерживаемого региона

Если приложение выполняется в развертывании службы приложений, где **PremiumV3** недоступно, или если ваше приложение работает в регионе, который сейчас не поддерживает **PremiumV3**, необходимо повторно развернуть приложение, чтобы воспользоваться преимуществами **PremiumV3**.  Имеются две возможности.

- Создайте приложение в новой группе ресурсов и с новым планом службы приложений. При создании плана службы приложений выберите уровень **PremiumV3** . Этот шаг обеспечивает развертывание плана службы приложений в единицу развертывания, которая поддерживает **PremiumV3**. Затем повторно разверните код приложения в созданном приложении. Даже если вы масштабируете план службы приложений до более низкого уровня, чтобы сэкономить затраты, можно всегда масштабировать резервную копию до **PremiumV3** , так как она поддерживается единицей развертывания.
- Если приложение уже запущено на существующем уровне **Premium** , можно клонировать приложение со всеми параметрами приложения, строками подключения и конфигурацией развертывания в новую группу ресурсов в новом плане службы приложений, использующем **PremiumV3**.

    ![Снимок экрана, показывающий, как клонировать приложение.](media/app-service-configure-premium-tier/clone-app.png)

    На странице **клонирование приложения** можно создать план службы приложений с помощью **PremiumV3** в нужном регионе и указать параметры и конфигурацию приложения, которые необходимо клонировать.

## <a name="moving-from-premium-container-to-premium-v3-sku"></a>Перемещение из контейнера Premium в SKU Premium v3

Если у вас есть приложение, которое использует SKU контейнера предварительной версии Premium и вы хотите перейти на новый SKU Premium версии 3, необходимо повторно развернуть приложение, чтобы воспользоваться преимуществами **PremiumV3**. Сведения о том, как это сделать, см. в описании первого варианта [масштабирования с неподдерживаемой комбинацией группы ресурсов и региона](#scale-up-from-an-unsupported-resource-group-and-region-combination)

## <a name="automate-with-scripts"></a>Автоматизация с помощью сценариев

Вы можете автоматизировать создание приложений на уровне **PremiumV3** с помощью сценариев, используя [Azure CLI](/cli/azure/install-azure-cli) или [Azure PowerShell](/powershell/azure/).

### <a name="azure-cli"></a>Azure CLI

Следующая команда создает план службы приложений в _P1V3_. Ее можно запустить в Cloud Shell. Параметры для `--sku` : P1V3, _P2V3_ и _P3V3_.

```azurecli-interactive
az appservice plan create \
    --resource-group <resource_group_name> \
    --name <app_service_plan_name> \
    --sku P1V3
```

### <a name="azure-powershell"></a>Azure PowerShell

[!INCLUDE [updated-for-az](../../includes/updated-for-az.md)]

Следующая команда создает план службы приложений в _P1V3_. Параметрами для `-WorkerSize` являются _Мелкий_, _Средний_ и _Крупный_.

```powershell
New-AzAppServicePlan -ResourceGroupName <resource_group_name> `
    -Name <app_service_plan_name> `
    -Location <region_name> `
    -Tier "PremiumV3" `
    -WorkerSize "Small"
```

## <a name="more-resources"></a>Дополнительные ресурсы

[Увеличение масштаба приложения в Azure](manage-scale-up.md) 
 [Масштабирование числа экземпляров вручную или автоматически](../azure-monitor/autoscale/autoscale-get-started.md)
