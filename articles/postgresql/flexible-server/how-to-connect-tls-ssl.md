---
title: Зашифрованное подключение с использованием TLS/SSL в базе данных Azure для PostgreSQL-гибкого сервера
description: Инструкции и сведения о подключении с использованием TLS/SSL в базе данных Azure для PostgreSQL-гибкого сервера.
author: ambhatna
ms.author: ambhatna
ms.service: postgresql
ms.topic: conceptual
ms.date: 09/22/2020
ms.openlocfilehash: 0ba04ff14e62cd411515a765dc95ef7a3e72b709
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "90938919"
---
# <a name="encrypted-connectivity-using-transport-layer-security-in-azure-database-for-postgresql---flexible-server"></a>Зашифрованное подключение с использованием защиты транспортного уровня в базе данных Azure для PostgreSQL-гибкого сервера

> [!IMPORTANT]
> Гибкий сервер Базы данных Azure для PostgreSQL предоставляется в режиме предварительной версии

База данных Azure для PostgreSQL — гибкий сервер поддерживает подключение клиентских приложений к службе PostgreSQL с помощью протокола TLS, ранее известного как SSL (SSL). TLS — это стандартный промышленный протокол, обеспечивающий шифрование сетевых подключений между сервером базы данных и клиентскими приложениями, что позволяет соблюдать требования соответствия.

База данных Azure для PostgreSQL — гибкий сервер поддерживает зашифрованные подключения с использованием протокола TLS 1.2 +), а все входящие подключения с TLS 1,0 и TLS 1,1 будут отклонены. Для всех гибких серверов принудительное применение TLS-подключений включено, и вы не можете отключить TLS/SSL для подключения к гибкому серверу.

## <a name="applications-that-require-certificate-verification-for-tlsssl-connectivity"></a>Приложения, для которых требуется проверка сертификата для подключения TLS/SSL
В некоторых случаях для безопасного подключения приложениям требуется локальный файл сертификата, созданный из файла сертификата доверенного центра сертификации (ЦС). База данных Azure для PostgreSQL — гибкий сервер использует *глобальный корневой ЦС DigiCert*. Скачайте этот сертификат, необходимый для взаимодействия по протоколу SSL от [глобального корневого центра сертификации DigiCert](https://dl.cacerts.digicert.com/DigiCertGlobalRootCA.crt.pem) и сохранения файла сертификата в предпочтительном расположении. Например, в этом учебнике используется `c:\ssl`.


### <a name="connect-using-psql"></a>Подключение с помощью psql
Если вы создали гибкий сервер в режиме *Закрытый доступ (интеграция с виртуальной сетью)* , к этому серверу придется подключаться с другого ресурса в той же виртуальной сети. Например, можно создать виртуальную машину и добавить ее в виртуальную сеть, созданную для гибкого сервера.

Если вы создали гибкий сервер в режиме *Открытый доступ (разрешенные IP-адреса)* , вы можете добавить локальный IP-адрес в список правил брандмауэра на этом сервере.

В следующем примере показано, как подключиться к серверу с помощью интерфейса командной строки psql. Используйте `sslmode=verify-full` параметр строки подключения для принудительной проверки сертификата TLS/SSL. Передайте путь к файлу локального сертификата `sslrootcert` параметру.

```bash
 psql "sslmode=verify-full sslrootcert=c:\ssl\DigiCertGlobalRootCA.crt.pem host=mydemoserver.postgres.database.azure.com dbname=postgres user=myadmin"
```
> [!Note]
> Убедитесь, что значение, передаваемое в, `sslrootcert` соответствует пути к файлу сохраненного сертификата.

## <a name="ensure-your-application-or-framework-supports-tls-connections"></a>Убедитесь, что приложение или платформа поддерживает подключения TLS.

Некоторые платформы приложений, использующие PostgreSQL для своих служб баз данных, по умолчанию не включают TLS во время установки. Сервер PostgreSQL принудительно использует TLS-подключения, но если приложение не настроено для TLS, приложение может не подключиться к серверу базы данных. Чтобы узнать, как включить TLS, ознакомьтесь с документацией по приложению.

## <a name="next-steps"></a>Дальнейшие действия
- [Создание базы данных Azure для PostgreSQL-гибкой виртуальной сети сервера и управление ею с помощью Azure CLI](./how-to-manage-virtual-network-cli.md).
- Дополнительные сведения о работе [в сети в базе данных Azure для PostgreSQL-гибкого сервера](./concepts-networking.md)
- Дополнительные сведения о [базе данных Azure для PostgreSQL. правила брандмауэра для гибких серверов](./concepts-networking.md#public-access-allowed-ip-addresses)
