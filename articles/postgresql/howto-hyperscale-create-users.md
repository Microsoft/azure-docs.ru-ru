---
title: Создание пользователей — масштабирование (Цитус) — база данных Azure для PostgreSQL
description: В этой статье описывается создание новых учетных записей пользователей для взаимодействия с базой данных Azure для PostgreSQL-Scale (Цитус).
author: jonels-msft
ms.author: jonels
ms.service: postgresql
ms.subservice: hyperscale-citus
ms.topic: how-to
ms.date: 1/8/2019
ms.openlocfilehash: 3d23ee6119b625e11ce44bb9ad11ce4b3ee0280d
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "91295742"
---
# <a name="create-users-in-azure-database-for-postgresql---hyperscale-citus"></a>Создание пользователей в базе данных Azure для PostgreSQL — масштабирование (Цитус)

> [!NOTE]
> Термин "Пользователи" относится к пользователям в группе серверов с горизонтальным масштабированием (Цитус). Дополнительные сведения о пользователях подписки Azure и их привилегиях см. в [статье Управление доступом на основе ролей Azure (Azure RBAC)](../role-based-access-control/built-in-roles.md) или изучение [настройки ролей](../role-based-access-control/custom-roles.md).

## <a name="the-server-admin-account"></a>Учетная запись администратора сервера

Подсистема PostgreSQL использует [роли](https://www.postgresql.org/docs/current/sql-createrole.html) для управления доступом к объектам базы данных, а вновь созданная группа серверов с горизонтальным масштабированием (Цитус) поставляется с несколькими предварительно определенными ролями:

* [Роли PostgreSQL по умолчанию](https://www.postgresql.org/docs/current/default-roles.html)
* `azure_pg_admin`
* `postgres`
* `citus`

Поскольку масштабирование (Цитус) является управляемой службой PaaS, только корпорация Майкрософт может войти в систему с `postgres` ролью суперпользователя. Для ограниченного административного доступа (Цитус) предоставляет `citus` роль.

Разрешения для `citus` роли:

* Чтение всех переменных конфигурации, даже переменных, обычно видимых только для пользователей.
* Чтение всех \_ представлений PG stat \_ \* и использование различных расширений, связанных с статистикой — даже представления или расширения, обычно видимые только для пользователей.
* Выполнение функций мониторинга, которые могут получать доступ к блокировкам таблиц, потенциально в течение длительного времени.
* [Создайте расширения PostgreSQL](concepts-hyperscale-extensions.md) (поскольку роль является членом `azure_pg_admin` ).

Особенно, у `citus` роли есть некоторые ограничения:

* Не удается создать роли
* Не удается создать базы данных

## <a name="how-to-create-additional-user-roles"></a>Создание дополнительных ролей пользователей

Как уже упоминалось, `citus` учетная запись администратора не имеет разрешения на создание дополнительных пользователей. Чтобы добавить пользователя, используйте интерфейс портал Azure.

1. Перейдите на страницу **роли** для группы серверов Цитус и нажмите кнопку **+ Добавить**:

   :::image type="content" source="media/howto-hyperscale-create-users/1-role-page.png" alt-text="Страница «роли»":::

2. Введите имя и пароль роли. Выберите команду **Сохранить**.

   :::image type="content" source="media/howto-hyperscale-create-users/2-add-user-fields.png" alt-text="Добавить роль":::

Пользователь будет создан на узле координатора группы серверов и распространен на все рабочие узлы. Роли, созданные с помощью портал Azure `LOGIN` , имеют атрибут, что означает, что они являются настоящими пользователями, которые могут входить в базу данных.

## <a name="how-to-modify-privileges-for-user-role"></a>Изменение привилегий для роли пользователя

Новые роли пользователей обычно используются для предоставления доступа к базе данных с ограниченными правами. Чтобы изменить привилегии пользователя, используйте стандартные команды PostgreSQL, используя такие средства, как PgAdmin или psql. (См. раздел " [подключение с помощью psql](quickstart-create-hyperscale-portal.md#connect-to-the-database-using-psql) " в кратком руководстве по масштабированию (Цитус).)

Например, чтобы разрешить `db_user` Чтение `mytable` , предоставьте разрешение:

```sql
GRANT SELECT ON mytable TO db_user;
```

Масштабирование (Цитус) распространяет инструкции GRANT с одной таблицы на весь кластер, применяя их ко всем рабочим узлам. Он также распространяет предоставление, которое является масштабом всей системы (например, для всех таблиц в схеме):

```sql
-- applies to the coordinator node and propagates to workers
GRANT SELECT ON ALL TABLES IN SCHEMA public TO db_user;
```

## <a name="how-to-delete-a-user-role-or-change-their-password"></a>Удаление роли пользователя или изменение ее пароля

Чтобы обновить пользователя, перейдите на страницу **роли** для группы серверов Цитус и нажмите кнопку с многоточием **...** рядом с пользователем. С многоточием откроется меню для удаления пользователя или сброса пароля.

   :::image type="content" source="media/howto-hyperscale-create-users/edit-role.png" alt-text="Изменение роли":::

`citus`Роль является привилегированной и не может быть удалена.

## <a name="next-steps"></a>Дальнейшие действия

Откройте брандмауэр для IP-адресов компьютеров новых пользователей, чтобы разрешить им подключение: [Создание правил брандмауэра Цитус и управление ими с помощью портал Azure](howto-hyperscale-manage-firewall-using-portal.md).

Дополнительные сведения об управлении учетными записями пользователей баз данных см. в разделе Документация по продукту PostgreSQL:

* [Роли и привилегии базы данных](https://www.postgresql.org/docs/current/static/user-manag.html)
* [Синтаксис GRANT](https://www.postgresql.org/docs/current/static/sql-grant.html)
* [Права](https://www.postgresql.org/docs/current/static/ddl-priv.html)
