---
title: Как обеспечить проверку базы данных Azure для PostgreSQL — шифрование данных
description: Узнайте, как проверить шифрование базы данных Azure для PostgreSQL — шифрование данных с помощью управляемого ключа клиентов.
author: mksuni
ms.author: sumuth
ms.service: postgresql
ms.topic: how-to
ms.date: 04/28/2020
ms.openlocfilehash: 7ec27cc4f28151214ca97ffb5113607d6b60ee36
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "93240585"
---
# <a name="validating-data-encryption-for-azure-database-for-postgresql"></a>Проверка шифрования данных для базы данных Azure для PostgreSQL

Эта статья поможет вам проверить, что шифрование данных с помощью управляемого клиентом ключа для базы данных Azure для PostgreSQL работает правильно.

## <a name="check-the-encryption-status"></a>Проверка состояния шифрования

### <a name="from-portal"></a>На портале:

1. Если вы хотите убедиться, что ключ клиента используется для шифрования, выполните следующие действия.

    * В портал Azure перейдите к   ->  **разделу Azure Key Vault ключи** .
    * Выберите ключ, используемый для шифрования сервера.
    * Установите для ключа состояние **Enabled** значение **нет**.
  
       Через некоторое время (**~ 15 минут**) **состояние** сервера базы данных Azure для PostgreSQL должно быть **недоступно**. Любые операции ввода-вывода, выполненные с сервером, будут завершаться ошибкой, что подтверждает, что сервер действительно шифруется ключом клиентов, а ключ в настоящее время недействителен.
    
        Чтобы сделать сервер **доступным** для, можно повторно проверить ключ. 
    
    * Установите для ключа состояние в Key Vault значение **Да**.
    * На странице **Шифрование данных** на сервере нажмите кнопку повторно **проверить ключ**.
    * После успешной повторной проверки ключа **состояние** сервера изменится на **доступно** .

2. Если в портал Azure можно убедиться, что ключ шифрования установлен, данные шифруются с помощью ключа Customers, используемого в портал Azure.

  :::image type="content" source="media/concepts-data-access-and-security-data-encryption/byok-validate.png" alt-text="Общие сведения о политике доступа":::

### <a name="from-cli"></a>Из CLI

1. Мы можем использовать команду *AZ CLI* , чтобы проверить ключевые ресурсы, используемые для сервера базы данных Azure для PostgreSQL.

    ```azurecli-interactive
   az postgres server key list --name  '<server_name>'  -g '<resource_group_name>'
    ```

    Для сервера без набора шифрования данных эта команда приводит к пустому набору [].

### <a name="azure-audit-reports"></a>Отчеты об аудите Azure

[Отчеты аудита](https://servicetrust.microsoft.com) также могут быть проверены на соответствие стандартам защиты данных и нормативным требованиям.

## <a name="next-steps"></a>Дальнейшие действия

Дополнительные сведения о шифровании данных см. в статье [Шифрование данных единого сервера в базе данных Azure для PostgreSQL с помощью ключа, управляемого клиентом](concepts-data-encryption-postgresql.md).