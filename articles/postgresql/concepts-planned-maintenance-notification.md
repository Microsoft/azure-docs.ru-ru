---
title: Уведомление о плановом обслуживании — база данных Azure для PostgreSQL — один сервер
description: В этой статье описывается запланированная функция уведомлений об обслуживании в базе данных Azure для PostgreSQL — один сервер.
author: ambhatna
ms.author: ambhatna
ms.service: postgresql
ms.topic: conceptual
ms.date: 10/21/2020
ms.openlocfilehash: 8db556709f68a1184046989a15fad147542a05a7
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "98735747"
---
# <a name="planned-maintenance-notification-in-azure-database-for-postgresql---single-server"></a>Уведомление о плановом обслуживании в Базе данных Azure для PostgreSQL — один сервер

Узнайте, как подготовиться к запланированным событиям обслуживания в базе данных Azure для PostgreSQL.

## <a name="what-is-a-planned-maintenance"></a>Что такое плановое обслуживание?

Служба "база данных Azure для PostgreSQL" выполняет автоматическую установку исправлений базового оборудования, ОС и ядра СУБД. Исправление включает новые функции служб, безопасность и обновления программного обеспечения. Для ядра PostgreSQL обновление до дополнительных номеров версии выполняется автоматически в цикле выпуска исправлений. Для установки исправлений не требуются действия пользователя или настройка параметров конфигурации. Исправление проверяется с помощью безопасного развертывания.

Плановое обслуживание — это период обслуживания, при котором эти обновления служб развертываются на серверах в заданном регионе Azure. Во время планового обслуживания создается событие уведомления для клиентов о развертывании обновления службы в регионе Azure, в котором размещены серверы. Минимальная длительность между двумя планами обслуживания составляет 30 дней. Вы получаете уведомление о следующем периоде обслуживания за 72 часа до его начала.

## <a name="planned-maintenance---duration-and-customer-impact"></a>Плановое обслуживание — длительность и влияние на клиентов

Обычно ожидается, что запланированное обслуживание определенного региона Azure завершается в течение 15 часов. Это временное окно также включает время буфера для выполнения плана отката при необходимости. Серверы базы данных Azure для PostgreSQL работают в контейнерах, поэтому перезапуск сервера базы данных обычно занимает 60-120 секунд, но нет детерминированного способа выяснить, когда в этом окне 15 часов будет затронут сервер. Все запланированные события обслуживания, включая перезапуск каждого сервера, тщательно контролируются командой инженеров. Время отработки отказа сервера зависит от восстановления базы данных, что может привести к тому, что база данных будет находиться в оперативном режиме, если на сервере во время отработки отказа будет высокая активность транзакций. Во избежание более длительного перезапуска рекомендуется избегать выполнения длительных транзакций (с массовыми нагрузками) во время плановых событий обслуживания.

В целом, хотя запланированное событие обслуживания выполняется в течение 15 часов, влияние отдельного сервера обычно длится 60 секунд в зависимости от транзакционного действия на сервере. Уведомление отправляется 72 календарных часов перед запуском запланированного обслуживания, а другое — в процессе обслуживания для определенного региона.

## <a name="how-can-i-get-notified-of-planned-maintenance"></a>Как можно получить уведомления о плановом обслуживании?

Вы можете использовать функцию запланированных уведомлений обслуживания для получения оповещений о предстоящем запланированном событии обслуживания. Вы получите уведомление о предстоящем часовом обслуживании 72 в календаре до события и другого, когда обслуживание выполняется в заданном регионе.

### <a name="planned-maintenance-notification"></a>Уведомление о плановом обслуживании

> [!IMPORTANT]
> Уведомления о плановом обслуживании в настоящее время доступны в предварительной версии во всех регионах, **за исключением** западной центральной части США

**Уведомления о плановом обслуживании** позволяют получать оповещения о запланированном мероприятии на обслуживание в базе данных Azure для PostgreSQL. Эти уведомления интегрируются с плановым обслуживанием [работоспособности служб](../service-health/overview.md) и позволяют просматривать все запланированные профилактические работы для подписок в одном месте. Он также помогает масштабировать уведомление до нужных аудиторий для разных групп ресурсов, так как у вас могут быть разные контакты, ответственные за различные ресурсы. Вы получите уведомление о предстоящем часовом обслуживании 72 в календаре до события.

Мы сделаем все попытки предоставить **уведомление о плановом обслуживании** 72 часов для всех событий. Однако в случае критических обновлений или исправлений безопасности уведомления могут быть отправлены ближе к событию или пропущены.

Вы можете проверить уведомление о запланированном обслуживании на портал Azure или настроить оповещения для получения уведомлений. 

### <a name="check-planned-maintenance-notification-from-azure-portal"></a>Проверка запланированного уведомления об обслуживании с портал Azure

1. В [портал Azure](https://portal.azure.com)выберите **работоспособность службы**.
2. Выбор вкладки " **плановое обслуживание** "
3. Выберите **подписку**, * * регион и **службу** , для которых необходимо проверить уведомление о запланированном обслуживании. 
   
### <a name="to-receive-planned-maintenance-notification"></a>Получение уведомления о запланированном обслуживании

1. На [портале](https://portal.azure.com)выберите **Работоспособность службы**.
2. В разделе **Оповещения** выберите **Оповещения о работоспособности**.
3. Выберите **+ Добавить оповещение о работоспособности службы** и заполните поля.
4. Заполните обязательные поля. 
5. Выберите **Тип события**, выберите **плановое техническое обслуживание** или **выберите все** .
6. В **группе действий** определите, как вы хотите получать оповещение (получить электронное письмо, активировать приложение логики и т. д.).  
7. Убедитесь, что для параметра Включить правило при создании задано значение Да.
8. Выберите **создать правило генерации оповещений** , чтобы завершить оповещение.

Подробные инструкции по созданию **оповещений о работоспособности службы** см. в статье [Создание оповещений журнала действий для уведомлений службы](../service-health/alerts-activity-log-service-notifications-portal.md).

## <a name="can-i-cancel-or-postpone-planned-maintenance"></a>Можно ли отменить или отложить плановое обслуживание?

Обслуживание необходимо для обеспечения безопасности, стабильной и актуальной работы сервера. Событие запланированного обслуживания не может быть отменено или отложено. После отправки уведомления в указанный регион Azure изменения расписания исправлений не могут быть сделаны для отдельных серверов в этом регионе. Исправление размещается для всего региона за один раз. Служба "база данных Azure для PostgreSQL" разработана для облачного приложения, которое не требует детального контроля или настройки службы. Если вы хотите иметь возможность запланировать обслуживание серверов, мы рекомендуем использовать [Гибкие серверы](./flexible-server/overview.md).

## <a name="are-all-the-azure-regions-patched-at-the-same-time"></a>Все ли регионы Azure исправлены одновременно?

Нет, все регионы Azure будут исправлены в течение времени периодического периода развертывания. Пошаговое окно развертывания обычно растягивается от 5 PM-8 по местному времени на следующий день в заданном регионе Azure. Для геопарных регионов Azure исправления исправлены в разные дни. Для обеспечения высокой доступности и непрерывности бизнес-процессов серверов баз данных рекомендуется использовать [реплики чтения между регионами](./concepts-read-replicas.md#cross-region-replication) .

## <a name="retry-logic"></a>Логика повторных попыток

Временная ошибка, также известная как временный сбой, является ошибкой, которая устраняется автоматически. Во время обслуживания могут возникать [временные ошибки](./concepts-connectivity.md#transient-errors) . Большинство из этих событий автоматически устраняются системой менее чем за 60 секунд. Временные ошибки следует обрабатывать с помощью [логики повторных попыток](./concepts-connectivity.md#handling-transient-errors).


## <a name="next-steps"></a>Дальнейшие действия

- Если у вас есть вопросы и предложения по работе с базой данных Azure для PostgreSQL, отправьте сообщение электронной почты для команды "база данных Azure для PostgreSQL" по адресу AskAzureDBforPostgreSQL@service.microsoft.com
- См. рекомендации по созданию оповещений для метрики в статье [Как настраивать оповещения](howto-alert-on-metric.md).
- [Устранение проблем с подключением к базе данных Azure для PostgreSQL — один сервер](howto-troubleshoot-common-connection-issues.md)
- [Обрабатывайте временные ошибки и эффективно Подключайтесь к базе данных Azure для PostgreSQL-Single Server](concepts-connectivity.md)
