---
title: Перемещение регионов Azure — портал Azure — "база данных Azure для PostgreSQL" — "один сервер"
description: Переместите сервер базы данных Azure для PostgreSQL из одного региона Azure в другой с помощью реплики чтения и портал Azure.
author: lfittl-msft
ms.author: lufittl
ms.service: postgresql
ms.topic: how-to
ms.custom: subject-moving-resources
ms.date: 06/29/2020
ms.openlocfilehash: d237d5709f8d2bb47de3e89b0b7103b195376e11
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "92489750"
---
# <a name="move-an-azure-database-for-azure-database-for-postgresql---single-server-to-another-region-by-using-the-azure-portal"></a>Перемещение базы данных Azure для PostgreSQL — Single Server в другой регион с помощью портал Azure

Существует несколько сценариев перемещения существующей базы данных Azure для сервера PostgreSQL из одного региона в другой. Например, может потребоваться переместить рабочий сервер в другой регион в рамках планирования аварийного восстановления.

Для завершения перемещения в другой регион можно использовать базу данных Azure для [реплики чтения между регионами](concepts-read-replicas.md#cross-region-replication) PostgreSQL. Для этого сначала создайте реплику чтения в целевом регионе. Затем следует выполнить репликацию на сервер реплики чтения, чтобы сделать его автономным сервером, принимающим трафик как для чтения, так и для записи. 

> [!NOTE]
> В этой статье рассматривается перемещение сервера в другой регион. Если вы хотите переместить сервер в другую группу ресурсов или подписку, см. статью [Перемещение](../azure-resource-manager/management/move-resource-group-and-subscription.md) . 

## <a name="prerequisites"></a>Предварительные условия

- Реплика чтения между регионами доступна только для базы данных Azure для PostgreSQL-Single Server в общего назначения или ценовой категории, оптимизированные для памяти. Убедитесь, что исходный сервер находится в одной из этих ценовых категорий.

- Убедитесь, что исходный сервер базы данных Azure для PostgreSQL находится в регионе Azure, из которого вы хотите переместиться.

## <a name="prepare-to-move"></a>Подготовка к переносу

Чтобы подготовить исходный сервер для репликации с помощью портал Azure, выполните следующие действия. 

1. Войдите на [портал Azure](https://portal.azure.com/).
1. Выберите существующий сервер базы данных Azure для PostgreSQL, который будет использоваться в качестве исходного сервера. Откроется страница **Обзор**.
1. В меню сервера выберите **репликация**. Если для службы репликации Azure задана по крайней мере **реплика**, можно создать реплики чтения. 
1. Если для службы репликации Azure не задана хотя бы **реплика**, установите ее. Щелкните **Сохранить**.
1. Перезапустите сервер, чтобы применить изменение, выбрав **Да**.
1. После завершения операции вы получите два портал Azure уведомлений. Для обновления параметра сервера существует одно уведомление. Еще одно уведомление о перезапуске сервера следует сразу же.
1. Обновите страницу портал Azure, чтобы обновить панель инструментов репликации. Теперь можно создавать реплики чтения для этого сервера.

Чтобы создать сервер реплики для чтения между регионами в целевом регионе с помощью портал Azure, выполните следующие действия.

1. Выберите существующий сервер базы данных Azure для PostgreSQL, который будет использоваться в качестве исходного сервера.
1. В меню в разделе **Параметры** выберите **Репликация**.
1. Выберите **Добавить реплику**.
1. Введите имя сервера реплики.
1. Укажите расположение сервера реплики. Расположение по умолчанию совпадает с местоположением сервера-источника. Убедитесь, что выбрано целевое расположение, в котором должна быть развернута реплика.
1. Нажмите кнопку **ОК**, чтобы подтвердить создание реплики. Во время создания реплики данные копируются с исходного сервера в реплику. Время создания может быть в несколько минут или более, пропорционально размеру исходного сервера.

>[!NOTE]
> При создании реплики они не наследуют правила брандмауэра и конечные точки службы виртуальной сети сервера-источника. Эти правила следует настроить для каждой реплики отдельно.

## <a name="move"></a>Переместить

> [!IMPORTANT]
> Это сервер нельзя снова преобразовать в реплику.
> Прежде, чем останавливать репликацию в реплике чтения убедитесь, что реплика содержит все необходимые данные.

Чтобы отключить репликацию в реплику из портал Azure, выполните следующие действия.

1. После создания реплики выберите базу данных Azure для исходного сервера PostgreSQL. 
1. В меню в разделе **Параметры** выберите **Репликация**.
1. Выберите сервер реплики.
1. Щелкните **Остановить репликацию**.
1. Подтвердите остановку репликации, нажав кнопку **ОК**.

## <a name="clean-up-source-server"></a>Очистка исходного сервера

Возможно, потребуется удалить исходный сервер базы данных Azure для PostgreSQL. Для этого выполните следующие действия.

1. После создания реплики выберите базу данных Azure для исходного сервера PostgreSQL.
1. В окне **Обзор** выберите **Удалить**.
1. Введите имя исходного сервера для подтверждения, которое нужно удалить.
1. Выберите **Удалить**.

## <a name="next-steps"></a>Дальнейшие действия

В этом руководстве вы переместили сервер базы данных Azure для PostgreSQL из одного региона в другой с помощью портал Azure а затем очистили ненужные исходные ресурсы. 

- Узнайте больше о [репликах чтения](concepts-read-replicas.md)
- Дополнительные сведения об [управлении репликами чтения в портал Azure](howto-read-replicas-portal.md)
- Дополнительные сведения о возможностях обеспечения [непрерывности бизнес-процессов](concepts-business-continuity.md)