---
title: Обзор настройки шлюза приложений Azure
description: В этой статье описывается, как настроить компоненты шлюза приложений Azure.
services: application-gateway
author: vhorne
ms.service: application-gateway
ms.topic: conceptual
ms.date: 09/09/2020
ms.author: surmb
ms.openlocfilehash: 0012ac99600c77dce5940387e1da54f29c3f6ab7
ms.sourcegitcommit: 772eb9c6684dd4864e0ba507945a83e48b8c16f0
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "89652008"
---
# <a name="application-gateway-configuration-overview"></a>Обзор настройки шлюза приложений

Шлюз приложений Azure состоит из нескольких компонентов, которые можно настроить различными способами для различных сценариев. В этой статье показано, как настроить каждый компонент.

![Потоковая диаграмма компонентов шлюза приложений](./media/configuration-overview/configuration-overview1.png)

На этом рисунке показано приложение с тремя прослушивателями. Первые два являются прослушивателями нескольких сайтов для `http://acme.com/*` и `http://fabrikam.com/*` соответственно. Прослушивать порт 80. Третий является базовым прослушивателем, который имеет сквозное завершение безопасности транспортного уровня (TLS), ранее известное как SSL (SSL).

## <a name="infrastructure"></a>Инфраструктура

Инфраструктура шлюза приложений включает в себя виртуальную сеть, подсети, группы безопасности сети и определяемые пользователем маршруты.

Дополнительные сведения см. в статье [Конфигурация инфраструктуры шлюза приложений](configuration-infrastructure.md).



## <a name="front-end-ip-address"></a>Интерфейсный IP-адрес

Для шлюза приложений можно настроить общедоступный IP-адрес, частный IP-адрес или и то, и другое. Общедоступный IP-адрес требуется при размещении серверной части, к которой клиенты должны получить доступ через Интернет через виртуальный IP-адрес (VIP) с выходом в Интернет.

Дополнительные сведения см. в разделе [конфигурация интерфейсного IP-адреса шлюза приложений](configuration-front-end-ip.md).

## <a name="listeners"></a>Прослушиватели

Прослушиватель — это логическая сущность, которая проверяет входящие запросы на подключение с помощью порта, протокола, узла и IP-адреса. При настройке прослушивателя необходимо ввести значения, соответствующие соответствующим значениям в входящем запросе на шлюзе.

Дополнительные сведения см. в разделе [Конфигурация прослушивателя шлюза приложений](configuration-listeners.md).

## <a name="request-routing-rules"></a>Правила маршрутизации запросов

При создании шлюза приложений с помощью портал Azure создается правило по умолчанию (*Rule1*). Это правило связывает прослушиватель по умолчанию (*appGatewayHttpListener*) с внутренним пулом по умолчанию (*appGatewayBackendPool*) и параметрами HTTP серверной части по умолчанию (*appGatewayBackendHttpSettings*). После создания шлюза можно изменить параметры правила по умолчанию или создать новые правила.

Дополнительные сведения см. в разделе [правила маршрутизации запросов шлюза приложений](configuration-request-routing-rules.md).

## <a name="http-settings"></a>Параметры HTTP

Шлюз приложений направляет трафик на серверы внутренних серверов с помощью указанной здесь конфигурации. После создания параметра HTTP необходимо связать его с одним или несколькими правилами маршрутизации запросов.

Дополнительные сведения см. в статье Настройка [параметров HTTP для шлюза приложений](configuration-http-settings.md).

## <a name="back-end-pool"></a>Внутренний пул

Серверный пул можно указать на четыре типа серверных членов: определенную виртуальную машину, масштабируемый набор виртуальных машин, IP-адрес или полное доменное имя или службу приложений. 

После создания пула серверной части необходимо связать его с одним или несколькими правилами маршрутизации запросов. Кроме того, необходимо настроить зонды работоспособности для каждого пула серверной части в шлюзе приложений. При выполнении условия правила маршрутизации запросов шлюз приложений перенаправляет трафик на работоспособные серверы (как определено зондами работоспособности) в соответствующем внутреннем пуле.

## <a name="health-probes"></a>Пробы работоспособности

Шлюз приложений по умолчанию отслеживает работоспособность всех ресурсов в его серверной части. Но настоятельно рекомендуется создать пользовательскую проверку для каждого параметра HTTP серверной части, чтобы получить больший контроль над мониторингом работоспособности. Сведения о настройке пользовательской пробы см. в разделе [Настраиваемые параметры проверки работоспособности](application-gateway-probe-overview.md#custom-health-probe-settings).

> [!NOTE]
> После создания пользовательской проверки работоспособности необходимо связать ее с параметром HTTP серверной части. Пользовательская проверка не будет отслеживать работоспособность серверного пула, если соответствующий параметр HTTP явно не связан с прослушивателем с помощью правила.

## <a name="next-steps"></a>Дальнейшие действия

Теперь, когда вы знакомы с компонентами шлюза приложений, вы можете:

- [Создание шлюза приложений в портал Azure](quick-create-portal.md)
- [Создание шлюза приложений с помощью PowerShell](quick-create-powershell.md)
- [Создание шлюза приложений с помощью Azure CLI](quick-create-cli.md)
