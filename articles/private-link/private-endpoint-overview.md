---
title: Что такое частная конечная точка Azure?
description: Получите подробные сведения о частной конечной точке Azure
services: private-link
author: malopMSFT
ms.service: private-link
ms.topic: conceptual
ms.date: 06/18/2020
ms.author: allensu
ms.openlocfilehash: 79d21549e7234e4ee342776466f8d3d8ced5f08c
ms.sourcegitcommit: 15d27661c1c03bf84d3974a675c7bd11a0e086e6
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/09/2021
ms.locfileid: "102508815"
---
# <a name="what-is-azure-private-endpoint"></a>Что такое частная конечная точка Azure?

Частная конечная точка Azure — это сетевой интерфейс, который защищенно и надежно подключается к службе через Приватный канал Azure. Частная конечная точка использует частный IP-адрес из виртуальной сети, по сути перемещая службу в виртуальную сеть. Эта служба может быть службой Azure, например службой хранилища Azure, Azure Cosmos DB, SQL и т. д., или вашей [службой Приватного канала](private-link-service-overview.md).
  
## <a name="private-endpoint-properties"></a>Свойства частной конечной точки 
 Частная конечная точка имеет следующие свойства. 


|Свойство  |Описание |
|---------|---------|
|Имя    |    Уникальное имя в группе ресурсов.      |
|Подсеть    |  Подсеть для развертывания и выделения частных IP-адресов из виртуальной сети. Требования к подсети см. в разделе "Ограничения" в этой статье.         |
|Ресурс Приватного канала    |   Ресурс Приватного канала для подключения с помощью идентификатора ресурса или псевдонима из списка доступных типов. Для всего трафика, отправляемого на этот ресурс, будет создан уникальный идентификатор сети.       |
|Целевой подресурс   |      Подресурс для подключения. Каждый тип ресурса Приватного канала имеет различные параметры в зависимости от предпочтений.    |
|Метод утверждения соединения    |  Автоматический или ручной. В соответствии с разрешениями управления доступом на основе ролей (Azure RBAC) Ваша частная конечная точка может быть утверждена автоматически. При попытке подключения к ресурсу частной связи без использования Azure RBAC используйте ручной метод, чтобы разрешить владельцу ресурса утверждать подключение.        |
|Сообщение запроса     |  Можно указать сообщение о том, что запрошенные подключения необходимо утверждать вручную. Это сообщение можно использовать для идентификации конкретного запроса.        |
|Состояние подключения   |   Свойство только для чтения, которое указывает, активна ли частная конечная точка. Для отправки трафика можно использовать только частные конечные точки в состоянии "Утверждено". Доступные дополнительные состояния <br>-**Утверждено**. Подключение утверждено автоматически или вручную и готово к использованию.</br><br>-**Ожидание**. Подключение создается вручную и ожидает утверждения от владельца ресурса Приватного канала.</br><br>-**Отклонено**. Подключение отклонил владелец ресурса Приватного канала.</br><br>-**Отключено**. Подключение удалил владелец ресурса Приватного канала. Частная конечная точка станет информативной и подлежит удалению для очистки. </br>|

Ниже приведены некоторые ключевые сведения о частных конечных точках. 
- Частная конечная точка обеспечивает подключение между потребителями из одной и той же виртуальной сети, одноранговых виртуальных сетей в регионе или мире и локальными потребителями с помощью [виртуальных частных сетей](https://azure.microsoft.com/services/vpn-gateway/) или [Express Route](https://azure.microsoft.com/services/expressroute/) и служб на основе Приватного канала.
 
- Только клиенты, подключающиеся к частной конечной точке, могут инициировать сетевые подключения. У поставщиков служб нет конфигурации маршрутизации для инициирования подключений к потребителям служб. Соединения можно устанавливать только в одном направлении.

- При создании частной конечной точки для жизненного цикла ресурса также создается сетевой интерфейс только для чтения. Интерфейсу назначаются динамические частные IP-адреса из подсети, которая сопоставляется с ресурсом Приватного канала. Значение частного IP-адреса остается неизменным для всего жизненного цикла частной конечной точки.
 
- Частную конечную точку необходимо развернуть в том же регионе, где находится виртуальная сеть. 
 
- Ресурс Приватного канала можно развернуть в регионе, отличном от региона виртуальной сети и частной конечной точки.
 
- Можно создать несколько частных конечных точек с помощью одного и того же ресурса Приватного канала. Для одной сети, использующей общую конфигурацию DNS-сервера, рекомендуется использовать одну частную конечную точку для ресурса Приватного канала, чтобы избежать дублирования записей и конфликтов при разрешении DNS. 
 
- В одной виртуальной сети можно создать несколько частных конечных точек для одних и тех же или разных подсетей. Количество частных конечных точек, которые можно создать в рамках подписки, ограничено. Дополнительные сведения см. в разделе  [Ограничения сети](../azure-resource-manager/management/azure-subscription-service-limits.md#networking-limits).

- Подписка из ресурса частной связи также должна быть зарегистрирована в поставщике ресурсов micosoft. Network. Дополнительные сведения см. в статье [поставщики ресурсов Azure](../azure-resource-manager/management/resource-providers-and-types.md).

 
## <a name="private-link-resource"></a>Ресурс Приватного канала 
Ресурс Приватного канала является целевым объектом назначения заданной частной конечной точки. Ниже приведен список доступных типов ресурсов Приватного канала. 
 
|Имя ресурса Приватного канала  |Тип ресурса   |Подресурсы  |
|---------|---------|---------|
|**Служба "Приватный канал"** (ваша собственная служба)   |  Microsoft.Network/privateLinkServices       | empty |
|**Служба автоматизации Azure** |  Microsoft.Automation/automationAccounts | Веб-перехватчик, Дскандхибридворкер |
|**База данных SQL Azure** | Microsoft.Sql/servers    |  SQL Server (sqlServer)        |
|**Azure Synapse Analytics** | Microsoft.Sql/servers    |  SQL Server (sqlServer)        | 
|**Хранилище Azure**  | Microsoft.Storage/storageAccounts    |  Большой двоичный объект (большой двоичный объект, вторичный_большой_двоичный_объект)<BR> Таблица (таблица, вторичная_таблица)<BR> Очередь (очередь, вторичная_очередь)<BR> Файл (файл, вторичный_файл)<BR> Сеть (сеть, вторичная_сеть)        |
|**Azure Data Lake Storage 2-го поколения**  | Microsoft.Storage/storageAccounts    |  Большой двоичный объект (большой двоичный объект, вторичный_большой_двоичный_объект)<BR> Файловая система Data Lake поколения 2 (dfs, вторичная_dfs)       |
|**Azure Cosmos DB** | Microsoft.AzureCosmosDB/databaseAccounts    | SQL, MongoDB, Cassandra, Gremlin, Table|
|**База данных Azure для PostgreSQL — отдельный сервер** | Microsoft.DBforPostgreSQL/servers    | postgresqlServer |
|**База данных Azure для MySQL** | Microsoft.DBforMySQL/servers    | mysqlServer |
|**База данных Azure для MariaDB** | Microsoft.DBforMariaDB/servers    | mariadbServer |
|**Центр Интернета вещей Azure** | Microsoft.Devices/IotHubs    | Центр Интернета вещей |
|**Хранилище ключей Azure** | Microsoft.KeyVault/vaults    | Хранилище |
|**Служба Azure Kubernetes — API Kubernetes** | Microsoft.ContainerService/managedClusters    | управление |
|**Поиск Azure;** | Microsoft.Search/searchService| searchService|  
|**Реестр контейнеров Azure** | Microsoft.ContainerRegistry/registries    | реестр |
|**Конфигурация приложений Azure** | Microsoft.Appconfiguration/configurationStores    | configurationStores |
|**Azure Backup** | Microsoft.RecoveryServices/vaults    | Хранилище |
|**Концентратор событий Azure** | Microsoft.EventHub/namespaces    | пространство имен |
|**служебной шине Azure** | Microsoft.ServiceBus/namespaces | пространство имен |
|**Azure Relay** | Microsoft.Relay/namespaces | пространство имен |
|**Сетка событий Azure** | Microsoft.EventGrid/topics    | Раздел |
|**Сетка событий Azure** | Microsoft.EventGrid/domains    | домен |
|**Служба приложений Azure** | Microsoft.Web/sites    | sites |
|**Машинное обучение Azure** | Microsoft.MachineLearningServices/workspaces    | амлворкспаце |
|**SignalR** | Microsoft.SignalRService/SignalR    | signalR |
|**Azure Monitor** | Microsoft. Insights/Привателинкскопес    | азуремонитор |
|**Cognitive Services** | (Microsoft. CognitiveServices/Accounts    | account |
|**Синхронизация файлов Azure** | Microsoft. StorageSync/Сторажесинксервицес    | AFS |
    
  

  
 
## <a name="network-security-of-private-endpoints"></a>Сетевая безопасность частных конечных точек 
При использовании частных конечных точек для служб Azure трафик защищен с помощью определенного ресурса Приватного канала. Платформа выполняет контроль доступа для проверки сетевых подключений, которые устанавливают связь только с указанным ресурсом Приватного канала. Для доступа к другим ресурсам в этой же службе Azure требуются дополнительные частные конечные точки. 
 
Вы можете полностью заблокировать доступ к общедоступным конечным точкам для рабочих нагрузок, чтобы они подключались к поддерживаемой службе Azure. Этот элемент управления предоставляет дополнительный уровень безопасности сети для ресурсов, обеспечивая встроенную защиту от утечки данных, которая предотвращает доступ к другим ресурсам, размещенным в той же службе Azure. 
 
## <a name="access-to-a-private-link-resource-using-approval-workflow"></a>Доступ к ресурсу Приватного канала с помощью рабочего процесса утверждения 
Вы можете подключиться к ресурсу Приватного канала с помощью следующих методов утверждения подключения.
- **Автоматически** получить утверждение можно, если вы владеете конкретным ресурсом Приватного канала или имеете разрешение на доступ к нему. Требуемое разрешение основано на типе ресурса частной ссылки в следующем формате: Microsoft. \<Provider> /<resource_type>/Приватиндпоинтконнектионаппровал/Актион
- **Вручную** можно отправить запрос, если у вас нет необходимых разрешений и вы хотите запросить доступ. Инициируется рабочий процесс утверждения. Частная конечная точка и последующее подключение к частной конечной точке создаются в состоянии "Ожидание". Владелец ресурса частной ссылки должен утвердить это подключение. После утверждения частной конечной точке разрешается передавать трафик обычным образом, как показано на следующей схеме рабочего процесса утверждения.  

![Рабочий процесс утверждения](media/private-endpoint-overview/private-link-paas-workflow.png)
 
Владелец ресурса Приватного канала может выполнять следующие действия в отношении подключения к частной конечной точке. 
- Просматривать сведения обо всех подключениях к частной конечной точке. 
- Утверждать подключение к частной конечной точке. Частная конечная точка сможет отправлять трафик в ресурс Приватного канала. 
- Отклонять подключение к частной конечной точке. Соответствующая частная конечная точка будет обновлена, чтобы отражать это состояние.
- Удалять подключение к частной конечной точке с любым состоянием. Состояние соответствующей частной конечной точки будет обновлено на "Отключено", чтобы отразить действие. Владелец частной конечной точки сможет удалить ресурс только на этом этапе. 
 
> [!NOTE]
> Только частная конечная точка в утвержденном состоянии может передавать трафик на заданный ресурс Приватного канала. 

### <a name="connecting-using-alias"></a>Подключение с помощью псевдонима
Псевдоним — это уникальный моникер, который создается, когда владелец службы создает службу Приватного канала за пределами стандартной подсистемы балансировки нагрузки. Владелец службы может использовать этот псевдоним совместно со своими потребителями в автономном режиме. Потребители могут запрашивать подключение к службе Приватного канала с помощью URI ресурса или псевдонима. Если вы хотите подключиться с помощью псевдонима, необходимо создать частную конечную точку с помощью ручного метода утверждения подключения. Чтобы использовать этот метод, задайте для параметра ручного запроса значение true во время создания частной конечной точки. Дополнительные сведения см. в разделах о [New-AzPrivateEndpoint](/powershell/module/az.network/new-azprivateendpoint) и [az network private-endpoint create](/cli/azure/network/private-endpoint#az-network-private-endpoint-create). 

## <a name="dns-configuration"></a>Настройка DNS 
При подключении к ресурсу Приватного канала с использованием полного доменного имени (FQDN) в строке подключения важно правильно настроить параметры DNS, чтобы разрешить доступ к выделенному частному IP-адресу. Возможно, существующие службы Azure уже используют конфигурацию DNS для подключения через общедоступную конечную точку. Их необходимо переопределить для подключения с помощью частной конечной точки. 
 
Сетевой интерфейс, связанный с частной конечной точкой, содержит полный набор сведений, необходимых для настройки DNS, включая полное доменное имя и частные IP-адреса, выделенные для конкретного ресурса Приватного канала. 

Подробные сведения о лучших методиках и рекомендациях по настройке DNS для частных конечных точек см. в статье [Конфигурация DNS для частной конечной точки](private-endpoint-dns.md).



 
## <a name="limitations"></a>Ограничения
 
В следующей таблице приводится список известных ограничений при использовании частных конечных точек. 


|Ограничение |Описание |Меры по снижению риска  |
|---------|---------|---------|
|Правила группы безопасности сети (NSG) и определяемые пользователем маршруты не применяются к частной конечной точке    |NSG не поддерживается для частных конечных точек. Несмотря на то что подсети, содержащие частную конечную точку, могут иметь связанные NSG, правила не будут действовать для трафика, обрабатываемого частной конечной точкой. Для развертывания частных конечных точек в подсети необходимо [отключить принудительное применение политик сети](disable-private-endpoint-network-policy.md). NSG по-прежнему действуют по отношению к другим рабочим нагрузкам, размещенным в той же подсети. Маршруты в любой подсети клиента будут использовать префикс /32, а изменение поведения маршрутизации по умолчанию требует аналогичного определяемого пользователем маршрута  | Управление трафиком с помощью правил NSG для исходящего трафика на клиентах источника. Разверните отдельные маршруты с префиксом /32 для переопределения маршрутов частных конечных точек. Журналы потоков NSG и данные мониторинга для исходящих подключений по-прежнему поддерживаются и могут использоваться.        |


## <a name="next-steps"></a>Дальнейшие действия
- [Создание частной конечной точки для базы данных SQL с помощью портала](create-private-endpoint-portal.md)
- [Создание частной конечной точки для базы данных SQL с помощью PowerShell](create-private-endpoint-powershell.md)
- [Создание частной конечной точки для базы данных SQL с помощью интерфейса командной строки](create-private-endpoint-cli.md)
- [Создание частной конечной точки для учетной записи хранения с помощью портала](./tutorial-private-endpoint-storage-portal.md)
- [Создание частной конечной точки для учетной записи Azure Cosmos с помощью портала](../cosmos-db/how-to-configure-private-endpoints.md)
- [Create your own Private Link service using Azure PowerShel](create-private-link-service-powershell.md) (Создание собственного Приватного канала с помощью Azure PowerShell)
- [Создание собственной частной ссылки для базы данных Azure для PostgreSQL-Single Server с помощью портала](../postgresql/howto-configure-privatelink-portal.md)
- [Создание Приватного канала для службы "База данных Azure для PostgreSQL — отдельный сервер" с помощью CLI](../postgresql/howto-configure-privatelink-cli.md)
- [Создание собственной частной ссылки для базы данных Azure для MySQL с помощью портала](../mysql/howto-configure-privatelink-portal.md)
- [Создание Приватного канала для службы "База данных Azure для MySQL" с помощью CLI](../mysql/howto-configure-privatelink-cli.md)
- [Создание собственной частной ссылки для базы данных Azure для MariaDB с помощью портала](../mariadb/howto-configure-privatelink-portal.md)
- [Создание Приватного канала для службы "База данных Azure для MariaDB" с помощью CLI](../mariadb/howto-configure-privatelink-cli.md)
- [Создание собственной частной ссылки для Azure Key Vault с помощью портала и интерфейса командной строки](../key-vault/general/private-link-service.md)
