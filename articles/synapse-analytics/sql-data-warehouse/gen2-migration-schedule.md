---
title: Перенос выделенного пула SQL (ранее — хранилища данных SQL) в Gen2
description: Инструкции по переносу существующего выделенного пула SQL (прежнее название — SQL DW) в Gen2 и расписание миграции по регионам.
services: synapse-analytics
author: mlee3gsd
ms.author: anjangsh
ms.reviewer: jrasnick
manager: craigg
ms.assetid: 04b05dea-c066-44a0-9751-0774eb84c689
ms.service: synapse-analytics
ms.topic: article
ms.subservice: sql-dw
ms.date: 01/21/2020
ms.custom: seo-lt-2019, azure-synapse
ms.openlocfilehash: 0ce07ff3ca5fbcc9776792129d3bfb4ef54efe7d
ms.sourcegitcommit: 910a1a38711966cb171050db245fc3b22abc8c5f
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 03/19/2021
ms.locfileid: "98120127"
---
# <a name="upgrade-your-dedicated-sql-pool-formerly-sql-dw-to-gen2"></a>Обновление выделенного пула SQL (ранее — хранилища данных SQL) на Gen2

Корпорация Майкрософт помогает снизить стоимость начального уровня при выполнении выделенного пула SQL (ранее — хранилища данных SQL).  Более низкие уровни вычислений, способные обрабатывать ресурсоемкие запросы, теперь доступны для выделенного пула SQL (ранее — хранилища данных SQL). Ознакомьтесь с полным объявлением [о более низких уровнях вычислений для Gen2](https://azure.microsoft.com/blog/azure-sql-data-warehouse-gen2-now-supports-lower-compute-tiers/). Новое предложение доступно в регионах, указанных в таблице ниже. Для поддерживаемых регионов существующий выделенный пул SQL Gen1 (ранее — хранилище данных SQL) можно обновить до Gen2 с помощью любой из следующих средств:

- **Процесс автоматического обновления:** Автоматическое обновление не запускается сразу после того, как служба будет доступна в регионе.  Если автоматическое обновление запускается в определенном регионе, то при выбранном расписании обслуживания будет выполнено отдельное обновление хранилища данных.
- [**Самостоятельное обновление до Gen2:**](#self-upgrade-to-gen2) Вы можете контролировать время обновления, выполняя самообновление до Gen2. Если регион еще не поддерживается, можно выполнить восстановление из точки восстановления непосредственно в экземпляр Gen2 в поддерживаемом регионе.

## <a name="automated-schedule-and-region-availability-table"></a>Таблица доступности по регионам и автоматического расписания

В следующей таблице приведены данные по регионам о том, когда будет доступен низкий уровень вычислений 2-го поколения и когда начнется автоматическое обновление. Даты могут меняться. Следите за обновлениями, чтобы узнать, когда ваш регион станет доступен.

\* указывает, что определенное расписание для региона в настоящее время недоступно.

| **Регион** | **Низкий уровень 2-ого поколения доступен** | **Начало автоматических обновлений** |
|:--- |:--- |:--- |
| Восточная Канада |1 июня 2020 г. |1 июля 2020 г. |
| Восточный Китай |\* |\* |
| Северный Китай |\* |\* |
| Центральная Германия |\* |\* |
| Центрально-Западная Германия |Доступно |1 мая 2020 г. |
| Западная Индия |Доступно |1 мая 2020 г.  |

## <a name="automatic-upgrade-process"></a>Процесс автоматического обновления

На основе приведенной выше диаграммы доступности мы будем планировать автоматические обновления для экземпляров Gen1. Чтобы избежать непредвиденных перерывов в доступности выделенного пула SQL (прежнее название — хранилище данных SQL), автоматическое обновление будет запланировано в расписании обслуживания. Возможность создания нового экземпляра Gen1 будет отключена в регионах, для которых выполняется автоматическое обновление до Gen2. После завершения автоматического обновления Gen1 будет считаться устаревшим. Дополнительные сведения о расписаниях см. в статье [Просмотр расписания обслуживания](maintenance-scheduling.md#view-a-maintenance-schedule).

Процесс обновления приведет к кратковременному сбросу подключения (приблизительно 5 минут), так как перезапускается выделенный пул SQL (ранее — хранилище данных SQL).  После перезапуска выделенного пула SQL (ранее — хранилища данных SQL) он будет полностью доступен для использования. Однако при обновлении файлов данных в фоновом режиме может возникнуть снижение производительности. Общее время замедления зависит от размера файлов данных.

Вы можете ускорить процесс обновления файлов данных, выполнив команду [Alter Index rebuild](sql-data-warehouse-tables-index.md) во всех основных таблицах columnstore. После перезапуска этих таблиц будет использоваться более высокий целевой уровень обслуживания и класс ресурсов.

> [!NOTE]
> Операция "Alter Index rebuild" — это автономная операция. Таблицы будут недоступны до завершения повторной сборки.

## <a name="self-upgrade-to-gen2"></a>Самостоятельное обновление до 2-го поколения

Вы можете самостоятельно выполнить обновление, выполнив эти действия в существующем выделенном Gen1 пуле SQL (ранее — в хранилище данных SQL). Если вы решили самостоятельное обновление, необходимо выполнить его до начала процесса автоматического обновления в вашем регионе. Это гарантирует, что вы не рискуете автоматическое обновление, вызывающее конфликт.

Есть два варианта выполнения самостоятельного обновления.  Вы можете обновить текущий выделенный пул SQL (ранее — хранилище данных SQL) на месте или восстановить выделенный пул SQL Gen1 (ранее — хранилище данных SQL) в экземпляре Gen2.

- [Обновить на месте](upgrade-to-latest-generation.md) — этот параметр обновит существующий выделенный пул SQL Gen1 (ранее — хранилище данных SQL) до Gen2. Процесс обновления приведет к кратковременному сбросу подключения (приблизительно 5 минут), так как перезапускается выделенный пул SQL (ранее — хранилище данных SQL).  После перезапуска он будет полностью доступен для использования. Если во время обновления возникают проблемы, отправьте запрос в [службу поддержки](sql-data-warehouse-get-started-create-support-ticket.md) и в качестве возможной причины щелкните "Gen2 Upgrade".
- [Обновление с точки восстановления](sql-data-warehouse-restore-points.md) . Создайте пользовательскую точку восстановления в текущем выделенном Gen1 пуле SQL (ранее — в хранилище данных SQL), а затем выполните восстановление непосредственно в экземпляре Gen2. Существующий выделенный пул SQL Gen1 (ранее — хранилище данных SQL) останется на месте. После завершения восстановления выделенный пул SQL Gen2 (ранее — хранилище данных SQL) будет полностью доступен для использования.  После выполнения всех процессов тестирования и проверки восстановленного экземпляра 2-го поколения первоначальный экземпляр 1-го поколения будет удален.

  - Шаг 1. на портал Azure [Создайте определенную пользователем точку восстановления](sql-data-warehouse-restore-active-paused-dw.md).
  - Шаг 2. при восстановлении из определенной пользователем точки восстановления задайте для параметра "уровень производительности" предпочитаемый уровень Gen2.

Во время выполнения процесса обновления файлов данных в фоновом режиме вы можете столкнуться с временным снижением производительности. Общее время замедления зависит от размера файлов данных.

Для ускорения фонового процесса перемещения данных вы можете сразу инициировать перемещение данных, выполнив инструкцию [Alter Index rebuild](sql-data-warehouse-tables-index.md) для всех основных таблиц columnstore, которые вы сможете запрашивать при наличии более высокого целевого уровня обслуживания и оптимального класса ресурсов.

> [!NOTE]
> Операция "Alter Index rebuild" — это автономная операция. Таблицы будут недоступны до завершения повторной сборки.

Если возникли проблемы с выделенным пулом SQL (ранее — ХРАНИЛИЩЕм данных SQL), создайте [запрос в службу поддержки](sql-data-warehouse-get-started-create-support-ticket.md) и в качестве возможной причины щелкните "Gen2 Upgrade".

Дополнительные сведения см. в статье [Оптимизация производительности путем обновления хранилища данных SQL](upgrade-to-latest-generation.md).

## <a name="migration-frequently-asked-questions"></a>Часто задаваемые вопросы о переносе

**Вопрос. выполняет ли Gen2 стоимость так же, как Gen1?**

- A. Да.

**Вопрос. как обновления будут влиять на мои сценарии автоматизации?**

- Ответ. любой скрипт автоматизации, ссылающийся на цель уровня обслуживания, должен быть изменен в соответствии с эквивалентом Gen2.  Дополнительные сведения см. [здесь](upgrade-to-latest-generation.md#upgrade-in-a-supported-region-using-the-azure-portal).

**Вопрос. как долго выполняется самостоятельное обновление?**

- Ответ. Вы можете обновить точку восстановления или обновить ее на месте.

  - Обновление на месте приведет к тому, что выделенный пул SQL (ранее — хранилище данных SQL) будет немедленно приостановлен и возобновлен.  Фоновый процесс продолжится, пока выделенный пул SQL (ранее — хранилище данных SQL) находится в сети.  
  - Обновление через точку восстановления занимает больше времени, так как обновление будет проходить через полный процесс восстановления.

**Вопрос. как долго будет выполняться автоматическое обновление?**

- О. фактическое время простоя для обновления — это время, необходимое для приостановки и возобновления работы службы (от 5 до 10 минут). После краткого простоя фоновый процесс выполнит перенос хранилища. Длительность фонового процесса зависит от размера выделенного пула SQL (ранее — хранилища данных SQL).

**Вопрос. когда будет происходить автоматическое обновление?**

- Ответ. в расписании обслуживания. Использование выбранного расписания обслуживания минимизирует время простоя вашего бизнеса.

**Вопрос. что делать, если процесс фонового обновления кажется застрявшим?**

- Ответ. запускает повторное индексирование таблиц columnstore. Обратите внимание, что во время повторного индексирования таблица будет находиться в автономном режиме.

**Вопрос. что если у Gen2 нет цели уровня обслуживания, имеющейся на Gen1?**

- Ответ. Если вы используете DW600 или DW1200 в Gen1, рекомендуется использовать DW500c или DW1000c соответственно, так как Gen2 предоставляет больше памяти, ресурсов и более высокую производительность, чем Gen1.

**Вопрос. можно ли отключить геоархивацию?**

- Ответ. Нет. Геоархивация — это корпоративная функция для сохранения выделенного пула SQL (прежнее хранилище данных SQL) в случае, когда регион становится недоступным. Если у вас возникнут дополнительные вопросы, откройте [запрос в службу поддержки](sql-data-warehouse-get-started-create-support-ticket.md).

**Вопрос. Существует ли разница в синтаксисе T-SQL между Gen1 и Gen2?**

- Ответ. в синтаксисе языка T-SQL нет изменений из Gen1 в Gen2.

**Вопрос. поддерживает ли Gen2 периоды обслуживания?**

- A. Да.

**Вопрос. можно ли создать новый экземпляр Gen1 после обновления региона?**

- Ответ. Нет. После обновления региона создание новых экземпляров 1-го поколения будет отключено.

## <a name="next-steps"></a>Дальнейшие действия

- [Действия по обновлению](upgrade-to-latest-generation.md)
- [Периоды обслуживания](maintenance-scheduling.md)
- [Мониторинг работоспособности ресурсов](../../service-health/resource-health-overview.md?toc=/azure/synapse-analytics/sql-data-warehouse/toc.json&bc=/azure/synapse-analytics/sql-data-warehouse/breadcrumb/toc.json)
- [что нужно знать перед началом миграции](upgrade-to-latest-generation.md#before-you-begin)
- [Обновление на месте или обновление из точки восстановления](upgrade-to-latest-generation.md)
- [Создание определенной пользователем точки восстановления](sql-data-warehouse-restore-points.md)
- [Сведения о восстановлении до поколения 2](sql-data-warehouse-restore-active-paused-dw.md)
- [Открытие запроса на поддержку Azure синапсе Analytics](./sql-data-warehouse-get-started-create-support-ticket.md)