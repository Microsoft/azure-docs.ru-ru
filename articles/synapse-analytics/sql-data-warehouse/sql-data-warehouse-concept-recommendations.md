---
title: Рекомендации помощника по Azure для выделенного пула SQL
description: Познакомьтесь с рекомендациями Synapse SQL и тем, как они создаются.
services: synapse-analytics
author: kevinvngo
manager: craigg-msft
ms.service: synapse-analytics
ms.topic: conceptual
ms.subservice: sql-dw
ms.date: 06/26/2020
ms.author: kevin
ms.reviewer: igorstan
ms.custom: azure-synapse
ms.openlocfilehash: 6510a7143e78c054130a1f1dddba78342a6785fe
ms.sourcegitcommit: b39cf769ce8e2eb7ea74cfdac6759a17a048b331
ms.translationtype: MT
ms.contentlocale: ru-RU
ms.lasthandoff: 01/22/2021
ms.locfileid: "98685282"
---
# <a name="azure-advisor-recommendations-for-dedicated-sql-pool-in-azure-synapse-analytics"></a>Рекомендации помощника по Azure для выделенного пула SQL в Azure синапсе Analytics

В этой статье описываются специальные рекомендации пула SQL, доступные в помощнике по Azure.  

Выделенный пул SQL предоставляет рекомендации по обеспечению согласованности рабочей нагрузки хранилища данных для повышения производительности. Рекомендации тесно интегрированы с [Помощником по Azure](../../advisor/advisor-performance-recommendations.md?toc=/azure/synapse-analytics/sql-data-warehouse/toc.json&bc=/azure/synapse-analytics/sql-data-warehouse/breadcrumb/toc.json), что позволяет получать рекомендации непосредственно на [портале Azure](https://aka.ms/Azureadvisor). Выделенный пул SQL собирает данные телеметрии и поверхностей для активной рабочей нагрузки в течение ежедневного ритма. Ниже описаны поддерживаемые сценарии рекомендаций, а также инструкции по применению рекомендуемых действий.

[Проверить свои рекомендации](https://aka.ms/Azureadvisor) можно уже сегодня! 

## <a name="data-skew"></a>Неравномерное распределение данных

Неравномерное распределение данных может привести к дополнительному перемещению данных или к возникновению узких мест в ресурсах при выполнении рабочей нагрузки. В следующем документе описывается, как выявить неравномерное распределение данных и избежать его, выбрав оптимальный принцип распределения.

- [Обнаружение и устранение неравномерного распределения](sql-data-warehouse-tables-distribute.md#how-to-tell-if-your-distribution-column-is-a-good-choice)

## <a name="no-or-outdated-statistics"></a>Отсутствующие или устаревшие статистические данные

Неоптимальная статистика может существенно ухудшать производительность запросов из-за того, что оптимизатор запросов SQL создает неоптимальные планы запросов. В следующем документе приводятся рекомендации по созданию и обновлению статистики:

- [Создание и обновление статистики для таблицы](sql-data-warehouse-tables-statistics.md)

Чтобы просмотреть список таблиц, которых касаются эти рекомендации, выполните [скрипт T-SQL](https://github.com/Microsoft/sql-data-warehouse-samples/blob/master/samples/sqlops/MonitoringScripts/ImpactedTables). Для создания этих рекомендаций Помощник непрерывно выполняет один и тот же скрипт T-SQL.

## <a name="replicate-tables"></a>Таблицы репликации

Для рекомендаций реплицированной таблицы Помощник определяет варианты таблиц на основе следующих физических характеристик.

- Размер реплицированной таблицы
- Number of columns
- Тип распределения таблиц
- Количество разделов

Помощник постоянно использует методы эвристики, основанной на рабочих нагрузках (например, периодичность доступа к таблицам, среднее количество возвращенных записей или пороговые значения размеров хранилищ данных и активности в них), чтобы убедиться в высоком качестве генерируемых рекомендаций.

В разделе ниже описаны методы основанной на рабочих нагрузках эвристики, которые вы можете найти для каждой рекомендации реплицированных таблиц на портале Azure.

- проверка avg — среднее количество возвращенных записей в процентах для каждой таблицы за последние семь дней;
- частое чтение без обновления— указывает, что не было обновления таблицы за последние семь дней, хотя и происходило действие доступа;
- соотношение чтения или обновления — соотношение частотности доступа к таблице к ее обновлению за последние семь дней;
- действие — измеряет использование на основе действия доступа. Это действие сравнивает действия доступа к таблице со средним значением действия доступа к таблице базе данных хранилища данных за последние семь дней.

В настоящее время Помощник будет отображать только четыре варианта реплицированной таблицы за раз с кластеризованными индексами columnstore, обозначающими наивысшую активность.

> [!IMPORTANT]
> Рекомендации реплицированной таблицы не достаточно, и она не учитывает операции перемещения данных. Сейчас мы работаем над добавлением этого метода эвристики, но пока что вы должны проверить рабочую нагрузку после применения рекомендации. Чтобы узнать больше о реплицированных таблицах, см. статью [Руководство по проектированию для использования реплицированных таблиц в хранилище данных SQL Azure](design-guidance-for-replicated-tables.md#what-is-a-replicated-table).


## <a name="adaptive-gen2-cache-utilization"></a>Адаптивное (Gen2) использование кэша
При наличии большого рабочего набора можно столкнуться с низким процентом попаданий в кэш и высокой степенью использования кэша. В этом сценарии необходимо выполнить масштабирование, чтобы увеличить емкость кэша и повторно запустить рабочую нагрузку. Дополнительные сведения см. в следующей [документации](./sql-data-warehouse-how-to-monitor-cache.md). 

## <a name="tempdb-contention"></a>Состязание за tempdb

Производительность запросов может снизиться при интенсивном состязании за tempdb.  Состязание за tempdb может происходить через определяемые пользователем временные таблицы или при большом объеме перемещений данных. В этом сценарии можно выполнить масштабирование для выделения дополнительных ресурсов tempdb и [настроить классы ресурсов и управление рабочей нагрузкой](./sql-data-warehouse-workload-management.md), чтобы предоставить больше памяти для запросов. 

## <a name="data-loading-misconfiguration"></a>Неудачная настройка загрузки данных

Необходимо всегда загружать данные из учетной записи хранения в том же регионе, что и выделенный пул SQL, чтобы максимально сокращать задержку. Используйте [инструкцию Copy для приема данных с высокой пропускной способностью](/sql/t-sql/statements/copy-into-transact-sql?view=azure-sqldw-latest&preserve-view=true) и разделите промежуточные файлы в учетной записи хранения, чтобы повысить пропускную способность. Если вы не можете использовать инструкцию COPY, можно использовать API SqlBulkCopy или bcp с большим размером пакета для повышения пропускной способности. Дополнительные рекомендации по загрузке данных см. в следующей [документации](./guidance-for-loading-data.md).